(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function i_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Bm={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function A1(){if(ox)return pc;ox=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:a,key:u,ref:o!==void 0?o:null,props:c}}return pc.Fragment=e,pc.jsx=n,pc.jsxs=n,pc}var lx;function N1(){return lx||(lx=1,Bm.exports=A1()),Bm.exports}var h=N1(),qm={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function C1(){if(cx)return Le;cx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function C(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,L={};function B(M,Z,ce){this.props=M,this.context=Z,this.refs=L,this.updater=ce||U}B.prototype.isReactComponent={},B.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},B.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function H(){}H.prototype=B.prototype;function K(M,Z,ce){this.props=M,this.context=Z,this.refs=L,this.updater=ce||U}var de=K.prototype=new H;de.constructor=K,z(de,B.prototype),de.isPureReactComponent=!0;var ye=Array.isArray;function be(){}var k={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(M,Z,ce){var ve=ce.ref;return{$$typeof:s,type:M,key:Z,ref:ve!==void 0?ve:null,props:ce}}function O(M,Z){return N(M.type,Z,M.props)}function j(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function P(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ce){return Z[ce]})}var R=/\/+/g;function Pe(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):Z.toString(36)}function me(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(be,be):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,Z,ce,ve,Te){var je=typeof M;(je==="undefined"||je==="boolean")&&(M=null);var Ee=!1;if(M===null)Ee=!0;else switch(je){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(M.$$typeof){case s:case e:Ee=!0;break;case x:return Ee=M._init,Y(Ee(M._payload),Z,ce,ve,Te)}}if(Ee)return Te=Te(M),Ee=ve===""?"."+Pe(M,0):ve,ye(Te)?(ce="",Ee!=null&&(ce=Ee.replace(R,"$&/")+"/"),Y(Te,Z,ce,"",function(nn){return nn})):Te!=null&&(j(Te)&&(Te=O(Te,ce+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(R,"$&/")+"/")+Ee)),Z.push(Te)),1;Ee=0;var Xe=ve===""?".":ve+":";if(ye(M))for(var De=0;De<M.length;De++)ve=M[De],je=Xe+Pe(ve,De),Ee+=Y(ve,Z,ce,je,Te);else if(De=C(M),typeof De=="function")for(M=De.call(M),De=0;!(ve=M.next()).done;)ve=ve.value,je=Xe+Pe(ve,De++),Ee+=Y(ve,Z,ce,je,Te);else if(je==="object"){if(typeof M.then=="function")return Y(me(M),Z,ce,ve,Te);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function le(M,Z,ce){if(M==null)return M;var ve=[],Te=0;return Y(M,ve,"","",function(je){return Z.call(ce,je,Te++)}),ve}function ne(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=ce)},function(ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=ce)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var ie=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ce={map:le,forEach:function(M,Z,ce){le(M,function(){Z.apply(this,arguments)},ce)},count:function(M){var Z=0;return le(M,function(){Z++}),Z},toArray:function(M){return le(M,function(Z){return Z})||[]},only:function(M){if(!j(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Le.Activity=_,Le.Children=Ce,Le.Component=B,Le.Fragment=n,Le.Profiler=o,Le.PureComponent=K,Le.StrictMode=a,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Le.__COMPILER_RUNTIME={__proto__:null,c:function(M){return k.H.useMemoCache(M)}},Le.cache=function(M){return function(){return M.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(M,Z,ce){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ve=z({},M.props),Te=M.key;if(Z!=null)for(je in Z.key!==void 0&&(Te=""+Z.key),Z)!A.call(Z,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&Z.ref===void 0||(ve[je]=Z[je]);var je=arguments.length-2;if(je===1)ve.children=ce;else if(1<je){for(var Ee=Array(je),Xe=0;Xe<je;Xe++)Ee[Xe]=arguments[Xe+2];ve.children=Ee}return N(M.type,Te,ve)},Le.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Le.createElement=function(M,Z,ce){var ve,Te={},je=null;if(Z!=null)for(ve in Z.key!==void 0&&(je=""+Z.key),Z)A.call(Z,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Te[ve]=Z[ve]);var Ee=arguments.length-2;if(Ee===1)Te.children=ce;else if(1<Ee){for(var Xe=Array(Ee),De=0;De<Ee;De++)Xe[De]=arguments[De+2];Te.children=Xe}if(M&&M.defaultProps)for(ve in Ee=M.defaultProps,Ee)Te[ve]===void 0&&(Te[ve]=Ee[ve]);return N(M,je,Te)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:g,render:M}},Le.isValidElement=j,Le.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:ne}},Le.memo=function(M,Z){return{$$typeof:y,type:M,compare:Z===void 0?null:Z}},Le.startTransition=function(M){var Z=k.T,ce={};k.T=ce;try{var ve=M(),Te=k.S;Te!==null&&Te(ce,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(be,ie)}catch(je){ie(je)}finally{Z!==null&&ce.types!==null&&(Z.types=ce.types),k.T=Z}},Le.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Le.use=function(M){return k.H.use(M)},Le.useActionState=function(M,Z,ce){return k.H.useActionState(M,Z,ce)},Le.useCallback=function(M,Z){return k.H.useCallback(M,Z)},Le.useContext=function(M){return k.H.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M,Z){return k.H.useDeferredValue(M,Z)},Le.useEffect=function(M,Z){return k.H.useEffect(M,Z)},Le.useEffectEvent=function(M){return k.H.useEffectEvent(M)},Le.useId=function(){return k.H.useId()},Le.useImperativeHandle=function(M,Z,ce){return k.H.useImperativeHandle(M,Z,ce)},Le.useInsertionEffect=function(M,Z){return k.H.useInsertionEffect(M,Z)},Le.useLayoutEffect=function(M,Z){return k.H.useLayoutEffect(M,Z)},Le.useMemo=function(M,Z){return k.H.useMemo(M,Z)},Le.useOptimistic=function(M,Z){return k.H.useOptimistic(M,Z)},Le.useReducer=function(M,Z,ce){return k.H.useReducer(M,Z,ce)},Le.useRef=function(M){return k.H.useRef(M)},Le.useState=function(M){return k.H.useState(M)},Le.useSyncExternalStore=function(M,Z,ce){return k.H.useSyncExternalStore(M,Z,ce)},Le.useTransition=function(){return k.H.useTransition()},Le.version="19.2.0",Le}var ux;function Og(){return ux||(ux=1,qm.exports=C1()),qm.exports}var I=Og();const Fc=i_(I);var Hm={exports:{}},yc={},Fm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function I1(){return dx||(dx=1,(function(s){function e(Y,le){var ne=Y.length;Y.push(le);e:for(;0<ne;){var ie=ne-1>>>1,Ce=Y[ie];if(0<o(Ce,le))Y[ie]=le,Y[ne]=Ce,ne=ie;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var le=Y[0],ne=Y.pop();if(ne!==le){Y[0]=ne;e:for(var ie=0,Ce=Y.length,M=Ce>>>1;ie<M;){var Z=2*(ie+1)-1,ce=Y[Z],ve=Z+1,Te=Y[ve];if(0>o(ce,ne))ve<Ce&&0>o(Te,ce)?(Y[ie]=Te,Y[ve]=ne,ie=ve):(Y[ie]=ce,Y[Z]=ne,ie=Z);else if(ve<Ce&&0>o(Te,ne))Y[ie]=Te,Y[ve]=ne,ie=ve;else break e}}return le}function o(Y,le){var ne=Y.sortIndex-le.sortIndex;return ne!==0?ne:Y.id-le.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,g=u.now();s.unstable_now=function(){return u.now()-g}}var p=[],y=[],x=1,_=null,T=3,C=!1,U=!1,z=!1,L=!1,B=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function de(Y){for(var le=n(y);le!==null;){if(le.callback===null)a(y);else if(le.startTime<=Y)a(y),le.sortIndex=le.expirationTime,e(p,le);else break;le=n(y)}}function ye(Y){if(z=!1,de(Y),!U)if(n(p)!==null)U=!0,be||(be=!0,P());else{var le=n(y);le!==null&&me(ye,le.startTime-Y)}}var be=!1,k=-1,A=5,N=-1;function O(){return L?!0:!(s.unstable_now()-N<A)}function j(){if(L=!1,be){var Y=s.unstable_now();N=Y;var le=!0;try{e:{U=!1,z&&(z=!1,H(k),k=-1),C=!0;var ne=T;try{t:{for(de(Y),_=n(p);_!==null&&!(_.expirationTime>Y&&O());){var ie=_.callback;if(typeof ie=="function"){_.callback=null,T=_.priorityLevel;var Ce=ie(_.expirationTime<=Y);if(Y=s.unstable_now(),typeof Ce=="function"){_.callback=Ce,de(Y),le=!0;break t}_===n(p)&&a(p),de(Y)}else a(p);_=n(p)}if(_!==null)le=!0;else{var M=n(y);M!==null&&me(ye,M.startTime-Y),le=!1}}break e}finally{_=null,T=ne,C=!1}le=void 0}}finally{le?P():be=!1}}}var P;if(typeof K=="function")P=function(){K(j)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Pe=R.port2;R.port1.onmessage=j,P=function(){Pe.postMessage(null)}}else P=function(){B(j,0)};function me(Y,le){k=B(function(){Y(s.unstable_now())},le)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var ne=T;T=le;try{return Y()}finally{T=ne}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ne=T;T=Y;try{return le()}finally{T=ne}},s.unstable_scheduleCallback=function(Y,le,ne){var ie=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ie+ne:ie):ne=ie,Y){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ne+Ce,Y={id:x++,callback:le,priorityLevel:Y,startTime:ne,expirationTime:Ce,sortIndex:-1},ne>ie?(Y.sortIndex=ne,e(y,Y),n(p)===null&&Y===n(y)&&(z?(H(k),k=-1):z=!0,me(ye,ne-ie))):(Y.sortIndex=Ce,e(p,Y),U||C||(U=!0,be||(be=!0,P()))),Y},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(Y){var le=T;return function(){var ne=T;T=le;try{return Y.apply(this,arguments)}finally{T=ne}}}})(Gm)),Gm}var hx;function R1(){return hx||(hx=1,Fm.exports=I1()),Fm.exports}var Qm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function k1(){if(fx)return _n;fx=1;var s=Og();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:p,containerInfo:y,implementation:x}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,_n.createPortal=function(p,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,x)},_n.flushSync=function(p){var y=u.T,x=a.p;try{if(u.T=null,a.p=2,p)return p()}finally{u.T=y,a.p=x,a.d.f()}},_n.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},_n.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},_n.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var x=y.as,_=g(x,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:C}):x==="script"&&a.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_n.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=g(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},_n.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,_=g(x,y.crossOrigin);a.d.L(p,x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_n.preloadModule=function(p,y){if(typeof p=="string")if(y){var x=g(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},_n.requestFormReset=function(p){a.d.r(p)},_n.unstable_batchedUpdates=function(p,y){return p(y)},_n.useFormState=function(p,y,x){return u.H.useFormState(p,y,x)},_n.useFormStatus=function(){return u.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var mx;function j1(){if(mx)return Qm.exports;mx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qm.exports=k1(),Qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function D1(){if(gx)return yc;gx=1;var s=R1(),e=Og(),n=j1();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(a(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(a(188));return r!==t?null:t}for(var i=t,l=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return p(f),t;if(m===l)return p(f),r;m=m.sibling}throw Error(a(188))}if(i.return!==l.return)i=f,l=m;else{for(var b=!1,w=f.child;w;){if(w===i){b=!0,i=f,l=m;break}if(w===l){b=!0,l=f,i=m;break}w=w.sibling}if(!b){for(w=m.child;w;){if(w===i){b=!0,i=m,l=f;break}if(w===l){b=!0,l=m,i=f;break}w=w.sibling}if(!b)throw Error(a(189))}}if(i.alternate!==l)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),K=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case B:return"Profiler";case L:return"StrictMode";case ye:return"Suspense";case be:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case K:return t.displayName||"Context";case H:return(t._context.displayName||"Context")+".Consumer";case de:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:Pe(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return Pe(t(r))}catch{}}return null}var me=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ie=[],Ce=-1;function M(t){return{current:t}}function Z(t){0>Ce||(t.current=ie[Ce],ie[Ce]=null,Ce--)}function ce(t,r){Ce++,ie[Ce]=t.current,t.current=r}var ve=M(null),Te=M(null),je=M(null),Ee=M(null);function Xe(t,r){switch(ce(je,r),ce(Te,t),ce(ve,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Rv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Rv(r),t=kv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(ve),ce(ve,t)}function De(){Z(ve),Z(Te),Z(je)}function nn(t){t.memoizedState!==null&&ce(Ee,t);var r=ve.current,i=kv(r,t.type);r!==i&&(ce(Te,t),ce(ve,i))}function kt(t){Te.current===t&&(Z(ve),Z(Te)),Ee.current===t&&(Z(Ee),hc._currentValue=ne)}var bn,us;function rn(t){if(bn===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);bn=r&&r[1]||"",us=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bn+t+us}var br=!1;function Cn(t,r){if(!t||br)return"";br=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var $=J}Reflect.construct(t,[],se)}else{try{se.call()}catch(J){$=J}t.call(se.prototype)}}else{try{throw Error()}catch(J){$=J}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&$&&typeof J.stack=="string")return[J.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],w=m[1];if(b&&w){var D=b.split(`
`),Q=w.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===Q.length)for(l=D.length-1,f=Q.length-1;1<=l&&0<=f&&D[l]!==Q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==Q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==Q[f]){var ee=`
`+D[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=f);break}}}finally{br=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?rn(i):""}function oe(t,r){switch(t.tag){case 26:case 27:case 5:return rn(t.type);case 16:return rn("Lazy");case 13:return t.child!==r&&r!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return Cn(t.type,!1);case 11:return Cn(t.type.render,!1);case 1:return Cn(t.type,!0);case 31:return rn("Activity");default:return""}}function We(t){try{var r="",i=null;do r+=oe(t,i),i=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var tt=Object.prototype.hasOwnProperty,pt=s.unstable_scheduleCallback,Un=s.unstable_cancelCallback,Qi=s.unstable_shouldYield,ds=s.unstable_requestPaint,dn=s.unstable_now,Lr=s.unstable_getCurrentPriorityLevel,$s=s.unstable_ImmediatePriority,Ks=s.unstable_UserBlockingPriority,_r=s.unstable_NormalPriority,yl=s.unstable_LowPriority,$i=s.unstable_IdlePriority,Ki=s.log,Yi=s.unstable_setDisableYieldValue,zn=null,Jt=null;function In(t){if(typeof Ki=="function"&&Yi(t),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(zn,t)}catch{}}var St=Math.clz32?Math.clz32:ni,ti=Math.log,hs=Math.LN2;function ni(t){return t>>>=0,t===0?32:31-(ti(t)/hs|0)|0}var Bn=256,W=262144,ue=4194304;function Ve(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Be(t,r,i){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?f=Ve(l):(b&=w,b!==0?f=Ve(b):i||(i=w&~t,i!==0&&(f=Ve(i))))):(w=l&~m,w!==0?f=Ve(w):b!==0?f=Ve(b):i||(i=l&~t,i!==0&&(f=Ve(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function jt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ys(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(){var t=ue;return ue<<=1,(ue&62914560)===0&&(ue=4194304),t}function qn(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Rn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pr(t,r,i,l,f,m){var b=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,Q=t.hiddenUpdates;for(i=b&~i;0<i;){var ee=31-St(i),se=1<<ee;w[ee]=0,D[ee]=-1;var $=Q[ee];if($!==null)for(Q[ee]=null,ee=0;ee<$.length;ee++){var J=$[ee];J!==null&&(J.lane&=-536870913)}i&=~se}l!==0&&Ur(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function Ur(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-St(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|i&261930}function Xs(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var l=31-St(i),f=1<<l;f&r|t[l]&r&&(t[l]|=r),i&=~f}}function vl(t,r){var i=r&-r;return i=(i&42)!==0?1:si(i),(i&(t.suspendedLanes|r))!==0?0:i}function si(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function lu(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:ex(t.type))}function Er(t,r){var i=le.p;try{return le.p=t,r()}finally{le.p=i}}var wr=Math.random().toString(36).slice(2),Pt="__reactFiber$"+wr,sn="__reactProps$"+wr,zr="__reactContainer$"+wr,Xi="__reactEvents$"+wr,Qh="__reactListeners$"+wr,cu="__reactHandles$"+wr,uu="__reactResources$"+wr,Br="__reactMarker$"+wr;function Ji(t){delete t[Pt],delete t[sn],delete t[Xi],delete t[Qh],delete t[cu]}function qr(t){var r=t[Pt];if(r)return r;for(var i=t.parentNode;i;){if(r=i[zr]||i[Pt]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Pv(t);t!==null;){if(i=t[Pt])return i;t=Pv(t)}return r}t=i,i=t.parentNode}return null}function ar(t){if(t=t[Pt]||t[zr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Hn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function Hr(t){var r=t[uu];return r||(r=t[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(t){t[Br]=!0}var xl=new Set,bl={};function Fr(t,r){Gr(t,r),Gr(t+"Capture",r)}function Gr(t,r){for(bl[t]=r,t=0;t<r.length;t++)xl.add(r[t])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),El={},wl={};function du(t){return tt.call(wl,t)?!0:tt.call(El,t)?!1:_l.test(t)?wl[t]=!0:(El[t]=!0,!1)}function Wi(t,r,i){if(du(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Fn(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function zt(t,r,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+l)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Js(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Tl(t,r,i){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){i=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ot(t){if(!t._valueTracker){var r=Js(t)?"checked":"value";t._valueTracker=Tl(t,r,""+t[r])}}function ai(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),l="";return t&&(l=Js(t)?t.checked?"true":"false":t.value),t=l,t!==i?(r.setValue(t),!0):!1}function Qr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ii=/[\n"\\]/g;function kn(t){return t.replace(ii,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zi(t,r,i,l,f,m,b,w){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+an(r)):t.value!==""+an(r)&&(t.value=""+an(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Sl(t,b,an(r)):i!=null?Sl(t,b,an(i)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+an(w):t.removeAttribute("name")}function hu(t,r,i,l,f,m,b,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ot(t);return}i=i!=null?""+an(i):"",r=r!=null?""+an(r):i,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),ot(t)}function Sl(t,r,i){r==="number"&&Qr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Ws(t,r,i,l){if(t=t.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=r.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&l&&(t[i].defaultSelected=!0)}else{for(i=""+an(i),r=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function fu(t,r,i){if(r!=null&&(r=""+an(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+an(i):""}function Zs(t,r,i,l){if(r==null){if(l!=null){if(i!=null)throw Error(a(92));if(me(l)){if(1<l.length)throw Error(a(93));l=l[0]}i=l}i==null&&(i=""),r=i}i=an(r),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l),ot(t)}function jn(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var mu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Al(t,r,i){var l=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,i):typeof i!="number"||i===0||mu.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function Nl(t,r,i){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&i[f]!==l&&Al(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Al(t,m,r[m])}function eo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ea=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(t){return ea.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Tr(){}var Cl=null;function ir(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ta=null,$r=null;function oi(t){var r=ar(t);if(r&&(t=r.stateNode)){var i=t[sn]||null;e:switch(t=r.stateNode,r.type){case"input":if(Zi(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+kn(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var l=i[r];if(l!==t&&l.form===t.form){var f=l[sn]||null;if(!f)throw Error(a(90));Zi(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)l=i[r],l.form===t.form&&ai(l)}break e;case"textarea":fu(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&Ws(t,!!i.multiple,r,!1)}}}var no=!1;function na(t,r,i){if(no)return t(r,i);no=!0;try{var l=t(r);return l}finally{if(no=!1,(ta!==null||$r!==null)&&(ld(),ta&&(r=ta,t=$r,$r=ta=null,oi(r),t)))for(r=0;r<t.length;r++)oi(t[r])}}function Sr(t,r){var i=t.stateNode;if(i===null)return null;var l=i[sn]||null;if(l===null)return null;i=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(a(231,r,typeof i));return i}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),li=!1;if(or)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){li=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{li=!1}var Kr=null,Il=null,ci=null;function Rl(){if(ci)return ci;var t,r=Il,i=r.length,l,f="value"in Kr?Kr.value:Kr.textContent,m=f.length;for(t=0;t<i&&r[t]===f[t];t++);var b=i-t;for(l=1;l<=b&&r[i-l]===f[m-l];l++);return ci=f.slice(t,1<l?1-l:void 0)}function ui(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ms(){return!0}function Ar(){return!1}function hn(t){function r(i,l,f,m,b){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(i=t[w],this[w]=i?i(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ms:Ar,this.isPropagationStopped=Ar,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),r}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=hn(gs),ra=_({},gs,{view:0,detail:0}),kl=hn(ra),sa,ro,Xr,so=_({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xr&&(Xr&&t.type==="mousemove"?(sa=t.screenX-Xr.screenX,ro=t.screenY-Xr.screenY):ro=sa=0,Xr=t),sa)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),jl=hn(so),di=_({},so,{dataTransfer:0}),pu=hn(di),yu=_({},ra,{relatedTarget:0}),hi=hn(yu),Dl=_({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=hn(Dl),ao=_({},gs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xu=hn(ao),bu=_({},gs,{data:0}),Jr=hn(bu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=wu[t])?!!r[t]:!1}function aa(){return Tu}var Sn=_({},ra,{key:function(t){if(t.key){var r=_u[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(t){return t.type==="keypress"?ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Su=hn(Sn),Au=_({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=hn(Au),d=_({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),v=hn(d),E=_({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=hn(E),F=_({},so,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),X=hn(F),he=_({},gs,{newState:0,oldState:0}),Ue=hn(he),Dt=[9,13,27,32],st=or&&"CompositionEvent"in window,_t=null;or&&"documentMode"in document&&(_t=document.documentMode);var lr=or&&"TextEvent"in window&&!_t,Wr=or&&(!st||_t&&8<_t&&11>=_t),Nr=" ",Cr=!1;function fi(t,r){switch(t){case"keyup":return Dt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function Xw(t,r){switch(t){case"compositionend":return io(r);case"keypress":return r.which!==32?null:(Cr=!0,Nr);case"textInput":return t=r.data,t===Nr&&Cr?null:t;default:return null}}function Jw(t,r){if(oo)return t==="compositionend"||!st&&fi(t,r)?(t=Rl(),ci=Il=Kr=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wr&&r.locale!=="ko"?null:r.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ww[t.type]:r==="textarea"}function qp(t,r,i,l){ta?$r?$r.push(l):$r=[l]:ta=l,r=gd(r,"onChange"),0<r.length&&(i=new Yr("onChange","change",null,i,l),t.push({event:i,listeners:r}))}var Ol=null,Ml=null;function Zw(t){Tv(t,0)}function Nu(t){var r=Hn(t);if(ai(r))return t}function Hp(t,r){if(t==="change")return r}var Fp=!1;if(or){var $h;if(or){var Kh="oninput"in document;if(!Kh){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),Kh=typeof Gp.oninput=="function"}$h=Kh}else $h=!1;Fp=$h&&(!document.documentMode||9<document.documentMode)}function Qp(){Ol&&(Ol.detachEvent("onpropertychange",$p),Ml=Ol=null)}function $p(t){if(t.propertyName==="value"&&Nu(Ml)){var r=[];qp(r,Ml,t,ir(t)),na(Zw,r)}}function eT(t,r,i){t==="focusin"?(Qp(),Ol=r,Ml=i,Ol.attachEvent("onpropertychange",$p)):t==="focusout"&&Qp()}function tT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(Ml)}function nT(t,r){if(t==="click")return Nu(r)}function rT(t,r){if(t==="input"||t==="change")return Nu(r)}function sT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Gn=typeof Object.is=="function"?Object.is:sT;function Vl(t,r){if(Gn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),l=Object.keys(r);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!tt.call(r,f)||!Gn(t[f],r[f]))return!1}return!0}function Kp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,r){var i=Kp(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=r&&l>=r)return{node:i,offset:r-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Kp(i)}}function Xp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Xp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Jp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Qr(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=Qr(t.document)}return r}function Yh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var aT=or&&"documentMode"in document&&11>=document.documentMode,lo=null,Xh=null,Ll=null,Jh=!1;function Wp(t,r,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Jh||lo==null||lo!==Qr(l)||(l=lo,"selectionStart"in l&&Yh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ll&&Vl(Ll,l)||(Ll=l,l=gd(Xh,"onSelect"),0<l.length&&(r=new Yr("onSelect","select",null,r,i),t.push({event:r,listeners:l}),r.target=lo)))}function mi(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var co={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionrun:mi("Transition","TransitionRun"),transitionstart:mi("Transition","TransitionStart"),transitioncancel:mi("Transition","TransitionCancel"),transitionend:mi("Transition","TransitionEnd")},Wh={},Zp={};or&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function gi(t){if(Wh[t])return Wh[t];if(!co[t])return t;var r=co[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in Zp)return Wh[t]=r[i];return t}var e0=gi("animationend"),t0=gi("animationiteration"),n0=gi("animationstart"),iT=gi("transitionrun"),oT=gi("transitionstart"),lT=gi("transitioncancel"),r0=gi("transitionend"),s0=new Map,Zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zh.push("scrollEnd");function Ir(t,r){s0.set(t,r),Fr(r,[t])}var Cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},cr=[],uo=0,ef=0;function Iu(){for(var t=uo,r=ef=uo=0;r<t;){var i=cr[r];cr[r++]=null;var l=cr[r];cr[r++]=null;var f=cr[r];cr[r++]=null;var m=cr[r];if(cr[r++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}m!==0&&a0(i,f,m)}}function Ru(t,r,i,l){cr[uo++]=t,cr[uo++]=r,cr[uo++]=i,cr[uo++]=l,ef|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function tf(t,r,i,l){return Ru(t,r,i,l),ku(t)}function pi(t,r){return Ru(t,null,null,r),ku(t)}function a0(t,r,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,l=m.alternate,l!==null&&(l.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-St(i),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=i|536870912),m):null}function ku(t){if(50<ac)throw ac=0,dm=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ho={};function cT(t,r,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,r,i,l){return new cT(t,r,i,l)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ys(t,r){var i=t.alternate;return i===null?(i=Qn(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function i0(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ju(t,r,i,l,f,m){var b=0;if(l=t,typeof t=="function")nf(t)&&(b=1);else if(typeof t=="string")b=m1(t,i,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Qn(31,i,r,f),t.elementType=N,t.lanes=m,t;case z:return yi(i.children,f,m,r);case L:b=8,f|=24;break;case B:return t=Qn(12,i,r,f|2),t.elementType=B,t.lanes=m,t;case ye:return t=Qn(13,i,r,f),t.elementType=ye,t.lanes=m,t;case be:return t=Qn(19,i,r,f),t.elementType=be,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:b=10;break e;case H:b=9;break e;case de:b=11;break e;case k:b=14;break e;case A:b=16,l=null;break e}b=29,i=Error(a(130,t===null?"null":typeof t,"")),l=null}return r=Qn(b,i,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function yi(t,r,i,l){return t=Qn(7,t,l,r),t.lanes=i,t}function rf(t,r,i){return t=Qn(6,t,null,r),t.lanes=i,t}function o0(t){var r=Qn(18,null,null,0);return r.stateNode=t,r}function sf(t,r,i){return r=Qn(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var l0=new WeakMap;function ur(t,r){if(typeof t=="object"&&t!==null){var i=l0.get(t);return i!==void 0?i:(r={value:t,source:r,stack:We(r)},l0.set(t,r),r)}return{value:t,source:r,stack:We(r)}}var fo=[],mo=0,Du=null,Pl=0,dr=[],hr=0,ia=null,Zr=1,es="";function vs(t,r){fo[mo++]=Pl,fo[mo++]=Du,Du=t,Pl=r}function c0(t,r,i){dr[hr++]=Zr,dr[hr++]=es,dr[hr++]=ia,ia=t;var l=Zr;t=es;var f=32-St(l)-1;l&=~(1<<f),i+=1;var m=32-St(r)+f;if(30<m){var b=f-f%5;m=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Zr=1<<32-St(r)+f|i<<f|l,es=m+t}else Zr=1<<m|i<<f|l,es=t}function af(t){t.return!==null&&(vs(t,1),c0(t,1,0))}function of(t){for(;t===Du;)Du=fo[--mo],fo[mo]=null,Pl=fo[--mo],fo[mo]=null;for(;t===ia;)ia=dr[--hr],dr[hr]=null,es=dr[--hr],dr[hr]=null,Zr=dr[--hr],dr[hr]=null}function u0(t,r){dr[hr++]=Zr,dr[hr++]=es,dr[hr++]=ia,Zr=r.id,es=r.overflow,ia=t}var fn=null,yt=null,Je=!1,oa=null,fr=!1,lf=Error(a(519));function la(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(ur(r,t)),lf}function d0(t){var r=t.stateNode,i=t.type,l=t.memoizedProps;switch(r[Pt]=t,r[sn]=l,i){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<oc.length;i++)Fe(oc[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),hu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),Zs(r,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||l.suppressHydrationWarning===!0||Cv(r.textContent,i)?(l.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),l.onScroll!=null&&Fe("scroll",r),l.onScrollEnd!=null&&Fe("scrollend",r),l.onClick!=null&&(r.onclick=Tr),r=!0):r=!1,r||la(t,!0)}function h0(t){for(fn=t.return;fn;)switch(fn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:fn=fn.return}}function go(t){if(t!==fn)return!1;if(!Je)return h0(t),Je=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Am(t.type,t.memoizedProps)),i=!i),i&&yt&&la(t),h0(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));yt=Lv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));yt=Lv(t)}else r===27?(r=yt,Ea(t.type)?(t=km,km=null,yt=t):yt=r):yt=fn?gr(t.stateNode.nextSibling):null;return!0}function vi(){yt=fn=null,Je=!1}function cf(){var t=oa;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),oa=null),t}function Ul(t){oa===null?oa=[t]:oa.push(t)}var uf=M(null),xi=null,xs=null;function ca(t,r,i){ce(uf,r._currentValue),r._currentValue=i}function bs(t){t._currentValue=uf.current,Z(uf)}function df(t,r,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===i)break;t=t.return}}function hf(t,r,i,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var D=0;D<r.length;D++)if(w.context===r[D]){m.lanes|=i,w=m.alternate,w!==null&&(w.lanes|=i),df(m.return,i,t),l||(b=null);break e}m=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=i,m=b.alternate,m!==null&&(m.lanes|=i),df(b,i,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function po(t,r,i,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var w=f.type;Gn(f.pendingProps.value,b.value)||(t!==null?t.push(w):t=[w])}}else if(f===Ee.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(hc):t=[hc])}f=f.return}t!==null&&hf(r,t,i,l),r.flags|=262144}function Ou(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function bi(t){xi=t,xs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mn(t){return f0(xi,t)}function Mu(t,r){return xi===null&&bi(t),f0(t,r)}function f0(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},xs===null){if(t===null)throw Error(a(308));xs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else xs=xs.next=r;return i}var uT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},dT=s.unstable_scheduleCallback,hT=s.unstable_NormalPriority,Bt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new uT,data:new Map,refCount:0}}function zl(t){t.refCount--,t.refCount===0&&dT(hT,function(){t.controller.abort()})}var Bl=null,mf=0,yo=0,vo=null;function fT(t,r){if(Bl===null){var i=Bl=[];mf=0,yo=ym(),vo={status:"pending",value:void 0,then:function(l){i.push(l)}}}return mf++,r.then(m0,m0),r}function m0(){if(--mf===0&&Bl!==null){vo!==null&&(vo.status="fulfilled");var t=Bl;Bl=null,yo=0,vo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function mT(t,r){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var g0=Y.S;Y.S=function(t,r){Wy=dn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&fT(t,r),g0!==null&&g0(t,r)};var _i=M(null);function gf(){var t=_i.current;return t!==null?t:gt.pooledCache}function Vu(t,r){r===null?ce(_i,_i.current):ce(_i,r.pool)}function p0(){var t=gf();return t===null?null:{parent:Bt._currentValue,pool:t}}var xo=Error(a(460)),pf=Error(a(474)),Lu=Error(a(542)),Pu={then:function(){}};function y0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function v0(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(Tr,Tr),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,b0(t),t;default:if(typeof r.status=="string")r.then(Tr,Tr);else{if(t=gt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,b0(t),t}throw wi=r,xo}}function Ei(t){try{var r=t._init;return r(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(wi=i,xo):i}}var wi=null;function x0(){if(wi===null)throw Error(a(459));var t=wi;return wi=null,t}function b0(t){if(t===xo||t===Lu)throw Error(a(483))}var bo=null,ql=0;function Uu(t){var r=ql;return ql+=1,bo===null&&(bo=[]),v0(bo,t,r)}function Hl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function zu(t,r){throw r.$$typeof===T?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function _0(t){function r(q,V){if(t){var G=q.deletions;G===null?(q.deletions=[V],q.flags|=16):G.push(V)}}function i(q,V){if(!t)return null;for(;V!==null;)r(q,V),V=V.sibling;return null}function l(q){for(var V=new Map;q!==null;)q.key!==null?V.set(q.key,q):V.set(q.index,q),q=q.sibling;return V}function f(q,V){return q=ys(q,V),q.index=0,q.sibling=null,q}function m(q,V,G){return q.index=G,t?(G=q.alternate,G!==null?(G=G.index,G<V?(q.flags|=67108866,V):G):(q.flags|=67108866,V)):(q.flags|=1048576,V)}function b(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function w(q,V,G,re){return V===null||V.tag!==6?(V=rf(G,q.mode,re),V.return=q,V):(V=f(V,G),V.return=q,V)}function D(q,V,G,re){var Ae=G.type;return Ae===z?ee(q,V,G.props.children,re,G.key):V!==null&&(V.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===A&&Ei(Ae)===V.type)?(V=f(V,G.props),Hl(V,G),V.return=q,V):(V=ju(G.type,G.key,G.props,null,q.mode,re),Hl(V,G),V.return=q,V)}function Q(q,V,G,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=sf(G,q.mode,re),V.return=q,V):(V=f(V,G.children||[]),V.return=q,V)}function ee(q,V,G,re,Ae){return V===null||V.tag!==7?(V=yi(G,q.mode,re,Ae),V.return=q,V):(V=f(V,G),V.return=q,V)}function se(q,V,G){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=rf(""+V,q.mode,G),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case C:return G=ju(V.type,V.key,V.props,null,q.mode,G),Hl(G,V),G.return=q,G;case U:return V=sf(V,q.mode,G),V.return=q,V;case A:return V=Ei(V),se(q,V,G)}if(me(V)||P(V))return V=yi(V,q.mode,G,null),V.return=q,V;if(typeof V.then=="function")return se(q,Uu(V),G);if(V.$$typeof===K)return se(q,Mu(q,V),G);zu(q,V)}return null}function $(q,V,G,re){var Ae=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ae!==null?null:w(q,V,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return G.key===Ae?D(q,V,G,re):null;case U:return G.key===Ae?Q(q,V,G,re):null;case A:return G=Ei(G),$(q,V,G,re)}if(me(G)||P(G))return Ae!==null?null:ee(q,V,G,re,null);if(typeof G.then=="function")return $(q,V,Uu(G),re);if(G.$$typeof===K)return $(q,V,Mu(q,G),re);zu(q,G)}return null}function J(q,V,G,re,Ae){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(G)||null,w(V,q,""+re,Ae);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return q=q.get(re.key===null?G:re.key)||null,D(V,q,re,Ae);case U:return q=q.get(re.key===null?G:re.key)||null,Q(V,q,re,Ae);case A:return re=Ei(re),J(q,V,G,re,Ae)}if(me(re)||P(re))return q=q.get(G)||null,ee(V,q,re,Ae,null);if(typeof re.then=="function")return J(q,V,G,Uu(re),Ae);if(re.$$typeof===K)return J(q,V,G,Mu(V,re),Ae);zu(V,re)}return null}function _e(q,V,G,re){for(var Ae=null,nt=null,we=V,qe=V=0,Qe=null;we!==null&&qe<G.length;qe++){we.index>qe?(Qe=we,we=null):Qe=we.sibling;var rt=$(q,we,G[qe],re);if(rt===null){we===null&&(we=Qe);break}t&&we&&rt.alternate===null&&r(q,we),V=m(rt,V,qe),nt===null?Ae=rt:nt.sibling=rt,nt=rt,we=Qe}if(qe===G.length)return i(q,we),Je&&vs(q,qe),Ae;if(we===null){for(;qe<G.length;qe++)we=se(q,G[qe],re),we!==null&&(V=m(we,V,qe),nt===null?Ae=we:nt.sibling=we,nt=we);return Je&&vs(q,qe),Ae}for(we=l(we);qe<G.length;qe++)Qe=J(we,q,qe,G[qe],re),Qe!==null&&(t&&Qe.alternate!==null&&we.delete(Qe.key===null?qe:Qe.key),V=m(Qe,V,qe),nt===null?Ae=Qe:nt.sibling=Qe,nt=Qe);return t&&we.forEach(function(Na){return r(q,Na)}),Je&&vs(q,qe),Ae}function Ie(q,V,G,re){if(G==null)throw Error(a(151));for(var Ae=null,nt=null,we=V,qe=V=0,Qe=null,rt=G.next();we!==null&&!rt.done;qe++,rt=G.next()){we.index>qe?(Qe=we,we=null):Qe=we.sibling;var Na=$(q,we,rt.value,re);if(Na===null){we===null&&(we=Qe);break}t&&we&&Na.alternate===null&&r(q,we),V=m(Na,V,qe),nt===null?Ae=Na:nt.sibling=Na,nt=Na,we=Qe}if(rt.done)return i(q,we),Je&&vs(q,qe),Ae;if(we===null){for(;!rt.done;qe++,rt=G.next())rt=se(q,rt.value,re),rt!==null&&(V=m(rt,V,qe),nt===null?Ae=rt:nt.sibling=rt,nt=rt);return Je&&vs(q,qe),Ae}for(we=l(we);!rt.done;qe++,rt=G.next())rt=J(we,q,qe,rt.value,re),rt!==null&&(t&&rt.alternate!==null&&we.delete(rt.key===null?qe:rt.key),V=m(rt,V,qe),nt===null?Ae=rt:nt.sibling=rt,nt=rt);return t&&we.forEach(function(S1){return r(q,S1)}),Je&&vs(q,qe),Ae}function ft(q,V,G,re){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case C:e:{for(var Ae=G.key;V!==null;){if(V.key===Ae){if(Ae=G.type,Ae===z){if(V.tag===7){i(q,V.sibling),re=f(V,G.props.children),re.return=q,q=re;break e}}else if(V.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===A&&Ei(Ae)===V.type){i(q,V.sibling),re=f(V,G.props),Hl(re,G),re.return=q,q=re;break e}i(q,V);break}else r(q,V);V=V.sibling}G.type===z?(re=yi(G.props.children,q.mode,re,G.key),re.return=q,q=re):(re=ju(G.type,G.key,G.props,null,q.mode,re),Hl(re,G),re.return=q,q=re)}return b(q);case U:e:{for(Ae=G.key;V!==null;){if(V.key===Ae)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){i(q,V.sibling),re=f(V,G.children||[]),re.return=q,q=re;break e}else{i(q,V);break}else r(q,V);V=V.sibling}re=sf(G,q.mode,re),re.return=q,q=re}return b(q);case A:return G=Ei(G),ft(q,V,G,re)}if(me(G))return _e(q,V,G,re);if(P(G)){if(Ae=P(G),typeof Ae!="function")throw Error(a(150));return G=Ae.call(G),Ie(q,V,G,re)}if(typeof G.then=="function")return ft(q,V,Uu(G),re);if(G.$$typeof===K)return ft(q,V,Mu(q,G),re);zu(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,V!==null&&V.tag===6?(i(q,V.sibling),re=f(V,G),re.return=q,q=re):(i(q,V),re=rf(G,q.mode,re),re.return=q,q=re),b(q)):i(q,V)}return function(q,V,G,re){try{ql=0;var Ae=ft(q,V,G,re);return bo=null,Ae}catch(we){if(we===xo||we===Lu)throw we;var nt=Qn(29,we,null,q.mode);return nt.lanes=re,nt.return=q,nt}finally{}}}var Ti=_0(!0),E0=_0(!1),ua=!1;function yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function da(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ha(t,r,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=ku(t),a0(t,null,i),r}return Ru(t,l,r,i),ku(t)}function Fl(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,i|=l,r.lanes=i,Xs(t,i)}}function xf(t,r){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var bf=!1;function Gl(){if(bf){var t=vo;if(t!==null)throw t}}function Ql(t,r,i,l){bf=!1;var f=t.updateQueue;ua=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var D=w,Q=D.next;D.next=null,b===null?m=Q:b.next=Q,b=D;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==b&&(w===null?ee.firstBaseUpdate=Q:w.next=Q,ee.lastBaseUpdate=D))}if(m!==null){var se=f.baseState;b=0,ee=Q=D=null,w=m;do{var $=w.lane&-536870913,J=$!==w.lane;if(J?(Ge&$)===$:(l&$)===$){$!==0&&$===yo&&(bf=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var _e=t,Ie=w;$=r;var ft=i;switch(Ie.tag){case 1:if(_e=Ie.payload,typeof _e=="function"){se=_e.call(ft,se,$);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ie.payload,$=typeof _e=="function"?_e.call(ft,se,$):_e,$==null)break e;se=_({},se,$);break e;case 2:ua=!0}}$=w.callback,$!==null&&(t.flags|=64,J&&(t.flags|=8192),J=f.callbacks,J===null?f.callbacks=[$]:J.push($))}else J={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(Q=ee=J,D=se):ee=ee.next=J,b|=$;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;J=w,w=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);ee===null&&(D=se),f.baseState=D,f.firstBaseUpdate=Q,f.lastBaseUpdate=ee,m===null&&(f.shared.lanes=0),ya|=b,t.lanes=b,t.memoizedState=se}}function w0(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function T0(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)w0(i[t],r)}var _o=M(null),Bu=M(0);function S0(t,r){t=Is,ce(Bu,t),ce(_o,r),Is=t|r.baseLanes}function _f(){ce(Bu,Is),ce(_o,_o.current)}function Ef(){Is=Bu.current,Z(_o),Z(Bu)}var $n=M(null),mr=null;function fa(t){var r=t.alternate;ce(Ot,Ot.current&1),ce($n,t),mr===null&&(r===null||_o.current!==null||r.memoizedState!==null)&&(mr=t)}function wf(t){ce(Ot,Ot.current),ce($n,t),mr===null&&(mr=t)}function A0(t){t.tag===22?(ce(Ot,Ot.current),ce($n,t),mr===null&&(mr=t)):ma()}function ma(){ce(Ot,Ot.current),ce($n,$n.current)}function Kn(t){Z($n),mr===t&&(mr=null),Z(Ot)}var Ot=M(0);function qu(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Im(i)||Rm(i)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var _s=0,ze=null,dt=null,qt=null,Hu=!1,Eo=!1,Si=!1,Fu=0,$l=0,wo=null,gT=0;function Nt(){throw Error(a(321))}function Tf(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!Gn(t[i],r[i]))return!1;return!0}function Sf(t,r,i,l,f,m){return _s=m,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?cy:zf,Si=!1,m=i(l,f),Si=!1,Eo&&(m=C0(r,i,l,f)),N0(t),m}function N0(t){Y.H=Xl;var r=dt!==null&&dt.next!==null;if(_s=0,qt=dt=ze=null,Hu=!1,$l=0,wo=null,r)throw Error(a(300));t===null||Ht||(t=t.dependencies,t!==null&&Ou(t)&&(Ht=!0))}function C0(t,r,i,l){ze=t;var f=0;do{if(Eo&&(wo=null),$l=0,Eo=!1,25<=f)throw Error(a(301));if(f+=1,qt=dt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=uy,m=r(i,l)}while(Eo);return m}function pT(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?Kl(r):r,t=t.useState()[0],(dt!==null?dt.memoizedState:null)!==t&&(ze.flags|=1024),r}function Af(){var t=Fu!==0;return Fu=0,t}function Nf(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function Cf(t){if(Hu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Hu=!1}_s=0,qt=dt=ze=null,Eo=!1,$l=Fu=0,wo=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?ze.memoizedState=qt=t:qt=qt.next=t,qt}function Mt(){if(dt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var r=qt===null?ze.memoizedState:qt.next;if(r!==null)qt=r,dt=t;else{if(t===null)throw ze.alternate===null?Error(a(467)):Error(a(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},qt===null?ze.memoizedState=qt=t:qt=qt.next=t}return qt}function Gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(t){var r=$l;return $l+=1,wo===null&&(wo=[]),t=v0(wo,t,r),r=ze,(qt===null?r.memoizedState:qt.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?cy:zf),t}function Qu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Kl(t);if(t.$$typeof===K)return mn(t)}throw Error(a(438,String(t)))}function If(t){var r=null,i=ze.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=Gu(),ze.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),l=0;l<t;l++)i[l]=O;return r.index++,i}function Es(t,r){return typeof r=="function"?r(t):r}function $u(t){var r=Mt();return Rf(r,dt,t)}function Rf(t,r,i){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=i;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var w=b=null,D=null,Q=r,ee=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Ge&se)===se:(_s&se)===se){var $=Q.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===yo&&(ee=!0);else if((_s&$)===$){Q=Q.next,$===yo&&(ee=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(w=D=se,b=m):D=D.next=se,ze.lanes|=$,ya|=$;se=Q.action,Si&&i(m,se),m=Q.hasEagerState?Q.eagerState:i(m,se)}else $={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(w=D=$,b=m):D=D.next=$,ze.lanes|=se,ya|=se;Q=Q.next}while(Q!==null&&Q!==r);if(D===null?b=m:D.next=w,!Gn(m,t.memoizedState)&&(Ht=!0,ee&&(i=vo,i!==null)))throw i;t.memoizedState=m,t.baseState=b,t.baseQueue=D,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function kf(t){var r=Mt(),i=r.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=t;var l=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Gn(m,r.memoizedState)||(Ht=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,l]}function I0(t,r,i){var l=ze,f=Mt(),m=Je;if(m){if(i===void 0)throw Error(a(407));i=i()}else i=r();var b=!Gn((dt||f).memoizedState,i);if(b&&(f.memoizedState=i,Ht=!0),f=f.queue,Of(j0.bind(null,l,f,t),[t]),f.getSnapshot!==r||b||qt!==null&&qt.memoizedState.tag&1){if(l.flags|=2048,To(9,{destroy:void 0},k0.bind(null,l,f,i,r),null),gt===null)throw Error(a(349));m||(_s&127)!==0||R0(l,r,i)}return i}function R0(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=ze.updateQueue,r===null?(r=Gu(),ze.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function k0(t,r,i,l){r.value=i,r.getSnapshot=l,D0(r)&&O0(t)}function j0(t,r,i){return i(function(){D0(r)&&O0(t)})}function D0(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!Gn(t,i)}catch{return!0}}function O0(t){var r=pi(t,2);r!==null&&Ln(r,t,2)}function jf(t){var r=An();if(typeof t=="function"){var i=t;if(t=i(),Si){In(!0);try{i()}finally{In(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},r}function M0(t,r,i,l){return t.baseState=i,Rf(t,dt,typeof l=="function"?l:Es)}function yT(t,r,i,l,f){if(Xu(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?i(!0):m.isTransition=!1,l(m),i=r.pending,i===null?(m.next=r.pending=m,V0(r,m)):(m.next=i.next,r.pending=i.next=m)}}function V0(t,r){var i=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var w=i(f,l),D=Y.S;D!==null&&D(b,w),L0(t,r,w)}catch(Q){Df(t,r,Q)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=i(f,l),L0(t,r,m)}catch(Q){Df(t,r,Q)}}function L0(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){P0(t,r,l)},function(l){return Df(t,r,l)}):P0(t,r,i)}function P0(t,r,i){r.status="fulfilled",r.value=i,U0(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,V0(t,i)))}function Df(t,r,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=i,U0(r),r=r.next;while(r!==l)}t.action=null}function U0(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function z0(t,r){return r}function B0(t,r){if(Je){var i=gt.formState;if(i!==null){e:{var l=ze;if(Je){if(yt){t:{for(var f=yt,m=fr;f.nodeType!==8;){if(!m){f=null;break t}if(f=gr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){yt=gr(f.nextSibling),l=f.data==="F!";break e}}la(l)}l=!1}l&&(r=i[0])}}return i=An(),i.memoizedState=i.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z0,lastRenderedState:r},i.queue=l,i=iy.bind(null,ze,l),l.dispatch=i,l=jf(!1),m=Uf.bind(null,ze,!1,l.queue),l=An(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,i=yT.bind(null,ze,f,m,i),f.dispatch=i,l.memoizedState=t,[r,i,!1]}function q0(t){var r=Mt();return H0(r,dt,t)}function H0(t,r,i){if(r=Rf(t,r,z0)[0],t=$u(Es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Kl(r)}catch(b){throw b===xo?Lu:b}else l=r;r=Mt();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(ze.flags|=2048,To(9,{destroy:void 0},vT.bind(null,f,i),null)),[l,m,t]}function vT(t,r){t.action=r}function F0(t){var r=Mt(),i=dt;if(i!==null)return H0(r,i,t);Mt(),r=r.memoizedState,i=Mt();var l=i.queue.dispatch;return i.memoizedState=t,[r,l,!1]}function To(t,r,i,l){return t={tag:t,create:i,deps:l,inst:r,next:null},r=ze.updateQueue,r===null&&(r=Gu(),ze.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,r.lastEffect=t),t}function G0(){return Mt().memoizedState}function Ku(t,r,i,l){var f=An();ze.flags|=t,f.memoizedState=To(1|r,{destroy:void 0},i,l===void 0?null:l)}function Yu(t,r,i,l){var f=Mt();l=l===void 0?null:l;var m=f.memoizedState.inst;dt!==null&&l!==null&&Tf(l,dt.memoizedState.deps)?f.memoizedState=To(r,m,i,l):(ze.flags|=t,f.memoizedState=To(1|r,m,i,l))}function Q0(t,r){Ku(8390656,8,t,r)}function Of(t,r){Yu(2048,8,t,r)}function xT(t){ze.flags|=4;var r=ze.updateQueue;if(r===null)r=Gu(),ze.updateQueue=r,r.events=[t];else{var i=r.events;i===null?r.events=[t]:i.push(t)}}function $0(t){var r=Mt().memoizedState;return xT({ref:r,nextImpl:t}),function(){if((at&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function K0(t,r){return Yu(4,2,t,r)}function Y0(t,r){return Yu(4,4,t,r)}function X0(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function J0(t,r,i){i=i!=null?i.concat([t]):null,Yu(4,4,X0.bind(null,r,t),i)}function Mf(){}function W0(t,r){var i=Mt();r=r===void 0?null:r;var l=i.memoizedState;return r!==null&&Tf(r,l[1])?l[0]:(i.memoizedState=[t,r],t)}function Z0(t,r){var i=Mt();r=r===void 0?null:r;var l=i.memoizedState;if(r!==null&&Tf(r,l[1]))return l[0];if(l=t(),Si){In(!0);try{t()}finally{In(!1)}}return i.memoizedState=[l,r],l}function Vf(t,r,i){return i===void 0||(_s&1073741824)!==0&&(Ge&261930)===0?t.memoizedState=r:(t.memoizedState=i,t=ev(),ze.lanes|=t,ya|=t,i)}function ey(t,r,i,l){return Gn(i,r)?i:_o.current!==null?(t=Vf(t,i,l),Gn(t,r)||(Ht=!0),t):(_s&42)===0||(_s&1073741824)!==0&&(Ge&261930)===0?(Ht=!0,t.memoizedState=i):(t=ev(),ze.lanes|=t,ya|=t,r)}function ty(t,r,i,l,f){var m=le.p;le.p=m!==0&&8>m?m:8;var b=Y.T,w={};Y.T=w,Uf(t,!1,r,i);try{var D=f(),Q=Y.S;if(Q!==null&&Q(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ee=mT(D,l);Yl(t,r,ee,Jn(t))}else Yl(t,r,l,Jn(t))}catch(se){Yl(t,r,{then:function(){},status:"rejected",reason:se},Jn())}finally{le.p=m,b!==null&&w.types!==null&&(b.types=w.types),Y.T=b}}function bT(){}function Lf(t,r,i,l){if(t.tag!==5)throw Error(a(476));var f=ny(t).queue;ty(t,f,r,ne,i===null?bT:function(){return ry(t),i(l)})}function ny(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:ne},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ry(t){var r=ny(t);r.next===null&&(r=t.alternate.memoizedState),Yl(t,r.next.queue,{},Jn())}function Pf(){return mn(hc)}function sy(){return Mt().memoizedState}function ay(){return Mt().memoizedState}function _T(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=Jn();t=da(i);var l=ha(r,t,i);l!==null&&(Ln(l,r,i),Fl(l,r,i)),r={cache:ff()},t.payload=r;return}r=r.return}}function ET(t,r,i){var l=Jn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Xu(t)?oy(r,i):(i=tf(t,r,i,l),i!==null&&(Ln(i,t,l),ly(i,r,l)))}function iy(t,r,i){var l=Jn();Yl(t,r,i,l)}function Yl(t,r,i,l){var f={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xu(t))oy(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,w=m(b,i);if(f.hasEagerState=!0,f.eagerState=w,Gn(w,b))return Ru(t,r,f,0),gt===null&&Iu(),!1}catch{}finally{}if(i=tf(t,r,f,l),i!==null)return Ln(i,t,l),ly(i,r,l),!0}return!1}function Uf(t,r,i,l){if(l={lane:2,revertLane:ym(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Xu(t)){if(r)throw Error(a(479))}else r=tf(t,i,l,2),r!==null&&Ln(r,t,2)}function Xu(t){var r=t.alternate;return t===ze||r!==null&&r===ze}function oy(t,r){Eo=Hu=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function ly(t,r,i){if((i&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,i|=l,r.lanes=i,Xs(t,i)}}var Xl={readContext:mn,use:Qu,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Xl.useEffectEvent=Nt;var cy={readContext:mn,use:Qu,useCallback:function(t,r){return An().memoizedState=[t,r===void 0?null:r],t},useContext:mn,useEffect:Q0,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,Ku(4194308,4,X0.bind(null,r,t),i)},useLayoutEffect:function(t,r){return Ku(4194308,4,t,r)},useInsertionEffect:function(t,r){Ku(4,2,t,r)},useMemo:function(t,r){var i=An();r=r===void 0?null:r;var l=t();if(Si){In(!0);try{t()}finally{In(!1)}}return i.memoizedState=[l,r],l},useReducer:function(t,r,i){var l=An();if(i!==void 0){var f=i(r);if(Si){In(!0);try{i(r)}finally{In(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=ET.bind(null,ze,t),[l.memoizedState,t]},useRef:function(t){var r=An();return t={current:t},r.memoizedState=t},useState:function(t){t=jf(t);var r=t.queue,i=iy.bind(null,ze,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:Mf,useDeferredValue:function(t,r){var i=An();return Vf(i,t,r)},useTransition:function(){var t=jf(!1);return t=ty.bind(null,ze,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var l=ze,f=An();if(Je){if(i===void 0)throw Error(a(407));i=i()}else{if(i=r(),gt===null)throw Error(a(349));(Ge&127)!==0||R0(l,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,Q0(j0.bind(null,l,m,t),[t]),l.flags|=2048,To(9,{destroy:void 0},k0.bind(null,l,m,i,r),null),i},useId:function(){var t=An(),r=gt.identifierPrefix;if(Je){var i=es,l=Zr;i=(l&~(1<<32-St(l)-1)).toString(32)+i,r="_"+r+"R_"+i,i=Fu++,0<i&&(r+="H"+i.toString(32)),r+="_"}else i=gT++,r="_"+r+"r_"+i.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Pf,useFormState:B0,useActionState:B0,useOptimistic:function(t){var r=An();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=Uf.bind(null,ze,!0,i),i.dispatch=r,[t,r]},useMemoCache:If,useCacheRefresh:function(){return An().memoizedState=_T.bind(null,ze)},useEffectEvent:function(t){var r=An(),i={impl:t};return r.memoizedState=i,function(){if((at&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},zf={readContext:mn,use:Qu,useCallback:W0,useContext:mn,useEffect:Of,useImperativeHandle:J0,useInsertionEffect:K0,useLayoutEffect:Y0,useMemo:Z0,useReducer:$u,useRef:G0,useState:function(){return $u(Es)},useDebugValue:Mf,useDeferredValue:function(t,r){var i=Mt();return ey(i,dt.memoizedState,t,r)},useTransition:function(){var t=$u(Es)[0],r=Mt().memoizedState;return[typeof t=="boolean"?t:Kl(t),r]},useSyncExternalStore:I0,useId:sy,useHostTransitionStatus:Pf,useFormState:q0,useActionState:q0,useOptimistic:function(t,r){var i=Mt();return M0(i,dt,t,r)},useMemoCache:If,useCacheRefresh:ay};zf.useEffectEvent=$0;var uy={readContext:mn,use:Qu,useCallback:W0,useContext:mn,useEffect:Of,useImperativeHandle:J0,useInsertionEffect:K0,useLayoutEffect:Y0,useMemo:Z0,useReducer:kf,useRef:G0,useState:function(){return kf(Es)},useDebugValue:Mf,useDeferredValue:function(t,r){var i=Mt();return dt===null?Vf(i,t,r):ey(i,dt.memoizedState,t,r)},useTransition:function(){var t=kf(Es)[0],r=Mt().memoizedState;return[typeof t=="boolean"?t:Kl(t),r]},useSyncExternalStore:I0,useId:sy,useHostTransitionStatus:Pf,useFormState:F0,useActionState:F0,useOptimistic:function(t,r){var i=Mt();return dt!==null?M0(i,dt,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:If,useCacheRefresh:ay};uy.useEffectEvent=$0;function Bf(t,r,i,l){r=t.memoizedState,i=i(l,r),i=i==null?r:_({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var qf={enqueueSetState:function(t,r,i){t=t._reactInternals;var l=Jn(),f=da(l);f.payload=r,i!=null&&(f.callback=i),r=ha(t,f,l),r!==null&&(Ln(r,t,l),Fl(r,t,l))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var l=Jn(),f=da(l);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=ha(t,f,l),r!==null&&(Ln(r,t,l),Fl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Jn(),l=da(i);l.tag=2,r!=null&&(l.callback=r),r=ha(t,l,i),r!==null&&(Ln(r,t,i),Fl(r,t,i))}};function dy(t,r,i,l,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,b):r.prototype&&r.prototype.isPureReactComponent?!Vl(i,l)||!Vl(f,m):!0}function hy(t,r,i,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,l),r.state!==t&&qf.enqueueReplaceState(r,r.state,null)}function Ai(t,r){var i=r;if("ref"in r){i={};for(var l in r)l!=="ref"&&(i[l]=r[l])}if(t=t.defaultProps){i===r&&(i=_({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function fy(t){Cu(t)}function my(t){console.error(t)}function gy(t){Cu(t)}function Ju(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function py(t,r,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hf(t,r,i){return i=da(i),i.tag=3,i.payload={element:null},i.callback=function(){Ju(t,r)},i}function yy(t){return t=da(t),t.tag=3,t}function vy(t,r,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){py(r,i,l)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){py(r,i,l),typeof f!="function"&&(va===null?va=new Set([this]):va.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function wT(t,r,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=i.alternate,r!==null&&po(r,i,f,!0),i=$n.current,i!==null){switch(i.tag){case 31:case 13:return mr===null?cd():i.alternate===null&&Ct===0&&(Ct=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===Pu?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([l]):r.add(l),mm(t,l,f)),!1;case 22:return i.flags|=65536,l===Pu?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([l]):i.add(l)),mm(t,l,f)),!1}throw Error(a(435,i.tag))}return mm(t,l,f),cd(),!1}if(Je)return r=$n.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==lf&&(t=Error(a(422),{cause:l}),Ul(ur(t,i)))):(l!==lf&&(r=Error(a(423),{cause:l}),Ul(ur(r,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ur(l,i),f=Hf(t.stateNode,l,f),xf(t,f),Ct!==4&&(Ct=2)),!1;var m=Error(a(520),{cause:l});if(m=ur(m,i),sc===null?sc=[m]:sc.push(m),Ct!==4&&(Ct=2),r===null)return!0;l=ur(l,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Hf(i.stateNode,l,t),xf(i,t),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(va===null||!va.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=yy(f),vy(f,t,i,l),xf(i,f),!1}i=i.return}while(i!==null);return!1}var Ff=Error(a(461)),Ht=!1;function gn(t,r,i,l){r.child=t===null?E0(r,null,i,l):Ti(r,t.child,i,l)}function xy(t,r,i,l,f){i=i.render;var m=r.ref;if("ref"in l){var b={};for(var w in l)w!=="ref"&&(b[w]=l[w])}else b=l;return bi(r),l=Sf(t,r,i,b,m,f),w=Af(),t!==null&&!Ht?(Nf(t,r,f),ws(t,r,f)):(Je&&w&&af(r),r.flags|=1,gn(t,r,l,f),r.child)}function by(t,r,i,l,f){if(t===null){var m=i.type;return typeof m=="function"&&!nf(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,_y(t,r,m,l,f)):(t=ju(i.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Wf(t,f)){var b=m.memoizedProps;if(i=i.compare,i=i!==null?i:Vl,i(b,l)&&t.ref===r.ref)return ws(t,r,f)}return r.flags|=1,t=ys(m,l),t.ref=r.ref,t.return=r,r.child=t}function _y(t,r,i,l,f){if(t!==null){var m=t.memoizedProps;if(Vl(m,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=m,Wf(t,f))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,ws(t,r,f)}return Gf(t,r,i,l,f)}function Ey(t,r,i,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return wy(t,r,m,i,l)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vu(r,m!==null?m.cachePool:null),m!==null?S0(r,m):_f(),A0(r);else return l=r.lanes=536870912,wy(t,r,m!==null?m.baseLanes|i:i,i,l)}else m!==null?(Vu(r,m.cachePool),S0(r,m),ma(),r.memoizedState=null):(t!==null&&Vu(r,null),_f(),ma());return gn(t,r,f,i),r.child}function Jl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function wy(t,r,i,l,f){var m=gf();return m=m===null?null:{parent:Bt._currentValue,pool:m},r.memoizedState={baseLanes:i,cachePool:m},t!==null&&Vu(r,null),_f(),A0(r),t!==null&&po(t,r,l,!0),r.childLanes=f,null}function Wu(t,r){return r=ed({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Ty(t,r,i){return Ti(r,t.child,null,i),t=Wu(r,r.pendingProps),t.flags|=2,Kn(r),r.memoizedState=null,t}function TT(t,r,i){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Je){if(l.mode==="hidden")return t=Wu(r,l),r.lanes=536870912,Jl(null,t);if(wf(r),(t=yt)?(t=Vv(t,fr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ia!==null?{id:Zr,overflow:es}:null,retryLane:536870912,hydrationErrors:null},i=o0(t),i.return=r,r.child=i,fn=r,yt=null)):t=null,t===null)throw la(r);return r.lanes=536870912,null}return Wu(r,l)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(wf(r),f)if(r.flags&256)r.flags&=-257,r=Ty(t,r,i);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(Ht||po(t,r,i,!1),f=(i&t.childLanes)!==0,Ht||f){if(l=gt,l!==null&&(b=vl(l,i),b!==0&&b!==m.retryLane))throw m.retryLane=b,pi(t,b),Ln(l,t,b),Ff;cd(),r=Ty(t,r,i)}else t=m.treeContext,yt=gr(b.nextSibling),fn=r,Je=!0,oa=null,fr=!1,t!==null&&u0(r,t),r=Wu(r,l),r.flags|=4096;return r}return t=ys(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Zu(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Gf(t,r,i,l,f){return bi(r),i=Sf(t,r,i,l,void 0,f),l=Af(),t!==null&&!Ht?(Nf(t,r,f),ws(t,r,f)):(Je&&l&&af(r),r.flags|=1,gn(t,r,i,f),r.child)}function Sy(t,r,i,l,f,m){return bi(r),r.updateQueue=null,i=C0(r,l,i,f),N0(t),l=Af(),t!==null&&!Ht?(Nf(t,r,m),ws(t,r,m)):(Je&&l&&af(r),r.flags|=1,gn(t,r,i,m),r.child)}function Ay(t,r,i,l,f){if(bi(r),r.stateNode===null){var m=ho,b=i.contextType;typeof b=="object"&&b!==null&&(m=mn(b)),m=new i(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},yf(r),b=i.contextType,m.context=typeof b=="object"&&b!==null?mn(b):ho,m.state=r.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(Bf(r,i,b,l),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&qf.enqueueReplaceState(m,m.state,null),Ql(r,l,m,f),Gl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var w=r.memoizedProps,D=Ai(i,w);m.props=D;var Q=m.context,ee=i.contextType;b=ho,typeof ee=="object"&&ee!==null&&(b=mn(ee));var se=i.getDerivedStateFromProps;ee=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,ee||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||Q!==b)&&hy(r,m,l,b),ua=!1;var $=r.memoizedState;m.state=$,Ql(r,l,m,f),Gl(),Q=r.memoizedState,w||$!==Q||ua?(typeof se=="function"&&(Bf(r,i,se,l),Q=r.memoizedState),(D=ua||dy(r,i,D,l,$,Q,b))?(ee||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Q),m.props=l,m.state=Q,m.context=b,l=D):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,vf(t,r),b=r.memoizedProps,ee=Ai(i,b),m.props=ee,se=r.pendingProps,$=m.context,Q=i.contextType,D=ho,typeof Q=="object"&&Q!==null&&(D=mn(Q)),w=i.getDerivedStateFromProps,(Q=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==se||$!==D)&&hy(r,m,l,D),ua=!1,$=r.memoizedState,m.state=$,Ql(r,l,m,f),Gl();var J=r.memoizedState;b!==se||$!==J||ua||t!==null&&t.dependencies!==null&&Ou(t.dependencies)?(typeof w=="function"&&(Bf(r,i,w,l),J=r.memoizedState),(ee=ua||dy(r,i,ee,l,$,J,D)||t!==null&&t.dependencies!==null&&Ou(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,J,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,J,D)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=J),m.props=l,m.state=J,m.context=D,l=ee):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Zu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Ti(r,t.child,null,f),r.child=Ti(r,null,i,f)):gn(t,r,i,f),r.memoizedState=m.state,t=r.child):t=ws(t,r,f),t}function Ny(t,r,i,l){return vi(),r.flags|=256,gn(t,r,i,l),r.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(t){return{baseLanes:t,cachePool:p0()}}function Kf(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=Xn),t}function Cy(t,r,i){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(Je){if(f?fa(r):ma(),(t=yt)?(t=Vv(t,fr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ia!==null?{id:Zr,overflow:es}:null,retryLane:536870912,hydrationErrors:null},i=o0(t),i.return=r,r.child=i,fn=r,yt=null)):t=null,t===null)throw la(r);return Rm(t)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(ma(),f=r.mode,w=ed({mode:"hidden",children:w},f),l=yi(l,f,i,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=$f(i),l.childLanes=Kf(t,b,i),r.memoizedState=Qf,Jl(null,l)):(fa(r),Yf(r,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)r.flags&256?(fa(r),r.flags&=-257,r=Xf(t,r,i)):r.memoizedState!==null?(ma(),r.child=t.child,r.flags|=128,r=null):(ma(),w=l.fallback,f=r.mode,l=ed({mode:"visible",children:l.children},f),w=yi(w,f,i,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,Ti(r,t.child,null,i),l=r.child,l.memoizedState=$f(i),l.childLanes=Kf(t,b,i),r.memoizedState=Qf,r=Jl(null,l));else if(fa(r),Rm(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var Q=b.dgst;b=Q,l=Error(a(419)),l.stack="",l.digest=b,Ul({value:l,source:null,stack:null}),r=Xf(t,r,i)}else if(Ht||po(t,r,i,!1),b=(i&t.childLanes)!==0,Ht||b){if(b=gt,b!==null&&(l=vl(b,i),l!==0&&l!==D.retryLane))throw D.retryLane=l,pi(t,l),Ln(b,t,l),Ff;Im(w)||cd(),r=Xf(t,r,i)}else Im(w)?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,yt=gr(w.nextSibling),fn=r,Je=!0,oa=null,fr=!1,t!==null&&u0(r,t),r=Yf(r,l.children),r.flags|=4096);return r}return f?(ma(),w=l.fallback,f=r.mode,D=t.child,Q=D.sibling,l=ys(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,Q!==null?w=ys(Q,w):(w=yi(w,f,i,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,Jl(null,l),l=r.child,w=t.child.memoizedState,w===null?w=$f(i):(f=w.cachePool,f!==null?(D=Bt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=p0(),w={baseLanes:w.baseLanes|i,cachePool:f}),l.memoizedState=w,l.childLanes=Kf(t,b,i),r.memoizedState=Qf,Jl(t.child,l)):(fa(r),i=t.child,t=i.sibling,i=ys(i,{mode:"visible",children:l.children}),i.return=r,i.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=i,r.memoizedState=null,i)}function Yf(t,r){return r=ed({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function ed(t,r){return t=Qn(22,t,null,r),t.lanes=0,t}function Xf(t,r,i){return Ti(r,t.child,null,i),t=Yf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Iy(t,r,i){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),df(t.return,r,i)}function Jf(t,r,i,l,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=i,b.tailMode=f,b.treeForkCount=m)}function Ry(t,r,i){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var b=Ot.current,w=(b&2)!==0;if(w?(b=b&1|2,r.flags|=128):b&=1,ce(Ot,b),gn(t,r,l,i),l=Je?Pl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iy(t,i,r);else if(t.tag===19)Iy(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=r.child,f=null;i!==null;)t=i.alternate,t!==null&&qu(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Jf(r,!1,f,i,m,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&qu(t)===null){r.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Jf(r,!0,i,null,m,l);break;case"together":Jf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ws(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),ya|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(po(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,i=ys(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=ys(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Wf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Ou(t)))}function ST(t,r,i){switch(r.tag){case 3:Xe(r,r.stateNode.containerInfo),ca(r,Bt,t.memoizedState.cache),vi();break;case 27:case 5:nn(r);break;case 4:Xe(r,r.stateNode.containerInfo);break;case 10:ca(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,wf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(fa(r),r.flags|=128,null):(i&r.child.childLanes)!==0?Cy(t,r,i):(fa(r),t=ws(t,r,i),t!==null?t.sibling:null);fa(r);break;case 19:var f=(t.flags&128)!==0;if(l=(i&r.childLanes)!==0,l||(po(t,r,i,!1),l=(i&r.childLanes)!==0),f){if(l)return Ry(t,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Ot,Ot.current),l)break;return null;case 22:return r.lanes=0,Ey(t,r,i,r.pendingProps);case 24:ca(r,Bt,t.memoizedState.cache)}return ws(t,r,i)}function ky(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!Wf(t,i)&&(r.flags&128)===0)return Ht=!1,ST(t,r,i);Ht=(t.flags&131072)!==0}else Ht=!1,Je&&(r.flags&1048576)!==0&&c0(r,Pl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Ei(r.elementType),r.type=t,typeof t=="function")nf(t)?(l=Ai(t,l),r.tag=1,r=Ay(null,r,t,l,i)):(r.tag=0,r=Gf(null,r,t,l,i));else{if(t!=null){var f=t.$$typeof;if(f===de){r.tag=11,r=xy(null,r,t,l,i);break e}else if(f===k){r.tag=14,r=by(null,r,t,l,i);break e}}throw r=Pe(t)||t,Error(a(306,r,""))}}return r;case 0:return Gf(t,r,r.type,r.pendingProps,i);case 1:return l=r.type,f=Ai(l,r.pendingProps),Ay(t,r,l,f,i);case 3:e:{if(Xe(r,r.stateNode.containerInfo),t===null)throw Error(a(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,vf(t,r),Ql(r,l,null,i);var b=r.memoizedState;if(l=b.cache,ca(r,Bt,l),l!==m.cache&&hf(r,[Bt],i,!0),Gl(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Ny(t,r,l,i);break e}else if(l!==f){f=ur(Error(a(424)),r),Ul(f),r=Ny(t,r,l,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=gr(t.firstChild),fn=r,Je=!0,oa=null,fr=!0,i=E0(r,null,l,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(vi(),l===f){r=ws(t,r,i);break e}gn(t,r,l,i)}r=r.child}return r;case 26:return Zu(t,r),t===null?(i=qv(r.type,null,r.pendingProps,null))?r.memoizedState=i:Je||(i=r.type,t=r.pendingProps,l=pd(je.current).createElement(i),l[Pt]=r,l[sn]=t,pn(l,i,t),Ut(l),r.stateNode=l):r.memoizedState=qv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return nn(r),t===null&&Je&&(l=r.stateNode=Uv(r.type,r.pendingProps,je.current),fn=r,fr=!0,f=yt,Ea(r.type)?(km=f,yt=gr(l.firstChild)):yt=f),gn(t,r,r.pendingProps.children,i),Zu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Je&&((f=l=yt)&&(l=t1(l,r.type,r.pendingProps,fr),l!==null?(r.stateNode=l,fn=r,yt=gr(l.firstChild),fr=!1,f=!0):f=!1),f||la(r)),nn(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,l=m.children,Am(f,m)?l=null:b!==null&&Am(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Sf(t,r,pT,null,null,i),hc._currentValue=f),Zu(t,r),gn(t,r,l,i),r.child;case 6:return t===null&&Je&&((t=i=yt)&&(i=n1(i,r.pendingProps,fr),i!==null?(r.stateNode=i,fn=r,yt=null,t=!0):t=!1),t||la(r)),null;case 13:return Cy(t,r,i);case 4:return Xe(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ti(r,null,l,i):gn(t,r,l,i),r.child;case 11:return xy(t,r,r.type,r.pendingProps,i);case 7:return gn(t,r,r.pendingProps,i),r.child;case 8:return gn(t,r,r.pendingProps.children,i),r.child;case 12:return gn(t,r,r.pendingProps.children,i),r.child;case 10:return l=r.pendingProps,ca(r,r.type,l.value),gn(t,r,l.children,i),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,bi(r),f=mn(f),l=l(f),r.flags|=1,gn(t,r,l,i),r.child;case 14:return by(t,r,r.type,r.pendingProps,i);case 15:return _y(t,r,r.type,r.pendingProps,i);case 19:return Ry(t,r,i);case 31:return TT(t,r,i);case 22:return Ey(t,r,i,r.pendingProps);case 24:return bi(r),l=mn(Bt),t===null?(f=gf(),f===null&&(f=gt,m=ff(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:l,cache:f},yf(r),ca(r,Bt,f)):((t.lanes&i)!==0&&(vf(t,r),Ql(r,null,null,i),Gl()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ca(r,Bt,l)):(l=m.cache,ca(r,Bt,l),l!==f.cache&&hf(r,[Bt],i,!0))),gn(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Ts(t){t.flags|=4}function Zf(t,r,i,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(sv())t.flags|=8192;else throw wi=Pu,pf}else t.flags&=-16777217}function jy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$v(r))if(sv())t.flags|=8192;else throw wi=Pu,pf}function td(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ri():536870912,t.lanes|=r,Co|=r)}function Wl(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(r)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=i,r}function AT(t,r,i){var l=r.pendingProps;switch(of(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return i=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),bs(Bt),De(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(go(r)?Ts(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,cf())),vt(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Ts(r),m!==null?(vt(r),jy(r,m)):(vt(r),Zf(r,f,null,l,i))):m?m!==t.memoizedState?(Ts(r),vt(r),jy(r,m)):(vt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ts(r),vt(r),Zf(r,f,t,l,i)),null;case 27:if(kt(r),i=je.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ts(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return vt(r),null}t=ve.current,go(r)?d0(r):(t=Uv(f,l,i),r.stateNode=t,Ts(r))}return vt(r),null;case 5:if(kt(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ts(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return vt(r),null}if(m=ve.current,go(r))d0(r);else{var b=pd(je.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}m[Pt]=r,m[sn]=l;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(pn(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ts(r)}}return vt(r),Zf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,i),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Ts(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(a(166));if(t=je.current,go(r)){if(t=r.stateNode,i=r.memoizedProps,l=null,f=fn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Pt]=r,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Cv(t.nodeValue,i)),t||la(r,!0)}else t=pd(t).createTextNode(l),t[Pt]=r,r.stateNode=t}return vt(r),null;case 31:if(i=r.memoizedState,t===null||t.memoizedState!==null){if(l=go(r),i!==null){if(t===null){if(!l)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Pt]=r}else vi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),t=!1}else i=cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return r.flags&256?(Kn(r),r):(Kn(r),null);if((r.flags&128)!==0)throw Error(a(558))}return vt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=go(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Pt]=r}else vi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),f=!1}else f=cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Kn(r),r):(Kn(r),null)}return Kn(r),(r.flags&128)!==0?(r.lanes=i,r):(i=l!==null,t=t!==null&&t.memoizedState!==null,i&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),i!==t&&i&&(r.child.flags|=8192),td(r,r.updateQueue),vt(r),null);case 4:return De(),t===null&&_m(r.stateNode.containerInfo),vt(r),null;case 10:return bs(r.type),vt(r),null;case 19:if(Z(Ot),l=r.memoizedState,l===null)return vt(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)Wl(l,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=qu(t),m!==null){for(r.flags|=128,Wl(l,!1),t=m.updateQueue,r.updateQueue=t,td(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)i0(i,t),i=i.sibling;return ce(Ot,Ot.current&1|2),Je&&vs(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&dn()>id&&(r.flags|=128,f=!0,Wl(l,!1),r.lanes=4194304)}else{if(!f)if(t=qu(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,td(r,t),Wl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Je)return vt(r),null}else 2*dn()-l.renderingStartTime>id&&i!==536870912&&(r.flags|=128,f=!0,Wl(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=dn(),t.sibling=null,i=Ot.current,ce(Ot,f?i&1|2:i&1),Je&&vs(r,l.treeForkCount),t):(vt(r),null);case 22:case 23:return Kn(r),Ef(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(i&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),i=r.updateQueue,i!==null&&td(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==i&&(r.flags|=2048),t!==null&&Z(_i),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),bs(Bt),vt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function NT(t,r){switch(of(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return bs(Bt),De(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return kt(r),null;case 31:if(r.memoizedState!==null){if(Kn(r),r.alternate===null)throw Error(a(340));vi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Kn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));vi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Z(Ot),null;case 4:return De(),null;case 10:return bs(r.type),null;case 22:case 23:return Kn(r),Ef(),t!==null&&Z(_i),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return bs(Bt),null;case 25:return null;default:return null}}function Dy(t,r){switch(of(r),r.tag){case 3:bs(Bt),De();break;case 26:case 27:case 5:kt(r);break;case 4:De();break;case 31:r.memoizedState!==null&&Kn(r);break;case 13:Kn(r);break;case 19:Z(Ot);break;case 10:bs(r.type);break;case 22:case 23:Kn(r),Ef(),t!==null&&Z(_i);break;case 24:bs(Bt)}}function Zl(t,r){try{var i=r.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&t)===t){l=void 0;var m=i.create,b=i.inst;l=m(),b.destroy=l}i=i.next}while(i!==f)}}catch(w){ct(r,r.return,w)}}function ga(t,r,i){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var b=l.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=r;var D=i,Q=w;try{Q()}catch(ee){ct(f,D,ee)}}}l=l.next}while(l!==m)}}catch(ee){ct(r,r.return,ee)}}function Oy(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{T0(r,i)}catch(l){ct(t,t.return,l)}}}function My(t,r,i){i.props=Ai(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){ct(t,r,l)}}function ec(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof i=="function"?t.refCleanup=i(l):i.current=l}}catch(f){ct(t,r,f)}}function ts(t,r){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){ct(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){ct(t,r,f)}else i.current=null}function Vy(t){var r=t.type,i=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){ct(t,t.return,f)}}function em(t,r,i){try{var l=t.stateNode;YT(l,t.type,i,r),l[sn]=r}catch(f){ct(t,t.return,f)}}function Ly(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ea(t.type)||t.tag===4}function tm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ea(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nm(t,r,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Tr));else if(l!==4&&(l===27&&Ea(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(nm(t,r,i),t=t.sibling;t!==null;)nm(t,r,i),t=t.sibling}function nd(t,r,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(l!==4&&(l===27&&Ea(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(nd(t,r,i),t=t.sibling;t!==null;)nd(t,r,i),t=t.sibling}function Py(t){var r=t.stateNode,i=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);pn(r,l,i),r[Pt]=t,r[sn]=i}catch(m){ct(t,t.return,m)}}var Ss=!1,Ft=!1,rm=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,on=null;function CT(t,r){if(t=t.containerInfo,Tm=wd,t=Jp(t),Yh(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var b=0,w=-1,D=-1,Q=0,ee=0,se=t,$=null;t:for(;;){for(var J;se!==i||f!==0&&se.nodeType!==3||(w=b+f),se!==m||l!==0&&se.nodeType!==3||(D=b+l),se.nodeType===3&&(b+=se.nodeValue.length),(J=se.firstChild)!==null;)$=se,se=J;for(;;){if(se===t)break t;if($===i&&++Q===f&&(w=b),$===m&&++ee===l&&(D=b),(J=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=J}i=w===-1||D===-1?null:{start:w,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(Sm={focusedElem:t,selectionRange:i},wd=!1,on=r;on!==null;)if(r=on,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,on=t;else for(;on!==null;){switch(r=on,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,l=i.stateNode;try{var _e=Ai(i.type,f);t=l.getSnapshotBeforeUpdate(_e,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){ct(i,i.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)Cm(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,on=t;break}on=r.return}}function zy(t,r,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Ns(t,i),l&4&&Zl(5,i);break;case 1:if(Ns(t,i),l&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(b){ct(i,i.return,b)}else{var f=Ai(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){ct(i,i.return,b)}}l&64&&Oy(i),l&512&&ec(i,i.return);break;case 3:if(Ns(t,i),l&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{T0(t,r)}catch(b){ct(i,i.return,b)}}break;case 27:r===null&&l&4&&Py(i);case 26:case 5:Ns(t,i),r===null&&l&4&&Vy(i),l&512&&ec(i,i.return);break;case 12:Ns(t,i);break;case 31:Ns(t,i),l&4&&Hy(t,i);break;case 13:Ns(t,i),l&4&&Fy(t,i),l&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=LT.bind(null,i),r1(t,i))));break;case 22:if(l=i.memoizedState!==null||Ss,!l){r=r!==null&&r.memoizedState!==null||Ft,f=Ss;var m=Ft;Ss=l,(Ft=r)&&!m?Cs(t,i,(i.subtreeFlags&8772)!==0):Ns(t,i),Ss=f,Ft=m}break;case 30:break;default:Ns(t,i)}}function By(t){var r=t.alternate;r!==null&&(t.alternate=null,By(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ji(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Et=null,Dn=!1;function As(t,r,i){for(i=i.child;i!==null;)qy(t,r,i),i=i.sibling}function qy(t,r,i){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(zn,i)}catch{}switch(i.tag){case 26:Ft||ts(i,r),As(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ft||ts(i,r);var l=Et,f=Dn;Ea(i.type)&&(Et=i.stateNode,Dn=!1),As(t,r,i),cc(i.stateNode),Et=l,Dn=f;break;case 5:Ft||ts(i,r);case 6:if(l=Et,f=Dn,Et=null,As(t,r,i),Et=l,Dn=f,Et!==null)if(Dn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(i.stateNode)}catch(m){ct(i,r,m)}else try{Et.removeChild(i.stateNode)}catch(m){ct(i,r,m)}break;case 18:Et!==null&&(Dn?(t=Et,Ov(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Vo(t)):Ov(Et,i.stateNode));break;case 4:l=Et,f=Dn,Et=i.stateNode.containerInfo,Dn=!0,As(t,r,i),Et=l,Dn=f;break;case 0:case 11:case 14:case 15:ga(2,i,r),Ft||ga(4,i,r),As(t,r,i);break;case 1:Ft||(ts(i,r),l=i.stateNode,typeof l.componentWillUnmount=="function"&&My(i,r,l)),As(t,r,i);break;case 21:As(t,r,i);break;case 22:Ft=(l=Ft)||i.memoizedState!==null,As(t,r,i),Ft=l;break;default:As(t,r,i)}}function Hy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Vo(t)}catch(i){ct(r,r.return,i)}}}function Fy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Vo(t)}catch(i){ct(r,r.return,i)}}function IT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Uy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Uy),r;default:throw Error(a(435,t.tag))}}function rd(t,r){var i=IT(t);r.forEach(function(l){if(!i.has(l)){i.add(l);var f=PT.bind(null,t,l);l.then(f,f)}})}function On(t,r){var i=r.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],m=t,b=r,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(Ea(w.type)){Et=w.stateNode,Dn=!1;break e}break;case 5:Et=w.stateNode,Dn=!1;break e;case 3:case 4:Et=w.stateNode.containerInfo,Dn=!0;break e}w=w.return}if(Et===null)throw Error(a(160));qy(m,b,f),Et=null,Dn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Gy(r,t),r=r.sibling}var Rr=null;function Gy(t,r){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Mn(t),l&4&&(ga(3,t,t.return),Zl(3,t),ga(5,t,t.return));break;case 1:On(r,t),Mn(t),l&512&&(Ft||i===null||ts(i,i.return)),l&64&&Ss&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=Rr;if(On(r,t),Mn(t),l&512&&(Ft||i===null||ts(i,i.return)),l&4){var m=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){e:{l=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Br]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),pn(m,l,i),m[Pt]=t,Ut(m),l=m;break e;case"link":var b=Gv("link","href",f).get(l+(i.href||""));if(b){for(var w=0;w<b.length;w++)if(m=b[w],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(w,1);break t}}m=f.createElement(l),pn(m,l,i),f.head.appendChild(m);break;case"meta":if(b=Gv("meta","content",f).get(l+(i.content||""))){for(w=0;w<b.length;w++)if(m=b[w],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(w,1);break t}}m=f.createElement(l),pn(m,l,i),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[Pt]=t,Ut(m),l=m}t.stateNode=l}else Qv(f,t.type,t.stateNode);else t.stateNode=Fv(f,l,t.memoizedProps);else m!==l?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,l===null?Qv(f,t.type,t.stateNode):Fv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&em(t,t.memoizedProps,i.memoizedProps)}break;case 27:On(r,t),Mn(t),l&512&&(Ft||i===null||ts(i,i.return)),i!==null&&l&4&&em(t,t.memoizedProps,i.memoizedProps);break;case 5:if(On(r,t),Mn(t),l&512&&(Ft||i===null||ts(i,i.return)),t.flags&32){f=t.stateNode;try{jn(f,"")}catch(_e){ct(t,t.return,_e)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,em(t,f,i!==null?i.memoizedProps:f)),l&1024&&(rm=!0);break;case 6:if(On(r,t),Mn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(_e){ct(t,t.return,_e)}}break;case 3:if(xd=null,f=Rr,Rr=yd(r.containerInfo),On(r,t),Rr=f,Mn(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Vo(r.containerInfo)}catch(_e){ct(t,t.return,_e)}rm&&(rm=!1,Qy(t));break;case 4:l=Rr,Rr=yd(t.stateNode.containerInfo),On(r,t),Mn(t),Rr=l;break;case 12:On(r,t),Mn(t);break;case 31:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,rd(t,l)));break;case 13:On(r,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ad=dn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,rd(t,l)));break;case 22:f=t.memoizedState!==null;var D=i!==null&&i.memoizedState!==null,Q=Ss,ee=Ft;if(Ss=Q||f,Ft=ee||D,On(r,t),Ft=ee,Ss=Q,Mn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||D||Ss||Ft||Ni(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){D=i=r;try{if(m=D.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=D.stateNode;var se=D.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_e){ct(D,D.return,_e)}}}else if(r.tag===6){if(i===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(_e){ct(D,D.return,_e)}}}else if(r.tag===18){if(i===null){D=r;try{var J=D.stateNode;f?Mv(J,!0):Mv(D.stateNode,!1)}catch(_e){ct(D,D.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,rd(t,i))));break;case 19:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,rd(t,l)));break;case 30:break;case 21:break;default:On(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{for(var i,l=t.return;l!==null;){if(Ly(l)){i=l;break}l=l.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,m=tm(t);nd(t,m,f);break;case 5:var b=i.stateNode;i.flags&32&&(jn(b,""),i.flags&=-33);var w=tm(t);nd(t,w,b);break;case 3:case 4:var D=i.stateNode.containerInfo,Q=tm(t);nm(t,Q,D);break;default:throw Error(a(161))}}catch(ee){ct(t,t.return,ee)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Qy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Qy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ns(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)zy(t,r.alternate,r),r=r.sibling}function Ni(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ga(4,r,r.return),Ni(r);break;case 1:ts(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&My(r,r.return,i),Ni(r);break;case 27:cc(r.stateNode);case 26:case 5:ts(r,r.return),Ni(r);break;case 22:r.memoizedState===null&&Ni(r);break;case 30:Ni(r);break;default:Ni(r)}t=t.sibling}}function Cs(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Cs(f,m,i),Zl(4,m);break;case 1:if(Cs(f,m,i),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){ct(l,l.return,Q)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)w0(D[f],w)}catch(Q){ct(l,l.return,Q)}}i&&b&64&&Oy(m),ec(m,m.return);break;case 27:Py(m);case 26:case 5:Cs(f,m,i),i&&l===null&&b&4&&Vy(m),ec(m,m.return);break;case 12:Cs(f,m,i);break;case 31:Cs(f,m,i),i&&b&4&&Hy(f,m);break;case 13:Cs(f,m,i),i&&b&4&&Fy(f,m);break;case 22:m.memoizedState===null&&Cs(f,m,i),ec(m,m.return);break;case 30:break;default:Cs(f,m,i)}r=r.sibling}}function sm(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&zl(i))}function am(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&zl(t))}function kr(t,r,i,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)$y(t,r,i,l),r=r.sibling}function $y(t,r,i,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:kr(t,r,i,l),f&2048&&Zl(9,r);break;case 1:kr(t,r,i,l);break;case 3:kr(t,r,i,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&zl(t)));break;case 12:if(f&2048){kr(t,r,i,l),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,w=m.onPostCommit;typeof w=="function"&&w(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ct(r,r.return,D)}}else kr(t,r,i,l);break;case 31:kr(t,r,i,l);break;case 13:kr(t,r,i,l);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?kr(t,r,i,l):tc(t,r):m._visibility&2?kr(t,r,i,l):(m._visibility|=2,So(t,r,i,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&sm(b,r);break;case 24:kr(t,r,i,l),f&2048&&am(r.alternate,r);break;default:kr(t,r,i,l)}}function So(t,r,i,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,w=i,D=l,Q=b.flags;switch(b.tag){case 0:case 11:case 15:So(m,b,w,D,f),Zl(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?So(m,b,w,D,f):tc(m,b):(ee._visibility|=2,So(m,b,w,D,f)),f&&Q&2048&&sm(b.alternate,b);break;case 24:So(m,b,w,D,f),f&&Q&2048&&am(b.alternate,b);break;default:So(m,b,w,D,f)}r=r.sibling}}function tc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,l=r,f=l.flags;switch(l.tag){case 22:tc(i,l),f&2048&&sm(l.alternate,l);break;case 24:tc(i,l),f&2048&&am(l.alternate,l);break;default:tc(i,l)}r=r.sibling}}var nc=8192;function Ao(t,r,i){if(t.subtreeFlags&nc)for(t=t.child;t!==null;)Ky(t,r,i),t=t.sibling}function Ky(t,r,i){switch(t.tag){case 26:Ao(t,r,i),t.flags&nc&&t.memoizedState!==null&&g1(i,Rr,t.memoizedState,t.memoizedProps);break;case 5:Ao(t,r,i);break;case 3:case 4:var l=Rr;Rr=yd(t.stateNode.containerInfo),Ao(t,r,i),Rr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=nc,nc=16777216,Ao(t,r,i),nc=l):Ao(t,r,i));break;default:Ao(t,r,i)}}function Yy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function rc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];on=l,Jy(l,t)}Yy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xy(t),t=t.sibling}function Xy(t){switch(t.tag){case 0:case 11:case 15:rc(t),t.flags&2048&&ga(9,t,t.return);break;case 3:rc(t);break;case 12:rc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,sd(t)):rc(t);break;default:rc(t)}}function sd(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];on=l,Jy(l,t)}Yy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ga(8,r,r.return),sd(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,sd(r));break;default:sd(r)}t=t.sibling}}function Jy(t,r){for(;on!==null;){var i=on;switch(i.tag){case 0:case 11:case 15:ga(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,on=l;else e:for(i=t;on!==null;){l=on;var f=l.sibling,m=l.return;if(By(l),l===i){on=null;break e}if(f!==null){f.return=m,on=f;break e}on=m}}}var RT={getCacheForType:function(t){var r=mn(Bt),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i},cacheSignal:function(){return mn(Bt).controller.signal}},kT=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,He=null,Ge=0,lt=0,Yn=null,pa=!1,No=!1,im=!1,Is=0,Ct=0,ya=0,Ci=0,om=0,Xn=0,Co=0,sc=null,Vn=null,lm=!1,ad=0,Wy=0,id=1/0,od=null,va=null,Wt=0,xa=null,Io=null,Rs=0,cm=0,um=null,Zy=null,ac=0,dm=null;function Jn(){return(at&2)!==0&&Ge!==0?Ge&-Ge:Y.T!==null?ym():lu()}function ev(){if(Xn===0)if((Ge&536870912)===0||Je){var t=W;W<<=1,(W&3932160)===0&&(W=262144),Xn=t}else Xn=536870912;return t=$n.current,t!==null&&(t.flags|=32),Xn}function Ln(t,r,i){(t===gt&&(lt===2||lt===9)||t.cancelPendingCommit!==null)&&(Ro(t,0),ba(t,Ge,Xn,!1)),Rn(t,i),((at&2)===0||t!==gt)&&(t===gt&&((at&2)===0&&(Ci|=i),Ct===4&&ba(t,Ge,Xn,!1)),ns(t))}function tv(t,r,i){if((at&6)!==0)throw Error(a(327));var l=!i&&(r&127)===0&&(r&t.expiredLanes)===0||jt(t,r),f=l?OT(t,r):fm(t,r,!0),m=l;do{if(f===0){No&&!l&&ba(t,r,0,!1);break}else{if(i=t.current.alternate,m&&!jT(i)){f=fm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var w=t;f=sc;var D=w.current.memoizedState.isDehydrated;if(D&&(Ro(w,b).flags|=256),b=fm(w,b,!1),b!==2){if(im&&!D){w.errorRecoveryDisabledLanes|=m,Ci|=m,f=4;break e}m=Vn,Vn=f,m!==null&&(Vn===null?Vn=m:Vn.push.apply(Vn,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){Ro(t,0),ba(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:ba(l,r,Xn,!pa);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=ad+300-dn(),10<f)){if(ba(l,r,Xn,!pa),Be(l,0,!0)!==0)break e;Rs=r,l.timeoutHandle=jv(nv.bind(null,l,i,Vn,od,lm,r,Xn,Ci,Co,pa,m,"Throttled",-0,0),f);break e}nv(l,i,Vn,od,lm,r,Xn,Ci,Co,pa,m,null,-0,0)}}break}while(!0);ns(t)}function nv(t,r,i,l,f,m,b,w,D,Q,ee,se,$,J){if(t.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tr},Ky(r,m,se);var _e=(m&62914560)===m?ad-dn():(m&4194048)===m?Wy-dn():0;if(_e=p1(se,_e),_e!==null){Rs=m,t.cancelPendingCommit=_e(uv.bind(null,t,r,m,i,l,f,b,w,D,ee,se,null,$,J)),ba(t,m,b,!Q);return}}uv(t,r,m,i,l,f,b,w,D)}function jT(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],m=f.getSnapshot;f=f.value;try{if(!Gn(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ba(t,r,i,l){r&=~om,r&=~Ci,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-St(f),b=1<<m;l[m]=-1,f&=~b}i!==0&&Ur(t,i,r)}function ld(){return(at&6)===0?(ic(0),!1):!0}function hm(){if(He!==null){if(lt===0)var t=He.return;else t=He,xs=xi=null,Cf(t),bo=null,ql=0,t=He;for(;t!==null;)Dy(t.alternate,t),t=t.return;He=null}}function Ro(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,WT(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Rs=0,hm(),gt=t,He=i=ys(t.current,null),Ge=r,lt=0,Yn=null,pa=!1,No=jt(t,r),im=!1,Co=Xn=om=Ci=ya=Ct=0,Vn=sc=null,lm=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-St(l),m=1<<f;r|=t[f],l&=~m}return Is=r,Iu(),i}function rv(t,r){ze=null,Y.H=Xl,r===xo||r===Lu?(r=x0(),lt=3):r===pf?(r=x0(),lt=4):lt=r===Ff?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Yn=r,He===null&&(Ct=1,Ju(t,ur(r,t.current)))}function sv(){var t=$n.current;return t===null?!0:(Ge&4194048)===Ge?mr===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?t===mr:!1}function av(){var t=Y.H;return Y.H=Xl,t===null?Xl:t}function iv(){var t=Y.A;return Y.A=RT,t}function cd(){Ct=4,pa||(Ge&4194048)!==Ge&&$n.current!==null||(No=!0),(ya&134217727)===0&&(Ci&134217727)===0||gt===null||ba(gt,Ge,Xn,!1)}function fm(t,r,i){var l=at;at|=2;var f=av(),m=iv();(gt!==t||Ge!==r)&&(od=null,Ro(t,r)),r=!1;var b=Ct;e:do try{if(lt!==0&&He!==null){var w=He,D=Yn;switch(lt){case 8:hm(),b=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(r=!0);var Q=lt;if(lt=0,Yn=null,ko(t,w,D,Q),i&&No){b=0;break e}break;default:Q=lt,lt=0,Yn=null,ko(t,w,D,Q)}}DT(),b=Ct;break}catch(ee){rv(t,ee)}while(!0);return r&&t.shellSuspendCounter++,xs=xi=null,at=l,Y.H=f,Y.A=m,He===null&&(gt=null,Ge=0,Iu()),b}function DT(){for(;He!==null;)ov(He)}function OT(t,r){var i=at;at|=2;var l=av(),f=iv();gt!==t||Ge!==r?(od=null,id=dn()+500,Ro(t,r)):No=jt(t,r);e:do try{if(lt!==0&&He!==null){r=He;var m=Yn;t:switch(lt){case 1:lt=0,Yn=null,ko(t,r,m,1);break;case 2:case 9:if(y0(m)){lt=0,Yn=null,lv(r);break}r=function(){lt!==2&&lt!==9||gt!==t||(lt=7),ns(t)},m.then(r,r);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:y0(m)?(lt=0,Yn=null,lv(r)):(lt=0,Yn=null,ko(t,r,m,7));break;case 5:var b=null;switch(He.tag){case 26:b=He.memoizedState;case 5:case 27:var w=He;if(b?$v(b):w.stateNode.complete){lt=0,Yn=null;var D=w.sibling;if(D!==null)He=D;else{var Q=w.return;Q!==null?(He=Q,ud(Q)):He=null}break t}}lt=0,Yn=null,ko(t,r,m,5);break;case 6:lt=0,Yn=null,ko(t,r,m,6);break;case 8:hm(),Ct=6;break e;default:throw Error(a(462))}}MT();break}catch(ee){rv(t,ee)}while(!0);return xs=xi=null,Y.H=l,Y.A=f,at=i,He!==null?0:(gt=null,Ge=0,Iu(),Ct)}function MT(){for(;He!==null&&!Qi();)ov(He)}function ov(t){var r=ky(t.alternate,t,Is);t.memoizedProps=t.pendingProps,r===null?ud(t):He=r}function lv(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=Sy(i,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=Sy(i,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:Cf(r);default:Dy(i,r),r=He=i0(r,Is),r=ky(i,r,Is)}t.memoizedProps=t.pendingProps,r===null?ud(t):He=r}function ko(t,r,i,l){xs=xi=null,Cf(r),bo=null,ql=0;var f=r.return;try{if(wT(t,f,r,i,Ge)){Ct=1,Ju(t,ur(i,t.current)),He=null;return}}catch(m){if(f!==null)throw He=f,m;Ct=1,Ju(t,ur(i,t.current)),He=null;return}r.flags&32768?(Je||l===1?t=!0:No||(Ge&536870912)!==0?t=!1:(pa=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),cv(r,t)):ud(r)}function ud(t){var r=t;do{if((r.flags&32768)!==0){cv(r,pa);return}t=r.return;var i=AT(r.alternate,r,Is);if(i!==null){He=i;return}if(r=r.sibling,r!==null){He=r;return}He=r=t}while(r!==null);Ct===0&&(Ct=5)}function cv(t,r){do{var i=NT(t.alternate,t);if(i!==null){i.flags&=32767,He=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){He=t;return}He=t=i}while(t!==null);Ct=6,He=null}function uv(t,r,i,l,f,m,b,w,D){t.cancelPendingCommit=null;do dd();while(Wt!==0);if((at&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=ef,Pr(t,i,m,b,w,D),t===gt&&(He=gt=null,Ge=0),Io=r,xa=t,Rs=i,cm=m,um=f,Zy=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,UT(_r,function(){return gv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=le.p,le.p=2,b=at,at|=4;try{CT(t,r,i)}finally{at=b,le.p=f,Y.T=l}}Wt=1,dv(),hv(),fv()}}function dv(){if(Wt===1){Wt=0;var t=xa,r=Io,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=Y.T,Y.T=null;var l=le.p;le.p=2;var f=at;at|=4;try{Gy(r,t);var m=Sm,b=Jp(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(b!==w&&w&&w.ownerDocument&&Xp(w.ownerDocument.documentElement,w)){if(D!==null&&Yh(w)){var Q=D.start,ee=D.end;if(ee===void 0&&(ee=Q),"selectionStart"in w)w.selectionStart=Q,w.selectionEnd=Math.min(ee,w.value.length);else{var se=w.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var J=$.getSelection(),_e=w.textContent.length,Ie=Math.min(D.start,_e),ft=D.end===void 0?Ie:Math.min(D.end,_e);!J.extend&&Ie>ft&&(b=ft,ft=Ie,Ie=b);var q=Yp(w,Ie),V=Yp(w,ft);if(q&&V&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var G=se.createRange();G.setStart(q.node,q.offset),J.removeAllRanges(),Ie>ft?(J.addRange(G),J.extend(V.node,V.offset)):(G.setEnd(V.node,V.offset),J.addRange(G))}}}}for(se=[],J=w;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var re=se[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}wd=!!Tm,Sm=Tm=null}finally{at=f,le.p=l,Y.T=i}}t.current=r,Wt=2}}function hv(){if(Wt===2){Wt=0;var t=xa,r=Io,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=Y.T,Y.T=null;var l=le.p;le.p=2;var f=at;at|=4;try{zy(t,r.alternate,r)}finally{at=f,le.p=l,Y.T=i}}Wt=3}}function fv(){if(Wt===4||Wt===3){Wt=0,ds();var t=xa,r=Io,i=Rs,l=Zy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Wt=5:(Wt=0,Io=xa=null,mv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(va=null),fs(i),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(zn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Y.T,f=le.p,le.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<l.length;b++){var w=l[b];m(w.value,{componentStack:w.stack})}}finally{Y.T=r,le.p=f}}(Rs&3)!==0&&dd(),ns(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===dm?ac++:(ac=0,dm=t):ac=0,ic(0)}}function mv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,zl(r)))}function dd(){return dv(),hv(),fv(),gv()}function gv(){if(Wt!==5)return!1;var t=xa,r=cm;cm=0;var i=fs(Rs),l=Y.T,f=le.p;try{le.p=32>i?32:i,Y.T=null,i=um,um=null;var m=xa,b=Rs;if(Wt=0,Io=xa=null,Rs=0,(at&6)!==0)throw Error(a(331));var w=at;if(at|=4,Xy(m.current),$y(m,m.current,b,i),at=w,ic(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(zn,m)}catch{}return!0}finally{le.p=f,Y.T=l,mv(t,r)}}function pv(t,r,i){r=ur(i,r),r=Hf(t.stateNode,r,2),t=ha(t,r,2),t!==null&&(Rn(t,2),ns(t))}function ct(t,r,i){if(t.tag===3)pv(t,t,i);else for(;r!==null;){if(r.tag===3){pv(r,t,i);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(va===null||!va.has(l))){t=ur(i,t),i=yy(2),l=ha(r,i,2),l!==null&&(vy(i,l,r,t),Rn(l,2),ns(l));break}}r=r.return}}function mm(t,r,i){var l=t.pingCache;if(l===null){l=t.pingCache=new kT;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(i)||(im=!0,f.add(i),t=VT.bind(null,t,r,i),r.then(t,t))}function VT(t,r,i){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,gt===t&&(Ge&i)===i&&(Ct===4||Ct===3&&(Ge&62914560)===Ge&&300>dn()-ad?(at&2)===0&&Ro(t,0):om|=i,Co===Ge&&(Co=0)),ns(t)}function yv(t,r){r===0&&(r=ri()),t=pi(t,r),t!==null&&(Rn(t,r),ns(t))}function LT(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),yv(t,i)}function PT(t,r){var i=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(r),yv(t,i)}function UT(t,r){return pt(t,r)}var hd=null,jo=null,gm=!1,fd=!1,pm=!1,_a=0;function ns(t){t!==jo&&t.next===null&&(jo===null?hd=jo=t:jo=jo.next=t),fd=!0,gm||(gm=!0,BT())}function ic(t,r){if(!pm&&fd){pm=!0;do for(var i=!1,l=hd;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var b=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-St(42|t)+1)-1,m&=f&~(b&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,_v(l,m))}else m=Ge,m=Be(l,l===gt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||jt(l,m)||(i=!0,_v(l,m));l=l.next}while(i);pm=!1}}function zT(){vv()}function vv(){fd=gm=!1;var t=0;_a!==0&&JT()&&(t=_a);for(var r=dn(),i=null,l=hd;l!==null;){var f=l.next,m=xv(l,r);m===0?(l.next=null,i===null?hd=f:i.next=f,f===null&&(jo=i)):(i=l,(t!==0||(m&3)!==0)&&(fd=!0)),l=f}Wt!==0&&Wt!==5||ic(t),_a!==0&&(_a=0)}function xv(t,r){for(var i=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-St(m),w=1<<b,D=f[b];D===-1?((w&i)===0||(w&l)!==0)&&(f[b]=Ys(w,r)):D<=r&&(t.expiredLanes|=w),m&=~w}if(r=gt,i=Ge,i=Be(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,i===0||t===r&&(lt===2||lt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Un(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||jt(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(l!==null&&Un(l),fs(i)){case 2:case 8:i=Ks;break;case 32:i=_r;break;case 268435456:i=$i;break;default:i=_r}return l=bv.bind(null,t),i=pt(i,l),t.callbackPriority=r,t.callbackNode=i,r}return l!==null&&l!==null&&Un(l),t.callbackPriority=2,t.callbackNode=null,2}function bv(t,r){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(dd()&&t.callbackNode!==i)return null;var l=Ge;return l=Be(t,t===gt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(tv(t,l,r),xv(t,dn()),t.callbackNode!=null&&t.callbackNode===i?bv.bind(null,t):null)}function _v(t,r){if(dd())return null;tv(t,r,!0)}function BT(){ZT(function(){(at&6)!==0?pt($s,zT):vv()})}function ym(){if(_a===0){var t=yo;t===0&&(t=Bn,Bn<<=1,(Bn&261888)===0&&(Bn=256)),_a=t}return _a}function Ev(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:to(""+t)}function wv(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function qT(t,r,i,l,f){if(r==="submit"&&i&&i.stateNode===f){var m=Ev((f[sn]||null).action),b=l.submitter;b&&(r=(r=b[sn]||null)?Ev(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var w=new Yr("action","action",null,l,f);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(_a!==0){var D=b?wv(f,b):new FormData(f);Lf(i,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=b?wv(f,b):new FormData(f),Lf(i,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var vm=0;vm<Zh.length;vm++){var xm=Zh[vm],HT=xm.toLowerCase(),FT=xm[0].toUpperCase()+xm.slice(1);Ir(HT,"on"+FT)}Ir(e0,"onAnimationEnd"),Ir(t0,"onAnimationIteration"),Ir(n0,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(iT,"onTransitionRun"),Ir(oT,"onTransitionStart"),Ir(lT,"onTransitionCancel"),Ir(r0,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function Tv(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var b=l.length-1;0<=b;b--){var w=l[b],D=w.instance,Q=w.currentTarget;if(w=w.listener,D!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=Q;try{m(f)}catch(ee){Cu(ee)}f.currentTarget=null,m=D}else for(b=0;b<l.length;b++){if(w=l[b],D=w.instance,Q=w.currentTarget,w=w.listener,D!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=Q;try{m(f)}catch(ee){Cu(ee)}f.currentTarget=null,m=D}}}}function Fe(t,r){var i=r[Xi];i===void 0&&(i=r[Xi]=new Set);var l=t+"__bubble";i.has(l)||(Sv(r,t,2,!1),i.add(l))}function bm(t,r,i){var l=0;r&&(l|=4),Sv(i,t,l,r)}var md="_reactListening"+Math.random().toString(36).slice(2);function _m(t){if(!t[md]){t[md]=!0,xl.forEach(function(i){i!=="selectionchange"&&(GT.has(i)||bm(i,!1,t),bm(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[md]||(r[md]=!0,bm("selectionchange",!1,r))}}function Sv(t,r,i,l){switch(ex(r)){case 2:var f=x1;break;case 8:f=b1;break;default:f=Vm}i=f.bind(null,r,i,t),f=void 0,!li||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,i,{capture:!0,passive:f}):t.addEventListener(r,i,!0):f!==void 0?t.addEventListener(r,i,{passive:f}):t.addEventListener(r,i,!1)}function Em(t,r,i,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var w=l.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=l.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=qr(w),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){l=m=b;continue e}w=w.parentNode}}l=l.return}na(function(){var Q=m,ee=ir(i),se=[];e:{var $=s0.get(t);if($!==void 0){var J=Yr,_e=t;switch(t){case"keypress":if(ui(i)===0)break e;case"keydown":case"keyup":J=Su;break;case"focusin":_e="focus",J=hi;break;case"focusout":_e="blur",J=hi;break;case"beforeblur":case"afterblur":J=hi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=v;break;case e0:case t0:case n0:J=vu;break;case r0:J=S;break;case"scroll":case"scrollend":J=kl;break;case"wheel":J=X;break;case"copy":case"cut":case"paste":J=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ps;break;case"toggle":case"beforetoggle":J=Ue}var Ie=(r&4)!==0,ft=!Ie&&(t==="scroll"||t==="scrollend"),q=Ie?$!==null?$+"Capture":null:$;Ie=[];for(var V=Q,G;V!==null;){var re=V;if(G=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||G===null||q===null||(re=Sr(V,q),re!=null&&Ie.push(lc(V,re,G))),ft)break;V=V.return}0<Ie.length&&($=new J($,_e,null,i,ee),se.push({event:$,listeners:Ie}))}}if((r&7)===0){e:{if($=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",$&&i!==Cl&&(_e=i.relatedTarget||i.fromElement)&&(qr(_e)||_e[zr]))break e;if((J||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,J?(_e=i.relatedTarget||i.toElement,J=Q,_e=_e?qr(_e):null,_e!==null&&(ft=c(_e),Ie=_e.tag,_e!==ft||Ie!==5&&Ie!==27&&Ie!==6)&&(_e=null)):(J=null,_e=Q),J!==_e)){if(Ie=jl,re="onMouseLeave",q="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=ps,re="onPointerLeave",q="onPointerEnter",V="pointer"),ft=J==null?$:Hn(J),G=_e==null?$:Hn(_e),$=new Ie(re,V+"leave",J,i,ee),$.target=ft,$.relatedTarget=G,re=null,qr(ee)===Q&&(Ie=new Ie(q,V+"enter",_e,i,ee),Ie.target=G,Ie.relatedTarget=ft,re=Ie),ft=re,J&&_e)t:{for(Ie=QT,q=J,V=_e,G=0,re=q;re;re=Ie(re))G++;re=0;for(var Ae=V;Ae;Ae=Ie(Ae))re++;for(;0<G-re;)q=Ie(q),G--;for(;0<re-G;)V=Ie(V),re--;for(;G--;){if(q===V||V!==null&&q===V.alternate){Ie=q;break t}q=Ie(q),V=Ie(V)}Ie=null}else Ie=null;J!==null&&Av(se,$,J,Ie,!1),_e!==null&&ft!==null&&Av(se,ft,_e,Ie,!0)}}e:{if($=Q?Hn(Q):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var nt=Hp;else if(Bp($))if(Fp)nt=rT;else{nt=tT;var we=eT}else J=$.nodeName,!J||J.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Q&&eo(Q.elementType)&&(nt=Hp):nt=nT;if(nt&&(nt=nt(t,Q))){qp(se,nt,i,ee);break e}we&&we(t,$,Q),t==="focusout"&&Q&&$.type==="number"&&Q.memoizedProps.value!=null&&Sl($,"number",$.value)}switch(we=Q?Hn(Q):window,t){case"focusin":(Bp(we)||we.contentEditable==="true")&&(lo=we,Xh=Q,Ll=null);break;case"focusout":Ll=Xh=lo=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,Wp(se,i,ee);break;case"selectionchange":if(aT)break;case"keydown":case"keyup":Wp(se,i,ee)}var qe;if(st)e:{switch(t){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else oo?fi(t,i)&&(Qe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Qe="onCompositionStart");Qe&&(Wr&&i.locale!=="ko"&&(oo||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&oo&&(qe=Rl()):(Kr=ee,Il="value"in Kr?Kr.value:Kr.textContent,oo=!0)),we=gd(Q,Qe),0<we.length&&(Qe=new Jr(Qe,t,null,i,ee),se.push({event:Qe,listeners:we}),qe?Qe.data=qe:(qe=io(i),qe!==null&&(Qe.data=qe)))),(qe=lr?Xw(t,i):Jw(t,i))&&(Qe=gd(Q,"onBeforeInput"),0<Qe.length&&(we=new Jr("onBeforeInput","beforeinput",null,i,ee),se.push({event:we,listeners:Qe}),we.data=qe)),qT(se,t,Q,i,ee)}Tv(se,r)})}function lc(t,r,i){return{instance:t,listener:r,currentTarget:i}}function gd(t,r){for(var i=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Sr(t,i),f!=null&&l.unshift(lc(t,f,m)),f=Sr(t,r),f!=null&&l.push(lc(t,f,m))),t.tag===3)return l;t=t.return}return[]}function QT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Av(t,r,i,l,f){for(var m=r._reactName,b=[];i!==null&&i!==l;){var w=i,D=w.alternate,Q=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||Q===null||(D=Q,f?(Q=Sr(i,m),Q!=null&&b.unshift(lc(i,Q,D))):f||(Q=Sr(i,m),Q!=null&&b.push(lc(i,Q,D)))),i=i.return}b.length!==0&&t.push({event:r,listeners:b})}var $T=/\r\n?/g,KT=/\u0000|\uFFFD/g;function Nv(t){return(typeof t=="string"?t:""+t).replace($T,`
`).replace(KT,"")}function Cv(t,r){return r=Nv(r),Nv(t)===r}function ht(t,r,i,l,f,m){switch(i){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||jn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&jn(t,""+l);break;case"className":Fn(t,"class",l);break;case"tabIndex":Fn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Fn(t,i,l);break;case"style":Nl(t,l,m);break;case"data":if(r!=="object"){Fn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=to(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&ht(t,r,"name",f.name,f,null),ht(t,r,"formEncType",f.formEncType,f,null),ht(t,r,"formMethod",f.formMethod,f,null),ht(t,r,"formTarget",f.formTarget,f,null)):(ht(t,r,"encType",f.encType,f,null),ht(t,r,"method",f.method,f,null),ht(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=to(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=Tr);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=to(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),Wi(t,"popover",l);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Wi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=gu.get(i)||i,Wi(t,i,l))}}function wm(t,r,i,l,f,m){switch(i){case"style":Nl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"children":typeof l=="string"?jn(t,l):(typeof l=="number"||typeof l=="bigint")&&jn(t,""+l);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=t[sn]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,l,f);break e}i in t?t[i]=l:l===!0?t.setAttribute(i,""):Wi(t,i,l)}}}function pn(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var l=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var b=i[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:ht(t,r,m,b,i,null)}}f&&ht(t,r,"srcSet",i.srcSet,i,null),l&&ht(t,r,"src",i.src,i,null);return;case"input":Fe("invalid",t);var w=m=b=f=null,D=null,Q=null;for(l in i)if(i.hasOwnProperty(l)){var ee=i[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":b=ee;break;case"checked":D=ee;break;case"defaultChecked":Q=ee;break;case"value":m=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,r));break;default:ht(t,r,l,ee,i,null)}}hu(t,m,w,D,Q,b,f,!1);return;case"select":Fe("invalid",t),l=b=m=null;for(f in i)if(i.hasOwnProperty(f)&&(w=i[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":b=w;break;case"multiple":l=w;default:ht(t,r,f,w,i,null)}r=m,i=b,t.multiple=!!l,r!=null?Ws(t,!!l,r,!1):i!=null&&Ws(t,!!l,i,!0);return;case"textarea":Fe("invalid",t),m=f=l=null;for(b in i)if(i.hasOwnProperty(b)&&(w=i[b],w!=null))switch(b){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:ht(t,r,b,w,i,null)}Zs(t,l,f,m);return;case"option":for(D in i)if(i.hasOwnProperty(D)&&(l=i[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ht(t,r,D,l,i,null)}return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(l=0;l<oc.length;l++)Fe(oc[l],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in i)if(i.hasOwnProperty(Q)&&(l=i[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:ht(t,r,Q,l,i,null)}return;default:if(eo(r)){for(ee in i)i.hasOwnProperty(ee)&&(l=i[ee],l!==void 0&&wm(t,r,ee,l,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(l=i[w],l!=null&&ht(t,r,w,l,i,null))}function YT(t,r,i,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,w=null,D=null,Q=null,ee=null;for(J in i){var se=i[J];if(i.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":D=se;default:l.hasOwnProperty(J)||ht(t,r,J,null,l,se)}}for(var $ in l){var J=l[$];if(se=i[$],l.hasOwnProperty($)&&(J!=null||se!=null))switch($){case"type":m=J;break;case"name":f=J;break;case"checked":Q=J;break;case"defaultChecked":ee=J;break;case"value":b=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,r));break;default:J!==se&&ht(t,r,$,J,l,se)}}Zi(t,b,w,D,Q,ee,m,f);return;case"select":J=b=w=$=null;for(m in i)if(D=i[m],i.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":J=D;default:l.hasOwnProperty(m)||ht(t,r,m,null,l,D)}for(f in l)if(m=l[f],D=i[f],l.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":$=m;break;case"defaultValue":w=m;break;case"multiple":b=m;default:m!==D&&ht(t,r,f,m,l,D)}r=w,i=b,l=J,$!=null?Ws(t,!!i,$,!1):!!l!=!!i&&(r!=null?Ws(t,!!i,r,!0):Ws(t,!!i,i?[]:"",!1));return;case"textarea":J=$=null;for(w in i)if(f=i[w],i.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ht(t,r,w,null,l,f)}for(b in l)if(f=l[b],m=i[b],l.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":$=f;break;case"defaultValue":J=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&ht(t,r,b,f,l,m)}fu(t,$,J);return;case"option":for(var _e in i)if($=i[_e],i.hasOwnProperty(_e)&&$!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:ht(t,r,_e,null,l,$)}for(D in l)if($=l[D],J=i[D],l.hasOwnProperty(D)&&$!==J&&($!=null||J!=null))switch(D){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ht(t,r,D,$,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in i)$=i[Ie],i.hasOwnProperty(Ie)&&$!=null&&!l.hasOwnProperty(Ie)&&ht(t,r,Ie,null,l,$);for(Q in l)if($=l[Q],J=i[Q],l.hasOwnProperty(Q)&&$!==J&&($!=null||J!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,r));break;default:ht(t,r,Q,$,l,J)}return;default:if(eo(r)){for(var ft in i)$=i[ft],i.hasOwnProperty(ft)&&$!==void 0&&!l.hasOwnProperty(ft)&&wm(t,r,ft,void 0,l,$);for(ee in l)$=l[ee],J=i[ee],!l.hasOwnProperty(ee)||$===J||$===void 0&&J===void 0||wm(t,r,ee,$,l,J);return}}for(var q in i)$=i[q],i.hasOwnProperty(q)&&$!=null&&!l.hasOwnProperty(q)&&ht(t,r,q,null,l,$);for(se in l)$=l[se],J=i[se],!l.hasOwnProperty(se)||$===J||$==null&&J==null||ht(t,r,se,$,l,J)}function Iv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var f=i[l],m=f.transferSize,b=f.initiatorType,w=f.duration;if(m&&w&&Iv(b)){for(b=0,w=f.responseEnd,l+=1;l<i.length;l++){var D=i[l],Q=D.startTime;if(Q>w)break;var ee=D.transferSize,se=D.initiatorType;ee&&Iv(se)&&(D=D.responseEnd,b+=ee*(D<w?1:(w-Q)/(D-Q)))}if(--l,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Tm=null,Sm=null;function pd(t){return t.nodeType===9?t:t.ownerDocument}function Rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Am(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Nm=null;function JT(){var t=window.event;return t&&t.type==="popstate"?t===Nm?!1:(Nm=t,!0):(Nm=null,!1)}var jv=typeof setTimeout=="function"?setTimeout:void 0,WT=typeof clearTimeout=="function"?clearTimeout:void 0,Dv=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof Dv<"u"?function(t){return Dv.resolve(null).then(t).catch(e1)}:jv;function e1(t){setTimeout(function(){throw t})}function Ea(t){return t==="head"}function Ov(t,r){var i=r,l=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(l===0){t.removeChild(f),Vo(r);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")cc(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,cc(i);for(var m=i.firstChild;m;){var b=m.nextSibling,w=m.nodeName;m[Br]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=b}}else i==="body"&&cc(t.ownerDocument.body);i=f}while(i);Vo(r)}function Mv(t,r){var i=t;t=0;do{var l=i.nextSibling;if(i.nodeType===1?r?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(r?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=l}while(i)}function Cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Cm(i),Ji(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function t1(t,r,i,l){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Br])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=gr(t.nextSibling),t===null)break}return null}function n1(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=gr(t.nextSibling),t===null))return null;return t}function Vv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=gr(t.nextSibling),t===null))return null;return t}function Im(t){return t.data==="$?"||t.data==="$~"}function Rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function r1(t,r){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||i.readyState!=="loading")r();else{var l=function(){r(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function gr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var km=null;function Lv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(r===0)return gr(t.nextSibling);r--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||r++}t=t.nextSibling}return null}function Pv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(r===0)return t;r--}else i!=="/$"&&i!=="/&"||r++}t=t.previousSibling}return null}function Uv(t,r,i){switch(r=pd(i),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function cc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ji(t)}var pr=new Map,zv=new Set;function yd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ks=le.d;le.d={f:s1,r:a1,D:i1,C:o1,L:l1,m:c1,X:d1,S:u1,M:h1};function s1(){var t=ks.f(),r=ld();return t||r}function a1(t){var r=ar(t);r!==null&&r.tag===5&&r.type==="form"?ry(r):ks.r(t)}var Do=typeof document>"u"?null:document;function Bv(t,r,i){var l=Do;if(l&&typeof r=="string"&&r){var f=kn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),zv.has(f)||(zv.add(f),t={rel:t,crossOrigin:i,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),pn(r,"link",t),Ut(r),l.head.appendChild(r)))}}function i1(t){ks.D(t),Bv("dns-prefetch",t,null)}function o1(t,r){ks.C(t,r),Bv("preconnect",t,r)}function l1(t,r,i){ks.L(t,r,i);var l=Do;if(l&&t&&r){var f='link[rel="preload"][as="'+kn(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+kn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+kn(i.imageSizes)+'"]')):f+='[href="'+kn(t)+'"]';var m=f;switch(r){case"style":m=Oo(t);break;case"script":m=Mo(t)}pr.has(m)||(t=_({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),pr.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(uc(m))||r==="script"&&l.querySelector(dc(m))||(r=l.createElement("link"),pn(r,"link",t),Ut(r),l.head.appendChild(r)))}}function c1(t,r){ks.m(t,r);var i=Do;if(i&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+kn(l)+'"][href="'+kn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Mo(t)}if(!pr.has(m)&&(t=_({rel:"modulepreload",href:t},r),pr.set(m,t),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(dc(m)))return}l=i.createElement("link"),pn(l,"link",t),Ut(l),i.head.appendChild(l)}}}function u1(t,r,i){ks.S(t,r,i);var l=Do;if(l&&t){var f=Hr(l).hoistableStyles,m=Oo(t);r=r||"default";var b=f.get(m);if(!b){var w={loading:0,preload:null};if(b=l.querySelector(uc(m)))w.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},i),(i=pr.get(m))&&jm(t,i);var D=b=l.createElement("link");Ut(D),pn(D,"link",t),D._p=new Promise(function(Q,ee){D.onload=Q,D.onerror=ee}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,vd(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(m,b)}}}function d1(t,r){ks.X(t,r);var i=Do;if(i&&t){var l=Hr(i).hoistableScripts,f=Mo(t),m=l.get(f);m||(m=i.querySelector(dc(f)),m||(t=_({src:t,async:!0},r),(r=pr.get(f))&&Dm(t,r),m=i.createElement("script"),Ut(m),pn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function h1(t,r){ks.M(t,r);var i=Do;if(i&&t){var l=Hr(i).hoistableScripts,f=Mo(t),m=l.get(f);m||(m=i.querySelector(dc(f)),m||(t=_({src:t,async:!0,type:"module"},r),(r=pr.get(f))&&Dm(t,r),m=i.createElement("script"),Ut(m),pn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function qv(t,r,i,l){var f=(f=je.current)?yd(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=Oo(i.href),i=Hr(f).hoistableStyles,l=i.get(r),l||(l={type:"style",instance:null,count:0,state:null},i.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Oo(i.href);var m=Hr(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(uc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),pr.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},pr.set(t,i),m||f1(f,t,i,b.state))),r&&l===null)throw Error(a(528,""));return b}if(r&&l!==null)throw Error(a(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Mo(i),i=Hr(f).hoistableScripts,l=i.get(r),l||(l={type:"script",instance:null,count:0,state:null},i.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Oo(t){return'href="'+kn(t)+'"'}function uc(t){return'link[rel="stylesheet"]['+t+"]"}function Hv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function f1(t,r,i,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),pn(r,"link",i),Ut(r),t.head.appendChild(r))}function Mo(t){return'[src="'+kn(t)+'"]'}function dc(t){return"script[async]"+t}function Fv(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+kn(i.href)+'"]');if(l)return r.instance=l,Ut(l),l;var f=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ut(l),pn(l,"style",f),vd(l,i.precedence,t),r.instance=l;case"stylesheet":f=Oo(i.href);var m=t.querySelector(uc(f));if(m)return r.state.loading|=4,r.instance=m,Ut(m),m;l=Hv(i),(f=pr.get(f))&&jm(l,f),m=(t.ownerDocument||t).createElement("link"),Ut(m);var b=m;return b._p=new Promise(function(w,D){b.onload=w,b.onerror=D}),pn(m,"link",l),r.state.loading|=4,vd(m,i.precedence,t),r.instance=m;case"script":return m=Mo(i.src),(f=t.querySelector(dc(m)))?(r.instance=f,Ut(f),f):(l=i,(f=pr.get(m))&&(l=_({},i),Dm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ut(f),pn(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,vd(l,i.precedence,t));return r.instance}function vd(t,r,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,b=0;b<l.length;b++){var w=l[b];if(w.dataset.precedence===r)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function jm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Dm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var xd=null;function Gv(t,r,i){if(xd===null){var l=new Map,f=xd=new Map;f.set(i,l)}else f=xd,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[Br]||m[Pt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var w=l.get(b);w?w.push(m):l.set(b,[m])}}return l}function Qv(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function m1(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function $v(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function g1(t,r,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Oo(l.href),m=r.querySelector(uc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=bd.bind(t),r.then(t,t)),i.state.loading|=4,i.instance=m,Ut(m);return}m=r.ownerDocument||r,l=Hv(l),(f=pr.get(f))&&jm(l,f),m=m.createElement("link"),Ut(m);var b=m;b._p=new Promise(function(w,D){b.onload=w,b.onerror=D}),pn(m,"link",l),i.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=bd.bind(t),r.addEventListener("load",i),r.addEventListener("error",i))}}var Om=0;function p1(t,r){return t.stylesheets&&t.count===0&&Ed(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var l=setTimeout(function(){if(t.stylesheets&&Ed(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Om===0&&(Om=62500*XT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ed(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Om?50:800)+r);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function bd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ed(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _d=null;function Ed(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_d=new Map,r.forEach(y1,t),_d=null,bd.call(t))}function y1(t,r){if(!(r.state.loading&4)){var i=_d.get(t);if(i)var l=i.get(null);else{i=new Map,_d.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),l=b)}l&&i.set(null,l)}f=r.instance,b=f.getAttribute("data-precedence"),m=i.get(b)||l,m===l&&i.set(null,f),i.set(b,f),this.count++,l=bd.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var hc={$$typeof:K,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function v1(t,r,i,l,f,m,b,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qn(0),this.hiddenUpdates=qn(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Kv(t,r,i,l,f,m,b,w,D,Q,ee,se){return t=new v1(t,r,i,b,D,Q,ee,se,w),r=1,m===!0&&(r|=24),m=Qn(3,null,null,r),t.current=m,m.stateNode=t,r=ff(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:i,cache:r},yf(m),t}function Yv(t){return t?(t=ho,t):ho}function Xv(t,r,i,l,f,m){f=Yv(f),l.context===null?l.context=f:l.pendingContext=f,l=da(r),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=ha(t,l,r),i!==null&&(Ln(i,t,r),Fl(i,t,r))}function Jv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Mm(t,r){Jv(t,r),(t=t.alternate)&&Jv(t,r)}function Wv(t){if(t.tag===13||t.tag===31){var r=pi(t,67108864);r!==null&&Ln(r,t,67108864),Mm(t,67108864)}}function Zv(t){if(t.tag===13||t.tag===31){var r=Jn();r=si(r);var i=pi(t,r);i!==null&&Ln(i,t,r),Mm(t,r)}}var wd=!0;function x1(t,r,i,l){var f=Y.T;Y.T=null;var m=le.p;try{le.p=2,Vm(t,r,i,l)}finally{le.p=m,Y.T=f}}function b1(t,r,i,l){var f=Y.T;Y.T=null;var m=le.p;try{le.p=8,Vm(t,r,i,l)}finally{le.p=m,Y.T=f}}function Vm(t,r,i,l){if(wd){var f=Lm(l);if(f===null)Em(t,r,l,Td,i),tx(t,l);else if(E1(f,t,r,i,l))l.stopPropagation();else if(tx(t,l),r&4&&-1<_1.indexOf(t)){for(;f!==null;){var m=ar(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Ve(m.pendingLanes);if(b!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var D=1<<31-St(b);w.entanglements[1]|=D,b&=~D}ns(m),(at&6)===0&&(id=dn()+500,ic(0))}}break;case 31:case 13:w=pi(m,2),w!==null&&Ln(w,m,2),ld(),Mm(m,2)}if(m=Lm(l),m===null&&Em(t,r,l,Td,i),m===f)break;f=m}f!==null&&l.stopPropagation()}else Em(t,r,l,null,i)}}function Lm(t){return t=ir(t),Pm(t)}var Td=null;function Pm(t){if(Td=null,t=qr(t),t!==null){var r=c(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=u(r),t!==null)return t;t=null}else if(i===31){if(t=g(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Td=t,null}function ex(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lr()){case $s:return 2;case Ks:return 8;case _r:case yl:return 32;case $i:return 268435456;default:return 32}default:return 32}}var Um=!1,wa=null,Ta=null,Sa=null,fc=new Map,mc=new Map,Aa=[],_1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tx(t,r){switch(t){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":fc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(r.pointerId)}}function gc(t,r,i,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:i,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=ar(r),r!==null&&Wv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function E1(t,r,i,l,f){switch(r){case"focusin":return wa=gc(wa,t,r,i,l,f),!0;case"dragenter":return Ta=gc(Ta,t,r,i,l,f),!0;case"mouseover":return Sa=gc(Sa,t,r,i,l,f),!0;case"pointerover":var m=f.pointerId;return fc.set(m,gc(fc.get(m)||null,t,r,i,l,f)),!0;case"gotpointercapture":return m=f.pointerId,mc.set(m,gc(mc.get(m)||null,t,r,i,l,f)),!0}return!1}function nx(t){var r=qr(t.target);if(r!==null){var i=c(r);if(i!==null){if(r=i.tag,r===13){if(r=u(i),r!==null){t.blockedOn=r,Er(t.priority,function(){Zv(i)});return}}else if(r===31){if(r=g(i),r!==null){t.blockedOn=r,Er(t.priority,function(){Zv(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sd(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=Lm(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);Cl=l,i.target.dispatchEvent(l),Cl=null}else return r=ar(i),r!==null&&Wv(r),t.blockedOn=i,!1;r.shift()}return!0}function rx(t,r,i){Sd(t)&&i.delete(r)}function w1(){Um=!1,wa!==null&&Sd(wa)&&(wa=null),Ta!==null&&Sd(Ta)&&(Ta=null),Sa!==null&&Sd(Sa)&&(Sa=null),fc.forEach(rx),mc.forEach(rx)}function Ad(t,r){t.blockedOn===r&&(t.blockedOn=null,Um||(Um=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,w1)))}var Nd=null;function sx(t){Nd!==t&&(Nd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Nd===t&&(Nd=null);for(var r=0;r<t.length;r+=3){var i=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Pm(l||i)===null)continue;break}var m=ar(i);m!==null&&(t.splice(r,3),r-=3,Lf(m,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function Vo(t){function r(D){return Ad(D,t)}wa!==null&&Ad(wa,t),Ta!==null&&Ad(Ta,t),Sa!==null&&Ad(Sa,t),fc.forEach(r),mc.forEach(r);for(var i=0;i<Aa.length;i++){var l=Aa[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Aa.length&&(i=Aa[0],i.blockedOn===null);)nx(i),i.blockedOn===null&&Aa.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],m=i[l+1],b=f[sn]||null;if(typeof m=="function")b||sx(i);else if(b){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[sn]||null)w=b.formAction;else if(Pm(f)!==null)continue}else w=b.action;typeof w=="function"?i[l+1]=w:(i.splice(l,3),l-=3),sx(i)}}}function ax(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function zm(t){this._internalRoot=t}Cd.prototype.render=zm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var i=r.current,l=Jn();Xv(i,l,t,r,null,null)},Cd.prototype.unmount=zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Xv(t.current,2,null,t,null,null),ld(),r[zr]=null}};function Cd(t){this._internalRoot=t}Cd.prototype.unstable_scheduleHydration=function(t){if(t){var r=lu();t={blockedOn:null,target:t,priority:r};for(var i=0;i<Aa.length&&r!==0&&r<Aa[i].priority;i++);Aa.splice(i,0,t),i===0&&nx(t)}};var ix=e.version;if(ix!=="19.2.0")throw Error(a(527,ix,"19.2.0"));le.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var T1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{zn=Id.inject(T1),Jt=Id}catch{}}return yc.createRoot=function(t,r){if(!o(t))throw Error(a(299));var i=!1,l="",f=fy,m=my,b=gy;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=Kv(t,1,!1,null,null,i,l,null,f,m,b,ax),t[zr]=r.current,_m(t),new zm(r)},yc.hydrateRoot=function(t,r,i){if(!o(t))throw Error(a(299));var l=!1,f="",m=fy,b=my,w=gy,D=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(D=i.formState)),r=Kv(t,1,!0,r,i??null,l,f,D,m,b,w,ax),r.context=Yv(null),i=r.current,l=Jn(),l=si(l),f=da(l),f.callback=null,ha(i,f,l),i=l,r.current.lanes=i,Rn(r,i),ns(r),t[zr]=r.current,_m(t),new Cd(r)},yc.version="19.2.0",yc}var px;function O1(){if(px)return Hm.exports;px=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Hm.exports=D1(),Hm.exports}var M1=O1();const V1=i_(M1);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yx="popstate";function L1(s={}){function e(o,c){let{pathname:u="/",search:g="",hash:p=""}=Ui(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),og("",{pathname:u,search:g,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let u=o.document.querySelector("base"),g="";if(u&&u.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");g=y===-1?p:p.slice(0,y)}return g+"#"+(typeof c=="string"?c:Dc(c))}function a(o,c){rr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return U1(e,n,a,s)}function Tt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function rr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function P1(){return Math.random().toString(36).substring(2,10)}function vx(s,e){return{usr:s.state,key:s.key,idx:e}}function og(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ui(e):e,state:n,key:e&&e.key||a||P1()}}function Dc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ui(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function U1(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,u=o.history,g="POP",p=null,y=x();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function x(){return(u.state||{idx:null}).idx}function _(){g="POP";let L=x(),B=L==null?null:L-y;y=L,p&&p({action:g,location:z.location,delta:B})}function T(L,B){g="PUSH";let H=og(z.location,L,B);n&&n(H,L),y=x()+1;let K=vx(H,y),de=z.createHref(H);try{u.pushState(K,"",de)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(de)}c&&p&&p({action:g,location:z.location,delta:1})}function C(L,B){g="REPLACE";let H=og(z.location,L,B);n&&n(H,L),y=x();let K=vx(H,y),de=z.createHref(H);u.replaceState(K,"",de),c&&p&&p({action:g,location:z.location,delta:0})}function U(L){return z1(L)}let z={get action(){return g},get location(){return s(o,u)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(yx,_),p=L,()=>{o.removeEventListener(yx,_),p=null}},createHref(L){return e(o,L)},createURL:U,encodeLocation(L){let B=U(L);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:C,go(L){return u.go(L)}};return z}function z1(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Dc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function o_(s,e,n="/"){return B1(s,e,n,!1)}function B1(s,e,n,a){let o=typeof e=="string"?Ui(e):e,c=Ls(o.pathname||"/",n);if(c==null)return null;let u=l_(s);q1(u);let g=null;for(let p=0;g==null&&p<u.length;++p){let y=Z1(c);g=J1(u[p],y,a)}return g}function l_(s,e=[],n=[],a="",o=!1){let c=(u,g,p=o,y)=>{let x={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:g,route:u};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&p)return;Tt(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let _=Vs([a,x.relativePath]),T=n.concat(x);u.children&&u.children.length>0&&(Tt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),l_(u.children,e,T,_,p)),!(u.path==null&&!u.index)&&e.push({path:_,score:Y1(_,u.index),routesMeta:T})};return s.forEach((u,g)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))c(u,g);else for(let y of c_(u.path))c(u,g,!0,y)}),e}function c_(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let u=c_(a.join("/")),g=[];return g.push(...u.map(p=>p===""?c:[c,p].join("/"))),o&&g.push(...u),g.map(p=>s.startsWith("/")&&p===""?"/":p)}function q1(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:X1(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var H1=/^:[\w-]+$/,F1=3,G1=2,Q1=1,$1=10,K1=-2,xx=s=>s==="*";function Y1(s,e){let n=s.split("/"),a=n.length;return n.some(xx)&&(a+=K1),e&&(a+=G1),n.filter(o=>!xx(o)).reduce((o,c)=>o+(H1.test(c)?F1:c===""?Q1:$1),a)}function X1(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function J1(s,e,n=!1){let{routesMeta:a}=s,o={},c="/",u=[];for(let g=0;g<a.length;++g){let p=a[g],y=g===a.length-1,x=c==="/"?e:e.slice(c.length)||"/",_=Wd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},x),T=p.route;if(!_&&y&&n&&!a[a.length-1].route.index&&(_=Wd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:Vs([c,_.pathname]),pathnameBase:sS(Vs([c,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(c=Vs([c,_.pathnameBase]))}return u}function Wd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=W1(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((y,{paramName:x,isOptional:_},T)=>{if(x==="*"){let U=g[T]||"";u=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const C=g[T];return _&&!C?y[x]=void 0:y[x]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:u,pattern:s}}function W1(s,e=!1,n=!0){rr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,g,p)=>(a.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function Z1(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ls(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var eS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tS=s=>eS.test(s);function nS(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?Ui(s):s,c;if(n)if(tS(n))c=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),rr(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?c=bx(n.substring(1),"/"):c=bx(n,e)}else c=e;return{pathname:c,search:aS(a),hash:iS(o)}}function bx(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function $m(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mg(s){let e=rS(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function Vg(s,e,n,a=!1){let o;typeof s=="string"?o=Ui(s):(o={...s},Tt(!o.pathname||!o.pathname.includes("?"),$m("?","pathname","search",o)),Tt(!o.pathname||!o.pathname.includes("#"),$m("#","pathname","hash",o)),Tt(!o.search||!o.search.includes("#"),$m("#","search","hash",o)));let c=s===""||o.pathname==="",u=c?"/":o.pathname,g;if(u==null)g=n;else{let _=e.length-1;if(!a&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),_-=1;o.pathname=T.join("/")}g=_>=0?e[_]:"/"}let p=nS(o,g),y=u&&u!=="/"&&u.endsWith("/"),x=(c||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||x)&&(p.pathname+="/"),p}var Vs=s=>s.join("/").replace(/\/\/+/g,"/"),sS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),aS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,iS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function oS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u_=["POST","PUT","PATCH","DELETE"];new Set(u_);var lS=["GET",...u_];new Set(lS);var il=I.createContext(null);il.displayName="DataRouter";var Eh=I.createContext(null);Eh.displayName="DataRouterState";I.createContext(!1);var d_=I.createContext({isTransitioning:!1});d_.displayName="ViewTransition";var cS=I.createContext(new Map);cS.displayName="Fetchers";var uS=I.createContext(null);uS.displayName="Await";var Mr=I.createContext(null);Mr.displayName="Navigation";var Gc=I.createContext(null);Gc.displayName="Location";var Vr=I.createContext({outlet:null,matches:[],isDataRoute:!1});Vr.displayName="Route";var Lg=I.createContext(null);Lg.displayName="RouteError";function dS(s,{relative:e}={}){Tt(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=I.useContext(Mr),{hash:o,pathname:c,search:u}=Qc(s,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:Vs([n,c])),a.createHref({pathname:g,search:u,hash:o})}function ol(){return I.useContext(Gc)!=null}function qs(){return Tt(ol(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Gc).location}var h_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f_(s){I.useContext(Mr).static||I.useLayoutEffect(s)}function Ya(){let{isDataRoute:s}=I.useContext(Vr);return s?TS():hS()}function hS(){Tt(ol(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(il),{basename:e,navigator:n}=I.useContext(Mr),{matches:a}=I.useContext(Vr),{pathname:o}=qs(),c=JSON.stringify(Mg(a)),u=I.useRef(!1);return f_(()=>{u.current=!0}),I.useCallback((p,y={})=>{if(rr(u.current,h_),!u.current)return;if(typeof p=="number"){n.go(p);return}let x=Vg(p,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Vs([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,c,o,s])}I.createContext(null);function m_(){let{matches:s}=I.useContext(Vr),e=s[s.length-1];return e?e.params:{}}function Qc(s,{relative:e}={}){let{matches:n}=I.useContext(Vr),{pathname:a}=qs(),o=JSON.stringify(Mg(n));return I.useMemo(()=>Vg(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function fS(s,e){return g_(s,e)}function g_(s,e,n,a,o){var H;Tt(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=I.useContext(Mr),{matches:u}=I.useContext(Vr),g=u[u.length-1],p=g?g.params:{},y=g?g.pathname:"/",x=g?g.pathnameBase:"/",_=g&&g.route;{let K=_&&_.path||"";p_(y,!_||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let T=qs(),C;if(e){let K=typeof e=="string"?Ui(e):e;Tt(x==="/"||((H=K.pathname)==null?void 0:H.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${K.pathname}" was given in the \`location\` prop.`),C=K}else C=T;let U=C.pathname||"/",z=U;if(x!=="/"){let K=x.replace(/^\//,"").split("/");z="/"+U.replace(/^\//,"").split("/").slice(K.length).join("/")}let L=o_(s,{pathname:z});rr(_||L!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),rr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=vS(L&&L.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:Vs([x,c.encodeLocation?c.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?x:Vs([x,c.encodeLocation?c.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),u,n,a,o);return e&&B?I.createElement(Gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},B):B}function mS(){let s=wS(),e=oS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,u)}var gS=I.createElement(mS,null),pS=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?I.createElement(Vr.Provider,{value:this.props.routeContext},I.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yS({routeContext:s,match:e,children:n}){let a=I.useContext(il);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Vr.Provider,{value:s},n)}function vS(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,u=n==null?void 0:n.errors;if(u!=null){let x=c.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);Tt(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let g=!1,p=-1;if(n)for(let x=0;x<c.length;x++){let _=c[x];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=x),_.route.id){let{loaderData:T,errors:C}=n,U=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!C||C[_.route.id]===void 0);if(_.route.lazy||U){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let y=n&&a?(x,_)=>{var T,C;a(x,{location:n.location,params:((C=(T=n.matches)==null?void 0:T[0])==null?void 0:C.params)??{},errorInfo:_})}:void 0;return c.reduceRight((x,_,T)=>{let C,U=!1,z=null,L=null;n&&(C=u&&_.route.id?u[_.route.id]:void 0,z=_.route.errorElement||gS,g&&(p<0&&T===0?(p_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,L=null):p===T&&(U=!0,L=_.route.hydrateFallbackElement||null)));let B=e.concat(c.slice(0,T+1)),H=()=>{let K;return C?K=z:U?K=L:_.route.Component?K=I.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=x,I.createElement(yS,{match:_,routeContext:{outlet:x,matches:B,isDataRoute:n!=null},children:K})};return n&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?I.createElement(pS,{location:n.location,revalidation:n.revalidation,component:z,error:C,children:H(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:y}):H()},null)}function Pg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(s){let e=I.useContext(il);return Tt(e,Pg(s)),e}function bS(s){let e=I.useContext(Eh);return Tt(e,Pg(s)),e}function _S(s){let e=I.useContext(Vr);return Tt(e,Pg(s)),e}function Ug(s){let e=_S(s),n=e.matches[e.matches.length-1];return Tt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function ES(){return Ug("useRouteId")}function wS(){var a;let s=I.useContext(Lg),e=bS("useRouteError"),n=Ug("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[n]}function TS(){let{router:s}=xS("useNavigate"),e=Ug("useNavigate"),n=I.useRef(!1);return f_(()=>{n.current=!0}),I.useCallback(async(o,c={})=>{rr(n.current,h_),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var _x={};function p_(s,e,n){!e&&!_x[s]&&(_x[s]=!0,rr(!1,n))}I.memo(SS);function SS({routes:s,future:e,state:n,unstable_onError:a}){return g_(s,void 0,n,a,e)}function Ud({to:s,replace:e,state:n,relative:a}){Tt(ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(Mr);rr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=I.useContext(Vr),{pathname:u}=qs(),g=Ya(),p=Vg(s,Mg(c),u,a==="path"),y=JSON.stringify(p);return I.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:a})},[g,y,a,e,n]),null}function yr(s){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AS({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:c=!1}){Tt(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),g=I.useMemo(()=>({basename:u,navigator:o,static:c,future:{}}),[u,o,c]);typeof n=="string"&&(n=Ui(n));let{pathname:p="/",search:y="",hash:x="",state:_=null,key:T="default"}=n,C=I.useMemo(()=>{let U=Ls(p,u);return U==null?null:{location:{pathname:U,search:y,hash:x,state:_,key:T},navigationType:a}},[u,p,y,x,_,T,a]);return rr(C!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:I.createElement(Mr.Provider,{value:g},I.createElement(Gc.Provider,{children:e,value:C}))}function NS({children:s,location:e}){return fS(lg(s),e)}function lg(s,e=[]){let n=[];return I.Children.forEach(s,(a,o)=>{if(!I.isValidElement(a))return;let c=[...e,o];if(a.type===I.Fragment){n.push.apply(n,lg(a.props.children,c));return}Tt(a.type===yr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=lg(a.props.children,c)),n.push(u)}),n}var zd="get",Bd="application/x-www-form-urlencoded";function wh(s){return s!=null&&typeof s.tagName=="string"}function CS(s){return wh(s)&&s.tagName.toLowerCase()==="button"}function IS(s){return wh(s)&&s.tagName.toLowerCase()==="form"}function RS(s){return wh(s)&&s.tagName.toLowerCase()==="input"}function kS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function jS(s,e){return s.button===0&&(!e||e==="_self")&&!kS(s)}var Rd=null;function DS(){if(Rd===null)try{new FormData(document.createElement("form"),0),Rd=!1}catch{Rd=!0}return Rd}var OS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Km(s){return s!=null&&!OS.has(s)?(rr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):s}function MS(s,e){let n,a,o,c,u;if(IS(s)){let g=s.getAttribute("action");a=g?Ls(g,e):null,n=s.getAttribute("method")||zd,o=Km(s.getAttribute("enctype"))||Bd,c=new FormData(s)}else if(CS(s)||RS(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||g.getAttribute("action");if(a=p?Ls(p,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||zd,o=Km(s.getAttribute("formenctype"))||Km(g.getAttribute("enctype"))||Bd,c=new FormData(g,s),!DS()){let{name:y,type:x,value:_}=s;if(x==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,_)}}else{if(wh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zd,a=null,o=Bd,u=s}return c&&o==="text/plain"&&(u=c,c=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function VS(s,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&Ls(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function LS(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function US(s,e,n){let a=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let u=await LS(c,n);return u.links?u.links():[]}return[]}));return HS(a.flat(1).filter(PS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ex(s,e,n,a,o,c){let u=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>{var x;return n[y].pathname!==p.pathname||((x=n[y].route.path)==null?void 0:x.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return c==="assets"?e.filter((p,y)=>u(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{var _;let x=a.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(u(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((_=n[0])==null?void 0:_.params)||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function zS(s,e,{includeHydrateFallback:n}={}){return BS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function BS(s){return[...new Set(s)]}function qS(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function HS(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let c=JSON.stringify(qS(o));return n.has(c)||(n.add(c),a.push({key:c,link:o})),a},[])}function y_(){let s=I.useContext(il);return zg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function FS(){let s=I.useContext(Eh);return zg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Bg=I.createContext(void 0);Bg.displayName="FrameworkContext";function v_(){let s=I.useContext(Bg);return zg(s,"You must render this element inside a <HydratedRouter> element"),s}function GS(s,e){let n=I.useContext(Bg),[a,o]=I.useState(!1),[c,u]=I.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:x,onTouchStart:_}=e,T=I.useRef(null);I.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let z=B=>{B.forEach(H=>{u(H.isIntersecting)})},L=new IntersectionObserver(z,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[s]),I.useEffect(()=>{if(a){let z=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(z)}}},[a]);let C=()=>{o(!0)},U=()=>{o(!1),u(!1)};return n?s!=="intent"?[c,T,{}]:[c,T,{onFocus:vc(g,C),onBlur:vc(p,U),onMouseEnter:vc(y,C),onMouseLeave:vc(x,U),onTouchStart:vc(_,C)}]:[!1,T,{}]}function vc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function QS({page:s,...e}){let{router:n}=y_(),a=I.useMemo(()=>o_(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?I.createElement(KS,{page:s,matches:a,...e}):null}function $S(s){let{manifest:e,routeModules:n}=v_(),[a,o]=I.useState([]);return I.useEffect(()=>{let c=!1;return US(s,e,n).then(u=>{c||o(u)}),()=>{c=!0}},[s,e,n]),a}function KS({page:s,matches:e,...n}){let a=qs(),{manifest:o,routeModules:c}=v_(),{basename:u}=y_(),{loaderData:g,matches:p}=FS(),y=I.useMemo(()=>Ex(s,e,p,o,a,"data"),[s,e,p,o,a]),x=I.useMemo(()=>Ex(s,e,p,o,a,"assets"),[s,e,p,o,a]),_=I.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let U=new Set,z=!1;if(e.forEach(B=>{var K;let H=o.routes[B.route.id];!H||!H.hasLoader||(!y.some(de=>de.route.id===B.route.id)&&B.route.id in g&&((K=c[B.route.id])!=null&&K.shouldRevalidate)||H.hasClientLoader?z=!0:U.add(B.route.id))}),U.size===0)return[];let L=VS(s,u,"data");return z&&U.size>0&&L.searchParams.set("_routes",e.filter(B=>U.has(B.route.id)).map(B=>B.route.id).join(",")),[L.pathname+L.search]},[u,g,a,o,y,e,s,c]),T=I.useMemo(()=>zS(x,o),[x,o]),C=$S(x);return I.createElement(I.Fragment,null,_.map(U=>I.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),T.map(U=>I.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),C.map(({key:U,link:z})=>I.createElement("link",{key:U,nonce:n.nonce,...z})))}function YS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var x_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x_&&(window.__reactRouterVersion="7.9.6")}catch{}function XS({basename:s,children:e,window:n}){let a=I.useRef();a.current==null&&(a.current=L1({window:n,v5Compat:!0}));let o=a.current,[c,u]=I.useState({action:o.action,location:o.location}),g=I.useCallback(p=>{I.startTransition(()=>u(p))},[u]);return I.useLayoutEffect(()=>o.listen(g),[o,g]),I.createElement(AS,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var b_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=I.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:c,replace:u,state:g,target:p,to:y,preventScrollReset:x,viewTransition:_,...T},C){let{basename:U}=I.useContext(Mr),z=typeof y=="string"&&b_.test(y),L,B=!1;if(typeof y=="string"&&z&&(L=y,x_))try{let N=new URL(window.location.href),O=y.startsWith("//")?new URL(N.protocol+y):new URL(y),j=Ls(O.pathname,U);O.origin===N.origin&&j!=null?y=j+O.search+O.hash:B=!0}catch{rr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=dS(y,{relative:o}),[K,de,ye]=GS(a,T),be=e2(y,{replace:u,state:g,target:p,preventScrollReset:x,relative:o,viewTransition:_});function k(N){e&&e(N),N.defaultPrevented||be(N)}let A=I.createElement("a",{...T,...ye,href:L||H,onClick:B||c?e:k,ref:YS(C,de),target:p,"data-discover":!z&&n==="render"?"true":void 0});return K&&!z?I.createElement(I.Fragment,null,A,I.createElement(QS,{page:H})):A});xt.displayName="Link";var JS=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:c,to:u,viewTransition:g,children:p,...y},x){let _=Qc(u,{relative:y.relative}),T=qs(),C=I.useContext(Eh),{navigator:U,basename:z}=I.useContext(Mr),L=C!=null&&a2(_)&&g===!0,B=U.encodeLocation?U.encodeLocation(_).pathname:_.pathname,H=T.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(H=H.toLowerCase(),K=K?K.toLowerCase():null,B=B.toLowerCase()),K&&z&&(K=Ls(K,z)||K);const de=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ye=H===B||!o&&H.startsWith(B)&&H.charAt(de)==="/",be=K!=null&&(K===B||!o&&K.startsWith(B)&&K.charAt(B.length)==="/"),k={isActive:ye,isPending:be,isTransitioning:L},A=ye?e:void 0,N;typeof a=="function"?N=a(k):N=[a,ye?"active":null,be?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(k):c;return I.createElement(xt,{...y,"aria-current":A,className:N,ref:x,style:O,to:u,viewTransition:g},typeof p=="function"?p(k):p)});JS.displayName="NavLink";var WS=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:c,method:u=zd,action:g,onSubmit:p,relative:y,preventScrollReset:x,viewTransition:_,...T},C)=>{let U=r2(),z=s2(g,{relative:y}),L=u.toLowerCase()==="get"?"get":"post",B=typeof g=="string"&&b_.test(g),H=K=>{if(p&&p(K),K.defaultPrevented)return;K.preventDefault();let de=K.nativeEvent.submitter,ye=(de==null?void 0:de.getAttribute("formmethod"))||u;U(de||K.currentTarget,{fetcherKey:e,method:ye,navigate:n,replace:o,state:c,relative:y,preventScrollReset:x,viewTransition:_})};return I.createElement("form",{ref:C,method:L,action:z,onSubmit:a?p:H,...T,"data-discover":!B&&s==="render"?"true":void 0})});WS.displayName="Form";function ZS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function __(s){let e=I.useContext(il);return Tt(e,ZS(s)),e}function e2(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:c,viewTransition:u}={}){let g=Ya(),p=qs(),y=Qc(s,{relative:c});return I.useCallback(x=>{if(jS(x,e)){x.preventDefault();let _=n!==void 0?n:Dc(p)===Dc(y);g(s,{replace:_,state:a,preventScrollReset:o,relative:c,viewTransition:u})}},[p,g,y,n,a,e,s,o,c,u])}var t2=0,n2=()=>`__${String(++t2)}__`;function r2(){let{router:s}=__("useSubmit"),{basename:e}=I.useContext(Mr),n=ES();return I.useCallback(async(a,o={})=>{let{action:c,method:u,encType:g,formData:p,body:y}=MS(a,e);if(o.navigate===!1){let x=o.fetcherKey||n2();await s.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||u,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||u,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function s2(s,{relative:e}={}){let{basename:n}=I.useContext(Mr),a=I.useContext(Vr);Tt(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...Qc(s||".",{relative:e})},u=qs();if(s==null){c.search=u.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(x=>x==="")){g.delete("index"),p.filter(_=>_).forEach(_=>g.append("index",_));let x=g.toString();c.search=x?`?${x}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Vs([n,c.pathname])),Dc(c)}function a2(s,{relative:e}={}){let n=I.useContext(d_);Tt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=__("useViewTransitionState"),o=Qc(s,{relative:e});if(!n.isTransitioning)return!1;let c=Ls(n.currentLocation.pathname,a)||n.currentLocation.pathname,u=Ls(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Wd(o.pathname,u)!=null||Wd(o.pathname,c)!=null}var it=(s=>(s.ADMIN="admin",s.USER="user",s))(it||{}),Zn=(s=>(s.CONFIRMED="confirmed",s.CANCELED="canceled",s.WAITLIST="waitlist",s))(Zn||{});const cn=s=>{if(!s)return"";if(s.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,n,a]=s.split("-");return`${a}/${n}/${e}`}try{const e=new Date(s);return isNaN(e.getTime())?s:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return s}},Da=s=>{if(!s)return 0;const[e,n]=s.split(":").map(Number);return e*60+n},i2=s=>s&&s.apiKey&&s.projectId&&s.appId,wx={apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.appspot.com",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML"},ji={useFirebase:i2(wx),firebase:wx},o2=()=>{};var Tx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},l2=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],u=s[n++],g=s[n++],p=((o&7)<<18|(c&63)<<12|(u&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],u=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},w_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const c=s[o],u=o+1<s.length,g=u?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,x=c>>2,_=(c&3)<<4|g>>4;let T=(g&15)<<2|y>>6,C=y&63;p||(C=64,u||(T=64)),a.push(n[x],n[_],n[T],n[C])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(E_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):l2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const _=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||g==null||y==null||_==null)throw new c2;const T=c<<2|g>>4;if(a.push(T),y!==64){const C=g<<4&240|y>>2;if(a.push(C),_!==64){const U=y<<6&192|_;a.push(U)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class c2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u2=function(s){const e=E_(s);return w_.encodeByteArray(e,!0)},Zd=function(s){return u2(s).replace(/\./g,"")},T_=function(s){try{return w_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=()=>d2().__FIREBASE_DEFAULTS__,f2=()=>{if(typeof process>"u"||typeof Tx>"u")return;const s=Tx.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},m2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&T_(s[1]);return e&&JSON.parse(e)},Th=()=>{try{return o2()||h2()||f2()||m2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},S_=s=>{var e,n;return(n=(e=Th())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},g2=s=>{const e=S_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},A_=()=>{var s;return(s=Th())==null?void 0:s.config},N_=s=>{var e;return(e=Th())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Zd(JSON.stringify(n)),Zd(JSON.stringify(u)),""].join(".")}const Ac={};function v2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?s.emulator.push(e):s.prod.push(e);return s}function x2(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Sx=!1;function I_(s,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||Ac[s]===e||Ac[s]||Sx)return;Ac[s]=e;function n(T){return`__firebase__banner__${T}`}const a="__firebase__banner",c=v2().prod.length>0;function u(){const T=document.getElementById(a);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Sx=!0,u()},T}function x(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=x2(a),C=n("text"),U=document.getElementById(C)||document.createElement("span"),z=n("learnmore"),L=document.getElementById(z)||document.createElement("a"),B=n("preprendIcon"),H=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;g(K),x(L,z);const de=y();p(H,B),K.append(H,U,L,de),document.body.appendChild(K)}c?(U.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function _2(){var e;const s=(e=Th())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function T2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S2(){const s=Tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function A2(){return!_2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N2(){try{return typeof indexedDB=="object"}catch{return!1}}function C2(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class Hs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=I2,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?R2(c,a):"Error",g=`${this.serviceName}: ${u} (${o}).`;return new Hs(o,g,a)}}function R2(s,e){return s.replace(k2,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const k2=/\{\$([^}]+)}/g;function j2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Di(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const c=s[o],u=e[o];if(Ax(c)&&Ax(u)){if(!Di(c,u))return!1}else if(c!==u)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Ax(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function _c(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,c]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Ec(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function D2(s,e){const n=new O2(s,e);return n.subscribe.bind(n)}class O2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");M2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Ym),o.error===void 0&&(o.error=Ym),o.complete===void 0&&(o.complete=Ym);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M2(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(s){return s&&s._delegate?s._delegate:s}class Oi{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new p2;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P2(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,u]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&u.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:L2(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L2(s){return s===Ii?void 0:s}function P2(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})($e||($e={}));const z2={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},B2=$e.INFO,q2={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},H2=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=q2[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=B2,this._logHandler=H2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const F2=(s,e)=>e.some(n=>s instanceof n);let Nx,Cx;function G2(){return Nx||(Nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q2(){return Cx||(Cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R_=new WeakMap,cg=new WeakMap,k_=new WeakMap,Xm=new WeakMap,Hg=new WeakMap;function $2(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{n(Va(s.result)),o()},u=()=>{a(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&R_.set(n,s)}).catch(()=>{}),Hg.set(e,s),e}function K2(s){if(cg.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});cg.set(s,e)}let ug={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return cg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||k_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Va(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Y2(s){ug=s(ug)}function X2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(Jm(this),e,...n);return k_.set(a,e.sort?e.sort():[e]),Va(a)}:Q2().includes(s)?function(...e){return s.apply(Jm(this),e),Va(R_.get(this))}:function(...e){return Va(s.apply(Jm(this),e))}}function J2(s){return typeof s=="function"?X2(s):(s instanceof IDBTransaction&&K2(s),F2(s,G2())?new Proxy(s,ug):s)}function Va(s){if(s instanceof IDBRequest)return $2(s);if(Xm.has(s))return Xm.get(s);const e=J2(s);return e!==s&&(Xm.set(s,e),Hg.set(e,s)),e}const Jm=s=>Hg.get(s);function W2(s,e,{blocked:n,upgrade:a,blocking:o,terminated:c}={}){const u=indexedDB.open(s,e),g=Va(u);return a&&u.addEventListener("upgradeneeded",p=>{a(Va(u.result),p.oldVersion,p.newVersion,Va(u.transaction),p)}),n&&u.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const Z2=["get","getKey","getAll","getAllKeys","count"],eA=["put","add","delete","clear"],Wm=new Map;function Ix(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=eA.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||Z2.includes(n)))return;const c=async function(u,...g){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Wm.set(e,c),c}Y2(s=>({...s,get:(e,n,a)=>Ix(e,n)||s.get(e,n,a),has:(e,n)=>!!Ix(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nA(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function nA(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dg="@firebase/app",Rx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new qg("@firebase/app"),rA="@firebase/app-compat",sA="@firebase/analytics-compat",aA="@firebase/analytics",iA="@firebase/app-check-compat",oA="@firebase/app-check",lA="@firebase/auth",cA="@firebase/auth-compat",uA="@firebase/database",dA="@firebase/data-connect",hA="@firebase/database-compat",fA="@firebase/functions",mA="@firebase/functions-compat",gA="@firebase/installations",pA="@firebase/installations-compat",yA="@firebase/messaging",vA="@firebase/messaging-compat",xA="@firebase/performance",bA="@firebase/performance-compat",_A="@firebase/remote-config",EA="@firebase/remote-config-compat",wA="@firebase/storage",TA="@firebase/storage-compat",SA="@firebase/firestore",AA="@firebase/ai",NA="@firebase/firestore-compat",CA="firebase",IA="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="[DEFAULT]",RA={[dg]:"fire-core",[rA]:"fire-core-compat",[aA]:"fire-analytics",[sA]:"fire-analytics-compat",[oA]:"fire-app-check",[iA]:"fire-app-check-compat",[lA]:"fire-auth",[cA]:"fire-auth-compat",[uA]:"fire-rtdb",[dA]:"fire-data-connect",[hA]:"fire-rtdb-compat",[fA]:"fire-fn",[mA]:"fire-fn-compat",[gA]:"fire-iid",[pA]:"fire-iid-compat",[yA]:"fire-fcm",[vA]:"fire-fcm-compat",[xA]:"fire-perf",[bA]:"fire-perf-compat",[_A]:"fire-rc",[EA]:"fire-rc-compat",[wA]:"fire-gcs",[TA]:"fire-gcs-compat",[SA]:"fire-fst",[NA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,kA=new Map,fg=new Map;function kx(s,e){try{s.container.addComponent(e)}catch(n){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Xo(s){const e=s.name;if(fg.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,s);for(const n of eh.values())kx(n,s);for(const n of kA.values())kx(n,s);return!0}function Fg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function vr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},La=new $c("app","Firebase",jA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw La.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=IA;function j_(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:hg,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw La.create("bad-app-name",{appName:String(o)});if(n||(n=A_()),!n)throw La.create("no-options");const c=eh.get(o);if(c){if(Di(n,c.options)&&Di(a,c.config))return c;throw La.create("duplicate-app",{appName:o})}const u=new U2(o);for(const p of fg.values())u.addComponent(p);const g=new DA(n,a,u);return eh.set(o,g),g}function D_(s=hg){const e=eh.get(s);if(!e&&s===hg&&A_())return j_();if(!e)throw La.create("no-app",{appName:s});return e}function Pa(s,e,n){let a=RA[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${a}" with version "${e}":`];o&&u.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(u.join(" "));return}Xo(new Oi(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firebase-heartbeat-database",MA=1,Oc="firebase-heartbeat-store";let Zm=null;function O_(){return Zm||(Zm=W2(OA,MA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(s=>{throw La.create("idb-open",{originalErrorMessage:s.message})})),Zm}async function VA(s){try{const n=(await O_()).transaction(Oc),a=await n.objectStore(Oc).get(M_(s));return await n.done,a}catch(e){if(e instanceof Hs)Ps.warn(e.message);else{const n=La.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(n.message)}}}async function jx(s,e){try{const a=(await O_()).transaction(Oc,"readwrite");await a.objectStore(Oc).put(e,M_(s)),await a.done}catch(n){if(n instanceof Hs)Ps.warn(n.message);else{const a=La.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ps.warn(a.message)}}}function M_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=1024,PA=30;class UA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BA(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Dx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>PA){const u=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ps.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dx(),{heartbeatsToSend:a,unsentEntries:o}=zA(this._heartbeatsCache.heartbeats),c=Zd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ps.warn(n),""}}}function Dx(){return new Date().toISOString().substring(0,10)}function zA(s,e=LA){const n=[];let a=s.slice();for(const o of s){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),Ox(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ox(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class BA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N2()?C2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return jx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return jx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Ox(s){return Zd(JSON.stringify({version:2,heartbeats:s})).length}function qA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(s){Xo(new Oi("platform-logger",e=>new tA(e),"PRIVATE")),Xo(new Oi("heartbeat",e=>new UA(e),"PRIVATE")),Pa(dg,Rx,s),Pa(dg,Rx,"esm2020"),Pa("fire-js","")}HA("");var FA="firebase",GA="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pa(FA,GA,"app");function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QA=V_,L_=new $c("auth","Firebase",V_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new qg("@firebase/auth");function $A(s,...e){th.logLevel<=$e.WARN&&th.warn(`Auth (${cl}): ${s}`,...e)}function qd(s,...e){th.logLevel<=$e.ERROR&&th.error(`Auth (${cl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(s,...e){throw Qg(s,...e)}function Dr(s,...e){return Qg(s,...e)}function Gg(s,e,n){const a={...QA(),[e]:n};return new $c("auth","Firebase",a).create(e,{appName:s.name})}function Ua(s){return Gg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KA(s,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&xr(s,"argument-error"),Gg(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return L_.create(s,...e)}function ke(s,e,...n){if(!s)throw Qg(e,...n)}function Os(s){const e="INTERNAL ASSERTION FAILED: "+s;throw qd(e),new Error(e)}function Us(s,e){s||Os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function YA(){return Mx()==="http:"||Mx()==="https:"}function Mx(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YA()||w2()||"connection"in navigator)?navigator.onLine:!0}function JA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Us(n>e,"Short delay should be less than long delay!"),this.isMobile=b2()||T2()}get(){return XA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(s,e){Us(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eN=new Yc(3e4,6e4);function zi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Xa(s,e,n,a,o={}){return U_(s,o,async()=>{let c={},u={};a&&(e==="GET"?u=a:c={body:JSON.stringify(a)});const g=Kc({key:s.config.apiKey,...u}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...c};return E2()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&ll(s.emulatorConfig.host)&&(y.credentials="include"),P_.fetch()(await z_(s,s.config.apiHost,n,g),y)})}async function U_(s,e,n){s._canInitEmulator=!1;const a={...WA,...e};try{const o=new nN(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw kd(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const g=c.ok?u.errorMessage:u.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(s,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw kd(s,"email-already-in-use",u);if(p==="USER_DISABLED")throw kd(s,"user-disabled",u);const x=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Gg(s,x,y);xr(s,x)}}catch(o){if(o instanceof Hs)throw o;xr(s,"network-request-failed",{message:String(o)})}}async function Sh(s,e,n,a,o={}){const c=await Xa(s,e,n,a,o);return"mfaPendingCredential"in c&&xr(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function z_(s,e,n,a){const o=`${e}${n}?${a}`,c=s,u=c.config.emulator?$g(s.config,o):`${s.config.apiScheme}://${o}`;return ZA.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function tN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Dr(this.auth,"network-request-failed")),eN.get())})}}function kd(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Dr(s,e,a);return o.customData._tokenResponse=n,o}function Vx(s){return s!==void 0&&s.enterprise!==void 0}class rN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sN(s,e){return Xa(s,"GET","/v2/recaptchaConfig",zi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(s,e){return Xa(s,"POST","/v1/accounts:delete",e)}async function nh(s,e){return Xa(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iN(s,e=!1){const n=Rt(s),a=await n.getIdToken(e),o=Kg(a);ke(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:a,authTime:Nc(eg(o.auth_time)),issuedAtTime:Nc(eg(o.iat)),expirationTime:Nc(eg(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function eg(s){return Number(s)*1e3}function Kg(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const o=T_(n);return o?JSON.parse(o):(qd("Failed to decode base64 JWT payload"),null)}catch(o){return qd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Lx(s){const e=Kg(s);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Hs&&oN(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function oN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nc(this.lastLoginAt),this.creationTime=Nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(s){var _;const e=s.auth,n=await s.getIdToken(),a=await Mc(s,nh(e,{idToken:n}));ke(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const c=(_=o.providerUserInfo)!=null&&_.length?B_(o.providerUserInfo):[],u=uN(s.providerData,c),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(u!=null&&u.length),y=g?p:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new gg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function cN(s){const e=Rt(s);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uN(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function B_(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(s,e){const n=await U_(s,{},async()=>{const a=Kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,u=await z_(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:a};return s.emulatorConfig&&ll(s.emulatorConfig.host)&&(p.credentials="include"),P_.fetch()(u,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hN(s,e){return Xa(s,"POST","/v2/accounts:revokeToken",zi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=Lx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:c}=await dN(e,n);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:c}=n,u=new Go;return a&&(ke(typeof a=="string","internal-error",{appName:e}),u.refreshToken=a),o&&(ke(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(ke(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(s,e){ke(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class jr{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new lN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iN(this,e)}reload(){return cN(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vr(this.auth.app))return Promise.reject(Ua(this.auth));const e=await this.getIdToken();return await Mc(this,aN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:C,providerData:U,stsTokenManager:z}=n;ke(_&&z,e,"internal-error");const L=Go.fromJSON(this.name,z);ke(typeof _=="string",e,"internal-error"),Ca(a,e.name),Ca(o,e.name),ke(typeof T=="boolean",e,"internal-error"),ke(typeof C=="boolean",e,"internal-error"),Ca(c,e.name),Ca(u,e.name),Ca(g,e.name),Ca(p,e.name),Ca(y,e.name),Ca(x,e.name);const B=new jr({uid:_,auth:e,email:o,emailVerified:T,displayName:a,isAnonymous:C,photoURL:u,phoneNumber:c,tenantId:g,stsTokenManager:L,createdAt:y,lastLoginAt:x});return U&&Array.isArray(U)&&(B.providerData=U.map(H=>({...H}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,a=!1){const o=new Go;o.updateFromServerResponse(n);const c=new jr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await rh(c),c}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];ke(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?B_(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),g=new Go;g.updateFromIdToken(a);const p=new jr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new gg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Map;function Ms(s){Us(s instanceof Function,"Expected a class definition");let e=Px.get(s);return e?(Us(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Px.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q_.type="NONE";const Ux=q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(s,e,n){return`firebase:${s}:${e}:${n}`}class Qo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=Hd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Hd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nh(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Qo(Ms(Ux),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Ms(Ux);const u=Hd(a,e.config.apiKey,e.name);let g=null;for(const y of n)try{const x=await y._get(u);if(x){let _;if(typeof x=="string"){const T=await nh(e,{idToken:x}).catch(()=>{});if(!T)break;_=await jr._fromGetAccountInfoResponse(e,T,x)}else _=jr._fromJSON(e,x);y!==c&&(g=_),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Qo(c,e,a):(c=p[0],g&&await c._set(u,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new Qo(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K_(e))return"Blackberry";if(Y_(e))return"Webos";if(F_(e))return"Safari";if((e.includes("chrome/")||G_(e))&&!e.includes("edge/"))return"Chrome";if($_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function H_(s=Tn()){return/firefox\//i.test(s)}function F_(s=Tn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G_(s=Tn()){return/crios\//i.test(s)}function Q_(s=Tn()){return/iemobile/i.test(s)}function $_(s=Tn()){return/android/i.test(s)}function K_(s=Tn()){return/blackberry/i.test(s)}function Y_(s=Tn()){return/webos/i.test(s)}function Yg(s=Tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function fN(s=Tn()){var e;return Yg(s)&&!!((e=window.navigator)!=null&&e.standalone)}function mN(){return S2()&&document.documentMode===10}function X_(s=Tn()){return Yg(s)||$_(s)||Y_(s)||K_(s)||/windows phone/i.test(s)||Q_(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(s,e=[]){let n;switch(s){case"Browser":n=zx(Tn());break;case"Worker":n=`${zx(Tn())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=c=>new Promise((u,g)=>{try{const p=e(c);u(p)}catch(p){g(p)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(s,e={}){return Xa(s,"GET","/v2/passwordPolicy",zi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=6;class vN{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bx(this),this.idTokenSubscription=new Bx(this),this.beforeStateQueue=new gN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ms(n)),this._initializationPromise=this.queue(async()=>{var a,o,c;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nh(this,{idToken:e}),a=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(vr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===g)&&(p!=null&&p.user)&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vr(this.app))return Promise.reject(Ua(this));const n=e?Rt(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vr(this.app)?Promise.reject(Ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vr(this.app)?Promise.reject(Ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pN(this),n=new vN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await hN(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ms(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(g,this,"internal-error"),g.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,a,o);return()=>{u=!0,p()}}else{const p=e.addObserver(n);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$A(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bi(s){return Rt(s)}class Bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=D2(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bN(s){Ah=s}function W_(s){return Ah.loadJS(s)}function _N(){return Ah.recaptchaEnterpriseScript}function EN(){return Ah.gapiScript}function wN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class TN{constructor(){this.enterprise=new SN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AN="recaptcha-enterprise",Z_="NO_RECAPTCHA";class NN{constructor(e){this.type=AN,this.auth=Bi(e)}async verify(e="verify",n=!1){async function a(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,g)=>{sN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new rN(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(p=>{g(p)})})}function o(c,u,g){const p=window.grecaptcha;Vx(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(Z_)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TN().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{a(this.auth).then(g=>{if(!n&&Vx(window.grecaptcha))o(g,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_N();p.length!==0&&(p+=g),W_(p).then(()=>{o(g,c,u)}).catch(y=>{u(y)})}}).catch(g=>{u(g)})})}}async function qx(s,e,n,a=!1,o=!1){const c=new NN(s);let u;if(o)u=Z_;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:u}):Object.assign(g,{captchaResponse:u}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Hx(s,e,n,a,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await qx(s,e,n,n==="getOobCode");return a(s,u)}else return a(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await qx(s,e,n,n==="getOobCode");return a(s,g)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(s,e){const n=Fg(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Di(c,e??{}))return o;xr(o,"already-initialized")}return n.initialize({options:e})}function IN(s,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Ms);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function RN(s,e,n){const a=Bi(s);ke(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,c=eE(e),{host:u,port:g}=kN(e),p=g===null?"":`:${g}`,y={url:`${c}//${u}${p}/`},x=Object.freeze({host:u,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){ke(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ke(Di(y,a.config.emulator)&&Di(x,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=x,a.settings.appVerificationDisabledForTesting=!0,ll(u)?(C_(`${c}//${u}${p}`),I_("Auth",!0)):jN()}function eE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function kN(s){const e=eE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:Fx(a.substr(c.length+1))}}else{const[c,u]=a.split(":");return{host:c,port:Fx(u)}}}function Fx(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function jN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,n){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}}async function DN(s,e){return Xa(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(s,e){return Sh(s,"POST","/v1/accounts:signInWithPassword",zi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(s,e){return Sh(s,"POST","/v1/accounts:signInWithEmailLink",zi(s,e))}async function VN(s,e){return Sh(s,"POST","/v1/accounts:signInWithEmailLink",zi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Xg{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Vc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Vc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hx(e,n,"signInWithPassword",ON);case"emailLink":return MN(e,{email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hx(e,a,"signUpPassword",DN);case"emailLink":return VN(e,{idToken:n,email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(s,e){return Sh(s,"POST","/v1/accounts:signInWithIdp",zi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="http://localhost";class Mi extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...c}=n;if(!a||!o)return null;const u=new Mi(a,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,$o(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){const e={requestUri:LN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UN(s){const e=_c(Ec(s)).link,n=e?_c(Ec(e)).deep_link_id:null,a=_c(Ec(s)).deep_link_id;return(a?_c(Ec(a)).link:null)||a||n||e||s}class Jg{constructor(e){const n=_c(Ec(e)),a=n.apiKey??null,o=n.oobCode??null,c=PN(n.mode??null);ke(a&&o&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=UN(e);try{return new Jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.providerId=ul.PROVIDER_ID}static credential(e,n){return Vc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Jg.parseLink(n);return ke(a,"argument-error"),Vc._fromEmailAndCode(e,a.code,a.tenantId)}}ul.PROVIDER_ID="password";ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Wg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Xc{constructor(){super("facebook.com")}static credential(e){return Mi._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Ds.credential(n,a)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends Xc{constructor(){super("github.com")}static credential(e){return Mi._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ka.credential(e.oauthAccessToken)}catch{return null}}}ka.GITHUB_SIGN_IN_METHOD="github.com";ka.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Xc{constructor(){super("twitter.com")}static credential(e,n){return Mi._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return ja.credential(n,a)}catch{return null}}}ja.TWITTER_SIGN_IN_METHOD="twitter.com";ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const c=await jr._fromIdTokenResponse(e,a,o),u=Gx(a);return new Jo({user:c,providerId:u,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=Gx(a);return new Jo({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function Gx(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends Hs{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new sh(e,n,a,o)}}function tE(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(s,c,e,a):c})}async function zN(s,e,n=!1){const a=await Mc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Jo._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(s,e,n=!1){const{auth:a}=s;if(vr(a.app))return Promise.reject(Ua(a));const o="reauthenticate";try{const c=await Mc(s,tE(a,o,e,s),n);ke(c.idToken,a,"internal-error");const u=Kg(c.idToken);ke(u,a,"internal-error");const{sub:g}=u;return ke(s.uid===g,a,"user-mismatch"),Jo._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&xr(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(s,e,n=!1){if(vr(s.app))return Promise.reject(Ua(s));const a="signIn",o=await tE(s,a,e),c=await Jo._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(c.user),c}async function qN(s,e){return nE(Bi(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(s){const e=Bi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function FN(s,e,n){return vr(s.app)?Promise.reject(Ua(s)):qN(Rt(s),ul.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&HN(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(s,e){return Rt(s).setPersistence(e)}function GN(s,e,n,a){return Rt(s).onIdTokenChanged(e,n,a)}function QN(s,e,n){return Rt(s).beforeAuthStateChanged(e,n)}function $N(s,e,n,a){return Rt(s).onAuthStateChanged(e,n,a)}function KN(s){return Rt(s).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=1e3,XN=10;class sE extends rE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,g,p)=>{this.notifyListeners(u,p)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(a);!n&&this.localCache[a]===u||this.notifyListeners(a,u)},c=this.storage.getItem(a);mN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,XN):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},YN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sE.type="LOCAL";const JN=sE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends rE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aE.type="SESSION";const ih=aE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Nh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(u).map(async y=>y(n.origin,c)),p=await WN(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((g,p)=>{const y=Zg("",20);o.port1.start();const x=setTimeout(()=>{p(new Error("unsupported_event"))},a);u={messageChannel:o,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(T.data.response);break;default:clearTimeout(x),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return window}function eC(s){ss().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(){return typeof ss().WorkerGlobalScope<"u"&&typeof ss().importScripts=="function"}async function tC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function rC(){return iE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firebaseLocalStorageDb",sC=1,oh="firebaseLocalStorage",lE="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(s,e){return s.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function aC(){const s=indexedDB.deleteDatabase(oE);return new Jc(s).toPromise()}function pg(){const s=indexedDB.open(oE,sC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(oh,{keyPath:lE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(oh)?e(a):(a.close(),await aC(),e(await pg()))})})}async function $x(s,e,n){const a=Ch(s,!0).put({[lE]:e,value:n});return new Jc(a).toPromise()}async function iC(s,e){const n=Ch(s,!1).get(e),a=await new Jc(n).toPromise();return a===void 0?null:a.value}function Kx(s,e){const n=Ch(s,!0).delete(e);return new Jc(n).toPromise()}const oC=800,lC=3;class cE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>lC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(rC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await tC(),!this.activeServiceWorker)return;this.sender=new ZN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await $x(e,ah,"1"),await Kx(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>$x(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>iC(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Ch(o,!1).getAll();return new Jc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cE.type="LOCAL";const cC=cE;new Yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(s,e){return e?Ms(e):(ke(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uC(s){return nE(s.auth,new ep(s),s.bypassAuthState)}function dC(s){const{auth:e,user:n}=s;return ke(n,e,"internal-error"),BN(n,new ep(s),s.bypassAuthState)}async function hC(s){const{auth:e,user:n}=s;return ke(n,e,"internal-error"),zN(n,new ep(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,a,o,c=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:c,error:u,type:g}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:n,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uC;case"linkViaPopup":case"linkViaRedirect":return hC;case"reauthViaPopup":case"reauthViaRedirect":return dC;default:xr(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Yc(2e3,1e4);async function mC(s,e,n){if(vr(s.app))return Promise.reject(Dr(s,"operation-not-supported-in-this-environment"));const a=Bi(s);KA(s,e,Wg);const o=uE(a,n);return new Ri(a,"signInViaPopup",e,o).executeNotNull()}class Ri extends dE{constructor(e,n,a,o,c){super(e,n,o,c),this.provider=a,this.authWindow=null,this.pollId=null,Ri.currentPopupAction&&Ri.currentPopupAction.cancel(),Ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=Zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fC.get())};e()}}Ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="pendingRedirect",Fd=new Map;class pC extends dE{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const a=await yC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yC(s,e){const n=bC(e),a=xC(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function vC(s,e){Fd.set(s._key(),e)}function xC(s){return Ms(s._redirectPersistence)}function bC(s){return Hd(gC,s.config.apiKey,s.name)}async function _C(s,e,n=!1){if(vr(s.app))return Promise.reject(Ua(s));const a=Bi(s),o=uE(a,e),u=await new pC(a,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await a._persistUserIfCurrent(u.user),await a._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=600*1e3;class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!hE(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(Dr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yx(e))}saveEventToCache(e){this.cachedEventUids.add(Yx(e)),this.lastProcessedEventTime=Date.now()}}function Yx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function hE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(s,e={}){return Xa(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NC=/^https?/;async function CC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await SC(s);for(const n of e)try{if(IC(n))return}catch{}xr(s,"unauthorized-domain")}function IC(s){const e=mg(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===a}if(!NC.test(n))return!1;if(AC.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new Yc(3e4,6e4);function Xx(){const s=ss().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function kC(s){return new Promise((e,n)=>{var o,c,u;function a(){Xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xx(),n(Dr(s,"network-request-failed"))},timeout:RC.get()})}if((c=(o=ss().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=ss().gapi)!=null&&u.load)a();else{const g=wN("iframefcb");return ss()[g]=()=>{gapi.load?a():n(Dr(s,"network-request-failed"))},W_(`${EN()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function jC(s){return Gd=Gd||kC(s),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Yc(5e3,15e3),OC="__/auth/iframe",MC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(s){const e=s.config;ke(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?$g(e,MC):`https://${s.config.authDomain}/${OC}`,a={apiKey:e.apiKey,appName:s.name,v:cl},o=LC.get(s.config.apiHost);o&&(a.eid=o);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${n}?${Kc(a).slice(1)}`}async function UC(s){const e=await jC(s),n=ss().gapi;return ke(n,s,"internal-error"),e.open({where:document.body,url:PC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const u=Dr(s,"network-request-failed"),g=ss().setTimeout(()=>{c(u)},DC.get());function p(){ss().clearTimeout(g),o(a)}a.ping(p).then(p,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BC=500,qC=600,HC="_blank",FC="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(s,e,n,a=BC,o=qC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const p={...zC,width:a.toString(),height:o.toString(),top:c,left:u},y=Tn().toLowerCase();n&&(g=G_(y)?HC:n),H_(y)&&(e=e||FC,p.scrollbars="yes");const x=Object.entries(p).reduce((T,[C,U])=>`${T}${C}=${U},`,"");if(fN(y)&&g!=="_self")return QC(e||"",g),new Jx(null);const _=window.open(e||"",g,x);ke(_,s,"popup-blocked");try{_.focus()}catch{}return new Jx(_)}function QC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__/auth/handler",KC="emulator/auth/handler",YC=encodeURIComponent("fac");async function Wx(s,e,n,a,o,c){ke(s.config.authDomain,s,"auth-domain-config-required"),ke(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:cl,eventId:o};if(e instanceof Wg){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",j2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries({}))u[x]=_}if(e instanceof Xc){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(u.scopes=x.join(","))}s.tenantId&&(u.tid=s.tenantId);const g=u;for(const x of Object.keys(g))g[x]===void 0&&delete g[x];const p=await s._getAppCheckToken(),y=p?`#${YC}=${encodeURIComponent(p)}`:"";return`${XC(s)}?${Kc(g).slice(1)}${y}`}function XC({config:s}){return s.emulator?$g(s,KC):`https://${s.authDomain}/${$C}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class JC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ih,this._completeRedirectFn=_C,this._overrideRedirectResult=vC}async _openPopup(e,n,a,o){var u;Us((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await Wx(e,n,a,mg(),o);return GC(e,c,Zg())}async _openRedirect(e,n,a,o){await this._originValidation(e);const c=await Wx(e,n,a,mg(),o);return eC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Us(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await UC(e),a=new wC(e);return n.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[tg];c!==void 0&&n(!!c),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return X_()||F_()||Yg()}}const WC=JC;var Zx="@firebase/auth",eb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tI(s){Xo(new Oi("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:g}=a.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:u,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(s)},y=new xN(a,o,c,p);return IN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Xo(new Oi("auth-internal",e=>{const n=Bi(e.getProvider("auth").getImmediate());return(a=>new ZC(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pa(Zx,eb,eI(s)),Pa(Zx,eb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=300,rI=N_("authIdTokenMaxAge")||nI;let tb=null;const sI=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>rI)return;const o=n==null?void 0:n.token;tb!==o&&(tb=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aI(s=D_()){const e=Fg(s,"auth");if(e.isInitialized())return e.getImmediate();const n=CN(s,{popupRedirectResolver:WC,persistence:[cC,JN,ih]}),a=N_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const u=sI(c.toString());QN(n,u,()=>u(n.currentUser)),GN(n,g=>u(g))}}const o=S_("auth");return o&&RN(n,`http://${o}`),n}function iI(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}bN({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const c=Dr("internal-error");c.customData=o,n(c)},a.type="text/javascript",a.charset="UTF-8",iI().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tI("Browser");var nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var za,fE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function N(){}N.prototype=A.prototype,k.F=A.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(O,j,P){for(var R=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)R[Pe-2]=arguments[Pe];return A.prototype[j].apply(O,R)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,N){N||(N=0);const O=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)O[j]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(j=0;j<16;++j)O[j]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=k.g[0],N=k.g[1],j=k.g[2];let P=k.g[3],R;R=A+(P^N&(j^P))+O[0]+3614090360&4294967295,A=N+(R<<7&4294967295|R>>>25),R=P+(j^A&(N^j))+O[1]+3905402710&4294967295,P=A+(R<<12&4294967295|R>>>20),R=j+(N^P&(A^N))+O[2]+606105819&4294967295,j=P+(R<<17&4294967295|R>>>15),R=N+(A^j&(P^A))+O[3]+3250441966&4294967295,N=j+(R<<22&4294967295|R>>>10),R=A+(P^N&(j^P))+O[4]+4118548399&4294967295,A=N+(R<<7&4294967295|R>>>25),R=P+(j^A&(N^j))+O[5]+1200080426&4294967295,P=A+(R<<12&4294967295|R>>>20),R=j+(N^P&(A^N))+O[6]+2821735955&4294967295,j=P+(R<<17&4294967295|R>>>15),R=N+(A^j&(P^A))+O[7]+4249261313&4294967295,N=j+(R<<22&4294967295|R>>>10),R=A+(P^N&(j^P))+O[8]+1770035416&4294967295,A=N+(R<<7&4294967295|R>>>25),R=P+(j^A&(N^j))+O[9]+2336552879&4294967295,P=A+(R<<12&4294967295|R>>>20),R=j+(N^P&(A^N))+O[10]+4294925233&4294967295,j=P+(R<<17&4294967295|R>>>15),R=N+(A^j&(P^A))+O[11]+2304563134&4294967295,N=j+(R<<22&4294967295|R>>>10),R=A+(P^N&(j^P))+O[12]+1804603682&4294967295,A=N+(R<<7&4294967295|R>>>25),R=P+(j^A&(N^j))+O[13]+4254626195&4294967295,P=A+(R<<12&4294967295|R>>>20),R=j+(N^P&(A^N))+O[14]+2792965006&4294967295,j=P+(R<<17&4294967295|R>>>15),R=N+(A^j&(P^A))+O[15]+1236535329&4294967295,N=j+(R<<22&4294967295|R>>>10),R=A+(j^P&(N^j))+O[1]+4129170786&4294967295,A=N+(R<<5&4294967295|R>>>27),R=P+(N^j&(A^N))+O[6]+3225465664&4294967295,P=A+(R<<9&4294967295|R>>>23),R=j+(A^N&(P^A))+O[11]+643717713&4294967295,j=P+(R<<14&4294967295|R>>>18),R=N+(P^A&(j^P))+O[0]+3921069994&4294967295,N=j+(R<<20&4294967295|R>>>12),R=A+(j^P&(N^j))+O[5]+3593408605&4294967295,A=N+(R<<5&4294967295|R>>>27),R=P+(N^j&(A^N))+O[10]+38016083&4294967295,P=A+(R<<9&4294967295|R>>>23),R=j+(A^N&(P^A))+O[15]+3634488961&4294967295,j=P+(R<<14&4294967295|R>>>18),R=N+(P^A&(j^P))+O[4]+3889429448&4294967295,N=j+(R<<20&4294967295|R>>>12),R=A+(j^P&(N^j))+O[9]+568446438&4294967295,A=N+(R<<5&4294967295|R>>>27),R=P+(N^j&(A^N))+O[14]+3275163606&4294967295,P=A+(R<<9&4294967295|R>>>23),R=j+(A^N&(P^A))+O[3]+4107603335&4294967295,j=P+(R<<14&4294967295|R>>>18),R=N+(P^A&(j^P))+O[8]+1163531501&4294967295,N=j+(R<<20&4294967295|R>>>12),R=A+(j^P&(N^j))+O[13]+2850285829&4294967295,A=N+(R<<5&4294967295|R>>>27),R=P+(N^j&(A^N))+O[2]+4243563512&4294967295,P=A+(R<<9&4294967295|R>>>23),R=j+(A^N&(P^A))+O[7]+1735328473&4294967295,j=P+(R<<14&4294967295|R>>>18),R=N+(P^A&(j^P))+O[12]+2368359562&4294967295,N=j+(R<<20&4294967295|R>>>12),R=A+(N^j^P)+O[5]+4294588738&4294967295,A=N+(R<<4&4294967295|R>>>28),R=P+(A^N^j)+O[8]+2272392833&4294967295,P=A+(R<<11&4294967295|R>>>21),R=j+(P^A^N)+O[11]+1839030562&4294967295,j=P+(R<<16&4294967295|R>>>16),R=N+(j^P^A)+O[14]+4259657740&4294967295,N=j+(R<<23&4294967295|R>>>9),R=A+(N^j^P)+O[1]+2763975236&4294967295,A=N+(R<<4&4294967295|R>>>28),R=P+(A^N^j)+O[4]+1272893353&4294967295,P=A+(R<<11&4294967295|R>>>21),R=j+(P^A^N)+O[7]+4139469664&4294967295,j=P+(R<<16&4294967295|R>>>16),R=N+(j^P^A)+O[10]+3200236656&4294967295,N=j+(R<<23&4294967295|R>>>9),R=A+(N^j^P)+O[13]+681279174&4294967295,A=N+(R<<4&4294967295|R>>>28),R=P+(A^N^j)+O[0]+3936430074&4294967295,P=A+(R<<11&4294967295|R>>>21),R=j+(P^A^N)+O[3]+3572445317&4294967295,j=P+(R<<16&4294967295|R>>>16),R=N+(j^P^A)+O[6]+76029189&4294967295,N=j+(R<<23&4294967295|R>>>9),R=A+(N^j^P)+O[9]+3654602809&4294967295,A=N+(R<<4&4294967295|R>>>28),R=P+(A^N^j)+O[12]+3873151461&4294967295,P=A+(R<<11&4294967295|R>>>21),R=j+(P^A^N)+O[15]+530742520&4294967295,j=P+(R<<16&4294967295|R>>>16),R=N+(j^P^A)+O[2]+3299628645&4294967295,N=j+(R<<23&4294967295|R>>>9),R=A+(j^(N|~P))+O[0]+4096336452&4294967295,A=N+(R<<6&4294967295|R>>>26),R=P+(N^(A|~j))+O[7]+1126891415&4294967295,P=A+(R<<10&4294967295|R>>>22),R=j+(A^(P|~N))+O[14]+2878612391&4294967295,j=P+(R<<15&4294967295|R>>>17),R=N+(P^(j|~A))+O[5]+4237533241&4294967295,N=j+(R<<21&4294967295|R>>>11),R=A+(j^(N|~P))+O[12]+1700485571&4294967295,A=N+(R<<6&4294967295|R>>>26),R=P+(N^(A|~j))+O[3]+2399980690&4294967295,P=A+(R<<10&4294967295|R>>>22),R=j+(A^(P|~N))+O[10]+4293915773&4294967295,j=P+(R<<15&4294967295|R>>>17),R=N+(P^(j|~A))+O[1]+2240044497&4294967295,N=j+(R<<21&4294967295|R>>>11),R=A+(j^(N|~P))+O[8]+1873313359&4294967295,A=N+(R<<6&4294967295|R>>>26),R=P+(N^(A|~j))+O[15]+4264355552&4294967295,P=A+(R<<10&4294967295|R>>>22),R=j+(A^(P|~N))+O[6]+2734768916&4294967295,j=P+(R<<15&4294967295|R>>>17),R=N+(P^(j|~A))+O[13]+1309151649&4294967295,N=j+(R<<21&4294967295|R>>>11),R=A+(j^(N|~P))+O[4]+4149444226&4294967295,A=N+(R<<6&4294967295|R>>>26),R=P+(N^(A|~j))+O[11]+3174756917&4294967295,P=A+(R<<10&4294967295|R>>>22),R=j+(A^(P|~N))+O[2]+718787259&4294967295,j=P+(R<<15&4294967295|R>>>17),R=N+(P^(j|~A))+O[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(j+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+j&4294967295,k.g[3]=k.g[3]+P&4294967295}a.prototype.v=function(k,A){A===void 0&&(A=k.length);const N=A-this.blockSize,O=this.C;let j=this.h,P=0;for(;P<A;){if(j==0)for(;P<=N;)o(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<A;)if(O[j++]=k.charCodeAt(P++),j==this.blockSize){o(this,O),j=0;break}}else for(;P<A;)if(O[j++]=k[P++],j==this.blockSize){o(this,O),j=0;break}}this.h=j,this.o+=A},a.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)k[A++]=this.g[N]>>>O&255;return k};function c(k,A){var N=g;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=A(k)}function u(k,A){this.h=A;const N=[];let O=!0;for(let j=k.length-1;j>=0;j--){const P=k[j]|0;O&&P==A||(N[j]=P,O=!1)}this.g=N}var g={};function p(k){return-128<=k&&k<128?c(k,function(A){return new u([A|0],A<0?-1:0)}):new u([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return _;if(k<0)return L(y(-k));const A=[];let N=1;for(let O=0;k>=N;O++)A[O]=k/N|0,N*=4294967296;return new u(A,0)}function x(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return L(x(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(A,8));let O=_;for(let P=0;P<k.length;P+=8){var j=Math.min(8,k.length-P);const R=parseInt(k.substring(P,P+j),A);j<8?(j=y(Math.pow(A,j)),O=O.j(j).add(y(R))):(O=O.j(N),O=O.add(y(R)))}return O}var _=p(0),T=p(1),C=p(16777216);s=u.prototype,s.m=function(){if(z(this))return-L(this).m();let k=0,A=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);k+=(O>=0?O:4294967296+O)*A,A*=4294967296}return k},s.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if(z(this))return"-"+L(this).toString(k);const A=y(Math.pow(k,6));var N=this;let O="";for(;;){const j=de(N,A).g;N=B(N,j.j(A));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=j,U(N))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},s.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function z(k){return k.h==-1}s.l=function(k){return k=B(this,k),z(k)?-1:U(k)?0:1};function L(k){const A=k.g.length,N=[];for(let O=0;O<A;O++)N[O]=~k.g[O];return new u(N,~k.h).add(T)}s.abs=function(){return z(this)?L(this):this},s.add=function(k){const A=Math.max(this.g.length,k.g.length),N=[];let O=0;for(let j=0;j<=A;j++){let P=O+(this.i(j)&65535)+(k.i(j)&65535),R=(P>>>16)+(this.i(j)>>>16)+(k.i(j)>>>16);O=R>>>16,P&=65535,R&=65535,N[j]=R<<16|P}return new u(N,N[N.length-1]&-2147483648?-1:0)};function B(k,A){return k.add(L(A))}s.j=function(k){if(U(this)||U(k))return _;if(z(this))return z(k)?L(this).j(L(k)):L(L(this).j(k));if(z(k))return L(this.j(L(k)));if(this.l(C)<0&&k.l(C)<0)return y(this.m()*k.m());const A=this.g.length+k.g.length,N=[];for(var O=0;O<2*A;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let j=0;j<k.g.length;j++){const P=this.i(O)>>>16,R=this.i(O)&65535,Pe=k.i(j)>>>16,me=k.i(j)&65535;N[2*O+2*j]+=R*me,H(N,2*O+2*j),N[2*O+2*j+1]+=P*me,H(N,2*O+2*j+1),N[2*O+2*j+1]+=R*Pe,H(N,2*O+2*j+1),N[2*O+2*j+2]+=P*Pe,H(N,2*O+2*j+2)}for(k=0;k<A;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=A;k<2*A;k++)N[k]=0;return new u(N,0)};function H(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function K(k,A){this.g=k,this.h=A}function de(k,A){if(U(A))throw Error("division by zero");if(U(k))return new K(_,_);if(z(k))return A=de(L(k),A),new K(L(A.g),L(A.h));if(z(A))return A=de(k,L(A)),new K(L(A.g),A.h);if(k.g.length>30){if(z(k)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var N=T,O=A;O.l(k)<=0;)N=ye(N),O=ye(O);var j=be(N,1),P=be(O,1);for(O=be(O,2),N=be(N,2);!U(O);){var R=P.add(O);R.l(k)<=0&&(j=j.add(N),P=R),O=be(O,1),N=be(N,1)}return A=B(k,j.j(A)),new K(j,A)}for(j=_;k.l(A)>=0;){for(N=Math.max(1,Math.floor(k.m()/A.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=y(N),R=P.j(A);z(R)||R.l(k)>0;)N-=O,P=y(N),R=P.j(A);U(P)&&(P=T),j=j.add(P),k=B(k,R)}return new K(j,k)}s.B=function(k){return de(this,k).h},s.and=function(k){const A=Math.max(this.g.length,k.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)&k.i(O);return new u(N,this.h&k.h)},s.or=function(k){const A=Math.max(this.g.length,k.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)|k.i(O);return new u(N,this.h|k.h)},s.xor=function(k){const A=Math.max(this.g.length,k.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)^k.i(O);return new u(N,this.h^k.h)};function ye(k){const A=k.g.length+1,N=[];for(let O=0;O<A;O++)N[O]=k.i(O)<<1|k.i(O-1)>>>31;return new u(N,k.h)}function be(k,A){const N=A>>5;A%=32;const O=k.g.length-N,j=[];for(let P=0;P<O;P++)j[P]=A>0?k.i(P+N)>>>A|k.i(P+N+1)<<32-A:k.i(P+N);return new u(j,k.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,fE=a,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=x,za=u}).apply(typeof nb<"u"?nb:typeof self<"u"?self:typeof window<"u"?window:{});var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mE,wc,gE,Qd,yg,pE,yE,vE;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jd=="object"&&jd];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=n(this);function o(d,v){if(v)e:{var E=a;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in E))break e;E=E[F]}d=d[d.length-1],S=E[d],v=v(S),v!=S&&v!=null&&e(E,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var E=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&E.push([S,v[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function g(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function p(d,v,E){return d.call.apply(d.bind,arguments)}function y(d,v,E){return y=p,y.apply(null,arguments)}function x(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function _(d,v){function E(){}E.prototype=v.prototype,d.Z=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(S,F,X){for(var he=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)he[Ue-2]=arguments[Ue];return v.prototype[F].apply(S,he)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const v=d.length;if(v>0){const E=Array(v);for(let S=0;S<v;S++)E[S]=d[S];return E}return[]}function U(d,v){for(let S=1;S<arguments.length;S++){const F=arguments[S];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=d.length||0;const X=F.length||0;d.length=E+X;for(let he=0;he<X;he++)d[E+he]=F[he]}else d.push(F)}}class z{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(d){u.setTimeout(()=>{throw d},0)}function B(){var d=k;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class H{constructor(){this.h=this.g=null}add(v,E){const S=K.get();S.set(v,E),this.h?this.h.next=S:this.g=S,this.h=S}}var K=new z(()=>new de,d=>d.reset());class de{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,be=!1,k=new H,A=()=>{const d=Promise.resolve(void 0);ye=()=>{d.then(N)}};function N(){for(var d;d=B();){try{d.h.call(d.g)}catch(E){L(E)}var v=K;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}be=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return d})();function R(d){return/^[\s\xa0]*$/.test(d)}function Pe(d,v){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}_(Pe,j),Pe.prototype.init=function(d,v){const E=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(d,v,E,S,F){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!S,this.ha=F,this.key=++Y,this.da=this.fa=!1}function ne(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ie(d,v,E){for(const S in d)v.call(E,d[S],S,d)}function Ce(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function M(d){const v={};for(const E in d)v[E]=d[E];return v}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(d,v){let E,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(E in S)d[E]=S[E];for(let X=0;X<Z.length;X++)E=Z[X],Object.prototype.hasOwnProperty.call(S,E)&&(d[E]=S[E])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,v,E,S,F){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const he=je(d,v,S,F);return he>-1?(v=d[he],E||(v.fa=!1)):(v=new le(v,this.src,X,!!S,F),v.fa=E,d.push(v)),v};function Te(d,v){const E=v.type;if(E in d.g){var S=d.g[E],F=Array.prototype.indexOf.call(S,v,void 0),X;(X=F>=0)&&Array.prototype.splice.call(S,F,1),X&&(ne(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function je(d,v,E,S){for(let F=0;F<d.length;++F){const X=d[F];if(!X.da&&X.listener==v&&X.capture==!!E&&X.ha==S)return F}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Xe={};function De(d,v,E,S,F){if(Array.isArray(v)){for(let X=0;X<v.length;X++)De(d,v[X],E,S,F);return null}return E=We(E),d&&d[me]?d.J(v,E,g(S)?!!S.capture:!1,F):nn(d,v,E,!1,S,F)}function nn(d,v,E,S,F,X){if(!v)throw Error("Invalid event type");const he=g(F)?!!F.capture:!!F;let Ue=Cn(d);if(Ue||(d[Ee]=Ue=new ve(d)),E=Ue.add(v,E,S,he,X),E.proxy)return E;if(S=kt(),E.proxy=S,S.src=d,S.listener=E,d.addEventListener)P||(F=he),F===void 0&&(F=!1),d.addEventListener(v.toString(),S,F);else if(d.attachEvent)d.attachEvent(rn(v.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function kt(){function d(E){return v.call(d.src,d.listener,E)}const v=br;return d}function bn(d,v,E,S,F){if(Array.isArray(v))for(var X=0;X<v.length;X++)bn(d,v[X],E,S,F);else S=g(S)?!!S.capture:!!S,E=We(E),d&&d[me]?(d=d.i,X=String(v).toString(),X in d.g&&(v=d.g[X],E=je(v,E,S,F),E>-1&&(ne(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete d.g[X],d.h--)))):d&&(d=Cn(d))&&(v=d.g[v.toString()],d=-1,v&&(d=je(v,E,S,F)),(E=d>-1?v[d]:null)&&us(E))}function us(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[me])Te(v.i,d);else{var E=d.type,S=d.proxy;v.removeEventListener?v.removeEventListener(E,S,d.capture):v.detachEvent?v.detachEvent(rn(E),S):v.addListener&&v.removeListener&&v.removeListener(S),(E=Cn(v))?(Te(E,d),E.h==0&&(E.src=null,v[Ee]=null)):ne(d)}}}function rn(d){return d in Xe?Xe[d]:Xe[d]="on"+d}function br(d,v){if(d.da)d=!0;else{v=new Pe(v,this);const E=d.listener,S=d.ha||d.src;d.fa&&us(d),d=E.call(S,v)}return d}function Cn(d){return d=d[Ee],d instanceof ve?d:null}var oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function We(d){return typeof d=="function"?d:(d[oe]||(d[oe]=function(v){return d.handleEvent(v)}),d[oe])}function tt(){O.call(this),this.i=new ve(this),this.M=this,this.G=null}_(tt,O),tt.prototype[me]=!0,tt.prototype.removeEventListener=function(d,v,E,S){bn(this,d,v,E,S)};function pt(d,v){var E,S=d.G;if(S)for(E=[];S;S=S.G)E.push(S);if(d=d.M,S=v.type||v,typeof v=="string")v=new j(v,d);else if(v instanceof j)v.target=v.target||d;else{var F=v;v=new j(S,d),ce(v,F)}F=!0;let X,he;if(E)for(he=E.length-1;he>=0;he--)X=v.g=E[he],F=Un(X,S,!0,v)&&F;if(X=v.g=d,F=Un(X,S,!0,v)&&F,F=Un(X,S,!1,v)&&F,E)for(he=0;he<E.length;he++)X=v.g=E[he],F=Un(X,S,!1,v)&&F}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const E=d.g[v];for(let S=0;S<E.length;S++)ne(E[S]);delete d.g[v],d.h--}}this.G=null},tt.prototype.J=function(d,v,E,S){return this.i.add(String(d),v,!1,E,S)},tt.prototype.K=function(d,v,E,S){return this.i.add(String(d),v,!0,E,S)};function Un(d,v,E,S){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let F=!0;for(let X=0;X<v.length;++X){const he=v[X];if(he&&!he.da&&he.capture==E){const Ue=he.listener,Dt=he.ha||he.src;he.fa&&Te(d.i,he),F=Ue.call(Dt,S)!==!1&&F}}return F&&!S.defaultPrevented}function Qi(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function ds(d){d.g=Qi(()=>{d.g=null,d.i&&(d.i=!1,ds(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class dn extends O{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ds(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lr(d){O.call(this),this.h=d,this.g={}}_(Lr,O);var $s=[];function Ks(d){ie(d.g,function(v,E){this.g.hasOwnProperty(E)&&us(v)},d),d.g={}}Lr.prototype.N=function(){Lr.Z.N.call(this),Ks(this)},Lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=u.JSON.stringify,yl=u.JSON.parse,$i=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Ki(){}function Yi(){}var zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){j.call(this,"d")}_(Jt,j);function In(){j.call(this,"c")}_(In,j);var St={},ti=null;function hs(){return ti=ti||new tt}St.Ia="serverreachability";function ni(d){j.call(this,St.Ia,d)}_(ni,j);function Bn(d){const v=hs();pt(v,new ni(v))}St.STAT_EVENT="statevent";function W(d,v){j.call(this,St.STAT_EVENT,d),this.stat=v}_(W,j);function ue(d){const v=hs();pt(v,new W(v,d))}St.Ja="timingevent";function Ve(d,v){j.call(this,St.Ja,d),this.size=v}_(Ve,j);function Be(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function Ys(d,v,E,S,F,X){d.info(function(){if(d.g)if(X){var he="",Ue=X.split("&");for(let st=0;st<Ue.length;st++){var Dt=Ue[st].split("=");if(Dt.length>1){const _t=Dt[0];Dt=Dt[1];const lr=_t.split("_");he=lr.length>=2&&lr[1]=="type"?he+(_t+"="+Dt+"&"):he+(_t+"=redacted&")}}}else he=null;else he=X;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+v+`
`+E+`
`+he})}function ri(d,v,E,S,F,X,he){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+v+`
`+E+`
`+X+" "+he})}function qn(d,v,E,S){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Pr(d,E)+(S?" "+S:"")})}function Rn(d,v){d.info(function(){return"TIMEOUT: "+v})}jt.prototype.info=function(){};function Pr(d,v){if(!d.g)return v;if(!v)return null;try{const X=JSON.parse(v);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var E=X[d];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let he=1;he<S.length;he++)S[he]=""}}}}return _r(X)}catch{return v}}var Ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vl;function si(){}_(si,Ki),si.prototype.g=function(){return new XMLHttpRequest},vl=new si;function fs(d){return encodeURIComponent(String(d))}function lu(d){var v=1;d=d.split(":");const E=[];for(;v>0&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function Er(d,v,E,S){this.j=d,this.i=v,this.l=E,this.S=S||1,this.V=new Lr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wr}function wr(){this.i=null,this.g="",this.h=!1}var Pt={},sn={};function zr(d,v,E){d.M=1,d.A=ai(zt(v)),d.u=E,d.R=!0,Xi(d,null)}function Xi(d,v){d.F=Date.now(),Br(d),d.B=zt(d.A);var E=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),eo(E.i,"t",S),d.C=0,E=d.j.L,d.h=new wr,d.g=wu(d.j,E?v:null,!d.u),d.P>0&&(d.O=new dn(y(d.Y,d,d.g),d.P)),v=d.V,E=d.g,S=d.ba;var F="readystatechange";Array.isArray(F)||(F&&($s[0]=F.toString()),F=$s);for(let X=0;X<F.length;X++){const he=De(E,F[X],S||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Bn(),Ys(d.i,d.v,d.B,d.l,d.S,d.u)}Er.prototype.ba=function(d){d=d.target;const v=this.O;v&&Ar(d)==3?v.j():this.Y(d)},Er.prototype.Y=function(d){try{if(d==this.g)e:{const Ue=Ar(this.g),Dt=this.g.ya(),st=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||hn(this.g)))){this.K||Ue!=4||Dt==7||(Dt==8||st<=0?Bn(3):Bn(2)),qr(this);var v=this.g.ca();this.X=v;var E=Qh(this);if(this.o=v==200,ri(this.i,this.v,this.B,this.l,this.S,Ue,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var X=S;break t}}X=null}if(d=X)qn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hr(this,d);else{this.o=!1,this.m=3,ue(12),Hn(this),ar(this);break e}}if(this.R){d=!0;let _t;for(;!this.K&&this.C<E.length;)if(_t=uu(this,E),_t==sn){Ue==4&&(this.m=4,ue(14),d=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Pt){this.m=4,ue(15),qn(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else qn(this.i,this.l,_t,null),Hr(this,_t);if(cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||E.length!=0||this.h.h||(this.m=1,ue(16),d=!1),this.o=this.o&&d,!d)qn(this.i,this.l,E,"[Invalid Chunked Response]"),Hn(this),ar(this);else if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Dl(he),he.P=!0,ue(11))}}else qn(this.i,this.l,E,null),Hr(this,E);Ue==4&&Hn(this),this.o&&!this.K&&(Ue==4?xu(this.j,this):(this.o=!1,Br(this)))}else gs(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,ue(12)):(this.m=0,ue(13)),Hn(this),ar(this)}}}catch{}finally{}};function Qh(d){if(!cu(d))return d.g.la();const v=hn(d.g);if(v==="")return"";let E="";const S=v.length,F=Ar(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Hn(d),ar(d),"";d.h.i=new u.TextDecoder}for(let X=0;X<S;X++)d.h.h=!0,E+=d.h.i.decode(v[X],{stream:!(F&&X==S-1)});return v.length=0,d.h.g+=E,d.C=0,d.h.g}function cu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function uu(d,v){var E=d.C,S=v.indexOf(`
`,E);return S==-1?sn:(E=Number(v.substring(E,S)),isNaN(E)?Pt:(S+=1,S+E>v.length?sn:(v=v.slice(S,S+E),d.C=S+E,v)))}Er.prototype.cancel=function(){this.K=!0,Hn(this)};function Br(d){d.T=Date.now()+d.H,Ji(d,d.H)}function Ji(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Be(y(d.aa,d),v)}function qr(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Er.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Rn(this.i,this.B),this.M!=2&&(Bn(),ue(17)),Hn(this),this.m=2,ar(this)):Ji(this,this.T-d)};function ar(d){d.j.I==0||d.K||xu(d.j,d)}function Hn(d){qr(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,Ks(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function Hr(d,v){try{var E=d.j;if(E.I!=0&&(E.g==d||Gr(E.h,d))){if(!d.L&&Gr(E.h,d)&&E.I==3){try{var S=E.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)ao(E),sa(E);else break e;hi(E),ue(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Be(y(E.Va,E),6e3));Fr(E.h)<=1&&E.ta&&(E.ta=void 0)}else Jr(E,11)}else if((d.L||E.g==d)&&ao(E),!R(v))for(F=E.Ba.g.parse(v),v=0;v<F.length;v++){let st=F[v];const _t=st[0];if(!(_t<=E.K))if(E.K=_t,st=st[1],E.I==2)if(st[0]=="c"){E.M=st[1],E.ba=st[2];const lr=st[3];lr!=null&&(E.ka=lr,E.j.info("VER="+E.ka));const Wr=st[4];Wr!=null&&(E.za=Wr,E.j.info("SVER="+E.za));const Nr=st[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(S=1.5*Nr,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const Cr=d.g;if(Cr){const fi=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var X=S.h;X.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(_l(X,X.h),X.h=null))}if(S.G){const io=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(S.wa=io,ot(S.J,S.G,io))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var he=d;if(S.na=Eu(S,S.L?S.ba:null,S.W),he.L){El(S.h,he);var Ue=he,Dt=S.O;Dt&&(Ue.H=Dt),Ue.D&&(qr(Ue),Br(Ue)),S.g=he}else yu(S);E.i.length>0&&Xr(E)}else st[0]!="stop"&&st[0]!="close"||Jr(E,7);else E.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Jr(E,7):kl(E):st[0]!="noop"&&E.l&&E.l.qa(st),E.A=0)}}Bn(4)}catch{}}var Ut=class{constructor(d,v){this.g=d,this.map=v}};function xl(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Fr(d){return d.h?1:d.g?d.g.size:0}function Gr(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function _l(d,v){d.g?d.g.add(v):d.h=v}function El(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}xl.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function wl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.G);return v}return C(d.i)}var du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wi(d,v){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const S=d[E].indexOf("=");let F,X=null;S>=0?(F=d[E].substring(0,S),X=d[E].substring(S+1)):F=d[E],v(F,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Fn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof Fn?(this.l=d.l,an(this,d.j),this.o=d.o,this.g=d.g,Js(this,d.u),this.h=d.h,Tl(this,gu(d.i)),this.m=d.m):d&&(v=String(d).match(du))?(this.l=!1,an(this,v[1]||"",!0),this.o=Qr(v[2]||""),this.g=Qr(v[3]||"",!0),Js(this,v[4]),this.h=Qr(v[5]||"",!0),Tl(this,v[6]||"",!0),this.m=Qr(v[7]||"")):(this.l=!1,this.i=new Zs(null,this.l))}Fn.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(ii(v,Zi,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ii(v,Zi,!0),"@"),d.push(fs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ii(E,E.charAt(0)=="/"?Sl:hu,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ii(E,fu)),d.join("")},Fn.prototype.resolve=function(d){const v=zt(this);let E=!!d.j;E?an(v,d.j):E=!!d.o,E?v.o=d.o:E=!!d.g,E?v.g=d.g:E=d.u!=null;var S=d.h;if(E)Js(v,d.u);else if(E=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=v.h.lastIndexOf("/");F!=-1&&(S=v.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const X=[];for(let he=0;he<F.length;){const Ue=F[he++];Ue=="."?S&&he==F.length&&X.push(""):Ue==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),S&&he==F.length&&X.push("")):(X.push(Ue),S=!0)}S=X.join("/")}else S=F}return E?v.h=S:E=d.i.toString()!=="",E?Tl(v,gu(d.i)):E=!!d.m,E&&(v.m=d.m),v};function zt(d){return new Fn(d)}function an(d,v,E){d.j=E?Qr(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Js(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Tl(d,v,E){v instanceof Zs?(d.i=v,to(d.i,d.l)):(E||(v=ii(v,Ws)),d.i=new Zs(v,d.l))}function ot(d,v,E){d.i.set(v,E)}function ai(d){return ot(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Qr(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ii(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,kn),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function kn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zi=/[#\/\?@]/g,hu=/[#\?:]/g,Sl=/[#\?]/g,Ws=/[#\?@]/g,fu=/#/g;function Zs(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function jn(d){d.g||(d.g=new Map,d.h=0,d.i&&Wi(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=Zs.prototype,s.add=function(d,v){jn(this),this.i=null,d=ea(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function mu(d,v){jn(d),v=ea(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Al(d,v){return jn(d),v=ea(d,v),d.g.has(v)}s.forEach=function(d,v){jn(this),this.g.forEach(function(E,S){E.forEach(function(F){d.call(v,F,S,this)},this)},this)};function Nl(d,v){jn(d);let E=[];if(typeof v=="string")Al(d,v)&&(E=E.concat(d.g.get(ea(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)E=E.concat(d[v]);return E}s.set=function(d,v){return jn(this),this.i=null,d=ea(this,d),Al(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Nl(this,d),d.length>0?String(d[0]):v):v};function eo(d,v,E){mu(d,v),E.length>0&&(d.i=null,d.g.set(ea(d,v),C(E)),d.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var E=v[S];const F=fs(E);E=Nl(this,E);for(let X=0;X<E.length;X++){let he=F;E[X]!==""&&(he+="="+fs(E[X])),d.push(he)}}return this.i=d.join("&")};function gu(d){const v=new Zs;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function ea(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function to(d,v){v&&!d.j&&(jn(d),d.i=null,d.g.forEach(function(E,S){const F=S.toLowerCase();S!=F&&(mu(this,S),eo(this,F,E))},d)),d.j=v}function Tr(d,v){const E=new jt;if(u.Image){const S=new Image;S.onload=x(ir,E,"TestLoadImage: loaded",!0,v,S),S.onerror=x(ir,E,"TestLoadImage: error",!1,v,S),S.onabort=x(ir,E,"TestLoadImage: abort",!1,v,S),S.ontimeout=x(ir,E,"TestLoadImage: timeout",!1,v,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else v(!1)}function Cl(d,v){const E=new jt,S=new AbortController,F=setTimeout(()=>{S.abort(),ir(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:S.signal}).then(X=>{clearTimeout(F),X.ok?ir(E,"TestPingServer: ok",!0,v):ir(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),ir(E,"TestPingServer: error",!1,v)})}function ir(d,v,E,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(E)}catch{}}function ta(){this.g=new $i}function $r(d){this.i=d.Sb||null,this.h=d.ab||!1}_($r,Ki),$r.prototype.g=function(){return new oi(this.i,this.h)};function oi(d,v){tt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(oi,tt),s=oi.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Sr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?na(this):Sr(this),this.readyState==3&&no(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,na(this))},s.Na=function(d){this.g&&(this.response=d,na(this))},s.ga=function(){this.g&&na(this)};function na(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Sr(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function Sr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function or(d){let v="";return ie(d,function(E,S){v+=S,v+=":",v+=E,v+=`\r
`}),v}function li(d,v,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=or(E),typeof d=="string"?E!=null&&fs(E):ot(d,v,E))}function ut(d){tt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ut,tt);var Kr=/^https?$/i,Il=["POST","PUT"];s=ut.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vl.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(X){ci(this,X);return}if(d=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)E.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())E.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),F=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Il,v,void 0)>=0)||S||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of E)this.g.setRequestHeader(X,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){ci(this,X)}};function ci(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Rl(d),ms(d)}function Rl(d){d.A||(d.A=!0,pt(d,"complete"),pt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,pt(this,"complete"),pt(this,"abort"),ms(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ms(this,!0)),ut.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ui(this):this.Xa())},s.Xa=function(){ui(this)};function ui(d){if(d.h&&typeof c<"u"){if(d.v&&Ar(d)==4)setTimeout(d.Ca.bind(d),0);else if(pt(d,"readystatechange"),Ar(d)==4){d.h=!1;try{const X=d.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var S;if(S=X===0){let he=String(d.D).match(du)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),S=!Kr.test(he?he.toLowerCase():"")}E=S}if(E)pt(d,"complete"),pt(d,"success");else{d.o=6;try{var F=Ar(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Rl(d)}}finally{ms(d)}}}}function ms(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,v||pt(d,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ar(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),yl(v)}};function hn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function gs(d){const v={};d=(d.g&&Ar(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(R(d[S]))continue;var E=lu(d[S]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=v[F]||[];v[F]=X,X.push(E)}Ce(v,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function ra(d){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yr("baseRetryDelayMs",5e3,d),this.Za=Yr("retryDelaySeedMs",1e4,d),this.Ta=Yr("forwardChannelMaxRetries",2,d),this.va=Yr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(d&&d.concurrentRequestLimit),this.Ba=new ta,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ra.prototype,s.ka=8,s.I=1,s.connect=function(d,v,E,S){ue(0),this.W=d,this.H=v||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Eu(this,null,this.W),Xr(this)};function kl(d){if(ro(d),d.I==3){var v=d.V++,E=zt(d.J);if(ot(E,"SID",d.M),ot(E,"RID",v),ot(E,"TYPE","terminate"),di(d,E),v=new Er(d,d.j,v),v.M=2,v.A=ai(zt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.A,E=!0),E||(v.g=wu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Br(v)}_u(d)}function sa(d){d.g&&(Dl(d),d.g.cancel(),d.g=null)}function ro(d){sa(d),d.v&&(u.clearTimeout(d.v),d.v=null),ao(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function Xr(d){if(!bl(d.h)&&!d.m){d.m=!0;var v=d.Ea;ye||A(),be||(ye(),be=!0),k.add(v,d),d.D=0}}function so(d,v){return Fr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Be(y(d.Ea,d,v),bu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new Er(this,this.j,d);let X=this.o;if(this.U&&(X?(X=M(X),ce(X,this.U)):X=this.U),this.u!==null||this.R||(F.J=X,X=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=pu(this,F,v),E=zt(this.J),ot(E,"RID",d),ot(E,"CVER",22),this.G&&ot(E,"X-HTTP-Session-Id",this.G),di(this,E),X&&(this.R?v="headers="+fs(or(X))+"&"+v:this.u&&li(E,this.u,X)),_l(this.h,F),this.Ra&&ot(E,"TYPE","init"),this.S?(ot(E,"$req",v),ot(E,"SID","null"),F.U=!0,zr(F,E,null)):zr(F,E,v),this.I=2}}else this.I==3&&(d?jl(this,d):this.i.length==0||bl(this.h)||jl(this))};function jl(d,v){var E;v?E=v.l:E=d.V++;const S=zt(d.J);ot(S,"SID",d.M),ot(S,"RID",E),ot(S,"AID",d.K),di(d,S),d.u&&d.o&&li(S,d.u,d.o),E=new Er(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),v&&(d.i=v.G.concat(d.i)),v=pu(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),_l(d.h,E),zr(E,S,v)}function di(d,v){d.H&&ie(d.H,function(E,S){ot(v,S,E)}),d.l&&ie({},function(E,S){ot(v,S,E)})}function pu(d,v,E){E=Math.min(d.i.length,E);const S=d.l?y(d.l.Ka,d.l,d):null;e:{var F=d.i;let Ue=-1;for(;;){const Dt=["count="+E];Ue==-1?E>0?(Ue=F[0].g,Dt.push("ofs="+Ue)):Ue=0:Dt.push("ofs="+Ue);let st=!0;for(let _t=0;_t<E;_t++){var X=F[_t].g;const lr=F[_t].map;if(X-=Ue,X<0)Ue=Math.max(0,F[_t].g-100),st=!1;else try{X="req"+X+"_"||"";try{var he=lr instanceof Map?lr:Object.entries(lr);for(const[Wr,Nr]of he){let Cr=Nr;g(Nr)&&(Cr=_r(Nr)),Dt.push(X+Wr+"="+encodeURIComponent(Cr))}}catch(Wr){throw Dt.push(X+"type="+encodeURIComponent("_badmap")),Wr}}catch{S&&S(lr)}}if(st){he=Dt.join("&");break e}}he=void 0}return d=d.i.splice(0,E),v.G=d,he}function yu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;ye||A(),be||(ye(),be=!0),k.add(v,d),d.A=0}}function hi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Be(y(d.Da,d),bu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Be(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ue(10),sa(this),vu(this))};function Dl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function vu(d){d.g=new Er(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=zt(d.na);ot(v,"RID","rpc"),ot(v,"SID",d.M),ot(v,"AID",d.K),ot(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&ot(v,"TO",d.ia),ot(v,"TYPE","xmlhttp"),di(d,v),d.u&&d.o&&li(v,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=ai(zt(v)),E.u=null,E.R=!0,Xi(E,d)}s.Va=function(){this.C!=null&&(this.C=null,sa(this),hi(this),ue(19))};function ao(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function xu(d,v){var E=null;if(d.g==v){ao(d),Dl(d),d.g=null;var S=2}else if(Gr(d.h,v))E=v.G,El(d.h,v),S=1;else return;if(d.I!=0){if(v.o)if(S==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var F=d.D;S=hs(),pt(S,new Ve(S,E)),Xr(d)}else yu(d);else if(F=v.m,F==3||F==0&&v.X>0||!(S==1&&so(d,v)||S==2&&hi(d)))switch(E&&E.length>0&&(v=d.h,v.i=v.i.concat(E)),F){case 1:Jr(d,5);break;case 4:Jr(d,10);break;case 3:Jr(d,6);break;default:Jr(d,2)}}}function bu(d,v){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*v}function Jr(d,v){if(d.j.info("Error code "+v),v==2){var E=y(d.bb,d),S=d.Ua;const F=!S;S=new Fn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||an(S,"https"),ai(S),F?Tr(S.toString(),E):Cl(S.toString(),E)}else ue(2);d.I=0,d.l&&d.l.pa(v),_u(d),ro(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function _u(d){if(d.I=0,d.ja=[],d.l){const v=wl(d.h);(v.length!=0||d.i.length!=0)&&(U(d.ja,v),U(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function Eu(d,v,E){var S=E instanceof Fn?zt(E):new Fn(E);if(S.g!="")v&&(S.g=v+"."+S.g),Js(S,S.u);else{var F=u.location;S=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;const X=new Fn(null);S&&an(X,S),v&&(X.g=v),F&&Js(X,F),E&&(X.h=E),S=X}return E=d.G,v=d.wa,E&&v&&ot(S,E,v),ot(S,"VER",d.ka),di(d,S),S}function wu(d,v,E){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new ut(new $r({ab:E})):new ut(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}s=Tu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function aa(){}aa.prototype.g=function(d,v){return new Sn(d,v)};function Sn(d,v){tt.call(this),this.g=new ra(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!R(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ps(this)}_(Sn,tt),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){kl(this.g)},Sn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=_r(d),d=E);v.i.push(new Ut(v.Ya++,d)),v.I==3&&Xr(v)},Sn.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,Sn.Z.N.call(this)};function Su(d){Jt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const E in v){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(Su,Jt);function Au(){In.call(this),this.status=1}_(Au,In);function ps(d){this.g=d}_(ps,Tu),ps.prototype.ra=function(){pt(this.g,"a")},ps.prototype.qa=function(d){pt(this.g,new Su(d))},ps.prototype.pa=function(d){pt(this.g,new Au)},ps.prototype.oa=function(){pt(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,vE=function(){return new aa},yE=function(){return hs()},pE=St,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,Qd=Ur,Xs.COMPLETE="complete",gE=Xs,Yi.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",tt.prototype.listen=tt.prototype.J,wc=Yi,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,mE=ut}).apply(typeof jd<"u"?jd:typeof self<"u"?self:typeof window<"u"?window:{});const rb="@firebase/firestore",sb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new qg("@firebase/firestore");function Uo(){return Vi.logLevel}function xe(s,...e){if(Vi.logLevel<=$e.DEBUG){const n=e.map(tp);Vi.debug(`Firestore (${dl}): ${s}`,...n)}}function zs(s,...e){if(Vi.logLevel<=$e.ERROR){const n=e.map(tp);Vi.error(`Firestore (${dl}): ${s}`,...n)}}function Wo(s,...e){if(Vi.logLevel<=$e.WARN){const n=e.map(tp);Vi.warn(`Firestore (${dl}): ${s}`,...n)}}function tp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,xE(s,a,n)}function xE(s,e,n){let a=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw zs(a),new Error(a)}function et(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||xE(e,o,a)}function Oe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wn.UNAUTHENTICATED)))}shutdown(){}}class lI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class cI{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,n(p)):Promise.resolve();let c=new as;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new as,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new as)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(et(typeof a.accessToken=="string",31837,{l:a}),new bE(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class uI{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dI{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new uI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const a=c=>{c.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const o=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ab(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ab(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=fI(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<n&&(a+=e.charAt(o[c]%62))}return a}}function Ke(s,e){return s<e?-1:s>e?1:0}function vg(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),c=e.charAt(a);if(o!==c)return ng(o)===ng(c)?Ke(o,c):ng(o)?1:-1}return Ke(s.length,e.length)}const mI=55296,gI=57343;function ng(s){const e=s.charCodeAt(0);return e>=mI&&e<=gI}function Zo(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="__name__";class rs{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Ne(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const c=rs.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ke(e.length,n.length)}static compareSegments(e,n){const a=rs.isNumericId(e),o=rs.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?rs.extractNumericId(e).compare(rs.extractNumericId(n)):vg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return za.fromString(e.substring(4,e.length-2))}}class mt extends rs{construct(e,n,a){return new mt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new mt(n)}static emptyPath(){return new mt([])}}const pI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends rs{construct(e,n,a){return new vn(e,n,a)}static isValidIdentifier(e){return pI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xg}static keyField(){return new vn([xg])}static fromServerFormat(e){const n=[];let a="",o=0;const c=()=>{if(a.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let u=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else g==="`"?(u=!u,o++):g!=="."||u?(a+=g,o++):(c(),o++)}if(c(),u)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(mt.fromString(e))}static fromName(e){return new Se(mt.fromString(e).popFirst(5))}static empty(){return new Se(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(s,e,n){if(!n)throw new fe(te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function yI(s,e,n,a){if(e===!0&&a===!0)throw new fe(te.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function ib(s){if(!Se.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ob(s){if(Se.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function EE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ih(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ne(12329,{type:typeof s})}function sr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ih(s);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function vI(s,e){if(e<=0)throw new fe(te.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Wc(s,e){if(!EE(s))throw new fe(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const u=s[a];if(o&&typeof u!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new fe(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=-62135596800,cb=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*cb);return new bt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lb)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cb}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Xt("string",bt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new bt(0,0))}static max(){return new Re(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function xI(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(a===1e9?new bt(n+1,0):new bt(n,a));return new Ha(o,Se.empty(),e)}function bI(s){return new Ha(s.readTime,s.key,Lc)}class Ha{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ha(Re.min(),Se.empty(),Lc)}static max(){return new Ha(Re.max(),Se.empty(),Lc)}}function _I(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(s.documentKey,e.documentKey),n!==0?n:Ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(s){if(s.code!==te.FAILED_PRECONDITION||s.message!==EI)throw s;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,a)=>{n(e)}))}static reject(e){return new ae(((n,a)=>{a(e)}))}static waitFor(e){return new ae(((n,a)=>{let o=0,c=0,u=!1;e.forEach((g=>{++o,g.next((()=>{++c,u&&c===o&&n()}),(p=>a(p)))})),u=!0,c===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const a of e)n=n.next((o=>o?ae.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,c)=>{a.push(n.call(this,o,c))})),this.waitFor(a)}static mapArray(e,n){return new ae(((a,o)=>{const c=e.length,u=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next((x=>{u[y]=x,++g,g===c&&a(u)}),(x=>o(x)))}}))}static doWhile(e,n){return new ae(((a,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):a()};c()}))}}function TI(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=-1;function Zc(s){return s==null}function lh(s){return s===0&&1/s==-1/0}function SI(s){return typeof s=="number"&&Number.isInteger(s)&&!lh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="";function AI(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=ub(e)),e=NI(s.get(n),e);return ub(e)}function NI(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case wE:n+="";break;default:n+=c}}return n}function ub(s){return s+wE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ja(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function TE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?a(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,a,o,c){this.key=e,this.value=n,this.color=a??yn.RED,this.left=o??yn.EMPTY,this.right=c??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,c){return new yn(e??this.key,n??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,a),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return yn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,a,o,c){return this}insert(e,n,a){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hb(this.data.getIterator())}getIteratorFrom(e){return new hb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class hb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new tr([])}unionWith(e){let n=new tn(vn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new SE("Invalid base64 string: "+c):c}})(e);return new xn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const CI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(s){if(et(!!s,39018),typeof s=="string"){let e=0;const n=CI.exec(s);if(et(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Lt(s.seconds),nanos:Lt(s.nanos)}}function Lt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ga(s){return typeof s=="string"?xn.fromBase64String(s):xn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="server_timestamp",NE="__type__",CE="__previous_value__",IE="__local_write_time__";function sp(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[NE])==null?void 0:a.stringValue)===AE}function kh(s){const e=s.mapValue.fields[CE];return sp(e)?kh(e):e}function Pc(s){const e=Fa(s.mapValue.fields[IE].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,a,o,c,u,g,p,y,x){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=x}}const ch="(default)";class Uc{constructor(e,n){this.projectId=e,this.database=n||ch}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="__type__",RI="__max__",Od={mapValue:{}},kE="__vector__",uh="value";function Qa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?sp(s)?4:jI(s)?9007199254740991:kI(s)?10:11:Ne(28295,{value:s})}function cs(s,e){if(s===e)return!0;const n=Qa(s);if(n!==Qa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Pc(s).isEqual(Pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Fa(o.timestampValue),g=Fa(c.timestampValue);return u.seconds===g.seconds&&u.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Ga(o.bytesValue).isEqual(Ga(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Lt(o.geoPointValue.latitude)===Lt(c.geoPointValue.latitude)&&Lt(o.geoPointValue.longitude)===Lt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Lt(o.integerValue)===Lt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Lt(o.doubleValue),g=Lt(c.doubleValue);return u===g?lh(u)===lh(g):isNaN(u)&&isNaN(g)}return!1})(s,e);case 9:return Zo(s.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},g=c.mapValue.fields||{};if(db(u)!==db(g))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(g[p]===void 0||!cs(u[p],g[p])))return!1;return!0})(s,e);default:return Ne(52216,{left:s})}}function zc(s,e){return(s.values||[]).find((n=>cs(n,e)))!==void 0}function el(s,e){if(s===e)return 0;const n=Qa(s),a=Qa(e);if(n!==a)return Ke(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const g=Lt(c.integerValue||c.doubleValue),p=Lt(u.integerValue||u.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return fb(s.timestampValue,e.timestampValue);case 4:return fb(Pc(s),Pc(e));case 5:return vg(s.stringValue,e.stringValue);case 6:return(function(c,u){const g=Ga(c),p=Ga(u);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const g=c.split("/"),p=u.split("/");for(let y=0;y<g.length&&y<p.length;y++){const x=Ke(g[y],p[y]);if(x!==0)return x}return Ke(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const g=Ke(Lt(c.latitude),Lt(u.latitude));return g!==0?g:Ke(Lt(c.longitude),Lt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return mb(s.arrayValue,e.arrayValue);case 10:return(function(c,u){var T,C,U,z;const g=c.fields||{},p=u.fields||{},y=(T=g[uh])==null?void 0:T.arrayValue,x=(C=p[uh])==null?void 0:C.arrayValue,_=Ke(((U=y==null?void 0:y.values)==null?void 0:U.length)||0,((z=x==null?void 0:x.values)==null?void 0:z.length)||0);return _!==0?_:mb(y,x)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Od.mapValue&&u===Od.mapValue)return 0;if(c===Od.mapValue)return 1;if(u===Od.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=u.fields||{},x=Object.keys(y);p.sort(),x.sort();for(let _=0;_<p.length&&_<x.length;++_){const T=vg(p[_],x[_]);if(T!==0)return T;const C=el(g[p[_]],y[x[_]]);if(C!==0)return C}return Ke(p.length,x.length)})(s.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function fb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ke(s,e);const n=Fa(s),a=Fa(e),o=Ke(n.seconds,a.seconds);return o!==0?o:Ke(n.nanos,a.nanos)}function mb(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const c=el(n[o],a[o]);if(c)return c}return Ke(n.length,a.length)}function tl(s){return bg(s)}function bg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Fa(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ga(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Se.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const c of n.values||[])o?o=!1:a+=",",a+=bg(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const u of a)c?c=!1:o+=",",o+=`${u}:${bg(n.fields[u])}`;return o+"}"})(s.mapValue):Ne(61005,{value:s})}function $d(s){switch(Qa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(s);return e?16+$d(e):16;case 5:return 2*s.stringValue.length;case 6:return Ga(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,c)=>o+$d(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Ja(a.fields,((c,u)=>{o+=c.length+$d(u)})),o})(s.mapValue);default:throw Ne(13486,{value:s})}}function gb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function _g(s){return!!s&&"integerValue"in s}function ap(s){return!!s&&"arrayValue"in s}function pb(s){return!!s&&"nullValue"in s}function yb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kd(s){return!!s&&"mapValue"in s}function kI(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[RE])==null?void 0:a.stringValue)===kE}function Cc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ja(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Cc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cc(s.arrayValue.values[n]);return e}return{...s}}function jI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===RI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(n)}setAll(e){let n=vn.emptyPath(),a={},o=[];e.forEach(((u,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,a,o),a={},o=[],n=g.popLast()}u?a[g.lastSegment()]=Cc(u):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,a,o)}delete(e){const n=this.field(e.popLast());Kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Kd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){Ja(n,((o,c)=>e[o]=c));for(const o of a)delete e[o]}clone(){return new Nn(Cc(this.value))}}function jE(s){const e=[];return Ja(s.fields,((n,a)=>{const o=new vn([n]);if(Kd(a)){const c=jE(a.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,a,o,c,u,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=c,this.data=u,this.documentState=g}static newInvalidDocument(e){return new un(e,0,Re.min(),Re.min(),Re.min(),Nn.empty(),0)}static newFoundDocument(e,n,a,o){return new un(e,1,n,Re.min(),a,o,0)}static newNoDocument(e,n){return new un(e,2,n,Re.min(),Re.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Re.min(),Re.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.position=e,this.inclusive=n}}function vb(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const c=e[o],u=s.position[o];if(c.field.isKeyField()?a=Se.comparator(Se.fromName(u.referenceValue),n.key):a=el(u,n.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function xb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!cs(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n="asc"){this.field=e,this.dir=n}}function DI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{}class Kt extends DE{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new MI(e,n,a):n==="array-contains"?new PI(e,a):n==="in"?new UI(e,a):n==="not-in"?new zI(e,a):n==="array-contains-any"?new BI(e,a):new Kt(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new VI(e,a):new LI(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&Qa(this.value)===Qa(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Or(e,n)}matches(e){return OE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OE(s){return s.op==="and"}function ME(s){return OI(s)&&OE(s)}function OI(s){for(const e of s.filters)if(e instanceof Or)return!1;return!0}function Eg(s){if(s instanceof Kt)return s.field.canonicalString()+s.op.toString()+tl(s.value);if(ME(s))return s.filters.map((e=>Eg(e))).join(",");{const e=s.filters.map((n=>Eg(n))).join(",");return`${s.op}(${e})`}}function VE(s,e){return s instanceof Kt?(function(a,o){return o instanceof Kt&&a.op===o.op&&a.field.isEqual(o.field)&&cs(a.value,o.value)})(s,e):s instanceof Or?(function(a,o){return o instanceof Or&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((c,u,g)=>c&&VE(u,o.filters[g])),!0):!1})(s,e):void Ne(19439)}function LE(s){return s instanceof Kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`})(s):s instanceof Or?(function(n){return n.op.toString()+" {"+n.getFilters().map(LE).join(" ,")+"}"})(s):"Filter"}class MI extends Kt{constructor(e,n,a){super(e,n,a),this.key=Se.fromName(a.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class VI extends Kt{constructor(e,n){super(e,"in",n),this.keys=PE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class LI extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=PE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function PE(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((a=>Se.fromName(a.referenceValue)))}class PI extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ap(n)&&zc(n.arrayValue,this.value)}}class UI extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zc(this.value.arrayValue,n)}}class zI extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zc(this.value.arrayValue,n)}}class BI extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>zc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n=null,a=[],o=[],c=null,u=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=u,this.endAt=g,this.Te=null}}function bb(s,e=null,n=[],a=[],o=null,c=null,u=null){return new qI(s,e,n,a,o,c,u)}function ip(s){const e=Oe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Eg(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>tl(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>tl(a))).join(",")),e.Te=n}return e.Te}function op(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!DI(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!VE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!xb(s.startAt,e.startAt)&&xb(s.endAt,e.endAt)}function wg(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n=null,a=[],o=[],c=null,u="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=u,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HI(s,e,n,a,o,c,u,g){return new ml(s,e,n,a,o,c,u,g)}function lp(s){return new ml(s)}function _b(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function UE(s){return s.collectionGroup!==null}function Ic(s){const e=Oe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let g=new tn(vn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Bc(c,a))})),n.has(vn.keyField().canonicalString())||e.Ie.push(new Bc(vn.keyField(),a))}return e.Ie}function is(s){const e=Oe(s);return e.Ee||(e.Ee=FI(e,Ic(s))),e.Ee}function FI(s,e){if(s.limitType==="F")return bb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Bc(o.field,c)}));const n=s.endAt?new dh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new dh(s.startAt.position,s.startAt.inclusive):null;return bb(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Tg(s,e){const n=s.filters.concat([e]);return new ml(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function hh(s,e,n){return new ml(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function jh(s,e){return op(is(s),is(e))&&s.limitType===e.limitType}function zE(s){return`${ip(is(s))}|lt:${s.limitType}`}function zo(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>LE(o))).join(", ")}]`),Zc(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>tl(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>tl(o))).join(",")),`Target(${a})`})(is(s))}; limitType=${s.limitType})`}function Dh(s,e){return e.isFoundDocument()&&(function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Se.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,o){for(const c of Ic(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(u,g,p){const y=vb(u,g,p);return u.inclusive?y<=0:y<0})(a.startAt,Ic(a),o)||a.endAt&&!(function(u,g,p){const y=vb(u,g,p);return u.inclusive?y>=0:y>0})(a.endAt,Ic(a),o))})(s,e)}function GI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function BE(s){return(e,n)=>{let a=!1;for(const o of Ic(s)){const c=QI(o,e,n);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function QI(s,e,n){const a=s.field.isKeyField()?Se.comparator(e.key,n.key):(function(c,u,g){const p=u.data.field(c),y=g.data.field(c);return p!==null&&y!==null?el(p,y):Ne(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ne(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ja(this.inner,((n,a)=>{for(const[o,c]of a)e(o,c)}))}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new At(Se.comparator);function Bs(){return $I}const qE=new At(Se.comparator);function Tc(...s){let e=qE;for(const n of s)e=e.insert(n.key,n);return e}function HE(s){let e=qE;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function ki(){return Rc()}function FE(){return Rc()}function Rc(){return new qi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const KI=new At(Se.comparator),YI=new tn(Se.comparator);function Ye(...s){let e=YI;for(const n of s)e=e.add(n);return e}const XI=new tn(Ke);function JI(){return XI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function GE(s){return{integerValue:""+s}}function WI(s,e){return SI(e)?GE(e):cp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function ZI(s,e,n){return s instanceof fh?(function(o,c){const u={fields:{[NE]:{stringValue:AE},[IE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&sp(c)&&(c=kh(c)),c&&(u.fields[CE]=c),{mapValue:u}})(n,e):s instanceof qc?$E(s,e):s instanceof Hc?KE(s,e):(function(o,c){const u=QE(o,c),g=Eb(u)+Eb(o.Ae);return _g(u)&&_g(o.Ae)?GE(g):cp(o.serializer,g)})(s,e)}function eR(s,e,n){return s instanceof qc?$E(s,e):s instanceof Hc?KE(s,e):n}function QE(s,e){return s instanceof mh?(function(a){return _g(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class fh extends Oh{}class qc extends Oh{constructor(e){super(),this.elements=e}}function $E(s,e){const n=YE(e);for(const a of s.elements)n.some((o=>cs(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Hc extends Oh{constructor(e){super(),this.elements=e}}function KE(s,e){let n=YE(e);for(const a of s.elements)n=n.filter((o=>!cs(o,a)));return{arrayValue:{values:n}}}class mh extends Oh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Eb(s){return Lt(s.integerValue||s.doubleValue)}function YE(s){return ap(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function tR(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof qc&&o instanceof qc||a instanceof Hc&&o instanceof Hc?Zo(a.elements,o.elements,cs):a instanceof mh&&o instanceof mh?cs(a.Ae,o.Ae):a instanceof fh&&o instanceof fh})(s.transform,e.transform)}class nR{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Mh{}function XE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new tu(s.key,Yt.none()):new eu(s.key,s.data,Yt.none());{const n=s.data,a=Nn.empty();let o=new tn(vn.comparator);for(let c of e.fields)if(!o.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?a.delete(c):a.set(c,u),o=o.add(c)}return new Wa(s.key,a,new tr(o.toArray()),Yt.none())}}function rR(s,e,n){s instanceof eu?(function(o,c,u){const g=o.value.clone(),p=Tb(o.fieldTransforms,c,u.transformResults);g.setAll(p),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(s,e,n):s instanceof Wa?(function(o,c,u){if(!Yd(o.precondition,c))return void c.convertToUnknownDocument(u.version);const g=Tb(o.fieldTransforms,c,u.transformResults),p=c.data;p.setAll(JE(o)),p.setAll(g),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,n):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function kc(s,e,n,a){return s instanceof eu?(function(c,u,g,p){if(!Yd(c.precondition,u))return g;const y=c.value.clone(),x=Sb(c.fieldTransforms,p,u);return y.setAll(x),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof Wa?(function(c,u,g,p){if(!Yd(c.precondition,u))return g;const y=Sb(c.fieldTransforms,p,u),x=u.data;return x.setAll(JE(c)),x.setAll(y),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((_=>_.field)))})(s,e,n,a):(function(c,u,g){return Yd(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):g})(s,e,n)}function sR(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),c=QE(a.transform,o||null);c!=null&&(n===null&&(n=Nn.empty()),n.set(a.field,c))}return n||null}function wb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Zo(a,o,((c,u)=>tR(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class eu extends Mh{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wa extends Mh{constructor(e,n,a,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function JE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function Tb(s,e,n){const a=new Map;et(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],u=c.transform,g=e.data.field(c.field);a.set(c.field,eR(u,g,n[o]))}return a}function Sb(s,e,n){const a=new Map;for(const o of s){const c=o.transform,u=n.data.field(o.field);a.set(o.field,ZI(c,u,e))}return a}class tu extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WE extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&rR(c,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=kc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=kc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=FE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let g=this.applyToLocalView(u,c.mutatedFields);g=n.has(o.key)?null:g;const p=XE(u,g);p!==null&&a.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((n,a)=>wb(n,a)))&&Zo(this.baseMutations,e.baseMutations,((n,a)=>wb(n,a)))}}class up{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){et(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return KI})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,a[u].version);return new up(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Ze;function ZE(s){switch(s){case te.OK:return Ne(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ne(15467,{code:s})}}function ew(s){if(s===void 0)return zs("GRPC error has no .code"),te.UNKNOWN;switch(s){case $t.OK:return te.OK;case $t.CANCELLED:return te.CANCELLED;case $t.UNKNOWN:return te.UNKNOWN;case $t.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case $t.INTERNAL:return te.INTERNAL;case $t.UNAVAILABLE:return te.UNAVAILABLE;case $t.UNAUTHENTICATED:return te.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case $t.NOT_FOUND:return te.NOT_FOUND;case $t.ALREADY_EXISTS:return te.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return te.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case $t.ABORTED:return te.ABORTED;case $t.OUT_OF_RANGE:return te.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return te.UNIMPLEMENTED;case $t.DATA_LOSS:return te.DATA_LOSS;default:return Ne(39323,{code:s})}}(Ze=$t||($t={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new za([4294967295,4294967295],0);function Ab(s){const e=lR().encode(s),n=new fE;return n.update(e),new Uint8Array(n.digest())}function Nb(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new za([n,a],0),new za([o,c],0)]}class dp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Sc(`Invalid padding: ${n}`);if(a<0)throw new Sc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Sc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Sc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=za.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(za.fromNumber(a)));return o.compare(cR)===1&&(o=new za([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ab(e),[a,o]=Nb(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(a,o,c);if(!this.we(u))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new dp(c,o,n);return a.forEach((g=>u.insert(g))),u}insert(e){if(this.ge===0)return;const n=Ab(e),[a,o]=Nb(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(a,o,c);this.Se(u)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,a,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Vh(Re.min(),o,new At(Ke),Bs(),Ye())}}class nu{constructor(e,n,a,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new nu(a,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class tw{constructor(e,n){this.targetId=e,this.Ce=n}}class nw{constructor(e,n,a=xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class Cb{constructor(){this.ve=0,this.Fe=Ib(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),a=Ye();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Ne(38017,{changeType:c})}})),new nu(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=Ib()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bs(),this.Je=Md(),this.He=Md(),this.Ye=new At(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(wg(c))if(a===0){const u=new Se(c.path);this.et(n,u,un.newNoDocument(u,Re.min()))}else et(a===1,20013,{expectedCount:a});else{const u=this._t(n);if(u!==a){const g=this.ut(e),p=g?this.ct(g,e,u):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=n;let u,g;try{u=Ga(a).toUint8Array()}catch(p){if(p instanceof SE)return Wo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new dp(u,o,c)}catch(p){return Wo(p instanceof Sc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((c=>{const u=this.Ge.ht(),g=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const g=this.ot(u);if(g){if(c.current&&wg(g.target)){const p=new Se(g.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,un.newNoDocument(p,e))}c.Be&&(n.set(u,c.ke()),c.qe())}}));let a=Ye();this.He.forEach(((c,u)=>{let g=!0;u.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Vh(e,n,this.Ye,this.je,a);return this.je=Bs(),this.Je=Md(),this.He=Md(),this.Ye=new At(Ke),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tn(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tn(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Md(){return new At(Se.comparator)}function Ib(){return new At(Se.comparator)}const dR={asc:"ASCENDING",desc:"DESCENDING"},hR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class mR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sg(s,e){return s.useProto3Json||Zc(e)?e:{value:e}}function gh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function gR(s,e){return gh(s,e.toTimestamp())}function nr(s){return et(!!s,49232),Re.fromTimestamp((function(n){const a=Fa(n);return new bt(a.seconds,a.nanos)})(s))}function hp(s,e){return Ag(s,e).canonicalString()}function Ag(s,e){const n=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function sw(s){const e=mt.fromString(s);return et(uw(e),10190,{key:e.toString()}),e}function ph(s,e){return hp(s.databaseId,e.path)}function jc(s,e){const n=sw(e);if(n.get(1)!==s.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Se(iw(n))}function aw(s,e){return hp(s.databaseId,e)}function pR(s){const e=sw(s);return e.length===4?mt.emptyPath():iw(e)}function Ng(s){return new mt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function iw(s){return et(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Rb(s,e,n){return{name:ph(s,e),fields:n.value.mapValue.fields}}function yR(s,e){return"found"in e?(function(a,o){et(!!o.found,43571),o.found.name,o.found.updateTime;const c=jc(a,o.found.name),u=nr(o.found.updateTime),g=o.found.createTime?nr(o.found.createTime):Re.min(),p=new Nn({mapValue:{fields:o.found.fields}});return un.newFoundDocument(c,u,g,p)})(s,e):"missing"in e?(function(a,o){et(!!o.missing,3894),et(!!o.readTime,22933);const c=jc(a,o.missing),u=nr(o.readTime);return un.newNoDocument(c,u)})(s,e):Ne(7234,{result:e})}function vR(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ne(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(et(x===void 0||typeof x=="string",58123),xn.fromBase64String(x||"")):(et(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),xn.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&(function(y){const x=y.code===void 0?te.UNKNOWN:ew(y.code);return new fe(x,y.message||"")})(u);n=new nw(a,o,c,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=jc(s,a.document.name),c=nr(a.document.updateTime),u=a.document.createTime?nr(a.document.createTime):Re.min(),g=new Nn({mapValue:{fields:a.document.fields}}),p=un.newFoundDocument(o,c,u,g),y=a.targetIds||[],x=a.removedTargetIds||[];n=new Xd(y,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=jc(s,a.document),c=a.readTime?nr(a.readTime):Re.min(),u=un.newNoDocument(o,c),g=a.removedTargetIds||[];n=new Xd([],g,u.key,u)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=jc(s,a.document),c=a.removedTargetIds||[];n=new Xd([],c,o,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,u=new oR(o,c),g=a.targetId;n=new tw(g,u)}}return n}function ow(s,e){let n;if(e instanceof eu)n={update:Rb(s,e.key,e.value)};else if(e instanceof tu)n={delete:ph(s,e.key)};else if(e instanceof Wa)n={update:Rb(s,e.key,e.data),updateMask:NR(e.fieldMask)};else{if(!(e instanceof WE))return Ne(16599,{Vt:e.type});n={verify:ph(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(c,u){const g=u.transform;if(g instanceof fh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof qc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Hc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof mh)return{fieldPath:u.field.canonicalString(),increment:g.Ae};throw Ne(20930,{transform:u.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:gR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ne(27497)})(s,e.precondition)),n}function xR(s,e){return s&&s.length>0?(et(e!==void 0,14353),s.map((n=>(function(o,c){let u=o.updateTime?nr(o.updateTime):nr(c);return u.isEqual(Re.min())&&(u=nr(c)),new nR(u,o.transformResults||[])})(n,e)))):[]}function bR(s,e){return{documents:[aw(s,e.path)]}}function _R(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=aw(s,o);const c=(function(y){if(y.length!==0)return cw(Or.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((x=>(function(T){return{field:Bo(T.field),direction:TR(T.dir)}})(x)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const g=Sg(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function ER(s){let e=pR(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){et(a===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(_){const T=lw(_);return T instanceof Or&&ME(T)?T.getFilters():[T]})(n.where));let u=[];n.orderBy&&(u=(function(_){return _.map((T=>(function(U){return new Bc(qo(U.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(_){let T;return T=typeof _=="object"?_.value:_,Zc(T)?null:T})(n.limit));let p=null;n.startAt&&(p=(function(_){const T=!!_.before,C=_.values||[];return new dh(C,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(_){const T=!_.before,C=_.values||[];return new dh(C,T)})(n.endAt)),HI(e,o,u,c,g,"F",p,y)}function wR(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lw(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=qo(n.unaryFilter.field);return Kt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=qo(n.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=qo(n.unaryFilter.field);return Kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=qo(n.unaryFilter.field);return Kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Kt.create(qo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Or.create(n.compositeFilter.filters.map((a=>lw(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(s):Ne(30097,{filter:s})}function TR(s){return dR[s]}function SR(s){return hR[s]}function AR(s){return fR[s]}function Bo(s){return{fieldPath:s.canonicalString()}}function qo(s){return vn.fromServerFormat(s.fieldPath)}function cw(s){return s instanceof Kt?(function(n){if(n.op==="=="){if(yb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(pb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(pb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:SR(n.op),value:n.value}}})(s):s instanceof Or?(function(n){const a=n.getFilters().map((o=>cw(o)));return a.length===1?a[0]:{compositeFilter:{op:AR(n.op),filters:a}}})(s):Ne(54877,{filter:s})}function NR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,a,o,c=Re.min(),u=Re.min(),g=xn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.yt=e}}function IR(s){const e=ER({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.Cn=new kR}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Ha.min())}updateCollectionGroup(e,n,a){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class kR{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new tn(mt.comparator),c=!o.has(a);return this.index[n]=o.add(a),c}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new tn(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dw=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(dw,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="LruGarbageCollector",jR=1048576;function Db([s,e],[n,a]){const o=Ke(s,n);return o===0?Ke(e,a):o}class DR{constructor(e){this.Ir=e,this.buffer=new tn(Db),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Db(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OR{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(jb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fl(n)?xe(jb,"Ignoring IndexedDB error during garbage collection: ",n):await hl(n)}await this.Vr(3e5)}))}}class MR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(Rh.ce);const a=new DR(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(kb)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,c,u,g,p,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,u=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(a=_,g=Date.now(),this.removeTargets(e,a,n)))).next((_=>(c=_,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((_=>(y=Date.now(),Uo()<=$e.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${o} in `+(g-u)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${_} documents in `+(y-p)+`ms
Total Duration: ${y-x}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:_}))))}}function VR(s,e){return new MR(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.changes=new qi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ae.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&kc(a.mutation,o,tr.empty(),bt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Ye()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Ye()){const o=ki();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((c=>{let u=Tc();return c.forEach(((g,p)=>{u=u.insert(g,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const a=ki();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Ye())))}populateOverlays(e,n,a){const o=[];return a.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,g)=>{n.set(u,g)}))}))}computeViews(e,n,a,o){let c=Bs();const u=Rc(),g=(function(){return Rc()})();return n.forEach(((p,y)=>{const x=a.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof Wa)?c=c.insert(y.key,y):x!==void 0?(u.set(y.key,x.mutation.getFieldMask()),kc(x.mutation,y,x.mutation.getFieldMask(),bt.now())):u.set(y.key,tr.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,x)=>u.set(y,x))),n.forEach(((y,x)=>g.set(y,new PR(x,u.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Rc();let o=new At(((u,g)=>u-g)),c=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const g of u)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let x=a.get(p)||tr.empty();x=g.applyToLocalView(y,x),a.set(p,x);const _=(o.get(g.batchId)||Ye()).add(p);o=o.insert(g.batchId,_)}))})).next((()=>{const u=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,x=p.value,_=FE();x.forEach((T=>{if(!c.has(T)){const C=XE(n.get(T),a.get(T));C!==null&&_.set(T,C),c=c.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,_))}return ae.waitFor(u)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-c.size):ae.resolve(ki());let g=Lc,p=c;return u.next((y=>ae.forEach(y,((x,_)=>(g<_.largestBatchId&&(g=_.largestBatchId),c.get(x)?ae.resolve():this.remoteDocumentCache.getEntry(e,x).next((T=>{p=p.insert(x,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,Ye()))).next((x=>({batchId:g,changes:HE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((a=>{let o=Tc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const c=n.collectionGroup;let u=Tc();return this.indexManager.getCollectionParents(e,c).next((g=>ae.forEach(g,(p=>{const y=(function(_,T){return new ml(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((x=>{x.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,c,o)))).next((u=>{c.forEach(((p,y)=>{const x=y.getKey();u.get(x)===null&&(u=u.insert(x,un.newInvalidDocument(x)))}));let g=Tc();return u.forEach(((p,y)=>{const x=c.get(p);x!==void 0&&kc(x.mutation,y,tr.empty(),bt.now()),Dh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:nr(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:IR(o.bundledQuery),readTime:nr(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.overlays=new At(Se.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const a=ki();return ae.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&a.set(o,c)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,c)=>{this.St(e,n,c)})),ae.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),ae.resolve()}getOverlaysForCollection(e,n,a){const o=ki(),c=n.length+1,u=new Se(n.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>a&&o.set(p.getKey(),p)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let c=new At(((y,x)=>y-x));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let x=c.get(y.largestBatchId);x===null&&(x=ki(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const g=ki(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,x)=>g.set(y,x))),!(g.size()>=o)););return ae.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(a.key,new iR(n,a));let c=this.qr.get(n);c===void 0&&(c=Ye(),this.qr.set(n,c)),this.qr.set(n,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new tn(ln.$r),this.Ur=new tn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new ln(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new ln(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Se(new mt([])),a=new ln(n,e),o=new ln(n,e+1),c=[];return this.Ur.forEachInRange([a,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new mt([])),a=new ln(n,e),o=new ln(n,e+1);let c=Ye();return this.Ur.forEachInRange([a,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new ln(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tn(ln.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new aR(c,n,a,o);this.mutationQueue.push(u);for(const g of o)this.Zr=this.Zr.add(new ln(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),c=o<0?0:o;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?rp:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new ln(n,0),o=new ln(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,o],(u=>{const g=this.Xr(u.Yr);c.push(g)})),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new tn(Ke);return n.forEach((o=>{const c=new ln(o,0),u=new ln(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(g=>{a=a.add(g.Yr)}))})),ae.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let c=a;Se.isDocumentKey(c)||(c=c.child(""));const u=new ln(new Se(c),0);let g=new tn(Ke);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),u),ae.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ae.forEach(n.mutations,(o=>{const c=new ln(o.key,n.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new ln(n,0),o=this.Zr.firstAfterOrEqual(a);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.ri=e,this.docs=(function(){return new At(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),c=o?o.size:0,u=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ae.resolve(a?a.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let a=Bs();return n.forEach((o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():un.newInvalidDocument(o))})),ae.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let c=Bs();const u=n.path,g=new Se(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:x}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||_I(bI(x),a)<=0||(o.has(x.key)||Dh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,n,a,o){Ne(9500)}ii(e,n){return ae.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new GR(this)}getSize(e){return ae.resolve(this.size)}}class GR extends LR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.persistence=e,this.si=new qi((n=>ip(n)),op),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,a){let o=0;const c=[];return this.si.forEach(((u,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ae.waitFor(c).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return ae.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),ae.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ae.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return ae.resolve(a)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rh(0),this.li=!1,this.li=!0,this.hi=new qR,this.referenceDelegate=e(this),this.Pi=new QR(this),this.indexManager=new RR,this.remoteDocumentCache=(function(o){return new FR(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new CR(n),this.Ii=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new HR(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){xe("MemoryPersistence","Starting transaction:",e);const o=new $R(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ae.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class $R extends wI{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),ae.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(a=>{const o=Se.fromPath(a);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new qi((a=>AI(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=VR(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((a,o)=>this.br(e,a,o).next((c=>c?ae.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,n).next((g=>{g||(a++,c.removeEntry(u,Re.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$d(e.data.value)),n}br(e,n,a){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ae.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=Ye(),o=Ye();for(const c of n.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new gp(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return A2()?8:TI(Tn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const c={result:null};return this.ys(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,n,o,a).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new KR;return this.Ss(e,n,u).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,u,g.size)}))})).next((()=>c.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(Uo()<=$e.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Uo()<=$e.DEBUG&&xe("QueryEngine","Query:",zo(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Uo()<=$e.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(n))):ae.resolve())}ys(e,n){if(_b(n))return ae.resolve(null);let a=is(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hh(n,null,"F"),a=is(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const u=Ye(...c);return this.ps.getDocuments(e,u).next((g=>this.indexManager.getMinOffset(e,a).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,u,p.readTime)?this.ys(e,hh(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,a,o){return _b(n)||o.isEqual(Re.min())?ae.resolve(null):this.ps.getDocuments(e,a).next((c=>{const u=this.Ds(n,c);return this.Cs(n,u,a,o)?ae.resolve(null):(Uo()<=$e.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zo(n)),this.vs(e,u,n,xI(o,Lc)).next((g=>g)))}))}Ds(e,n){let a=new tn(BE(e));return n.forEach(((o,c)=>{Dh(e,c)&&(a=a.add(c))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,a){return Uo()<=$e.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",zo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ha.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="LocalStore",XR=3e8;class JR{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new At(Ke),this.xs=new qi((c=>ip(c)),op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function WR(s,e,n,a){return new JR(s,e,n,a)}async function fw(s,e){const n=Oe(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((c=>{const u=[],g=[];let p=Ye();for(const y of o){u.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}for(const y of c){g.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}return n.localDocuments.getDocuments(a,p).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:g})))}))}))}function ZR(s,e){const n=Oe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,x){const _=y.batch,T=_.keys();let C=ae.resolve();return T.forEach((U=>{C=C.next((()=>x.getEntry(p,U))).next((z=>{const L=y.docVersions.get(U);et(L!==null,48541),z.version.compareTo(L)<0&&(_.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),x.addEntry(z)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(p,_)))})(n,a,e,c).next((()=>c.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let p=Ye();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function mw(s){const e=Oe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function ek(s,e){const n=Oe(s),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((x,_)=>{const T=o.get(_);if(!T)return;g.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,_))));let C=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(xn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):x.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(x.resumeToken,a)),o=o.insert(_,C),(function(z,L,B){return z.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=XR?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,C,x)&&g.push(n.Pi.updateTargetData(c,C))}));let p=Bs(),y=Ye();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),g.push(tk(c,u,e.documentUpdates).next((x=>{p=x.ks,y=x.qs}))),!a.isEqual(Re.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((_=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));g.push(x)}return ae.waitFor(g).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function tk(s,e,n){let a=Ye(),o=Ye();return n.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let u=Bs();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(g,p.readTime),u=u.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(g,p)):xe(pp,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function nk(s,e){const n=Oe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=rp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function rk(s,e){const n=Oe(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((c=>c?(o=c,ae.resolve(o)):n.Pi.allocateTargetId(a).next((u=>(o=new Oa(e,u,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function Cg(s,e,n){const a=Oe(s),o=a.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",c,(u=>a.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!fl(u))throw u;xe(pp,`Failed to update sequence numbers for target ${e}: ${u}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function Ob(s,e,n){const a=Oe(s);let o=Re.min(),c=Ye();return a.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,x){const _=Oe(p),T=_.xs.get(x);return T!==void 0?ae.resolve(_.Ms.get(T)):_.Pi.getTargetData(y,x)})(a,u,is(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(u,g.targetId).next((p=>{c=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(u,e,n?o:Re.min(),n?c:Ye()))).next((g=>(sk(a,GI(e),g),{documents:g,Qs:c})))))}function sk(s,e,n){let a=s.Os.get(e)||Re.min();n.forEach(((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Os.set(e,a)}class Mb{constructor(){this.activeTargetIds=JI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ak{constructor(){this.Mo=new Mb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mb,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="ConnectivityMonitor";class Lb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Vb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Vb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd=null;function Ig(){return Vd===null?Vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vd++,"0x"+Vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="RestConnection",ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===ch?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,c){const u=Ig(),g=this.zo(e,n.toUriEncodedString());xe(rg,`Sending RPC '${e}' ${u}:`,g,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(g),x=ll(y);return this.Jo(e,g,p,a,x).then((_=>(xe(rg,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Wo(rg,`RPC '${e}' ${u} failed with error: `,_,"url: ",g,"request:",a),_}))}Ho(e,n,a,o,c,u){return this.Go(e,n,a,o,c)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),a&&a.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const a=ok[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class uk extends lk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,c){const u=Ig();return new Promise(((g,p)=>{const y=new mE;y.setWithCredentials(!0),y.listenOnce(gE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Qd.NO_ERROR:const _=y.getResponseJson();xe(En,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),g(_);break;case Qd.TIMEOUT:xe(En,`RPC '${e}' ${u} timed out`),p(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const T=y.getStatus();if(xe(En,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C==null?void 0:C.error;if(U&&U.status&&U.message){const z=(function(B){const H=B.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(H)>=0?H:te.UNKNOWN})(U.status);p(new fe(z,U.message))}else p(new fe(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{xe(En,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(o);xe(En,`RPC '${e}' ${u} sending request:`,o),y.send(n,"POST",x,a,15)}))}T_(e,n,a){const o=Ig(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vE(),g=yE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const x=c.join("");xe(En,`Creating RPC '${e}' stream ${o}: ${x}`,p);const _=u.createWebChannel(x,p);this.I_(_);let T=!1,C=!1;const U=new ck({Yo:L=>{C?xe(En,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(T||(xe(En,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),xe(En,`RPC '${e}' stream ${o} sending:`,L),_.send(L))},Zo:()=>_.close()}),z=(L,B,H)=>{L.listen(B,(K=>{try{H(K)}catch(de){setTimeout((()=>{throw de}),0)}}))};return z(_,wc.EventType.OPEN,(()=>{C||(xe(En,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),z(_,wc.EventType.CLOSE,(()=>{C||(C=!0,xe(En,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(_))})),z(_,wc.EventType.ERROR,(L=>{C||(C=!0,Wo(En,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),U.a_(new fe(te.UNAVAILABLE,"The operation could not be completed")))})),z(_,wc.EventType.MESSAGE,(L=>{var B;if(!C){const H=L.data[0];et(!!H,16349);const K=H,de=(K==null?void 0:K.error)||((B=K[0])==null?void 0:B.error);if(de){xe(En,`RPC '${e}' stream ${o} received error:`,de);const ye=de.status;let be=(function(N){const O=$t[N];if(O!==void 0)return ew(O)})(ye),k=de.message;be===void 0&&(be=te.INTERNAL,k="Unknown error status: "+ye+" with message "+de.message),C=!0,U.a_(new fe(be,k)),_.close()}else xe(En,`RPC '${e}' stream ${o} received:`,H),U.u_(H)}})),z(g,pE.STAT_EVENT,(L=>{L.stat===yg.PROXY?xe(En,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===yg.NOPROXY&&xe(En,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(s){return new mR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,a=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="PersistentStream";class gw{constructor(e,n,a,o,c,u,g,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new fe(te.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(Pb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(xe(Pb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dk extends gw{constructor(e,n,a,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=vR(this.serializer,e),a=(function(c){if(!("targetChange"in c))return Re.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?nr(u.readTime):Re.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=Ng(this.serializer),n.addTarget=(function(c,u){let g;const p=u.target;if(g=wg(p)?{documents:bR(c,p)}:{query:_R(c,p).ft},g.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){g.resumeToken=rw(c,u.resumeToken);const y=Sg(c,u.expectedCount);y!==null&&(g.expectedCount=y)}else if(u.snapshotVersion.compareTo(Re.min())>0){g.readTime=gh(c,u.snapshotVersion.toTimestamp());const y=Sg(c,u.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=wR(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=Ng(this.serializer),n.removeTarget=e,this.q_(n)}}class hk extends gw{constructor(e,n,a,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xR(e.writeResults,e.commitTime),a=nr(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Ng(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>ow(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{}class mk extends fk{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Ag(n,a),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(te.UNKNOWN,c.toString())}))}Ho(e,n,a,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,g])=>this.connection.Ho(e,Ag(n,a),o,u,g,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zs(n),this.aa=!1):xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="RemoteStore";class pk{constructor(e,n,a,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{a.enqueueAndForget((async()=>{Hi(this)&&(xe(Li,"Restarting streams for network reachability change."),await(async function(p){const y=Oe(p);y.Ea.add(4),await ru(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ph(y)})(this))}))})),this.Ra=new gk(a,o)}}async function Ph(s){if(Hi(s))for(const e of s.da)await e(!0)}async function ru(s){for(const e of s.da)await e(!1)}function pw(s,e){const n=Oe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_p(n)?bp(n):gl(n).O_()&&xp(n,e))}function vp(s,e){const n=Oe(s),a=gl(n);n.Ia.delete(e),a.O_()&&yw(n,e),n.Ia.size===0&&(a.O_()?a.L_():Hi(n)&&n.Ra.set("Unknown"))}function xp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gl(s).Y_(e)}function yw(s,e){s.Va.Ue(e),gl(s).Z_(e)}function bp(s){s.Va=new uR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),gl(s).start(),s.Ra.ua()}function _p(s){return Hi(s)&&!gl(s).x_()&&s.Ia.size>0}function Hi(s){return Oe(s).Ea.size===0}function vw(s){s.Va=void 0}async function yk(s){s.Ra.set("Online")}async function vk(s){s.Ia.forEach(((e,n)=>{xp(s,e)}))}async function xk(s,e){vw(s),_p(s)?(s.Ra.ha(e),bp(s)):s.Ra.set("Unknown")}async function bk(s,e,n){if(s.Ra.set("Online"),e instanceof nw&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,u),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){xe(Li,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await vh(s,a)}else if(e instanceof Xd?s.Va.Ze(e):e instanceof tw?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const a=await mw(s.localStore);n.compareTo(a)>=0&&await(function(c,u){const g=c.Va.Tt(u);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const x=c.Ia.get(y);x&&c.Ia.set(y,x.withResumeToken(p.resumeToken,u))}})),g.targetMismatches.forEach(((p,y)=>{const x=c.Ia.get(p);if(!x)return;c.Ia.set(p,x.withResumeToken(xn.EMPTY_BYTE_STRING,x.snapshotVersion)),yw(c,p);const _=new Oa(x.target,p,y,x.sequenceNumber);xp(c,_)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){xe(Li,"Failed to raise snapshot:",a),await vh(s,a)}}async function vh(s,e,n){if(!fl(e))throw e;s.Ea.add(1),await ru(s),s.Ra.set("Offline"),n||(n=()=>mw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{xe(Li,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ph(s)}))}function xw(s,e){return e().catch((n=>vh(s,n,e)))}async function Uh(s){const e=Oe(s),n=$a(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rp;for(;_k(e);)try{const o=await nk(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,Ek(e,o)}catch(o){await vh(e,o)}bw(e)&&_w(e)}function _k(s){return Hi(s)&&s.Ta.length<10}function Ek(s,e){s.Ta.push(e);const n=$a(s);n.O_()&&n.X_&&n.ea(e.mutations)}function bw(s){return Hi(s)&&!$a(s).x_()&&s.Ta.length>0}function _w(s){$a(s).start()}async function wk(s){$a(s).ra()}async function Tk(s){const e=$a(s);for(const n of s.Ta)e.ea(n.mutations)}async function Sk(s,e,n){const a=s.Ta.shift(),o=up.from(a,e,n);await xw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Uh(s)}async function Ak(s,e){e&&$a(s).X_&&await(async function(a,o){if((function(u){return ZE(u)&&u!==te.ABORTED})(o.code)){const c=a.Ta.shift();$a(a).B_(),await xw(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Uh(a)}})(s,e),bw(s)&&_w(s)}async function Ub(s,e){const n=Oe(s);n.asyncQueue.verifyOperationInProgress(),xe(Li,"RemoteStore received new credentials");const a=Hi(n);n.Ea.add(3),await ru(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ph(n)}async function Nk(s,e){const n=Oe(s);e?(n.Ea.delete(2),await Ph(n)):e||(n.Ea.add(2),await ru(n),n.Ra.set("Unknown"))}function gl(s){return s.ma||(s.ma=(function(n,a,o){const c=Oe(n);return c.sa(),new dk(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:yk.bind(null,s),t_:vk.bind(null,s),r_:xk.bind(null,s),H_:bk.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),_p(s)?bp(s):s.Ra.set("Unknown")):(await s.ma.stop(),vw(s))}))),s.ma}function $a(s){return s.fa||(s.fa=(function(n,a,o){const c=Oe(n);return c.sa(),new hk(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:wk.bind(null,s),r_:Ak.bind(null,s),ta:Tk.bind(null,s),na:Sk.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Uh(s)):(await s.fa.stop(),s.Ta.length>0&&(xe(Li,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,a,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,c){const u=Date.now()+a,g=new Ep(e,n,u,o,c);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wp(s,e){if(zs("AsyncQueue",`${e}: ${s}`),fl(s))return new fe(te.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Se.comparator(n.key,a.key):(n,a)=>Se.comparator(n.key,a.key),this.keyedMap=Tc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Ko;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.ga=new At(Se.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class rl{constructor(e,n,a,o,c,u,g,p,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,c){const u=[];return n.forEach((g=>{u.push({type:0,doc:g})})),new rl(e,n,Ko.emptySet(n),u,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ik{constructor(){this.queries=Bb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Oe(n),c=o.queries;o.queries=Bb(),c.forEach(((u,g)=>{for(const p of g.Sa)p.onError(a)}))})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function Bb(){return new qi((s=>zE(s)),jh)}async function Ew(s,e){const n=Oe(s);let a=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(a=2):(c=new Ck,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const g=wp(u,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Tp(n)}async function ww(s,e){const n=Oe(s),a=e.query;let o=3;const c=n.queries.get(a);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function Rk(s,e){const n=Oe(s);let a=!1;for(const o of e){const c=o.query,u=n.queries.get(c);if(u){for(const g of u.Sa)g.Fa(o)&&(a=!0);u.wa=o}}a&&Tp(n)}function kk(s,e,n){const a=Oe(s),o=a.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);a.queries.delete(e)}function Tp(s){s.Ca.forEach((e=>{e.next()}))}var Rg,qb;(qb=Rg||(Rg={})).Ma="default",qb.Cache="cache";class Tw{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new rl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.key=e}}class Aw{constructor(e){this.key=e}}class jk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=BE(e),this.tu=new Ko(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new zb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,_)=>{const T=o.get(x),C=Dh(this.query,_)?_:null,U=!!T&&this.mutatedKeys.has(T.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;T&&C?T.data.isEqual(C.data)?U!==z&&(a.track({type:3,doc:C}),L=!0):this.su(T,C)||(a.track({type:2,doc:C}),L=!0,(p&&this.eu(C,p)>0||y&&this.eu(C,y)<0)&&(g=!0)):!T&&C?(a.track({type:0,doc:C}),L=!0):T&&!C&&(a.track({type:1,doc:T}),L=!0,(p||y)&&(g=!0)),L&&(C?(u=u.add(C),c=z?c.add(x):c.delete(x)):(u=u.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),c=c.delete(x.key),a.track({type:1,doc:x})}return{tu:u,iu:a,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,_)=>(function(C,U){const z=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:L})}};return z(C)-z(U)})(x.type,_.type)||this.eu(x.doc,_.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,u.length!==0||y?{snapshot:new rl(this.query,e.tu,c,u,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new Aw(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new Sw(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sp="SyncEngine";class Dk{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class Ok{constructor(e){this.key=e,this.hu=!1}}class Mk{constructor(e,n,a,o,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new qi((g=>zE(g)),jh),this.Iu=new Map,this.Eu=new Set,this.du=new At(Se.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Vk(s,e,n=!0){const a=jw(s);let o;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Nw(a,e,n,!0),o}async function Lk(s,e){const n=jw(s);await Nw(n,e,!0,!1)}async function Nw(s,e,n,a){const o=await rk(s.localStore,is(e)),c=o.targetId,u=s.sharedClientState.addLocalQueryTarget(c,n);let g;return a&&(g=await Pk(s,e,c,u==="current",o.resumeToken)),s.isPrimaryClient&&n&&pw(s.remoteStore,o),g}async function Pk(s,e,n,a,o){s.pu=(_,T,C)=>(async function(z,L,B,H){let K=L.view.ru(B);K.Cs&&(K=await Ob(z.localStore,L.query,!1).then((({documents:k})=>L.view.ru(k,K))));const de=H&&H.targetChanges.get(L.targetId),ye=H&&H.targetMismatches.get(L.targetId)!=null,be=L.view.applyChanges(K,z.isPrimaryClient,de,ye);return Fb(z,L.targetId,be.au),be.snapshot})(s,_,T,C);const c=await Ob(s.localStore,e,!0),u=new jk(e,c.Qs),g=u.ru(c.documents),p=nu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),y=u.applyChanges(g,s.isPrimaryClient,p);Fb(s,n,y.au);const x=new Dk(e,n,u);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function Uk(s,e,n){const a=Oe(s),o=a.Tu.get(e),c=a.Iu.get(o.targetId);if(c.length>1)return a.Iu.set(o.targetId,c.filter((u=>!jh(u,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Cg(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&vp(a.remoteStore,o.targetId),kg(a,o.targetId)})).catch(hl)):(kg(a,o.targetId),await Cg(a.localStore,o.targetId,!0))}async function zk(s,e){const n=Oe(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),vp(n.remoteStore,a.targetId))}async function Bk(s,e,n){const a=Kk(s);try{const o=await(function(u,g){const p=Oe(u),y=bt.now(),x=g.reduce(((C,U)=>C.add(U.key)),Ye());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=Bs(),z=Ye();return p.Ns.getEntries(C,x).next((L=>{U=L,U.forEach(((B,H)=>{H.isValidDocument()||(z=z.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,U))).next((L=>{_=L;const B=[];for(const H of g){const K=sR(H,_.get(H.key).overlayedDocument);K!=null&&B.push(new Wa(H.key,K,jE(K.value.mapValue),Yt.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,B,g)})).next((L=>{T=L;const B=L.applyToLocalDocumentSet(_,z);return p.documentOverlayCache.saveOverlays(C,L.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:HE(_)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(u,g,p){let y=u.Vu[u.currentUser.toKey()];y||(y=new At(Ke)),y=y.insert(g,p),u.Vu[u.currentUser.toKey()]=y})(a,o.batchId,n),await su(a,o.changes),await Uh(a.remoteStore)}catch(o){const c=wp(o,"Failed to persist write");n.reject(c)}}async function Cw(s,e){const n=Oe(s);try{const a=await ek(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=n.Au.get(c);u&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?et(u.hu,14607):o.removedDocuments.size>0&&(et(u.hu,42227),u.hu=!1))})),await su(n,a,e)}catch(a){await hl(a)}}function Hb(s,e,n){const a=Oe(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((c,u)=>{const g=u.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(u,g){const p=Oe(u);p.onlineState=g;let y=!1;p.queries.forEach(((x,_)=>{for(const T of _.Sa)T.va(g)&&(y=!0)})),y&&Tp(p)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function qk(s,e,n){const a=Oe(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),c=o&&o.key;if(c){let u=new At(Se.comparator);u=u.insert(c,un.newNoDocument(c,Re.min()));const g=Ye().add(c),p=new Vh(Re.min(),new Map,new At(Ke),u,g);await Cw(a,p),a.du=a.du.remove(c),a.Au.delete(e),Ap(a)}else await Cg(a.localStore,e,!1).then((()=>kg(a,e,n))).catch(hl)}async function Hk(s,e){const n=Oe(s),a=e.batch.batchId;try{const o=await ZR(n.localStore,e);Rw(n,a,null),Iw(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await su(n,o)}catch(o){await hl(o)}}async function Fk(s,e,n){const a=Oe(s);try{const o=await(function(u,g){const p=Oe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return p.mutationQueue.lookupMutationBatch(y,g).next((_=>(et(_!==null,37113),x=_.keys(),p.mutationQueue.removeMutationBatch(y,_)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,x,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>p.localDocuments.getDocuments(y,x)))}))})(a.localStore,e);Rw(a,e,n),Iw(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await su(a,o)}catch(o){await hl(o)}}function Iw(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function Rw(s,e,n){const a=Oe(s);let o=a.Vu[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function kg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||kw(s,a)}))}function kw(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(vp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Ap(s))}function Fb(s,e,n){for(const a of n)a instanceof Sw?(s.Ru.addReference(a.key,e),Gk(s,a)):a instanceof Aw?(xe(Sp,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||kw(s,a.key)):Ne(19791,{wu:a})}function Gk(s,e){const n=e.key,a=n.path.canonicalString();s.du.get(n)||s.Eu.has(a)||(xe(Sp,"New document in limbo: "+n),s.Eu.add(a),Ap(s))}function Ap(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Se(mt.fromString(e)),a=s.fu.next();s.Au.set(a,new Ok(n)),s.du=s.du.insert(n,a),pw(s.remoteStore,new Oa(is(lp(n.path)),a,"TargetPurposeLimboResolution",Rh.ce))}}async function su(s,e,n){const a=Oe(s),o=[],c=[],u=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,p)=>{u.push(a.pu(p,e,n).then((y=>{var x;if((y||n)&&a.isPrimaryClient){const _=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:x.current;a.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(y){o.push(y);const _=gp.As(p.targetId,y);c.push(_)}})))})),await Promise.all(u),a.Pu.H_(o),await(async function(p,y){const x=Oe(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ae.forEach(y,(T=>ae.forEach(T.Es,(C=>x.persistence.referenceDelegate.addReference(_,T.targetId,C))).next((()=>ae.forEach(T.ds,(C=>x.persistence.referenceDelegate.removeReference(_,T.targetId,C)))))))))}catch(_){if(!fl(_))throw _;xe(pp,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const C=x.Ms.get(T),U=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(U);x.Ms=x.Ms.insert(T,z)}}})(a.localStore,c))}async function Qk(s,e){const n=Oe(s);if(!n.currentUser.isEqual(e)){xe(Sp,"User change. New user:",e.toKey());const a=await fw(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new fe(te.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await su(n,a.Ls)}}function $k(s,e){const n=Oe(s),a=n.Au.get(e);if(a&&a.hu)return Ye().add(a.key);{let o=Ye();const c=n.Iu.get(e);if(!c)return o;for(const u of c){const g=n.Tu.get(u);o=o.unionWith(g.view.nu)}return o}}function jw(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$k.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qk.bind(null,e),e.Pu.H_=Rk.bind(null,e.eventManager),e.Pu.yu=kk.bind(null,e.eventManager),e}function Kk(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fk.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WR(this.persistence,new YR,e.initialUser,this.serializer)}Cu(e){return new hw(mp.mi,this.serializer)}Du(e){return new ak}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class Yk extends xh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof yh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new OR(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new hw((a=>yh.mi(a,n)),this.serializer)}}class jg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Hb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qk.bind(null,this.syncEngine),await Nk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ik})()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),a=(function(c){return new uk(c)})(e.databaseInfo);return(function(c,u,g,p){return new mk(c,u,g,p)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,c,u,g){return new pk(a,o,c,u,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Hb(this.syncEngine,n,0)),(function(){return Lb.v()?new Lb:new ik})())}createSyncEngine(e,n){return(function(o,c,u,g,p,y,x){const _=new Mk(o,c,u,g,p,y);return x&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Oe(o);xe(Li,"RemoteStore shutting down."),c.Ea.add(5),await ru(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}jg.provider={build:()=>new jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new fe(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const u=Oe(o),g={documents:c.map((_=>ph(u.serializer,_)))},p=await u.Ho("BatchGetDocuments",u.serializer.databaseId,mt.emptyPath(),g,c.length),y=new Map;p.forEach((_=>{const T=yR(u.serializer,_);y.set(T.key.toString(),T)}));const x=[];return c.forEach((_=>{const T=y.get(_.toString());et(!!T,55234,{key:_}),x.push(T)})),x})(this.datastore,e);return n.forEach((a=>this.recordVersion(a))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new tu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,a)=>{const o=Se.fromPath(a);this.mutations.push(new WE(o,this.precondition(o)))})),await(async function(a,o){const c=Oe(a),u={writes:o.map((g=>ow(c.serializer,g)))};await c.Go("Commit",c.serializer.databaseId,mt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Gu:e.constructor.name});n=Re.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!n.isEqual(a))throw new fe(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Re.min())?Yt.exists(!1):Yt.updateTime(n):Yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new fe(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(n)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n,a,o,c){this.asyncQueue=e,this.datastore=n,this.options=a,this.updateFunction=o,this.deferred=c,this.zu=a.maxAttempts,this.M_=new yp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Xk(this.datastore),n=this.Hu(e);n&&n.then((a=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(a)})).catch((o=>{this.Yu(o)}))))})).catch((a=>{this.Yu(a)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Zc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ZE(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="FirestoreClient";class Wk{constructor(e,n,a,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=wn.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async u=>{xe(Ka,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(a,(u=>(xe(Ka,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=wp(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function ag(s,e){s.asyncQueue.verifyOperationInProgress(),xe(Ka,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await fw(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Gb(s,e){s.asyncQueue.verifyOperationInProgress();const n=await Zk(s);xe(Ka,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>Ub(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>Ub(e.remoteStore,o))),s._onlineComponents=e}async function Zk(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){xe(Ka,"Using user provided OfflineComponentProvider");try{await ag(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Wo("Error using user provided cache. Falling back to memory cache: "+n),await ag(s,new xh)}}else xe(Ka,"Using default OfflineComponentProvider"),await ag(s,new Yk(void 0));return s._offlineComponents}async function Np(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(xe(Ka,"Using user provided OnlineComponentProvider"),await Gb(s,s._uninitializedComponentsProvider._online)):(xe(Ka,"Using default OnlineComponentProvider"),await Gb(s,new jg))),s._onlineComponents}function e4(s){return Np(s).then((e=>e.syncEngine))}function t4(s){return Np(s).then((e=>e.datastore))}async function Ow(s){const e=await Np(s),n=e.eventManager;return n.onListen=Vk.bind(null,e.syncEngine),n.onUnlisten=Uk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Lk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zk.bind(null,e.syncEngine),n}function n4(s,e,n={}){const a=new as;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,g,p,y){const x=new Dw({next:T=>{x.Nu(),u.enqueueAndForget((()=>ww(c,_)));const C=T.docs.has(g);!C&&T.fromCache?y.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new Tw(lp(g.path),x,{includeMetadataChanges:!0,qa:!0});return Ew(c,_)})(await Ow(s),s.asyncQueue,e,n,a))),a.promise}function r4(s,e,n={}){const a=new as;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,g,p,y){const x=new Dw({next:T=>{x.Nu(),u.enqueueAndForget((()=>ww(c,_))),T.fromCache&&p.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new Tw(g,x,{includeMetadataChanges:!0,qa:!0});return Ew(c,_)})(await Ow(s),s.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="firestore.googleapis.com",$b=!0;class Kb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vw,this.ssl=$b}else this.host=e.host,this.ssl=e.ssl??$b;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jR)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new oI;switch(a.type){case"firstParty":return new dI(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=Qb.get(n);a&&(xe("ComponentProvider","Removing Datastore"),Qb.delete(n),a.terminate())})(this),Promise.resolve()}}function s4(s,e,n,a={}){var y;s=sr(s,zh);const o=ll(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(C_(`https://${g}`),I_("Firestore",!0)),c.host!==Vw&&c.host!==g&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:a};if(!Di(p,u)&&(s._setSettings(p),a.mockUserToken)){let x,_;if(typeof a.mockUserToken=="string")x=a.mockUserToken,_=wn.MOCK_USER;else{x=y2(a.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new wn(T)}s._authCredentials=new lI(new bE(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Za(this.firestore,e,this._query)}}class It{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Wc(n,It._jsonSchema))return new It(e,a||null,new Se(mt.fromString(n.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Xt("string",It._jsonSchemaVersion),referencePath:Xt("string")};class Ba extends Za{constructor(e,n,a){super(e,n,lp(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Se(e))}withConverter(e){return new Ba(this.firestore,e,this._path)}}function wt(s,e,...n){if(s=Rt(s),_E("collection","path",e),s instanceof zh){const a=mt.fromString(e,...n);return ob(a),new Ba(s,null,a)}{if(!(s instanceof It||s instanceof Ba))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(mt.fromString(e,...n));return ob(a),new Ba(s.firestore,null,a)}}function en(s,e,...n){if(s=Rt(s),arguments.length===1&&(e=np.newId()),_E("doc","path",e),s instanceof zh){const a=mt.fromString(e,...n);return ib(a),new It(s,null,new Se(a))}{if(!(s instanceof It||s instanceof Ba))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(mt.fromString(e,...n));return ib(a),new It(s.firestore,s instanceof Ba?s.converter:null,new Se(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="AsyncQueue";class Xb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yp(this,"async_queue_retry"),this._c=()=>{const a=sg();a&&xe(Yb,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fl(e))throw e;xe(Yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,zs("INTERNAL UNHANDLED ERROR: ",Jb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Ep.createAndSchedule(this,e,n,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:Jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Fs extends zh{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new Xb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xb(e),this._firestoreClient=void 0,await e}}}function a4(s,e){const n=typeof s=="object"?s:D_(),a=typeof s=="string"?s:ch,o=Fg(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=g2("firestore");c&&s4(o,...c)}return o}function au(s){if(s._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||i4(s),s._firestoreClient}function i4(s){var a,o,c;const e=s._freezeSettings(),n=(function(g,p,y,x){return new II(g,p,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Mw(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Wk(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(xn.fromBase64String(e))}catch(n){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new er(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Xt("string",er._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Lo(){return new Fi(xg)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:Xt("string",os._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ls(e.vectorValues);throw new fe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ls._jsonSchemaVersion="firestore/vectorValue/1.0",ls._jsonSchema={type:Xt("string",ls._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=/^__.*__$/;class l4{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Wa(e,this.data,this.fieldMask,n,this.fieldTransforms):new eu(e,this.data,n,this.fieldTransforms)}}class Lw{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Wa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:s})}}class Ip{constructor(e,n,a,o,c,u){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Pw(this.Ac)&&o4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class c4{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Lh(e)}Cc(e,n,a,o=!1){return new Ip({Ac:e,methodName:n,Dc:a,path:vn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pl(s){const e=s._freezeSettings(),n=Lh(s._databaseId);return new c4(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Bh(s,e,n,a,o,c={}){const u=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);jp("Data must be an object, but it was:",u,a);const g=Uw(a,u);let p,y;if(c.merge)p=new tr(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const x=[];for(const _ of c.mergeFields){const T=Dg(e,_,n);if(!u.contains(T))throw new fe(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Bw(x,T)||x.push(T)}p=new tr(x),y=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,y=u.fieldTransforms;return new l4(new Nn(g),p,y)}class qh extends Cp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qh}}function Rp(s,e,n,a){const o=s.Cc(1,e,n);jp("Data must be an object, but it was:",o,a);const c=[],u=Nn.empty();Ja(a,((p,y)=>{const x=Dp(e,p,n);y=Rt(y);const _=o.yc(x);if(y instanceof qh)c.push(x);else{const T=iu(y,_);T!=null&&(c.push(x),u.set(x,T))}}));const g=new tr(c);return new Lw(u,g,o.fieldTransforms)}function kp(s,e,n,a,o,c){const u=s.Cc(1,e,n),g=[Dg(e,a,n)],p=[o];if(c.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)g.push(Dg(e,c[T])),p.push(c[T+1]);const y=[],x=Nn.empty();for(let T=g.length-1;T>=0;--T)if(!Bw(y,g[T])){const C=g[T];let U=p[T];U=Rt(U);const z=u.yc(C);if(U instanceof qh)y.push(C);else{const L=iu(U,z);L!=null&&(y.push(C),x.set(C,L))}}const _=new tr(y);return new Lw(x,_,u.fieldTransforms)}function u4(s,e,n,a=!1){return iu(n,s.Cc(a?4:3,e))}function iu(s,e){if(zw(s=Rt(s)))return jp("Unsupported field value:",e,s),Uw(s,e);if(s instanceof Cp)return(function(a,o){if(!Pw(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const c=[];let u=0;for(const g of a){let p=iu(g,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),u++}return{arrayValue:{values:c}}})(s,e)}return(function(a,o){if((a=Rt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return WI(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=bt.fromDate(a);return{timestampValue:gh(o.serializer,c)}}if(a instanceof bt){const c=new bt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:gh(o.serializer,c)}}if(a instanceof os)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof er)return{bytesValue:rw(o.serializer,a._byteString)};if(a instanceof It){const c=o.databaseId,u=a.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:hp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof ls)return(function(u,g){return{mapValue:{fields:{[RE]:{stringValue:kE},[uh]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return cp(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Ih(a)}`)})(s,e)}function Uw(s,e){const n={};return TE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ja(s,((a,o)=>{const c=iu(o,e.mc(a));c!=null&&(n[a]=c)})),{mapValue:{fields:n}}}function zw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof os||s instanceof er||s instanceof It||s instanceof Cp||s instanceof ls)}function jp(s,e,n){if(!zw(n)||!EE(n)){const a=Ih(n);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Dg(s,e,n){if((e=Rt(e))instanceof Fi)return e._internalPath;if(typeof e=="string")return Dp(s,e);throw bh("Field path arguments must be of type string or ",s,!1,void 0,n)}const d4=new RegExp("[~\\*/\\[\\]]");function Dp(s,e,n){if(e.search(d4)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Fi(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function bh(s,e,n,a,o){const c=a&&!a.isEmpty(),u=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||u)&&(p+=" (found",c&&(p+=` in field ${a}`),u&&(p+=` in document ${o}`),p+=")"),new fe(te.INVALID_ARGUMENT,g+s+p)}function Bw(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,a,o,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class h4 extends _h{data(){return super.data()}}function Hh(s,e){return typeof e=="string"?Dp(s,e):e instanceof Fi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Op{}class Mp extends Op{}function Gt(s,e,...n){let a=[];e instanceof Op&&a.push(e),a=a.concat(n),(function(c){const u=c.filter((p=>p instanceof Vp)).length,g=c.filter((p=>p instanceof Fh)).length;if(u>1||u>0&&g>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Fh extends Mp{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Fh(e,n,a)}_apply(e){const n=this._parse(e);return qw(e._query,n),new Za(e.firestore,e.converter,Tg(e._query,n))}_parse(e){const n=pl(e.firestore);return(function(c,u,g,p,y,x,_){let T;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){Zb(_,x);const U=[];for(const z of _)U.push(Wb(p,c,z));T={arrayValue:{values:U}}}else T=Wb(p,c,_)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||Zb(_,x),T=u4(g,u,_,x==="in"||x==="not-in");return Kt.create(y,x,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zt(s,e,n){const a=e,o=Hh("where",s);return Fh._create(o,a,n)}class Vp extends Op{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vp(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let u=o;const g=c.getFlattenedFilters();for(const p of g)qw(u,p),u=Tg(u,p)})(e._query,n),new Za(e.firestore,e.converter,Tg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lp extends Mp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lp(e,n)}_apply(e){const n=(function(o,c,u){if(o.startAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(c,u)})(e._query,this._field,this._direction);return new Za(e.firestore,e.converter,(function(o,c){const u=o.explicitOrderBy.concat([c]);return new ml(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function xc(s,e="asc"){const n=e,a=Hh("orderBy",s);return Lp._create(a,n)}class Pp extends Mp{constructor(e,n,a){super(),this.type=e,this._limit=n,this._limitType=a}static _create(e,n,a){return new Pp(e,n,a)}_apply(e){return new Za(e.firestore,e.converter,hh(e._query,this._limit,this._limitType))}}function bc(s){return vI("limit",s),Pp._create("limit",s,"F")}function Wb(s,e,n){if(typeof(n=Rt(n))=="string"){if(n==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UE(e)&&n.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(mt.fromString(n));if(!Se.isDocumentKey(a))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return gb(s,new Se(a))}if(n instanceof It)return gb(s,n._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function Zb(s,e){if(!Array.isArray(s)||s.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qw(s,e){const n=(function(o,c){for(const u of o)for(const g of u.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Hw{convertValue(e,n="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Ja(e,((o,c)=>{a[o]=this.convertValue(c,n)})),a}convertVectorValue(e){var a,o,c;const n=(c=(o=(a=e.fields)==null?void 0:a[uh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((u=>Lt(u.doubleValue)));return new ls(n)}convertGeoPoint(e){return new os(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=kh(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const n=Fa(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=mt.fromString(e);et(uw(a),9688,{name:e});const o=new Uc(a.get(1),a.get(3)),c=new Se(a.popFirst(5));return o.isEqual(n)||zs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class m4 extends Hw{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}class Ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qa extends _h{constructor(e,n,a,o,c,u){super(e,n,a,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Hh("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",qa._jsonSchema={type:Xt("string",qa._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Jd extends qa{data(e={}){return super.data(e)}}class Yo{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ho(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new Jd(this._firestore,this._userDataWriter,a.key,a,new Ho(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((g=>{const p=new Jd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ho(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Jd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ho(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return g.type!==0&&(y=u.indexOf(g.doc.key),u=u.delete(g.doc.key)),g.type!==1&&(u=u.add(g.doc),x=u.indexOf(g.doc.key)),{type:g4(g.type),doc:p,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function g4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(s){s=sr(s,It);const e=sr(s.firestore,Fs);return n4(au(e),s._key).then((n=>y4(e,s,n)))}Yo._jsonSchemaVersion="firestore/querySnapshot/1.0",Yo._jsonSchema={type:Xt("string",Yo._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Up extends Hw{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function Vt(s){s=sr(s,Za);const e=sr(s.firestore,Fs),n=au(e),a=new Up(e);return f4(s._query),r4(n,s._query).then((o=>new Yo(e,a,s,o)))}function t_(s,e,n){s=sr(s,It);const a=sr(s.firestore,Fs),o=Gh(s.converter,e,n);return ou(a,[Bh(pl(a),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Yt.none())])}function Ld(s,e,n,...a){s=sr(s,It);const o=sr(s.firestore,Fs),c=pl(o);let u;return u=typeof(e=Rt(e))=="string"||e instanceof Fi?kp(c,"updateDoc",s._key,e,n,a):Rp(c,"updateDoc",s._key,e),ou(o,[u.toMutation(s._key,Yt.exists(!0))])}function p4(s){return ou(sr(s.firestore,Fs),[new tu(s._key,Yt.none())])}function n_(s,e){const n=sr(s.firestore,Fs),a=en(s),o=Gh(s.converter,e);return ou(n,[Bh(pl(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Yt.exists(!1))]).then((()=>a))}function ou(s,e){return(function(a,o){const c=new as;return a.asyncQueue.enqueueAndForget((async()=>Bk(await e4(a),o,c))),c.promise})(au(s),e)}function y4(s,e,n){const a=n.docs.get(e._key),o=new Up(s);return new qa(s,o,e._key,a,new Ho(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pl(e)}set(e,n,a){this._verifyNotCommitted();const o=Ma(e,this._firestore),c=Gh(o.converter,n,a),u=Bh(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,a);return this._mutations.push(u.toMutation(o._key,Yt.none())),this}update(e,n,a,...o){this._verifyNotCommitted();const c=Ma(e,this._firestore);let u;return u=typeof(n=Rt(n))=="string"||n instanceof Fi?kp(this._dataReader,"WriteBatch.update",c._key,n,a,o):Rp(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(u.toMutation(c._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ma(e,this._firestore);return this._mutations=this._mutations.concat(new tu(n._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ma(s,e){if((s=Rt(s)).firestore!==e)throw new fe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=pl(e)}get(e){const n=Ma(e,this._firestore),a=new m4(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ne(24041);const c=o[0];if(c.isFoundDocument())return new _h(this._firestore,a,c.key,c,n.converter);if(c.isNoDocument())return new _h(this._firestore,a,n._key,null,n.converter);throw Ne(18433,{doc:c})}))}set(e,n,a){const o=Ma(e,this._firestore),c=Gh(o.converter,n,a),u=Bh(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,a);return this._transaction.set(o._key,u),this}update(e,n,a,...o){const c=Ma(e,this._firestore);let u;return u=typeof(n=Rt(n))=="string"||n instanceof Fi?kp(this._dataReader,"Transaction.update",c._key,n,a,o):Rp(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,u),this}delete(e){const n=Ma(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4 extends b4{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ma(e,this._firestore),a=new Up(this._firestore);return super.get(e).then((o=>new qa(this._firestore,a,n._key,o._document,new Ho(!1,!1),n.converter)))}}function r_(s,e,n){s=sr(s,Fs);const a={...v4,...n};return(function(c){if(c.maxAttempts<1)throw new fe(te.INVALID_ARGUMENT,"Max attempts must be at least 1")})(a),(function(c,u,g){const p=new as;return c.asyncQueue.enqueueAndForget((async()=>{const y=await t4(c);new Jk(c.asyncQueue,y,g,u,p).ju()})),p.promise})(au(s),(o=>e(new _4(s,o))),a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(s){return au(s=sr(s,Fs)),new x4(s,(e=>ou(s,e)))}(function(e,n=!0){(function(o){dl=o})(cl),Xo(new Oi("firestore",((a,{instanceIdentifier:o,options:c})=>{const u=a.getProvider("app").getImmediate(),g=new Fs(new cI(a.getProvider("auth-internal")),new hI(u,a.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(y.options.projectId,x)})(u,o),u);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Pa(rb,sb,e),Pa(rb,sb,"esm2020")})();const s_=ji.firebase;let ig,Wn,ge;const E4=s=>s&&s.apiKey&&s.projectId&&s.appId;try{ji.useFirebase&&E4(s_)?(ig=j_(s_),Wn=aI(ig),ge=a4(ig),console.log("Firebase initialized successfully.")):ji.useFirebase?console.warn("Firebase `useFirebase` is true, but config keys are missing. Please check your .env.local file. Skipping Firebase Init."):console.log("`useFirebase` is false. Skipping Firebase Init.")}catch(s){console.error("Error initializing Firebase:",s)}class w4{constructor(){this.mapDocToEvent=e=>({id:e.id,...e.data()}),this.mapAuthError=e=>({"auth/invalid-credential":"Email ou senha incorretos.","auth/user-not-found":"Email ou senha incorretos.","auth/wrong-password":"Email ou senha incorretos.","auth/invalid-email":"O formato do email  invlido.","auth/user-disabled":"Esta conta foi desativada.","auth/email-already-in-use":"Email j cadastrado.","auth/too-many-requests":"Muitas tentativas. Tente novamente mais tarde.","auth/network-request-failed":"Erro de conexo.","auth/popup-closed-by-user":"Login cancelado.","auth/popup-blocked":"O navegador bloqueou a janela de login.","auth/operation-not-allowed":"Mtodo de login desabilitado.","auth/unauthorized-domain":"Domnio no autorizado.","permission-denied":"Permisso negada.",unavailable:"Servio indisponvel. Tente mais tarde."})[e]||`Erro inesperado (${e}).`}async login(e,n){if(!Wn)throw new Error("Servio de autenticao no inicializado.");if(!n)throw new Error("A senha  obrigatria.");try{await Qx(Wn,ih);const o=(await FN(Wn,e,n)).user;return this._fetchUserProfile(o)}catch(a){throw console.error("Erro no Login Firebase:",a),new Error(this.mapAuthError(a.code))}}async loginWithGoogle(){if(!Wn)throw new Error("Servio de autenticao no inicializado.");try{await Qx(Wn,ih);const e=new Ds;await mC(Wn,e)}catch(e){throw console.error("Erro ao iniciar Login com Google:",e),new Error(this.mapAuthError(e.code))}}async _fetchUserProfile(e){if(!ge)throw new Error("Banco de dados no inicializado.");const n=en(ge,"users",e.uid);let a;try{a=await e_(n)}catch(o){if(console.error("Erro ao acessar Firestore:",o),o.code==="permission-denied")return console.warn("Permisso negada ao ler perfil. Retornando dados bsicos."),{uid:e.uid,email:e.email||"",role:it.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(a.exists()){const o=a.data();return{uid:e.uid,email:e.email||"",name:o.name||e.displayName,role:o.role||it.USER,rm:o.rm,courseId:o.courseId,classId:o.classId,isOnboarded:o.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:it.USER,isOnboarded:!1}}async logout(){Wn&&await KN(Wn)}onAuthStateChanged(e){return Wn?$N(Wn,async n=>{if(n)try{const a=await this._fetchUserProfile(n);e(a)}catch(a){console.error("Erro ao carregar perfil no listener:",a),e({uid:n.uid,email:n.email||"",role:it.USER,isOnboarded:!1})}else e(null)}):()=>{}}async updateUserProfile(e,n){if(!ge)throw new Error("Banco de dados no inicializado.");if(n.rm)try{const c=wt(ge,"users"),u=Gt(c,Zt("rm","==",n.rm));if((await Vt(u)).docs.find(y=>y.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(c){if(c.code!=="permission-denied")throw c;console.warn("Pulei validao de RM nico devido a permisses.")}const a=en(ge,"users",e),o={...n,updatedAt:new Date().toISOString()};n.name&&n.rm&&(o.isOnboarded=!0);try{await t_(a,o,{merge:!0})}catch(c){throw console.error("Erro ao atualizar perfil:",c),new Error("No foi possvel salvar seus dados. Verifique sua conexo.")}return{...n,uid:e,email:"",role:it.USER,isOnboarded:!0}}async getUserProfile(e){if(!ge||!Wn)throw new Error("Servio de autenticao ou banco de dados no inicializado.");const n=Wn.currentUser;return!n||n.uid!==e?(console.warn("Tentativa de buscar perfil de um usurio diferente/deslogado."),null):this._fetchUserProfile(n)}async getUsers(e){if(!ge)return{data:[],nextCursor:void 0};const{limit:n,cursor:a,filters:o}=e,{searchTerm:c,role:u,courseId:g,classId:p}=o,y=500;try{const x=[xc("email"),bc(y)];u&&x.push(Zt("role","==",u));const _=Gt(wt(ge,"users"),...x),T=await Vt(_);let C=T.docs.map(B=>({uid:B.id,...B.data()}));if(g&&(C=C.filter(B=>B.courseId===g)),p&&(C=C.filter(B=>B.classId===p)),c){const B=c.toLowerCase();C=C.filter(H=>{var K,de;return((K=H.name)==null?void 0:K.toLowerCase().includes(B))||H.email.toLowerCase().includes(B)||((de=H.rm)==null?void 0:de.includes(B))})}let U=0;if(a){const B=a.id,H=C.findIndex(K=>K.uid===B);H!==-1&&(U=H+1)}const z=C.slice(U,U+n);let L;if(z.length===n&&U+n<C.length){const B=z[z.length-1];L=T.docs.find(H=>H.id===B.uid)}return{data:z,nextCursor:L}}catch(x){return console.error("Erro ao buscar usurios:",x),{data:[],nextCursor:void 0}}}async deleteUser(e){if(!ge)return;const n=Gt(wt(ge,"enrollments"),Zt("userId","==",e)),o=(await Vt(n)).docs.map(x=>({id:x.id,...x.data()})),c=Array.from(new Set(o.map(x=>x.eventId))),u=await this.getEventsByIds(c),g=new Map(u.map(x=>[x.id,x])),p=Pd(ge),y=new Map;o.forEach(x=>{if(x.status===Zn.CONFIRMED){const _=y.get(x.eventId)||g.get(x.eventId);if(_){const T=_.sessions.findIndex(C=>C.id===x.sessionId);if(T!==-1&&_.sessions[T].filled>0){const C=[..._.sessions];C[T]={...C[T],filled:Math.max(0,C[T].filled-1)},_.sessions=C,y.set(_.id,_)}}}p.delete(en(ge,"enrollments",x.id))}),y.forEach(x=>{p.update(en(ge,"events",x.id),{sessions:x.sessions})}),p.delete(en(ge,"users",e)),await p.commit()}async updateUserRole(e,n){if(!ge)return;const a=en(ge,"users",e);await Ld(a,{role:n})}async getCourses(){return ge?(await Vt(wt(ge,"courses"))).docs.map(n=>({id:n.id,...n.data()})):[]}async addCourse(e){if(!ge)throw new Error("DB not init");return{id:(await n_(wt(ge,"courses"),{name:e})).id,name:e}}async updateCourse(e,n){ge&&await Ld(en(ge,"courses",e),{name:n})}async deleteCourse(e){if(!ge)return;const n=Pd(ge),a=en(ge,"courses",e);n.delete(a);const o=Gt(wt(ge,"classes"),Zt("courseId","==",e));(await Vt(o)).forEach(x=>n.delete(x.ref));const u=Gt(wt(ge,"users"),Zt("courseId","==",e));(await Vt(u)).forEach(x=>{n.update(x.ref,{courseId:"",classId:""})});const p=Gt(wt(ge,"events"),Zt("allowedCourses","array-contains",e));(await Vt(p)).forEach(x=>{const C=(x.data().allowedCourses||[]).filter(U=>U!==e);n.update(x.ref,{allowedCourses:C})}),await n.commit()}async getClasses(e){if(!ge)return[];let n=e?Gt(wt(ge,"classes"),Zt("courseId","==",e)):wt(ge,"classes");return(await Vt(n)).docs.map(o=>({id:o.id,...o.data()}))}async addClass(e,n){if(!ge)throw new Error("DB not init");return{id:(await n_(wt(ge,"classes"),{courseId:e,name:n})).id,courseId:e,name:n}}async updateClass(e,n){ge&&await Ld(en(ge,"classes",e),{name:n})}async deleteClass(e){if(!ge)return;const n=Pd(ge);await p4(en(ge,"classes",e));const a=Gt(wt(ge,"users"),Zt("classId","==",e));(await Vt(a)).forEach(g=>{n.update(g.ref,{classId:""})});const c=Gt(wt(ge,"events"),Zt("allowedClasses","array-contains",e));(await Vt(c)).forEach(g=>{const x=(g.data().allowedClasses||[]).filter(_=>_!==e);n.update(g.ref,{allowedClasses:x})}),await n.commit()}async getEvents(e){if(!ge)return{data:[],nextCursor:void 0};const{limit:n,cursor:a,filters:o}=e,{searchTerm:c,visibility:u,course:g}=o,p=await this.getClasses(),y=500;try{const x=Gt(wt(ge,"events"),xc(Lo(),"desc"),bc(y)),_=await Vt(x);let T=_.docs.map(L=>this.mapDocToEvent(L));if(u&&(T=T.filter(L=>L.visibility===u)),g&&(u==="course"?T=T.filter(L=>{var B;return(B=L.allowedCourses)==null?void 0:B.includes(g)}):u==="class"&&(T=T.filter(L=>{var B;return((B=L.allowedClasses)==null?void 0:B.some(H=>{const K=p.find(de=>de.id===H);return(K==null?void 0:K.courseId)===g}))||!1}))),c){const L=c.toLowerCase();T=T.filter(B=>B.name.toLowerCase().includes(L)||B.description.toLowerCase().includes(L))}let C=0;if(a){const L=a.id,B=T.findIndex(H=>H.id===L);B!==-1&&(C=B+1)}const U=T.slice(C,C+n);let z;if(U.length===n&&C+n<T.length){const L=U[U.length-1];z=_.docs.find(B=>B.id===L.id)}return{data:U,nextCursor:z}}catch(x){return console.error("Erro ao buscar eventos:",x),x.code==="failed-precondition"&&alert("ndice do Firestore ausente. Verifique o console."),{data:[],nextCursor:void 0}}}async getEventById(e){if(!ge)return;const n=en(ge,"events",e),a=await e_(n);return a.exists()?this.mapDocToEvent(a):void 0}async getEventsByIds(e){if(!ge||e.length===0)return[];const n=30,a=[];for(let o=0;o<e.length;o+=n){const c=e.slice(o,o+n),u=Gt(wt(ge,"events"),Zt(Lo(),"in",c)),p=(await Vt(u)).docs.map(y=>this.mapDocToEvent(y));a.push(...p)}return a}async getEventsByParentId(e){if(!ge)return[];const n=Gt(wt(ge,"events"),Zt("parentId","==",e));return(await Vt(n)).docs.map(o=>this.mapDocToEvent(o))}async getAvailableEventsForUser(e){if(!ge)return[];const n=500;try{const a=Gt(wt(ge,"events"),xc(Lo(),"desc"),bc(n));return(await Vt(a)).docs.map(u=>this.mapDocToEvent(u)).filter(u=>{var g,p;return u.visibility==="public"?!0:u.visibility==="course"?e.courseId?(g=u.allowedCourses)==null?void 0:g.includes(e.courseId):!1:u.visibility==="class"&&e.classId?(p=u.allowedClasses)==null?void 0:p.includes(e.classId):!1})}catch(a){return console.error("Erro ao buscar eventos do usurio:",a),[]}}async getPublicEvents(){if(!ge)return[];const e=Gt(wt(ge,"events"),Zt("visibility","==","public"),xc(Lo(),"desc"),bc(10));try{return(await Vt(e)).docs.map(a=>this.mapDocToEvent(a))}catch{const a=Gt(wt(ge,"events"),xc(Lo(),"desc"),bc(50));return(await Vt(a)).docs.map(c=>this.mapDocToEvent(c)).filter(c=>c.visibility==="public").slice(0,10)}}async createEvent(e){if(!ge)return;const{id:n,...a}=e,o=JSON.parse(JSON.stringify(a));await t_(en(ge,"events",n),o)}async updateEvent(e){if(!ge)return;const{id:n,...a}=e;await Ld(en(ge,"events",n),JSON.parse(JSON.stringify(a)))}async deleteEvent(e){if(!ge)return;const n=Pd(ge),a=[e],o=Gt(wt(ge,"events"),Zt("parentId","==",e));(await Vt(o)).forEach(p=>a.push(p.id));const u=[],g=[];for(let p=0;p<a.length;p+=10)g.push(a.slice(p,p+10));for(const p of g){const y=Gt(wt(ge,"enrollments"),Zt("eventId","in",p));(await Vt(y)).forEach(_=>u.push(_.ref))}a.forEach(p=>{n.delete(en(ge,"events",p))}),u.forEach(p=>{n.delete(p)}),await n.commit()}async getEnrollmentsForUser(e){if(!ge)return[];const n=Gt(wt(ge,"enrollments"),Zt("userId","==",e),Zt("status","==",Zn.CONFIRMED));return(await Vt(n)).docs.map(o=>({id:o.id,...o.data()}))}async getUserEnrollmentsDetails(e){const n=await this.getEnrollmentsForUser(e);if(n.length===0)return[];const a=Array.from(new Set(n.map(g=>g.eventId))),o=await this.getEventsByIds(a),c=new Map(o.map(g=>[g.id,g]));return n.map(g=>{const p=c.get(g.eventId);if(!p)return null;const y=p.sessions.find(x=>x.id===g.sessionId);return y?{enrollmentId:g.id,eventName:p.name,eventLocation:p.location,sessionDate:y.date,sessionTime:`${y.startTime} - ${y.endTime}`,enrolledAt:g.enrolledAt}:null}).filter(Boolean)}async getEnrichedEnrollments(e){if(!ge)return[];const n=await this.getEventById(e);if(!n)return[];const a=Gt(wt(ge,"enrollments"),Zt("eventId","==",e),Zt("status","==",Zn.CONFIRMED)),c=(await Vt(a)).docs.map(y=>({id:y.id,...y.data()}));if(c.length===0)return[];const u=Array.from(new Set(c.map(y=>y.userId))),g=new Map,p=30;for(let y=0;y<u.length;y+=p){const x=u.slice(y,y+p),_=Gt(wt(ge,"users"),Zt(Lo(),"in",x));(await Vt(_)).forEach(C=>g.set(C.id,{uid:C.id,...C.data()}))}return c.map(y=>{const x=g.get(y.userId)||{},_=n.sessions.find(T=>T.id===y.sessionId);return{id:y.id,user:{uid:y.userId,name:x.name||"Desconhecido",email:x.email||"",rm:x.rm||""},session:{id:_==null?void 0:_.id,date:_==null?void 0:_.date,startTime:_==null?void 0:_.startTime,endTime:_==null?void 0:_.endTime},status:y.status,enrolledAt:y.enrolledAt}})}async getEnrollmentDetailsForEvent(e){return(await this.getEnrichedEnrollments(e)).map(a=>({Nome:a.user.name,Email:a.user.email,RM:a.user.rm,SessaoData:a.session.date,SessaoHora:a.session.startTime,Status:a.status,DataInscricao:new Date(a.enrolledAt).toLocaleString("pt-BR")}))}async createEnrollment(e,n,a){if(!ge)throw new Error("Banco de dados no inicializado.");const o=await this.getEnrollmentsForUser(e),c=Array.from(new Set(o.map(z=>z.eventId))),[u,g]=await Promise.all([this.getEventsByIds(c),this.getEventById(n)]);if(!g)throw new Error("Evento no encontrado.");const p=new Map(u.map(z=>[z.id,z])),y=g.sessions.find(z=>z.id===a);if(!y)throw new Error("Sesso no encontrada.");const x=Da(y.startTime),_=Da(y.endTime);for(const z of o){if(z.eventId===n)throw new Error("Voc j est inscrito neste evento.");const L=p.get(z.eventId);if(!L)continue;const B=L.sessions.find(H=>H.id===z.sessionId);if((B==null?void 0:B.date)===y.date){const H=Da(B.startTime),K=Da(B.endTime);if(x<K&&H<_)throw new Error(`CONFLICT|${L.name}|${B.startTime}|${B.endTime}`)}}const T=`${e}_${n}`,C=en(ge,"enrollments",T),U=en(ge,"events",n);return await r_(ge,async z=>{const[L,B]=await Promise.all([z.get(C),z.get(U)]);if(L.exists()&&L.data().status===Zn.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");if(!B.exists())throw new Error("Evento no existe mais.");const H=B.data(),K=H.sessions.findIndex(ye=>ye.id===a);if(K===-1)throw new Error("Sesso invlida.");if(H.sessions[K].filled>=H.sessions[K].capacity)throw new Error("Esta sesso atingiu a capacidade mxima.");const de=[...H.sessions];de[K]={...de[K],filled:de[K].filled+1},z.update(U,{sessions:de}),z.set(C,{userId:e,eventId:n,sessionId:a,status:Zn.CONFIRMED,enrolledAt:new Date().toISOString()})}),{id:T,userId:e,eventId:n,sessionId:a,status:Zn.CONFIRMED,enrolledAt:new Date().toISOString()}}async cancelEnrollment(e){if(!ge)return;const n=en(ge,"enrollments",e);await r_(ge,async a=>{const o=await a.get(n);if(!o.exists())return;const{eventId:c,sessionId:u}=o.data(),g=en(ge,"events",c),p=await a.get(g);if(p.exists()){const y=p.data(),x=y.sessions.findIndex(_=>_.id===u);if(x!==-1&&y.sessions[x].filled>0){const _=[...y.sessions];_[x]={..._[x],filled:_[x].filled-1},a.update(g,{sessions:_})}}a.delete(n)})}async resetAndSeedData(){alert("A funo de RESET est desabilitada no modo Firebase por segurana.")}}const T4=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Design Digital"},{id:"c3",name:"Administrao"}],S4=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DD-2024-A"},{id:"t4",courseId:"c3",name:"ADM-2024-A"}],pe={USERS:"eduevent_users",EVENTS:"eduevent_events",ENROLLMENTS:"eduevent_enrollments",CURRENT_USER:"eduevent_current_user",COURSES:"eduevent_courses",CLASSES:"eduevent_classes"},Qt=s=>new Promise(e=>setTimeout(e,s));class A4{constructor(){this.authListeners=[],localStorage.getItem(pe.COURSES)||localStorage.setItem(pe.COURSES,JSON.stringify(T4)),localStorage.getItem(pe.CLASSES)||localStorage.setItem(pe.CLASSES,JSON.stringify(S4))}notifyAuthListeners(e){this.authListeners.forEach(n=>n(e))}async login(e,n){await Qt(500);let o=this.getItems(pe.USERS).find(c=>c.email===e);return o||(o={uid:`user_${Date.now()}`,email:e,role:e.includes("admin")?it.ADMIN:it.USER,isOnboarded:!1},this.saveItem(pe.USERS,o)),localStorage.setItem(pe.CURRENT_USER,JSON.stringify(o)),this.notifyAuthListeners(o),o}async loginWithGoogle(){await Qt(800);const e="google.mock@example.com";let a=this.getItems(pe.USERS).find(o=>o.email===e);a||(a={uid:`user_google_${Date.now()}`,email:e,name:"Google Mock User",role:it.USER,isOnboarded:!1},this.saveItem(pe.USERS,a)),localStorage.setItem(pe.CURRENT_USER,JSON.stringify(a)),this.notifyAuthListeners(a)}async logout(){localStorage.removeItem(pe.CURRENT_USER),this.notifyAuthListeners(null)}onAuthStateChanged(e){this.authListeners.push(e);const n=localStorage.getItem(pe.CURRENT_USER),a=n?JSON.parse(n):null;return e(a),()=>{this.authListeners=this.authListeners.filter(o=>o!==e)}}async updateUserProfile(e,n){await Qt(600);const a=this.getItems(pe.USERS),o=a.findIndex(p=>p.uid===e);if(o===-1)throw new Error("Usurio no encontrado");if(n.rm&&a.some(y=>y.rm===n.rm&&y.uid!==e))throw new Error("Este RM j est cadastrado para outro usurio.");const c={...a[o],...n,isOnboarded:!0};a[o]=c,localStorage.setItem(pe.USERS,JSON.stringify(a));const u=localStorage.getItem(pe.CURRENT_USER),g=u?JSON.parse(u):null;return g&&g.uid===e&&(localStorage.setItem(pe.CURRENT_USER,JSON.stringify(c)),this.notifyAuthListeners(c)),c}async getUserProfile(e){return await Qt(100),this.getItems(pe.USERS).find(o=>o.uid===e)||null}async getUsers(e){await Qt(500);const n=this.getItems(pe.USERS),{searchTerm:a,role:o,courseId:c,classId:u}=e.filters,g=n.filter(_=>{var L,B;const T=a?((L=_.name)==null?void 0:L.toLowerCase().includes(a.toLowerCase()))||_.email.toLowerCase().includes(a.toLowerCase())||((B=_.rm)==null?void 0:B.includes(a)):!0,C=o?_.role===o:!0,U=c?_.courseId===c:!0,z=u?_.classId===u:!0;return T&&C&&U&&z}),p=e.cursor||0,y=g.slice(p,p+e.limit),x=p+y.length;return{data:y,nextCursor:x<g.length?x:void 0}}async deleteUser(e){await Qt(500);let n=this.getItems(pe.USERS);n=n.filter(a=>a.uid!==e),localStorage.setItem(pe.USERS,JSON.stringify(n))}async updateUserRole(e,n){await Qt(300);const a=this.getItems(pe.USERS),o=a.findIndex(c=>c.uid===e);o!==-1&&(a[o].role=n,localStorage.setItem(pe.USERS,JSON.stringify(a)))}async getCourses(){return this.getItems(pe.COURSES)}async addCourse(e){const n=this.getItems(pe.COURSES),a={id:`c_${Date.now()}`,name:e};return n.push(a),localStorage.setItem(pe.COURSES,JSON.stringify(n)),a}async updateCourse(e,n){const a=this.getItems(pe.COURSES),o=a.findIndex(c=>c.id===e);o!==-1&&(a[o].name=n,localStorage.setItem(pe.COURSES,JSON.stringify(a)))}async deleteCourse(e){let n=this.getItems(pe.COURSES);n=n.filter(o=>o.id!==e),localStorage.setItem(pe.COURSES,JSON.stringify(n));let a=this.getItems(pe.CLASSES);a=a.filter(o=>o.courseId!==e),localStorage.setItem(pe.CLASSES,JSON.stringify(a))}async getClasses(e){const n=this.getItems(pe.CLASSES);return e?n.filter(a=>a.courseId===e):n}async addClass(e,n){const a=this.getItems(pe.CLASSES),o={id:`t_${Date.now()}`,courseId:e,name:n};return a.push(o),localStorage.setItem(pe.CLASSES,JSON.stringify(a)),o}async updateClass(e,n){const a=this.getItems(pe.CLASSES),o=a.findIndex(c=>c.id===e);o!==-1&&(a[o].name=n,localStorage.setItem(pe.CLASSES,JSON.stringify(a)))}async deleteClass(e){let n=this.getItems(pe.CLASSES);n=n.filter(a=>a.id!==e),localStorage.setItem(pe.CLASSES,JSON.stringify(n))}async getEvents(e){await Qt(400);const n=this.getItems(pe.EVENTS),{searchTerm:a,visibility:o,course:c}=e.filters,u=this.getItems(pe.CLASSES),g=n.filter(_=>{var z,L;const T=a?_.name.toLowerCase().includes(a.toLowerCase())||_.description.toLowerCase().includes(a.toLowerCase()):!0,C=o?_.visibility===o:!0;let U=!0;return c&&(_.visibility==="public"?U=!1:_.visibility==="course"?U=((z=_.allowedCourses)==null?void 0:z.includes(c))||!1:_.visibility==="class"&&(U=((L=_.allowedClasses)==null?void 0:L.some(B=>{const H=u.find(K=>K.id===B);return(H==null?void 0:H.courseId)===c}))||!1)),T&&C&&U}),p=e.cursor||0,y=g.slice(p,p+e.limit),x=p+y.length;return{data:y,nextCursor:x<g.length?x:void 0}}async getEventById(e){return await Qt(200),this.getItems(pe.EVENTS).find(a=>a.id===e)}async getEventsByIds(e){return await Qt(200),this.getItems(pe.EVENTS).filter(a=>e.includes(a.id))}async getEventsByParentId(e){return await Qt(200),this.getItems(pe.EVENTS).filter(a=>a.parentId===e)}async getAvailableEventsForUser(e){return await Qt(400),this.getItems(pe.EVENTS).filter(a=>{var o,c;return a.visibility==="public"?!0:a.visibility==="course"?e.courseId?(o=a.allowedCourses)==null?void 0:o.includes(e.courseId):!1:a.visibility==="class"&&e.classId?(c=a.allowedClasses)==null?void 0:c.includes(e.classId):!1})}async getPublicEvents(){return await Qt(400),this.getItems(pe.EVENTS).filter(n=>n.visibility==="public")}async createEvent(e){await Qt(600);const n=this.getItems(pe.EVENTS);n.push(e),localStorage.setItem(pe.EVENTS,JSON.stringify(n))}async updateEvent(e){await Qt(500);const n=this.getItems(pe.EVENTS),a=n.findIndex(o=>o.id===e.id);if(a!==-1)n[a]=e,localStorage.setItem(pe.EVENTS,JSON.stringify(n));else throw new Error("Evento no encontrado para atualizao")}async deleteEvent(e){await Qt(400);let n=this.getItems(pe.EVENTS);const a=n.filter(c=>c.id===e||c.parentId===e).map(c=>c.id);n=n.filter(c=>!a.includes(c.id)),localStorage.setItem(pe.EVENTS,JSON.stringify(n));let o=this.getItems(pe.ENROLLMENTS);o=o.filter(c=>!a.includes(c.eventId)),localStorage.setItem(pe.ENROLLMENTS,JSON.stringify(o))}async getEnrollmentsForUser(e){return await Qt(300),this.getItems(pe.ENROLLMENTS).filter(a=>a.userId===e&&a.status!==Zn.CANCELED)}async getUserEnrollmentsDetails(e){const n=this.getItems(pe.ENROLLMENTS).filter(o=>o.userId===e&&o.status===Zn.CONFIRMED),a=this.getItems(pe.EVENTS);return n.map(o=>{const c=a.find(g=>g.id===o.eventId),u=c==null?void 0:c.sessions.find(g=>g.id===o.sessionId);return!c||!u?null:{enrollmentId:o.id,eventName:c.name,eventLocation:c.location,sessionDate:u.date,sessionTime:`${u.startTime} - ${u.endTime}`,enrolledAt:o.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(e){const n=this.getItems(pe.ENROLLMENTS).filter(c=>c.eventId===e&&c.status===Zn.CONFIRMED),a=this.getItems(pe.USERS),o=this.getItems(pe.EVENTS).find(c=>c.id===e);return n.map(c=>{const u=a.find(p=>p.uid===c.userId),g=o==null?void 0:o.sessions.find(p=>p.id===c.sessionId);return{id:c.id,user:{uid:u==null?void 0:u.uid,name:(u==null?void 0:u.name)||"Desconhecido",email:(u==null?void 0:u.email)||"",rm:(u==null?void 0:u.rm)||""},session:{id:g==null?void 0:g.id,date:g==null?void 0:g.date,startTime:g==null?void 0:g.startTime,endTime:g==null?void 0:g.endTime},status:c.status,enrolledAt:c.enrolledAt}})}async getEnrollmentDetailsForEvent(e){const n=this.getItems(pe.ENROLLMENTS).filter(c=>c.eventId===e&&c.status===Zn.CONFIRMED),a=this.getItems(pe.USERS),o=this.getItems(pe.EVENTS).find(c=>c.id===e);return n.map(c=>{const u=a.find(p=>p.uid===c.userId),g=o==null?void 0:o.sessions.find(p=>p.id===c.sessionId);return{Nome:(u==null?void 0:u.name)||"Desconhecido",Email:(u==null?void 0:u.email)||"",RM:(u==null?void 0:u.rm)||"",SessaoData:cn(g==null?void 0:g.date),SessaoHora:(g==null?void 0:g.startTime)||"",Status:c.status,DataInscricao:new Date(c.enrolledAt).toLocaleString("pt-BR")}})}async createEnrollment(e,n,a){await Qt(800);const o=this.getItems(pe.EVENTS),c=o.findIndex(H=>H.id===n);if(c===-1)throw new Error("Evento no encontrado");const u=o[c].sessions.findIndex(H=>H.id===a);if(u===-1)throw new Error("Sesso no encontrada");const g=o[c].sessions[u];if(g.filled>=g.capacity)throw new Error("A sesso est lotada");const p=this.getItems(pe.ENROLLMENTS);if(p.find(H=>H.userId===e&&H.eventId===n&&H.status===Zn.CONFIRMED))throw new Error("Voc j est inscrito neste evento");const x=await this.getEnrollmentsForUser(e),_=[...new Set(x.map(H=>H.eventId))],T=await this.getEventsByIds(_),C=new Map(T.map(H=>[H.id,H])),U=g.date,z=Da(g.startTime),L=Da(g.endTime);for(const H of x){const K=C.get(H.eventId);if(!K)continue;const de=K.sessions.find(ye=>ye.id===H.sessionId);if(de&&de.date===U){const ye=Da(de.startTime),be=Da(de.endTime);if(z<be&&ye<L)throw new Error(`CONFLICT|${K.name}|${de.startTime}|${de.endTime}`)}}const B={id:`enr_${Date.now()}`,userId:e,eventId:n,sessionId:a,status:Zn.CONFIRMED,enrolledAt:new Date().toISOString()};return p.push(B),localStorage.setItem(pe.ENROLLMENTS,JSON.stringify(p)),o[c].sessions[u].filled+=1,localStorage.setItem(pe.EVENTS,JSON.stringify(o)),B}async cancelEnrollment(e){await Qt(500);const n=this.getItems(pe.ENROLLMENTS),a=n.findIndex(g=>g.id===e);if(a===-1)throw new Error("Inscrio no encontrada");const o=n[a],c=this.getItems(pe.EVENTS),u=c.findIndex(g=>g.id===o.eventId);if(u!==-1){const g=c[u].sessions.findIndex(p=>p.id===o.sessionId);g!==-1&&(c[u].sessions[g].filled=Math.max(0,c[u].sessions[g].filled-1),localStorage.setItem(pe.EVENTS,JSON.stringify(c)))}n.splice(a,1),localStorage.setItem(pe.ENROLLMENTS,JSON.stringify(n))}async resetAndSeedData(){localStorage.clear(),await Qt(500);const e=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Direito"},{id:"c3",name:"Medicina"},{id:"c4",name:"Design"}];localStorage.setItem(pe.COURSES,JSON.stringify(e));const n=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DIR-2024-A"},{id:"t4",courseId:"c3",name:"MED-2024-A"},{id:"t5",courseId:"c4",name:"DSG-2024-A"}];localStorage.setItem(pe.CLASSES,JSON.stringify(n));const a=[{uid:"u_admin",email:"admin@school.com",name:"Administrador Sistema",role:it.ADMIN,isOnboarded:!0},{uid:"u_student1",email:"aluno.cc@school.com",name:"Joo da Silva",rm:"10001",courseId:"c1",classId:"t1",role:it.USER,isOnboarded:!0},{uid:"u_student2",email:"aluno.dir@school.com",name:"Maria Souza",rm:"20002",courseId:"c2",classId:"t3",role:it.USER,isOnboarded:!0},{uid:"u_student3",email:"aluno.med@school.com",name:"Pedro Santos",rm:"30003",courseId:"c3",classId:"t4",role:it.USER,isOnboarded:!0}];localStorage.setItem(pe.USERS,JSON.stringify(a));const o=new Date,c=y=>y.toISOString().split("T")[0],u=new Date(o);u.setDate(o.getDate()+7);const g=new Date(o);g.setDate(o.getDate()+30);const p=[{id:"evt_1",name:"Feira de Profisses 2024",description:"Evento aberto a toda a comunidade para conhecer os cursos.",location:"Ginsio Principal",visibility:"public",sessions:[{id:"s1",date:c(u),startTime:"09:00",endTime:"17:00",capacity:500,filled:45}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_2",name:"Hackathon de Inovao",description:"Maratona de programao exclusiva para alunos de Computao.",location:"Laboratrio 3",visibility:"course",allowedCourses:["c1"],sessions:[{id:"s2",date:c(u),startTime:"18:00",endTime:"22:00",capacity:50,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_3",name:"Aula Magna de Anatomia",description:"Aula especial com convidados internacionais.",location:"Auditrio B",visibility:"class",allowedClasses:["t4"],sessions:[{id:"s3",date:c(g),startTime:"14:00",endTime:"16:00",capacity:100,filled:10}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_parent_1",name:"Semana Acadmica Integrada",description:"Uma semana de eventos para todos os cursos.",location:"Campus Central",visibility:"public",sessions:[{id:"s_p1",date:c(u),startTime:"08:00",endTime:"10:00",capacity:200,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_child_1",parentId:"evt_parent_1",name:"Workshop de IA (Sub-evento)",description:"Introduo a Redes Neurais.",location:"Sala 101",visibility:"public",sessions:[{id:"s_c1",date:c(u),startTime:"10:30",endTime:"12:00",capacity:30,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_child_2",parentId:"evt_parent_1",name:"Palestra: Direito Digital (Sub-evento)",description:"Impactos da tecnologia na legislao.",location:"Auditrio A",visibility:"public",sessions:[{id:"s_c2",date:c(u),startTime:"14:00",endTime:"16:00",capacity:100,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()}];localStorage.setItem(pe.EVENTS,JSON.stringify(p))}getItems(e){const n=localStorage.getItem(e);return n?JSON.parse(n):[]}saveItem(e,n){const a=this.getItems(e);a.push(n),localStorage.setItem(e,JSON.stringify(a))}}const N4=()=>ji.useFirebase?new w4:new A4,Me=N4(),Fw=I.createContext(void 0),C4=({children:s})=>{const[e,n]=I.useState(null),[a,o]=I.useState(!0);I.useEffect(()=>{const y=Me.onAuthStateChanged(x=>{n(x),o(!1)});return()=>y()},[]);const c=async(y,x)=>{o(!0);try{await Me.login(y,x)}catch(_){throw console.error(_),o(!1),_}},u=async()=>{o(!0);try{await Me.loginWithGoogle()}catch(y){throw console.error(y),o(!1),y}},g=async()=>{o(!0),await Me.logout()},p=async()=>{if(e){o(!0);try{const y=await Me.getUserProfile(e.uid);n(y)}catch(y){console.error("Falha ao atualizar o perfil",y)}finally{o(!1)}}};return h.jsx(Fw.Provider,{value:{user:e,loading:a,login:c,loginWithGoogle:u,logout:g,refreshProfile:p},children:s})},Gs=()=>{const s=I.useContext(Fw);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Gw=I.createContext(void 0),I4=({children:s})=>{const[e,n]=I.useState([]),a=I.useCallback(c=>{n(u=>u.filter(g=>g.id!==c))},[]),o=I.useCallback((c,u)=>{const g=Math.random().toString(36).substr(2,9);n(p=>[...p,{id:g,type:c,message:u}]),setTimeout(()=>{a(g)},4e3)},[a]);return h.jsxs(Gw.Provider,{value:{addToast:o,removeToast:a},children:[s,h.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(c=>h.jsxs("div",{className:`pointer-events-auto transform transition-all duration-300 ease-in-out translate-y-0 opacity-100 min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border-l-4 flex items-start justify-between bg-white dark:bg-darkcard dark:border-gray-600
              ${c.type==="success"?"border-green-500":""}
              ${c.type==="error"?"border-red-500":""}
              ${c.type==="warning"?"border-amber-500":""}
              ${c.type==="info"?"border-blue-500":""}
            `,children:[h.jsxs("div",{className:"flex items-center",children:[h.jsxs("span",{className:"text-xl mr-3",children:[c.type==="success"&&"",c.type==="error"&&"",c.type==="warning"&&"",c.type==="info"&&""]}),h.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:c.message})]}),h.jsx("button",{onClick:()=>a(c.id),className:"ml-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 focus:outline-none",children:""})]},c.id))})]})},Qs=()=>{const s=I.useContext(Gw);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},Qw=I.createContext(void 0),R4=({children:s})=>{const[e,n]=I.useState(()=>{const o=localStorage.getItem("eduevent_theme");return o==="dark"||o==="light"?o:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});I.useEffect(()=>{const o=window.document.documentElement;e==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("eduevent_theme",e)},[e]);const a=()=>{n(o=>o==="light"?"dark":"light")};return h.jsx(Qw.Provider,{value:{theme:e,toggleTheme:a},children:s})},k4=()=>{const s=I.useContext(Qw);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},Ia=({children:s})=>{const{user:e,logout:n}=Gs(),{theme:a,toggleTheme:o}=k4(),c=Ya(),u=qs(),[g,p]=I.useState(!1),y=async()=>{await n(),c("/")},x=T=>u.pathname===T?"bg-indigo-50 border-primary text-primary dark:bg-indigo-900/50 dark:text-indigo-200":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200",_=T=>u.pathname===T?"border-primary text-gray-900 dark:text-white dark:border-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200";return e?h.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-darkbg transition-colors duration-200",children:[h.jsxs("nav",{className:"bg-white dark:bg-darkcard shadow-sm sticky top-0 z-50 transition-colors duration-200",children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between h-16",children:[h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0 flex items-center",children:h.jsx(xt,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight dark:text-indigo-400",children:"EduEvent"})}),h.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[h.jsx(xt,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/dashboard")}`,children:"Eventos"}),h.jsx(xt,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===it.ADMIN&&h.jsxs(h.Fragment,{children:[h.jsx(xt,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/admin/events")}`,children:"Admin Eventos"}),h.jsx(xt,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/admin/courses")}`,children:"Admin Cursos"}),h.jsx(xt,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/admin/users")}`,children:"Admin Usurios"}),h.jsx(xt,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 dark:text-amber-400 ${_("/admin/dev")}`,children:"Desenvolvimento"})]})]})]}),h.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[h.jsx("button",{onClick:o,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",title:a==="dark"?"Mudar para modo claro":"Mudar para modo escuro",children:a==="dark"?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),h.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:e.name||e.email}),h.jsx("button",{onClick:y,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none transition-colors",children:"Sair"})]})]}),h.jsxs("div",{className:"-mr-2 flex items-center sm:hidden gap-2",children:[h.jsx("button",{onClick:o,className:"p-3 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",children:a==="dark"?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),h.jsxs("button",{onClick:()=>p(!g),type:"button",className:"bg-white dark:bg-gray-800 inline-flex items-center justify-center p-3 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[h.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),g?h.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):h.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]})]})}),g&&h.jsxs("div",{className:"sm:hidden border-t border-gray-200 dark:border-gray-700",id:"mobile-menu",children:[h.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[h.jsx(xt,{to:"/dashboard",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/dashboard")}`,children:"Eventos"}),h.jsx(xt,{to:"/my-enrollments",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===it.ADMIN&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"pt-4 pb-2",children:h.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),h.jsx(xt,{to:"/admin/events",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/admin/events")}`,children:"Gerenciar Eventos"}),h.jsx(xt,{to:"/admin/courses",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/admin/courses")}`,children:"Gerenciar Cursos"}),h.jsx(xt,{to:"/admin/users",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/admin/users")}`,children:"Gerenciar Usurios"}),h.jsx(xt,{to:"/admin/dev",onClick:()=>p(!1),className:"block pl-3 pr-4 py-3 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-700 dark:text-amber-500",children:"Desenvolvimento"})]})]}),h.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center px-4",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-200 font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),h.jsxs("div",{className:"ml-3",children:[h.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:e.name||"Usurio"}),h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e.email})]})]}),h.jsx("div",{className:"mt-3 space-y-1",children:h.jsx("button",{onClick:y,className:"block w-full text-left px-4 py-3 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700",children:"Sair do Sistema"})})]})]})]}),h.jsx("main",{className:"flex-1 py-6",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s})})]}):h.jsx(h.Fragment,{children:s})},Gi=({children:s,isLoading:e=!1,variant:n="primary",className:a="",disabled:o,...c})=>{const u="relative inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",g={primary:"border-transparent text-white bg-primary hover:bg-indigo-700 focus:ring-primary",secondary:"border-transparent text-white bg-secondary hover:bg-emerald-700 focus:ring-secondary",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500",outline:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary"};return h.jsxs("button",{disabled:e||o,className:`${u} ${g[n]} ${a}`,...c,children:[h.jsx("span",{className:e?"invisible":"",children:s}),e&&h.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:h.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})},sl=s=>{const e=(s==null?void 0:s.code)||"",n=(s==null?void 0:s.message)||"";if(typeof n=="string"&&n.startsWith("CONFLICT|")){const a=n.split("|");return a.length>=4?`Conflito de horrio! Voc j possui o evento "${a[1]}" agendado entre ${a[2]} e ${a[3]}.`:"Conflito de horrio com outro evento j agendado."}if(n==="A sesso est lotada"||n.includes("capacidade mxima"))return"Que pena! Esta sesso acabou de lotar.";if(n.includes("j est inscrito"))return"Voc j garantiu sua vaga neste evento!";if(n.includes("Evento no encontrado"))return"O evento que voc procura no est mais disponvel.";switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos. Verifique e tente novamente.";case"auth/email-already-in-use":return"Este e-mail j est sendo usado por outra conta.";case"auth/weak-password":return"Sua senha  muito fraca. Escolha uma senha mais forte.";case"auth/invalid-email":return"O formato do e-mail  invlido.";case"auth/user-disabled":return"Esta conta foi desativada. Contate o administrador.";case"auth/too-many-requests":return"Muitas tentativas consecutivas. Aguarde alguns instantes.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/popup-closed-by-user":return"O login foi cancelado.";case"permission-denied":return"Voc no tem permisso para realizar esta ao.";default:return n||"Ocorreu um erro inesperado. Tente novamente mais tarde."}},Fo=({label:s,error:e,helperText:n,as:a="input",className:o="",children:c,...u})=>{const g=`
    appearance-none 
    block 
    w-full 
    px-4 
    py-3 
    text-base 
    rounded-lg 
    border 
    bg-white dark:bg-gray-800 
    text-gray-900 dark:text-white 
    placeholder-gray-400 
    focus:outline-none 
    focus:ring-2 
    focus:ring-offset-0
    transition-shadow 
    duration-200
  `,p=e?"border-red-300 focus:border-red-500 focus:ring-red-200 dark:border-red-800 dark:focus:ring-red-900/30":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-indigo-100 dark:focus:ring-indigo-900/30";return h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:u.id,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 ml-1",children:s}),h.jsx("div",{className:"relative",children:a==="select"?h.jsx("select",{className:`${g} ${p} ${o} pr-10`,...u,children:c}):h.jsx("input",{className:`${g} ${p} ${o}`,...u})}),e?h.jsxs("p",{className:"mt-1.5 text-sm text-red-600 dark:text-red-400 flex items-center animate-fade-in ml-1",children:[h.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]}):n?h.jsx("p",{className:"mt-1.5 text-sm text-gray-500 dark:text-gray-400 ml-1",children:n}):null]})},j4=()=>{const[s,e]=I.useState(""),[n,a]=I.useState(""),{user:o,loading:c,login:u,loginWithGoogle:g}=Gs(),p=Ya(),{addToast:y}=Qs(),[x,_]=I.useState(!1);I.useEffect(()=>{!c&&o&&p("/dashboard")},[o,c,p]);const T=async U=>{U.preventDefault(),_(!0);try{await u(s,n),y("success","Login realizado com sucesso!")}catch(z){const L=sl(z);y("error",L)}finally{_(!1)}},C=async()=>{_(!0);try{await g(),y("success","Autenticado com Google!")}catch(U){const z=sl(U);y("error",z),_(!1)}};return c||!c&&o?h.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-primary font-medium",children:"Verificando sesso..."}):h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:h.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[h.jsx("div",{className:"flex justify-start",children:h.jsxs(xt,{to:"/",className:"flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors font-medium p-2 -ml-2 rounded-lg active:bg-gray-100 dark:active:bg-gray-800",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-bold text-primary dark:text-indigo-400",children:"EduEvent"}),h.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Acesse sua conta"}),h.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:ji.useFirebase?"Gerencie suas inscries e eventos em um s lugar.":"Ambiente de Demonstrao (Mock)"})]}),h.jsxs("form",{className:"mt-8 space-y-2",onSubmit:T,children:[h.jsx(Fo,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,label:"E-mail",placeholder:"seu@email.com",value:s,onChange:U=>e(U.target.value),inputMode:"email"}),h.jsx(Fo,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:ji.useFirebase,label:"Senha",placeholder:"",value:n,onChange:U=>a(U.target.value),enterKeyHint:"go"}),h.jsx("div",{className:"pt-4",children:h.jsx(Gi,{type:"submit",isLoading:x,className:"w-full h-12 text-base shadow-lg shadow-indigo-200 dark:shadow-none",children:"Acessar Plataforma"})}),h.jsxs("div",{className:"relative my-6",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-gray-50 dark:bg-darkbg text-gray-500 dark:text-gray-400",children:"Ou entre rapidamente com"})})]}),h.jsxs("button",{type:"button",onClick:C,disabled:x,className:"w-full h-12 flex items-center justify-center px-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70 transition-colors active:scale-[0.98]",children:[h.jsxs("svg",{className:"h-5 w-5 mr-3","aria-hidden":"true",viewBox:"0 0 24 24",children:[h.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),h.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),h.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),h.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),!ji.useFirebase&&h.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 p-4 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[h.jsx("p",{className:"font-bold mb-2",children:"Ambiente de Teste (Mock):"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{onClick:()=>e("student@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" student@school.com"}),h.jsx("li",{onClick:()=>e("admin@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" admin@school.com"})]})]})]})})},D4=()=>{const{user:s,refreshProfile:e}=Gs(),n=Ya(),{addToast:a}=Qs(),[o,c]=I.useState([]),[u,g]=I.useState([]),[p,y]=I.useState(!1),[x,_]=I.useState({name:(s==null?void 0:s.name)||"",rm:"",courseId:"",classId:""});I.useEffect(()=>{if(s!=null&&s.isOnboarded){n("/dashboard");return}Me.getCourses().then(c)},[s,n]),I.useEffect(()=>{x.courseId&&(Me.getClasses(x.courseId).then(g),_(C=>({...C,classId:""})))},[x.courseId]);const T=async C=>{if(C.preventDefault(),!!s){y(!0);try{const U={...x,email:s.email,role:s.role};await Me.updateUserProfile(s.uid,U),await e(),a("success","Perfil completado com sucesso! Bem-vindo."),n("/dashboard")}catch(U){const z=sl(U);a("error",z)}finally{y(!1)}}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Complete seu perfil"}),h.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Precisamos de mais alguns detalhes antes de comear."})]}),h.jsxs("form",{className:"mt-8 space-y-4",onSubmit:T,children:[h.jsx(Fo,{id:"name",name:"name",type:"text",required:!0,label:"Nome Completo",placeholder:"Ex: Joo da Silva",value:x.name,onChange:C=>_({...x,name:C.target.value}),autoComplete:"name"}),h.jsx(Fo,{id:"rm",name:"rm",type:"text",required:!0,label:"Registro de Matrcula (RM)",placeholder:"Ex: 12345",value:x.rm,onChange:C=>_({...x,rm:C.target.value}),inputMode:"numeric"}),h.jsxs(Fo,{as:"select",label:"Curso",required:!0,value:x.courseId,onChange:C=>_({...x,courseId:C.target.value}),children:[h.jsx("option",{value:"",children:"Selecione o Curso"}),o.map(C=>h.jsx("option",{value:C.id,children:C.name},C.id))]}),h.jsxs(Fo,{as:"select",label:"Turma",required:!0,disabled:!x.courseId,value:x.classId,onChange:C=>_({...x,classId:C.target.value}),className:"disabled:opacity-50",children:[h.jsx("option",{value:"",children:"Selecione a Turma"}),u.map(C=>h.jsx("option",{value:C.id,children:C.name},C.id))]}),h.jsx("div",{className:"pt-4",children:h.jsx(Gi,{type:"submit",isLoading:p,className:"w-full h-12 text-base shadow-lg",children:"Concluir Cadastro"})})]})]})})},O4=(s,e={})=>{const[n,a]=I.useState(null),[o,c]=I.useState(null),u=e.minSwipeDistance||50;return{onTouchStart:x=>{c(null),a({x:x.targetTouches[0].clientX,y:x.targetTouches[0].clientY})},onTouchMove:x=>{c({x:x.targetTouches[0].clientX,y:x.targetTouches[0].clientY})},onTouchEnd:()=>{if(!n||!o)return;const x=n.x-o.x,_=n.y-o.y;if(Math.abs(x)>Math.abs(_)){if(Math.abs(x)<u)return;x>0?s.onSwipeLeft&&s.onSwipeLeft():s.onSwipeRight&&s.onSwipeRight()}else{if(Math.abs(_)<u)return;_>0?s.onSwipeUp&&s.onSwipeUp():s.onSwipeDown&&s.onSwipeDown()}}}},Pi=({isOpen:s,onClose:e,title:n,children:a})=>{const o=I.useRef(null),c=I.useRef(null),u=O4({onSwipeDown:e});return I.useEffect(()=>(s?(c.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{o.current&&o.current.focus()},50)):(document.body.style.overflow="unset",c.current&&c.current.focus()),()=>{document.body.style.overflow="unset"}),[s]),I.useEffect(()=>{const g=p=>{p.key==="Escape"&&e()};return s&&window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}},[s,e]),s?h.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto sm:overflow-y-visible","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:h.jsxs("div",{className:"flex items-end justify-center min-h-screen sm:min-h-full sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[h.jsx("div",{className:"fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-80 transition-opacity animate-fade-in","aria-hidden":"true",onClick:e}),h.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),h.jsxs("div",{ref:o,tabIndex:-1,className:`
              inline-block align-bottom bg-white dark:bg-darkcard 
              rounded-t-2xl sm:rounded-lg 
              text-left overflow-hidden shadow-xl 
              transform transition-all 
              w-full sm:my-8 sm:align-middle sm:max-w-lg 
              animate-slide-in outline-none
              absolute bottom-0 sm:relative
              max-h-[90vh] sm:max-h-none flex flex-col
            `,...u,children:[h.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1",onClick:e,children:h.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),h.jsx("div",{className:"bg-white dark:bg-darkcard px-4 pt-2 pb-4 sm:p-6 sm:pb-4 flex-1 overflow-y-auto",children:h.jsx("div",{className:"sm:flex sm:items-start",children:h.jsxs("div",{className:"mt-2 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[h.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:n}),h.jsx("div",{className:"mt-4 text-gray-600 dark:text-gray-300",children:a})]})})}),h.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-4 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-100 dark:border-gray-700",children:h.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm sm:py-2 transition-colors active:scale-[0.98]",onClick:e,children:"Fechar"})})]})]})}):null},M4=({currentPage:s,totalItems:e,itemsPerPage:n,onPageChange:a})=>{const o=Math.ceil(e/n);if(o<=1)return null;const c=()=>{const u=[];if(o<=7)for(let g=1;g<=o;g++)u.push(g);else s<=4?u.push(1,2,3,4,5,"...",o):s>=o-3?u.push(1,"...",o-4,o-3,o-2,o-1,o):u.push(1,"...",s-1,s,s+1,"...",o);return u};return h.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[h.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[h.jsx("button",{onClick:()=>a(Math.max(1,s-1)),disabled:s===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),h.jsx("button",{onClick:()=>a(Math.min(o,s+1)),disabled:s===o,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),h.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[h.jsx("div",{children:h.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",h.jsx("span",{className:"font-medium",children:(s-1)*n+1})," a ",h.jsx("span",{className:"font-medium",children:Math.min(s*n,e)})," de ",h.jsx("span",{className:"font-medium",children:e})," resultados"]})}),h.jsx("div",{children:h.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[h.jsxs("button",{onClick:()=>a(Math.max(1,s-1)),disabled:s===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[h.jsx("span",{className:"sr-only",children:"Anterior"}),h.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),c().map((u,g)=>typeof u=="number"?h.jsx("button",{onClick:()=>a(u),"aria-current":s===u?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${s===u?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:u},g):h.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},g)),h.jsxs("button",{onClick:()=>a(Math.min(o,s+1)),disabled:s===o,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[h.jsx("span",{className:"sr-only",children:"Prximo"}),h.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},$w=(s,e)=>{const[n,a]=I.useState(null),[o,c]=I.useState(!1),{addToast:u}=Qs(),g=I.useCallback(()=>{a(null)},[]),p=I.useCallback(async(x,_)=>{if(s){g(),c(!0);try{await Me.createEnrollment(s.uid,x.id,_),u("success",`Inscrio confirmada em ${x.name}!`),setTimeout(()=>e(),500)}catch(T){const C=T.message||"";if(C.startsWith("CONFLICT|")){const[U,z,L,B]=C.split("|");a({name:z,time:`${L} - ${B}`}),u("warning","Conflito de horrio detectado.")}else{const U=sl(T);u("error",U)}}finally{c(!1)}}},[s,e,g,u]),y=I.useCallback(async x=>{if(s){c(!0);try{await Me.cancelEnrollment(x),u("success","Inscrio cancelada com sucesso."),setTimeout(()=>e(),500)}catch(_){u("error","Erro ao cancelar inscrio."),console.error(_)}finally{c(!1)}}},[s,e,u]);return{handleEnroll:p,handleCancel:y,isProcessing:o,isEnrolling:o,conflictData:n,clearState:g}};function zp(s,e=300){const[n,a]=I.useState(s);return I.useEffect(()=>{const o=setTimeout(()=>{a(s)},e);return()=>{clearTimeout(o)}},[s,e]),n}const Kw=()=>h.jsx("li",{className:"px-6 py-4 animate-pulse",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex-1 space-y-2",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/5"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/5"})]}),h.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})}),V4=()=>h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col h-full animate-pulse",children:[h.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-1/3"})]}),h.jsx("div",{className:"h-5 bg-gray-200 rounded w-4/5 mb-2"}),h.jsxs("div",{className:"space-y-2 flex-1",children:[h.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),h.jsxs("div",{className:"mt-4 space-y-2",children:[h.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})})]}),h.jsx("div",{className:"w-full h-12 bg-gray-100 border-t border-gray-200"})]}),L4=()=>h.jsxs("tr",{className:"animate-pulse",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),h.jsxs("div",{className:"ml-4 space-y-2",children:[h.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-y-2",children:[h.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:h.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 inline-block"})})]}),P4=()=>h.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3 animate-pulse",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]}),h.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-b border-gray-100 py-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),h.jsx("div",{className:"flex justify-end pt-1",children:h.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"})})]}),al=({icon:s,title:e,description:n,action:a})=>h.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center bg-white rounded-lg border-2 border-dashed border-gray-200",children:[h.jsx("div",{className:"text-5xl text-gray-300 mb-4",children:s||""}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),h.jsx("p",{className:"text-sm text-gray-500 max-w-sm mb-6",children:n}),a&&h.jsx("button",{onClick:a.onClick,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary bg-indigo-50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:a.label})]}),ei=({isOpen:s,onClose:e,onConfirm:n,title:a,message:o,confirmText:c="Confirmar",cancelText:u="Cancelar",isProcessing:g=!1,variant:p="danger"})=>h.jsx(Pi,{isOpen:s,onClose:()=>!g&&e(),title:a,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"text-gray-700",children:o}),h.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[h.jsx("button",{onClick:e,disabled:g,className:"px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 text-gray-800 text-sm font-medium disabled:opacity-50",children:u}),h.jsx(Gi,{onClick:n,isLoading:g,variant:p,children:c})]})]})}),U4=Fc.memo(({event:s,hasChildren:e,onAction:n})=>{const a=!e&&s.sessions.length===1?s.sessions[0]:null,o=a?a.capacity:0,c=a?a.filled:0,u=o>0?c/o*100:0,g=o>0&&c>=o;let p="bg-indigo-500",y="Pblico";return s.visibility==="course"&&(p="bg-emerald-500",y="Meu Curso"),s.visibility==="class"&&(p="bg-purple-500",y="Minha Turma"),h.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col h-full relative animate-fade-in hover:-translate-y-1",children:[h.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${p} opacity-80`}),h.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${p} bg-opacity-10 dark:bg-opacity-20 text-gray-700 dark:text-gray-200`,children:y}),e?h.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full font-medium border border-gray-200 dark:border-gray-600",children:"Evento Principal"}):g&&a?h.jsxs("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Esgotado"]}):h.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Inscries Abertas"]})]}),h.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:s.name}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:s.description}),h.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),h.jsx("span",{className:"font-medium",children:s.location})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsx("span",{className:"font-medium",children:e?"Ver programao completa":s.sessions.length>1?`${s.sessions.length} horrios disponveis`:`${cn(a==null?void 0:a.date)}  ${a==null?void 0:a.startTime}`})]})]}),!e&&a&&h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[h.jsx("span",{className:g?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:g?"Sem vagas":`${o-c} vagas restantes`}),h.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:[Math.round(u),"%"]})]}),h.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:h.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${g?"bg-red-500":u>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${u}%`}})})]})]}),h.jsxs("button",{onClick:()=>n(s),className:"w-full py-3 text-sm font-bold text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors border-t border-indigo-100 dark:border-gray-700 flex justify-center items-center",children:[e?"Explorar Evento":"Ver Detalhes e Inscrever",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),z4=()=>{const{user:s}=Gs(),e=Ya(),[n,a]=I.useState([]),[o,c]=I.useState([]),[u,g]=I.useState(!0),[p,y]=I.useState(null),[x,_]=I.useState(null),T=I.useCallback(async(ne=!0)=>{if(!s)return;ne&&g(!0);const[ie,Ce]=await Promise.all([Me.getAvailableEventsForUser(s),Me.getEnrollmentsForUser(s.uid)]);a(ie),c(Ce),ne&&g(!1)},[s]),C=I.useCallback(()=>{T(!1),_(null)},[T]),{handleEnroll:U,handleCancel:z,isProcessing:L,conflictData:B,clearState:H}=$w(s,C),[K,de]=I.useState(""),ye=zp(K,300),[be,k]=I.useState(""),[A,N]=I.useState(!1),[O,j]=I.useState(1),P=9;I.useEffect(()=>{T()},[T]),I.useEffect(()=>{if(p){const ne=n.find(ie=>ie.id===p.id);ne&&JSON.stringify(ne)!==JSON.stringify(p)&&y(ne)}},[n,p]);const R=I.useMemo(()=>{const ne=new Set;return n.forEach(ie=>{ie.parentId&&ne.add(ie.parentId)}),ne},[n]),Pe=I.useMemo(()=>{const ne=new Date().toISOString().split("T")[0];return n.filter(ie=>{if(ie.parentId)return!1;const Ce=ie.name.toLowerCase().includes(ye.toLowerCase())||ie.description.toLowerCase().includes(ye.toLowerCase()),M=n.filter(Te=>Te.parentId===ie.id),Z=[...ie.sessions,...M.flatMap(Te=>Te.sessions)],ce=be?Z.some(Te=>Te.date===be):!0,ve=A||Z.some(Te=>Te.date>=ne);return Ce&&ce&&ve})},[n,ye,be,A]);I.useEffect(()=>{j(1)},[ye,be,A]);const me=I.useMemo(()=>{const ne=(O-1)*P;return Pe.slice(ne,ne+P)},[Pe,O]),Y=(ne,ie)=>o.find(Ce=>Ce.eventId===ne&&Ce.sessionId===ie),le=I.useCallback(ne=>{R.has(ne.id)?e(`/event/${ne.id}`):(H(),y(ne))},[R,e,H]);return h.jsxs("div",{className:"space-y-8 animate-fade-in",children:[h.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Dashboard de Eventos"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),h.jsxs("div",{className:"bg-white dark:bg-darkcard p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col lg:flex-row gap-4 items-end transition-colors duration-200",children:[h.jsxs("div",{className:"flex-1 w-full",children:[h.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),h.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:K,onChange:ne=>de(ne.target.value)})]})]}),h.jsxs("div",{className:"w-full lg:w-48",children:[h.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Data Especfica"}),h.jsx("input",{type:"date",className:"w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:be,onChange:ne=>k(ne.target.value)})]}),h.jsx("div",{className:"w-full lg:w-auto pb-2",children:h.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[h.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[h.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:A,onChange:ne=>N(ne.target.checked),style:{right:A?"0":"auto",left:A?"auto":"0",borderColor:A?"#4F46E5":"#E5E7EB"}}),h.jsx("label",{htmlFor:"toggle",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${A?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`})]}),h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mostrar Passados"})]})})]}),u?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((ne,ie)=>h.jsx(V4,{},ie))}):Pe.length===0?h.jsx(al,{title:"Nenhum evento encontrado",description:n.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":A?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'.",action:!A&&n.length>0?{label:"Ver histrico de eventos",onClick:()=>N(!0)}:void 0}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:me.map(ne=>h.jsx(U4,{event:ne,hasChildren:R.has(ne.id),onAction:le},ne.id))}),h.jsx(M4,{currentPage:O,totalItems:Pe.length,itemsPerPage:P,onPageChange:j})]}),h.jsx(Pi,{isOpen:!!p,onClose:()=>y(null),title:p?p.name:"",children:h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:h.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:p==null?void 0:p.description})}),B&&h.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md animate-slide-in",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),h.jsxs("div",{className:"ml-3",children:[h.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),h.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[h.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),h.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[h.jsx("p",{className:"font-semibold",children:B.name}),h.jsx("p",{className:"text-xs",children:B.time})]})]})]})]})}),h.jsxs("div",{children:[h.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[h.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),h.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:p==null?void 0:p.sessions.map(ne=>{const ie=Y(p.id,ne.id),Ce=!!ie,M=ne.filled>=ne.capacity,Z=ne.filled/ne.capacity*100,ce=ne.date<new Date().toISOString().split("T")[0];return h.jsx("div",{className:`relative border rounded-lg p-4 transition-all duration-200 
                                ${Ce?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":M||ce?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-70":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:cn(ne.date)}),Ce&&h.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),ce&&!Ce&&h.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:h.jsxs("span",{className:"flex items-center",children:[" ",ne.startTime," - ",ne.endTime]})}),h.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:`h-full rounded-full ${M?"bg-red-500":Z>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(Z,100)}%`}})}),h.jsx("span",{className:`text-xs font-bold w-24 text-right ${M?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:M?"ESGOTADO":`${ne.capacity-ne.filled} vagas`})]})]}),h.jsx("div",{className:"flex items-center",children:Ce?h.jsx("button",{onClick:()=>ie&&_(ie.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):h.jsx(Gi,{onClick:()=>p&&U(p,ne.id),isLoading:L,disabled:M||ce,className:`w-full sm:w-auto ${M||ce?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed hover:bg-gray-300":""}`,children:ce?"Encerrado":M?"Lotado":"Garantir Vaga"})})]})},ne.id)})})]})]})}),h.jsx(ei,{isOpen:!!x,onClose:()=>_(null),onConfirm:()=>x&&z(x),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:L})]})},a_=Fc.memo(({evt:s,isNested:e,onOpenSubEvent:n,onManageEnrollments:a,onEdit:o,onDelete:c})=>{const u=!s.parentId,g=s.sessions.reduce((L,B)=>L+B.capacity,0),p=s.sessions.reduce((L,B)=>L+B.filled,0),y=g>0?p/g*100:0,x=g>0&&p>=g;let _="bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",T="Pblico";return s.visibility==="course"&&(_="bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300",T="Curso"),s.visibility==="class"&&(_="bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",T="Turma"),h.jsxs("li",{className:`relative transition-all duration-200 border-b border-gray-100 dark:border-gray-700 last:border-0 ${e?"bg-gray-50/80 hover:bg-gray-100 dark:bg-gray-800/40 dark:hover:bg-gray-800":"bg-white hover:bg-gray-50 dark:bg-darkcard dark:hover:bg-gray-800/60"}`,children:[e&&h.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-12 flex justify-center",children:[h.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 h-full absolute left-6 -top-1/2"}),h.jsx("div",{className:"absolute top-1/2 left-6 w-4 h-px bg-gray-300 dark:bg-gray-600"})]}),h.jsxs("div",{className:`px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between ${e?"pl-14":""}`,children:[h.jsxs("div",{className:"mb-4 sm:mb-0 flex-1 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[e&&h.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:"Sub"}),h.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${u?"text-lg":"text-base"}`,children:s.name})]}),h.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 flex flex-wrap gap-3 items-center",children:[h.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${_}`,children:T}),h.jsxs("span",{className:"flex items-center text-gray-400 dark:text-gray-500",title:"Sesses cadastradas",children:[h.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.sessions.length," sesses"]})]}),h.jsxs("div",{className:"mt-3 w-full max-w-[200px]",children:[h.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 dark:text-gray-400 mb-1 uppercase font-bold tracking-wide",children:[h.jsx("span",{children:"Ocupao"}),h.jsxs("span",{className:x?"text-red-600 dark:text-red-400":"",children:[p,"/",g]})]}),h.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:h.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${x?"bg-red-500":y>80?"bg-amber-400":"bg-primary"}`,style:{width:`${Math.min(y,100)}%`}})})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-80 hover:opacity-100",children:[u&&h.jsx("button",{onClick:()=>n(s),className:"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-2 rounded-md transition",title:"Adicionar Sub-evento vinculado",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("button",{onClick:()=>a(s),className:"text-gray-500 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 p-2 rounded-md transition",title:"Gerenciar Inscritos e Exportar",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),h.jsx("button",{onClick:()=>o(s),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 p-2 rounded-md transition",title:"Editar Evento",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002 2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),h.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),h.jsx("button",{onClick:()=>c(s),className:"text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 p-2 rounded-md transition",title:"Excluir Evento",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})}),B4=()=>{var ti,hs,ni,Bn;const{user:s}=Gs(),e=Ya(),{addToast:n}=Qs(),[a,o]=I.useState([]),[c,u]=I.useState([]),[g,p]=I.useState([]),[y,x]=I.useState(!1),[_,T]=I.useState(!1),[C,U]=I.useState(1),[z,L]=I.useState([void 0]),[B,H]=I.useState(!0),K=10,[de,ye]=I.useState(""),be=zp(de,300),[k,A]=I.useState({searchTerm:"",visibility:"",course:""}),[N,O]=I.useState(""),[j,P]=I.useState("details"),[R,Pe]=I.useState("manual"),[me,Y]=I.useState(null),[le,ne]=I.useState(null),[ie,Ce]=I.useState(null),[M,Z]=I.useState(null),[ce,ve]=I.useState(!1),[Te,je]=I.useState(!1),[Ee,Xe]=I.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0}),[De,nn]=I.useState({date:"",startTime:"",endTime:"",capacity:30}),[kt,bn]=I.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),rn=`${new Date().getFullYear()+2}-12-31`,br=50,Cn=I.useCallback(async W=>{T(!0);const ue=z[W-1],{data:Ve,nextCursor:Be}=await Me.getEvents({limit:K,cursor:ue,filters:k});o(Ve),H(!!Be),Be&&z.length<=W&&L(jt=>[...jt,Be]),T(!1)},[z,k]),oe=async()=>{const[W,ue]=await Promise.all([Me.getCourses(),Me.getClasses()]);u(W),p(ue)};I.useEffect(()=>{oe()},[]),I.useEffect(()=>{A(W=>({...W,searchTerm:be}))},[be]),I.useEffect(()=>{L([void 0]),U(1),Cn(1)},[k]);const We=I.useMemo(()=>{const W=[],ue={},Ve=new Set(a.map(Be=>Be.id));return a.forEach(Be=>{Be.parentId&&Ve.has(Be.parentId)?(ue[Be.parentId]||(ue[Be.parentId]=[]),ue[Be.parentId].push(Be)):W.push(Be)}),W.sort((Be,jt)=>(jt.createdAt||"").localeCompare(Be.createdAt||"")),Object.values(ue).forEach(Be=>{Be.sort((jt,Ys)=>(jt.createdAt||"").localeCompare(Ys.createdAt||""))}),{roots:W,childrenMap:ue}},[a]),tt=()=>{if(!B)return;const W=C+1;U(W),Cn(W)},pt=()=>{if(C===1)return;const W=C-1;U(W),Cn(W)},Un=(W,ue)=>{A(Ve=>({...Ve,[W]:ue}))},Qi=()=>{U(1),L([void 0]),Cn(1)},ds=()=>{Xe({name:"",description:"",location:"",sessions:[],visibility:"public",allowedCourses:[],allowedClasses:[],parentId:void 0}),nn({date:"",startTime:"",endTime:"",capacity:30}),bn({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),Y(null),Pe("manual"),ne(null),Ce(null),P("details")},dn=()=>{ds(),O("Criar Novo Evento"),x(!0)},Lr=I.useCallback(W=>{var ue;if(ds(),O("Adicionar Sub-evento"),Y(W.name),(ue=W.sessions)!=null&&ue.length){const Ve=W.sessions.map(Be=>Be.date).sort();Ce({min:Ve[0],max:Ve[Ve.length-1]})}Xe({parentId:W.id,visibility:W.visibility,allowedCourses:W.allowedCourses,allowedClasses:W.allowedClasses,location:W.location,sessions:[],name:"",description:""}),x(!0)},[]),$s=I.useCallback(W=>{ds(),Xe({...W}),O("Editar Evento"),x(!0)},[]),Ks=I.useCallback(W=>{Z(W.id),ve(!W.parentId)},[]),_r=I.useCallback(W=>{e(`/admin/events/${W.id}/enrollments`)},[e]),yl=()=>{if(!De.date||!De.startTime||!De.endTime)return;if(ie&&(De.date<ie.min||De.date>ie.max)){ne(`A data deve estar entre ${cn(ie.min)} e ${cn(ie.max)}.`);return}if(De.startTime>=De.endTime){ne("O horrio de trmino deve ser aps o horrio de incio.");return}const W={id:`sess_${Date.now()}`,date:De.date,startTime:De.startTime,endTime:De.endTime,capacity:De.capacity||30,filled:0};Xe(ue=>({...ue,sessions:[...ue.sessions||[],W]})),nn({date:"",startTime:"",endTime:"",capacity:30}),ne(null)},$i=()=>{ne(null);const{startDate:W,endDate:ue,startTime:Ve,endTime:Be,capacity:jt,daysOfWeek:Ys}=kt;if(!W||!ue||!Ve||!Be||!Ys.length){ne("Preencha todos os campos.");return}if(ie&&(W<ie.min||ue>ie.max)){ne(`O intervalo deve estar entre ${cn(ie.min)} e ${cn(ie.max)}.`);return}if(ue>rn){ne(`A gerao  limitada at ${cn(rn)}.`);return}if(Ve>=Be){ne("O horrio de trmino deve ser aps o horrio de incio.");return}const ri=new Date(`${W}T12:00:00Z`),qn=new Date(`${ue}T12:00:00Z`);if(ri>qn){ne("A data de incio deve ser anterior  de fim.");return}const Rn=[],Pr=new Date(ri);let Ur=0;for(;Pr<=qn&&(Ur++,!(Ur>1e3));)Ys.includes(Pr.getUTCDay())&&Rn.push({id:`sess_${Pr.getTime()}_${Rn.length}`,date:Pr.toISOString().split("T")[0],startTime:Ve,endTime:Be,capacity:jt,filled:0}),Pr.setDate(Pr.getDate()+1);if(Rn.length>br){ne(`Limite de segurana excedido. Tente gerar menos de ${br} sesses por vez.`);return}if(!Rn.length){ne("Nenhuma data encontrada no intervalo para os dias selecionados.");return}Xe(Xs=>({...Xs,sessions:[...Xs.sessions||[],...Rn]})),n("success",`${Rn.length} sesses geradas.`)},Ki=W=>{Xe(ue=>{var Ve;return{...ue,sessions:(Ve=ue.sessions)==null?void 0:Ve.filter((Be,jt)=>jt!==W)}})},Yi=async W=>{var ue,Ve;if(W.preventDefault(),!Ee.name||!((ue=Ee.sessions)!=null&&ue.length)){ne("Nome e ao menos uma sesso so obrigatrios."),Ee.name&&!((Ve=Ee.sessions)!=null&&Ve.length)&&P("sessions");return}T(!0);try{Ee.id?(await Me.updateEvent(Ee),n("success","Evento atualizado com sucesso!")):(await Me.createEvent({...Ee,id:`evt_${Date.now()}`,createdAt:new Date().toISOString(),createdBy:(s==null?void 0:s.uid)||""}),n("success","Evento criado com sucesso!")),x(!1),ds(),Qi()}catch(Be){console.error(Be),n("error","Erro ao salvar evento.")}finally{T(!1)}},zn=async()=>{if(M){je(!0);try{await Me.deleteEvent(M),n("success","Evento removido com sucesso!"),Z(null),Qi()}catch(W){console.error(W),n("error","Erro ao excluir evento.")}finally{je(!1)}}},Jt=W=>Xe(ue=>{var Ve;return{...ue,allowedCourses:(Ve=ue.allowedCourses)!=null&&Ve.includes(W)?ue.allowedCourses.filter(Be=>Be!==W):[...ue.allowedCourses||[],W]}}),In=W=>Xe(ue=>{var Ve;return{...ue,allowedClasses:(Ve=ue.allowedClasses)!=null&&Ve.includes(W)?ue.allowedClasses.filter(Be=>Be!==W):[...ue.allowedClasses||[],W]}}),St=W=>bn(ue=>({...ue,daysOfWeek:ue.daysOfWeek.includes(W)?ue.daysOfWeek.filter(Ve=>Ve!==W):[...ue.daysOfWeek,W]}));return h.jsxs("div",{className:"container mx-auto space-y-6",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gerenciamento de Eventos"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Crie, edite e gerencie eventos e suas sesses."})]}),h.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[h.jsxs("div",{className:"w-full xl:w-64 relative",children:[h.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full pl-9 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:de,onChange:W=>ye(W.target.value)}),h.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 absolute left-2 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),h.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[h.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:k.visibility,onChange:W=>Un("visibility",W.target.value),children:[h.jsx("option",{value:"",children:"Todas Visibilidades"}),h.jsx("option",{value:"public",children:"Pblico"}),h.jsx("option",{value:"course",children:"Por Curso"}),h.jsx("option",{value:"class",children:"Por Turma"})]}),h.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:k.course,onChange:W=>Un("course",W.target.value),children:[h.jsx("option",{value:"",children:"Todos os Cursos"}),c.map(W=>h.jsx("option",{value:W.id,children:W.name},W.id))]})]}),h.jsx("button",{onClick:dn,className:"w-full xl:w-auto bg-primary text-white px-6 py-2 rounded-md font-bold whitespace-nowrap hover:bg-indigo-700 shadow-sm transition",children:"+ Novo Evento"})]})]}),_?h.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((W,ue)=>h.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm rounded-lg p-0 overflow-hidden border border-gray-100 dark:border-gray-700",children:h.jsx(Kw,{})},ue))}):a.length===0?h.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 sm:rounded-lg p-8",children:h.jsx(al,{title:"Nenhum evento encontrado",description:"Tente ajustar os filtros ou crie um novo evento."})}):h.jsx("div",{className:"space-y-4",children:We.roots.map(W=>{const ue=We.childrenMap[W.id]||[];return h.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden transition-shadow hover:shadow-md",children:h.jsxs("ul",{children:[h.jsx(a_,{evt:W,onOpenSubEvent:Lr,onManageEnrollments:_r,onEdit:$s,onDelete:Ks}),ue.map(Ve=>h.jsx(a_,{evt:Ve,isNested:!0,onOpenSubEvent:Lr,onManageEnrollments:_r,onEdit:$s,onDelete:Ks},Ve.id))]})},W.id)})}),a.length>0&&h.jsxs("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-lg px-4 py-3 flex items-center justify-between sm:px-6 shadow-sm",children:[h.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[h.jsx("div",{children:h.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Pgina ",h.jsx("span",{className:"font-medium",children:C})]})}),h.jsx("div",{children:h.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[h.jsx("button",{onClick:pt,disabled:C===1||_,className:"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Anterior"}),h.jsx("button",{onClick:tt,disabled:!B||_,className:"relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Prximo"})]})})]}),h.jsxs("div",{className:"flex items-center justify-between w-full sm:hidden",children:[h.jsx("button",{onClick:pt,disabled:C===1||_,className:"px-4 py-2 border dark:border-gray-600 rounded text-sm text-gray-700 dark:text-gray-200 disabled:opacity-50",children:"Ant"}),h.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Pg ",C]}),h.jsx("button",{onClick:tt,disabled:!B||_,className:"px-4 py-2 border dark:border-gray-600 rounded text-sm text-gray-700 dark:text-gray-200 disabled:opacity-50",children:"Prox"})]})]}),h.jsx(ei,{isOpen:!!M,onClose:()=>Z(null),onConfirm:zn,title:"Confirmar Excluso",message:h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Tem certeza que deseja excluir este evento?"}),ce&&h.jsx("p",{className:"text-red-600 dark:text-red-400 font-bold mt-2 bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-100 dark:border-red-900/30",children:" Ateno: Todos os sub-eventos vinculados tambm sero excludos."})]}),isProcessing:Te}),h.jsx(Pi,{isOpen:y,onClose:()=>x(!1),title:N,children:h.jsxs("form",{onSubmit:Yi,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[h.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 mb-4",children:[h.jsx("button",{type:"button",onClick:()=>P("details"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${j==="details"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"1. Detalhes Gerais"}),h.jsxs("button",{type:"button",onClick:()=>P("sessions"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${j==="sessions"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:["2. Sesses (",((ti=Ee.sessions)==null?void 0:ti.length)||0,")"]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4",children:[j==="details"&&h.jsxs("div",{className:"space-y-4 animate-fade-in",children:[me&&h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 p-3 rounded-md text-sm mb-4",children:["Vinculado ao evento pai: ",h.jsx("strong",{children:me})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome do Evento *"}),h.jsx("input",{type:"text",required:!0,placeholder:"Ex: Feira de Cincias",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:Ee.name,onChange:W=>Xe({...Ee,name:W.target.value})})]}),h.jsxs("div",{className:me?"opacity-50 pointer-events-none":"",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibilidade"}),h.jsxs("select",{value:Ee.visibility,onChange:W=>Xe({...Ee,visibility:W.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",disabled:!!me,children:[h.jsx("option",{value:"public",children:"Pblico (Todos podem ver)"}),h.jsx("option",{value:"course",children:"Restrito a Cursos"}),h.jsx("option",{value:"class",children:"Restrito a Turmas"})]}),Ee.visibility==="course"&&h.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[h.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione os cursos permitidos:"}),c.map(W=>{var ue;return h.jsxs("div",{className:"flex items-center mb-1",children:[h.jsx("input",{type:"checkbox",id:`c_${W.id}`,checked:(ue=Ee.allowedCourses)==null?void 0:ue.includes(W.id),onChange:()=>Jt(W.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),h.jsx("label",{htmlFor:`c_${W.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:W.name})]},W.id)})]}),Ee.visibility==="class"&&h.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[h.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione as turmas permitidas:"}),c.map(W=>h.jsxs("div",{className:"mb-2",children:[h.jsx("strong",{className:"text-xs text-gray-900 dark:text-gray-200 block mb-1",children:W.name}),h.jsx("div",{className:"pl-2",children:g.filter(ue=>ue.courseId===W.id).map(ue=>{var Ve;return h.jsxs("div",{className:"flex items-center mb-1",children:[h.jsx("input",{type:"checkbox",id:`cl_${ue.id}`,checked:(Ve=Ee.allowedClasses)==null?void 0:Ve.includes(ue.id),onChange:()=>In(ue.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),h.jsx("label",{htmlFor:`cl_${ue.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:ue.name})]},ue.id)})})]},W.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Local"}),h.jsx("input",{type:"text",placeholder:"Ex: Auditrio Principal",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:Ee.location,onChange:W=>Xe({...Ee,location:W.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descrio"}),h.jsx("textarea",{placeholder:"Detalhes do evento...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",rows:3,value:Ee.description,onChange:W=>Xe({...Ee,description:W.target.value})})]})]}),j==="sessions"&&h.jsxs("div",{className:"space-y-4 animate-fade-in",children:[ie&&h.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 p-3 text-sm text-amber-800 dark:text-amber-300",children:[" ",h.jsx("strong",{children:"Restrio de Data:"})," Este sub-evento deve ocorrer entre ",cn(ie.min)," e ",cn(ie.max),"."]}),h.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden",children:[h.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:[h.jsx("button",{type:"button",onClick:()=>Pe("manual"),className:`flex-1 py-2 text-sm font-medium ${R==="manual"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Adicionar Manual"}),h.jsx("button",{type:"button",onClick:()=>Pe("recurring"),className:`flex-1 py-2 text-sm font-medium ${R==="recurring"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Gerar Recorrncia"})]}),h.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:[R==="manual"&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"sm:col-span-2",children:[h.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Data"}),h.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:De.date,min:ie==null?void 0:ie.min,max:ie==null?void 0:ie.max,onChange:W=>nn({...De,date:W.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Incio"}),h.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:De.startTime,onChange:W=>nn({...De,startTime:W.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fim"}),h.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:De.endTime,onChange:W=>nn({...De,endTime:W.target.value})})]}),h.jsxs("div",{className:"sm:col-span-2 flex items-end gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Vagas"}),h.jsx("input",{type:"number",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:De.capacity,onChange:W=>nn({...De,capacity:parseInt(W.target.value)})})]}),h.jsx("button",{type:"button",onClick:yl,className:"bg-white dark:bg-gray-700 border border-primary dark:border-indigo-500 text-primary dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-gray-600 px-4 py-1.5 rounded text-sm font-medium h-[34px]",children:"+ Adicionar"})]})]}),R==="recurring"&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"De"}),h.jsx("input",{type:"date",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:kt.startDate,min:ie==null?void 0:ie.min,max:rn,onChange:W=>bn({...kt,startDate:W.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"At"}),h.jsx("input",{type:"date",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:kt.endDate,min:ie==null?void 0:ie.min,max:rn,onChange:W=>bn({...kt,endDate:W.target.value})})]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[h.jsx("input",{type:"time",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:kt.startTime,onChange:W=>bn({...kt,startTime:W.target.value})}),h.jsx("input",{type:"time",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:kt.endTime,onChange:W=>bn({...kt,endTime:W.target.value})}),h.jsx("input",{type:"number",placeholder:"Cap.",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:kt.capacity,onChange:W=>bn({...kt,capacity:parseInt(W.target.value)})})]}),h.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map((W,ue)=>h.jsx("button",{type:"button",onClick:()=>St(ue),className:`text-xs w-8 h-8 rounded-full border flex items-center justify-center transition ${kt.daysOfWeek.includes(ue)?"bg-primary text-white border-primary":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600"}`,children:W.charAt(0)},W))}),h.jsx("button",{type:"button",onClick:$i,className:"w-full bg-primary text-white py-2 rounded text-sm hover:bg-indigo-700",children:"Gerar Sesses"})]}),le&&h.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded",children:le})]})]}),h.jsxs("div",{children:[h.jsxs("h5",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex justify-between items-center",children:["Sesses Geradas",h.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:((hs=Ee.sessions)==null?void 0:hs.length)||0})]}),h.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md max-h-48 overflow-y-auto bg-white dark:bg-gray-800 divide-y divide-gray-100 dark:divide-gray-700",children:[((ni=Ee.sessions)==null?void 0:ni.length)===0&&h.jsx("p",{className:"text-sm text-gray-400 text-center py-6 italic",children:"Nenhuma sesso adicionada ainda."}),(Bn=Ee.sessions)==null?void 0:Bn.slice().sort((W,ue)=>W.date.localeCompare(ue.date)).map((W,ue)=>h.jsxs("div",{className:"p-2.5 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/50 text-sm",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:cn(W.date)}),h.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[W.startTime," - ",W.endTime,"  ",W.capacity," vagas"]})]}),h.jsx("button",{type:"button",onClick:()=>Ki(ue),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400 p-1",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},ue))]})]})]})]}),h.jsx("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:j==="details"?h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),h.jsx("button",{type:"button",onClick:()=>P("sessions"),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-indigo-700 text-sm font-medium",children:"Prximo: Sesses "})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",onClick:()=>P("details"),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:" Voltar"}),h.jsx(Gi,{type:"submit",isLoading:_,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar Evento"})]})})]})})]})},q4=Fc.memo(({user:s,courseName:e,className:n,onEdit:a,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:u})=>h.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-primary dark:text-indigo-300 font-bold",children:s.name?s.name.charAt(0):s.email.charAt(0).toUpperCase()}),h.jsxs("div",{className:"ml-4",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.name||"Sem nome"}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.email})]})]})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[h.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:e}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n})]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.rm||"-"}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.role===it.ADMIN?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:s.role})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[h.jsx("button",{onClick:()=>u(s),className:"text-cyan-600 hover:text-cyan-900 dark:text-cyan-400 dark:hover:text-cyan-300",title:"Ver Inscries",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),h.jsx("button",{onClick:()=>a(s),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Editar"}),h.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),h.jsx("button",{onClick:()=>o(s),className:"text-amber-600 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300",children:s.role===it.ADMIN?"Virar User":"Virar Admin"}),h.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),h.jsx("button",{onClick:()=>c(s),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Excluir"})]})]})),H4=Fc.memo(({user:s,courseName:e,className:n,onEdit:a,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:u})=>h.jsxs("div",{className:"bg-white dark:bg-darkcard shadow rounded-lg p-4 flex flex-col space-y-3 border border-gray-100 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-primary dark:text-indigo-300 font-bold",children:s.name?s.name.charAt(0):s.email.charAt(0).toUpperCase()}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:s.name||"Sem nome"}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.email})]})]}),h.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.role===it.ADMIN?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:s.role})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm border-t border-b border-gray-100 dark:border-gray-700 py-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs block",children:"Curso"}),h.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:e})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs block",children:"Turma"}),h.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:n})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs block",children:"RM"}),h.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.rm||"-"})]})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-1 overflow-x-auto",children:[h.jsxs("button",{onClick:()=>u(s),className:"text-cyan-600 dark:text-cyan-400 text-sm font-medium border border-cyan-100 dark:border-cyan-900 px-2 py-1 rounded hover:bg-cyan-50 dark:hover:bg-cyan-900/30 flex items-center",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Agenda"]}),h.jsx("button",{onClick:()=>a(s),className:"text-indigo-600 dark:text-indigo-400 text-sm font-medium border border-indigo-100 dark:border-indigo-900 px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30",children:"Editar"}),h.jsx("button",{onClick:()=>o(s),className:"text-amber-600 dark:text-amber-400 text-sm font-medium border border-amber-100 dark:border-amber-900 px-2 py-1 rounded hover:bg-amber-50 dark:hover:bg-amber-900/30",children:s.role===it.ADMIN?"User":"Admin"}),h.jsx("button",{onClick:()=>c(s),className:"text-red-600 dark:text-red-400 text-sm font-medium border border-red-100 dark:border-red-900 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30",children:"Excluir"})]})]})),F4=()=>{const[s,e]=I.useState([]),[n,a]=I.useState([]),[o,c]=I.useState([]),[u,g]=I.useState(!1),[p,y]=I.useState(!0),{addToast:x}=Qs(),[_,T]=I.useState(1),[C,U]=I.useState([void 0]),[z,L]=I.useState(!0),B=15,[H,K]=I.useState(""),de=zp(H,300),[ye,be]=I.useState({searchTerm:"",role:"",courseId:"",classId:""}),[k,A]=I.useState(null),[N,O]=I.useState({name:"",rm:"",courseId:"",classId:""}),[j,P]=I.useState(!1),[R,Pe]=I.useState(null),[me,Y]=I.useState([]),[le,ne]=I.useState(!1),[ie,Ce]=I.useState(null),M=I.useCallback(async oe=>{g(!0);const We=C[oe-1],{data:tt,nextCursor:pt}=await Me.getUsers({limit:B,cursor:We,filters:ye});e(tt),L(!!pt),pt&&C.length<=oe&&U(Un=>[...Un,pt]),g(!1)},[C,ye]),Z=async()=>{y(!0);const[oe,We]=await Promise.all([Me.getCourses(),Me.getClasses()]);a(oe),c(We),y(!1)};I.useEffect(()=>{Z()},[]),I.useEffect(()=>{be(oe=>({...oe,searchTerm:de}))},[de]),I.useEffect(()=>{U([void 0]),T(1),M(1)},[ye]);const ce=()=>{if(!z)return;const oe=_+1;T(oe),M(oe)},ve=()=>{if(_===1)return;const oe=_-1;T(oe),M(oe)},Te=(oe,We)=>{be(tt=>({...tt,[oe]:We}))},je=()=>{T(1),U([void 0]),M(1)},Ee=I.useCallback(oe=>Ce({type:"DELETE",user:oe}),[]),Xe=I.useCallback(oe=>Ce({type:"ROLE",user:oe}),[]),De=I.useCallback(oe=>{A(oe),O({name:oe.name||"",rm:oe.rm||"",courseId:oe.courseId||"",classId:oe.classId||""}),P(!1)},[]),nn=I.useCallback(async oe=>{Pe(oe),ne(!0);try{const We=await Me.getUserEnrollmentsDetails(oe.uid);Y(We)}catch(We){console.error(We),Y([])}finally{ne(!1)}},[]),kt=async oe=>{R&&(await Me.cancelEnrollment(oe),x("success","Inscrio removida."),nn(R))},bn=async()=>{if(ie){P(!0);try{if(ie.type==="DELETE")await Me.deleteUser(ie.user.uid),x("success","Usurio excludo.");else if(ie.type==="ROLE"){const oe=ie.user.role===it.ADMIN?it.USER:it.ADMIN;await Me.updateUserRole(ie.user.uid,oe),x("success",`Role alterada para ${oe}.`)}Ce(null),je()}catch(oe){const We=sl(oe);x("error",We)}finally{P(!1)}}},us=async oe=>{if(oe.preventDefault(),!!k){P(!0);try{await Me.updateUserProfile(k.uid,N),A(null),x("success","Perfil atualizado."),je()}catch(We){const tt=sl(We);x("error",tt)}finally{P(!1)}}},rn=I.useCallback(oe=>{var We;return((We=n.find(tt=>tt.id===oe))==null?void 0:We.name)||"-"},[n]),br=I.useCallback(oe=>{var We;return((We=o.find(tt=>tt.id===oe))==null?void 0:We.name)||"-"},[o]),Cn=I.useMemo(()=>ye.courseId?o.filter(oe=>oe.courseId===ye.courseId):[],[o,ye.courseId]);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gerenciamento de Usurios"}),h.jsxs("div",{className:"bg-white dark:bg-darkcard p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col md:flex-row gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Buscar"}),h.jsx("input",{type:"text",placeholder:"Nome, Email ou RM...",className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:H,onChange:oe=>K(oe.target.value)})]}),h.jsxs("div",{className:"w-full md:w-40",children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Perfil"}),h.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ye.role,onChange:oe=>Te("role",oe.target.value),children:[h.jsx("option",{value:"",children:"Todos"}),h.jsx("option",{value:it.ADMIN,children:"Admin"}),h.jsx("option",{value:it.USER,children:"User"})]})]}),h.jsxs("div",{className:"w-full md:w-48",children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Curso"}),h.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ye.courseId,onChange:oe=>{be({...ye,courseId:oe.target.value,classId:""})},children:[h.jsx("option",{value:"",children:"Todos os Cursos"}),n.map(oe=>h.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),h.jsxs("div",{className:"w-full md:w-48",children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Turma"}),h.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-700",value:ye.classId,onChange:oe=>Te("classId",oe.target.value),disabled:!ye.courseId,children:[h.jsx("option",{value:"",children:"Todas as Turmas"}),Cn.map(oe=>h.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-darkcard shadow overflow-x-auto sm:rounded-lg border border-gray-200 dark:border-gray-700",children:[h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 hidden md:table",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Usurio"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Curso/Turma"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"RM"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Role"}),h.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Aes"})]})}),h.jsx("tbody",{className:"bg-white dark:bg-darkcard divide-y divide-gray-200 dark:divide-gray-700",children:u?h.jsx(h.Fragment,{children:Array.from({length:5}).map((oe,We)=>h.jsx(L4,{},We))}):s.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"p-0",children:h.jsx(al,{title:"Nenhum usurio",description:"Tente ajustar os filtros."})})}):s.map(oe=>h.jsx(q4,{user:oe,courseName:rn(oe.courseId),className:br(oe.classId),onEdit:De,onRequestRoleChange:Xe,onRequestDelete:Ee,onViewEnrollments:nn},oe.uid))})]}),h.jsx("div",{className:"md:hidden p-4 space-y-4 bg-gray-50 dark:bg-darkbg",children:u?h.jsx(h.Fragment,{children:Array.from({length:5}).map((oe,We)=>h.jsx(P4,{},We))}):s.length===0?h.jsx(al,{title:"Nenhum usurio",description:"Tente ajustar os filtros."}):s.map(oe=>h.jsx(H4,{user:oe,courseName:rn(oe.courseId),className:br(oe.classId),onEdit:De,onRequestRoleChange:Xe,onRequestDelete:Ee,onViewEnrollments:nn},oe.uid))})]}),h.jsxs("div",{className:"flex justify-between items-center mt-4",children:[h.jsx("button",{onClick:ve,disabled:_===1||u,className:"px-4 py-2 bg-white dark:bg-darkcard border dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Anterior"}),h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Pgina ",_]}),h.jsx("button",{onClick:ce,disabled:!z||u,className:"px-4 py-2 bg-white dark:bg-darkcard border dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Prximo"})]}),h.jsx(ei,{isOpen:!!ie,onClose:()=>Ce(null),onConfirm:bn,title:"Confirmar Ao",message:(ie==null?void 0:ie.type)==="DELETE"?`Tem certeza que deseja excluir ${ie.user.name}?`:`Deseja alterar o perfil de ${ie==null?void 0:ie.user.name} para ${(ie==null?void 0:ie.user.role)===it.ADMIN?"USURIO":"ADMIN"}?`,isProcessing:j,variant:(ie==null?void 0:ie.type)==="DELETE"?"danger":"primary"}),h.jsx(Pi,{isOpen:!!k,onClose:()=>A(null),title:"Editar Usurio",children:h.jsxs("form",{onSubmit:us,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"Nome Completo"}),h.jsx("input",{type:"text",className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:N.name,onChange:oe=>O({...N,name:oe.target.value}),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"RM"}),h.jsx("input",{type:"text",className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:N.rm,onChange:oe=>O({...N,rm:oe.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"Curso"}),h.jsxs("select",{className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:N.courseId,onChange:oe=>O({...N,courseId:oe.target.value,classId:""}),children:[h.jsx("option",{value:"",children:"Selecione..."}),n.map(oe=>h.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"Turma"}),h.jsxs("select",{className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:N.classId,onChange:oe=>O({...N,classId:oe.target.value}),disabled:!N.courseId,children:[h.jsx("option",{value:"",children:"Selecione..."}),o.filter(oe=>oe.courseId===N.courseId).map(oe=>h.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),h.jsx(Gi,{type:"submit",isLoading:j,className:"w-full",children:"Salvar"})]})}),h.jsx(Pi,{isOpen:!!R,onClose:()=>Pe(null),title:`Agenda: ${R==null?void 0:R.name}`,children:h.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:le?h.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Carregando..."}):me.length===0?h.jsx("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded text-gray-500 dark:text-gray-300",children:"Nenhuma inscrio."}):h.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:me.map((oe,We)=>h.jsxs("li",{className:"py-3 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-white",children:oe.eventName}),h.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",cn(oe.sessionDate),"   ",oe.sessionTime]})]}),h.jsx("button",{onClick:()=>kt(oe.enrollmentId),className:"text-red-500 dark:text-red-400 text-xs font-bold border dark:border-red-900 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30",children:"Remover"})]},We))})})})]})},G4=()=>{const[s,e]=I.useState([]),[n,a]=I.useState([]),[o,c]=I.useState(!1),{addToast:u}=Qs(),[g,p]=I.useState(""),[y,x]=I.useState(""),[_,T]=I.useState(""),[C,U]=I.useState(""),[z,L]=I.useState(null),[B,H]=I.useState(null),[K,de]=I.useState(!1),ye=async()=>{c(!0);const me=await Me.getCourses(),Y=await Me.getClasses();e(me),a(Y),c(!1)};I.useEffect(()=>{ye()},[]);const be=async me=>{if(me.preventDefault(),!!g)try{await Me.addCourse(g),p(""),u("success","Curso adicionado."),ye()}catch{u("error","Erro ao adicionar curso.")}},k=me=>{H({type:"course",id:me})},A=async me=>{if(me.preventDefault(),!(!y||!_))try{await Me.addClass(_,y),x(""),u("success","Turma adicionada."),ye()}catch{u("error","Erro ao adicionar turma.")}},N=me=>{H({type:"class",id:me})},O=async()=>{if(B){de(!0);try{B.type==="course"?await Me.deleteCourse(B.id):await Me.deleteClass(B.id),u("success","Item removido."),H(null),ye()}catch{u("error","Erro ao remover item.")}finally{de(!1)}}},j=(me,Y,le)=>{L({type:me,id:Y,name:le})},P=async me=>{if(me.preventDefault(),!(!z||!z.name))try{z.type==="course"?await Me.updateCourse(z.id,z.name):await Me.updateClass(z.id,z.name),u("success","Atualizado com sucesso."),L(null),ye()}catch{u("error","Erro ao atualizar.")}},R=s.filter(me=>me.name.toLowerCase().includes(C.toLowerCase())),Pe=n.filter(me=>{var ie;const Y=((ie=s.find(Ce=>Ce.id===me.courseId))==null?void 0:ie.name)||"",le=me.name.toLowerCase().includes(C.toLowerCase()),ne=Y.toLowerCase().includes(C.toLowerCase());return le||ne});return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gesto de Cursos e Turmas"}),h.jsx("div",{className:"w-full sm:w-72",children:h.jsx("input",{type:"text",placeholder:"Buscar Curso ou Turma...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:C,onChange:me=>U(me.target.value)})})]}),h.jsxs("div",{className:"bg-white dark:bg-darkcard shadow rounded-lg p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Cursos"}),h.jsxs("form",{onSubmit:be,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[h.jsx("input",{type:"text",placeholder:"Nome do novo curso",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:g,onChange:me=>p(me.target.value)}),h.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-primary text-white px-4 py-2 rounded-md hover:bg-indigo-700 font-medium",children:"Adicionar Curso"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[R.map(me=>h.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md p-4 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 shadow-sm",children:[h.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 break-words flex-1 pr-2",children:me.name}),h.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[h.jsx("button",{onClick:()=>j("course",me.id,me.name),className:"text-blue-600 dark:text-blue-400 text-sm hover:text-white hover:bg-blue-600 dark:hover:bg-blue-500 font-medium px-2 py-1 rounded transition",title:"Editar",children:""}),h.jsx("button",{onClick:()=>k(me.id),className:"text-red-600 dark:text-red-400 text-sm hover:text-white hover:bg-red-600 dark:hover:bg-red-500 font-medium px-2 py-1 rounded transition",title:"Excluir",children:""})]})]},me.id)),R.length===0&&h.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm italic col-span-full",children:"Nenhum curso encontrado."})]})]}),h.jsxs("div",{className:"bg-white dark:bg-darkcard shadow rounded-lg p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Turmas"}),h.jsxs("form",{onSubmit:A,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[h.jsxs("select",{className:"w-full sm:w-1/3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:_,onChange:me=>T(me.target.value),required:!0,children:[h.jsx("option",{value:"",children:"Selecione o Curso..."}),s.map(me=>h.jsx("option",{value:me.id,children:me.name},me.id))]}),h.jsx("input",{type:"text",placeholder:"Nome da Turma (ex: 2024-A)",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:y,onChange:me=>x(me.target.value),required:!0}),h.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-secondary text-white px-4 py-2 rounded-md hover:bg-emerald-700 font-medium",children:"Adicionar Turma"})]}),h.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-darkcard overflow-hidden",children:[h.jsxs("div",{className:"hidden md:grid grid-cols-3 bg-gray-50 dark:bg-gray-800 px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700",children:[h.jsx("div",{children:"Turma"}),h.jsx("div",{children:"Curso Associado"}),h.jsx("div",{className:"text-right",children:"Aes"})]}),h.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[Pe.map(me=>{var le;const Y=((le=s.find(ne=>ne.id===me.courseId))==null?void 0:le.name)||"Curso removido";return h.jsxs("div",{className:"p-4 md:px-6 md:py-4 flex flex-col md:grid md:grid-cols-3 gap-2 md:items-center hover:bg-gray-50 dark:hover:bg-gray-800/50 transition",children:[h.jsxs("div",{className:"flex justify-between items-center md:block",children:[h.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:me.name}),h.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Turma"})]}),h.jsxs("div",{className:"flex justify-between items-center md:block",children:[h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:Y}),h.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Curso"})]}),h.jsxs("div",{className:"text-right mt-3 md:mt-0 pt-3 md:pt-0 border-t md:border-0 border-gray-100 dark:border-gray-700 flex justify-end gap-2",children:[h.jsx("button",{onClick:()=>j("class",me.id,me.name),className:"text-blue-600 dark:text-blue-400 hover:text-white hover:bg-blue-600 dark:hover:bg-blue-500 text-sm font-medium border border-blue-200 dark:border-blue-900 px-3 py-1.5 rounded transition",children:"Editar"}),h.jsx("button",{onClick:()=>N(me.id),className:"text-red-600 dark:text-red-400 hover:text-white hover:bg-red-600 dark:hover:bg-red-500 text-sm font-medium border border-red-200 dark:border-red-900 px-3 py-1.5 rounded transition",children:"Excluir"})]})]},me.id)}),Pe.length===0&&h.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma turma encontrada."})]})]})]}),h.jsx(ei,{isOpen:!!B,onClose:()=>H(null),onConfirm:O,title:"Confirmar Excluso",message:h.jsxs("div",{children:[h.jsxs("p",{children:["Tem certeza que deseja excluir ",(B==null?void 0:B.type)==="course"?"este curso":"esta turma","?"]}),(B==null?void 0:B.type)==="course"&&h.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 font-bold mt-2 bg-red-50 dark:bg-red-900/20 p-2 rounded",children:" Ateno: Todas as turmas e vnculos de usurios deste curso sero removidos automaticamente."})]}),isProcessing:K}),h.jsx(Pi,{isOpen:!!z,onClose:()=>L(null),title:(z==null?void 0:z.type)==="course"?"Editar Curso":"Editar Turma",children:h.jsxs("form",{onSubmit:P,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome"}),h.jsx("input",{type:"text",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:(z==null?void 0:z.name)||"",onChange:me=>L(Y=>Y?{...Y,name:me.target.value}:null),required:!0})]}),h.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-medium hover:bg-indigo-700",children:"Salvar"})]})})]})},Po=s=>{const e=String(s??"");return/[",\n\r]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},Q4=()=>{const{id:s}=m_(),[e,n]=I.useState(null),[a,o]=I.useState([]),[c,u]=I.useState(!0),[g,p]=I.useState(null),[y,x]=I.useState(!1),[_,T]=I.useState(""),{addToast:C}=Qs(),U=async()=>{if(!s)return;u(!0);const H=await Me.getEventById(s);n(H||null);const K=await Me.getEnrichedEnrollments(s);o(K),u(!1)};I.useEffect(()=>{U()},[s]);const z=()=>{if(B.length===0)return;const K=[["Nome","Email","RM","Data Sesso","Horrio","Data Inscrio"].join(","),...B.map(k=>[Po(k.user.name),Po(k.user.email),Po(k.user.rm),Po(cn(k.session.date)),Po(`${k.session.startTime} - ${k.session.endTime}`),Po(new Date(k.enrolledAt).toLocaleString("pt-BR"))].join(","))].join(`
`),de=new Blob([`\uFEFF${K}`],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(de),be=document.createElement("a");be.href=ye,be.setAttribute("download",`inscritos_${(e==null?void 0:e.name.replace(/\s+/g,"_"))||"evento"}.csv`),document.body.appendChild(be),be.click(),document.body.removeChild(be)},L=async()=>{if(g){x(!0);try{await Me.cancelEnrollment(g),C("success","Inscrio removida."),p(null),U()}catch{C("error","Erro ao remover inscrio.")}finally{x(!1)}}},B=a.filter(H=>{var K;return H.user.name.toLowerCase().includes(_.toLowerCase())||H.user.email.toLowerCase().includes(_.toLowerCase())||((K=H.user.rm)==null?void 0:K.includes(_))});return c?h.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Carregando lista de inscritos..."}):e?h.jsxs("div",{className:"space-y-6 pb-20",children:[" ",h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[h.jsxs(xt,{to:"/admin/events",className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 hover:text-gray-700 flex-shrink-0 transition-colors",children:[h.jsx("span",{className:"sr-only",children:"Voltar"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white leading-tight truncate",children:"Inscritos"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e.name})]}),h.jsx("button",{onClick:z,disabled:B.length===0,className:"p-3 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 disabled:opacity-50",title:"Exportar CSV",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),h.jsx("div",{className:"w-full",children:h.jsx("input",{type:"text",placeholder:"Buscar por nome, RM ou email...",className:"w-full h-12 px-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-base shadow-sm focus:ring-2 focus:ring-primary focus:border-transparent",value:_,onChange:H=>T(H.target.value)})})]}),B.length===0?h.jsx(al,{title:"Nenhum inscrito",description:_?"Nenhum aluno encontrado para esta busca.":"Nenhum inscrito neste evento at o momento."}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"md:hidden flex items-center justify-center text-xs text-gray-500 dark:text-gray-400 mb-2 animate-pulse",children:[h.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),h.jsx("span",{children:"Deslize a tabela para ver mais"})]}),h.jsx("div",{className:"hidden md:block bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-lg border border-gray-200 dark:border-gray-700",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aluno"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"RM / Email"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Sesso"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Inscrito em"}),h.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aes"})]})}),h.jsx("tbody",{className:"bg-white dark:bg-darkcard divide-y divide-gray-200 dark:divide-gray-700",children:B.map(H=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:H.user.name})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[h.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:H.user.rm||"-"}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:H.user.email})]}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[h.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:cn(H.session.date)}),h.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[H.session.startTime," - ",H.session.endTime]})]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(H.enrolledAt).toLocaleDateString("pt-BR")}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:h.jsx("button",{onClick:()=>p(H.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 font-bold",children:"Remover"})})]},H.id))})]})}),h.jsx("div",{className:"md:hidden space-y-4",children:B.map(H=>h.jsxs("div",{className:"bg-white dark:bg-darkcard shadow-sm rounded-xl p-5 border border-gray-100 dark:border-gray-700 flex flex-col gap-4",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:H.user.name}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:H.user.email})]}),h.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 px-2 py-1 rounded font-bold",children:["RM: ",H.user.rm||"-"]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("span",{className:"block text-[10px] text-gray-400 uppercase font-bold tracking-wide mb-1",children:"Sesso"}),h.jsx("span",{className:"block font-medium text-gray-800 dark:text-gray-200",children:cn(H.session.date)}),h.jsxs("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:[H.session.startTime," - ",H.session.endTime]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-[10px] text-gray-400 uppercase font-bold tracking-wide mb-1",children:"Inscrito em"}),h.jsx("span",{className:"block text-gray-600 dark:text-gray-300",children:new Date(H.enrolledAt).toLocaleDateString("pt-BR")})]})]}),h.jsx("button",{onClick:()=>p(H.id),className:"w-full h-12 text-base text-red-600 dark:text-red-400 font-bold border border-red-200 dark:border-red-900/30 bg-red-50 dark:bg-red-900/10 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 transition active:scale-[0.98]",children:"Remover Inscrio"})]},H.id))})]}),h.jsx(ei,{isOpen:!!g,onClose:()=>p(null),onConfirm:L,title:"Remover Inscrio",message:"Tem certeza que deseja remover a inscrio deste aluno? A vaga ser liberada imediatamente.",confirmText:"Confirmar Remoo",isProcessing:y})]}):h.jsx("div",{className:"p-8 text-center text-red-500",children:"Evento no encontrado."})},$4=()=>{const[s,e]=I.useState(!1),[n,a]=I.useState(!1),{addToast:o}=Qs(),c=()=>{a(!0)},u=async()=>{e(!0);try{await Me.resetAndSeedData(),o("success","Dados gerados com sucesso! Recarregando sistema..."),setTimeout(()=>{window.location.reload()},2e3)}catch(g){console.error(g),o("error","Ocorreu um erro ao gerar os dados."),e(!1),a(!1)}};return h.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto mt-10",children:[h.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:h.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[h.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Ferramentas de Desenvolvimento"}),h.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:[h.jsx("p",{children:"Utilize esta funo para popular o banco de dados local com informaes de teste."}),h.jsx("p",{className:"mt-2 font-bold text-red-500",children:"Isso  destrutivo e sobrescrever todos os dados existentes."})]}),h.jsx("div",{className:"mt-5",children:h.jsx("button",{type:"button",onClick:c,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:" Resetar e Gerar Massa de Dados"})})]})}),h.jsxs("div",{className:"bg-indigo-50 p-4 rounded-md border border-indigo-100",children:[h.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"O que ser gerado?"}),h.jsxs("ul",{className:"list-disc list-inside text-sm text-indigo-700 space-y-1",children:[h.jsx("li",{children:"Cursos: CC, Direito, Medicina, Design."}),h.jsx("li",{children:"Turmas associadas a cada curso."}),h.jsx("li",{children:"Usurios: 1 Admin (admin@school.com), 3 Alunos com perfis variados."}),h.jsx("li",{children:"Eventos Pblicos e Restritos (por curso/turma)."}),h.jsx("li",{children:"Hierarquia: Semana Acadmica com 2 sub-eventos."})]})]}),h.jsx(ei,{isOpen:n,onClose:()=>a(!1),onConfirm:u,title:"Confirmar Reset",message:"Tem certeza absoluta? Essa ao apagar todos os usurios, eventos e inscries atuais e criar dados fictcios.",confirmText:"Sim, Resetar Tudo",isProcessing:s})]})},K4=()=>{const{user:s}=Gs(),{addToast:e}=Qs(),[n,a]=I.useState([]),[o,c]=I.useState(null),[u,g]=I.useState(!0),[p,y]=I.useState(!1),x=async()=>{if(s){g(!0);try{const C=await Me.getEnrollmentsForUser(s.uid);if(C.length===0){a([]),g(!1);return}const U=[...new Set(C.map(H=>H.eventId))],z=await Me.getEventsByIds(U),L=new Map(z.map(H=>[H.id,H])),B=C.map(H=>{const K=L.get(H.eventId);if(!K)return null;const de=K.sessions.find(ye=>ye.id===H.sessionId);return de?{enrollment:H,event:K,session:de}:null}).filter(Boolean);a(B)}catch(C){console.error("Failed to load enrollments data:",C),e("error","Falha ao carregar inscries."),a([])}finally{g(!1)}}};I.useEffect(()=>{x()},[s]);const _=async()=>{if(o){y(!0);try{await Me.cancelEnrollment(o),e("success","Inscrio cancelada com sucesso.")}catch(C){console.error(C),e("error","Erro ao cancelar inscrio.")}finally{c(null),y(!1),x()}}},T=new Date().toISOString().split("T")[0];return h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Minha Agenda"}),u?h.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:h.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Array.from({length:3}).map((C,U)=>h.jsx(Kw,{},U))})}):n.length===0?h.jsx(al,{title:"Agenda Vazia",description:"Voc ainda no se inscreveu em nenhum evento."}):h.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:h.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(({enrollment:C,event:U,session:z})=>{const L=z.date<T;return h.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 gap-4 transition-colors",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-medium text-primary dark:text-indigo-400",children:U.name}),h.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:[" ",cn(z.date),"   ",z.startTime," - ",z.endTime]}),h.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[" ",U.location]}),L&&h.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 mt-2",children:"Evento Finalizado"})]}),h.jsx("div",{children:h.jsx("button",{onClick:()=>c(C.id),disabled:L,className:`w-full sm:w-auto text-sm px-3 py-2 rounded transition flex justify-center border
                                            ${L?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 cursor-not-allowed":"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 border-red-200 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:L?"Concludo":"Cancelar Inscrio"})})]},C.id)})})}),h.jsx(ei,{isOpen:!!o,onClose:()=>c(null),onConfirm:_,title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio neste evento? A vaga ser liberada para outro participante.",confirmText:"Sim, Cancelar",cancelText:"Manter Inscrio",isProcessing:p})]})},Y4=()=>{const[s,e]=I.useState([]);I.useEffect(()=>{(async()=>{const o=await Me.getPublicEvents();e(o.slice(0,3))})()},[]);const n=()=>{const a=document.getElementById("eventos");a&&a.scrollIntoView({behavior:"smooth"})};return h.jsxs("div",{className:"min-h-screen bg-white dark:bg-darkbg flex flex-col font-sans transition-colors duration-300",children:[h.jsx("nav",{className:"bg-white/80 dark:bg-darkcard/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700 sticky top-0 z-50 transition-colors",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between h-20 items-center",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-lg",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsx("span",{className:"text-gray-900 dark:text-white font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(xt,{to:"/login",className:"text-gray-500 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 font-medium px-3 py-2 transition-colors",children:"Login"}),h.jsx(xt,{to:"/login",className:"bg-primary hover:bg-indigo-700 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all transform hover:-translate-y-0.5",children:"Inscrever-se"})]})]})})}),h.jsxs("div",{className:"relative overflow-hidden",children:[h.jsx("div",{className:"max-w-7xl mx-auto",children:h.jsx("div",{className:"relative z-10 pb-8 bg-white dark:bg-darkbg sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32 pt-20 px-4 sm:px-6 lg:px-8 transition-colors",children:h.jsx("main",{className:"mt-10 mx-auto max-w-7xl sm:mt-12 md:mt-16 lg:mt-20 xl:mt-28",children:h.jsxs("div",{className:"sm:text-center lg:text-left",children:[h.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full border border-indigo-100 dark:border-indigo-800 bg-indigo-50 dark:bg-indigo-900/30 text-primary dark:text-indigo-300 text-xs font-bold uppercase tracking-wide mb-4 animate-fade-in",children:" Gesto de Eventos Acadmicos"}),h.jsxs("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white sm:text-5xl md:text-6xl mb-6 animate-slide-in",children:[h.jsx("span",{className:"block",children:"Organize sua agenda"}),h.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:"escolar com inteligncia"})]}),h.jsx("p",{className:"mt-3 text-base text-gray-500 dark:text-gray-400 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 leading-relaxed",children:"Nunca mais perca um workshop ou palestra. O EduEvent centraliza inscries, gerencia conflitos de horrio e mantm voc atualizado sobre todas as atividades do campus."}),h.jsxs("div",{className:"mt-8 sm:mt-10 sm:flex sm:justify-center lg:justify-start gap-4",children:[h.jsx("div",{className:"rounded-md shadow",children:h.jsx(xt,{to:"/login",className:"w-full flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-xl text-white bg-primary hover:bg-indigo-700 md:py-4 md:text-lg transition-all shadow-xl shadow-indigo-200 dark:shadow-none",children:"Comear Agora"})}),h.jsx("div",{className:"mt-3 sm:mt-0",children:h.jsx("button",{onClick:n,className:"w-full flex items-center justify-center px-8 py-4 border border-gray-200 dark:border-gray-700 text-base font-bold rounded-xl text-gray-700 dark:text-gray-300 bg-white dark:bg-darkcard hover:bg-gray-50 dark:hover:bg-gray-700 md:py-4 md:text-lg transition-all",children:"Explorar Eventos"})})]})]})})})}),h.jsxs("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2",children:[h.jsx("img",{className:"h-56 w-full object-cover sm:h-72 md:h-96 lg:w-full lg:h-full opacity-90 dark:opacity-60 transition-opacity",src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",alt:"Estudantes interagindo no campus"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/50 to-transparent lg:via-white/20 dark:from-darkbg dark:via-darkbg/80 dark:lg:via-darkbg/20"})]})]}),h.jsx("div",{className:"bg-indigo-900 dark:bg-gray-900 py-12 border-y border-indigo-800 dark:border-gray-800 transition-colors",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"+1.5k"}),h.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Alunos Ativos"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"350+"}),h.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Eventos Realizados"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"100%"}),h.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Organizado"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"24/7"}),h.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Disponvel"})]})]})})}),h.jsx("div",{className:"py-24 bg-gray-50 dark:bg-darkbg transition-colors",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-base text-primary dark:text-indigo-400 font-bold tracking-wide uppercase",children:"Recursos"}),h.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 dark:text-white sm:text-4xl",children:"Tudo que voc precisa para gerenciar atividades"}),h.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 dark:text-gray-400 mx-auto",children:"Nossa plataforma foi desenhada para simplificar a vida acadmica, eliminando planilhas e confuso."})]}),h.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl p-8 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 dark:border-gray-700",children:[h.jsx("div",{className:"h-12 w-12 bg-indigo-100 dark:bg-indigo-900/50 rounded-xl flex items-center justify-center mb-6",children:h.jsx("svg",{className:"h-6 w-6 text-primary dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:"Gesto de Tempo Real"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:"O sistema impede automaticamente inscries em eventos com horrios conflitantes. Nunca mais se preocupe com choque de agenda."})]}),h.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl p-8 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 dark:border-gray-700",children:[h.jsx("div",{className:"h-12 w-12 bg-emerald-100 dark:bg-emerald-900/50 rounded-xl flex items-center justify-center mb-6",children:h.jsx("svg",{className:"h-6 w-6 text-secondary dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:"Inscrio Instantnea"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:"Garanta sua vaga em workshops e palestras com apenas um clique. Receba confirmao imediata e acompanhe seu status."})]}),h.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl p-8 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 dark:border-gray-700",children:[h.jsx("div",{className:"h-12 w-12 bg-purple-100 dark:bg-purple-900/50 rounded-xl flex items-center justify-center mb-6",children:h.jsx("svg",{className:"h-6 w-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:"Acesso Mobile"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:"Plataforma totalmente responsiva. Consulte seus eventos, locais e horrios diretamente do seu smartphone, onde estiver."})]})]})]})}),h.jsxs("div",{id:"eventos",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 w-full",children:[h.jsxs("div",{className:"flex justify-between items-end mb-12",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Prximos Eventos"}),h.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Confira o que est rolando no campus esta semana."})]}),h.jsxs(xt,{to:"/login",className:"hidden md:flex items-center font-bold text-primary dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 transition",children:["Ver todos os eventos ",h.jsx("span",{className:"ml-2",children:""})]})]}),s.length===0?h.jsx("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800 rounded-3xl border border-dashed border-gray-300 dark:border-gray-700",children:h.jsx("p",{className:"text-gray-400 text-lg",children:"Nenhum evento pblico em destaque no momento."})}):h.jsx("div",{className:"grid gap-8 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:s.map(a=>{var g;const o=(g=a.sessions[0])!=null&&g.date?new Date(a.sessions[0].date):new Date,c=o.getDate(),u=o.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return h.jsxs("div",{className:"group flex flex-col bg-white dark:bg-darkcard rounded-2xl shadow-sm hover:shadow-2xl transition-all duration-300 border border-gray-100 dark:border-gray-700 overflow-hidden hover:-translate-y-1",children:[h.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-primary dark:text-indigo-300 rounded-lg p-2 text-center min-w-[60px]",children:[h.jsx("span",{className:"block text-xs font-bold",children:u}),h.jsx("span",{className:"block text-xl font-extrabold leading-none",children:c})]}),h.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-full font-bold",children:[a.sessions.length," Sesses"]})]}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 line-clamp-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:a.name}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-1",children:a.description}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mt-auto pt-4 border-t border-gray-50 dark:border-gray-700",children:[h.jsxs("svg",{className:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.location]})]}),h.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-6 py-4",children:h.jsx(xt,{to:"/login",className:"block w-full text-center font-bold text-primary dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 transition",children:"Garantir Vaga "})})]},a.id)})}),h.jsx("div",{className:"mt-8 text-center md:hidden",children:h.jsx(xt,{to:"/login",className:"font-bold text-primary dark:text-indigo-400",children:"Ver todos os eventos "})})]}),h.jsx("div",{className:"bg-primary dark:bg-indigo-800 transition-colors",children:h.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between",children:[h.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl mb-4 md:mb-0",children:[h.jsx("span",{className:"block",children:"Pronto para organizar sua agenda?"}),h.jsx("span",{className:"block text-indigo-200 text-2xl mt-1",children:"Crie sua conta gratuitamente hoje mesmo."})]}),h.jsx("div",{className:"flex space-x-3",children:h.jsx(xt,{to:"/login",className:"bg-white text-primary font-bold px-6 py-3 rounded-lg shadow hover:bg-indigo-50 transition",children:"Criar Conta"})})]})}),h.jsx("footer",{className:"bg-gray-900 dark:bg-black text-white mt-auto transition-colors",children:h.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-2xl font-bold tracking-tight text-white",children:"EduEvent"}),h.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Facilitando a gesto de eventos acadmicos e conectando alunos ao conhecimento de forma organizada e eficiente."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Plataforma"}),h.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[h.jsx("li",{children:h.jsx("a",{href:"#",className:"hover:text-white transition",children:"Eventos"})}),h.jsx("li",{children:h.jsx("a",{href:"#",className:"hover:text-white transition",children:"Cursos"})}),h.jsx("li",{children:h.jsx("a",{href:"#",className:"hover:text-white transition",children:"Login Administrativo"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Contato"}),h.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[h.jsxs("li",{className:"flex items-center",children:[h.jsx("span",{className:"mr-2",children:""})," suporte@eduevent.com"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("span",{className:"mr-2",children:""})," Campus Principal, Bloco A"]})]})]})]}),h.jsx("div",{className:"mt-12 border-t border-gray-800 pt-8 text-center text-sm text-gray-500",children:" 2024 EduEvent System. Todos os direitos reservados."})]})})]})},X4=()=>{const{id:s}=m_(),{user:e}=Gs(),n=Ya(),[a,o]=I.useState(null),[c,u]=I.useState([]),[g,p]=I.useState([]),[y,x]=I.useState(!0),[_,T]=I.useState(null),[C,U]=I.useState(null),z=I.useCallback(async(A=!0)=>{if(!(!s||!e)){A&&x(!0);try{const[N,O,j]=await Promise.all([Me.getEventById(s),Me.getEventsByParentId(s),Me.getEnrollmentsForUser(e.uid)]);if(!N){n("/dashboard");return}o(N),u(O),p(j)}catch(N){console.error(N)}finally{A&&x(!1)}}},[s,e,n]),L=I.useCallback(()=>{z(!1),U(null)},[z]),{handleEnroll:B,handleCancel:H,isProcessing:K,conflictData:de,clearState:ye}=$w(e,L);I.useEffect(()=>{z()},[z]),I.useEffect(()=>{if(_){const N=[a,...c].filter(Boolean).find(O=>O.id===_.id);N&&JSON.stringify(N)!==JSON.stringify(_)&&T(N)}},[a,c,_]);const be=(A,N)=>g.find(O=>O.eventId===A&&O.sessionId===N),k=A=>{ye(),T(A)};return y?h.jsx("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400 font-medium",children:"Carregando detalhes do evento..."}):a?h.jsxs("div",{className:"space-y-8 pb-12",children:[h.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:h.jsxs("ol",{className:"flex items-center space-x-2",children:[h.jsx("li",{children:h.jsx(xt,{to:"/dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-indigo-400 font-medium transition",children:"Eventos"})}),h.jsx("li",{children:h.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"/"})}),h.jsx("li",{className:"text-gray-900 dark:text-white font-semibold","aria-current":"page",children:a.name})]})}),h.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),h.jsx("div",{className:"p-8 md:p-10",children:h.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-xs font-bold uppercase tracking-wide mb-4 border border-indigo-100 dark:border-indigo-900/50",children:"Evento Principal"}),h.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight",children:a.name}),h.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-4xl",children:a.description}),h.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 dark:text-gray-400 text-sm font-medium",children:[h.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[h.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.location]}),h.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[h.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.sessions.length," Sesses Principais"]})]})]}),a.sessions.length>0&&h.jsx("div",{className:"flex-shrink-0",children:h.jsxs("button",{onClick:()=>k(a),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao Geral",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Atividades & Sub-eventos"}),h.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"})]}),c.length===0?h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-12 text-center",children:[h.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(A=>{const N=A.sessions.length===1?A.sessions[0]:null,O=N?N.capacity:0,j=N?N.filled:0,P=O>0?j/O*100:0,R=O>0&&j>=O,Pe=A.sessions.some(me=>be(A.id,me.id));return h.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 dark:bg-gray-700 group-hover:bg-primary transition-colors"}),h.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:A.name}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-1",children:A.description}),h.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto pt-4 border-t border-gray-50 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),h.jsx("span",{className:"font-medium",children:A.location})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),h.jsx("span",{className:"font-medium",children:A.sessions.length>1?`${A.sessions.length} opes de horrio`:`${cn(N==null?void 0:N.date)}  ${N==null?void 0:N.startTime}`})]})]}),N&&h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:h.jsx("span",{className:R?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:R?"LOTADO":`${O-j} vagas`})}),h.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5",children:h.jsx("div",{className:`h-full rounded-full ${R?"bg-red-500":"bg-emerald-500"}`,style:{width:`${P}%`}})})]})]}),h.jsx("button",{onClick:()=>k(A),className:`w-full py-3 font-bold text-sm transition-colors border-t border-gray-100 dark:border-gray-700
                                        ${Pe?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"bg-gray-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white text-primary dark:text-indigo-300"}`,children:Pe?"Gerenciar Inscrio":A.sessions.length>1?"Escolher Horrio":R?"Ver Detalhes":"Inscrever-se Agora"})]},A.id)})}),h.jsx(Pi,{isOpen:!!_,onClose:()=>T(null),title:_?_.name:"",children:h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:h.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:_==null?void 0:_.description})}),de&&h.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),h.jsxs("div",{className:"ml-3",children:[h.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),h.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[h.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),h.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[h.jsx("p",{className:"font-semibold",children:de.name}),h.jsx("p",{className:"text-xs",children:de.time})]})]})]})]})}),h.jsxs("div",{children:[h.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[h.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),h.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:_==null?void 0:_.sessions.map(A=>{const N=be(_.id,A.id),O=!!N,j=A.filled>=A.capacity,P=A.filled/A.capacity*100;return h.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${O?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":j?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-90":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:cn(A.date)}),O&&h.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:h.jsxs("span",{className:"flex items-center",children:[" ",A.startTime," - ",A.endTime]})}),h.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:`h-full rounded-full ${j?"bg-red-500":P>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(P,100)}%`}})}),h.jsx("span",{className:`text-xs font-bold w-24 text-right ${j?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:j?"ESGOTADO":`${A.capacity-A.filled} vagas`})]})]}),h.jsx("div",{className:"flex items-center",children:O?h.jsx("button",{onClick:()=>N&&U(N.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 dark:border-red-900 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):h.jsx(Gi,{onClick:()=>_&&B(_,A.id),isLoading:K,disabled:j,className:`w-full sm:w-auto ${j?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":""}`,children:j?"Lotado":"Inscrever"})})]})},A.id)})})]})]})}),h.jsx(ei,{isOpen:!!C,onClose:()=>U(null),onConfirm:()=>C&&H(C),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:K})]}):h.jsx("div",{className:"p-12 text-center text-red-500 dark:text-red-400 font-bold",children:"Evento no encontrado."})},js=({children:s,roleRequired:e})=>{const{user:n,loading:a}=Gs();return a?h.jsx("div",{className:"h-screen flex items-center justify-center text-primary font-medium dark:bg-darkbg dark:text-gray-200",children:"Carregando EduEvent..."}):n?!n.isOnboarded&&window.location.hash!=="#/complete-profile"?h.jsx(Ud,{to:"/complete-profile"}):e&&n.role!==e?h.jsx(Ud,{to:"/dashboard"}):h.jsx(h.Fragment,{children:s}):h.jsx(Ud,{to:"/login"})},J4=()=>{const{user:s}=Gs();return h.jsxs(NS,{children:[h.jsx(yr,{path:"/",element:s?h.jsx(Ud,{to:"/dashboard"}):h.jsx(Y4,{})}),h.jsx(yr,{path:"/login",element:h.jsx(j4,{})}),h.jsx(yr,{path:"/complete-profile",element:h.jsx(js,{children:h.jsx(D4,{})})}),h.jsx(yr,{path:"/dashboard",element:h.jsx(js,{children:h.jsx(Ia,{children:h.jsx(z4,{})})})}),h.jsx(yr,{path:"/event/:id",element:h.jsx(js,{children:h.jsx(Ia,{children:h.jsx(X4,{})})})}),h.jsx(yr,{path:"/my-enrollments",element:h.jsx(js,{children:h.jsx(Ia,{children:h.jsx(K4,{})})})}),h.jsx(yr,{path:"/admin/events",element:h.jsx(js,{roleRequired:it.ADMIN,children:h.jsx(Ia,{children:h.jsx(B4,{})})})}),h.jsx(yr,{path:"/admin/events/:id/enrollments",element:h.jsx(js,{roleRequired:it.ADMIN,children:h.jsx(Ia,{children:h.jsx(Q4,{})})})}),h.jsx(yr,{path:"/admin/courses",element:h.jsx(js,{roleRequired:it.ADMIN,children:h.jsx(Ia,{children:h.jsx(G4,{})})})}),h.jsx(yr,{path:"/admin/users",element:h.jsx(js,{roleRequired:it.ADMIN,children:h.jsx(Ia,{children:h.jsx(F4,{})})})}),h.jsx(yr,{path:"/admin/dev",element:h.jsx(js,{roleRequired:it.ADMIN,children:h.jsx(Ia,{children:h.jsx($4,{})})})})]})};function W4(){return h.jsx(C4,{children:h.jsx(R4,{children:h.jsx(I4,{children:h.jsx(XS,{children:h.jsx(J4,{})})})})})}const Yw=document.getElementById("root");if(!Yw)throw new Error("Could not find root element to mount to");const Z4=V1.createRoot(Yw);Z4.render(h.jsx(Fc.StrictMode,{children:h.jsx(W4,{})}));
