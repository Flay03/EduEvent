(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Yx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Rm={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function m1(){if(Xv)return sc;Xv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:c}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var Wv;function p1(){return Wv||(Wv=1,Rm.exports=m1()),Rm.exports}var f=p1(),Im={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function g1(){if(Jv)return Me;Jv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,U={};function $(M,Z,oe){this.props=M,this.context=Z,this.refs=U,this.updater=oe||P}$.prototype.isReactComponent={},$.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},$.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ie(){}ie.prototype=$.prototype;function J(M,Z,oe){this.props=M,this.context=Z,this.refs=U,this.updater=oe||P}var fe=J.prototype=new ie;fe.constructor=J,z(fe,$.prototype),fe.isPureReactComponent=!0;var ae=Array.isArray;function he(){}var R={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(M,Z,oe){var de=oe.ref;return{$$typeof:i,type:M,key:Z,ref:de!==void 0?de:null,props:oe}}function k(M,Z){return I(M.type,Z,M.props)}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function N(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(oe){return Z[oe]})}var A=/\/+/g;function be(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?N(""+M.key):Z.toString(36)}function Te(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(he,he):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Q(M,Z,oe,de,Ne){var Ce=typeof M;(Ce==="undefined"||Ce==="boolean")&&(M=null);var Le=!1;if(M===null)Le=!0;else switch(Ce){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(M.$$typeof){case i:case e:Le=!0;break;case x:return Le=M._init,Q(Le(M._payload),Z,oe,de,Ne)}}if(Le)return Ne=Ne(M),Le=de===""?"."+be(M,0):de,ae(Ne)?(oe="",Le!=null&&(oe=Le.replace(A,"$&/")+"/"),Q(Ne,Z,oe,"",function($n){return $n})):Ne!=null&&(V(Ne)&&(Ne=k(Ne,oe+(Ne.key==null||M&&M.key===Ne.key?"":(""+Ne.key).replace(A,"$&/")+"/")+Le)),Z.push(Ne)),1;Le=0;var xt=de===""?".":de+":";if(ae(M))for(var rt=0;rt<M.length;rt++)de=M[rt],Ce=xt+be(de,rt),Le+=Q(de,Z,oe,Ce,Ne);else if(rt=O(M),typeof rt=="function")for(M=rt.call(M),rt=0;!(de=M.next()).done;)de=de.value,Ce=xt+be(de,rt++),Le+=Q(de,Z,oe,Ce,Ne);else if(Ce==="object"){if(typeof M.then=="function")return Q(Te(M),Z,oe,de,Ne);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Le}function le(M,Z,oe){if(M==null)return M;var de=[],Ne=0;return Q(M,de,"","",function(Ce){return Z.call(oe,Ce,Ne++)}),de}function _e(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(oe){(M._status===0||M._status===-1)&&(M._status=1,M._result=oe)},function(oe){(M._status===0||M._status===-1)&&(M._status=2,M._result=oe)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Oe={map:le,forEach:function(M,Z,oe){le(M,function(){Z.apply(this,arguments)},oe)},count:function(M){var Z=0;return le(M,function(){Z++}),Z},toArray:function(M){return le(M,function(Z){return Z})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Me.Activity=E,Me.Children=Oe,Me.Component=$,Me.Fragment=n,Me.Profiler=o,Me.PureComponent=J,Me.StrictMode=r,Me.Suspense=y,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Me.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Me.cache=function(M){return function(){return M.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(M,Z,oe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var de=z({},M.props),Ne=M.key;if(Z!=null)for(Ce in Z.key!==void 0&&(Ne=""+Z.key),Z)!C.call(Z,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&Z.ref===void 0||(de[Ce]=Z[Ce]);var Ce=arguments.length-2;if(Ce===1)de.children=oe;else if(1<Ce){for(var Le=Array(Ce),xt=0;xt<Ce;xt++)Le[xt]=arguments[xt+2];de.children=Le}return I(M.type,Ne,de)},Me.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Me.createElement=function(M,Z,oe){var de,Ne={},Ce=null;if(Z!=null)for(de in Z.key!==void 0&&(Ce=""+Z.key),Z)C.call(Z,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ne[de]=Z[de]);var Le=arguments.length-2;if(Le===1)Ne.children=oe;else if(1<Le){for(var xt=Array(Le),rt=0;rt<Le;rt++)xt[rt]=arguments[rt+2];Ne.children=xt}if(M&&M.defaultProps)for(de in Le=M.defaultProps,Le)Ne[de]===void 0&&(Ne[de]=Le[de]);return I(M,Ce,Ne)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(M){return{$$typeof:p,render:M}},Me.isValidElement=V,Me.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:_e}},Me.memo=function(M,Z){return{$$typeof:g,type:M,compare:Z===void 0?null:Z}},Me.startTransition=function(M){var Z=R.T,oe={};R.T=oe;try{var de=M(),Ne=R.S;Ne!==null&&Ne(oe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(he,ge)}catch(Ce){ge(Ce)}finally{Z!==null&&oe.types!==null&&(Z.types=oe.types),R.T=Z}},Me.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Me.use=function(M){return R.H.use(M)},Me.useActionState=function(M,Z,oe){return R.H.useActionState(M,Z,oe)},Me.useCallback=function(M,Z){return R.H.useCallback(M,Z)},Me.useContext=function(M){return R.H.useContext(M)},Me.useDebugValue=function(){},Me.useDeferredValue=function(M,Z){return R.H.useDeferredValue(M,Z)},Me.useEffect=function(M,Z){return R.H.useEffect(M,Z)},Me.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Me.useId=function(){return R.H.useId()},Me.useImperativeHandle=function(M,Z,oe){return R.H.useImperativeHandle(M,Z,oe)},Me.useInsertionEffect=function(M,Z){return R.H.useInsertionEffect(M,Z)},Me.useLayoutEffect=function(M,Z){return R.H.useLayoutEffect(M,Z)},Me.useMemo=function(M,Z){return R.H.useMemo(M,Z)},Me.useOptimistic=function(M,Z){return R.H.useOptimistic(M,Z)},Me.useReducer=function(M,Z,oe){return R.H.useReducer(M,Z,oe)},Me.useRef=function(M){return R.H.useRef(M)},Me.useState=function(M){return R.H.useState(M)},Me.useSyncExternalStore=function(M,Z,oe){return R.H.useSyncExternalStore(M,Z,oe)},Me.useTransition=function(){return R.H.useTransition()},Me.version="19.2.0",Me}var Zv;function wp(){return Zv||(Zv=1,Im.exports=g1()),Im.exports}var D=wp();const Rc=Yx(D);var Dm={exports:{}},ic={},jm={exports:{}},Om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function y1(){return e_||(e_=1,(function(i){function e(Q,le){var _e=Q.length;Q.push(le);e:for(;0<_e;){var ge=_e-1>>>1,Oe=Q[ge];if(0<o(Oe,le))Q[ge]=le,Q[_e]=Oe,_e=ge;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var le=Q[0],_e=Q.pop();if(_e!==le){Q[0]=_e;e:for(var ge=0,Oe=Q.length,M=Oe>>>1;ge<M;){var Z=2*(ge+1)-1,oe=Q[Z],de=Z+1,Ne=Q[de];if(0>o(oe,_e))de<Oe&&0>o(Ne,oe)?(Q[ge]=Ne,Q[de]=_e,ge=de):(Q[ge]=oe,Q[Z]=_e,ge=Z);else if(de<Oe&&0>o(Ne,_e))Q[ge]=Ne,Q[de]=_e,ge=de;else break e}}return le}function o(Q,le){var _e=Q.sortIndex-le.sortIndex;return _e!==0?_e:Q.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var y=[],g=[],x=1,E=null,T=3,O=!1,P=!1,z=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function fe(Q){for(var le=n(g);le!==null;){if(le.callback===null)r(g);else if(le.startTime<=Q)r(g),le.sortIndex=le.expirationTime,e(y,le);else break;le=n(g)}}function ae(Q){if(z=!1,fe(Q),!P)if(n(y)!==null)P=!0,he||(he=!0,N());else{var le=n(g);le!==null&&Te(ae,le.startTime-Q)}}var he=!1,R=-1,C=5,I=-1;function k(){return U?!0:!(i.unstable_now()-I<C)}function V(){if(U=!1,he){var Q=i.unstable_now();I=Q;var le=!0;try{e:{P=!1,z&&(z=!1,ie(R),R=-1),O=!0;var _e=T;try{t:{for(fe(Q),E=n(y);E!==null&&!(E.expirationTime>Q&&k());){var ge=E.callback;if(typeof ge=="function"){E.callback=null,T=E.priorityLevel;var Oe=ge(E.expirationTime<=Q);if(Q=i.unstable_now(),typeof Oe=="function"){E.callback=Oe,fe(Q),le=!0;break t}E===n(y)&&r(y),fe(Q)}else r(y);E=n(y)}if(E!==null)le=!0;else{var M=n(g);M!==null&&Te(ae,M.startTime-Q),le=!1}}break e}finally{E=null,T=_e,O=!1}le=void 0}}finally{le?N():he=!1}}}var N;if(typeof J=="function")N=function(){J(V)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,be=A.port2;A.port1.onmessage=V,N=function(){be.postMessage(null)}}else N=function(){$(V,0)};function Te(Q,le){R=$(function(){Q(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var _e=T;T=le;try{return Q()}finally{T=_e}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var _e=T;T=Q;try{return le()}finally{T=_e}},i.unstable_scheduleCallback=function(Q,le,_e){var ge=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ge+_e:ge):_e=ge,Q){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=_e+Oe,Q={id:x++,callback:le,priorityLevel:Q,startTime:_e,expirationTime:Oe,sortIndex:-1},_e>ge?(Q.sortIndex=_e,e(g,Q),n(y)===null&&Q===n(g)&&(z?(ie(R),R=-1):z=!0,Te(ae,_e-ge))):(Q.sortIndex=Oe,e(y,Q),P||O||(P=!0,he||(he=!0,N()))),Q},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Q){var le=T;return function(){var _e=T;T=le;try{return Q.apply(this,arguments)}finally{T=_e}}}})(Om)),Om}var t_;function v1(){return t_||(t_=1,jm.exports=y1()),jm.exports}var Mm={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function _1(){if(n_)return dn;n_=1;var i=wp();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,g,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:y,containerInfo:g,implementation:x}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dn.createPortal=function(y,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,x)},dn.flushSync=function(y){var g=h.T,x=r.p;try{if(h.T=null,r.p=2,y)return y()}finally{h.T=g,r.p=x,r.d.f()}},dn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},dn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},dn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var x=g.as,E=p(x,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:O}):x==="script"&&r.d.X(y,{crossOrigin:E,integrity:T,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},dn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},dn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,E=p(x,g.crossOrigin);r.d.L(y,x,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},dn.preloadModule=function(y,g){if(typeof y=="string")if(g){var x=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},dn.requestFormReset=function(y){r.d.r(y)},dn.unstable_batchedUpdates=function(y,g){return y(g)},dn.useFormState=function(y,g,x){return h.H.useFormState(y,g,x)},dn.useFormStatus=function(){return h.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var s_;function x1(){if(s_)return Mm.exports;s_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Mm.exports=_1(),Mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function b1(){if(i_)return ic;i_=1;var i=v1(),e=wp(),n=x1();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return y(d),t;if(m===l)return y(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var _=!1,w=d.child;w;){if(w===a){_=!0,a=d,l=m;break}if(w===l){_=!0,l=d,a=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===a){_=!0,a=m,l=d;break}if(w===l){_=!0,l=m,a=d;break}w=w.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),J=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function N(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case $:return"Profiler";case U:return"StrictMode";case ae:return"Suspense";case he:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case J:return t.displayName||"Context";case ie:return(t._context.displayName||"Context")+".Consumer";case fe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return s=t.displayName||null,s!==null?s:be(t.type)||"Memo";case C:s=t._payload,t=t._init;try{return be(t(s))}catch{}}return null}var Te=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ge=[],Oe=-1;function M(t){return{current:t}}function Z(t){0>Oe||(t.current=ge[Oe],ge[Oe]=null,Oe--)}function oe(t,s){Oe++,ge[Oe]=t.current,t.current=s}var de=M(null),Ne=M(null),Ce=M(null),Le=M(null);function xt(t,s){switch(oe(Ce,s),oe(Ne,t),oe(de,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?_v(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=_v(s),t=xv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(de),oe(de,t)}function rt(){Z(de),Z(Ne),Z(Ce)}function $n(t){t.memoizedState!==null&&oe(Le,t);var s=de.current,a=xv(s,t.type);s!==a&&(oe(Ne,t),oe(de,a))}function jn(t){Ne.current===t&&(Z(de),Z(Ne)),Le.current===t&&(Z(Le),Zl._currentValue=_e)}var ds,re;function $e(t){if(ds===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ds=s&&s[1]||"",re=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+t+re}var yn=!1;function On(t,s){if(!t||yn)return"";yn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var G=Y}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Y){G=Y}t.call(ne.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var j=_.split(`
`),F=w.split(`
`);for(d=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===j.length||d===F.length)for(l=j.length-1,d=F.length-1;1<=l&&0<=d&&j[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(j[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||j[l]!==F[d]){var W=`
`+j[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=d);break}}}finally{yn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$e(a):""}function oi(t,s){switch(t.tag){case 26:case 27:case 5:return $e(t.type);case 16:return $e("Lazy");case 13:return t.child!==s&&s!==null?$e("Suspense Fallback"):$e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return On(t.type,!1);case 11:return On(t.type.render,!1);case 1:return On(t.type,!0);case 31:return $e("Activity");default:return""}}function Qr(t){try{var s="",a=null;do s+=oi(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Tt=Object.prototype.hasOwnProperty,Rt=i.unstable_scheduleCallback,Ds=i.unstable_cancelCallback,sl=i.unstable_shouldYield,La=i.unstable_requestPaint,tn=i.unstable_now,li=i.unstable_getCurrentPriorityLevel,Kr=i.unstable_ImmediatePriority,Fi=i.unstable_UserBlockingPriority,fs=i.unstable_NormalPriority,Pa=i.unstable_LowPriority,te=i.unstable_IdlePriority,ye=i.log,Je=i.unstable_setDisableYieldValue,ht=null,bt=null;function vn(t){if(typeof ye=="function"&&Je(t),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(ht,t)}catch{}}var gt=Math.clz32?Math.clz32:En,Yr=Math.log,ms=Math.LN2;function En(t){return t>>>=0,t===0?32:31-(Yr(t)/ms|0)|0}var js=256,$r=262144,Mt=4194304;function Os(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ms(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?d=Os(l):(_&=w,_!==0?d=Os(_):a||(a=w&~t,a!==0&&(d=Os(a))))):(w=l&~m,w!==0?d=Os(w):_!==0?d=Os(_):a||(a=l&~t,a!==0&&(d=Os(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function ps(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function jd(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kc(){var t=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),t}function Vs(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Xr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Od(t,s,a,l,d,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,j=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-gt(a),ne=1<<W;w[W]=0,j[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var Y=G[W];Y!==null&&(Y.lane&=-536870913)}a&=~ne}l!==0&&Wr(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function Wr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-gt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function il(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-gt(a),d=1<<l;d&s|t[l]&s&&(t[l]|=s),a&=~d}}function rl(t,s){var a=s&-s;return a=(a&42)!==0?1:Jr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Jr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Yc(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:Hv(t.type))}function gs(t,s){var a=le.p;try{return le.p=t,s()}finally{le.p=a}}var ys=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ys,$t="__reactProps$"+ys,ks="__reactContainer$"+ys,Ua="__reactEvents$"+ys,Md="__reactListeners$"+ys,$c="__reactHandles$"+ys,Xc="__reactResources$"+ys,Ls="__reactMarker$"+ys;function za(t){delete t[Vt],delete t[$t],delete t[Ua],delete t[Md],delete t[$c]}function Ps(t){var s=t[Vt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ks]||a[Vt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Nv(t);t!==null;){if(a=t[Vt])return a;t=Nv(t)}return s}t=a,a=t.parentNode}return null}function Xn(t){if(t=t[Vt]||t[ks]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Mn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Us(t){var s=t[Xc];return s||(s=t[Xc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function kt(t){t[Ls]=!0}var al=new Set,ol={};function zs(t,s){Bs(t,s),Bs(t+"Capture",s)}function Bs(t,s){for(ol[t]=s,t=0;t<s.length;t++)al.add(s[t])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},ul={};function Wc(t){return Tt.call(ul,t)?!0:Tt.call(cl,t)?!1:ll.test(t)?ul[t]=!0:(cl[t]=!0,!1)}function Ba(t,s,a){if(Wc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Vn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Lt(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Xt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hl(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function tt(t){if(!t._valueTracker){var s=Gi(t)?"checked":"value";t._valueTracker=hl(t,s,""+t[s])}}function Zr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Gi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ea=/[\n"\\]/g;function wn(t){return t.replace(ea,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qa(t,s,a,l,d,m,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Xt(s)):t.value!==""+Xt(s)&&(t.value=""+Xt(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?dl(t,_,Xt(s)):a!=null?dl(t,_,Xt(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Xt(w):t.removeAttribute("name")}function Jc(t,s,a,l,d,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){tt(t);return}a=a!=null?""+Xt(a):"",s=s!=null?""+Xt(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),tt(t)}function dl(t,s,a){s==="number"&&qs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qi(t,s,a,l){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Xt(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function Zc(t,s,a){if(s!=null&&(s=""+Xt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Xt(a):""}function Ki(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Te(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Xt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),tt(t)}function Tn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fl(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||eu.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function ml(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&fl(t,d,l)}else for(var m in s)s.hasOwnProperty(m)&&fl(t,m,s[m])}function Ha(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(t){return Yi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vs(){}var pl=null;function Wn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $i=null,Hs=null;function ta(t){var s=Xn(t);if(s&&(t=s.stateNode)){var a=t[$t]||null;e:switch(t=s.stateNode,s.type){case"input":if(qa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var d=l[$t]||null;if(!d)throw Error(r(90));qa(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Zr(l)}break e;case"textarea":Zc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Qi(t,!!a.multiple,s,!1)}}}var Ga=!1;function Xi(t,s,a){if(Ga)return t(s,a);Ga=!0;try{var l=t(s);return l}finally{if(Ga=!1,($i!==null||Hs!==null)&&(Yu(),$i&&(s=$i,t=Hs,Hs=$i=null,ta(s),t)))for(s=0;s<t.length;s++)ta(t[s])}}function _s(t,s){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=!1;if(Jn)try{var at={};Object.defineProperty(at,"passive",{get:function(){na=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{na=!1}var Fs=null,gl=null,sa=null;function yl(){if(sa)return sa;var t,s=gl,a=s.length,l,d="value"in Fs?Fs.value:Fs.textContent,m=d.length;for(t=0;t<a&&s[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===d[m-l];l++);return sa=d.slice(t,1<l?1-l:void 0)}function ia(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function xs(){return!1}function nn(t){function s(a,l,d,m,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ui:xs,this.isPropagationStopped=xs,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),s}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=nn(hi),Wi=E({},hi,{view:0,detail:0}),vl=nn(Wi),Ji,Qa,Qs,Ka=E({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Ji=t.screenX-Qs.screenX,Qa=t.screenY-Qs.screenY):Qa=Ji=0,Qs=t),Ji)},movementY:function(t){return"movementY"in t?t.movementY:Qa}}),_l=nn(Ka),ra=E({},Ka,{dataTransfer:0}),nu=nn(ra),su=E({},Wi,{relatedTarget:0}),aa=nn(su),xl=E({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),iu=nn(xl),Ya=E({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ru=nn(Ya),au=E({},hi,{data:0}),Ks=nn(au),ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=cu[t])?!!s[t]:!1}function Zi(){return uu}var _n=E({},Wi,{key:function(t){if(t.key){var s=ou[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hu=nn(_n),du=E({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),di=nn(du),u=E({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),v=nn(u),b=E({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=nn(b),q=E({},Ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=nn(q),ue=E({},hi,{newState:0,oldState:0}),Ve=nn(ue),It=[9,13,27,32],Ze=Jn&&"CompositionEvent"in window,yt=null;Jn&&"documentMode"in document&&(yt=document.documentMode);var Zn=Jn&&"TextEvent"in window&&!yt,Ys=Jn&&(!Ze||yt&&8<yt&&11>=yt),bs=" ",Es=!1;function oa(t,s){switch(t){case"keyup":return It.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $a(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xa=!1;function Pw(t,s){switch(t){case"compositionend":return $a(s);case"keypress":return s.which!==32?null:(Es=!0,bs);case"textInput":return t=s.data,t===bs&&Es?null:t;default:return null}}function Uw(t,s){if(Xa)return t==="compositionend"||!Ze&&oa(t,s)?(t=yl(),sa=gl=Fs=null,Xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ys&&s.locale!=="ko"?null:s.data;default:return null}}var zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ig(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!zw[t.type]:s==="textarea"}function Dg(t,s,a,l){$i?Hs?Hs.push(l):Hs=[l]:$i=l,s=th(s,"onChange"),0<s.length&&(a=new Gs("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var bl=null,El=null;function Bw(t){fv(t,0)}function fu(t){var s=Mn(t);if(Zr(s))return t}function jg(t,s){if(t==="change")return s}var Og=!1;if(Jn){var Vd;if(Jn){var kd="oninput"in document;if(!kd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),kd=typeof Mg.oninput=="function"}Vd=kd}else Vd=!1;Og=Vd&&(!document.documentMode||9<document.documentMode)}function Vg(){bl&&(bl.detachEvent("onpropertychange",kg),El=bl=null)}function kg(t){if(t.propertyName==="value"&&fu(El)){var s=[];Dg(s,El,t,Wn(t)),Xi(Bw,s)}}function qw(t,s,a){t==="focusin"?(Vg(),bl=s,El=a,bl.attachEvent("onpropertychange",kg)):t==="focusout"&&Vg()}function Hw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fu(El)}function Fw(t,s){if(t==="click")return fu(s)}function Gw(t,s){if(t==="input"||t==="change")return fu(s)}function Qw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var kn=typeof Object.is=="function"?Object.is:Qw;function wl(t,s){if(kn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Tt.call(s,d)||!kn(t[d],s[d]))return!1}return!0}function Lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pg(t,s){var a=Lg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lg(a)}}function Ug(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ug(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function zg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=qs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=qs(t.document)}return s}function Ld(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Kw=Jn&&"documentMode"in document&&11>=document.documentMode,Wa=null,Pd=null,Tl=null,Ud=!1;function Bg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ud||Wa==null||Wa!==qs(l)||(l=Wa,"selectionStart"in l&&Ld(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tl&&wl(Tl,l)||(Tl=l,l=th(Pd,"onSelect"),0<l.length&&(s=new Gs("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Wa)))}function la(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ja={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},zd={},qg={};Jn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function ca(t){if(zd[t])return zd[t];if(!Ja[t])return t;var s=Ja[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in qg)return zd[t]=s[a];return t}var Hg=ca("animationend"),Fg=ca("animationiteration"),Gg=ca("animationstart"),Yw=ca("transitionrun"),$w=ca("transitionstart"),Xw=ca("transitioncancel"),Qg=ca("transitionend"),Kg=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function ws(t,s){Kg.set(t,s),zs(s,[t])}var mu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},es=[],Za=0,qd=0;function pu(){for(var t=Za,s=qd=Za=0;s<t;){var a=es[s];es[s++]=null;var l=es[s];es[s++]=null;var d=es[s];es[s++]=null;var m=es[s];if(es[s++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}m!==0&&Yg(a,d,m)}}function gu(t,s,a,l){es[Za++]=t,es[Za++]=s,es[Za++]=a,es[Za++]=l,qd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Hd(t,s,a,l){return gu(t,s,a,l),yu(t)}function ua(t,s){return gu(t,null,null,s),yu(t)}function Yg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-gt(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[s]:l.push(s),s.lane=a|536870912),m):null}function yu(t){if(50<Ql)throw Ql=0,Zf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var eo={};function Ww(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,s,a,l){return new Ww(t,s,a,l)}function Fd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fi(t,s){var a=t.alternate;return a===null?(a=Ln(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $g(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function vu(t,s,a,l,d,m){var _=0;if(l=t,typeof t=="function")Fd(t)&&(_=1);else if(typeof t=="string")_=n1(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Ln(31,a,s,d),t.elementType=I,t.lanes=m,t;case z:return ha(a.children,d,m,s);case U:_=8,d|=24;break;case $:return t=Ln(12,a,s,d|2),t.elementType=$,t.lanes=m,t;case ae:return t=Ln(13,a,s,d),t.elementType=ae,t.lanes=m,t;case he:return t=Ln(19,a,s,d),t.elementType=he,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:_=10;break e;case ie:_=9;break e;case fe:_=11;break e;case R:_=14;break e;case C:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=Ln(_,a,s,d),s.elementType=t,s.type=l,s.lanes=m,s}function ha(t,s,a,l){return t=Ln(7,t,l,s),t.lanes=a,t}function Gd(t,s,a){return t=Ln(6,t,null,s),t.lanes=a,t}function Xg(t){var s=Ln(18,null,null,0);return s.stateNode=t,s}function Qd(t,s,a){return s=Ln(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Wg=new WeakMap;function ts(t,s){if(typeof t=="object"&&t!==null){var a=Wg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Qr(s)},Wg.set(t,s),s)}return{value:t,source:s,stack:Qr(s)}}var to=[],no=0,_u=null,Sl=0,ns=[],ss=0,er=null,$s=1,Xs="";function mi(t,s){to[no++]=Sl,to[no++]=_u,_u=t,Sl=s}function Jg(t,s,a){ns[ss++]=$s,ns[ss++]=Xs,ns[ss++]=er,er=t;var l=$s;t=Xs;var d=32-gt(l)-1;l&=~(1<<d),a+=1;var m=32-gt(s)+d;if(30<m){var _=d-d%5;m=(l&(1<<_)-1).toString(32),l>>=_,d-=_,$s=1<<32-gt(s)+d|a<<d|l,Xs=m+t}else $s=1<<m|a<<d|l,Xs=t}function Kd(t){t.return!==null&&(mi(t,1),Jg(t,1,0))}function Yd(t){for(;t===_u;)_u=to[--no],to[no]=null,Sl=to[--no],to[no]=null;for(;t===er;)er=ns[--ss],ns[ss]=null,Xs=ns[--ss],ns[ss]=null,$s=ns[--ss],ns[ss]=null}function Zg(t,s){ns[ss++]=$s,ns[ss++]=Xs,ns[ss++]=er,$s=s.id,Xs=s.overflow,er=t}var sn=null,dt=null,Qe=!1,tr=null,is=!1,$d=Error(r(519));function nr(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Al(ts(s,t)),$d}function ey(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Vt]=t,s[$t]=l,a){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(a=0;a<Yl.length;a++)ze(Yl[a],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),Jc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Ki(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||yv(s.textContent,a)?(l.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),l.onScroll!=null&&ze("scroll",s),l.onScrollEnd!=null&&ze("scrollend",s),l.onClick!=null&&(s.onclick=vs),s=!0):s=!1,s||nr(t,!0)}function ty(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:is=!1;return;case 27:case 3:is=!0;return;default:sn=sn.return}}function so(t){if(t!==sn)return!1;if(!Qe)return ty(t),Qe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||mm(t.type,t.memoizedProps)),a=!a),a&&dt&&nr(t),ty(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=Av(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=Av(t)}else s===27?(s=dt,gr(t.type)?(t=_m,_m=null,dt=t):dt=s):dt=sn?as(t.stateNode.nextSibling):null;return!0}function da(){dt=sn=null,Qe=!1}function Xd(){var t=tr;return t!==null&&(Cn===null?Cn=t:Cn.push.apply(Cn,t),tr=null),t}function Al(t){tr===null?tr=[t]:tr.push(t)}var Wd=M(null),fa=null,pi=null;function sr(t,s,a){oe(Wd,s._currentValue),s._currentValue=a}function gi(t){t._currentValue=Wd.current,Z(Wd)}function Jd(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Zd(t,s,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=d;for(var j=0;j<s.length;j++)if(w.context===s[j]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Jd(m.return,a,t),l||(_=null);break e}m=w.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Jd(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function io(t,s,a,l){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var w=d.type;kn(d.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(d===Le.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Zl):t=[Zl])}d=d.return}t!==null&&Zd(s,t,a,l),s.flags|=262144}function xu(t){for(t=t.firstContext;t!==null;){if(!kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ma(t){fa=t,pi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return ny(fa,t)}function bu(t,s){return fa===null&&ma(t),ny(t,s)}function ny(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},pi===null){if(t===null)throw Error(r(308));pi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else pi=pi.next=s;return a}var Jw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Zw=i.unstable_scheduleCallback,eT=i.unstable_NormalPriority,Pt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new Jw,data:new Map,refCount:0}}function Nl(t){t.refCount--,t.refCount===0&&Zw(eT,function(){t.controller.abort()})}var Cl=null,tf=0,ro=0,ao=null;function tT(t,s){if(Cl===null){var a=Cl=[];tf=0,ro=rm(),ao={status:"pending",value:void 0,then:function(l){a.push(l)}}}return tf++,s.then(sy,sy),s}function sy(){if(--tf===0&&Cl!==null){ao!==null&&(ao.status="fulfilled");var t=Cl;Cl=null,ro=0,ao=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function nT(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var iy=Q.S;Q.S=function(t,s){B0=tn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&tT(t,s),iy!==null&&iy(t,s)};var pa=M(null);function nf(){var t=pa.current;return t!==null?t:ut.pooledCache}function Eu(t,s){s===null?oe(pa,pa.current):oe(pa,s.pool)}function ry(){var t=nf();return t===null?null:{parent:Pt._currentValue,pool:t}}var oo=Error(r(460)),sf=Error(r(474)),wu=Error(r(542)),Tu={then:function(){}};function ay(t){return t=t.status,t==="fulfilled"||t==="rejected"}function oy(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(vs,vs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,cy(t),t;default:if(typeof s.status=="string")s.then(vs,vs);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,cy(t),t}throw ya=s,oo}}function ga(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ya=a,oo):a}}var ya=null;function ly(){if(ya===null)throw Error(r(459));var t=ya;return ya=null,t}function cy(t){if(t===oo||t===wu)throw Error(r(483))}var lo=null,Rl=0;function Su(t){var s=Rl;return Rl+=1,lo===null&&(lo=[]),oy(lo,t,s)}function Il(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Au(t,s){throw s.$$typeof===T?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function uy(t){function s(B,L){if(t){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!t)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function l(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function d(B,L){return B=fi(B,L),B.index=0,B.sibling=null,B}function m(B,L,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,L,H,ee){return L===null||L.tag!==6?(L=Gd(H,B.mode,ee),L.return=B,L):(L=d(L,H),L.return=B,L)}function j(B,L,H,ee){var we=H.type;return we===z?W(B,L,H.props.children,ee,H.key):L!==null&&(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===C&&ga(we)===L.type)?(L=d(L,H.props),Il(L,H),L.return=B,L):(L=vu(H.type,H.key,H.props,null,B.mode,ee),Il(L,H),L.return=B,L)}function F(B,L,H,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Qd(H,B.mode,ee),L.return=B,L):(L=d(L,H.children||[]),L.return=B,L)}function W(B,L,H,ee,we){return L===null||L.tag!==7?(L=ha(H,B.mode,ee,we),L.return=B,L):(L=d(L,H),L.return=B,L)}function ne(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Gd(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case O:return H=vu(L.type,L.key,L.props,null,B.mode,H),Il(H,L),H.return=B,H;case P:return L=Qd(L,B.mode,H),L.return=B,L;case C:return L=ga(L),ne(B,L,H)}if(Te(L)||N(L))return L=ha(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ne(B,Su(L),H);if(L.$$typeof===J)return ne(B,bu(B,L),H);Au(B,L)}return null}function G(B,L,H,ee){var we=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:w(B,L,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case O:return H.key===we?j(B,L,H,ee):null;case P:return H.key===we?F(B,L,H,ee):null;case C:return H=ga(H),G(B,L,H,ee)}if(Te(H)||N(H))return we!==null?null:W(B,L,H,ee,null);if(typeof H.then=="function")return G(B,L,Su(H),ee);if(H.$$typeof===J)return G(B,L,bu(B,H),ee);Au(B,H)}return null}function Y(B,L,H,ee,we){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,w(L,B,""+ee,we);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case O:return B=B.get(ee.key===null?H:ee.key)||null,j(L,B,ee,we);case P:return B=B.get(ee.key===null?H:ee.key)||null,F(L,B,ee,we);case C:return ee=ga(ee),Y(B,L,H,ee,we)}if(Te(ee)||N(ee))return B=B.get(H)||null,W(L,B,ee,we,null);if(typeof ee.then=="function")return Y(B,L,H,Su(ee),we);if(ee.$$typeof===J)return Y(B,L,H,bu(L,ee),we);Au(L,ee)}return null}function pe(B,L,H,ee){for(var we=null,Xe=null,xe=L,Pe=L=0,qe=null;xe!==null&&Pe<H.length;Pe++){xe.index>Pe?(qe=xe,xe=null):qe=xe.sibling;var We=G(B,xe,H[Pe],ee);if(We===null){xe===null&&(xe=qe);break}t&&xe&&We.alternate===null&&s(B,xe),L=m(We,L,Pe),Xe===null?we=We:Xe.sibling=We,Xe=We,xe=qe}if(Pe===H.length)return a(B,xe),Qe&&mi(B,Pe),we;if(xe===null){for(;Pe<H.length;Pe++)xe=ne(B,H[Pe],ee),xe!==null&&(L=m(xe,L,Pe),Xe===null?we=xe:Xe.sibling=xe,Xe=xe);return Qe&&mi(B,Pe),we}for(xe=l(xe);Pe<H.length;Pe++)qe=Y(xe,B,Pe,H[Pe],ee),qe!==null&&(t&&qe.alternate!==null&&xe.delete(qe.key===null?Pe:qe.key),L=m(qe,L,Pe),Xe===null?we=qe:Xe.sibling=qe,Xe=qe);return t&&xe.forEach(function(br){return s(B,br)}),Qe&&mi(B,Pe),we}function Ae(B,L,H,ee){if(H==null)throw Error(r(151));for(var we=null,Xe=null,xe=L,Pe=L=0,qe=null,We=H.next();xe!==null&&!We.done;Pe++,We=H.next()){xe.index>Pe?(qe=xe,xe=null):qe=xe.sibling;var br=G(B,xe,We.value,ee);if(br===null){xe===null&&(xe=qe);break}t&&xe&&br.alternate===null&&s(B,xe),L=m(br,L,Pe),Xe===null?we=br:Xe.sibling=br,Xe=br,xe=qe}if(We.done)return a(B,xe),Qe&&mi(B,Pe),we;if(xe===null){for(;!We.done;Pe++,We=H.next())We=ne(B,We.value,ee),We!==null&&(L=m(We,L,Pe),Xe===null?we=We:Xe.sibling=We,Xe=We);return Qe&&mi(B,Pe),we}for(xe=l(xe);!We.done;Pe++,We=H.next())We=Y(xe,B,Pe,We.value,ee),We!==null&&(t&&We.alternate!==null&&xe.delete(We.key===null?Pe:We.key),L=m(We,L,Pe),Xe===null?we=We:Xe.sibling=We,Xe=We);return t&&xe.forEach(function(f1){return s(B,f1)}),Qe&&mi(B,Pe),we}function ct(B,L,H,ee){if(typeof H=="object"&&H!==null&&H.type===z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case O:e:{for(var we=H.key;L!==null;){if(L.key===we){if(we=H.type,we===z){if(L.tag===7){a(B,L.sibling),ee=d(L,H.props.children),ee.return=B,B=ee;break e}}else if(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===C&&ga(we)===L.type){a(B,L.sibling),ee=d(L,H.props),Il(ee,H),ee.return=B,B=ee;break e}a(B,L);break}else s(B,L);L=L.sibling}H.type===z?(ee=ha(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=vu(H.type,H.key,H.props,null,B.mode,ee),Il(ee,H),ee.return=B,B=ee)}return _(B);case P:e:{for(we=H.key;L!==null;){if(L.key===we)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),ee=d(L,H.children||[]),ee.return=B,B=ee;break e}else{a(B,L);break}else s(B,L);L=L.sibling}ee=Qd(H,B.mode,ee),ee.return=B,B=ee}return _(B);case C:return H=ga(H),ct(B,L,H,ee)}if(Te(H))return pe(B,L,H,ee);if(N(H)){if(we=N(H),typeof we!="function")throw Error(r(150));return H=we.call(H),Ae(B,L,H,ee)}if(typeof H.then=="function")return ct(B,L,Su(H),ee);if(H.$$typeof===J)return ct(B,L,bu(B,H),ee);Au(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),ee=d(L,H),ee.return=B,B=ee):(a(B,L),ee=Gd(H,B.mode,ee),ee.return=B,B=ee),_(B)):a(B,L)}return function(B,L,H,ee){try{Rl=0;var we=ct(B,L,H,ee);return lo=null,we}catch(xe){if(xe===oo||xe===wu)throw xe;var Xe=Ln(29,xe,null,B.mode);return Xe.lanes=ee,Xe.return=B,Xe}finally{}}}var va=uy(!0),hy=uy(!1),ir=!1;function rf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function rr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ar(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=yu(t),Yg(t,null,a),s}return gu(t,l,s,a),yu(t)}function Dl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,il(t,a)}}function of(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var lf=!1;function jl(){if(lf){var t=ao;if(t!==null)throw t}}function Ol(t,s,a,l){lf=!1;var d=t.updateQueue;ir=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var j=w,F=j.next;j.next=null,_===null?m=F:_.next=F,_=j;var W=t.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==_&&(w===null?W.firstBaseUpdate=F:w.next=F,W.lastBaseUpdate=j))}if(m!==null){var ne=d.baseState;_=0,W=F=j=null,w=m;do{var G=w.lane&-536870913,Y=G!==w.lane;if(Y?(Be&G)===G:(l&G)===G){G!==0&&G===ro&&(lf=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var pe=t,Ae=w;G=s;var ct=a;switch(Ae.tag){case 1:if(pe=Ae.payload,typeof pe=="function"){ne=pe.call(ct,ne,G);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ae.payload,G=typeof pe=="function"?pe.call(ct,ne,G):pe,G==null)break e;ne=E({},ne,G);break e;case 2:ir=!0}}G=w.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(F=W=Y,j=ne):W=W.next=Y,_|=G;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);W===null&&(j=ne),d.baseState=j,d.firstBaseUpdate=F,d.lastBaseUpdate=W,m===null&&(d.shared.lanes=0),hr|=_,t.lanes=_,t.memoizedState=ne}}function dy(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function fy(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)dy(a[t],s)}var co=M(null),Nu=M(0);function my(t,s){t=Si,oe(Nu,t),oe(co,s),Si=t|s.baseLanes}function cf(){oe(Nu,Si),oe(co,co.current)}function uf(){Si=Nu.current,Z(co),Z(Nu)}var Pn=M(null),rs=null;function or(t){var s=t.alternate;oe(Dt,Dt.current&1),oe(Pn,t),rs===null&&(s===null||co.current!==null||s.memoizedState!==null)&&(rs=t)}function hf(t){oe(Dt,Dt.current),oe(Pn,t),rs===null&&(rs=t)}function py(t){t.tag===22?(oe(Dt,Dt.current),oe(Pn,t),rs===null&&(rs=t)):lr()}function lr(){oe(Dt,Dt.current),oe(Pn,Pn.current)}function Un(t){Z(Pn),rs===t&&(rs=null),Z(Dt)}var Dt=M(0);function Cu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ym(a)||vm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yi=0,ke=null,ot=null,Ut=null,Ru=!1,uo=!1,_a=!1,Iu=0,Ml=0,ho=null,sT=0;function St(){throw Error(r(321))}function df(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!kn(t[a],s[a]))return!1;return!0}function ff(t,s,a,l,d,m){return yi=m,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=t===null||t.memoizedState===null?Jy:Cf,_a=!1,m=a(l,d),_a=!1,uo&&(m=yy(s,a,l,d)),gy(t),m}function gy(t){Q.H=Ll;var s=ot!==null&&ot.next!==null;if(yi=0,Ut=ot=ke=null,Ru=!1,Ml=0,ho=null,s)throw Error(r(300));t===null||zt||(t=t.dependencies,t!==null&&xu(t)&&(zt=!0))}function yy(t,s,a,l){ke=t;var d=0;do{if(uo&&(ho=null),Ml=0,uo=!1,25<=d)throw Error(r(301));if(d+=1,Ut=ot=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=Zy,m=s(a,l)}while(uo);return m}function iT(){var t=Q.H,s=t.useState()[0];return s=typeof s.then=="function"?Vl(s):s,t=t.useState()[0],(ot!==null?ot.memoizedState:null)!==t&&(ke.flags|=1024),s}function mf(){var t=Iu!==0;return Iu=0,t}function pf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function gf(t){if(Ru){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ru=!1}yi=0,Ut=ot=ke=null,uo=!1,Ml=Iu=0,ho=null}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ke.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function jt(){if(ot===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var s=Ut===null?ke.memoizedState:Ut.next;if(s!==null)Ut=s,ot=t;else{if(t===null)throw ke.alternate===null?Error(r(467)):Error(r(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Ut===null?ke.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function Du(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(t){var s=Ml;return Ml+=1,ho===null&&(ho=[]),t=oy(ho,t,s),s=ke,(Ut===null?s.memoizedState:Ut.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Jy:Cf),t}function ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vl(t);if(t.$$typeof===J)return rn(t)}throw Error(r(438,String(t)))}function yf(t){var s=null,a=ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Du(),ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=k;return s.index++,a}function vi(t,s){return typeof s=="function"?s(t):s}function Ou(t){var s=jt();return vf(s,ot,t)}function vf(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}s.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var w=_=null,j=null,F=s,W=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(Be&ne)===ne:(yi&ne)===ne){var G=F.revertLane;if(G===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===ro&&(W=!0);else if((yi&G)===G){F=F.next,G===ro&&(W=!0);continue}else ne={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},j===null?(w=j=ne,_=m):j=j.next=ne,ke.lanes|=G,hr|=G;ne=F.action,_a&&a(m,ne),m=F.hasEagerState?F.eagerState:a(m,ne)}else G={lane:ne,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},j===null?(w=j=G,_=m):j=j.next=G,ke.lanes|=ne,hr|=ne;F=F.next}while(F!==null&&F!==s);if(j===null?_=m:j.next=w,!kn(m,t.memoizedState)&&(zt=!0,W&&(a=ao,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=j,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function _f(t){var s=jt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=t(m,_.action),_=_.next;while(_!==d);kn(m,s.memoizedState)||(zt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function vy(t,s,a){var l=ke,d=jt(),m=Qe;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!kn((ot||d).memoizedState,a);if(_&&(d.memoizedState=a,zt=!0),d=d.queue,Ef(by.bind(null,l,d,t),[t]),d.getSnapshot!==s||_||Ut!==null&&Ut.memoizedState.tag&1){if(l.flags|=2048,fo(9,{destroy:void 0},xy.bind(null,l,d,a,s),null),ut===null)throw Error(r(349));m||(yi&127)!==0||_y(l,s,a)}return a}function _y(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ke.updateQueue,s===null?(s=Du(),ke.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function xy(t,s,a,l){s.value=a,s.getSnapshot=l,Ey(s)&&wy(t)}function by(t,s,a){return a(function(){Ey(s)&&wy(t)})}function Ey(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!kn(t,a)}catch{return!0}}function wy(t){var s=ua(t,2);s!==null&&Rn(s,t,2)}function xf(t){var s=xn();if(typeof t=="function"){var a=t;if(t=a(),_a){vn(!0);try{a()}finally{vn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},s}function Ty(t,s,a,l){return t.baseState=a,vf(t,ot,typeof l=="function"?l:vi)}function rT(t,s,a,l,d){if(ku(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Q.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Sy(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Sy(t,s){var a=s.action,l=s.payload,d=t.state;if(s.isTransition){var m=Q.T,_={};Q.T=_;try{var w=a(d,l),j=Q.S;j!==null&&j(_,w),Ay(t,s,w)}catch(F){bf(t,s,F)}finally{m!==null&&_.types!==null&&(m.types=_.types),Q.T=m}}else try{m=a(d,l),Ay(t,s,m)}catch(F){bf(t,s,F)}}function Ay(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ny(t,s,l)},function(l){return bf(t,s,l)}):Ny(t,s,a)}function Ny(t,s,a){s.status="fulfilled",s.value=a,Cy(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Sy(t,a)))}function bf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Cy(s),s=s.next;while(s!==l)}t.action=null}function Cy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Ry(t,s){return s}function Iy(t,s){if(Qe){var a=ut.formState;if(a!==null){e:{var l=ke;if(Qe){if(dt){t:{for(var d=dt,m=is;d.nodeType!==8;){if(!m){d=null;break t}if(d=as(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){dt=as(d.nextSibling),l=d.data==="F!";break e}}nr(l)}l=!1}l&&(s=a[0])}}return a=xn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ry,lastRenderedState:s},a.queue=l,a=$y.bind(null,ke,l),l.dispatch=a,l=xf(!1),m=Nf.bind(null,ke,!1,l.queue),l=xn(),d={state:s,dispatch:null,action:t,pending:null},l.queue=d,a=rT.bind(null,ke,d,m,a),d.dispatch=a,l.memoizedState=t,[s,a,!1]}function Dy(t){var s=jt();return jy(s,ot,t)}function jy(t,s,a){if(s=vf(t,s,Ry)[0],t=Ou(vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Vl(s)}catch(_){throw _===oo?wu:_}else l=s;s=jt();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(ke.flags|=2048,fo(9,{destroy:void 0},aT.bind(null,d,a),null)),[l,m,t]}function aT(t,s){t.action=s}function Oy(t){var s=jt(),a=ot;if(a!==null)return jy(s,a,t);jt(),s=s.memoizedState,a=jt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function fo(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=ke.updateQueue,s===null&&(s=Du(),ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function My(){return jt().memoizedState}function Mu(t,s,a,l){var d=xn();ke.flags|=t,d.memoizedState=fo(1|s,{destroy:void 0},a,l===void 0?null:l)}function Vu(t,s,a,l){var d=jt();l=l===void 0?null:l;var m=d.memoizedState.inst;ot!==null&&l!==null&&df(l,ot.memoizedState.deps)?d.memoizedState=fo(s,m,a,l):(ke.flags|=t,d.memoizedState=fo(1|s,m,a,l))}function Vy(t,s){Mu(8390656,8,t,s)}function Ef(t,s){Vu(2048,8,t,s)}function oT(t){ke.flags|=4;var s=ke.updateQueue;if(s===null)s=Du(),ke.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function ky(t){var s=jt().memoizedState;return oT({ref:s,nextImpl:t}),function(){if((et&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Ly(t,s){return Vu(4,2,t,s)}function Py(t,s){return Vu(4,4,t,s)}function Uy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function zy(t,s,a){a=a!=null?a.concat([t]):null,Vu(4,4,Uy.bind(null,s,t),a)}function wf(){}function By(t,s){var a=jt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&df(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function qy(t,s){var a=jt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&df(s,l[1]))return l[0];if(l=t(),_a){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,s],l}function Tf(t,s,a){return a===void 0||(yi&1073741824)!==0&&(Be&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=H0(),ke.lanes|=t,hr|=t,a)}function Hy(t,s,a,l){return kn(a,s)?a:co.current!==null?(t=Tf(t,a,l),kn(t,s)||(zt=!0),t):(yi&42)===0||(yi&1073741824)!==0&&(Be&261930)===0?(zt=!0,t.memoizedState=a):(t=H0(),ke.lanes|=t,hr|=t,s)}function Fy(t,s,a,l,d){var m=le.p;le.p=m!==0&&8>m?m:8;var _=Q.T,w={};Q.T=w,Nf(t,!1,s,a);try{var j=d(),F=Q.S;if(F!==null&&F(w,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var W=nT(j,l);kl(t,s,W,qn(t))}else kl(t,s,l,qn(t))}catch(ne){kl(t,s,{then:function(){},status:"rejected",reason:ne},qn())}finally{le.p=m,_!==null&&w.types!==null&&(_.types=w.types),Q.T=_}}function lT(){}function Sf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var d=Gy(t).queue;Fy(t,d,s,_e,a===null?lT:function(){return Qy(t),a(l)})}function Gy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:_e},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Qy(t){var s=Gy(t);s.next===null&&(s=t.alternate.memoizedState),kl(t,s.next.queue,{},qn())}function Af(){return rn(Zl)}function Ky(){return jt().memoizedState}function Yy(){return jt().memoizedState}function cT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=qn();t=rr(a);var l=ar(s,t,a);l!==null&&(Rn(l,s,a),Dl(l,s,a)),s={cache:ef()},t.payload=s;return}s=s.return}}function uT(t,s,a){var l=qn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ku(t)?Xy(s,a):(a=Hd(t,s,a,l),a!==null&&(Rn(a,t,l),Wy(a,s,l)))}function $y(t,s,a){var l=qn();kl(t,s,a,l)}function kl(t,s,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ku(t))Xy(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,w=m(_,a);if(d.hasEagerState=!0,d.eagerState=w,kn(w,_))return gu(t,s,d,0),ut===null&&pu(),!1}catch{}finally{}if(a=Hd(t,s,d,l),a!==null)return Rn(a,t,l),Wy(a,s,l),!0}return!1}function Nf(t,s,a,l){if(l={lane:2,revertLane:rm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(s)throw Error(r(479))}else s=Hd(t,a,l,2),s!==null&&Rn(s,t,2)}function ku(t){var s=t.alternate;return t===ke||s!==null&&s===ke}function Xy(t,s){uo=Ru=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Wy(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,il(t,a)}}var Ll={readContext:rn,use:ju,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Ll.useEffectEvent=St;var Jy={readContext:rn,use:ju,useCallback:function(t,s){return xn().memoizedState=[t,s===void 0?null:s],t},useContext:rn,useEffect:Vy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Mu(4194308,4,Uy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Mu(4194308,4,t,s)},useInsertionEffect:function(t,s){Mu(4,2,t,s)},useMemo:function(t,s){var a=xn();s=s===void 0?null:s;var l=t();if(_a){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=xn();if(a!==void 0){var d=a(s);if(_a){vn(!0);try{a(s)}finally{vn(!1)}}}else d=s;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=uT.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var s=xn();return t={current:t},s.memoizedState=t},useState:function(t){t=xf(t);var s=t.queue,a=$y.bind(null,ke,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:wf,useDeferredValue:function(t,s){var a=xn();return Tf(a,t,s)},useTransition:function(){var t=xf(!1);return t=Fy.bind(null,ke,t.queue,!0,!1),xn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=ke,d=xn();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ut===null)throw Error(r(349));(Be&127)!==0||_y(l,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Vy(by.bind(null,l,m,t),[t]),l.flags|=2048,fo(9,{destroy:void 0},xy.bind(null,l,m,a,s),null),a},useId:function(){var t=xn(),s=ut.identifierPrefix;if(Qe){var a=Xs,l=$s;a=(l&~(1<<32-gt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Iu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=sT++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Af,useFormState:Iy,useActionState:Iy,useOptimistic:function(t){var s=xn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Nf.bind(null,ke,!0,a),a.dispatch=s,[t,s]},useMemoCache:yf,useCacheRefresh:function(){return xn().memoizedState=cT.bind(null,ke)},useEffectEvent:function(t){var s=xn(),a={impl:t};return s.memoizedState=a,function(){if((et&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Cf={readContext:rn,use:ju,useCallback:By,useContext:rn,useEffect:Ef,useImperativeHandle:zy,useInsertionEffect:Ly,useLayoutEffect:Py,useMemo:qy,useReducer:Ou,useRef:My,useState:function(){return Ou(vi)},useDebugValue:wf,useDeferredValue:function(t,s){var a=jt();return Hy(a,ot.memoizedState,t,s)},useTransition:function(){var t=Ou(vi)[0],s=jt().memoizedState;return[typeof t=="boolean"?t:Vl(t),s]},useSyncExternalStore:vy,useId:Ky,useHostTransitionStatus:Af,useFormState:Dy,useActionState:Dy,useOptimistic:function(t,s){var a=jt();return Ty(a,ot,t,s)},useMemoCache:yf,useCacheRefresh:Yy};Cf.useEffectEvent=ky;var Zy={readContext:rn,use:ju,useCallback:By,useContext:rn,useEffect:Ef,useImperativeHandle:zy,useInsertionEffect:Ly,useLayoutEffect:Py,useMemo:qy,useReducer:_f,useRef:My,useState:function(){return _f(vi)},useDebugValue:wf,useDeferredValue:function(t,s){var a=jt();return ot===null?Tf(a,t,s):Hy(a,ot.memoizedState,t,s)},useTransition:function(){var t=_f(vi)[0],s=jt().memoizedState;return[typeof t=="boolean"?t:Vl(t),s]},useSyncExternalStore:vy,useId:Ky,useHostTransitionStatus:Af,useFormState:Oy,useActionState:Oy,useOptimistic:function(t,s){var a=jt();return ot!==null?Ty(a,ot,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:yf,useCacheRefresh:Yy};Zy.useEffectEvent=ky;function Rf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var If={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=qn(),d=rr(l);d.payload=s,a!=null&&(d.callback=a),s=ar(t,d,l),s!==null&&(Rn(s,t,l),Dl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=qn(),d=rr(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=ar(t,d,l),s!==null&&(Rn(s,t,l),Dl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=qn(),l=rr(a);l.tag=2,s!=null&&(l.callback=s),s=ar(t,l,a),s!==null&&(Rn(s,t,a),Dl(s,t,a))}};function e0(t,s,a,l,d,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!wl(a,l)||!wl(d,m):!0}function t0(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&If.enqueueReplaceState(s,s.state,null)}function xa(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function n0(t){mu(t)}function s0(t){console.error(t)}function i0(t){mu(t)}function Lu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function r0(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Df(t,s,a){return a=rr(a),a.tag=3,a.payload={element:null},a.callback=function(){Lu(t,s)},a}function a0(t){return t=rr(t),t.tag=3,t}function o0(t,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){r0(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){r0(s,a,l),typeof d!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function hT(t,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&io(s,a,d,!0),a=Pn.current,a!==null){switch(a.tag){case 31:case 13:return rs===null?$u():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Tu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),nm(t,l,d)),!1;case 22:return a.flags|=65536,l===Tu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),nm(t,l,d)),!1}throw Error(r(435,a.tag))}return nm(t,l,d),$u(),!1}if(Qe)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==$d&&(t=Error(r(422),{cause:l}),Al(ts(t,a)))):(l!==$d&&(s=Error(r(423),{cause:l}),Al(ts(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=ts(l,a),d=Df(t.stateNode,l,d),of(t,d),At!==4&&(At=2)),!1;var m=Error(r(520),{cause:l});if(m=ts(m,a),Gl===null?Gl=[m]:Gl.push(m),At!==4&&(At=2),s===null)return!0;l=ts(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Df(a.stateNode,l,t),of(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(dr===null||!dr.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=a0(d),o0(d,t,a,l),of(a,d),!1}a=a.return}while(a!==null);return!1}var jf=Error(r(461)),zt=!1;function an(t,s,a,l){s.child=t===null?hy(s,null,a,l):va(s,t.child,a,l)}function l0(t,s,a,l,d){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return ma(s),l=ff(t,s,a,_,m,d),w=mf(),t!==null&&!zt?(pf(t,s,d),_i(t,s,d)):(Qe&&w&&Kd(s),s.flags|=1,an(t,s,l,d),s.child)}function c0(t,s,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!Fd(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,u0(t,s,m,l,d)):(t=vu(a.type,null,l,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!zf(t,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(_,l)&&t.ref===s.ref)return _i(t,s,d)}return s.flags|=1,t=fi(m,l),t.ref=s.ref,t.return=s,s.child=t}function u0(t,s,a,l,d){if(t!==null){var m=t.memoizedProps;if(wl(m,l)&&t.ref===s.ref)if(zt=!1,s.pendingProps=l=m,zf(t,d))(t.flags&131072)!==0&&(zt=!0);else return s.lanes=t.lanes,_i(t,s,d)}return Of(t,s,a,l,d)}function h0(t,s,a,l){var d=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,s.child=null;return d0(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eu(s,m!==null?m.cachePool:null),m!==null?my(s,m):cf(),py(s);else return l=s.lanes=536870912,d0(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Eu(s,m.cachePool),my(s,m),lr(),s.memoizedState=null):(t!==null&&Eu(s,null),cf(),lr());return an(t,s,d,a),s.child}function Pl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function d0(t,s,a,l,d){var m=nf();return m=m===null?null:{parent:Pt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&Eu(s,null),cf(),py(s),t!==null&&io(t,s,l,!0),s.childLanes=d,null}function Pu(t,s){return s=zu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function f0(t,s,a){return va(s,t.child,null,a),t=Pu(s,s.pendingProps),t.flags|=2,Un(s),s.memoizedState=null,t}function dT(t,s,a){var l=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Qe){if(l.mode==="hidden")return t=Pu(s,l),s.lanes=536870912,Pl(null,t);if(hf(s),(t=dt)?(t=Sv(t,is),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:er!==null?{id:$s,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},a=Xg(t),a.return=s,s.child=a,sn=s,dt=null)):t=null,t===null)throw nr(s);return s.lanes=536870912,null}return Pu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(hf(s),d)if(s.flags&256)s.flags&=-257,s=f0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(zt||io(t,s,a,!1),d=(a&t.childLanes)!==0,zt||d){if(l=ut,l!==null&&(_=rl(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,ua(t,_),Rn(l,t,_),jf;$u(),s=f0(t,s,a)}else t=m.treeContext,dt=as(_.nextSibling),sn=s,Qe=!0,tr=null,is=!1,t!==null&&Zg(s,t),s=Pu(s,l),s.flags|=4096;return s}return t=fi(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Uu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Of(t,s,a,l,d){return ma(s),a=ff(t,s,a,l,void 0,d),l=mf(),t!==null&&!zt?(pf(t,s,d),_i(t,s,d)):(Qe&&l&&Kd(s),s.flags|=1,an(t,s,a,d),s.child)}function m0(t,s,a,l,d,m){return ma(s),s.updateQueue=null,a=yy(s,l,a,d),gy(t),l=mf(),t!==null&&!zt?(pf(t,s,m),_i(t,s,m)):(Qe&&l&&Kd(s),s.flags|=1,an(t,s,a,m),s.child)}function p0(t,s,a,l,d){if(ma(s),s.stateNode===null){var m=eo,_=a.contextType;typeof _=="object"&&_!==null&&(m=rn(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=If,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},rf(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?rn(_):eo,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Rf(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&If.enqueueReplaceState(m,m.state,null),Ol(s,l,m,d),jl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,j=xa(a,w);m.props=j;var F=m.context,W=a.contextType;_=eo,typeof W=="object"&&W!==null&&(_=rn(W));var ne=a.getDerivedStateFromProps;W=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==_)&&t0(s,m,l,_),ir=!1;var G=s.memoizedState;m.state=G,Ol(s,l,m,d),jl(),F=s.memoizedState,w||G!==F||ir?(typeof ne=="function"&&(Rf(s,a,ne,l),F=s.memoizedState),(j=ir||e0(s,a,j,l,G,F,_))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=F),m.props=l,m.state=F,m.context=_,l=j):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,af(t,s),_=s.memoizedProps,W=xa(a,_),m.props=W,ne=s.pendingProps,G=m.context,F=a.contextType,j=eo,typeof F=="object"&&F!==null&&(j=rn(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ne||G!==j)&&t0(s,m,l,j),ir=!1,G=s.memoizedState,m.state=G,Ol(s,l,m,d),jl();var Y=s.memoizedState;_!==ne||G!==Y||ir||t!==null&&t.dependencies!==null&&xu(t.dependencies)?(typeof w=="function"&&(Rf(s,a,w,l),Y=s.memoizedState),(W=ir||e0(s,a,W,l,G,Y,j)||t!==null&&t.dependencies!==null&&xu(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Y,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Y,j)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Y),m.props=l,m.state=Y,m.context=j,l=W):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Uu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=va(s,t.child,null,d),s.child=va(s,null,a,d)):an(t,s,a,d),s.memoizedState=m.state,t=s.child):t=_i(t,s,d),t}function g0(t,s,a,l){return da(),s.flags|=256,an(t,s,a,l),s.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vf(t){return{baseLanes:t,cachePool:ry()}}function kf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Bn),t}function y0(t,s,a){var l=s.pendingProps,d=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Qe){if(d?or(s):lr(),(t=dt)?(t=Sv(t,is),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:er!==null?{id:$s,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},a=Xg(t),a.return=s,s.child=a,sn=s,dt=null)):t=null,t===null)throw nr(s);return vm(t)?s.lanes=32:s.lanes=536870912,null}var w=l.children;return l=l.fallback,d?(lr(),d=s.mode,w=zu({mode:"hidden",children:w},d),l=ha(l,d,a,null),w.return=s,l.return=s,w.sibling=l,s.child=w,l=s.child,l.memoizedState=Vf(a),l.childLanes=kf(t,_,a),s.memoizedState=Mf,Pl(null,l)):(or(s),Lf(s,w))}var j=t.memoizedState;if(j!==null&&(w=j.dehydrated,w!==null)){if(m)s.flags&256?(or(s),s.flags&=-257,s=Pf(t,s,a)):s.memoizedState!==null?(lr(),s.child=t.child,s.flags|=128,s=null):(lr(),w=l.fallback,d=s.mode,l=zu({mode:"visible",children:l.children},d),w=ha(w,d,a,null),w.flags|=2,l.return=s,w.return=s,l.sibling=w,s.child=l,va(s,t.child,null,a),l=s.child,l.memoizedState=Vf(a),l.childLanes=kf(t,_,a),s.memoizedState=Mf,s=Pl(null,l));else if(or(s),vm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(r(419)),l.stack="",l.digest=_,Al({value:l,source:null,stack:null}),s=Pf(t,s,a)}else if(zt||io(t,s,a,!1),_=(a&t.childLanes)!==0,zt||_){if(_=ut,_!==null&&(l=rl(_,a),l!==0&&l!==j.retryLane))throw j.retryLane=l,ua(t,l),Rn(_,t,l),jf;ym(w)||$u(),s=Pf(t,s,a)}else ym(w)?(s.flags|=192,s.child=t.child,s=null):(t=j.treeContext,dt=as(w.nextSibling),sn=s,Qe=!0,tr=null,is=!1,t!==null&&Zg(s,t),s=Lf(s,l.children),s.flags|=4096);return s}return d?(lr(),w=l.fallback,d=s.mode,j=t.child,F=j.sibling,l=fi(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,F!==null?w=fi(F,w):(w=ha(w,d,a,null),w.flags|=2),w.return=s,l.return=s,l.sibling=w,s.child=l,Pl(null,l),l=s.child,w=t.child.memoizedState,w===null?w=Vf(a):(d=w.cachePool,d!==null?(j=Pt._currentValue,d=d.parent!==j?{parent:j,pool:j}:d):d=ry(),w={baseLanes:w.baseLanes|a,cachePool:d}),l.memoizedState=w,l.childLanes=kf(t,_,a),s.memoizedState=Mf,Pl(t.child,l)):(or(s),a=t.child,t=a.sibling,a=fi(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function Lf(t,s){return s=zu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function zu(t,s){return t=Ln(22,t,null,s),t.lanes=0,t}function Pf(t,s,a){return va(s,t.child,null,a),t=Lf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function v0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Jd(t.return,s,a)}function Uf(t,s,a,l,d,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function _0(t,s,a){var l=s.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var _=Dt.current,w=(_&2)!==0;if(w?(_=_&1|2,s.flags|=128):_&=1,oe(Dt,_),an(t,s,l,a),l=Qe?Sl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v0(t,a,s);else if(t.tag===19)v0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&Cu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Uf(s,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Cu(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Uf(s,!0,a,null,m,l);break;case"together":Uf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function _i(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),hr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(io(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=fi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=fi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function zf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&xu(t)))}function fT(t,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),sr(s,Pt,t.memoizedState.cache),da();break;case 27:case 5:$n(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:sr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,hf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(or(s),s.flags|=128,null):(a&s.child.childLanes)!==0?y0(t,s,a):(or(s),t=_i(t,s,a),t!==null?t.sibling:null);or(s);break;case 19:var d=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(io(t,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return _0(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(Dt,Dt.current),l)break;return null;case 22:return s.lanes=0,h0(t,s,a,s.pendingProps);case 24:sr(s,Pt,t.memoizedState.cache)}return _i(t,s,a)}function x0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)zt=!0;else{if(!zf(t,a)&&(s.flags&128)===0)return zt=!1,fT(t,s,a);zt=(t.flags&131072)!==0}else zt=!1,Qe&&(s.flags&1048576)!==0&&Jg(s,Sl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=ga(s.elementType),s.type=t,typeof t=="function")Fd(t)?(l=xa(t,l),s.tag=1,s=p0(null,s,t,l,a)):(s.tag=0,s=Of(null,s,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===fe){s.tag=11,s=l0(null,s,t,l,a);break e}else if(d===R){s.tag=14,s=c0(null,s,t,l,a);break e}}throw s=be(t)||t,Error(r(306,s,""))}}return s;case 0:return Of(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=xa(l,s.pendingProps),p0(t,s,l,d,a);case 3:e:{if(xt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;d=m.element,af(t,s),Ol(s,l,null,a);var _=s.memoizedState;if(l=_.cache,sr(s,Pt,l),l!==m.cache&&Zd(s,[Pt],a,!0),jl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=g0(t,s,l,a);break e}else if(l!==d){d=ts(Error(r(424)),s),Al(d),s=g0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=as(t.firstChild),sn=s,Qe=!0,tr=null,is=!0,a=hy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(da(),l===d){s=_i(t,s,a);break e}an(t,s,l,a)}s=s.child}return s;case 26:return Uu(t,s),t===null?(a=Dv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Qe||(a=s.type,t=s.pendingProps,l=nh(Ce.current).createElement(a),l[Vt]=s,l[$t]=t,on(l,a,t),kt(l),s.stateNode=l):s.memoizedState=Dv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return $n(s),t===null&&Qe&&(l=s.stateNode=Cv(s.type,s.pendingProps,Ce.current),sn=s,is=!0,d=dt,gr(s.type)?(_m=d,dt=as(l.firstChild)):dt=d),an(t,s,s.pendingProps.children,a),Uu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Qe&&((d=l=dt)&&(l=HT(l,s.type,s.pendingProps,is),l!==null?(s.stateNode=l,sn=s,dt=as(l.firstChild),is=!1,d=!0):d=!1),d||nr(s)),$n(s),d=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,mm(d,m)?l=null:_!==null&&mm(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=ff(t,s,iT,null,null,a),Zl._currentValue=d),Uu(t,s),an(t,s,l,a),s.child;case 6:return t===null&&Qe&&((t=a=dt)&&(a=FT(a,s.pendingProps,is),a!==null?(s.stateNode=a,sn=s,dt=null,t=!0):t=!1),t||nr(s)),null;case 13:return y0(t,s,a);case 4:return xt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=va(s,null,l,a):an(t,s,l,a),s.child;case 11:return l0(t,s,s.type,s.pendingProps,a);case 7:return an(t,s,s.pendingProps,a),s.child;case 8:return an(t,s,s.pendingProps.children,a),s.child;case 12:return an(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,sr(s,s.type,l.value),an(t,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,ma(s),d=rn(d),l=l(d),s.flags|=1,an(t,s,l,a),s.child;case 14:return c0(t,s,s.type,s.pendingProps,a);case 15:return u0(t,s,s.type,s.pendingProps,a);case 19:return _0(t,s,a);case 31:return dT(t,s,a);case 22:return h0(t,s,a,s.pendingProps);case 24:return ma(s),l=rn(Pt),t===null?(d=nf(),d===null&&(d=ut,m=ef(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:l,cache:d},rf(s),sr(s,Pt,d)):((t.lanes&a)!==0&&(af(t,s),Ol(s,null,null,a),jl()),d=t.memoizedState,m=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),sr(s,Pt,l)):(l=m.cache,sr(s,Pt,l),l!==d.cache&&Zd(s,[Pt],a,!0))),an(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function xi(t){t.flags|=4}function Bf(t,s,a,l,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(K0())t.flags|=8192;else throw ya=Tu,sf}else t.flags&=-16777217}function b0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!kv(s))if(K0())t.flags|=8192;else throw ya=Tu,sf}function Bu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Kc():536870912,t.lanes|=s,yo|=s)}function Ul(t,s){if(!Qe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ft(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function mT(t,s,a){var l=s.pendingProps;switch(Yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),gi(Pt),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(so(s)?xi(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xd())),ft(s),null;case 26:var d=s.type,m=s.memoizedState;return t===null?(xi(s),m!==null?(ft(s),b0(s,m)):(ft(s),Bf(s,d,null,l,a))):m?m!==t.memoizedState?(xi(s),ft(s),b0(s,m)):(ft(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&xi(s),ft(s),Bf(s,d,t,l,a)),null;case 27:if(jn(s),a=Ce.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&xi(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ft(s),null}t=de.current,so(s)?ey(s):(t=Cv(d,l,a),s.stateNode=t,xi(s))}return ft(s),null;case 5:if(jn(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&xi(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ft(s),null}if(m=de.current,so(s))ey(s);else{var _=nh(Ce.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}m[Vt]=s,m[$t]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(on(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xi(s)}}return ft(s),Bf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&xi(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Ce.current,so(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,d=sn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Vt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||yv(t.nodeValue,a)),t||nr(s,!0)}else t=nh(t).createTextNode(l),t[Vt]=s,s.stateNode=t}return ft(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=so(s),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Vt]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),t=!1}else a=Xd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Un(s),s):(Un(s),null);if((s.flags&128)!==0)throw Error(r(558))}return ft(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=so(s),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Vt]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),d=!1}else d=Xd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Un(s),s):(Un(s),null)}return Un(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Bu(s,s.updateQueue),ft(s),null);case 4:return rt(),t===null&&cm(s.stateNode.containerInfo),ft(s),null;case 10:return gi(s.type),ft(s),null;case 19:if(Z(Dt),l=s.memoizedState,l===null)return ft(s),null;if(d=(s.flags&128)!==0,m=l.rendering,m===null)if(d)Ul(l,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Cu(t),m!==null){for(s.flags|=128,Ul(l,!1),t=m.updateQueue,s.updateQueue=t,Bu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)$g(a,t),a=a.sibling;return oe(Dt,Dt.current&1|2),Qe&&mi(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&tn()>Qu&&(s.flags|=128,d=!0,Ul(l,!1),s.lanes=4194304)}else{if(!d)if(t=Cu(m),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,Bu(s,t),Ul(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Qe)return ft(s),null}else 2*tn()-l.renderingStartTime>Qu&&a!==536870912&&(s.flags|=128,d=!0,Ul(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=tn(),t.sibling=null,a=Dt.current,oe(Dt,d?a&1|2:a&1),Qe&&mi(s,l.treeForkCount),t):(ft(s),null);case 22:case 23:return Un(s),uf(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),a=s.updateQueue,a!==null&&Bu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&Z(pa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),gi(Pt),ft(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function pT(t,s){switch(Yd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return gi(Pt),rt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return jn(s),null;case 31:if(s.memoizedState!==null){if(Un(s),s.alternate===null)throw Error(r(340));da()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Un(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));da()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Z(Dt),null;case 4:return rt(),null;case 10:return gi(s.type),null;case 22:case 23:return Un(s),uf(),t!==null&&Z(pa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return gi(Pt),null;case 25:return null;default:return null}}function E0(t,s){switch(Yd(s),s.tag){case 3:gi(Pt),rt();break;case 26:case 27:case 5:jn(s);break;case 4:rt();break;case 31:s.memoizedState!==null&&Un(s);break;case 13:Un(s);break;case 19:Z(Dt);break;case 10:gi(s.type);break;case 22:case 23:Un(s),uf(),t!==null&&Z(pa);break;case 24:gi(Pt)}}function zl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==d)}}catch(w){st(s,s.return,w)}}function cr(t,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,d=s;var j=a,F=w;try{F()}catch(W){st(d,j,W)}}}l=l.next}while(l!==m)}}catch(W){st(s,s.return,W)}}function w0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{fy(s,a)}catch(l){st(t,t.return,l)}}}function T0(t,s,a){a.props=xa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,s,l)}}function Bl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){st(t,s,d)}}function Ws(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){st(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){st(t,s,d)}else a.current=null}function S0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){st(t,t.return,d)}}function qf(t,s,a){try{var l=t.stateNode;LT(l,t.type,a,s),l[$t]=s}catch(d){st(t,t.return,d)}}function A0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&gr(t.type)||t.tag===4}function Hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vs));else if(l!==4&&(l===27&&gr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ff(t,s,a),t=t.sibling;t!==null;)Ff(t,s,a),t=t.sibling}function qu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&gr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(qu(t,s,a),t=t.sibling;t!==null;)qu(t,s,a),t=t.sibling}function N0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);on(s,l,a),s[Vt]=t,s[$t]=a}catch(m){st(t,t.return,m)}}var bi=!1,Bt=!1,Gf=!1,C0=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function gT(t,s){if(t=t.containerInfo,dm=ch,t=zg(t),Ld(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,w=-1,j=-1,F=0,W=0,ne=t,G=null;t:for(;;){for(var Y;ne!==a||d!==0&&ne.nodeType!==3||(w=_+d),ne!==m||l!==0&&ne.nodeType!==3||(j=_+l),ne.nodeType===3&&(_+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)G=ne,ne=Y;for(;;){if(ne===t)break t;if(G===a&&++F===d&&(w=_),G===m&&++W===l&&(j=_),(Y=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=Y}a=w===-1||j===-1?null:{start:w,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(fm={focusedElem:t,selectionRange:a},ch=!1,Wt=s;Wt!==null;)if(s=Wt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Wt=t;else for(;Wt!==null;){switch(s=Wt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var pe=xa(a.type,d);t=l.getSnapshotBeforeUpdate(pe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){st(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)gm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,Wt=t;break}Wt=s.return}}function R0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:wi(t,a),l&4&&zl(5,a);break;case 1:if(wi(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){st(a,a.return,_)}else{var d=xa(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){st(a,a.return,_)}}l&64&&w0(a),l&512&&Bl(a,a.return);break;case 3:if(wi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{fy(t,s)}catch(_){st(a,a.return,_)}}break;case 27:s===null&&l&4&&N0(a);case 26:case 5:wi(t,a),s===null&&l&4&&S0(a),l&512&&Bl(a,a.return);break;case 12:wi(t,a);break;case 31:wi(t,a),l&4&&j0(t,a);break;case 13:wi(t,a),l&4&&O0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ST.bind(null,a),GT(t,a))));break;case 22:if(l=a.memoizedState!==null||bi,!l){s=s!==null&&s.memoizedState!==null||Bt,d=bi;var m=Bt;bi=l,(Bt=s)&&!m?Ti(t,a,(a.subtreeFlags&8772)!==0):wi(t,a),bi=d,Bt=m}break;case 30:break;default:wi(t,a)}}function I0(t){var s=t.alternate;s!==null&&(t.alternate=null,I0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&za(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,Sn=!1;function Ei(t,s,a){for(a=a.child;a!==null;)D0(t,s,a),a=a.sibling}function D0(t,s,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:Bt||Ws(a,s),Ei(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Bt||Ws(a,s);var l=vt,d=Sn;gr(a.type)&&(vt=a.stateNode,Sn=!1),Ei(t,s,a),Xl(a.stateNode),vt=l,Sn=d;break;case 5:Bt||Ws(a,s);case 6:if(l=vt,d=Sn,vt=null,Ei(t,s,a),vt=l,Sn=d,vt!==null)if(Sn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(m){st(a,s,m)}else try{vt.removeChild(a.stateNode)}catch(m){st(a,s,m)}break;case 18:vt!==null&&(Sn?(t=vt,wv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),So(t)):wv(vt,a.stateNode));break;case 4:l=vt,d=Sn,vt=a.stateNode.containerInfo,Sn=!0,Ei(t,s,a),vt=l,Sn=d;break;case 0:case 11:case 14:case 15:cr(2,a,s),Bt||cr(4,a,s),Ei(t,s,a);break;case 1:Bt||(Ws(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&T0(a,s,l)),Ei(t,s,a);break;case 21:Ei(t,s,a);break;case 22:Bt=(l=Bt)||a.memoizedState!==null,Ei(t,s,a),Bt=l;break;default:Ei(t,s,a)}}function j0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{So(t)}catch(a){st(s,s.return,a)}}}function O0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{So(t)}catch(a){st(s,s.return,a)}}function yT(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new C0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new C0),s;default:throw Error(r(435,t.tag))}}function Hu(t,s){var a=yT(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var d=AT.bind(null,t,l);l.then(d,d)}})}function An(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,_=s,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(gr(w.type)){vt=w.stateNode,Sn=!1;break e}break;case 5:vt=w.stateNode,Sn=!1;break e;case 3:case 4:vt=w.stateNode.containerInfo,Sn=!0;break e}w=w.return}if(vt===null)throw Error(r(160));D0(m,_,d),vt=null,Sn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)M0(s,t),s=s.sibling}var Ts=null;function M0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(s,t),Nn(t),l&4&&(cr(3,t,t.return),zl(3,t),cr(5,t,t.return));break;case 1:An(s,t),Nn(t),l&512&&(Bt||a===null||Ws(a,a.return)),l&64&&bi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Ts;if(An(s,t),Nn(t),l&512&&(Bt||a===null||Ws(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Ls]||m[Vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),on(m,l,a),m[Vt]=t,kt(m),l=m;break e;case"link":var _=Mv("link","href",d).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}m=d.createElement(l),on(m,l,a),d.head.appendChild(m);break;case"meta":if(_=Mv("meta","content",d).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}m=d.createElement(l),on(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[Vt]=t,kt(m),l=m}t.stateNode=l}else Vv(d,t.type,t.stateNode);else t.stateNode=Ov(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Vv(d,t.type,t.stateNode):Ov(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&qf(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(s,t),Nn(t),l&512&&(Bt||a===null||Ws(a,a.return)),a!==null&&l&4&&qf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(s,t),Nn(t),l&512&&(Bt||a===null||Ws(a,a.return)),t.flags&32){d=t.stateNode;try{Tn(d,"")}catch(pe){st(t,t.return,pe)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,qf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Gf=!0);break;case 6:if(An(s,t),Nn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(pe){st(t,t.return,pe)}}break;case 3:if(rh=null,d=Ts,Ts=sh(s.containerInfo),An(s,t),Ts=d,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{So(s.containerInfo)}catch(pe){st(t,t.return,pe)}Gf&&(Gf=!1,V0(t));break;case 4:l=Ts,Ts=sh(t.stateNode.containerInfo),An(s,t),Nn(t),Ts=l;break;case 12:An(s,t),Nn(t);break;case 31:An(s,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Hu(t,l)));break;case 13:An(s,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gu=tn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Hu(t,l)));break;case 22:d=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,F=bi,W=Bt;if(bi=F||d,Bt=W||j,An(s,t),Bt=W,bi=F,Nn(t),l&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||j||bi||Bt||ba(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){j=a=s;try{if(m=j.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=j.stateNode;var ne=j.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(pe){st(j,j.return,pe)}}}else if(s.tag===6){if(a===null){j=s;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch(pe){st(j,j.return,pe)}}}else if(s.tag===18){if(a===null){j=s;try{var Y=j.stateNode;d?Tv(Y,!0):Tv(j.stateNode,!1)}catch(pe){st(j,j.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Hu(t,a))));break;case 19:An(s,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Hu(t,l)));break;case 30:break;case 21:break;default:An(s,t),Nn(t)}}function Nn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(A0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=Hf(t);qu(t,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(Tn(_,""),a.flags&=-33);var w=Hf(t);qu(t,w,_);break;case 3:case 4:var j=a.stateNode.containerInfo,F=Hf(t);Ff(t,F,j);break;default:throw Error(r(161))}}catch(W){st(t,t.return,W)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function V0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;V0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function wi(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)R0(t,s.alternate,s),s=s.sibling}function ba(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:cr(4,s,s.return),ba(s);break;case 1:Ws(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&T0(s,s.return,a),ba(s);break;case 27:Xl(s.stateNode);case 26:case 5:Ws(s,s.return),ba(s);break;case 22:s.memoizedState===null&&ba(s);break;case 30:ba(s);break;default:ba(s)}t=t.sibling}}function Ti(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Ti(d,m,a),zl(4,m);break;case 1:if(Ti(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){st(l,l.return,F)}if(l=m,d=l.updateQueue,d!==null){var w=l.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)dy(j[d],w)}catch(F){st(l,l.return,F)}}a&&_&64&&w0(m),Bl(m,m.return);break;case 27:N0(m);case 26:case 5:Ti(d,m,a),a&&l===null&&_&4&&S0(m),Bl(m,m.return);break;case 12:Ti(d,m,a);break;case 31:Ti(d,m,a),a&&_&4&&j0(d,m);break;case 13:Ti(d,m,a),a&&_&4&&O0(d,m);break;case 22:m.memoizedState===null&&Ti(d,m,a),Bl(m,m.return);break;case 30:break;default:Ti(d,m,a)}s=s.sibling}}function Qf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Nl(a))}function Kf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Nl(t))}function Ss(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)k0(t,s,a,l),s=s.sibling}function k0(t,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Ss(t,s,a,l),d&2048&&zl(9,s);break;case 1:Ss(t,s,a,l);break;case 3:Ss(t,s,a,l),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Nl(t)));break;case 12:if(d&2048){Ss(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){st(s,s.return,j)}}else Ss(t,s,a,l);break;case 31:Ss(t,s,a,l);break;case 13:Ss(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Ss(t,s,a,l):ql(t,s):m._visibility&2?Ss(t,s,a,l):(m._visibility|=2,mo(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Qf(_,s);break;case 24:Ss(t,s,a,l),d&2048&&Kf(s.alternate,s);break;default:Ss(t,s,a,l)}}function mo(t,s,a,l,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,w=a,j=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:mo(m,_,w,j,d),zl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?mo(m,_,w,j,d):ql(m,_):(W._visibility|=2,mo(m,_,w,j,d)),d&&F&2048&&Qf(_.alternate,_);break;case 24:mo(m,_,w,j,d),d&&F&2048&&Kf(_.alternate,_);break;default:mo(m,_,w,j,d)}s=s.sibling}}function ql(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,d=l.flags;switch(l.tag){case 22:ql(a,l),d&2048&&Qf(l.alternate,l);break;case 24:ql(a,l),d&2048&&Kf(l.alternate,l);break;default:ql(a,l)}s=s.sibling}}var Hl=8192;function po(t,s,a){if(t.subtreeFlags&Hl)for(t=t.child;t!==null;)L0(t,s,a),t=t.sibling}function L0(t,s,a){switch(t.tag){case 26:po(t,s,a),t.flags&Hl&&t.memoizedState!==null&&s1(a,Ts,t.memoizedState,t.memoizedProps);break;case 5:po(t,s,a);break;case 3:case 4:var l=Ts;Ts=sh(t.stateNode.containerInfo),po(t,s,a),Ts=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Hl,Hl=16777216,po(t,s,a),Hl=l):po(t,s,a));break;default:po(t,s,a)}}function P0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Fl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Wt=l,z0(l,t)}P0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)U0(t),t=t.sibling}function U0(t){switch(t.tag){case 0:case 11:case 15:Fl(t),t.flags&2048&&cr(9,t,t.return);break;case 3:Fl(t);break;case 12:Fl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Fu(t)):Fl(t);break;default:Fl(t)}}function Fu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Wt=l,z0(l,t)}P0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:cr(8,s,s.return),Fu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Fu(s));break;default:Fu(s)}t=t.sibling}}function z0(t,s){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:cr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Wt=l;else e:for(a=t;Wt!==null;){l=Wt;var d=l.sibling,m=l.return;if(I0(l),l===a){Wt=null;break e}if(d!==null){d.return=m,Wt=d;break e}Wt=m}}}var vT={getCacheForType:function(t){var s=rn(Pt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return rn(Pt).controller.signal}},_T=typeof WeakMap=="function"?WeakMap:Map,et=0,ut=null,Ue=null,Be=0,nt=0,zn=null,ur=!1,go=!1,Yf=!1,Si=0,At=0,hr=0,Ea=0,$f=0,Bn=0,yo=0,Gl=null,Cn=null,Xf=!1,Gu=0,B0=0,Qu=1/0,Ku=null,dr=null,Kt=0,fr=null,vo=null,Ai=0,Wf=0,Jf=null,q0=null,Ql=0,Zf=null;function qn(){return(et&2)!==0&&Be!==0?Be&-Be:Q.T!==null?rm():Yc()}function H0(){if(Bn===0)if((Be&536870912)===0||Qe){var t=$r;$r<<=1,($r&3932160)===0&&($r=262144),Bn=t}else Bn=536870912;return t=Pn.current,t!==null&&(t.flags|=32),Bn}function Rn(t,s,a){(t===ut&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(_o(t,0),mr(t,Be,Bn,!1)),Xr(t,a),((et&2)===0||t!==ut)&&(t===ut&&((et&2)===0&&(Ea|=a),At===4&&mr(t,Be,Bn,!1)),Js(t))}function F0(t,s,a){if((et&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||ps(t,s),d=l?ET(t,s):tm(t,s,!0),m=l;do{if(d===0){go&&!l&&mr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!xT(a)){d=tm(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var w=t;d=Gl;var j=w.current.memoizedState.isDehydrated;if(j&&(_o(w,_).flags|=256),_=tm(w,_,!1),_!==2){if(Yf&&!j){w.errorRecoveryDisabledLanes|=m,Ea|=m,d=4;break e}m=Cn,Cn=d,m!==null&&(Cn===null?Cn=m:Cn.push.apply(Cn,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){_o(t,0),mr(t,s,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:mr(l,s,Bn,!ur);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Gu+300-tn(),10<d)){if(mr(l,s,Bn,!ur),Ms(l,0,!0)!==0)break e;Ai=s,l.timeoutHandle=bv(G0.bind(null,l,a,Cn,Ku,Xf,s,Bn,Ea,yo,ur,m,"Throttled",-0,0),d);break e}G0(l,a,Cn,Ku,Xf,s,Bn,Ea,yo,ur,m,null,-0,0)}}break}while(!0);Js(t)}function G0(t,s,a,l,d,m,_,w,j,F,W,ne,G,Y){if(t.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vs},L0(s,m,ne);var pe=(m&62914560)===m?Gu-tn():(m&4194048)===m?B0-tn():0;if(pe=i1(ne,pe),pe!==null){Ai=m,t.cancelPendingCommit=pe(Z0.bind(null,t,s,m,a,l,d,_,w,j,W,ne,null,G,Y)),mr(t,m,_,!F);return}}Z0(t,s,m,a,l,d,_,w,j)}function xT(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!kn(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function mr(t,s,a,l){s&=~$f,s&=~Ea,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var d=s;0<d;){var m=31-gt(d),_=1<<m;l[m]=-1,d&=~_}a!==0&&Wr(t,a,s)}function Yu(){return(et&6)===0?(Kl(0),!1):!0}function em(){if(Ue!==null){if(nt===0)var t=Ue.return;else t=Ue,pi=fa=null,gf(t),lo=null,Rl=0,t=Ue;for(;t!==null;)E0(t.alternate,t),t=t.return;Ue=null}}function _o(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,zT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ai=0,em(),ut=t,Ue=a=fi(t.current,null),Be=s,nt=0,zn=null,ur=!1,go=ps(t,s),Yf=!1,yo=Bn=$f=Ea=hr=At=0,Cn=Gl=null,Xf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var d=31-gt(l),m=1<<d;s|=t[d],l&=~m}return Si=s,pu(),a}function Q0(t,s){ke=null,Q.H=Ll,s===oo||s===wu?(s=ly(),nt=3):s===sf?(s=ly(),nt=4):nt=s===jf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,Ue===null&&(At=1,Lu(t,ts(s,t.current)))}function K0(){var t=Pn.current;return t===null?!0:(Be&4194048)===Be?rs===null:(Be&62914560)===Be||(Be&536870912)!==0?t===rs:!1}function Y0(){var t=Q.H;return Q.H=Ll,t===null?Ll:t}function $0(){var t=Q.A;return Q.A=vT,t}function $u(){At=4,ur||(Be&4194048)!==Be&&Pn.current!==null||(go=!0),(hr&134217727)===0&&(Ea&134217727)===0||ut===null||mr(ut,Be,Bn,!1)}function tm(t,s,a){var l=et;et|=2;var d=Y0(),m=$0();(ut!==t||Be!==s)&&(Ku=null,_o(t,s)),s=!1;var _=At;e:do try{if(nt!==0&&Ue!==null){var w=Ue,j=zn;switch(nt){case 8:em(),_=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var F=nt;if(nt=0,zn=null,xo(t,w,j,F),a&&go){_=0;break e}break;default:F=nt,nt=0,zn=null,xo(t,w,j,F)}}bT(),_=At;break}catch(W){Q0(t,W)}while(!0);return s&&t.shellSuspendCounter++,pi=fa=null,et=l,Q.H=d,Q.A=m,Ue===null&&(ut=null,Be=0,pu()),_}function bT(){for(;Ue!==null;)X0(Ue)}function ET(t,s){var a=et;et|=2;var l=Y0(),d=$0();ut!==t||Be!==s?(Ku=null,Qu=tn()+500,_o(t,s)):go=ps(t,s);e:do try{if(nt!==0&&Ue!==null){s=Ue;var m=zn;t:switch(nt){case 1:nt=0,zn=null,xo(t,s,m,1);break;case 2:case 9:if(ay(m)){nt=0,zn=null,W0(s);break}s=function(){nt!==2&&nt!==9||ut!==t||(nt=7),Js(t)},m.then(s,s);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:ay(m)?(nt=0,zn=null,W0(s)):(nt=0,zn=null,xo(t,s,m,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var w=Ue;if(_?kv(_):w.stateNode.complete){nt=0,zn=null;var j=w.sibling;if(j!==null)Ue=j;else{var F=w.return;F!==null?(Ue=F,Xu(F)):Ue=null}break t}}nt=0,zn=null,xo(t,s,m,5);break;case 6:nt=0,zn=null,xo(t,s,m,6);break;case 8:em(),At=6;break e;default:throw Error(r(462))}}wT();break}catch(W){Q0(t,W)}while(!0);return pi=fa=null,Q.H=l,Q.A=d,et=a,Ue!==null?0:(ut=null,Be=0,pu(),At)}function wT(){for(;Ue!==null&&!sl();)X0(Ue)}function X0(t){var s=x0(t.alternate,t,Si);t.memoizedProps=t.pendingProps,s===null?Xu(t):Ue=s}function W0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=m0(a,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=m0(a,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:gf(s);default:E0(a,s),s=Ue=$g(s,Si),s=x0(a,s,Si)}t.memoizedProps=t.pendingProps,s===null?Xu(t):Ue=s}function xo(t,s,a,l){pi=fa=null,gf(s),lo=null,Rl=0;var d=s.return;try{if(hT(t,d,s,a,Be)){At=1,Lu(t,ts(a,t.current)),Ue=null;return}}catch(m){if(d!==null)throw Ue=d,m;At=1,Lu(t,ts(a,t.current)),Ue=null;return}s.flags&32768?(Qe||l===1?t=!0:go||(Be&536870912)!==0?t=!1:(ur=t=!0,(l===2||l===9||l===3||l===6)&&(l=Pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),J0(s,t)):Xu(s)}function Xu(t){var s=t;do{if((s.flags&32768)!==0){J0(s,ur);return}t=s.return;var a=mT(s.alternate,s,Si);if(a!==null){Ue=a;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=t}while(s!==null);At===0&&(At=5)}function J0(t,s){do{var a=pT(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);At=6,Ue=null}function Z0(t,s,a,l,d,m,_,w,j){t.cancelPendingCommit=null;do Wu();while(Kt!==0);if((et&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=qd,Od(t,a,m,_,w,j),t===ut&&(Ue=ut=null,Be=0),vo=s,fr=t,Ai=a,Wf=m,Jf=d,q0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,NT(fs,function(){return iv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,d=le.p,le.p=2,_=et,et|=4;try{gT(t,s,a)}finally{et=_,le.p=d,Q.T=l}}Kt=1,ev(),tv(),nv()}}function ev(){if(Kt===1){Kt=0;var t=fr,s=vo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var d=et;et|=4;try{M0(s,t);var m=fm,_=zg(t.containerInfo),w=m.focusedElem,j=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&Ug(w.ownerDocument.documentElement,w)){if(j!==null&&Ld(w)){var F=j.start,W=j.end;if(W===void 0&&(W=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(W,w.value.length);else{var ne=w.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var Y=G.getSelection(),pe=w.textContent.length,Ae=Math.min(j.start,pe),ct=j.end===void 0?Ae:Math.min(j.end,pe);!Y.extend&&Ae>ct&&(_=ct,ct=Ae,Ae=_);var B=Pg(w,Ae),L=Pg(w,ct);if(B&&L&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),Y.removeAllRanges(),Ae>ct?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(ne=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var ee=ne[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}ch=!!dm,fm=dm=null}finally{et=d,le.p=l,Q.T=a}}t.current=s,Kt=2}}function tv(){if(Kt===2){Kt=0;var t=fr,s=vo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var d=et;et|=4;try{R0(t,s.alternate,s)}finally{et=d,le.p=l,Q.T=a}}Kt=3}}function nv(){if(Kt===4||Kt===3){Kt=0,La();var t=fr,s=vo,a=Ai,l=q0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Kt=5:(Kt=0,vo=fr=null,sv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(dr=null),ci(a),s=s.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(ht,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,d=le.p,le.p=2,Q.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];m(w.value,{componentStack:w.stack})}}finally{Q.T=s,le.p=d}}(Ai&3)!==0&&Wu(),Js(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Zf?Ql++:(Ql=0,Zf=t):Ql=0,Kl(0)}}function sv(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Nl(s)))}function Wu(){return ev(),tv(),nv(),iv()}function iv(){if(Kt!==5)return!1;var t=fr,s=Wf;Wf=0;var a=ci(Ai),l=Q.T,d=le.p;try{le.p=32>a?32:a,Q.T=null,a=Jf,Jf=null;var m=fr,_=Ai;if(Kt=0,vo=fr=null,Ai=0,(et&6)!==0)throw Error(r(331));var w=et;if(et|=4,U0(m.current),k0(m,m.current,_,a),et=w,Kl(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(ht,m)}catch{}return!0}finally{le.p=d,Q.T=l,sv(t,s)}}function rv(t,s,a){s=ts(a,s),s=Df(t.stateNode,s,2),t=ar(t,s,2),t!==null&&(Xr(t,2),Js(t))}function st(t,s,a){if(t.tag===3)rv(t,t,a);else for(;s!==null;){if(s.tag===3){rv(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(dr===null||!dr.has(l))){t=ts(a,t),a=a0(2),l=ar(s,a,2),l!==null&&(o0(a,l,s,t),Xr(l,2),Js(l));break}}s=s.return}}function nm(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new _T;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(Yf=!0,d.add(a),t=TT.bind(null,t,s,a),s.then(t,t))}function TT(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ut===t&&(Be&a)===a&&(At===4||At===3&&(Be&62914560)===Be&&300>tn()-Gu?(et&2)===0&&_o(t,0):$f|=a,yo===Be&&(yo=0)),Js(t)}function av(t,s){s===0&&(s=Kc()),t=ua(t,s),t!==null&&(Xr(t,s),Js(t))}function ST(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),av(t,a)}function AT(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),av(t,a)}function NT(t,s){return Rt(t,s)}var Ju=null,bo=null,sm=!1,Zu=!1,im=!1,pr=0;function Js(t){t!==bo&&t.next===null&&(bo===null?Ju=bo=t:bo=bo.next=t),Zu=!0,sm||(sm=!0,RT())}function Kl(t,s){if(!im&&Zu){im=!0;do for(var a=!1,l=Ju;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var _=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-gt(42|t)+1)-1,m&=d&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,uv(l,m))}else m=Be,m=Ms(l,l===ut?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ps(l,m)||(a=!0,uv(l,m));l=l.next}while(a);im=!1}}function CT(){ov()}function ov(){Zu=sm=!1;var t=0;pr!==0&&UT()&&(t=pr);for(var s=tn(),a=null,l=Ju;l!==null;){var d=l.next,m=lv(l,s);m===0?(l.next=null,a===null?Ju=d:a.next=d,d===null&&(bo=a)):(a=l,(t!==0||(m&3)!==0)&&(Zu=!0)),l=d}Kt!==0&&Kt!==5||Kl(t),pr!==0&&(pr=0)}function lv(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-gt(m),w=1<<_,j=d[_];j===-1?((w&a)===0||(w&l)!==0)&&(d[_]=jd(w,s)):j<=s&&(t.expiredLanes|=w),m&=~w}if(s=ut,a=Be,a=Ms(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ds(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ps(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Ds(l),ci(a)){case 2:case 8:a=Fi;break;case 32:a=fs;break;case 268435456:a=te;break;default:a=fs}return l=cv.bind(null,t),a=Rt(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Ds(l),t.callbackPriority=2,t.callbackNode=null,2}function cv(t,s){if(Kt!==0&&Kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Wu()&&t.callbackNode!==a)return null;var l=Be;return l=Ms(t,t===ut?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(F0(t,l,s),lv(t,tn()),t.callbackNode!=null&&t.callbackNode===a?cv.bind(null,t):null)}function uv(t,s){if(Wu())return null;F0(t,s,!0)}function RT(){BT(function(){(et&6)!==0?Rt(Kr,CT):ov()})}function rm(){if(pr===0){var t=ro;t===0&&(t=js,js<<=1,(js&261888)===0&&(js=256)),pr=t}return pr}function hv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Fa(""+t)}function dv(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function IT(t,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var m=hv((d[$t]||null).action),_=l.submitter;_&&(s=(s=_[$t]||null)?hv(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var w=new Gs("action","action",null,l,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(pr!==0){var j=_?dv(d,_):new FormData(d);Sf(a,{pending:!0,data:j,method:d.method,action:m},null,j)}}else typeof m=="function"&&(w.preventDefault(),j=_?dv(d,_):new FormData(d),Sf(a,{pending:!0,data:j,method:d.method,action:m},m,j))},currentTarget:d}]})}}for(var am=0;am<Bd.length;am++){var om=Bd[am],DT=om.toLowerCase(),jT=om[0].toUpperCase()+om.slice(1);ws(DT,"on"+jT)}ws(Hg,"onAnimationEnd"),ws(Fg,"onAnimationIteration"),ws(Gg,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(Yw,"onTransitionRun"),ws($w,"onTransitionStart"),ws(Xw,"onTransitionCancel"),ws(Qg,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function fv(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var w=l[_],j=w.instance,F=w.currentTarget;if(w=w.listener,j!==m&&d.isPropagationStopped())break e;m=w,d.currentTarget=F;try{m(d)}catch(W){mu(W)}d.currentTarget=null,m=j}else for(_=0;_<l.length;_++){if(w=l[_],j=w.instance,F=w.currentTarget,w=w.listener,j!==m&&d.isPropagationStopped())break e;m=w,d.currentTarget=F;try{m(d)}catch(W){mu(W)}d.currentTarget=null,m=j}}}}function ze(t,s){var a=s[Ua];a===void 0&&(a=s[Ua]=new Set);var l=t+"__bubble";a.has(l)||(mv(s,t,2,!1),a.add(l))}function lm(t,s,a){var l=0;s&&(l|=4),mv(a,t,l,s)}var eh="_reactListening"+Math.random().toString(36).slice(2);function cm(t){if(!t[eh]){t[eh]=!0,al.forEach(function(a){a!=="selectionchange"&&(OT.has(a)||lm(a,!1,t),lm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[eh]||(s[eh]=!0,lm("selectionchange",!1,s))}}function mv(t,s,a,l){switch(Hv(s)){case 2:var d=o1;break;case 8:d=l1;break;default:d=Tm}a=d.bind(null,s,a,t),d=void 0,!na||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function um(t,s,a,l,d){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===d)break;if(_===4)for(_=l.return;_!==null;){var j=_.tag;if((j===3||j===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;w!==null;){if(_=Ps(w),_===null)return;if(j=_.tag,j===5||j===6||j===26||j===27){l=m=_;continue e}w=w.parentNode}}l=l.return}Xi(function(){var F=m,W=Wn(a),ne=[];e:{var G=Kg.get(t);if(G!==void 0){var Y=Gs,pe=t;switch(t){case"keypress":if(ia(a)===0)break e;case"keydown":case"keyup":Y=hu;break;case"focusin":pe="focus",Y=aa;break;case"focusout":pe="blur",Y=aa;break;case"beforeblur":case"afterblur":Y=aa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=v;break;case Hg:case Fg:case Gg:Y=iu;break;case Qg:Y=S;break;case"scroll":case"scrollend":Y=vl;break;case"wheel":Y=K;break;case"copy":case"cut":case"paste":Y=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=di;break;case"toggle":case"beforetoggle":Y=Ve}var Ae=(s&4)!==0,ct=!Ae&&(t==="scroll"||t==="scrollend"),B=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var L=F,H;L!==null;){var ee=L;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=_s(L,B),ee!=null&&Ae.push($l(L,ee,H))),ct)break;L=L.return}0<Ae.length&&(G=new Y(G,pe,null,a,W),ne.push({event:G,listeners:Ae}))}}if((s&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&a!==pl&&(pe=a.relatedTarget||a.fromElement)&&(Ps(pe)||pe[ks]))break e;if((Y||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(pe=a.relatedTarget||a.toElement,Y=F,pe=pe?Ps(pe):null,pe!==null&&(ct=c(pe),Ae=pe.tag,pe!==ct||Ae!==5&&Ae!==27&&Ae!==6)&&(pe=null)):(Y=null,pe=F),Y!==pe)){if(Ae=_l,ee="onMouseLeave",B="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=di,ee="onPointerLeave",B="onPointerEnter",L="pointer"),ct=Y==null?G:Mn(Y),H=pe==null?G:Mn(pe),G=new Ae(ee,L+"leave",Y,a,W),G.target=ct,G.relatedTarget=H,ee=null,Ps(W)===F&&(Ae=new Ae(B,L+"enter",pe,a,W),Ae.target=H,Ae.relatedTarget=ct,ee=Ae),ct=ee,Y&&pe)t:{for(Ae=MT,B=Y,L=pe,H=0,ee=B;ee;ee=Ae(ee))H++;ee=0;for(var we=L;we;we=Ae(we))ee++;for(;0<H-ee;)B=Ae(B),H--;for(;0<ee-H;)L=Ae(L),ee--;for(;H--;){if(B===L||L!==null&&B===L.alternate){Ae=B;break t}B=Ae(B),L=Ae(L)}Ae=null}else Ae=null;Y!==null&&pv(ne,G,Y,Ae,!1),pe!==null&&ct!==null&&pv(ne,ct,pe,Ae,!0)}}e:{if(G=F?Mn(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var Xe=jg;else if(Ig(G))if(Og)Xe=Gw;else{Xe=Hw;var xe=qw}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Ha(F.elementType)&&(Xe=jg):Xe=Fw;if(Xe&&(Xe=Xe(t,F))){Dg(ne,Xe,a,W);break e}xe&&xe(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&dl(G,"number",G.value)}switch(xe=F?Mn(F):window,t){case"focusin":(Ig(xe)||xe.contentEditable==="true")&&(Wa=xe,Pd=F,Tl=null);break;case"focusout":Tl=Pd=Wa=null;break;case"mousedown":Ud=!0;break;case"contextmenu":case"mouseup":case"dragend":Ud=!1,Bg(ne,a,W);break;case"selectionchange":if(Kw)break;case"keydown":case"keyup":Bg(ne,a,W)}var Pe;if(Ze)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Xa?oa(t,a)&&(qe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(Ys&&a.locale!=="ko"&&(Xa||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Xa&&(Pe=yl()):(Fs=W,gl="value"in Fs?Fs.value:Fs.textContent,Xa=!0)),xe=th(F,qe),0<xe.length&&(qe=new Ks(qe,t,null,a,W),ne.push({event:qe,listeners:xe}),Pe?qe.data=Pe:(Pe=$a(a),Pe!==null&&(qe.data=Pe)))),(Pe=Zn?Pw(t,a):Uw(t,a))&&(qe=th(F,"onBeforeInput"),0<qe.length&&(xe=new Ks("onBeforeInput","beforeinput",null,a,W),ne.push({event:xe,listeners:qe}),xe.data=Pe)),IT(ne,t,F,a,W)}fv(ne,s)})}function $l(t,s,a){return{instance:t,listener:s,currentTarget:a}}function th(t,s){for(var a=s+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=_s(t,a),d!=null&&l.unshift($l(t,d,m)),d=_s(t,s),d!=null&&l.push($l(t,d,m))),t.tag===3)return l;t=t.return}return[]}function MT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function pv(t,s,a,l,d){for(var m=s._reactName,_=[];a!==null&&a!==l;){var w=a,j=w.alternate,F=w.stateNode;if(w=w.tag,j!==null&&j===l)break;w!==5&&w!==26&&w!==27||F===null||(j=F,d?(F=_s(a,m),F!=null&&_.unshift($l(a,F,j))):d||(F=_s(a,m),F!=null&&_.push($l(a,F,j)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var VT=/\r\n?/g,kT=/\u0000|\uFFFD/g;function gv(t){return(typeof t=="string"?t:""+t).replace(VT,`
`).replace(kT,"")}function yv(t,s){return s=gv(s),gv(t)===s}function lt(t,s,a,l,d,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Tn(t,""+l);break;case"className":Vn(t,"class",l);break;case"tabIndex":Vn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(t,a,l);break;case"style":ml(t,l,m);break;case"data":if(s!=="object"){Vn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Fa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&lt(t,s,"name",d.name,d,null),lt(t,s,"formEncType",d.formEncType,d,null),lt(t,s,"formMethod",d.formMethod,d,null),lt(t,s,"formTarget",d.formTarget,d,null)):(lt(t,s,"encType",d.encType,d,null),lt(t,s,"method",d.method,d,null),lt(t,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Fa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=vs);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Fa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ze("beforetoggle",t),ze("toggle",t),Ba(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ba(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=tu.get(a)||a,Ba(t,a,l))}}function hm(t,s,a,l,d,m){switch(a){case"style":ml(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&Tn(t,""+l);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"onClick":l!=null&&(t.onclick=vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ba(t,a,l)}}}function on(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",t),ze("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:lt(t,s,m,_,a,null)}}d&&lt(t,s,"srcSet",a.srcSet,a,null),l&&lt(t,s,"src",a.src,a,null);return;case"input":ze("invalid",t);var w=m=_=d=null,j=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":d=W;break;case"type":_=W;break;case"checked":j=W;break;case"defaultChecked":F=W;break;case"value":m=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:lt(t,s,l,W,a,null)}}Jc(t,m,w,j,F,_,d,!1);return;case"select":ze("invalid",t),l=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:lt(t,s,d,w,a,null)}s=m,a=_,t.multiple=!!l,s!=null?Qi(t,!!l,s,!1):a!=null&&Qi(t,!!l,a,!0);return;case"textarea":ze("invalid",t),m=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":d=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:lt(t,s,_,w,a,null)}Ki(t,l,d,m);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(t,s,j,l,a,null)}return;case"dialog":ze("beforetoggle",t),ze("toggle",t),ze("cancel",t),ze("close",t);break;case"iframe":case"object":ze("load",t);break;case"video":case"audio":for(l=0;l<Yl.length;l++)ze(Yl[l],t);break;case"image":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"embed":case"source":case"link":ze("error",t),ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:lt(t,s,F,l,a,null)}return;default:if(Ha(s)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&hm(t,s,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&lt(t,s,w,l,a,null))}function LT(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,w=null,j=null,F=null,W=null;for(Y in a){var ne=a[Y];if(a.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":j=ne;default:l.hasOwnProperty(Y)||lt(t,s,Y,null,l,ne)}}for(var G in l){var Y=l[G];if(ne=a[G],l.hasOwnProperty(G)&&(Y!=null||ne!=null))switch(G){case"type":m=Y;break;case"name":d=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":_=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:Y!==ne&&lt(t,s,G,Y,l,ne)}}qa(t,_,w,j,F,W,m,d);return;case"select":Y=_=w=G=null;for(m in a)if(j=a[m],a.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":Y=j;default:l.hasOwnProperty(m)||lt(t,s,m,null,l,j)}for(d in l)if(m=l[d],j=a[d],l.hasOwnProperty(d)&&(m!=null||j!=null))switch(d){case"value":G=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==j&&lt(t,s,d,m,l,j)}s=w,a=_,l=Y,G!=null?Qi(t,!!a,G,!1):!!l!=!!a&&(s!=null?Qi(t,!!a,s,!0):Qi(t,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:lt(t,s,w,null,l,d)}for(_ in l)if(d=l[_],m=a[_],l.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":G=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&lt(t,s,_,d,l,m)}Zc(t,G,Y);return;case"option":for(var pe in a)if(G=a[pe],a.hasOwnProperty(pe)&&G!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:lt(t,s,pe,null,l,G)}for(j in l)if(G=l[j],Y=a[j],l.hasOwnProperty(j)&&G!==Y&&(G!=null||Y!=null))switch(j){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:lt(t,s,j,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)G=a[Ae],a.hasOwnProperty(Ae)&&G!=null&&!l.hasOwnProperty(Ae)&&lt(t,s,Ae,null,l,G);for(F in l)if(G=l[F],Y=a[F],l.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:lt(t,s,F,G,l,Y)}return;default:if(Ha(s)){for(var ct in a)G=a[ct],a.hasOwnProperty(ct)&&G!==void 0&&!l.hasOwnProperty(ct)&&hm(t,s,ct,void 0,l,G);for(W in l)G=l[W],Y=a[W],!l.hasOwnProperty(W)||G===Y||G===void 0&&Y===void 0||hm(t,s,W,G,l,Y);return}}for(var B in a)G=a[B],a.hasOwnProperty(B)&&G!=null&&!l.hasOwnProperty(B)&&lt(t,s,B,null,l,G);for(ne in l)G=l[ne],Y=a[ne],!l.hasOwnProperty(ne)||G===Y||G==null&&Y==null||lt(t,s,ne,G,l,Y)}function vv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,_=d.initiatorType,w=d.duration;if(m&&w&&vv(_)){for(_=0,w=d.responseEnd,l+=1;l<a.length;l++){var j=a[l],F=j.startTime;if(F>w)break;var W=j.transferSize,ne=j.initiatorType;W&&vv(ne)&&(j=j.responseEnd,_+=W*(j<w?1:(w-F)/(j-F)))}if(--l,s+=8*(m+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var dm=null,fm=null;function nh(t){return t.nodeType===9?t:t.ownerDocument}function _v(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function mm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pm=null;function UT(){var t=window.event;return t&&t.type==="popstate"?t===pm?!1:(pm=t,!0):(pm=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,zT=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,BT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(t){return Ev.resolve(null).then(t).catch(qT)}:bv;function qT(t){setTimeout(function(){throw t})}function gr(t){return t==="head"}function wv(t,s){var a=s,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),So(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Xl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Xl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[Ls]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Xl(t.ownerDocument.body);a=d}while(a);So(s)}function Tv(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function gm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gm(a),za(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function HT(t,s,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ls])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=as(t.nextSibling),t===null)break}return null}function FT(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=as(t.nextSibling),t===null))return null;return t}function Sv(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=as(t.nextSibling),t===null))return null;return t}function ym(t){return t.data==="$?"||t.data==="$~"}function vm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function GT(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function as(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var _m=null;function Av(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return as(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Nv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Cv(t,s,a){switch(s=nh(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Xl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);za(t)}var os=new Map,Rv=new Set;function sh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ni=le.d;le.d={f:QT,r:KT,D:YT,C:$T,L:XT,m:WT,X:ZT,S:JT,M:e1};function QT(){var t=Ni.f(),s=Yu();return t||s}function KT(t){var s=Xn(t);s!==null&&s.tag===5&&s.type==="form"?Qy(s):Ni.r(t)}var Eo=typeof document>"u"?null:document;function Iv(t,s,a){var l=Eo;if(l&&typeof s=="string"&&s){var d=wn(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Rv.has(d)||(Rv.add(d),t={rel:t,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),on(s,"link",t),kt(s),l.head.appendChild(s)))}}function YT(t){Ni.D(t),Iv("dns-prefetch",t,null)}function $T(t,s){Ni.C(t,s),Iv("preconnect",t,s)}function XT(t,s,a){Ni.L(t,s,a);var l=Eo;if(l&&t&&s){var d='link[rel="preload"][as="'+wn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+wn(a.imageSizes)+'"]')):d+='[href="'+wn(t)+'"]';var m=d;switch(s){case"style":m=wo(t);break;case"script":m=To(t)}os.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),os.set(m,t),l.querySelector(d)!==null||s==="style"&&l.querySelector(Wl(m))||s==="script"&&l.querySelector(Jl(m))||(s=l.createElement("link"),on(s,"link",t),kt(s),l.head.appendChild(s)))}}function WT(t,s){Ni.m(t,s);var a=Eo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+wn(l)+'"][href="'+wn(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=To(t)}if(!os.has(m)&&(t=E({rel:"modulepreload",href:t},s),os.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jl(m)))return}l=a.createElement("link"),on(l,"link",t),kt(l),a.head.appendChild(l)}}}function JT(t,s,a){Ni.S(t,s,a);var l=Eo;if(l&&t){var d=Us(l).hoistableStyles,m=wo(t);s=s||"default";var _=d.get(m);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(Wl(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=os.get(m))&&xm(t,a);var j=_=l.createElement("link");kt(j),on(j,"link",t),j._p=new Promise(function(F,W){j.onload=F,j.onerror=W}),j.addEventListener("load",function(){w.loading|=1}),j.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ih(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:w},d.set(m,_)}}}function ZT(t,s){Ni.X(t,s);var a=Eo;if(a&&t){var l=Us(a).hoistableScripts,d=To(t),m=l.get(d);m||(m=a.querySelector(Jl(d)),m||(t=E({src:t,async:!0},s),(s=os.get(d))&&bm(t,s),m=a.createElement("script"),kt(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function e1(t,s){Ni.M(t,s);var a=Eo;if(a&&t){var l=Us(a).hoistableScripts,d=To(t),m=l.get(d);m||(m=a.querySelector(Jl(d)),m||(t=E({src:t,async:!0,type:"module"},s),(s=os.get(d))&&bm(t,s),m=a.createElement("script"),kt(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Dv(t,s,a,l){var d=(d=Ce.current)?sh(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=wo(a.href),a=Us(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=wo(a.href);var m=Us(d).hoistableStyles,_=m.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=d.querySelector(Wl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),os.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},os.set(t,a),m||t1(d,t,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=To(a),a=Us(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function wo(t){return'href="'+wn(t)+'"'}function Wl(t){return'link[rel="stylesheet"]['+t+"]"}function jv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function t1(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),on(s,"link",a),kt(s),t.head.appendChild(s))}function To(t){return'[src="'+wn(t)+'"]'}function Jl(t){return"script[async]"+t}function Ov(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+wn(a.href)+'"]');if(l)return s.instance=l,kt(l),l;var d=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),kt(l),on(l,"style",d),ih(l,a.precedence,t),s.instance=l;case"stylesheet":d=wo(a.href);var m=t.querySelector(Wl(d));if(m)return s.state.loading|=4,s.instance=m,kt(m),m;l=jv(a),(d=os.get(d))&&xm(l,d),m=(t.ownerDocument||t).createElement("link"),kt(m);var _=m;return _._p=new Promise(function(w,j){_.onload=w,_.onerror=j}),on(m,"link",l),s.state.loading|=4,ih(m,a.precedence,t),s.instance=m;case"script":return m=To(a.src),(d=t.querySelector(Jl(m)))?(s.instance=d,kt(d),d):(l=a,(d=os.get(m))&&(l=E({},a),bm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),kt(d),on(d,"link",l),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,ih(l,a.precedence,t));return s.instance}function ih(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===s)m=w;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function xm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function bm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var rh=null;function Mv(t,s,a){if(rh===null){var l=new Map,d=rh=new Map;d.set(a,l)}else d=rh,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[Ls]||m[Vt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var w=l.get(_);w?w.push(m):l.set(_,[m])}}return l}function Vv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function n1(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function kv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function s1(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=wo(l.href),m=s.querySelector(Wl(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=ah.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,kt(m);return}m=s.ownerDocument||s,l=jv(l),(d=os.get(d))&&xm(l,d),m=m.createElement("link"),kt(m);var _=m;_._p=new Promise(function(w,j){_.onload=w,_.onerror=j}),on(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=ah.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Em=0;function i1(t,s){return t.stylesheets&&t.count===0&&lh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&lh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Em===0&&(Em=62500*PT());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&lh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Em?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var oh=null;function lh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,oh=new Map,s.forEach(r1,t),oh=null,ah.call(t))}function r1(t,s){if(!(s.state.loading&4)){var a=oh.get(t);if(a)var l=a.get(null);else{a=new Map,oh.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=s.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,d),a.set(_,d),this.count++,l=ah.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Zl={$$typeof:J,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function a1(t,s,a,l,d,m,_,w,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vs(0),this.hiddenUpdates=Vs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Lv(t,s,a,l,d,m,_,w,j,F,W,ne){return t=new a1(t,s,a,_,j,F,W,ne,w),s=1,m===!0&&(s|=24),m=Ln(3,null,null,s),t.current=m,m.stateNode=t,s=ef(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},rf(m),t}function Pv(t){return t?(t=eo,t):eo}function Uv(t,s,a,l,d,m){d=Pv(d),l.context===null?l.context=d:l.pendingContext=d,l=rr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ar(t,l,s),a!==null&&(Rn(a,t,s),Dl(a,t,s))}function zv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function wm(t,s){zv(t,s),(t=t.alternate)&&zv(t,s)}function Bv(t){if(t.tag===13||t.tag===31){var s=ua(t,67108864);s!==null&&Rn(s,t,67108864),wm(t,67108864)}}function qv(t){if(t.tag===13||t.tag===31){var s=qn();s=Jr(s);var a=ua(t,s);a!==null&&Rn(a,t,s),wm(t,s)}}var ch=!0;function o1(t,s,a,l){var d=Q.T;Q.T=null;var m=le.p;try{le.p=2,Tm(t,s,a,l)}finally{le.p=m,Q.T=d}}function l1(t,s,a,l){var d=Q.T;Q.T=null;var m=le.p;try{le.p=8,Tm(t,s,a,l)}finally{le.p=m,Q.T=d}}function Tm(t,s,a,l){if(ch){var d=Sm(l);if(d===null)um(t,s,l,uh,a),Fv(t,l);else if(u1(d,t,s,a,l))l.stopPropagation();else if(Fv(t,l),s&4&&-1<c1.indexOf(t)){for(;d!==null;){var m=Xn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Os(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var j=1<<31-gt(_);w.entanglements[1]|=j,_&=~j}Js(m),(et&6)===0&&(Qu=tn()+500,Kl(0))}}break;case 31:case 13:w=ua(m,2),w!==null&&Rn(w,m,2),Yu(),wm(m,2)}if(m=Sm(l),m===null&&um(t,s,l,uh,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else um(t,s,l,null,a)}}function Sm(t){return t=Wn(t),Am(t)}var uh=null;function Am(t){if(uh=null,t=Ps(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=h(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return uh=t,null}function Hv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case Kr:return 2;case Fi:return 8;case fs:case Pa:return 32;case te:return 268435456;default:return 32}default:return 32}}var Nm=!1,yr=null,vr=null,_r=null,ec=new Map,tc=new Map,xr=[],c1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fv(t,s){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":ec.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(s.pointerId)}}function nc(t,s,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Xn(s),s!==null&&Bv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function u1(t,s,a,l,d){switch(s){case"focusin":return yr=nc(yr,t,s,a,l,d),!0;case"dragenter":return vr=nc(vr,t,s,a,l,d),!0;case"mouseover":return _r=nc(_r,t,s,a,l,d),!0;case"pointerover":var m=d.pointerId;return ec.set(m,nc(ec.get(m)||null,t,s,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,tc.set(m,nc(tc.get(m)||null,t,s,a,l,d)),!0}return!1}function Gv(t){var s=Ps(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){t.blockedOn=s,gs(t.priority,function(){qv(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,gs(t.priority,function(){qv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Sm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);pl=l,a.target.dispatchEvent(l),pl=null}else return s=Xn(a),s!==null&&Bv(s),t.blockedOn=a,!1;s.shift()}return!0}function Qv(t,s,a){hh(t)&&a.delete(s)}function h1(){Nm=!1,yr!==null&&hh(yr)&&(yr=null),vr!==null&&hh(vr)&&(vr=null),_r!==null&&hh(_r)&&(_r=null),ec.forEach(Qv),tc.forEach(Qv)}function dh(t,s){t.blockedOn===s&&(t.blockedOn=null,Nm||(Nm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,h1)))}var fh=null;function Kv(t){fh!==t&&(fh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){fh===t&&(fh=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],d=t[s+2];if(typeof l!="function"){if(Am(l||a)===null)continue;break}var m=Xn(a);m!==null&&(t.splice(s,3),s-=3,Sf(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function So(t){function s(j){return dh(j,t)}yr!==null&&dh(yr,t),vr!==null&&dh(vr,t),_r!==null&&dh(_r,t),ec.forEach(s),tc.forEach(s);for(var a=0;a<xr.length;a++){var l=xr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)Gv(a),a.blockedOn===null&&xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],_=d[$t]||null;if(typeof m=="function")_||Kv(a);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[$t]||null)w=_.formAction;else if(Am(d)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Kv(a)}}}function Yv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Cm(t){this._internalRoot=t}mh.prototype.render=Cm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=qn();Uv(a,l,t,s,null,null)},mh.prototype.unmount=Cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Uv(t.current,2,null,t,null,null),Yu(),s[ks]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Yc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<xr.length&&s!==0&&s<xr[a].priority;a++);xr.splice(a,0,t),a===0&&Gv(t)}};var $v=e.version;if($v!=="19.2.0")throw Error(r(527,$v,"19.2.0"));le.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var d1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{ht=ph.inject(d1),bt=ph}catch{}}return ic.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",d=n0,m=s0,_=i0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Lv(t,1,!1,null,null,a,l,null,d,m,_,Yv),t[ks]=s.current,cm(t),new Cm(s)},ic.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,d="",m=n0,_=s0,w=i0,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),s=Lv(t,1,!0,s,a??null,l,d,j,m,_,w,Yv),s.context=Pv(null),a=s.current,l=qn(),l=Jr(l),d=rr(l),d.callback=null,ar(a,d,l),a=l,s.current.lanes=a,Xr(s,a),Js(s),t[ks]=s.current,cm(t),new mh(s)},ic.version="19.2.0",ic}var r_;function E1(){if(r_)return Dm.exports;r_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Dm.exports=b1(),Dm.exports}var w1=E1();const T1=Yx(w1);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a_="popstate";function S1(i={}){function e(o,c){let{pathname:h="/",search:p="",hash:y=""}=Ia(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Xm("",{pathname:h,search:p,hash:y},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let y=o.location.href,g=y.indexOf("#");p=g===-1?y:y.slice(0,g)}return p+"#"+(typeof c=="string"?c:yc(c))}function r(o,c){Kn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return N1(e,n,r,i)}function _t(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Kn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A1(){return Math.random().toString(36).substring(2,10)}function o_(i,e){return{usr:i.state,key:i.key,idx:e}}function Xm(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ia(e):e,state:n,key:e&&e.key||r||A1()}}function yc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ia(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function N1(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,p="POP",y=null,g=x();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function x(){return(h.state||{idx:null}).idx}function E(){p="POP";let U=x(),$=U==null?null:U-g;g=U,y&&y({action:p,location:z.location,delta:$})}function T(U,$){p="PUSH";let ie=Xm(z.location,U,$);n&&n(ie,U),g=x()+1;let J=o_(ie,g),fe=z.createHref(ie);try{h.pushState(J,"",fe)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(fe)}c&&y&&y({action:p,location:z.location,delta:1})}function O(U,$){p="REPLACE";let ie=Xm(z.location,U,$);n&&n(ie,U),g=x();let J=o_(ie,g),fe=z.createHref(ie);h.replaceState(J,"",fe),c&&y&&y({action:p,location:z.location,delta:0})}function P(U){return C1(U)}let z={get action(){return p},get location(){return i(o,h)},listen(U){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(a_,E),y=U,()=>{o.removeEventListener(a_,E),y=null}},createHref(U){return e(o,U)},createURL:P,encodeLocation(U){let $=P(U);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:T,replace:O,go(U){return h.go(U)}};return z}function C1(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:yc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function $x(i,e,n="/"){return R1(i,e,n,!1)}function R1(i,e,n,r){let o=typeof e=="string"?Ia(e):e,c=Mi(o.pathname||"/",n);if(c==null)return null;let h=Xx(i);I1(h);let p=null;for(let y=0;p==null&&y<h.length;++y){let g=B1(c);p=U1(h[y],g,r)}return p}function Xx(i,e=[],n=[],r="",o=!1){let c=(h,p,y=o,g)=>{let x={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(r)&&y)return;_t(x.relativePath.startsWith(r),`Absolute route path "${x.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(r.length)}let E=ji([r,x.relativePath]),T=n.concat(x);h.children&&h.children.length>0&&(_t(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Xx(h.children,e,T,E,y)),!(h.path==null&&!h.index)&&e.push({path:E,score:L1(E,h.index),routesMeta:T})};return i.forEach((h,p)=>{var y;if(h.path===""||!((y=h.path)!=null&&y.includes("?")))c(h,p);else for(let g of Wx(h.path))c(h,p,!0,g)}),e}function Wx(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=Wx(r.join("/")),p=[];return p.push(...h.map(y=>y===""?c:[c,y].join("/"))),o&&p.push(...h),p.map(y=>i.startsWith("/")&&y===""?"/":y)}function I1(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:P1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var D1=/^:[\w-]+$/,j1=3,O1=2,M1=1,V1=10,k1=-2,l_=i=>i==="*";function L1(i,e){let n=i.split("/"),r=n.length;return n.some(l_)&&(r+=k1),e&&(r+=O1),n.filter(o=>!l_(o)).reduce((o,c)=>o+(D1.test(c)?j1:c===""?M1:V1),r)}function P1(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function U1(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",h=[];for(let p=0;p<r.length;++p){let y=r[p],g=p===r.length-1,x=c==="/"?e:e.slice(c.length)||"/",E=Ph({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},x),T=y.route;if(!E&&g&&n&&!r[r.length-1].route.index&&(E=Ph({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},x)),!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:ji([c,E.pathname]),pathnameBase:Q1(ji([c,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(c=ji([c,E.pathnameBase]))}return h}function Ph(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=z1(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((g,{paramName:x,isOptional:E},T)=>{if(x==="*"){let P=p[T]||"";h=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const O=p[T];return E&&!O?g[x]=void 0:g[x]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:h,pattern:i}}function z1(i,e=!1,n=!0){Kn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,y)=>(r.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function B1(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Mi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}var q1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H1=i=>q1.test(i);function F1(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?Ia(i):i,c;if(n)if(H1(n))c=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),Kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?c=c_(n.substring(1),"/"):c=c_(n,e)}else c=e;return{pathname:c,search:K1(r),hash:Y1(o)}}function c_(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Vm(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G1(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tp(i){let e=G1(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Sp(i,e,n,r=!1){let o;typeof i=="string"?o=Ia(i):(o={...i},_t(!o.pathname||!o.pathname.includes("?"),Vm("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),Vm("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),Vm("#","search","hash",o)));let c=i===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=n;else{let E=e.length-1;if(!r&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}p=E>=0?e[E]:"/"}let y=F1(o,p),g=h&&h!=="/"&&h.endsWith("/"),x=(c||h===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(g||x)&&(y.pathname+="/"),y}var ji=i=>i.join("/").replace(/\/\/+/g,"/"),Q1=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),K1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Y1=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function $1(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jx=["POST","PUT","PATCH","DELETE"];new Set(Jx);var X1=["GET",...Jx];new Set(X1);var Yo=D.createContext(null);Yo.displayName="DataRouter";var ad=D.createContext(null);ad.displayName="DataRouterState";D.createContext(!1);var Zx=D.createContext({isTransitioning:!1});Zx.displayName="ViewTransition";var W1=D.createContext(new Map);W1.displayName="Fetchers";var J1=D.createContext(null);J1.displayName="Await";var Rs=D.createContext(null);Rs.displayName="Navigation";var Ic=D.createContext(null);Ic.displayName="Location";var Is=D.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var Ap=D.createContext(null);Ap.displayName="RouteError";function Z1(i,{relative:e}={}){_t($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Rs),{hash:o,pathname:c,search:h}=Dc(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:ji([n,c])),r.createHref({pathname:p,search:h,hash:o})}function $o(){return D.useContext(Ic)!=null}function Ui(){return _t($o(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Ic).location}var eb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tb(i){D.useContext(Rs).static||D.useLayoutEffect(i)}function Br(){let{isDataRoute:i}=D.useContext(Is);return i?dS():eS()}function eS(){_t($o(),"useNavigate() may be used only in the context of a <Router> component.");let i=D.useContext(Yo),{basename:e,navigator:n}=D.useContext(Rs),{matches:r}=D.useContext(Is),{pathname:o}=Ui(),c=JSON.stringify(Tp(r)),h=D.useRef(!1);return tb(()=>{h.current=!0}),D.useCallback((y,g={})=>{if(Kn(h.current,eb),!h.current)return;if(typeof y=="number"){n.go(y);return}let x=Sp(y,JSON.parse(c),o,g.relative==="path");i==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ji([e,x.pathname])),(g.replace?n.replace:n.push)(x,g.state,g)},[e,n,c,o,i])}D.createContext(null);function nb(){let{matches:i}=D.useContext(Is),e=i[i.length-1];return e?e.params:{}}function Dc(i,{relative:e}={}){let{matches:n}=D.useContext(Is),{pathname:r}=Ui(),o=JSON.stringify(Tp(n));return D.useMemo(()=>Sp(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function tS(i,e){return sb(i,e)}function sb(i,e,n,r,o){var ie;_t($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=D.useContext(Rs),{matches:h}=D.useContext(Is),p=h[h.length-1],y=p?p.params:{},g=p?p.pathname:"/",x=p?p.pathnameBase:"/",E=p&&p.route;{let J=E&&E.path||"";ib(g,!E||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let T=Ui(),O;if(e){let J=typeof e=="string"?Ia(e):e;_t(x==="/"||((ie=J.pathname)==null?void 0:ie.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${J.pathname}" was given in the \`location\` prop.`),O=J}else O=T;let P=O.pathname||"/",z=P;if(x!=="/"){let J=x.replace(/^\//,"").split("/");z="/"+P.replace(/^\//,"").split("/").slice(J.length).join("/")}let U=$x(i,{pathname:z});Kn(E||U!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Kn(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=aS(U&&U.map(J=>Object.assign({},J,{params:Object.assign({},y,J.params),pathname:ji([x,c.encodeLocation?c.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?x:ji([x,c.encodeLocation?c.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),h,n,r,o);return e&&$?D.createElement(Ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},$):$}function nS(){let i=hS(),e=$1(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:c},"ErrorBoundary")," or"," ",D.createElement("code",{style:c},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:o},n):null,h)}var sS=D.createElement(nS,null),iS=class extends D.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?D.createElement(Is.Provider,{value:this.props.routeContext},D.createElement(Ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rS({routeContext:i,match:e,children:n}){let r=D.useContext(Yo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Is.Provider,{value:i},n)}function aS(i,e=[],n=null,r=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,h=n==null?void 0:n.errors;if(h!=null){let x=c.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);_t(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let p=!1,y=-1;if(n)for(let x=0;x<c.length;x++){let E=c[x];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=x),E.route.id){let{loaderData:T,errors:O}=n,P=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!O||O[E.route.id]===void 0);if(E.route.lazy||P){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}let g=n&&r?(x,E)=>{var T,O;r(x,{location:n.location,params:((O=(T=n.matches)==null?void 0:T[0])==null?void 0:O.params)??{},errorInfo:E})}:void 0;return c.reduceRight((x,E,T)=>{let O,P=!1,z=null,U=null;n&&(O=h&&E.route.id?h[E.route.id]:void 0,z=E.route.errorElement||sS,p&&(y<0&&T===0?(ib("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,U=null):y===T&&(P=!0,U=E.route.hydrateFallbackElement||null)));let $=e.concat(c.slice(0,T+1)),ie=()=>{let J;return O?J=z:P?J=U:E.route.Component?J=D.createElement(E.route.Component,null):E.route.element?J=E.route.element:J=x,D.createElement(rS,{match:E,routeContext:{outlet:x,matches:$,isDataRoute:n!=null},children:J})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?D.createElement(iS,{location:n.location,revalidation:n.revalidation,component:z,error:O,children:ie(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):ie()},null)}function Np(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oS(i){let e=D.useContext(Yo);return _t(e,Np(i)),e}function lS(i){let e=D.useContext(ad);return _t(e,Np(i)),e}function cS(i){let e=D.useContext(Is);return _t(e,Np(i)),e}function Cp(i){let e=cS(i),n=e.matches[e.matches.length-1];return _t(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function uS(){return Cp("useRouteId")}function hS(){var r;let i=D.useContext(Ap),e=lS("useRouteError"),n=Cp("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[n]}function dS(){let{router:i}=oS("useNavigate"),e=Cp("useNavigate"),n=D.useRef(!1);return tb(()=>{n.current=!0}),D.useCallback(async(o,c={})=>{Kn(n.current,eb),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var u_={};function ib(i,e,n){!e&&!u_[i]&&(u_[i]=!0,Kn(!1,n))}D.memo(fS);function fS({routes:i,future:e,state:n,unstable_onError:r}){return sb(i,void 0,n,r,e)}function Sh({to:i,replace:e,state:n,relative:r}){_t($o(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=D.useContext(Rs);Kn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=D.useContext(Is),{pathname:h}=Ui(),p=Br(),y=Sp(i,Tp(c),h,r==="path"),g=JSON.stringify(y);return D.useEffect(()=>{p(JSON.parse(g),{replace:e,state:n,relative:r})},[p,g,r,e,n]),null}function ls(i){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mS({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){_t(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=D.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=Ia(n));let{pathname:y="/",search:g="",hash:x="",state:E=null,key:T="default"}=n,O=D.useMemo(()=>{let P=Mi(y,h);return P==null?null:{location:{pathname:P,search:g,hash:x,state:E,key:T},navigationType:r}},[h,y,g,x,E,T,r]);return Kn(O!=null,`<Router basename="${h}"> is not able to match the URL "${y}${g}${x}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:D.createElement(Rs.Provider,{value:p},D.createElement(Ic.Provider,{children:e,value:O}))}function pS({children:i,location:e}){return tS(Wm(i),e)}function Wm(i,e=[]){let n=[];return D.Children.forEach(i,(r,o)=>{if(!D.isValidElement(r))return;let c=[...e,o];if(r.type===D.Fragment){n.push.apply(n,Wm(r.props.children,c));return}_t(r.type===ls,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Wm(r.props.children,c)),n.push(h)}),n}var Ah="get",Nh="application/x-www-form-urlencoded";function od(i){return i!=null&&typeof i.tagName=="string"}function gS(i){return od(i)&&i.tagName.toLowerCase()==="button"}function yS(i){return od(i)&&i.tagName.toLowerCase()==="form"}function vS(i){return od(i)&&i.tagName.toLowerCase()==="input"}function _S(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function xS(i,e){return i.button===0&&(!e||e==="_self")&&!_S(i)}var gh=null;function bS(){if(gh===null)try{new FormData(document.createElement("form"),0),gh=!1}catch{gh=!0}return gh}var ES=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function km(i){return i!=null&&!ES.has(i)?(Kn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):i}function wS(i,e){let n,r,o,c,h;if(yS(i)){let p=i.getAttribute("action");r=p?Mi(p,e):null,n=i.getAttribute("method")||Ah,o=km(i.getAttribute("enctype"))||Nh,c=new FormData(i)}else if(gS(i)||vS(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=i.getAttribute("formaction")||p.getAttribute("action");if(r=y?Mi(y,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||Ah,o=km(i.getAttribute("formenctype"))||km(p.getAttribute("enctype"))||Nh,c=new FormData(p,i),!bS()){let{name:g,type:x,value:E}=i;if(x==="image"){let T=g?`${g}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else g&&c.append(g,E)}}else{if(od(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ah,r=null,o=Nh,h=i}return c&&o==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function TS(i,e,n){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Mi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function SS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function NS(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await SS(c,n);return h.links?h.links():[]}return[]}));return DS(r.flat(1).filter(AS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function h_(i,e,n,r,o,c){let h=(y,g)=>n[g]?y.route.id!==n[g].route.id:!0,p=(y,g)=>{var x;return n[g].pathname!==y.pathname||((x=n[g].route.path)==null?void 0:x.endsWith("*"))&&n[g].params["*"]!==y.params["*"]};return c==="assets"?e.filter((y,g)=>h(y,g)||p(y,g)):c==="data"?e.filter((y,g)=>{var E;let x=r.routes[y.route.id];if(!x||!x.hasLoader)return!1;if(h(y,g)||p(y,g))return!0;if(y.route.shouldRevalidate){let T=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(i,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function CS(i,e,{includeHydrateFallback:n}={}){return RS(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function RS(i){return[...new Set(i)]}function IS(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function DS(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(IS(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function rb(){let i=D.useContext(Yo);return Rp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function jS(){let i=D.useContext(ad);return Rp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ip=D.createContext(void 0);Ip.displayName="FrameworkContext";function ab(){let i=D.useContext(Ip);return Rp(i,"You must render this element inside a <HydratedRouter> element"),i}function OS(i,e){let n=D.useContext(Ip),[r,o]=D.useState(!1),[c,h]=D.useState(!1),{onFocus:p,onBlur:y,onMouseEnter:g,onMouseLeave:x,onTouchStart:E}=e,T=D.useRef(null);D.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let z=$=>{$.forEach(ie=>{h(ie.isIntersecting)})},U=new IntersectionObserver(z,{threshold:.5});return T.current&&U.observe(T.current),()=>{U.disconnect()}}},[i]),D.useEffect(()=>{if(r){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[r]);let O=()=>{o(!0)},P=()=>{o(!1),h(!1)};return n?i!=="intent"?[c,T,{}]:[c,T,{onFocus:rc(p,O),onBlur:rc(y,P),onMouseEnter:rc(g,O),onMouseLeave:rc(x,P),onTouchStart:rc(E,O)}]:[!1,T,{}]}function rc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function MS({page:i,...e}){let{router:n}=rb(),r=D.useMemo(()=>$x(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?D.createElement(kS,{page:i,matches:r,...e}):null}function VS(i){let{manifest:e,routeModules:n}=ab(),[r,o]=D.useState([]);return D.useEffect(()=>{let c=!1;return NS(i,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[i,e,n]),r}function kS({page:i,matches:e,...n}){let r=Ui(),{manifest:o,routeModules:c}=ab(),{basename:h}=rb(),{loaderData:p,matches:y}=jS(),g=D.useMemo(()=>h_(i,e,y,o,r,"data"),[i,e,y,o,r]),x=D.useMemo(()=>h_(i,e,y,o,r,"assets"),[i,e,y,o,r]),E=D.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let P=new Set,z=!1;if(e.forEach($=>{var J;let ie=o.routes[$.route.id];!ie||!ie.hasLoader||(!g.some(fe=>fe.route.id===$.route.id)&&$.route.id in p&&((J=c[$.route.id])!=null&&J.shouldRevalidate)||ie.hasClientLoader?z=!0:P.add($.route.id))}),P.size===0)return[];let U=TS(i,h,"data");return z&&P.size>0&&U.searchParams.set("_routes",e.filter($=>P.has($.route.id)).map($=>$.route.id).join(",")),[U.pathname+U.search]},[h,p,r,o,g,e,i,c]),T=D.useMemo(()=>CS(x,o),[x,o]),O=VS(x);return D.createElement(D.Fragment,null,E.map(P=>D.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...n})),T.map(P=>D.createElement("link",{key:P,rel:"modulepreload",href:P,...n})),O.map(({key:P,link:z})=>D.createElement("link",{key:P,nonce:n.nonce,...z})))}function LS(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ob=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ob&&(window.__reactRouterVersion="7.9.6")}catch{}function PS({basename:i,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=S1({window:n,v5Compat:!0}));let o=r.current,[c,h]=D.useState({action:o.action,location:o.location}),p=D.useCallback(y=>{D.startTransition(()=>h(y))},[h]);return D.useLayoutEffect(()=>o.listen(p),[o,p]),D.createElement(mS,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var lb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:h,state:p,target:y,to:g,preventScrollReset:x,viewTransition:E,...T},O){let{basename:P}=D.useContext(Rs),z=typeof g=="string"&&lb.test(g),U,$=!1;if(typeof g=="string"&&z&&(U=g,ob))try{let I=new URL(window.location.href),k=g.startsWith("//")?new URL(I.protocol+g):new URL(g),V=Mi(k.pathname,P);k.origin===I.origin&&V!=null?g=V+k.search+k.hash:$=!0}catch{Kn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=Z1(g,{relative:o}),[J,fe,ae]=OS(r,T),he=qS(g,{replace:h,state:p,target:y,preventScrollReset:x,relative:o,viewTransition:E});function R(I){e&&e(I),I.defaultPrevented||he(I)}let C=D.createElement("a",{...T,...ae,href:U||ie,onClick:$||c?e:R,ref:LS(O,fe),target:y,"data-discover":!z&&n==="render"?"true":void 0});return J&&!z?D.createElement(D.Fragment,null,C,D.createElement(MS,{page:ie})):C});mt.displayName="Link";var US=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:h,viewTransition:p,children:y,...g},x){let E=Dc(h,{relative:g.relative}),T=Ui(),O=D.useContext(ad),{navigator:P,basename:z}=D.useContext(Rs),U=O!=null&&KS(E)&&p===!0,$=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,ie=T.pathname,J=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(ie=ie.toLowerCase(),J=J?J.toLowerCase():null,$=$.toLowerCase()),J&&z&&(J=Mi(J,z)||J);const fe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ae=ie===$||!o&&ie.startsWith($)&&ie.charAt(fe)==="/",he=J!=null&&(J===$||!o&&J.startsWith($)&&J.charAt($.length)==="/"),R={isActive:ae,isPending:he,isTransitioning:U},C=ae?e:void 0,I;typeof r=="function"?I=r(R):I=[r,ae?"active":null,he?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let k=typeof c=="function"?c(R):c;return D.createElement(mt,{...g,"aria-current":C,className:I,ref:x,style:k,to:h,viewTransition:p},typeof y=="function"?y(R):y)});US.displayName="NavLink";var zS=D.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:h=Ah,action:p,onSubmit:y,relative:g,preventScrollReset:x,viewTransition:E,...T},O)=>{let P=GS(),z=QS(p,{relative:g}),U=h.toLowerCase()==="get"?"get":"post",$=typeof p=="string"&&lb.test(p),ie=J=>{if(y&&y(J),J.defaultPrevented)return;J.preventDefault();let fe=J.nativeEvent.submitter,ae=(fe==null?void 0:fe.getAttribute("formmethod"))||h;P(fe||J.currentTarget,{fetcherKey:e,method:ae,navigate:n,replace:o,state:c,relative:g,preventScrollReset:x,viewTransition:E})};return D.createElement("form",{ref:O,method:U,action:z,onSubmit:r?y:ie,...T,"data-discover":!$&&i==="render"?"true":void 0})});zS.displayName="Form";function BS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cb(i){let e=D.useContext(Yo);return _t(e,BS(i)),e}function qS(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:h}={}){let p=Br(),y=Ui(),g=Dc(i,{relative:c});return D.useCallback(x=>{if(xS(x,e)){x.preventDefault();let E=n!==void 0?n:yc(y)===yc(g);p(i,{replace:E,state:r,preventScrollReset:o,relative:c,viewTransition:h})}},[y,p,g,n,r,e,i,o,c,h])}var HS=0,FS=()=>`__${String(++HS)}__`;function GS(){let{router:i}=cb("useSubmit"),{basename:e}=D.useContext(Rs),n=uS();return D.useCallback(async(r,o={})=>{let{action:c,method:h,encType:p,formData:y,body:g}=wS(r,e);if(o.navigate===!1){let x=o.fetcherKey||FS();await i.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:g,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:g,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function QS(i,{relative:e}={}){let{basename:n}=D.useContext(Rs),r=D.useContext(Is);_t(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Dc(i||".",{relative:e})},h=Ui();if(i==null){c.search=h.search;let p=new URLSearchParams(c.search),y=p.getAll("index");if(y.some(x=>x==="")){p.delete("index"),y.filter(E=>E).forEach(E=>p.append("index",E));let x=p.toString();c.search=x?`?${x}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ji([n,c.pathname])),yc(c)}function KS(i,{relative:e}={}){let n=D.useContext(Zx);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cb("useViewTransitionState"),o=Dc(i,{relative:e});if(!n.isTransitioning)return!1;let c=Mi(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=Mi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ph(o.pathname,h)!=null||Ph(o.pathname,c)!=null}var Et=(i=>(i.ADMIN="admin",i.USER="user",i))(Et||{}),Ao=(i=>(i.CONFIRMED="confirmed",i.CANCELED="canceled",i.WAITLIST="waitlist",i))(Ao||{});const ln=i=>{if(!i)return"";if(i.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,n,r]=i.split("-");return`${r}/${n}/${e}`}try{const e=new Date(i);return isNaN(e.getTime())?i:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return i}},yh=i=>{if(!i)return 0;const[e,n]=i.split(":").map(Number);return e*60+n},Dp={useFirebase:!0,firebase:{apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.firebasestorage.app",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML"}},YS=()=>{};var d_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},$S=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],h=i[n++],p=i[n++],y=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],h=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],h=o+1<i.length,p=h?i[o+1]:0,y=o+2<i.length,g=y?i[o+2]:0,x=c>>2,E=(c&3)<<4|p>>4;let T=(p&15)<<2|g>>6,O=g&63;y||(O=64,h||(T=64)),r.push(n[x],n[E],n[T],n[O])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ub(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):$S(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||g==null||E==null)throw new XS;const T=c<<2|p>>4;if(r.push(T),g!==64){const O=p<<4&240|g>>2;if(r.push(O),E!==64){const P=g<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class XS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WS=function(i){const e=ub(i);return hb.encodeByteArray(e,!0)},Uh=function(i){return WS(i).replace(/\./g,"")},db=function(i){try{return hb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=()=>JS().__FIREBASE_DEFAULTS__,eA=()=>{if(typeof process>"u"||typeof d_>"u")return;const i=d_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},tA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&db(i[1]);return e&&JSON.parse(e)},ld=()=>{try{return YS()||ZS()||eA()||tA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},fb=i=>{var e,n;return(n=(e=ld())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},nA=i=>{const e=fb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mb=()=>{var i;return(i=ld())==null?void 0:i.config},pb=i=>{var e;return(e=ld())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Uh(JSON.stringify(n)),Uh(JSON.stringify(h)),""].join(".")}const hc={};function rA(){const i={prod:[],emulator:[]};for(const e of Object.keys(hc))hc[e]?i.emulator.push(e):i.prod.push(e);return i}function aA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let f_=!1;function yb(i,e){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||hc[i]===e||hc[i]||f_)return;hc[i]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=rA().prod.length>0;function h(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,O){T.setAttribute("width","24"),T.setAttribute("id",O),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{f_=!0,h()},T}function x(T,O){T.setAttribute("id",O),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=aA(r),O=n("text"),P=document.getElementById(O)||document.createElement("span"),z=n("learnmore"),U=document.getElementById(z)||document.createElement("a"),$=n("preprendIcon"),ie=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const J=T.element;p(J),x(U,z);const fe=g();y(ie,$),J.append(ie,P,U,fe),document.body.appendChild(J)}c?(P.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function lA(){var e;const i=(e=ld())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function hA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dA(){const i=gn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function fA(){return!lA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mA(){try{return typeof indexedDB=="object"}catch{return!1}}function pA(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gA,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jc.prototype.create)}}class jc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?yA(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new zi(o,p,r)}}function yA(i,e){return i.replace(vA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const vA=/\{\$([^}]+)}/g;function _A(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Sa(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],h=e[o];if(m_(c)&&m_(h)){if(!Sa(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function m_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ac(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function oc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function xA(i,e){const n=new bA(i,e);return n.subscribe.bind(n)}class bA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Lm),o.error===void 0&&(o.error=Lm),o.complete===void 0&&(o.complete=Lm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(i){return i&&i._delegate?i._delegate:i}class Aa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SA(e))try{this.getOrInitializeService({instanceIdentifier:wa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wa){return this.instances.has(e)}getOptions(e=wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wa){return this.component?this.component.multipleInstances?e:wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TA(i){return i===wa?void 0:i}function SA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(He||(He={}));const NA={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},CA=He.INFO,RA={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},IA=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=RA[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=CA,this._logHandler=IA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const DA=(i,e)=>e.some(n=>i instanceof n);let p_,g_;function jA(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OA(){return g_||(g_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vb=new WeakMap,Jm=new WeakMap,_b=new WeakMap,Pm=new WeakMap,Op=new WeakMap;function MA(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n(Rr(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,i)}).catch(()=>{}),Op.set(e,i),e}function VA(i){if(Jm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Jm.set(i,e)}let Zm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Jm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||_b.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function kA(i){Zm=i(Zm)}function LA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Um(this),e,...n);return _b.set(r,e.sort?e.sort():[e]),Rr(r)}:OA().includes(i)?function(...e){return i.apply(Um(this),e),Rr(vb.get(this))}:function(...e){return Rr(i.apply(Um(this),e))}}function PA(i){return typeof i=="function"?LA(i):(i instanceof IDBTransaction&&VA(i),DA(i,jA())?new Proxy(i,Zm):i)}function Rr(i){if(i instanceof IDBRequest)return MA(i);if(Pm.has(i))return Pm.get(i);const e=PA(i);return e!==i&&(Pm.set(i,e),Op.set(e,i)),e}const Um=i=>Op.get(i);function UA(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(i,e),p=Rr(h);return r&&h.addEventListener("upgradeneeded",y=>{r(Rr(h.result),y.oldVersion,y.newVersion,Rr(h.transaction),y)}),n&&h.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const zA=["get","getKey","getAll","getAllKeys","count"],BA=["put","add","delete","clear"],zm=new Map;function y_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(zm.get(e))return zm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=BA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||zA.includes(n)))return;const c=async function(h,...p){const y=this.transaction(h,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&y.done]))[0]};return zm.set(e,c),c}kA(i=>({...i,get:(e,n,r)=>y_(e,n)||i.get(e,n,r),has:(e,n)=>!!y_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ep="@firebase/app",v_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new jp("@firebase/app"),FA="@firebase/app-compat",GA="@firebase/analytics-compat",QA="@firebase/analytics",KA="@firebase/app-check-compat",YA="@firebase/app-check",$A="@firebase/auth",XA="@firebase/auth-compat",WA="@firebase/database",JA="@firebase/data-connect",ZA="@firebase/database-compat",e2="@firebase/functions",t2="@firebase/functions-compat",n2="@firebase/installations",s2="@firebase/installations-compat",i2="@firebase/messaging",r2="@firebase/messaging-compat",a2="@firebase/performance",o2="@firebase/performance-compat",l2="@firebase/remote-config",c2="@firebase/remote-config-compat",u2="@firebase/storage",h2="@firebase/storage-compat",d2="@firebase/firestore",f2="@firebase/ai",m2="@firebase/firestore-compat",p2="firebase",g2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="[DEFAULT]",y2={[ep]:"fire-core",[FA]:"fire-core-compat",[QA]:"fire-analytics",[GA]:"fire-analytics-compat",[YA]:"fire-app-check",[KA]:"fire-app-check-compat",[$A]:"fire-auth",[XA]:"fire-auth-compat",[WA]:"fire-rtdb",[JA]:"fire-data-connect",[ZA]:"fire-rtdb-compat",[e2]:"fire-fn",[t2]:"fire-fn-compat",[n2]:"fire-iid",[s2]:"fire-iid-compat",[i2]:"fire-fcm",[r2]:"fire-fcm-compat",[a2]:"fire-perf",[o2]:"fire-perf-compat",[l2]:"fire-rc",[c2]:"fire-rc-compat",[u2]:"fire-gcs",[h2]:"fire-gcs-compat",[d2]:"fire-fst",[m2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,v2=new Map,np=new Map;function __(i,e){try{i.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Uo(i){const e=i.name;if(np.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;np.set(e,i);for(const n of zh.values())__(n,i);for(const n of v2.values())__(n,i);return!0}function Mp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function cs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new jc("app","Firebase",_2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=g2;function xb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:tp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Ir.create("bad-app-name",{appName:String(o)});if(n||(n=mb()),!n)throw Ir.create("no-options");const c=zh.get(o);if(c){if(Sa(n,c.options)&&Sa(r,c.config))return c;throw Ir.create("duplicate-app",{appName:o})}const h=new AA(o);for(const y of np.values())h.addComponent(y);const p=new x2(n,r,h);return zh.set(o,p),p}function bb(i=tp){const e=zh.get(i);if(!e&&i===tp&&mb())return xb();if(!e)throw Ir.create("no-app",{appName:i});return e}function Dr(i,e,n){let r=y2[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(h.join(" "));return}Uo(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebase-heartbeat-database",E2=1,vc="firebase-heartbeat-store";let Bm=null;function Eb(){return Bm||(Bm=UA(b2,E2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(vc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ir.create("idb-open",{originalErrorMessage:i.message})})),Bm}async function w2(i){try{const n=(await Eb()).transaction(vc),r=await n.objectStore(vc).get(wb(i));return await n.done,r}catch(e){if(e instanceof zi)Vi.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function x_(i,e){try{const r=(await Eb()).transaction(vc,"readwrite");await r.objectStore(vc).put(e,wb(i)),await r.done}catch(n){if(n instanceof zi)Vi.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(r.message)}}}function wb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=1024,S2=30;class A2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=b_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>S2){const h=R2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b_(),{heartbeatsToSend:r,unsentEntries:o}=N2(this._heartbeatsCache.heartbeats),c=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Vi.warn(n),""}}}function b_(){return new Date().toISOString().substring(0,10)}function N2(i,e=T2){const n=[];let r=i.slice();for(const o of i){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),E_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),E_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class C2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mA()?pA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function E_(i){return Uh(JSON.stringify({version:2,heartbeats:i})).length}function R2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(i){Uo(new Aa("platform-logger",e=>new qA(e),"PRIVATE")),Uo(new Aa("heartbeat",e=>new A2(e),"PRIVATE")),Dr(ep,v_,i),Dr(ep,v_,"esm2020"),Dr("fire-js","")}I2("");var D2="firebase",j2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(D2,j2,"app");function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O2=Tb,Sb=new jc("auth","Firebase",Tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new jp("@firebase/auth");function M2(i,...e){Bh.logLevel<=He.WARN&&Bh.warn(`Auth (${Wo}): ${i}`,...e)}function Ch(i,...e){Bh.logLevel<=He.ERROR&&Bh.error(`Auth (${Wo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(i,...e){throw kp(i,...e)}function ei(i,...e){return kp(i,...e)}function Vp(i,e,n){const r={...O2(),[e]:n};return new jc("auth","Firebase",r).create(e,{appName:i.name})}function Oi(i){return Vp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V2(i,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hs(i,"argument-error"),Vp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Sb.create(i,...e)}function Ie(i,e,...n){if(!i)throw kp(e,...n)}function Ii(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ch(e),new Error(e)}function ki(i,e){i||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function k2(){return w_()==="http:"||w_()==="https:"}function w_(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k2()||uA()||"connection"in navigator)?navigator.onLine:!0}function P2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=oA()||hA()}get(){return L2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(i,e){ki(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B2=new Mc(3e4,6e4);function Da(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function qr(i,e,n,r,o={}){return Nb(i,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=Oc({key:i.config.apiKey,...h}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:y,...c};return cA()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Xo(i.emulatorConfig.host)&&(g.credentials="include"),Ab.fetch()(await Cb(i,i.config.apiHost,n,p),g)})}async function Nb(i,e,n){i._canInitEmulator=!1;const r={...U2,...e};try{const o=new H2(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw vh(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(i,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw vh(i,"email-already-in-use",h);if(y==="USER_DISABLED")throw vh(i,"user-disabled",h);const x=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Vp(i,x,g);hs(i,x)}}catch(o){if(o instanceof zi)throw o;hs(i,"network-request-failed",{message:String(o)})}}async function cd(i,e,n,r,o={}){const c=await qr(i,e,n,r,o);return"mfaPendingCredential"in c&&hs(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Cb(i,e,n,r){const o=`${e}${n}?${r}`,c=i,h=c.config.emulator?Lp(i.config,o):`${i.config.apiScheme}://${o}`;return z2.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function q2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),B2.get())})}}function vh(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ei(i,e,r);return o.customData._tokenResponse=n,o}function T_(i){return i!==void 0&&i.enterprise!==void 0}class F2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return q2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function G2(i,e){return qr(i,"GET","/v2/recaptchaConfig",Da(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(i,e){return qr(i,"POST","/v1/accounts:delete",e)}async function qh(i,e){return qr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K2(i,e=!1){const n=Ct(i),r=await n.getIdToken(e),o=Pp(r);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:dc(qm(o.auth_time)),issuedAtTime:dc(qm(o.iat)),expirationTime:dc(qm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function qm(i){return Number(i)*1e3}function Pp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const o=db(n);return o?JSON.parse(o):(Ch("Failed to decode base64 JWT payload"),null)}catch(o){return Ch("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function S_(i){const e=Pp(i);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zi&&Y2(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function Y2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(i){var E;const e=i.auth,n=await i.getIdToken(),r=await _c(i,qh(e,{idToken:n}));Ie(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=(E=o.providerUserInfo)!=null&&E.length?Rb(o.providerUserInfo):[],h=W2(i.providerData,c),p=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!(h!=null&&h.length),g=p?y:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new ip(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,x)}async function X2(i){const e=Ct(i);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W2(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Rb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(i,e){const n=await Nb(i,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,h=await Cb(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return i.emulatorConfig&&Xo(i.emulatorConfig.host)&&(y.credentials="include"),Ab.fetch()(h,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z2(i,e){return qr(i,"POST","/v2/accounts:revokeToken",Da(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await J2(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new Oo;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ie(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(i,e){Ie(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ns{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new $2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ip(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await _c(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K2(this,e)}reload(){return X2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ns({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cs(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await _c(this,Q2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:O,providerData:P,stsTokenManager:z}=n;Ie(E&&z,e,"internal-error");const U=Oo.fromJSON(this.name,z);Ie(typeof E=="string",e,"internal-error"),Er(r,e.name),Er(o,e.name),Ie(typeof T=="boolean",e,"internal-error"),Ie(typeof O=="boolean",e,"internal-error"),Er(c,e.name),Er(h,e.name),Er(p,e.name),Er(y,e.name),Er(g,e.name),Er(x,e.name);const $=new Ns({uid:E,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:O,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:U,createdAt:g,lastLoginAt:x});return P&&Array.isArray(P)&&($.providerData=P.map(ie=>({...ie}))),y&&($._redirectEventId=y),$}static async _fromIdTokenResponse(e,n,r=!1){const o=new Oo;o.updateFromServerResponse(n);const c=new Ns({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Hh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Rb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new Oo;p.updateFromIdToken(r);const y=new Ns({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ip(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function Di(i){ki(i instanceof Function,"Expected a class definition");let e=A_.get(i);return e?(ki(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,A_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ib.type="NONE";const N_=Ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(i,e,n){return`firebase:${i}:${e}:${n}`}class Mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Rh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Rh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qh(this.auth,{idToken:e}).catch(()=>{});return n?Ns._fromGetAccountInfoResponse(this.auth,n,e):null}return Ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mo(Di(N_),e,r);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||Di(N_);const h=Rh(r,e.config.apiKey,e.name);let p=null;for(const g of n)try{const x=await g._get(h);if(x){let E;if(typeof x=="string"){const T=await qh(e,{idToken:x}).catch(()=>{});if(!T)break;E=await Ns._fromGetAccountInfoResponse(e,T,x)}else E=Ns._fromJSON(e,x);g!==c&&(p=E),c=g;break}}catch{}const y=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Mo(c,e,r):(c=y[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(h)}catch{}})),new Mo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Db(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Lb(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Ob(e))&&!e.includes("edge/"))return"Chrome";if(Vb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Db(i=gn()){return/firefox\//i.test(i)}function jb(i=gn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ob(i=gn()){return/crios\//i.test(i)}function Mb(i=gn()){return/iemobile/i.test(i)}function Vb(i=gn()){return/android/i.test(i)}function kb(i=gn()){return/blackberry/i.test(i)}function Lb(i=gn()){return/webos/i.test(i)}function Up(i=gn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function eN(i=gn()){var e;return Up(i)&&!!((e=window.navigator)!=null&&e.standalone)}function tN(){return dA()&&document.documentMode===10}function Pb(i=gn()){return Up(i)||Vb(i)||Lb(i)||kb(i)||/windows phone/i.test(i)||Mb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(i,e=[]){let n;switch(i){case"Browser":n=C_(gn());break;case"Worker":n=`${C_(gn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,p)=>{try{const y=e(c);h(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(i,e={}){return qr(i,"GET","/v2/passwordPolicy",Da(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=6;class rN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new nN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qh(this,{idToken:e}),r=await Ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(cs(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(c=this.redirectUser)==null?void 0:c._redirectEventId,p=r==null?void 0:r._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===p)&&(y!=null&&y.user)&&(r=y.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cs(this.app))return Promise.reject(Oi(this));const n=e?Ct(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cs(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cs(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sN(this),n=new rN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Z2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{h=!0,y()}}else{const y=e.addObserver(n);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(cs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&M2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hr(i){return Ct(i)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=xA(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oN(i){ud=i}function zb(i){return ud.loadJS(i)}function lN(){return ud.recaptchaEnterpriseScript}function cN(){return ud.gapiScript}function uN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class hN{constructor(){this.enterprise=new dN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fN="recaptcha-enterprise",Bb="NO_RECAPTCHA";class mN{constructor(e){this.type=fN,this.auth=Hr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{G2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new F2(y);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,h(g.siteKey)}}).catch(y=>{p(y)})})}function o(c,h,p){const y=window.grecaptcha;T_(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(g=>{h(g)}).catch(()=>{h(Bb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hN().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(p=>{if(!n&&T_(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let y=lN();y.length!==0&&(y+=p),zb(y).then(()=>{o(p,c,h)}).catch(g=>{h(g)})}}).catch(p=>{h(p)})})}}async function I_(i,e,n,r=!1,o=!1){const c=new mN(i);let h;if(o)h=Bb;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function D_(i,e,n,r,o){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await I_(i,e,n,n==="getOobCode");return r(i,h)}else return r(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await I_(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i,e){const n=Mp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Sa(c,e??{}))return o;hs(o,"already-initialized")}return n.initialize({options:e})}function gN(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Di);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yN(i,e,n){const r=Hr(i);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=qb(e),{host:h,port:p}=vN(e),y=p===null?"":`:${p}`,g={url:`${c}//${h}${y}/`},x=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Sa(g,r.config.emulator)&&Sa(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,Xo(h)?(gb(`${c}//${h}${y}`),yb("Auth",!0)):_N()}function qb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function vN(i){const e=qb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:j_(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:j_(h)}}}function j_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function _N(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function xN(i,e){return qr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(i,e){return cd(i,"POST","/v1/accounts:signInWithPassword",Da(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(i,e){return cd(i,"POST","/v1/accounts:signInWithEmailLink",Da(i,e))}async function wN(i,e){return cd(i,"POST","/v1/accounts:signInWithEmailLink",Da(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends zp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new xc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return D_(e,n,"signInWithPassword",bN);case"emailLink":return EN(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return D_(e,r,"signUpPassword",xN);case"emailLink":return wN(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(i,e){return cd(i,"POST","/v1/accounts:signInWithIdp",Da(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="http://localhost";class Na extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new Na(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Vo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vo(e,n)}buildRequest(){const e={requestUri:TN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AN(i){const e=ac(oc(i)).link,n=e?ac(oc(e)).deep_link_id:null,r=ac(oc(i)).deep_link_id;return(r?ac(oc(r)).link:null)||r||n||e||i}class Bp{constructor(e){const n=ac(oc(e)),r=n.apiKey??null,o=n.oobCode??null,c=SN(n.mode??null);Ie(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=AN(e);try{return new Bp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(e,n){return xc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bp.parseLink(n);return Ie(r,"argument-error"),xc._fromEmailAndCode(e,r.code,r.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends qp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Vc{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Na._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Vc{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Vc{constructor(){super("twitter.com")}static credential(e,n){return Na._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Ns._fromIdTokenResponse(e,r,o),h=O_(r);return new zo({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=O_(r);return new zo({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function O_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends zi{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Fh(e,n,r,o)}}function Hb(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(i,c,e,r):c})}async function NN(i,e,n=!1){const r=await _c(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return zo._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(i,e,n=!1){const{auth:r}=i;if(cs(r.app))return Promise.reject(Oi(r));const o="reauthenticate";try{const c=await _c(i,Hb(r,o,e,i),n);Ie(c.idToken,r,"internal-error");const h=Pp(c.idToken);Ie(h,r,"internal-error");const{sub:p}=h;return Ie(i.uid===p,r,"user-mismatch"),zo._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(i,e,n=!1){if(cs(i.app))return Promise.reject(Oi(i));const r="signIn",o=await Hb(i,r,e),c=await zo._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function RN(i,e){return Fb(Hr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(i){const e=Hr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function DN(i,e,n){return cs(i.app)?Promise.reject(Oi(i)):RN(Ct(i),Jo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IN(i),r})}function jN(i,e,n,r){return Ct(i).onIdTokenChanged(e,n,r)}function ON(i,e,n){return Ct(i).beforeAuthStateChanged(e,n)}function MN(i,e,n,r){return Ct(i).onAuthStateChanged(e,n,r)}function VN(i){return Ct(i).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1e3,LN=10;class Qb extends Gb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,y)=>{this.notifyListeners(h,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);tN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LN):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qb.type="LOCAL";const PN=Qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Gb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kb.type="SESSION";const Yb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new hd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async g=>g(n.origin,c)),y=await UN(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,y)=>{const g=Hp("",20);o.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(x),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return window}function BN(i){ti().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}async function qN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HN(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function FN(){return $b()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="firebaseLocalStorageDb",GN=1,Qh="firebaseLocalStorage",Wb="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dd(i,e){return i.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function QN(){const i=indexedDB.deleteDatabase(Xb);return new kc(i).toPromise()}function rp(){const i=indexedDB.open(Xb,GN);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Qh,{keyPath:Wb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Qh)?e(r):(r.close(),await QN(),e(await rp()))})})}async function M_(i,e,n){const r=dd(i,!0).put({[Wb]:e,value:n});return new kc(r).toPromise()}async function KN(i,e){const n=dd(i,!1).get(e),r=await new kc(n).toPromise();return r===void 0?null:r.value}function V_(i,e){const n=dd(i,!0).delete(e);return new kc(n).toPromise()}const YN=800,$N=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$N)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hd._getInstance(FN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await qN(),!this.activeServiceWorker)return;this.sender=new zN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rp();return await M_(e,Gh,"1"),await V_(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>M_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>V_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=dd(o,!1).getAll();return new kc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const XN=Jb;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(i,e){return e?Di(e):(Ie(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WN(i){return Fb(i.auth,new Fp(i),i.bypassAuthState)}function JN(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),CN(n,new Fp(i),i.bypassAuthState)}async function ZN(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),NN(n,new Fp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WN;case"linkViaPopup":case"linkViaRedirect":return ZN;case"reauthViaPopup":case"reauthViaRedirect":return JN;default:hs(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new Mc(2e3,1e4);class Do extends eE{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eC.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="pendingRedirect",Ih=new Map;class nC extends eE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ih.get(this.auth._key());if(!e){try{const r=await sC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ih.set(this.auth._key(),e)}return this.bypassAuthState||Ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sC(i,e){const n=nE(e),r=tE(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}async function iC(i,e){return tE(i)._set(nE(e),"true")}function rC(i,e){Ih.set(i._key(),e)}function tE(i){return Di(i._redirectPersistence)}function nE(i){return Rh(tC,i.config.apiKey,i.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(i,e,n){return oC(i,e,n)}async function oC(i,e,n){if(cs(i.app))return Promise.reject(Oi(i));const r=Hr(i);V2(i,e,qp),await r._initializationPromise;const o=Zb(r,n);return await iC(o,r),o._openRedirect(r,e,"signInViaRedirect")}async function lC(i,e){return await Hr(i)._initializationPromise,sE(i,e,!1)}async function sE(i,e,n=!1){if(cs(i.app))return Promise.reject(Oi(i));const r=Hr(i),o=Zb(r,e),h=await new nC(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=600*1e3;class uC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iE(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ei(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cC&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function iE({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(i,e={}){return qr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mC=/^https?/;async function pC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await dC(i);for(const n of e)try{if(gC(n))return}catch{}hs(i,"unauthorized-domain")}function gC(i){const e=sp(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!mC.test(n))return!1;if(fC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Mc(3e4,6e4);function L_(){const i=ti().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function vC(i){return new Promise((e,n)=>{var o,c,h;function r(){L_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L_(),n(ei(i,"network-request-failed"))},timeout:yC.get()})}if((c=(o=ti().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((h=ti().gapi)!=null&&h.load)r();else{const p=uN("iframefcb");return ti()[p]=()=>{gapi.load?r():n(ei(i,"network-request-failed"))},zb(`${cN()}?onload=${p}`).catch(y=>n(y))}}).catch(e=>{throw Dh=null,e})}let Dh=null;function _C(i){return Dh=Dh||vC(i),Dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Mc(5e3,15e3),bC="__/auth/iframe",EC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SC(i){const e=i.config;Ie(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Lp(e,EC):`https://${i.config.authDomain}/${bC}`,r={apiKey:e.apiKey,appName:i.name,v:Wo},o=TC.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Oc(r).slice(1)}`}async function AC(i){const e=await _C(i),n=ti().gapi;return Ie(n,i,"internal-error"),e.open({where:document.body,url:SC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=ei(i,"network-request-failed"),p=ti().setTimeout(()=>{c(h)},xC.get());function y(){ti().clearTimeout(p),o(r)}r.ping(y).then(y,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CC=500,RC=600,IC="_blank",DC="http://localhost";class P_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jC(i,e,n,r=CC,o=RC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...NC,width:r.toString(),height:o.toString(),top:c,left:h},g=gn().toLowerCase();n&&(p=Ob(g)?IC:n),Db(g)&&(e=e||DC,y.scrollbars="yes");const x=Object.entries(y).reduce((T,[O,P])=>`${T}${O}=${P},`,"");if(eN(g)&&p!=="_self")return OC(e||"",p),new P_(null);const E=window.open(e||"",p,x);Ie(E,i,"popup-blocked");try{E.focus()}catch{}return new P_(E)}function OC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="__/auth/handler",VC="emulator/auth/handler",kC=encodeURIComponent("fac");async function U_(i,e,n,r,o,c){Ie(i.config.authDomain,i,"auth-domain-config-required"),Ie(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Wo,eventId:o};if(e instanceof qp){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",_A(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,E]of Object.entries({}))h[x]=E}if(e instanceof Vc){const x=e.getScopes().filter(E=>E!=="");x.length>0&&(h.scopes=x.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const y=await i._getAppCheckToken(),g=y?`#${kC}=${encodeURIComponent(y)}`:"";return`${LC(i)}?${Oc(p).slice(1)}${g}`}function LC({config:i}){return i.emulator?Lp(i,VC):`https://${i.authDomain}/${MC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="webStorageSupport";class PC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yb,this._completeRedirectFn=sE,this._overrideRedirectResult=rC}async _openPopup(e,n,r,o){var h;ki((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const c=await U_(e,n,r,sp(),o);return jC(e,c,Hp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await U_(e,n,r,sp(),o);return BN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ki(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await AC(e),r=new uC(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hm,{type:Hm},o=>{var h;const c=(h=o==null?void 0:o[0])==null?void 0:h[Hm];c!==void 0&&n(!!c),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pb()||jb()||Up()}}const UC=PC;var z_="@firebase/auth",B_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qC(i){Uo(new Aa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ub(i)},g=new aN(r,o,c,y);return gN(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Uo(new Aa("auth-internal",e=>{const n=Hr(e.getProvider("auth").getImmediate());return(r=>new zC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(z_,B_,BC(i)),Dr(z_,B_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=300,FC=pb("authIdTokenMaxAge")||HC;let q_=null;const GC=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FC)return;const o=n==null?void 0:n.token;q_!==o&&(q_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function QC(i=bb()){const e=Mp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=pN(i,{popupRedirectResolver:UC,persistence:[XN,PN,Yb]}),r=pb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=GC(c.toString());ON(n,h,()=>h(n.currentUser)),jN(n,p=>h(p))}}const o=fb("auth");return o&&yN(n,`http://${o}`),n}function KC(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}oN({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=ei("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",KC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qC("Browser");var H_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,rE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function I(){}I.prototype=C.prototype,R.F=C.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(k,V,N){for(var A=Array(arguments.length-2),be=2;be<arguments.length;be++)A[be-2]=arguments[be];return C.prototype[V].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,C,I){I||(I=0);const k=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)k[V]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(V=0;V<16;++V)k[V]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=R.g[0],I=R.g[1],V=R.g[2];let N=R.g[3],A;A=C+(N^I&(V^N))+k[0]+3614090360&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(V^C&(I^V))+k[1]+3905402710&4294967295,N=C+(A<<12&4294967295|A>>>20),A=V+(I^N&(C^I))+k[2]+606105819&4294967295,V=N+(A<<17&4294967295|A>>>15),A=I+(C^V&(N^C))+k[3]+3250441966&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(N^I&(V^N))+k[4]+4118548399&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(V^C&(I^V))+k[5]+1200080426&4294967295,N=C+(A<<12&4294967295|A>>>20),A=V+(I^N&(C^I))+k[6]+2821735955&4294967295,V=N+(A<<17&4294967295|A>>>15),A=I+(C^V&(N^C))+k[7]+4249261313&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(N^I&(V^N))+k[8]+1770035416&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(V^C&(I^V))+k[9]+2336552879&4294967295,N=C+(A<<12&4294967295|A>>>20),A=V+(I^N&(C^I))+k[10]+4294925233&4294967295,V=N+(A<<17&4294967295|A>>>15),A=I+(C^V&(N^C))+k[11]+2304563134&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(N^I&(V^N))+k[12]+1804603682&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(V^C&(I^V))+k[13]+4254626195&4294967295,N=C+(A<<12&4294967295|A>>>20),A=V+(I^N&(C^I))+k[14]+2792965006&4294967295,V=N+(A<<17&4294967295|A>>>15),A=I+(C^V&(N^C))+k[15]+1236535329&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(V^N&(I^V))+k[1]+4129170786&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^V&(C^I))+k[6]+3225465664&4294967295,N=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(N^C))+k[11]+643717713&4294967295,V=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(V^N))+k[0]+3921069994&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(V^N&(I^V))+k[5]+3593408605&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^V&(C^I))+k[10]+38016083&4294967295,N=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(N^C))+k[15]+3634488961&4294967295,V=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(V^N))+k[4]+3889429448&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(V^N&(I^V))+k[9]+568446438&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^V&(C^I))+k[14]+3275163606&4294967295,N=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(N^C))+k[3]+4107603335&4294967295,V=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(V^N))+k[8]+1163531501&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(V^N&(I^V))+k[13]+2850285829&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^V&(C^I))+k[2]+4243563512&4294967295,N=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(N^C))+k[7]+1735328473&4294967295,V=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(V^N))+k[12]+2368359562&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(I^V^N)+k[5]+4294588738&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^V)+k[8]+2272392833&4294967295,N=C+(A<<11&4294967295|A>>>21),A=V+(N^C^I)+k[11]+1839030562&4294967295,V=N+(A<<16&4294967295|A>>>16),A=I+(V^N^C)+k[14]+4259657740&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(I^V^N)+k[1]+2763975236&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^V)+k[4]+1272893353&4294967295,N=C+(A<<11&4294967295|A>>>21),A=V+(N^C^I)+k[7]+4139469664&4294967295,V=N+(A<<16&4294967295|A>>>16),A=I+(V^N^C)+k[10]+3200236656&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(I^V^N)+k[13]+681279174&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^V)+k[0]+3936430074&4294967295,N=C+(A<<11&4294967295|A>>>21),A=V+(N^C^I)+k[3]+3572445317&4294967295,V=N+(A<<16&4294967295|A>>>16),A=I+(V^N^C)+k[6]+76029189&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(I^V^N)+k[9]+3654602809&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^V)+k[12]+3873151461&4294967295,N=C+(A<<11&4294967295|A>>>21),A=V+(N^C^I)+k[15]+530742520&4294967295,V=N+(A<<16&4294967295|A>>>16),A=I+(V^N^C)+k[2]+3299628645&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(V^(I|~N))+k[0]+4096336452&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~V))+k[7]+1126891415&4294967295,N=C+(A<<10&4294967295|A>>>22),A=V+(C^(N|~I))+k[14]+2878612391&4294967295,V=N+(A<<15&4294967295|A>>>17),A=I+(N^(V|~C))+k[5]+4237533241&4294967295,I=V+(A<<21&4294967295|A>>>11),A=C+(V^(I|~N))+k[12]+1700485571&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~V))+k[3]+2399980690&4294967295,N=C+(A<<10&4294967295|A>>>22),A=V+(C^(N|~I))+k[10]+4293915773&4294967295,V=N+(A<<15&4294967295|A>>>17),A=I+(N^(V|~C))+k[1]+2240044497&4294967295,I=V+(A<<21&4294967295|A>>>11),A=C+(V^(I|~N))+k[8]+1873313359&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~V))+k[15]+4264355552&4294967295,N=C+(A<<10&4294967295|A>>>22),A=V+(C^(N|~I))+k[6]+2734768916&4294967295,V=N+(A<<15&4294967295|A>>>17),A=I+(N^(V|~C))+k[13]+1309151649&4294967295,I=V+(A<<21&4294967295|A>>>11),A=C+(V^(I|~N))+k[4]+4149444226&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~V))+k[11]+3174756917&4294967295,N=C+(A<<10&4294967295|A>>>22),A=V+(C^(N|~I))+k[2]+718787259&4294967295,V=N+(A<<15&4294967295|A>>>17),A=I+(N^(V|~C))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+N&4294967295}r.prototype.v=function(R,C){C===void 0&&(C=R.length);const I=C-this.blockSize,k=this.C;let V=this.h,N=0;for(;N<C;){if(V==0)for(;N<=I;)o(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<C;)if(k[V++]=R.charCodeAt(N++),V==this.blockSize){o(this,k),V=0;break}}else for(;N<C;)if(k[V++]=R[N++],V==this.blockSize){o(this,k),V=0;break}}this.h=V,this.o+=C},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;C=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=C&255,C/=256;for(this.v(R),R=Array(16),C=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)R[C++]=this.g[I]>>>k&255;return R};function c(R,C){var I=p;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=C(R)}function h(R,C){this.h=C;const I=[];let k=!0;for(let V=R.length-1;V>=0;V--){const N=R[V]|0;k&&N==C||(I[V]=N,k=!1)}this.g=I}var p={};function y(R){return-128<=R&&R<128?c(R,function(C){return new h([C|0],C<0?-1:0)}):new h([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return U(g(-R));const C=[];let I=1;for(let k=0;R>=I;k++)C[k]=R/I|0,I*=4294967296;return new h(C,0)}function x(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return U(x(R.substring(1),C));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(C,8));let k=E;for(let N=0;N<R.length;N+=8){var V=Math.min(8,R.length-N);const A=parseInt(R.substring(N,N+V),C);V<8?(V=g(Math.pow(C,V)),k=k.j(V).add(g(A))):(k=k.j(I),k=k.add(g(A)))}return k}var E=y(0),T=y(1),O=y(16777216);i=h.prototype,i.m=function(){if(z(this))return-U(this).m();let R=0,C=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);R+=(k>=0?k:4294967296+k)*C,C*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(z(this))return"-"+U(this).toString(R);const C=g(Math.pow(R,6));var I=this;let k="";for(;;){const V=fe(I,C).g;I=$(I,V.j(C));let N=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=V,P(I))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(let C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function z(R){return R.h==-1}i.l=function(R){return R=$(this,R),z(R)?-1:P(R)?0:1};function U(R){const C=R.g.length,I=[];for(let k=0;k<C;k++)I[k]=~R.g[k];return new h(I,~R.h).add(T)}i.abs=function(){return z(this)?U(this):this},i.add=function(R){const C=Math.max(this.g.length,R.g.length),I=[];let k=0;for(let V=0;V<=C;V++){let N=k+(this.i(V)&65535)+(R.i(V)&65535),A=(N>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);k=A>>>16,N&=65535,A&=65535,I[V]=A<<16|N}return new h(I,I[I.length-1]&-2147483648?-1:0)};function $(R,C){return R.add(U(C))}i.j=function(R){if(P(this)||P(R))return E;if(z(this))return z(R)?U(this).j(U(R)):U(U(this).j(R));if(z(R))return U(this.j(U(R)));if(this.l(O)<0&&R.l(O)<0)return g(this.m()*R.m());const C=this.g.length+R.g.length,I=[];for(var k=0;k<2*C;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let V=0;V<R.g.length;V++){const N=this.i(k)>>>16,A=this.i(k)&65535,be=R.i(V)>>>16,Te=R.i(V)&65535;I[2*k+2*V]+=A*Te,ie(I,2*k+2*V),I[2*k+2*V+1]+=N*Te,ie(I,2*k+2*V+1),I[2*k+2*V+1]+=A*be,ie(I,2*k+2*V+1),I[2*k+2*V+2]+=N*be,ie(I,2*k+2*V+2)}for(R=0;R<C;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=C;R<2*C;R++)I[R]=0;return new h(I,0)};function ie(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function J(R,C){this.g=R,this.h=C}function fe(R,C){if(P(C))throw Error("division by zero");if(P(R))return new J(E,E);if(z(R))return C=fe(U(R),C),new J(U(C.g),U(C.h));if(z(C))return C=fe(R,U(C)),new J(U(C.g),C.h);if(R.g.length>30){if(z(R)||z(C))throw Error("slowDivide_ only works with positive integers.");for(var I=T,k=C;k.l(R)<=0;)I=ae(I),k=ae(k);var V=he(I,1),N=he(k,1);for(k=he(k,2),I=he(I,2);!P(k);){var A=N.add(k);A.l(R)<=0&&(V=V.add(I),N=A),k=he(k,1),I=he(I,1)}return C=$(R,V.j(C)),new J(V,C)}for(V=E;R.l(C)>=0;){for(I=Math.max(1,Math.floor(R.m()/C.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=g(I),A=N.j(C);z(A)||A.l(R)>0;)I-=k,N=g(I),A=N.j(C);P(N)&&(N=T),V=V.add(N),R=$(R,A)}return new J(V,R)}i.B=function(R){return fe(this,R).h},i.and=function(R){const C=Math.max(this.g.length,R.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)&R.i(k);return new h(I,this.h&R.h)},i.or=function(R){const C=Math.max(this.g.length,R.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)|R.i(k);return new h(I,this.h|R.h)},i.xor=function(R){const C=Math.max(this.g.length,R.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)^R.i(k);return new h(I,this.h^R.h)};function ae(R){const C=R.g.length+1,I=[];for(let k=0;k<C;k++)I[k]=R.i(k)<<1|R.i(k-1)>>>31;return new h(I,R.h)}function he(R,C){const I=C>>5;C%=32;const k=R.g.length-I,V=[];for(let N=0;N<k;N++)V[N]=C>0?R.i(N+I)>>>C|R.i(N+I+1)<<32-C:R.i(N+I);return new h(V,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rE=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=x,jr=h}).apply(typeof H_<"u"?H_:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aE,lc,oE,jh,ap,lE,cE,uE;(function(){var i,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var v=0;v<u.length;++v){var b=u[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var b=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in b))break e;b=b[q]}u=u[u.length-1],S=b[u],v=v(S),v!=S&&v!=null&&e(b,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var b=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&b.push([S,v[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function y(u,v,b){return u.call.apply(u.bind,arguments)}function g(u,v,b){return g=y,g.apply(null,arguments)}function x(u,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,v){function b(){}b.prototype=v.prototype,u.Z=v.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(S,q,K){for(var ue=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ue[Ve-2]=arguments[Ve];return v.prototype[q].apply(S,ue)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const v=u.length;if(v>0){const b=Array(v);for(let S=0;S<v;S++)b[S]=u[S];return b}return[]}function P(u,v){for(let S=1;S<arguments.length;S++){const q=arguments[S];var b=typeof q;if(b=b!="object"?b:q?Array.isArray(q)?"array":b:"null",b=="array"||b=="object"&&typeof q.length=="number"){b=u.length||0;const K=q.length||0;u.length=b+K;for(let ue=0;ue<K;ue++)u[b+ue]=q[ue]}else u.push(q)}}class z{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(u){h.setTimeout(()=>{throw u},0)}function $(){var u=R;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class ie{constructor(){this.h=this.g=null}add(v,b){const S=J.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var J=new z(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,he=!1,R=new ie,C=()=>{const u=Promise.resolve(void 0);ae=()=>{u.then(I)}};function I(){for(var u;u=$();){try{u.h.call(u.g)}catch(b){U(b)}var v=J;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}he=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};h.addEventListener("test",b,v),h.removeEventListener("test",b,v)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function be(u,v){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}E(be,V),be.prototype.init=function(u,v){const b=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(b=="mouseover"?v=u.fromElement:b=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(u,v,b,S,q){this.listener=u,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=q,this.key=++Q,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,v,b){for(const S in u)v.call(b,u[S],S,u)}function Oe(u,v){for(const b in u)v.call(void 0,u[b],b,u)}function M(u){const v={};for(const b in u)v[b]=u[b];return v}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(u,v){let b,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(b in S)u[b]=S[b];for(let K=0;K<Z.length;K++)b=Z[K],Object.prototype.hasOwnProperty.call(S,b)&&(u[b]=S[b])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,v,b,S,q){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const ue=Ce(u,v,S,q);return ue>-1?(v=u[ue],b||(v.fa=!1)):(v=new le(v,this.src,K,!!S,q),v.fa=b,u.push(v)),v};function Ne(u,v){const b=v.type;if(b in u.g){var S=u.g[b],q=Array.prototype.indexOf.call(S,v,void 0),K;(K=q>=0)&&Array.prototype.splice.call(S,q,1),K&&(_e(v),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Ce(u,v,b,S){for(let q=0;q<u.length;++q){const K=u[q];if(!K.da&&K.listener==v&&K.capture==!!b&&K.ha==S)return q}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),xt={};function rt(u,v,b,S,q){if(Array.isArray(v)){for(let K=0;K<v.length;K++)rt(u,v[K],b,S,q);return null}return b=Qr(b),u&&u[Te]?u.J(v,b,p(S)?!!S.capture:!1,q):$n(u,v,b,!1,S,q)}function $n(u,v,b,S,q,K){if(!v)throw Error("Invalid event type");const ue=p(q)?!!q.capture:!!q;let Ve=On(u);if(Ve||(u[Le]=Ve=new de(u)),b=Ve.add(v,b,S,ue,K),b.proxy)return b;if(S=jn(),b.proxy=S,S.src=u,S.listener=b,u.addEventListener)N||(q=ue),q===void 0&&(q=!1),u.addEventListener(v.toString(),S,q);else if(u.attachEvent)u.attachEvent($e(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function jn(){function u(b){return v.call(u.src,u.listener,b)}const v=yn;return u}function ds(u,v,b,S,q){if(Array.isArray(v))for(var K=0;K<v.length;K++)ds(u,v[K],b,S,q);else S=p(S)?!!S.capture:!!S,b=Qr(b),u&&u[Te]?(u=u.i,K=String(v).toString(),K in u.g&&(v=u.g[K],b=Ce(v,b,S,q),b>-1&&(_e(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete u.g[K],u.h--)))):u&&(u=On(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ce(v,b,S,q)),(b=u>-1?v[u]:null)&&re(b))}function re(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[Te])Ne(v.i,u);else{var b=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(b,S,u.capture):v.detachEvent?v.detachEvent($e(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=On(v))?(Ne(b,u),b.h==0&&(b.src=null,v[Le]=null)):_e(u)}}}function $e(u){return u in xt?xt[u]:xt[u]="on"+u}function yn(u,v){if(u.da)u=!0;else{v=new be(v,this);const b=u.listener,S=u.ha||u.src;u.fa&&re(u),u=b.call(S,v)}return u}function On(u){return u=u[Le],u instanceof de?u:null}var oi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qr(u){return typeof u=="function"?u:(u[oi]||(u[oi]=function(v){return u.handleEvent(v)}),u[oi])}function Tt(){k.call(this),this.i=new de(this),this.M=this,this.G=null}E(Tt,k),Tt.prototype[Te]=!0,Tt.prototype.removeEventListener=function(u,v,b,S){ds(this,u,v,b,S)};function Rt(u,v){var b,S=u.G;if(S)for(b=[];S;S=S.G)b.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new V(v,u);else if(v instanceof V)v.target=v.target||u;else{var q=v;v=new V(S,u),oe(v,q)}q=!0;let K,ue;if(b)for(ue=b.length-1;ue>=0;ue--)K=v.g=b[ue],q=Ds(K,S,!0,v)&&q;if(K=v.g=u,q=Ds(K,S,!0,v)&&q,q=Ds(K,S,!1,v)&&q,b)for(ue=0;ue<b.length;ue++)K=v.g=b[ue],q=Ds(K,S,!1,v)&&q}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const b=u.g[v];for(let S=0;S<b.length;S++)_e(b[S]);delete u.g[v],u.h--}}this.G=null},Tt.prototype.J=function(u,v,b,S){return this.i.add(String(u),v,!1,b,S)},Tt.prototype.K=function(u,v,b,S){return this.i.add(String(u),v,!0,b,S)};function Ds(u,v,b,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let q=!0;for(let K=0;K<v.length;++K){const ue=v[K];if(ue&&!ue.da&&ue.capture==b){const Ve=ue.listener,It=ue.ha||ue.src;ue.fa&&Ne(u.i,ue),q=Ve.call(It,S)!==!1&&q}}return q&&!S.defaultPrevented}function sl(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(u,v||0)}function La(u){u.g=sl(()=>{u.g=null,u.i&&(u.i=!1,La(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class tn extends k{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:La(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(u){k.call(this),this.h=u,this.g={}}E(li,k);var Kr=[];function Fi(u){ge(u.g,function(v,b){this.g.hasOwnProperty(b)&&re(v)},u),u.g={}}li.prototype.N=function(){li.Z.N.call(this),Fi(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=h.JSON.stringify,Pa=h.JSON.parse,te=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ye(){}function Je(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){V.call(this,"d")}E(bt,V);function vn(){V.call(this,"c")}E(vn,V);var gt={},Yr=null;function ms(){return Yr=Yr||new Tt}gt.Ia="serverreachability";function En(u){V.call(this,gt.Ia,u)}E(En,V);function js(u){const v=ms();Rt(v,new En(v))}gt.STAT_EVENT="statevent";function $r(u,v){V.call(this,gt.STAT_EVENT,u),this.stat=v}E($r,V);function Mt(u){const v=ms();Rt(v,new $r(v,u))}gt.Ja="timingevent";function Os(u,v){V.call(this,gt.Ja,u),this.size=v}E(Os,V);function Ms(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},v)}function ps(){this.g=!0}ps.prototype.ua=function(){this.g=!1};function jd(u,v,b,S,q,K){u.info(function(){if(u.g)if(K){var ue="",Ve=K.split("&");for(let Ze=0;Ze<Ve.length;Ze++){var It=Ve[Ze].split("=");if(It.length>1){const yt=It[0];It=It[1];const Zn=yt.split("_");ue=Zn.length>=2&&Zn[1]=="type"?ue+(yt+"="+It+"&"):ue+(yt+"=redacted&")}}}else ue=null;else ue=K;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+b+`
`+ue})}function Kc(u,v,b,S,q,K,ue){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+b+`
`+K+" "+ue})}function Vs(u,v,b,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Od(u,b)+(S?" "+S:"")})}function Xr(u,v){u.info(function(){return"TIMEOUT: "+v})}ps.prototype.info=function(){};function Od(u,v){if(!u.g)return v;if(!v)return null;try{const K=JSON.parse(v);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var b=K[u];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ue=1;ue<S.length;ue++)S[ue]=""}}}}return fs(K)}catch{return v}}var Wr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},il={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rl;function Jr(){}E(Jr,ye),Jr.prototype.g=function(){return new XMLHttpRequest},rl=new Jr;function ci(u){return encodeURIComponent(String(u))}function Yc(u){var v=1;u=u.split(":");const b=[];for(;v>0&&u.length;)b.push(u.shift()),v--;return u.length&&b.push(u.join(":")),b}function gs(u,v,b,S){this.j=u,this.i=v,this.l=b,this.S=S||1,this.V=new li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ys}function ys(){this.i=null,this.g="",this.h=!1}var Vt={},$t={};function ks(u,v,b){u.M=1,u.A=Zr(Lt(v)),u.u=b,u.R=!0,Ua(u,null)}function Ua(u,v){u.F=Date.now(),Ls(u),u.B=Lt(u.A);var b=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ha(b.i,"t",S),u.C=0,b=u.j.L,u.h=new ys,u.g=cu(u.j,b?v:null,!u.u),u.P>0&&(u.O=new tn(g(u.Y,u,u.g),u.P)),v=u.V,b=u.g,S=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Kr[0]=q.toString()),q=Kr);for(let K=0;K<q.length;K++){const ue=rt(b,q[K],S||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),js(),jd(u.i,u.v,u.B,u.l,u.S,u.u)}gs.prototype.ba=function(u){u=u.target;const v=this.O;v&&xs(u)==3?v.j():this.Y(u)},gs.prototype.Y=function(u){try{if(u==this.g)e:{const Ve=xs(this.g),It=this.g.ya(),Ze=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Ve!=4||It==7||(It==8||Ze<=0?js(3):js(2)),Ps(this);var v=this.g.ca();this.X=v;var b=Md(this);if(this.o=v==200,Kc(this.i,this.v,this.B,this.l,this.S,Ve,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var K=S;break t}}K=null}if(u=K)Vs(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Us(this,u);else{this.o=!1,this.m=3,Mt(12),Mn(this),Xn(this);break e}}if(this.R){u=!0;let yt;for(;!this.K&&this.C<b.length;)if(yt=Xc(this,b),yt==$t){Ve==4&&(this.m=4,Mt(14),u=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Vt){this.m=4,Mt(15),Vs(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Vs(this.i,this.l,yt,null),Us(this,yt);if($c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||b.length!=0||this.h.h||(this.m=1,Mt(16),u=!1),this.o=this.o&&u,!u)Vs(this.i,this.l,b,"[Invalid Chunked Response]"),Mn(this),Xn(this);else if(b.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),xl(ue),ue.P=!0,Mt(11))}}else Vs(this.i,this.l,b,null),Us(this,b);Ve==4&&Mn(this),this.o&&!this.K&&(Ve==4?ru(this.j,this):(this.o=!1,Ls(this)))}else hi(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),Mn(this),Xn(this)}}}catch{}finally{}};function Md(u){if(!$c(u))return u.g.la();const v=nn(u.g);if(v==="")return"";let b="";const S=v.length,q=xs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Mn(u),Xn(u),"";u.h.i=new h.TextDecoder}for(let K=0;K<S;K++)u.h.h=!0,b+=u.h.i.decode(v[K],{stream:!(q&&K==S-1)});return v.length=0,u.h.g+=b,u.C=0,u.h.g}function $c(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Xc(u,v){var b=u.C,S=v.indexOf(`
`,b);return S==-1?$t:(b=Number(v.substring(b,S)),isNaN(b)?Vt:(S+=1,S+b>v.length?$t:(v=v.slice(S,S+b),u.C=S+b,v)))}gs.prototype.cancel=function(){this.K=!0,Mn(this)};function Ls(u){u.T=Date.now()+u.H,za(u,u.H)}function za(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ms(g(u.aa,u),v)}function Ps(u){u.D&&(h.clearTimeout(u.D),u.D=null)}gs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Xr(this.i,this.B),this.M!=2&&(js(),Mt(17)),Mn(this),this.m=2,Xn(this)):za(this,this.T-u)};function Xn(u){u.j.I==0||u.K||ru(u.j,u)}function Mn(u){Ps(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Fi(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function Us(u,v){try{var b=u.j;if(b.I!=0&&(b.g==u||Bs(b.h,u))){if(!u.L&&Bs(b.h,u)&&b.I==3){try{var S=b.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Ya(b),Ji(b);else break e;aa(b),Mt(18)}}else b.xa=q[1],0<b.xa-b.K&&q[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ms(g(b.Va,b),6e3));zs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ks(b,11)}else if((u.L||b.g==u)&&Ya(b),!A(v))for(q=b.Ba.g.parse(v),v=0;v<q.length;v++){let Ze=q[v];const yt=Ze[0];if(!(yt<=b.K))if(b.K=yt,Ze=Ze[1],b.I==2)if(Ze[0]=="c"){b.M=Ze[1],b.ba=Ze[2];const Zn=Ze[3];Zn!=null&&(b.ka=Zn,b.j.info("VER="+b.ka));const Ys=Ze[4];Ys!=null&&(b.za=Ys,b.j.info("SVER="+b.za));const bs=Ze[5];bs!=null&&typeof bs=="number"&&bs>0&&(S=1.5*bs,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Es=u.g;if(Es){const oa=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var K=S.h;K.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ll(K,K.h),K.h=null))}if(S.G){const $a=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;$a&&(S.wa=$a,tt(S.J,S.G,$a))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ue=u;if(S.na=lu(S,S.L?S.ba:null,S.W),ue.L){cl(S.h,ue);var Ve=ue,It=S.O;It&&(Ve.H=It),Ve.D&&(Ps(Ve),Ls(Ve)),S.g=ue}else su(S);b.i.length>0&&Qs(b)}else Ze[0]!="stop"&&Ze[0]!="close"||Ks(b,7);else b.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Ks(b,7):vl(b):Ze[0]!="noop"&&b.l&&b.l.qa(Ze),b.A=0)}}js(4)}catch{}}var kt=class{constructor(u,v){this.g=u,this.map=v}};function al(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zs(u){return u.h?1:u.g?u.g.size:0}function Bs(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function ll(u,v){u.g?u.g.add(v):u.h=v}function cl(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}al.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ul(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const b of u.g.values())v=v.concat(b.G);return v}return O(u.i)}var Wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(u,v){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const S=u[b].indexOf("=");let q,K=null;S>=0?(q=u[b].substring(0,S),K=u[b].substring(S+1)):q=u[b],v(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof Vn?(this.l=u.l,Xt(this,u.j),this.o=u.o,this.g=u.g,Gi(this,u.u),this.h=u.h,hl(this,tu(u.i)),this.m=u.m):u&&(v=String(u).match(Wc))?(this.l=!1,Xt(this,v[1]||"",!0),this.o=qs(v[2]||""),this.g=qs(v[3]||"",!0),Gi(this,v[4]),this.h=qs(v[5]||"",!0),hl(this,v[6]||"",!0),this.m=qs(v[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}Vn.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(ea(v,qa,!0),":");var b=this.g;return(b||v=="file")&&(u.push("//"),(v=this.o)&&u.push(ea(v,qa,!0),"@"),u.push(ci(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(ea(b,b.charAt(0)=="/"?dl:Jc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",ea(b,Zc)),u.join("")},Vn.prototype.resolve=function(u){const v=Lt(this);let b=!!u.j;b?Xt(v,u.j):b=!!u.o,b?v.o=u.o:b=!!u.g,b?v.g=u.g:b=u.u!=null;var S=u.h;if(b)Gi(v,u.u);else if(b=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=v.h.lastIndexOf("/");q!=-1&&(S=v.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let ue=0;ue<q.length;){const Ve=q[ue++];Ve=="."?S&&ue==q.length&&K.push(""):Ve==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&ue==q.length&&K.push("")):(K.push(Ve),S=!0)}S=K.join("/")}else S=q}return b?v.h=S:b=u.i.toString()!=="",b?hl(v,tu(u.i)):b=!!u.m,b&&(v.m=u.m),v};function Lt(u){return new Vn(u)}function Xt(u,v,b){u.j=b?qs(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Gi(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function hl(u,v,b){v instanceof Ki?(u.i=v,Fa(u.i,u.l)):(b||(v=ea(v,Qi)),u.i=new Ki(v,u.l))}function tt(u,v,b){u.i.set(v,b)}function Zr(u){return tt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function qs(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ea(u,v,b){return typeof u=="string"?(u=encodeURI(u).replace(v,wn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qa=/[#\/\?@]/g,Jc=/[#\?:]/g,dl=/[#\?]/g,Qi=/[#\?@]/g,Zc=/#/g;function Ki(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ba(u.i,function(v,b){u.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}i=Ki.prototype,i.add=function(u,v){Tn(this),this.i=null,u=Yi(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(v),this.h+=1,this};function eu(u,v){Tn(u),v=Yi(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function fl(u,v){return Tn(u),v=Yi(u,v),u.g.has(v)}i.forEach=function(u,v){Tn(this),this.g.forEach(function(b,S){b.forEach(function(q){u.call(v,q,S,this)},this)},this)};function ml(u,v){Tn(u);let b=[];if(typeof v=="string")fl(u,v)&&(b=b.concat(u.g.get(Yi(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)b=b.concat(u[v]);return b}i.set=function(u,v){return Tn(this),this.i=null,u=Yi(this,u),fl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=ml(this,u),u.length>0?String(u[0]):v):v};function Ha(u,v,b){eu(u,v),b.length>0&&(u.i=null,u.g.set(Yi(u,v),O(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var b=v[S];const q=ci(b);b=ml(this,b);for(let K=0;K<b.length;K++){let ue=q;b[K]!==""&&(ue+="="+ci(b[K])),u.push(ue)}}return this.i=u.join("&")};function tu(u){const v=new Ki;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function Yi(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Fa(u,v){v&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(b,S){const q=S.toLowerCase();S!=q&&(eu(this,S),Ha(this,q,b))},u)),u.j=v}function vs(u,v){const b=new ps;if(h.Image){const S=new Image;S.onload=x(Wn,b,"TestLoadImage: loaded",!0,v,S),S.onerror=x(Wn,b,"TestLoadImage: error",!1,v,S),S.onabort=x(Wn,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=x(Wn,b,"TestLoadImage: timeout",!1,v,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function pl(u,v){const b=new ps,S=new AbortController,q=setTimeout(()=>{S.abort(),Wn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(q),K.ok?Wn(b,"TestPingServer: ok",!0,v):Wn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Wn(b,"TestPingServer: error",!1,v)})}function Wn(u,v,b,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(b)}catch{}}function $i(){this.g=new te}function Hs(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Hs,ye),Hs.prototype.g=function(){return new ta(this.i,this.h)};function ta(u,v){Tt.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ta,Tt),i=ta.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,_s(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ga(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ga(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Xi(this):_s(this),this.readyState==3&&Ga(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,Xi(this))},i.Na=function(u){this.g&&(this.response=u,Xi(this))},i.ga=function(){this.g&&Xi(this)};function Xi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,_s(u)}i.setRequestHeader=function(u,v){this.A.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=v.next();return u.join(`\r
`)};function _s(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jn(u){let v="";return ge(u,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function na(u,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Jn(b),typeof u=="string"?b!=null&&ci(b):tt(u,v,b))}function at(u){Tt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(at,Tt);var Fs=/^https?$/i,gl=["POST","PUT"];i=at.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rl.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(K){sa(this,K);return}if(u=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)b.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())b.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),q=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(gl,v,void 0)>=0)||S||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of b)this.g.setRequestHeader(K,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){sa(this,K)}};function sa(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,yl(u),ui(u)}function yl(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Rt(this,"complete"),Rt(this,"abort"),ui(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),at.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ia(this):this.Xa())},i.Xa=function(){ia(this)};function ia(u){if(u.h&&typeof c<"u"){if(u.v&&xs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Rt(u,"readystatechange"),xs(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=K===0){let ue=String(u.D).match(Wc)[1]||null;!ue&&h.self&&h.self.location&&(ue=h.self.location.protocol.slice(0,-1)),S=!Fs.test(ue?ue.toLowerCase():"")}b=S}if(b)Rt(u,"complete"),Rt(u,"success");else{u.o=6;try{var q=xs(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",yl(u)}}finally{ui(u)}}}}function ui(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,v||Rt(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function xs(u){return u.g?u.g.readyState:0}i.ca=function(){try{return xs(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Pa(v)}};function nn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function hi(u){const v={};u=(u.g&&xs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(A(u[S]))continue;var b=Yc(u[S]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=v[q]||[];v[q]=K,K.push(b)}Oe(v,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(u,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||v}function Wi(u){this.za=0,this.i=[],this.j=new ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gs("baseRetryDelayMs",5e3,u),this.Za=Gs("retryDelaySeedMs",1e4,u),this.Ta=Gs("forwardChannelMaxRetries",2,u),this.va=Gs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new al(u&&u.concurrentRequestLimit),this.Ba=new $i,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Wi.prototype,i.ka=8,i.I=1,i.connect=function(u,v,b,S){Mt(0),this.W=u,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=lu(this,null,this.W),Qs(this)};function vl(u){if(Qa(u),u.I==3){var v=u.V++,b=Lt(u.J);if(tt(b,"SID",u.M),tt(b,"RID",v),tt(b,"TYPE","terminate"),ra(u,b),v=new gs(u,u.j,v),v.M=2,v.A=Zr(Lt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=v.A,b=!0),b||(v.g=cu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ls(v)}ou(u)}function Ji(u){u.g&&(xl(u),u.g.cancel(),u.g=null)}function Qa(u){Ji(u),u.v&&(h.clearTimeout(u.v),u.v=null),Ya(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Qs(u){if(!ol(u.h)&&!u.m){u.m=!0;var v=u.Ea;ae||C(),he||(ae(),he=!0),R.add(v,u),u.D=0}}function Ka(u,v){return zs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ms(g(u.Ea,u,v),au(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new gs(this,this.j,u);let K=this.o;if(this.U&&(K?(K=M(K),oe(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=nu(this,q,v),b=Lt(this.J),tt(b,"RID",u),tt(b,"CVER",22),this.G&&tt(b,"X-HTTP-Session-Id",this.G),ra(this,b),K&&(this.R?v="headers="+ci(Jn(K))+"&"+v:this.u&&na(b,this.u,K)),ll(this.h,q),this.Ra&&tt(b,"TYPE","init"),this.S?(tt(b,"$req",v),tt(b,"SID","null"),q.U=!0,ks(q,b,null)):ks(q,b,v),this.I=2}}else this.I==3&&(u?_l(this,u):this.i.length==0||ol(this.h)||_l(this))};function _l(u,v){var b;v?b=v.l:b=u.V++;const S=Lt(u.J);tt(S,"SID",u.M),tt(S,"RID",b),tt(S,"AID",u.K),ra(u,S),u.u&&u.o&&na(S,u.u,u.o),b=new gs(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),v&&(u.i=v.G.concat(u.i)),v=nu(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ll(u.h,b),ks(b,S,v)}function ra(u,v){u.H&&ge(u.H,function(b,S){tt(v,S,b)}),u.l&&ge({},function(b,S){tt(v,S,b)})}function nu(u,v,b){b=Math.min(u.i.length,b);const S=u.l?g(u.l.Ka,u.l,u):null;e:{var q=u.i;let Ve=-1;for(;;){const It=["count="+b];Ve==-1?b>0?(Ve=q[0].g,It.push("ofs="+Ve)):Ve=0:It.push("ofs="+Ve);let Ze=!0;for(let yt=0;yt<b;yt++){var K=q[yt].g;const Zn=q[yt].map;if(K-=Ve,K<0)Ve=Math.max(0,q[yt].g-100),Ze=!1;else try{K="req"+K+"_"||"";try{var ue=Zn instanceof Map?Zn:Object.entries(Zn);for(const[Ys,bs]of ue){let Es=bs;p(bs)&&(Es=fs(bs)),It.push(K+Ys+"="+encodeURIComponent(Es))}}catch(Ys){throw It.push(K+"type="+encodeURIComponent("_badmap")),Ys}}catch{S&&S(Zn)}}if(Ze){ue=It.join("&");break e}}ue=void 0}return u=u.i.splice(0,b),v.G=u,ue}function su(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;ae||C(),he||(ae(),he=!0),R.add(v,u),u.A=0}}function aa(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ms(g(u.Da,u),au(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,iu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ms(g(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),Ji(this),iu(this))};function xl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function iu(u){u.g=new gs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=Lt(u.na);tt(v,"RID","rpc"),tt(v,"SID",u.M),tt(v,"AID",u.K),tt(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&tt(v,"TO",u.ia),tt(v,"TYPE","xmlhttp"),ra(u,v),u.u&&u.o&&na(v,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Zr(Lt(v)),b.u=null,b.R=!0,Ua(b,u)}i.Va=function(){this.C!=null&&(this.C=null,Ji(this),aa(this),Mt(19))};function Ya(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ru(u,v){var b=null;if(u.g==v){Ya(u),xl(u),u.g=null;var S=2}else if(Bs(u.h,v))b=v.G,cl(u.h,v),S=1;else return;if(u.I!=0){if(v.o)if(S==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var q=u.D;S=ms(),Rt(S,new Os(S,b)),Qs(u)}else su(u);else if(q=v.m,q==3||q==0&&v.X>0||!(S==1&&Ka(u,v)||S==2&&aa(u)))switch(b&&b.length>0&&(v=u.h,v.i=v.i.concat(b)),q){case 1:Ks(u,5);break;case 4:Ks(u,10);break;case 3:Ks(u,6);break;default:Ks(u,2)}}}function au(u,v){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*v}function Ks(u,v){if(u.j.info("Error code "+v),v==2){var b=g(u.bb,u),S=u.Ua;const q=!S;S=new Vn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Xt(S,"https"),Zr(S),q?vs(S.toString(),b):pl(S.toString(),b)}else Mt(2);u.I=0,u.l&&u.l.pa(v),ou(u),Qa(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function ou(u){if(u.I=0,u.ja=[],u.l){const v=ul(u.h);(v.length!=0||u.i.length!=0)&&(P(u.ja,v),P(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function lu(u,v,b){var S=b instanceof Vn?Lt(b):new Vn(b);if(S.g!="")v&&(S.g=v+"."+S.g),Gi(S,S.u);else{var q=h.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;const K=new Vn(null);S&&Xt(K,S),v&&(K.g=v),q&&Gi(K,q),b&&(K.h=b),S=K}return b=u.G,v=u.wa,b&&v&&tt(S,b,v),tt(S,"VER",u.ka),ra(u,S),S}function cu(u,v,b){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new at(new Hs({ab:b})):new at(u.ma),v.Fa(u.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}i=uu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Zi(){}Zi.prototype.g=function(u,v){return new _n(u,v)};function _n(u,v){Tt.call(this),this.g=new Wi(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!A(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new di(this)}E(_n,Tt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){vl(this.g)},_n.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=fs(u),u=b);v.i.push(new kt(v.Ya++,u)),v.I==3&&Qs(v)},_n.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,_n.Z.N.call(this)};function hu(u){bt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const b in v){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}E(hu,bt);function du(){vn.call(this),this.status=1}E(du,vn);function di(u){this.g=u}E(di,uu),di.prototype.ra=function(){Rt(this.g,"a")},di.prototype.qa=function(u){Rt(this.g,new hu(u))},di.prototype.pa=function(u){Rt(this.g,new du)},di.prototype.oa=function(){Rt(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,uE=function(){return new Zi},cE=function(){return ms()},lE=gt,ap={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,jh=Wr,il.COMPLETE="complete",oE=il,Je.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,lc=Je,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,aE=at}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",G_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new jp("@firebase/firestore");function No(){return Ca.logLevel}function me(i,...e){if(Ca.logLevel<=He.DEBUG){const n=e.map(Gp);Ca.debug(`Firestore (${Zo}): ${i}`,...n)}}function Li(i,...e){if(Ca.logLevel<=He.ERROR){const n=e.map(Gp);Ca.error(`Firestore (${Zo}): ${i}`,...n)}}function Bo(i,...e){if(Ca.logLevel<=He.WARN){const n=e.map(Gp);Ca.warn(`Firestore (${Zo}): ${i}`,...n)}}function Gp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,hE(i,r,n)}function hE(i,e,n){let r=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Li(r),new Error(r)}function Ye(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||hE(e,o,r)}function je(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pn.UNAUTHENTICATED)))}shutdown(){}}class $C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class XC{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ni,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ni)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new dE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class WC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=eR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Fe(i,e){return i<e?-1:i>e?1:0}function op(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return Fm(o)===Fm(c)?Fe(o,c):Fm(o)?1:-1}return Fe(i.length,e.length)}const tR=55296,nR=57343;function Fm(i){const e=i.charCodeAt(0);return e>=tR&&e<=nR}function qo(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="__name__";class Zs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Zs.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Zs.isNumericId(e),o=Zs.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Zs.extractNumericId(e).compare(Zs.extractNumericId(n)):op(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class it extends Zs{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Zs{construct(e,n,r){return new un(e,n,r)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lp}static keyField(){return new un([lp])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(it.fromString(e))}static fromName(e){return new Ee(it.fromString(e).popFirst(5))}static empty(){return new Ee(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(i,e,n){if(!n)throw new ce(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function iR(i,e,n,r){if(e===!0&&r===!0)throw new ce(X.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function K_(i){if(!Ee.isDocumentKey(i))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Y_(i){if(Ee.isDocumentKey(i))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function mE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function fd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Se(12329,{type:typeof i})}function Yn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fd(i);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function rR(i,e){if(e<=0)throw new ce(X.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Lc(i,e){if(!mE(i))throw new ce(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const h=i[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ce(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=-62135596800,X_=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*X_);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$_)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X_}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Qt("string",pt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new pt(0,0))}static max(){return new Re(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=-1;function aR(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Vr(o,Ee.empty(),e)}function oR(i){return new Vr(i.readTime,i.key,bc)}class Vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vr(Re.min(),Ee.empty(),bc)}static max(){return new Vr(Re.max(),Ee.empty(),bc)}}function lR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(i.documentKey,e.documentKey),n!==0?n:Fe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==cR)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,r)=>{n(e)}))}static reject(e){return new se(((n,r)=>{r(e)}))}static waitFor(e){return new se(((n,r)=>{let o=0,c=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++c,h&&c===o&&n()}),(y=>r(y)))})),h=!0,c===o&&n()}))}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next((o=>o?se.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new se(((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;n(e[g]).next((x=>{h[g]=x,++p,p===c&&r(h)}),(x=>o(x)))}}))}static doWhile(e,n){return new se(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function hR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}md.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=-1;function Pc(i){return i==null}function Kh(i){return i===0&&1/i==-1/0}function dR(i){return typeof i=="number"&&Number.isInteger(i)&&!Kh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="";function fR(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=W_(e)),e=mR(i.get(n),e);return W_(e)}function mR(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case pE:n+="";break;default:n+=c}}return n}function W_(i){return i+pE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Fr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function gE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??cn.RED,this.left=o??cn.EMPTY,this.right=c??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new cn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return cn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z_(this.data.getIterator())}getIteratorFrom(e){return new Z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class Z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new Yt(un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new yE("Invalid base64 string: "+c):c}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const pR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(i){if(Ye(!!i,39018),typeof i=="string"){let e=0;const n=pR.exec(i);if(Ye(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(i.seconds),nanos:Ot(i.nanos)}}function Ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Lr(i){return typeof i=="string"?hn.fromBase64String(i):hn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="server_timestamp",_E="__type__",xE="__previous_value__",bE="__local_write_time__";function pd(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[_E])==null?void 0:r.stringValue)===vE}function gd(i){const e=i.mapValue.fields[xE];return pd(e)?gd(e):e}function Ec(i){const e=kr(i.mapValue.fields[bE].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,r,o,c,h,p,y,g,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=x}}const Yh="(default)";class wc{constructor(e,n){this.projectId=e,this.database=n||Yh}static empty(){return new wc("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="__type__",yR="__max__",bh={mapValue:{}},wE="__vector__",$h="value";function Pr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?pd(i)?4:_R(i)?9007199254740991:vR(i)?10:11:Se(28295,{value:i})}function ai(i,e){if(i===e)return!0;const n=Pr(i);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ec(i).isEqual(Ec(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=kr(o.timestampValue),p=kr(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Lr(o.bytesValue).isEqual(Lr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ot(o.geoPointValue.latitude)===Ot(c.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ot(o.integerValue)===Ot(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Ot(o.doubleValue),p=Ot(c.doubleValue);return h===p?Kh(h)===Kh(p):isNaN(h)&&isNaN(p)}return!1})(i,e);case 9:return qo(i.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(J_(h)!==J_(p))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(p[y]===void 0||!ai(h[y],p[y])))return!1;return!0})(i,e);default:return Se(52216,{left:i})}}function Tc(i,e){return(i.values||[]).find((n=>ai(n,e)))!==void 0}function Ho(i,e){if(i===e)return 0;const n=Pr(i),r=Pr(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(i.booleanValue,e.booleanValue);case 2:return(function(c,h){const p=Ot(c.integerValue||c.doubleValue),y=Ot(h.integerValue||h.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(i,e);case 3:return ex(i.timestampValue,e.timestampValue);case 4:return ex(Ec(i),Ec(e));case 5:return op(i.stringValue,e.stringValue);case 6:return(function(c,h){const p=Lr(c),y=Lr(h);return p.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,h){const p=c.split("/"),y=h.split("/");for(let g=0;g<p.length&&g<y.length;g++){const x=Fe(p[g],y[g]);if(x!==0)return x}return Fe(p.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,h){const p=Fe(Ot(c.latitude),Ot(h.latitude));return p!==0?p:Fe(Ot(c.longitude),Ot(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return tx(i.arrayValue,e.arrayValue);case 10:return(function(c,h){var T,O,P,z;const p=c.fields||{},y=h.fields||{},g=(T=p[$h])==null?void 0:T.arrayValue,x=(O=y[$h])==null?void 0:O.arrayValue,E=Fe(((P=g==null?void 0:g.values)==null?void 0:P.length)||0,((z=x==null?void 0:x.values)==null?void 0:z.length)||0);return E!==0?E:tx(g,x)})(i.mapValue,e.mapValue);case 11:return(function(c,h){if(c===bh.mapValue&&h===bh.mapValue)return 0;if(c===bh.mapValue)return 1;if(h===bh.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=h.fields||{},x=Object.keys(g);y.sort(),x.sort();for(let E=0;E<y.length&&E<x.length;++E){const T=op(y[E],x[E]);if(T!==0)return T;const O=Ho(p[y[E]],g[x[E]]);if(O!==0)return O}return Fe(y.length,x.length)})(i.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function ex(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Fe(i,e);const n=kr(i),r=kr(e),o=Fe(n.seconds,r.seconds);return o!==0?o:Fe(n.nanos,r.nanos)}function tx(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=Ho(n[o],r[o]);if(c)return c}return Fe(n.length,r.length)}function Fo(i){return cp(i)}function cp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Lr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ee.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=cp(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${cp(n.fields[h])}`;return o+"}"})(i.mapValue):Se(61005,{value:i})}function Oh(i){switch(Pr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gd(i);return e?16+Oh(e):16;case 5:return 2*i.stringValue.length;case 6:return Lr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Oh(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Fr(r.fields,((c,h)=>{o+=c.length+Oh(h)})),o})(i.mapValue);default:throw Se(13486,{value:i})}}function Xh(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function up(i){return!!i&&"integerValue"in i}function Yp(i){return!!i&&"arrayValue"in i}function nx(i){return!!i&&"nullValue"in i}function sx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Mh(i){return!!i&&"mapValue"in i}function vR(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[EE])==null?void 0:r.stringValue)===wE}function fc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Fr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=fc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(i.arrayValue.values[n]);return e}return{...i}}function _R(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===yR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=un.emptyPath(),r={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=fc(h):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Mh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Fr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new bn(fc(this.value))}}function TE(i){const e=[];return Fr(i.fields,((n,r)=>{const o=new un([n]);if(Mh(r)){const c=TE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,o,c,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Re.min(),Re.min(),Re.min(),bn.empty(),0)}static newFoundDocument(e,n,r,o){return new en(e,1,n,Re.min(),r,o,0)}static newNoDocument(e,n){return new en(e,2,n,Re.min(),Re.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Re.min(),Re.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.position=e,this.inclusive=n}}function ix(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],h=i.position[o];if(c.field.isKeyField()?r=Ee.comparator(Ee.fromName(h.referenceValue),n.key):r=Ho(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function rx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ai(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function xR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{}class Ft extends SE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ER(e,n,r):n==="array-contains"?new SR(e,r):n==="in"?new AR(e,r):n==="not-in"?new NR(e,r):n==="array-contains-any"?new CR(e,r):new Ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wR(e,r):new TR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ho(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(Ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends SE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cs(e,n)}matches(e){return AE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AE(i){return i.op==="and"}function NE(i){return bR(i)&&AE(i)}function bR(i){for(const e of i.filters)if(e instanceof Cs)return!1;return!0}function hp(i){if(i instanceof Ft)return i.field.canonicalString()+i.op.toString()+Fo(i.value);if(NE(i))return i.filters.map((e=>hp(e))).join(",");{const e=i.filters.map((n=>hp(n))).join(",");return`${i.op}(${e})`}}function CE(i,e){return i instanceof Ft?(function(r,o){return o instanceof Ft&&r.op===o.op&&r.field.isEqual(o.field)&&ai(r.value,o.value)})(i,e):i instanceof Cs?(function(r,o){return o instanceof Cs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,p)=>c&&CE(h,o.filters[p])),!0):!1})(i,e):void Se(19439)}function RE(i){return i instanceof Ft?(function(n){return`${n.field.canonicalString()} ${n.op} ${Fo(n.value)}`})(i):i instanceof Cs?(function(n){return n.op.toString()+" {"+n.getFilters().map(RE).join(" ,")+"}"})(i):"Filter"}class ER extends Ft{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class wR extends Ft{constructor(e,n){super(e,"in",n),this.keys=IE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class TR extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=IE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function IE(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class SR extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&Tc(n.arrayValue,this.value)}}class AR extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tc(this.value.arrayValue,n)}}class NR extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tc(this.value.arrayValue,n)}}class CR extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Tc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Te=null}}function ax(i,e=null,n=[],r=[],o=null,c=null,h=null){return new RR(i,e,n,r,o,c,h)}function $p(i){const e=je(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>hp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Fo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Fo(r))).join(",")),e.Te=n}return e.Te}function Xp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!xR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!CE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!rx(i.startAt,e.startAt)&&rx(i.endAt,e.endAt)}function dp(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n=null,r=[],o=[],c=null,h="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IR(i,e,n,r,o,c,h,p){return new ja(i,e,n,r,o,c,h,p)}function Wp(i){return new ja(i)}function ox(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Jp(i){return i.collectionGroup!==null}function ko(i){const e=je(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Yt(un.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Sc(c,r))})),n.has(un.keyField().canonicalString())||e.Ie.push(new Sc(un.keyField(),r))}return e.Ie}function si(i){const e=je(i);return e.Ee||(e.Ee=DR(e,ko(i))),e.Ee}function DR(i,e){if(i.limitType==="F")return ax(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Sc(o.field,c)}));const n=i.endAt?new Go(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Go(i.startAt.position,i.startAt.inclusive):null;return ax(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function fp(i,e){const n=i.filters.concat([e]);return new ja(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Wh(i,e,n){return new ja(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function yd(i,e){return Xp(si(i),si(e))&&i.limitType===e.limitType}function DE(i){return`${$p(si(i))}|lt:${i.limitType}`}function Co(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>RE(o))).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Fo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Fo(o))).join(",")),`Target(${r})`})(si(i))}; limitType=${i.limitType})`}function vd(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ee.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of ko(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(h,p,y){const g=ix(h,p,y);return h.inclusive?g<=0:g<0})(r.startAt,ko(r),o)||r.endAt&&!(function(h,p,y){const g=ix(h,p,y);return h.inclusive?g>=0:g>0})(r.endAt,ko(r),o))})(i,e)}function jR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function jE(i){return(e,n)=>{let r=!1;for(const o of ko(i)){const c=OR(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function OR(i,e,n){const r=i.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,h,p){const y=h.data.field(c),g=p.data.field(c);return y!==null&&g!==null?Ho(y,g):Se(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return gE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new wt(Ee.comparator);function Pi(){return MR}const OE=new wt(Ee.comparator);function cc(...i){let e=OE;for(const n of i)e=e.insert(n.key,n);return e}function ME(i){let e=OE;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ta(){return mc()}function VE(){return mc()}function mc(){return new Oa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const VR=new wt(Ee.comparator),kR=new Yt(Ee.comparator);function Ge(...i){let e=kR;for(const n of i)e=e.add(n);return e}const LR=new Yt(Fe);function PR(){return LR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function kE(i){return{integerValue:""+i}}function UR(i,e){return dR(e)?kE(e):Zp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this._=void 0}}function zR(i,e,n){return i instanceof Jh?(function(o,c){const h={fields:{[_E]:{stringValue:vE},[bE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&pd(c)&&(c=gd(c)),c&&(h.fields[xE]=c),{mapValue:h}})(n,e):i instanceof Ac?PE(i,e):i instanceof Nc?UE(i,e):(function(o,c){const h=LE(o,c),p=lx(h)+lx(o.Ae);return up(h)&&up(o.Ae)?kE(p):Zp(o.serializer,p)})(i,e)}function BR(i,e,n){return i instanceof Ac?PE(i,e):i instanceof Nc?UE(i,e):n}function LE(i,e){return i instanceof Zh?(function(r){return up(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Jh extends _d{}class Ac extends _d{constructor(e){super(),this.elements=e}}function PE(i,e){const n=zE(e);for(const r of i.elements)n.some((o=>ai(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Nc extends _d{constructor(e){super(),this.elements=e}}function UE(i,e){let n=zE(e);for(const r of i.elements)n=n.filter((o=>!ai(o,r)));return{arrayValue:{values:n}}}class Zh extends _d{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lx(i){return Ot(i.integerValue||i.doubleValue)}function zE(i){return Yp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function qR(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Ac&&o instanceof Ac||r instanceof Nc&&o instanceof Nc?qo(r.elements,o.elements,ai):r instanceof Zh&&o instanceof Zh?ai(r.Ae,o.Ae):r instanceof Jh&&o instanceof Jh})(i.transform,e.transform)}class HR{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class xd{}function BE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new zc(i.key,Gt.none()):new Uc(i.key,i.data,Gt.none());{const n=i.data,r=bn.empty();let o=new Yt(un.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new Gr(i.key,r,new Gn(o.toArray()),Gt.none())}}function FR(i,e,n){i instanceof Uc?(function(o,c,h){const p=o.value.clone(),y=ux(o.fieldTransforms,c,h.transformResults);p.setAll(y),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Gr?(function(o,c,h){if(!Vh(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=ux(o.fieldTransforms,c,h.transformResults),y=c.data;y.setAll(qE(o)),y.setAll(p),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(i,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function pc(i,e,n,r){return i instanceof Uc?(function(c,h,p,y){if(!Vh(c.precondition,h))return p;const g=c.value.clone(),x=hx(c.fieldTransforms,y,h);return g.setAll(x),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(i,e,n,r):i instanceof Gr?(function(c,h,p,y){if(!Vh(c.precondition,h))return p;const g=hx(c.fieldTransforms,y,h),x=h.data;return x.setAll(qE(c)),x.setAll(g),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,n,r):(function(c,h,p){return Vh(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(i,e,n)}function GR(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=LE(r.transform,o||null);c!=null&&(n===null&&(n=bn.empty()),n.set(r.field,c))}return n||null}function cx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&qo(r,o,((c,h)=>qR(c,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Uc extends xd{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gr extends xd{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function qE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function ux(i,e,n){const r=new Map;Ye(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,BR(h,p,n[o]))}return r}function hx(i,e,n){const r=new Map;for(const o of i){const c=o.transform,h=n.data.field(o.field);r.set(o.field,zR(c,h,e))}return r}class zc extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HE extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&FR(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VE();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=n.has(o.key)?null:p;const y=BE(h,p);y!==null&&r.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((n,r)=>cx(n,r)))&&qo(this.baseMutations,e.baseMutations,((n,r)=>cx(n,r)))}}class eg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return VR})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new eg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Ke;function FE(i){switch(i){case X.OK:return Se(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Se(15467,{code:i})}}function GE(i){if(i===void 0)return Li("GRPC error has no .code"),X.UNKNOWN;switch(i){case Ht.OK:return X.OK;case Ht.CANCELLED:return X.CANCELLED;case Ht.UNKNOWN:return X.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return X.INTERNAL;case Ht.UNAVAILABLE:return X.UNAVAILABLE;case Ht.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ht.NOT_FOUND:return X.NOT_FOUND;case Ht.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ht.ABORTED:return X.ABORTED;case Ht.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ht.DATA_LOSS:return X.DATA_LOSS;default:return Se(39323,{code:i})}}(Ke=Ht||(Ht={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new jr([4294967295,4294967295],0);function dx(i){const e=$R().encode(i),n=new rE;return n.update(e),new Uint8Array(n.digest())}function fx(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new jr([n,r],0),new jr([o,c],0)]}class tg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uc(`Invalid padding: ${n}`);if(r<0)throw new uc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(jr.fromNumber(r)));return o.compare(XR)===1&&(o=new jr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dx(e),[r,o]=fx(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new tg(c,o,n);return r.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=dx(e),[r,o]=fx(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bd(Re.min(),o,new wt(Fe),Pi(),Ge())}}class Bc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bc(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class QE{constructor(e,n){this.targetId=e,this.Ce=n}}class KE{constructor(e,n,r=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class mx{constructor(){this.ve=0,this.Fe=px(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Se(38017,{changeType:c})}})),new Bc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=px()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pi(),this.Je=Eh(),this.He=Eh(),this.Ye=new wt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(dp(c))if(r===0){const h=new Ee(c.path);this.et(n,h,en.newNoDocument(h,Re.min()))}else Ye(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const p=this.ut(e),y=p?this.ct(p,e,h):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,p;try{h=Lr(r).toUint8Array()}catch(y){if(y instanceof yE)return Bo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new tg(h,o,c)}catch(y){return Bo(y instanceof uc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const p=this.ot(h);if(p){if(c.current&&dp(p.target)){const y=new Ee(p.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,en.newNoDocument(y,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let r=Ge();this.He.forEach(((c,h)=>{let p=!0;h.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new bd(e,n,this.Ye,this.je,r);return this.je=Pi(),this.Je=Eh(),this.He=Eh(),this.Ye=new wt(Fe),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Yt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Yt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Eh(){return new wt(Ee.comparator)}function px(){return new wt(Ee.comparator)}const JR={asc:"ASCENDING",desc:"DESCENDING"},ZR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eI={and:"AND",or:"OR"};class tI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mp(i,e){return i.useProto3Json||Pc(e)?e:{value:e}}function ed(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function nI(i,e){return ed(i,e.toTimestamp())}function Qn(i){return Ye(!!i,49232),Re.fromTimestamp((function(n){const r=kr(n);return new pt(r.seconds,r.nanos)})(i))}function ng(i,e){return pp(i,e).canonicalString()}function pp(i,e){const n=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function $E(i){const e=it.fromString(i);return Ye(tw(e),10190,{key:e.toString()}),e}function td(i,e){return ng(i.databaseId,e.path)}function gc(i,e){const n=$E(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ee(WE(n))}function XE(i,e){return ng(i.databaseId,e)}function sI(i){const e=$E(i);return e.length===4?it.emptyPath():WE(e)}function gp(i){return new it(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function WE(i){return Ye(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function gx(i,e,n){return{name:td(i,e),fields:n.value.mapValue.fields}}function iI(i,e){return"found"in e?(function(r,o){Ye(!!o.found,43571),o.found.name,o.found.updateTime;const c=gc(r,o.found.name),h=Qn(o.found.updateTime),p=o.found.createTime?Qn(o.found.createTime):Re.min(),y=new bn({mapValue:{fields:o.found.fields}});return en.newFoundDocument(c,h,p,y)})(i,e):"missing"in e?(function(r,o){Ye(!!o.missing,3894),Ye(!!o.readTime,22933);const c=gc(r,o.missing),h=Qn(o.readTime);return en.newNoDocument(c,h)})(i,e):Se(7234,{result:e})}function rI(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,x){return g.useProto3Json?(Ye(x===void 0||typeof x=="string",58123),hn.fromBase64String(x||"")):(Ye(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),hn.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(g){const x=g.code===void 0?X.UNKNOWN:GE(g.code);return new ce(x,g.message||"")})(h);n=new KE(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=gc(i,r.document.name),c=Qn(r.document.updateTime),h=r.document.createTime?Qn(r.document.createTime):Re.min(),p=new bn({mapValue:{fields:r.document.fields}}),y=en.newFoundDocument(o,c,h,p),g=r.targetIds||[],x=r.removedTargetIds||[];n=new kh(g,x,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=gc(i,r.document),c=r.readTime?Qn(r.readTime):Re.min(),h=en.newNoDocument(o,c),p=r.removedTargetIds||[];n=new kh([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=gc(i,r.document),c=r.removedTargetIds||[];n=new kh([],c,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new YR(o,c),p=r.targetId;n=new QE(p,h)}}return n}function JE(i,e){let n;if(e instanceof Uc)n={update:gx(i,e.key,e.value)};else if(e instanceof zc)n={delete:td(i,e.key)};else if(e instanceof Gr)n={update:gx(i,e.key,e.data),updateMask:mI(e.fieldMask)};else{if(!(e instanceof HE))return Se(16599,{Vt:e.type});n={verify:td(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const p=h.transform;if(p instanceof Jh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ac)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Nc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Se(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:nI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Se(27497)})(i,e.precondition)),n}function aI(i,e){return i&&i.length>0?(Ye(e!==void 0,14353),i.map((n=>(function(o,c){let h=o.updateTime?Qn(o.updateTime):Qn(c);return h.isEqual(Re.min())&&(h=Qn(c)),new HR(h,o.transformResults||[])})(n,e)))):[]}function oI(i,e){return{documents:[XE(i,e.path)]}}function lI(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XE(i,o);const c=(function(g){if(g.length!==0)return ew(Cs.create(g,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(g){if(g.length!==0)return g.map((x=>(function(T){return{field:Ro(T.field),direction:hI(T.dir)}})(x)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=mp(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function cI(i){let e=sI(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ye(r===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(E){const T=ZE(E);return T instanceof Cs&&NE(T)?T.getFilters():[T]})(n.where));let h=[];n.orderBy&&(h=(function(E){return E.map((T=>(function(P){return new Sc(Io(P.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,Pc(T)?null:T})(n.limit));let y=null;n.startAt&&(y=(function(E){const T=!!E.before,O=E.values||[];return new Go(O,T)})(n.startAt));let g=null;return n.endAt&&(g=(function(E){const T=!E.before,O=E.values||[];return new Go(O,T)})(n.endAt)),IR(e,o,h,c,p,"F",y,g)}function uI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Io(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(n.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Io(n.unaryFilter.field);return Ft.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(n.unaryFilter.field);return Ft.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ft.create(Io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Cs.create(n.compositeFilter.filters.map((r=>ZE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(i):Se(30097,{filter:i})}function hI(i){return JR[i]}function dI(i){return ZR[i]}function fI(i){return eI[i]}function Ro(i){return{fieldPath:i.canonicalString()}}function Io(i){return un.fromServerFormat(i.fieldPath)}function ew(i){return i instanceof Ft?(function(n){if(n.op==="=="){if(sx(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(nx(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sx(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(nx(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:dI(n.op),value:n.value}}})(i):i instanceof Cs?(function(n){const r=n.getFilters().map((o=>ew(o)));return r.length===1?r[0]:{compositeFilter:{op:fI(n.op),filters:r}}})(i):Se(54877,{filter:i})}function mI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function tw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,o,c=Re.min(),h=Re.min(),p=hn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.yt=e}}function gI(i){const e=cI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Wh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.Cn=new vI}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Vr.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class vI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Yt(it.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Yt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nw=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(nw,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qo(0)}static cr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="LruGarbageCollector",_I=1048576;function _x([i,e],[n,r]){const o=Fe(i,n);return o===0?Fe(e,r):o}class xI{constructor(e){this.Ir=e,this.buffer=new Yt(_x),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_x(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(vx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?me(vx,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)}))}}class EI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(md.ce);const r=new xI(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(yx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,h,p,y,g;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,n)))).next((E=>(c=E,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),No()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${E} documents in `+(g-y)+`ms
Total Duration: ${g-x}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function wI(i,e){return new EI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.changes=new Oa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&pc(r.mutation,o,Gn.empty(),pt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ge()){const o=Ta();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=cc();return c.forEach(((p,y)=>{h=h.insert(p,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=Ta();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ge())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,r,o){let c=Pi();const h=mc(),p=(function(){return mc()})();return n.forEach(((y,g)=>{const x=r.get(g.key);o.has(g.key)&&(x===void 0||x.mutation instanceof Gr)?c=c.insert(g.key,g):x!==void 0?(h.set(g.key,x.mutation.getFieldMask()),pc(x.mutation,g,x.mutation.getFieldMask(),pt.now())):h.set(g.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((g,x)=>h.set(g,x))),n.forEach(((g,x)=>p.set(g,new SI(x,h.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=mc();let o=new wt(((h,p)=>h-p)),c=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let x=r.get(y)||Gn.empty();x=p.applyToLocalView(g,x),r.set(y,x);const E=(o.get(p.batchId)||Ge()).add(y);o=o.insert(p.batchId,E)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,x=y.value,E=VE();x.forEach((T=>{if(!c.has(T)){const O=BE(n.get(T),r.get(T));O!==null&&E.set(T,O),c=c.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,E))}return se.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):se.resolve(Ta());let p=bc,y=c;return h.next((g=>se.forEach(g,((x,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),c.get(x)?se.resolve():this.remoteDocumentCache.getEntry(e,x).next((T=>{y=y.insert(x,T)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,y,g,Ge()))).next((x=>({batchId:p,changes:ME(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let o=cc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=cc();return this.indexManager.getCollectionParents(e,c).next((p=>se.forEach(p,(y=>{const g=(function(E,T){return new ja(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next((x=>{x.forEach(((E,T)=>{h=h.insert(E,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((y,g)=>{const x=g.getKey();h.get(x)===null&&(h=h.insert(x,en.newInvalidDocument(x)))}));let p=cc();return h.forEach(((y,g)=>{const x=c.get(y);x!==void 0&&pc(x.mutation,g,Gn.empty(),pt.now()),vd(n,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Qn(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:gI(o.bundledQuery),readTime:Qn(o.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.overlays=new wt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ta();return se.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),se.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const o=Ta(),c=n.length+1,h=new Ee(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>r&&o.set(y.getKey(),y)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new wt(((g,x)=>g-x));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let x=c.get(g.largestBatchId);x===null&&(x=Ta(),c=c.insert(g.largestBatchId,x)),x.set(g.getKey(),g)}}const p=Ta(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,x)=>p.set(g,x))),!(p.size()>=o)););return se.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new KR(n,r));let c=this.qr.get(n);c===void 0&&(c=Ge(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.Qr=new Yt(Zt.$r),this.Ur=new Yt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Zt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Zt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ee(new it([])),r=new Zt(n,e),o=new Zt(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new it([])),r=new Zt(n,e),o=new Zt(n,e+1);let c=Ge();return this.Ur.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Zt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(Zt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new QR(c,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new Zt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return se.resolve(h)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Kp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zt(n,0),o=new Zt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(h=>{const p=this.Xr(h.Yr);c.push(p)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Fe);return n.forEach((o=>{const c=new Zt(o,0),h=new Zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(p=>{r=r.add(p.Yr)}))})),se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Ee.isDocumentKey(c)||(c=c.child(""));const h=new Zt(new Ee(c),0);let p=new Yt(Fe);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(p=p.add(y.Yr)),!0)}),h),se.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return se.forEach(n.mutations,(o=>{const c=new Zt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Zt(n,0),o=this.Zr.firstAfterOrEqual(r);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.ri=e,this.docs=(function(){return new wt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=Pi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():en.newInvalidDocument(o))})),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Pi();const h=n.path,p=new Ee(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:x}}=y.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||lR(oR(x),r)<=0||(o.has(x.key)||vd(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Se(9500)}ii(e,n){return se.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jI(this)}getSize(e){return se.resolve(this.size)}}class jI extends TI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.persistence=e,this.si=new Oa((n=>$p(n)),Xp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new sg,this.targetCount=0,this.ai=Qo.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),se.waitFor(c).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.ui={},this.overlays={},this.ci=new md(0),this.li=!1,this.li=!0,this.hi=new RI,this.referenceDelegate=e(this),this.Pi=new OI(this),this.indexManager=new yI,this.remoteDocumentCache=(function(o){return new DI(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new pI(n),this.Ii=new NI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new II(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const o=new MI(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class MI extends uR{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Ri=new sg,this.Vi=null}static mi(e){return new ig(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(r=>{const o=Ee.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nd{constructor(e,n){this.persistence=e,this.pi=new Oa((r=>fR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=wI(this,n)}static mi(e,n){return new nd(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?se.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((p=>{p||(r++,c.removeEntry(h,Re.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oh(e.data.value)),n}br(e,n,r){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Ge(),o=Ge();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new rg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fA()?8:hR(gn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new VI;return this.Ss(e,n,h).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,h,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(No()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(No()<=He.DEBUG&&me("QueryEngine","Query:",Co(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(No()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):se.resolve())}ys(e,n){if(ox(n))return se.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Wh(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=Ge(...c);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,h,y.readTime)?this.ys(e,Wh(n,null,"F")):this.vs(e,g,n,y)}))))})))))}ws(e,n,r,o){return ox(n)||o.isEqual(Re.min())?se.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,r,o)?se.resolve(null):(No()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Co(n)),this.vs(e,h,n,aR(o,bc)).next((p=>p)))}))}Ds(e,n){let r=new Yt(jE(e));return n.forEach(((o,c)=>{vd(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return No()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Co(n)),this.ps.getDocumentsMatchingQuery(e,n,Vr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="LocalStore",LI=3e8;class PI{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new wt(Fe),this.xs=new Oa((c=>$p(c)),Xp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function UI(i,e,n,r){return new PI(i,e,n,r)}async function iw(i,e){const n=je(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],p=[];let y=Ge();for(const g of o){h.push(g.batchId);for(const x of g.mutations)y=y.add(x.key)}for(const g of c){p.push(g.batchId);for(const x of g.mutations)y=y.add(x.key)}return n.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:h,addedBatchIds:p})))}))}))}function zI(i,e){const n=je(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,x){const E=g.batch,T=E.keys();let O=se.resolve();return T.forEach((P=>{O=O.next((()=>x.getEntry(y,P))).next((z=>{const U=g.docVersions.get(P);Ye(U!==null,48541),z.version.compareTo(U)<0&&(E.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),x.addEntry(z)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(y,E)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Ge();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function rw(i){const e=je(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function BI(i,e){const n=je(i),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((x,E)=>{const T=o.get(E);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,E))));let O=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(hn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):x.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(x.resumeToken,r)),o=o.insert(E,O),(function(z,U,$){return z.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=LI?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(T,O,x)&&p.push(n.Pi.updateTargetData(c,O))}));let y=Pi(),g=Ge();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(qI(c,h,e.documentUpdates).next((x=>{y=x.ks,g=x.qs}))),!r.isEqual(Re.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((E=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(x)}return se.waitFor(p).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(n.Ms=o,c)))}function qI(i,e,n){let r=Ge(),o=Ge();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let h=Pi();return n.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(p,y.readTime),h=h.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),h=h.insert(p,y)):me(ag,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function HI(i,e){const n=je(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Kp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function FI(i,e){const n=je(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,se.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new Nr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function yp(i,e,n){const r=je(i),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!tl(h))throw h;me(ag,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function xx(i,e,n){const r=je(i);let o=Re.min(),c=Ge();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,g,x){const E=je(y),T=E.xs.get(x);return T!==void 0?se.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,x)})(r,h,si(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?o:Re.min(),n?c:Ge()))).next((p=>(GI(r,jR(e),p),{documents:p,Qs:c})))))}function GI(i,e,n){let r=i.Os.get(e)||Re.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class bx{constructor(){this.activeTargetIds=PR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QI{constructor(){this.Mo=new bx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="ConnectivityMonitor";class wx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Ex,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Ex,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function vp(){return wh===null?wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $I{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Yh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const h=vp(),p=this.zo(e,n.toUriEncodedString());me(Gm,`Sending RPC '${e}' ${h}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:g}=new URL(p),x=Xo(g);return this.Jo(e,p,y,r,x).then((E=>(me(Gm,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Bo(Gm,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",r),E}))}Ho(e,n,r,o,c,h){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=YI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class WI extends $I{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const h=vp();return new Promise(((p,y)=>{const g=new aE;g.setWithCredentials(!0),g.listenOnce(oE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case jh.NO_ERROR:const E=g.getResponseJson();me(fn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case jh.TIMEOUT:me(fn,`RPC '${e}' ${h} timed out`),y(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const T=g.getStatus();if(me(fn,`RPC '${e}' ${h} failed with status:`,T,"response text:",g.getResponseText()),T>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const P=O==null?void 0:O.error;if(P&&P.status&&P.message){const z=(function($){const ie=$.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN})(P.status);y(new ce(z,P.message))}else y(new ce(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ce(X.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(fn,`RPC '${e}' ${h} completed.`)}}));const x=JSON.stringify(o);me(fn,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",x,r,15)}))}T_(e,n,r){const o=vp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=uE(),p=cE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const x=c.join("");me(fn,`Creating RPC '${e}' stream ${o}: ${x}`,y);const E=h.createWebChannel(x,y);this.I_(E);let T=!1,O=!1;const P=new XI({Yo:U=>{O?me(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(T||(me(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),me(fn,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),z=(U,$,ie)=>{U.listen($,(J=>{try{ie(J)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return z(E,lc.EventType.OPEN,(()=>{O||(me(fn,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),z(E,lc.EventType.CLOSE,(()=>{O||(O=!0,me(fn,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(E))})),z(E,lc.EventType.ERROR,(U=>{O||(O=!0,Bo(fn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),P.a_(new ce(X.UNAVAILABLE,"The operation could not be completed")))})),z(E,lc.EventType.MESSAGE,(U=>{var $;if(!O){const ie=U.data[0];Ye(!!ie,16349);const J=ie,fe=(J==null?void 0:J.error)||(($=J[0])==null?void 0:$.error);if(fe){me(fn,`RPC '${e}' stream ${o} received error:`,fe);const ae=fe.status;let he=(function(I){const k=Ht[I];if(k!==void 0)return GE(k)})(ae),R=fe.message;he===void 0&&(he=X.INTERNAL,R="Unknown error status: "+ae+" with message "+fe.message),O=!0,P.a_(new ce(he,R)),E.close()}else me(fn,`RPC '${e}' stream ${o} received:`,ie),P.u_(ie)}})),z(p,lE.STAT_EVENT,(U=>{U.stat===ap.PROXY?me(fn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===ap.NOPROXY&&me(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(i){return new tI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="PersistentStream";class aw{constructor(e,n,r,o,c,h,p,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new og(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Li(n.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ce(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(Tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JI extends aw{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Re.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?Qn(h.readTime):Re.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=gp(this.serializer),n.addTarget=(function(c,h){let p;const y=h.target;if(p=dp(y)?{documents:oI(c,y)}:{query:lI(c,y).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=YE(c,h.resumeToken);const g=mp(c,h.expectedCount);g!==null&&(p.expectedCount=g)}else if(h.snapshotVersion.compareTo(Re.min())>0){p.readTime=ed(c,h.snapshotVersion.toTimestamp());const g=mp(c,h.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=uI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=gp(this.serializer),n.removeTarget=e,this.q_(n)}}class ZI extends aw{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aI(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>JE(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{}class tD extends eD{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,pp(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(X.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,pp(n,r),o,h,p,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(X.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Li(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="RemoteStore";class sD{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{Ma(this)&&(me(Ra,"Restarting streams for network reachability change."),await(async function(y){const g=je(y);g.Ea.add(4),await qc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await wd(g)})(this))}))})),this.Ra=new nD(r,o)}}async function wd(i){if(Ma(i))for(const e of i.da)await e(!0)}async function qc(i){for(const e of i.da)await e(!1)}function ow(i,e){const n=je(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hg(n)?ug(n):nl(n).O_()&&cg(n,e))}function lg(i,e){const n=je(i),r=nl(n);n.Ia.delete(e),r.O_()&&lw(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ma(n)&&n.Ra.set("Unknown"))}function cg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(i).Y_(e)}function lw(i,e){i.Va.Ue(e),nl(i).Z_(e)}function ug(i){i.Va=new WR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),nl(i).start(),i.Ra.ua()}function hg(i){return Ma(i)&&!nl(i).x_()&&i.Ia.size>0}function Ma(i){return je(i).Ea.size===0}function cw(i){i.Va=void 0}async function iD(i){i.Ra.set("Online")}async function rD(i){i.Ia.forEach(((e,n)=>{cg(i,e)}))}async function aD(i,e){cw(i),hg(i)?(i.Ra.ha(e),ug(i)):i.Ra.set("Unknown")}async function oD(i,e,n){if(i.Ra.set("Online"),e instanceof KE&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){me(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sd(i,r)}else if(e instanceof kh?i.Va.Ze(e):e instanceof QE?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const r=await rw(i.localStore);n.compareTo(r)>=0&&await(function(c,h){const p=c.Va.Tt(h);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const x=c.Ia.get(g);x&&c.Ia.set(g,x.withResumeToken(y.resumeToken,h))}})),p.targetMismatches.forEach(((y,g)=>{const x=c.Ia.get(y);if(!x)return;c.Ia.set(y,x.withResumeToken(hn.EMPTY_BYTE_STRING,x.snapshotVersion)),lw(c,y);const E=new Nr(x.target,y,g,x.sequenceNumber);cg(c,E)})),c.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){me(Ra,"Failed to raise snapshot:",r),await sd(i,r)}}async function sd(i,e,n){if(!tl(e))throw e;i.Ea.add(1),await qc(i),i.Ra.set("Offline"),n||(n=()=>rw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(Ra,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await wd(i)}))}function uw(i,e){return e().catch((n=>sd(i,n,e)))}async function Td(i){const e=je(i),n=Ur(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kp;for(;lD(e);)try{const o=await HI(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,cD(e,o)}catch(o){await sd(e,o)}hw(e)&&dw(e)}function lD(i){return Ma(i)&&i.Ta.length<10}function cD(i,e){i.Ta.push(e);const n=Ur(i);n.O_()&&n.X_&&n.ea(e.mutations)}function hw(i){return Ma(i)&&!Ur(i).x_()&&i.Ta.length>0}function dw(i){Ur(i).start()}async function uD(i){Ur(i).ra()}async function hD(i){const e=Ur(i);for(const n of i.Ta)e.ea(n.mutations)}async function dD(i,e,n){const r=i.Ta.shift(),o=eg.from(r,e,n);await uw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Td(i)}async function fD(i,e){e&&Ur(i).X_&&await(async function(r,o){if((function(h){return FE(h)&&h!==X.ABORTED})(o.code)){const c=r.Ta.shift();Ur(r).B_(),await uw(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Td(r)}})(i,e),hw(i)&&dw(i)}async function Sx(i,e){const n=je(i);n.asyncQueue.verifyOperationInProgress(),me(Ra,"RemoteStore received new credentials");const r=Ma(n);n.Ea.add(3),await qc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wd(n)}async function mD(i,e){const n=je(i);e?(n.Ea.delete(2),await wd(n)):e||(n.Ea.add(2),await qc(n),n.Ra.set("Unknown"))}function nl(i){return i.ma||(i.ma=(function(n,r,o){const c=je(n);return c.sa(),new JI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:iD.bind(null,i),t_:rD.bind(null,i),r_:aD.bind(null,i),H_:oD.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),hg(i)?ug(i):i.Ra.set("Unknown")):(await i.ma.stop(),cw(i))}))),i.ma}function Ur(i){return i.fa||(i.fa=(function(n,r,o){const c=je(n);return c.sa(),new ZI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:uD.bind(null,i),r_:fD.bind(null,i),ta:hD.bind(null,i),na:dD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Td(i)):(await i.fa.stop(),i.Ta.length>0&&(me(Ra,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,p=new dg(e,n,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(i,e){if(Li("AsyncQueue",`${e}: ${i}`),tl(i))return new ce(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=cc(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Lo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.ga=new wt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ko{constructor(e,n,r,o,c,h,p,y,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Ko(e,n,Lo.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class gD{constructor(){this.queries=Nx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=je(n),c=o.queries;o.queries=Nx(),c.forEach(((h,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new ce(X.ABORTED,"Firestore shutting down"))}}function Nx(){return new Oa((i=>DE(i)),yd)}async function fw(i,e){const n=je(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new pD,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=fg(h,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&mg(n)}async function mw(i,e){const n=je(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yD(i,e){const n=je(i);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const p of h.Sa)p.Fa(o)&&(r=!0);h.wa=o}}r&&mg(n)}function vD(i,e,n){const r=je(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function mg(i){i.Ca.forEach((e=>{e.next()}))}var _p,Cx;(Cx=_p||(_p={})).Ma="default",Cx.Cache="cache";class pw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class _D{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=jE(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ax,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,E)=>{const T=o.get(x),O=vd(this.query,E)?E:null,P=!!T&&this.mutatedKeys.has(T.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;T&&O?T.data.isEqual(O.data)?P!==z&&(r.track({type:3,doc:O}),U=!0):this.su(T,O)||(r.track({type:2,doc:O}),U=!0,(y&&this.eu(O,y)>0||g&&this.eu(O,g)<0)&&(p=!0)):!T&&O?(r.track({type:0,doc:O}),U=!0):T&&!O&&(r.track({type:1,doc:T}),U=!0,(y||g)&&(p=!0)),U&&(O?(h=h.add(O),c=z?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{tu:h,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((x,E)=>(function(O,P){const z=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:U})}};return z(O)-z(P)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,g=y!==this.Za;return this.Za=y,h.length!==0||g?{snapshot:new Ko(this.query,e.tu,c,h,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ax,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new yw(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new gw(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class xD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bD{constructor(e){this.key=e,this.hu=!1}}class ED{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Oa((p=>DE(p)),yd),this.Iu=new Map,this.Eu=new Set,this.du=new wt(Ee.comparator),this.Au=new Map,this.Ru=new sg,this.Vu={},this.mu=new Map,this.fu=Qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wD(i,e,n=!0){const r=ww(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await vw(r,e,n,!0),o}async function TD(i,e){const n=ww(i);await vw(n,e,!0,!1)}async function vw(i,e,n,r){const o=await FI(i.localStore,si(e)),c=o.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await SD(i,e,c,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&ow(i.remoteStore,o),p}async function SD(i,e,n,r,o){i.pu=(E,T,O)=>(async function(z,U,$,ie){let J=U.view.ru($);J.Cs&&(J=await xx(z.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,J))));const fe=ie&&ie.targetChanges.get(U.targetId),ae=ie&&ie.targetMismatches.get(U.targetId)!=null,he=U.view.applyChanges(J,z.isPrimaryClient,fe,ae);return Ix(z,U.targetId,he.au),he.snapshot})(i,E,T,O);const c=await xx(i.localStore,e,!0),h=new _D(e,c.Qs),p=h.ru(c.documents),y=Bc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),g=h.applyChanges(p,i.isPrimaryClient,y);Ix(i,n,g.au);const x=new xD(e,n,h);return i.Tu.set(e,x),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function AD(i,e,n){const r=je(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!yd(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await yp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&lg(r.remoteStore,o.targetId),xp(r,o.targetId)})).catch(el)):(xp(r,o.targetId),await yp(r.localStore,o.targetId,!0))}async function ND(i,e){const n=je(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lg(n.remoteStore,r.targetId))}async function CD(i,e,n){const r=VD(i);try{const o=await(function(h,p){const y=je(h),g=pt.now(),x=p.reduce(((O,P)=>O.add(P.key)),Ge());let E,T;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let P=Pi(),z=Ge();return y.Ns.getEntries(O,x).next((U=>{P=U,P.forEach((($,ie)=>{ie.isValidDocument()||(z=z.add($))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,P))).next((U=>{E=U;const $=[];for(const ie of p){const J=GR(ie,E.get(ie.key).overlayedDocument);J!=null&&$.push(new Gr(ie.key,J,TE(J.value.mapValue),Gt.exists(!0)))}return y.mutationQueue.addMutationBatch(O,g,$,p)})).next((U=>{T=U;const $=U.applyToLocalDocumentSet(E,z);return y.documentOverlayCache.saveOverlays(O,U.batchId,$)}))})).then((()=>({batchId:T.batchId,changes:ME(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,p,y){let g=h.Vu[h.currentUser.toKey()];g||(g=new wt(Fe)),g=g.insert(p,y),h.Vu[h.currentUser.toKey()]=g})(r,o.batchId,n),await Hc(r,o.changes),await Td(r.remoteStore)}catch(o){const c=fg(o,"Failed to persist write");n.reject(c)}}async function _w(i,e){const n=je(i);try{const r=await BI(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ye(h.hu,14607):o.removedDocuments.size>0&&(Ye(h.hu,42227),h.hu=!1))})),await Hc(n,r,e)}catch(r){await el(r)}}function Rx(i,e,n){const r=je(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const y=je(h);y.onlineState=p;let g=!1;y.queries.forEach(((x,E)=>{for(const T of E.Sa)T.va(p)&&(g=!0)})),g&&mg(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RD(i,e,n){const r=je(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new wt(Ee.comparator);h=h.insert(c,en.newNoDocument(c,Re.min()));const p=Ge().add(c),y=new bd(Re.min(),new Map,new wt(Fe),h,p);await _w(r,y),r.du=r.du.remove(c),r.Au.delete(e),gg(r)}else await yp(r.localStore,e,!1).then((()=>xp(r,e,n))).catch(el)}async function ID(i,e){const n=je(i),r=e.batch.batchId;try{const o=await zI(n.localStore,e);bw(n,r,null),xw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hc(n,o)}catch(o){await el(o)}}async function DD(i,e,n){const r=je(i);try{const o=await(function(h,p){const y=je(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let x;return y.mutationQueue.lookupMutationBatch(g,p).next((E=>(Ye(E!==null,37113),x=E.keys(),y.mutationQueue.removeMutationBatch(g,E)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,x,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,x))).next((()=>y.localDocuments.getDocuments(g,x)))}))})(r.localStore,e);bw(r,e,n),xw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hc(r,o)}catch(o){await el(o)}}function xw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function bw(i,e,n){const r=je(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function xp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||Ew(i,r)}))}function Ew(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(lg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),gg(i))}function Ix(i,e,n){for(const r of n)r instanceof gw?(i.Ru.addReference(r.key,e),jD(i,r)):r instanceof yw?(me(pg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||Ew(i,r.key)):Se(19791,{wu:r})}function jD(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(me(pg,"New document in limbo: "+n),i.Eu.add(r),gg(i))}function gg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ee(it.fromString(e)),r=i.fu.next();i.Au.set(r,new bD(n)),i.du=i.du.insert(n,r),ow(i.remoteStore,new Nr(si(Wp(n.path)),r,"TargetPurposeLimboResolution",md.ce))}}async function Hc(i,e,n){const r=je(i),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{h.push(r.pu(y,e,n).then((g=>{var x;if((g||n)&&r.isPrimaryClient){const E=g?!g.fromCache:(x=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:x.current;r.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(g){o.push(g);const E=rg.As(y.targetId,g);c.push(E)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(y,g){const x=je(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(g,(T=>se.forEach(T.Es,(O=>x.persistence.referenceDelegate.addReference(E,T.targetId,O))).next((()=>se.forEach(T.ds,(O=>x.persistence.referenceDelegate.removeReference(E,T.targetId,O)))))))))}catch(E){if(!tl(E))throw E;me(ag,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const O=x.Ms.get(T),P=O.snapshotVersion,z=O.withLastLimboFreeSnapshotVersion(P);x.Ms=x.Ms.insert(T,z)}}})(r.localStore,c))}async function OD(i,e){const n=je(i);if(!n.currentUser.isEqual(e)){me(pg,"User change. New user:",e.toKey());const r=await iw(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new ce(X.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hc(n,r.Ls)}}function MD(i,e){const n=je(i),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let o=Ge();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function ww(i){const e=je(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=_w.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RD.bind(null,e),e.Pu.H_=yD.bind(null,e.eventManager),e.Pu.yu=vD.bind(null,e.eventManager),e}function VD(i){const e=je(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DD.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UI(this.persistence,new kI,e.initialUser,this.serializer)}Cu(e){return new sw(ig.mi,this.serializer)}Du(e){return new QI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class kD extends id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof nd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new sw((r=>nd.mi(r,n)),this.serializer)}}class bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OD.bind(null,this.syncEngine),await mD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gD})()}createDatastore(e){const n=Ed(e.databaseInfo.databaseId),r=(function(c){return new WI(c)})(e.databaseInfo);return(function(c,h,p,y){return new tD(c,h,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,p){return new sD(r,o,c,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Rx(this.syncEngine,n,0)),(function(){return wx.v()?new wx:new KI})())}createSyncEngine(e,n){return(function(o,c,h,p,y,g,x){const E=new ED(o,c,h,p,y,g);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=je(o);me(Ra,"RemoteStore shutting down."),c.Ea.add(5),await qc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ce(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const h=je(o),p={documents:c.map((E=>td(h.serializer,E)))},y=await h.Ho("BatchGetDocuments",h.serializer.databaseId,it.emptyPath(),p,c.length),g=new Map;y.forEach((E=>{const T=iI(h.serializer,E);g.set(T.key.toString(),T)}));const x=[];return c.forEach((E=>{const T=g.get(E.toString());Ye(!!T,55234,{key:E}),x.push(T)})),x})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const o=Ee.fromPath(r);this.mutations.push(new HE(o,this.precondition(o)))})),await(async function(r,o){const c=je(r),h={writes:o.map((p=>JE(c.serializer,p)))};await c.Go("Commit",c.serializer.databaseId,it.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Se(50498,{Gu:e.constructor.name});n=Re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ce(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Re.min())?Gt.exists(!1):Gt.updateTime(n):Gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new ce(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(n)}return Gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,o,c){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new og(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new LD(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Pc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!FE(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class UD{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=pn.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{me(zr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(me(zr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Km(i,e){i.asyncQueue.verifyOperationInProgress(),me(zr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await iw(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Dx(i,e){i.asyncQueue.verifyOperationInProgress();const n=await zD(i);me(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>Sx(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Sx(e.remoteStore,o))),i._onlineComponents=e}async function zD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(zr,"Using user provided OfflineComponentProvider");try{await Km(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await Km(i,new id)}}else me(zr,"Using default OfflineComponentProvider"),await Km(i,new kD(void 0));return i._offlineComponents}async function yg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(zr,"Using user provided OnlineComponentProvider"),await Dx(i,i._uninitializedComponentsProvider._online)):(me(zr,"Using default OnlineComponentProvider"),await Dx(i,new bp))),i._onlineComponents}function BD(i){return yg(i).then((e=>e.syncEngine))}function qD(i){return yg(i).then((e=>e.datastore))}async function Sw(i){const e=await yg(i),n=e.eventManager;return n.onListen=wD.bind(null,e.syncEngine),n.onUnlisten=AD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ND.bind(null,e.syncEngine),n}function HD(i,e,n={}){const r=new ni;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,y,g){const x=new Tw({next:T=>{x.Nu(),h.enqueueAndForget((()=>mw(c,E)));const O=T.docs.has(p);!O&&T.fromCache?g.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&y&&y.source==="server"?g.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new pw(Wp(p.path),x,{includeMetadataChanges:!0,qa:!0});return fw(c,E)})(await Sw(i),i.asyncQueue,e,n,r))),r.promise}function FD(i,e,n={}){const r=new ni;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,y,g){const x=new Tw({next:T=>{x.Nu(),h.enqueueAndForget((()=>mw(c,E))),T.fromCache&&y.source==="server"?g.reject(new ce(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new pw(p,x,{includeMetadataChanges:!0,qa:!0});return fw(c,E)})(await Sw(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firestore.googleapis.com",Ox=!0;class Mx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nw,this.ssl=Ox}else this.host=e.host,this.ssl=e.ssl??Ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_I)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Aw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sd{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new YC;switch(r.type){case"firstParty":return new JC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=jx.get(n);r&&(me("ComponentProvider","Removing Datastore"),jx.delete(n),r.terminate())})(this),Promise.resolve()}}function GD(i,e,n,r={}){var g;i=Yn(i,Sd);const o=Xo(e),c=i._getSettings(),h={...c,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(gb(`https://${p}`),yb("Firestore",!0)),c.host!==Nw&&c.host!==p&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:o,emulatorOptions:r};if(!Sa(y,h)&&(i._setSettings(y),r.mockUserToken)){let x,E;if(typeof r.mockUserToken=="string")x=r.mockUserToken,E=pn.MOCK_USER;else{x=iA(r.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ce(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new pn(T)}i._authCredentials=new $C(new dE(x,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Lc(n,Nt._jsonSchema))return new Nt(e,r||null,new Ee(it.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Qt("string",Nt._jsonSchemaVersion),referencePath:Qt("string")};class Or extends Bi{constructor(e,n,r){super(e,n,Wp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ee(e))}withConverter(e){return new Or(this.firestore,e,this._path)}}function Jt(i,e,...n){if(i=Ct(i),fE("collection","path",e),i instanceof Sd){const r=it.fromString(e,...n);return Y_(r),new Or(i,null,r)}{if(!(i instanceof Nt||i instanceof Or))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(it.fromString(e,...n));return Y_(r),new Or(i.firestore,null,r)}}function mn(i,e,...n){if(i=Ct(i),arguments.length===1&&(e=Qp.newId()),fE("doc","path",e),i instanceof Sd){const r=it.fromString(e,...n);return K_(r),new Nt(i,null,new Ee(r))}{if(!(i instanceof Nt||i instanceof Or))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(it.fromString(e,...n));return K_(r),new Nt(i.firestore,i instanceof Or?i.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="AsyncQueue";class kx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new og(this,"async_queue_retry"),this._c=()=>{const r=Qm();r&&me(Vx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ni;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;me(Vx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Li("INTERNAL UNHANDLED ERROR: ",Lx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=dg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:Lx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Lx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class qi extends Sd{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new kx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kx(e),this._firestoreClient=void 0,await e}}}function QD(i,e){const n=typeof i=="object"?i:bb(),r=typeof i=="string"?i:Yh,o=Mp(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=nA("firestore");c&&GD(o,...c)}return o}function Fc(i){if(i._terminated)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||KD(i),i._firestoreClient}function KD(i){var r,o,c;const e=i._freezeSettings(),n=(function(p,y,g,x){return new gR(p,y,g,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Aw(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new UD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(hn.fromBase64String(e))}catch(n){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Qt("string",Fn._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function YD(){return new Va(lp)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(Lc(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:Qt("string",ii._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lc(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ri(e.vectorValues);throw new ce(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:Qt("string",ri._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=/^__.*__$/;class XD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uc(e,this.data,n,this.fieldTransforms)}}class Cw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:i})}}class _g{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&$D.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ed(e)}Cc(e,n,r,o=!1){return new _g({Ac:e,methodName:n,Dc:r,path:un.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ka(i){const e=i._freezeSettings(),n=Ed(i._databaseId);return new WD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Ad(i,e,n,r,o,c={}){const h=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Eg("Data must be an object, but it was:",h,r);const p=Dw(r,h);let y,g;if(c.merge)y=new Gn(h.fieldMask),g=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const E of c.mergeFields){const T=Ep(e,E,n);if(!h.contains(T))throw new ce(X.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Ow(x,T)||x.push(T)}y=new Gn(x),g=h.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,g=h.fieldTransforms;return new XD(new bn(p),y,g)}class Nd extends vg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}function xg(i,e,n,r){const o=i.Cc(1,e,n);Eg("Data must be an object, but it was:",o,r);const c=[],h=bn.empty();Fr(r,((y,g)=>{const x=wg(e,y,n);g=Ct(g);const E=o.yc(x);if(g instanceof Nd)c.push(x);else{const T=Gc(g,E);T!=null&&(c.push(x),h.set(x,T))}}));const p=new Gn(c);return new Cw(h,p,o.fieldTransforms)}function bg(i,e,n,r,o,c){const h=i.Cc(1,e,n),p=[Ep(e,r,n)],y=[o];if(c.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(Ep(e,c[T])),y.push(c[T+1]);const g=[],x=bn.empty();for(let T=p.length-1;T>=0;--T)if(!Ow(g,p[T])){const O=p[T];let P=y[T];P=Ct(P);const z=h.yc(O);if(P instanceof Nd)g.push(O);else{const U=Gc(P,z);U!=null&&(g.push(O),x.set(O,U))}}const E=new Gn(g);return new Cw(x,E,h.fieldTransforms)}function Iw(i,e,n,r=!1){return Gc(n,i.Cc(r?4:3,e))}function Gc(i,e){if(jw(i=Ct(i)))return Eg("Unsupported field value:",e,i),Dw(i,e);if(i instanceof vg)return(function(r,o){if(!Rw(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const p of r){let y=Gc(p,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),h++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=pt.fromDate(r);return{timestampValue:ed(o.serializer,c)}}if(r instanceof pt){const c=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ed(o.serializer,c)}}if(r instanceof ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:YE(o.serializer,r._byteString)};if(r instanceof Nt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ng(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ri)return(function(h,p){return{mapValue:{fields:{[EE]:{stringValue:wE},[$h]:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Zp(p.serializer,g)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${fd(r)}`)})(i,e)}function Dw(i,e){const n={};return gE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(i,((r,o)=>{const c=Gc(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function jw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof ii||i instanceof Fn||i instanceof Nt||i instanceof vg||i instanceof ri)}function Eg(i,e,n){if(!jw(n)||!mE(n)){const r=fd(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Ep(i,e,n){if((e=Ct(e))instanceof Va)return e._internalPath;if(typeof e=="string")return wg(i,e);throw rd("Field path arguments must be of type string or ",i,!1,void 0,n)}const JD=new RegExp("[~\\*/\\[\\]]");function wg(i,e,n){if(e.search(JD)>=0)throw rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Va(...e.split("."))._internalPath}catch{throw rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function rd(i,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${r}`),h&&(y+=` in document ${o}`),y+=")"),new ce(X.INVALID_ARGUMENT,p+i+y)}function Ow(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZD extends Cc{data(){return super.data()}}function Cd(i,e){return typeof e=="string"?wg(i,e):e instanceof Va?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class Rd extends Tg{}function Hn(i,e,...n){let r=[];e instanceof Tg&&r.push(e),r=r.concat(n),(function(c){const h=c.filter((y=>y instanceof Sg)).length,p=c.filter((y=>y instanceof Id)).length;if(h>1||h>0&&p>0)throw new ce(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Id extends Rd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Id(e,n,r)}_apply(e){const n=this._parse(e);return Mw(e._query,n),new Bi(e.firestore,e.converter,fp(e._query,n))}_parse(e){const n=ka(e.firestore);return(function(c,h,p,y,g,x,E){let T;if(g.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ce(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){qx(E,x);const P=[];for(const z of E)P.push(Bx(y,c,z));T={arrayValue:{values:P}}}else T=Bx(y,c,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||qx(E,x),T=Iw(p,h,E,x==="in"||x==="not-in");return Ft.create(g,x,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qt(i,e,n){const r=e,o=Cd("where",i);return Id._create(o,r,n)}class Sg extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Cs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const p=c.getFlattenedFilters();for(const y of p)Mw(h,y),h=fp(h,y)})(e._query,n),new Bi(e.firestore,e.converter,fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends Rd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ag(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(c,h)})(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new ja(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Px(i,e="asc"){const n=e,r=Cd("orderBy",i);return Ag._create(r,n)}class Ng extends Rd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ng(e,n,r)}_apply(e){return new Bi(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function Ux(i){return rR("limit",i),Ng._create("limit",i,"F")}class Cg extends Rd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cg(e,n,r)}_apply(e){const n=t4(e,this.type,this._docOrFields,this._inclusive);return new Bi(e.firestore,e.converter,(function(o,c){return new ja(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)})(e._query,n))}}function zx(...i){return Cg._create("startAfter",i,!1)}function t4(i,e,n,r){if(n[0]=Ct(n[0]),n[0]instanceof Cc)return(function(c,h,p,y,g){if(!y)throw new ce(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const x=[];for(const E of ko(c))if(E.field.isKeyField())x.push(Xh(h,y.key));else{const T=y.data.field(E.field);if(pd(T))throw new ce(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const O=E.field.canonicalString();throw new ce(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}x.push(T)}return new Go(x,g)})(i._query,i.firestore._databaseId,e,n[0]._document,r);{const o=ka(i.firestore);return(function(h,p,y,g,x,E){const T=h.explicitOrderBy;if(x.length>T.length)throw new ce(X.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let P=0;P<x.length;P++){const z=x[P];if(T[P].field.isKeyField()){if(typeof z!="string")throw new ce(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof z}`);if(!Jp(h)&&z.indexOf("/")!==-1)throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${z}' contains a slash.`);const U=h.path.child(it.fromString(z));if(!Ee.isDocumentKey(U))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const $=new Ee(U);O.push(Xh(p,$))}else{const U=Iw(y,g,z);O.push(U)}}return new Go(O,E)})(i._query,i.firestore._databaseId,o,e,n,r)}}function Bx(i,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new ce(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jp(e)&&n.indexOf("/")!==-1)throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!Ee.isDocumentKey(r))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xh(i,new Ee(r))}if(n instanceof Nt)return Xh(i,n._key);throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(n)}.`)}function qx(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mw(i,e){const n=(function(o,c){for(const h of o)for(const p of h.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Vw{convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,o,c;const n=(c=(o=(r=e.fields)==null?void 0:r[$h].arrayValue)==null?void 0:o.values)==null?void 0:c.map((h=>Ot(h.doubleValue)));return new ri(n)}convertGeoPoint(e){return new ii(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const n=kr(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ye(tw(r),9688,{name:e});const o=new wc(r.get(1),r.get(3)),c=new Ee(r.popFirst(5));return o.isEqual(n)||Li(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class n4 extends Vw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}class jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mr extends Cc{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:Qt("string",Mr._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Lh extends Mr{data(e={}){return super.data(e)}}class Po{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new jo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Lh(this._firestore,this._userDataWriter,r.key,r,new jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const y=new Lh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new jo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Lh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new jo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,x=-1;return p.type!==0&&(g=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),x=h.indexOf(p.doc.key)),{type:s4(p.type),doc:y,oldIndex:g,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function s4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(i){i=Yn(i,Nt);const e=Yn(i.firestore,qi);return HD(Fc(e),i._key).then((n=>r4(e,i,n)))}Po._jsonSchemaVersion="firestore/querySnapshot/1.0",Po._jsonSchema={type:Qt("string",Po._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Rg extends Vw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function In(i){i=Yn(i,Bi);const e=Yn(i.firestore,qi),n=Fc(e),r=new Rg(e);return e4(i._query),FD(n,i._query).then((o=>new Po(e,r,i,o)))}function i4(i,e,n){i=Yn(i,Nt);const r=Yn(i.firestore,qi),o=Dd(i.converter,e,n);return Qc(r,[Ad(ka(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Gt.none())])}function Th(i,e,n,...r){i=Yn(i,Nt);const o=Yn(i.firestore,qi),c=ka(o);let h;return h=typeof(e=Ct(e))=="string"||e instanceof Va?bg(c,"updateDoc",i._key,e,n,r):xg(c,"updateDoc",i._key,e),Qc(o,[h.toMutation(i._key,Gt.exists(!0))])}function Fx(i){return Qc(Yn(i.firestore,qi),[new zc(i._key,Gt.none())])}function Ym(i,e){const n=Yn(i.firestore,qi),r=mn(i),o=Dd(i.converter,e);return Qc(n,[Ad(ka(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then((()=>r))}function Qc(i,e){return(function(r,o){const c=new ni;return r.asyncQueue.enqueueAndForget((async()=>CD(await BD(r),o,c))),c.promise})(Fc(i),e)}function r4(i,e,n){const r=n.docs.get(e._key),o=new Rg(i);return new Mr(i,o,e._key,r,new jo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ka(e)}set(e,n,r){this._verifyNotCommitted();const o=Cr(e,this._firestore),c=Dd(o.converter,n,r),h=Ad(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,Gt.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const c=Cr(e,this._firestore);let h;return h=typeof(n=Ct(n))=="string"||n instanceof Va?bg(this._dataReader,"WriteBatch.update",c._key,n,r,o):xg(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(h.toMutation(c._key,Gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Cr(e,this._firestore);return this._mutations=this._mutations.concat(new zc(n._key,Gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cr(i,e){if((i=Ct(i)).firestore!==e)throw new ce(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ka(e)}get(e){const n=Cr(e,this._firestore),r=new n4(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Se(24041);const c=o[0];if(c.isFoundDocument())return new Cc(this._firestore,r,c.key,c,n.converter);if(c.isNoDocument())return new Cc(this._firestore,r,n._key,null,n.converter);throw Se(18433,{doc:c})}))}set(e,n,r){const o=Cr(e,this._firestore),c=Dd(o.converter,n,r),h=Ad(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(e,n,r,...o){const c=Cr(e,this._firestore);let h;return h=typeof(n=Ct(n))=="string"||n instanceof Va?bg(this._dataReader,"Transaction.update",c._key,n,r,o):xg(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,h),this}delete(e){const n=Cr(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4 extends l4{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Cr(e,this._firestore),r=new Rg(this._firestore);return super.get(e).then((o=>new Mr(this._firestore,r,n._key,o._document,new jo(!1,!1),n.converter)))}}function Gx(i,e,n){i=Yn(i,qi);const r={...a4,...n};return(function(c){if(c.maxAttempts<1)throw new ce(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,h,p){const y=new ni;return c.asyncQueue.enqueueAndForget((async()=>{const g=await qD(c);new PD(c.asyncQueue,g,p,h,y).ju()})),y.promise})(Fc(i),(o=>e(new c4(i,o))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(i){return Fc(i=Yn(i,qi)),new o4(i,(e=>Qc(i,e)))}(function(e,n=!0){(function(o){Zo=o})(Wo),Uo(new Aa("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new qi(new XC(r.getProvider("auth-internal")),new ZC(h,r.getProvider("app-check-internal")),(function(g,x){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(g.options.projectId,x)})(h,o),h);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Dr(F_,G_,e),Dr(F_,G_,"esm2020")})();const Kx=Dp.firebase;let $m,As,ve;try{Dp.useFirebase&&Kx.apiKey!=="SUA_API_KEY_AQUI"?($m=xb(Kx),As=QC($m),ve=QD($m)):console.log("Firebase keys not configured or Mock mode active. Skipping Firebase Init.")}catch(i){console.error("Error initializing Firebase:",i)}class u4{constructor(){this.mapDocToEvent=e=>({id:e.id,...e.data()}),this.mapAuthError=e=>({"auth/invalid-credential":"Email ou senha incorretos.","auth/user-not-found":"Email ou senha incorretos.","auth/wrong-password":"Email ou senha incorretos.","auth/invalid-email":"O formato do email  invlido.","auth/user-disabled":"Esta conta foi desativada.","auth/email-already-in-use":"Email j cadastrado.","auth/too-many-requests":"Muitas tentativas. Tente novamente mais tarde.","auth/network-request-failed":"Erro de conexo.","auth/popup-closed-by-user":"Login cancelado.","auth/popup-blocked":"O navegador bloqueou a janela de login.","auth/operation-not-allowed":"Mtodo de login desabilitado.","auth/unauthorized-domain":"Domnio no autorizado.","permission-denied":"Permisso negada.",unavailable:"Servio indisponvel. Tente mais tarde."})[e]||`Erro inesperado (${e}).`}async login(e,n){if(!As)throw new Error("Servio de autenticao no inicializado.");if(!n)throw new Error("A senha  obrigatria.");try{const o=(await DN(As,e,n)).user;return this._fetchUserProfile(o)}catch(r){throw console.error("Erro no Login Firebase:",r),new Error(this.mapAuthError(r.code))}}async loginWithGoogle(){if(!As)throw new Error("Servio de autenticao no inicializado.");try{const e=new Ri;await aC(As,e)}catch(e){throw console.error("Erro ao iniciar Login com Google:",e),new Error(this.mapAuthError(e.code))}}async _fetchUserProfile(e){if(!ve)throw new Error("Banco de dados no inicializado.");const n=mn(ve,"users",e.uid);let r;try{r=await Hx(n)}catch(o){if(console.error("Erro ao acessar Firestore:",o),o.code==="permission-denied")return console.warn("Permisso negada ao ler perfil. Retornando dados bsicos."),{uid:e.uid,email:e.email||"",role:Et.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(r.exists()){const o=r.data();return{uid:e.uid,email:e.email||"",name:o.name||e.displayName,role:o.role||Et.USER,rm:o.rm,courseId:o.courseId,classId:o.classId,isOnboarded:o.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:Et.USER,isOnboarded:!1}}async logout(){As&&await VN(As)}onAuthStateChanged(e){return As?MN(As,async n=>{if(n)try{const r=await this._fetchUserProfile(n);e(r)}catch(r){console.error("Erro ao carregar perfil no listener:",r),e({uid:n.uid,email:n.email||"",role:Et.USER,isOnboarded:!1})}else e(null)}):()=>{}}async updateUserProfile(e,n){if(!ve)throw new Error("Banco de dados no inicializado.");if(n.rm)try{const c=Jt(ve,"users"),h=Hn(c,qt("rm","==",n.rm));if((await In(h)).docs.find(g=>g.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(c){if(c.code!=="permission-denied")throw c;console.warn("Pulei validao de RM nico devido a permisses.")}const r=mn(ve,"users",e),o={...n,updatedAt:new Date().toISOString()};n.name&&n.rm&&(o.isOnboarded=!0);try{await i4(r,o,{merge:!0})}catch(c){throw console.error("Erro ao atualizar perfil:",c),new Error("No foi possvel salvar seus dados. Verifique sua conexo.")}return{...n,uid:e,email:"",role:Et.USER,isOnboarded:!0}}async getUsers(e){if(!ve)return{data:[],nextCursor:void 0};const{limit:n,cursor:r,filters:o}=e,{searchTerm:c,role:h,courseId:p,classId:y}=o,g=[Px("email")];h&&g.push(qt("role","==",h)),p&&g.push(qt("courseId","==",p)),y&&g.push(qt("classId","==",y)),g.push(Ux(n)),r&&g.push(zx(r));try{const x=Hn(Jt(ve,"users"),...g),E=await In(x);let T=E.docs.map(P=>({uid:P.id,...P.data()}));c&&(T=T.filter(P=>{var z,U;return((z=P.name)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||P.email.toLowerCase().includes(c.toLowerCase())||((U=P.rm)==null?void 0:U.includes(c))}));const O=E.docs.length===n?E.docs[E.docs.length-1]:void 0;return{data:T,nextCursor:O}}catch(x){return console.error("Erro ao buscar usurios paginados:",x),x.code==="failed-precondition"&&alert("ndice do Firestore ausente. Verifique o console para o link de criao do ndice."),{data:[],nextCursor:void 0}}}async deleteUser(e){ve&&await Fx(mn(ve,"users",e))}async updateUserRole(e,n){if(!ve)return;const r=mn(ve,"users",e);await Th(r,{role:n})}async getCourses(){return ve?(await In(Jt(ve,"courses"))).docs.map(n=>({id:n.id,...n.data()})):[]}async addCourse(e){if(!ve)throw new Error("DB not init");return{id:(await Ym(Jt(ve,"courses"),{name:e})).id,name:e}}async updateCourse(e,n){ve&&await Th(mn(ve,"courses",e),{name:n})}async deleteCourse(e){if(!ve)return;const n=Qx(ve),r=mn(ve,"courses",e);n.delete(r);const o=Hn(Jt(ve,"classes"),qt("courseId","==",e));(await In(o)).forEach(h=>n.delete(h.ref)),await n.commit()}async getClasses(e){if(!ve)return[];let n=e?Hn(Jt(ve,"classes"),qt("courseId","==",e)):Jt(ve,"classes");return(await In(n)).docs.map(o=>({id:o.id,...o.data()}))}async addClass(e,n){if(!ve)throw new Error("DB not init");return{id:(await Ym(Jt(ve,"classes"),{courseId:e,name:n})).id,courseId:e,name:n}}async updateClass(e,n){ve&&await Th(mn(ve,"classes",e),{name:n})}async deleteClass(e){ve&&await Fx(mn(ve,"classes",e))}async getEvents(e){if(!ve)return{data:[],nextCursor:void 0};const{limit:n,cursor:r,filters:o}=e,{searchTerm:c,visibility:h,course:p}=o,y=await this.getClasses(),g=[Px("createdAt","desc")];h&&g.push(qt("visibility","==",h)),p&&h==="course"&&g.push(qt("allowedCourses","array-contains",p)),g.push(Ux(n)),r&&g.push(zx(r));try{const x=Hn(Jt(ve,"events"),...g),E=await In(x);let T=E.docs.map(P=>this.mapDocToEvent(P));c&&(T=T.filter(P=>P.name.toLowerCase().includes(c.toLowerCase())||P.description.toLowerCase().includes(c.toLowerCase()))),p&&h==="class"&&(T=T.filter(P=>{var z;return((z=P.allowedClasses)==null?void 0:z.some(U=>{const $=y.find(ie=>ie.id===U);return($==null?void 0:$.courseId)===p}))||!1}));const O=E.docs.length===n?E.docs[E.docs.length-1]:void 0;return{data:T,nextCursor:O}}catch(x){return console.error("Erro ao buscar eventos paginados:",x),x.code==="failed-precondition"&&alert("ndice do Firestore ausente. Verifique o console."),{data:[],nextCursor:void 0}}}async getEventById(e){if(!ve)return;const n=mn(ve,"events",e),r=await Hx(n);return r.exists()?this.mapDocToEvent(r):void 0}async getAvailableEventsForUser(e){if(!ve)return[];const n=[In(Hn(Jt(ve,"events"),qt("visibility","==","public")))];e.courseId&&n.push(In(Hn(Jt(ve,"events"),qt("visibility","==","course"),qt("allowedCourses","array-contains",e.courseId)))),e.classId&&n.push(In(Hn(Jt(ve,"events"),qt("visibility","==","class"),qt("allowedClasses","array-contains",e.classId))));const r=await Promise.all(n),o=new Map;return r.forEach(c=>c.forEach(h=>{o.has(h.id)||o.set(h.id,this.mapDocToEvent(h))})),Array.from(o.values())}async getPublicEvents(){if(!ve)return[];const e=Hn(Jt(ve,"events"),qt("visibility","==","public"));return(await In(e)).docs.map(r=>this.mapDocToEvent(r))}async createEvent(e){if(!ve)return;const{id:n,...r}=e,o=JSON.parse(JSON.stringify(r));await Ym(Jt(ve,"events"),o)}async updateEvent(e){if(!ve)return;const{id:n,...r}=e;await Th(mn(ve,"events",n),JSON.parse(JSON.stringify(r)))}async deleteEvent(e){if(!ve)return;const n=Qx(ve);n.delete(mn(ve,"events",e));const r=Hn(Jt(ve,"events"),qt("parentId","==",e));(await In(r)).forEach(c=>n.delete(c.ref)),await n.commit()}async getEnrollmentsForUser(e){if(!ve)return[];const n=Hn(Jt(ve,"enrollments"),qt("userId","==",e),qt("status","==",Ao.CONFIRMED));return(await In(n)).docs.map(o=>({id:o.id,...o.data()}))}async getUserEnrollmentsDetails(e){const n=await this.getEnrollmentsForUser(e),r=[];for(const o of n){const c=await this.getEventById(o.eventId);if(c){const h=c.sessions.find(p=>p.id===o.sessionId);h&&r.push({enrollmentId:o.id,eventName:c.name,eventLocation:c.location,sessionDate:h.date,sessionTime:`${h.startTime} - ${h.endTime}`,enrolledAt:o.enrolledAt})}}return r}async getEnrichedEnrollments(e){if(!ve)return[];const n=await this.getEventById(e);if(!n)return[];const r=Hn(Jt(ve,"enrollments"),qt("eventId","==",e),qt("status","==",Ao.CONFIRMED)),c=(await In(r)).docs.map(g=>({id:g.id,...g.data()}));if(c.length===0)return[];const h=[...new Set(c.map(g=>g.userId))],p=new Map,y=30;for(let g=0;g<h.length;g+=y){const x=h.slice(g,g+y),E=Hn(Jt(ve,"users"),qt(YD(),"in",x));(await In(E)).forEach(O=>p.set(O.id,{uid:O.id,...O.data()}))}return c.map(g=>{const x=p.get(g.userId)||{},E=n.sessions.find(T=>T.id===g.sessionId);return{id:g.id,user:{uid:g.userId,name:x.name||"Desconhecido",email:x.email||"",rm:x.rm||""},session:{id:E==null?void 0:E.id,date:E==null?void 0:E.date,startTime:E==null?void 0:E.startTime,endTime:E==null?void 0:E.endTime},status:g.status,enrolledAt:g.enrolledAt}})}async getEnrollmentDetailsForEvent(e){return(await this.getEnrichedEnrollments(e)).map(r=>({Nome:r.user.name,Email:r.user.email,RM:r.user.rm,SessaoData:r.session.date,SessaoHora:r.session.startTime,Status:r.status,DataInscricao:new Date(r.enrolledAt).toLocaleString("pt-BR")}))}async createEnrollment(e,n,r){if(!ve)throw new Error("Banco de dados no inicializado.");const[o,c]=await Promise.all([this.getEnrollmentsForUser(e),this.getEventById(n)]);if(!c)throw new Error("Evento no encontrado.");const h=c.sessions.find(T=>T.id===r);if(!h)throw new Error("Sesso no encontrada.");const p=yh(h.startTime),y=yh(h.endTime);for(const T of o){if(T.eventId===n)throw new Error("Voc j est inscrito neste evento.");const O=await this.getEventById(T.eventId);if(!O)continue;const P=O.sessions.find(z=>z.id===T.sessionId);if((P==null?void 0:P.date)===h.date){const z=yh(P.startTime),U=yh(P.endTime);if(p<U&&z<y)throw new Error(`CONFLICT|${O.name}|${P.startTime}|${P.endTime}`)}}const g=`${e}_${n}`,x=mn(ve,"enrollments",g),E=mn(ve,"events",n);return await Gx(ve,async T=>{const[O,P]=await Promise.all([T.get(x),T.get(E)]);if(O.exists()&&O.data().status===Ao.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");if(!P.exists())throw new Error("Evento no existe mais.");const z=P.data(),U=z.sessions.findIndex(ie=>ie.id===r);if(U===-1)throw new Error("Sesso invlida.");if(z.sessions[U].filled>=z.sessions[U].capacity)throw new Error("Esta sesso atingiu a capacidade mxima.");const $=[...z.sessions];$[U]={...$[U],filled:$[U].filled+1},T.update(E,{sessions:$}),T.set(x,{userId:e,eventId:n,sessionId:r,status:Ao.CONFIRMED,enrolledAt:new Date().toISOString()})}),{id:g,userId:e,eventId:n,sessionId:r,status:Ao.CONFIRMED,enrolledAt:new Date().toISOString()}}async cancelEnrollment(e){if(!ve)return;const n=mn(ve,"enrollments",e);await Gx(ve,async r=>{const o=await r.get(n);if(!o.exists())return;const{eventId:c,sessionId:h}=o.data(),p=mn(ve,"events",c),y=await r.get(p);if(y.exists()){const g=y.data(),x=g.sessions.findIndex(E=>E.id===h);if(x!==-1&&g.sessions[x].filled>0){const E=[...g.sessions];E[x]={...E[x],filled:E[x].filled-1},r.update(p,{sessions:E})}}r.delete(n)})}async resetAndSeedData(){alert("A funo de RESET est desabilitada no modo Firebase por segurana.")}}const h4=()=>new u4,De=h4(),kw=D.createContext(void 0),d4=({children:i})=>{const[e,n]=D.useState(null),[r,o]=D.useState(!0);D.useEffect(()=>{const y=De.onAuthStateChanged(g=>{n(g),o(!1)});return As&&lC(As).catch(g=>{console.error("Error checking for redirect result:",g)}),()=>y()},[]);const c=async(y,g)=>{o(!0);try{await De.login(y,g)}catch(x){throw console.error(x),o(!1),x}},h=async()=>{o(!0);try{await De.loginWithGoogle()}catch(y){throw console.error(y),o(!1),y}},p=async()=>{o(!0),await De.logout()};return f.jsx(kw.Provider,{value:{user:e,loading:r,login:c,loginWithGoogle:h,logout:p},children:i})},Hi=()=>{const i=D.useContext(kw);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},wr=({children:i})=>{const{user:e,logout:n}=Hi(),r=Br(),o=Ui(),[c,h]=D.useState(!1),p=async()=>{await n(),r("/")},y=x=>o.pathname===x?"bg-indigo-50 border-primary text-primary":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700",g=x=>o.pathname===x?"border-primary text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700";return e?f.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[f.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsx(mt,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight",children:"EduEvent"})}),f.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[f.jsx(mt,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/dashboard")}`,children:"Eventos"}),f.jsx(mt,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===Et.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx(mt,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/admin/events")}`,children:"Admin Eventos"}),f.jsx(mt,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/admin/courses")}`,children:"Admin Cursos"}),f.jsx(mt,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/admin/users")}`,children:"Admin Usurios"}),f.jsx(mt,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 ${g("/admin/dev")}`,children:"Desenvolvimento"})]})]})]}),f.jsx("div",{className:"hidden sm:flex items-center",children:f.jsxs("div",{className:"flex-shrink-0",children:[f.jsxs("span",{className:"text-sm text-gray-500 mr-4",children:["Ol, ",e.name||e.email]}),f.jsx("button",{onClick:p,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none",children:"Sair"})]})}),f.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:f.jsxs("button",{onClick:()=>h(!c),type:"button",className:"bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[f.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),c?f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),c&&f.jsxs("div",{className:"sm:hidden border-t border-gray-200",id:"mobile-menu",children:[f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsx(mt,{to:"/dashboard",onClick:()=>h(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/dashboard")}`,children:"Eventos"}),f.jsx(mt,{to:"/my-enrollments",onClick:()=>h(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===Et.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"pt-4 pb-2",children:f.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),f.jsx(mt,{to:"/admin/events",onClick:()=>h(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/admin/events")}`,children:"Gerenciar Eventos"}),f.jsx(mt,{to:"/admin/courses",onClick:()=>h(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/admin/courses")}`,children:"Gerenciar Cursos"}),f.jsx(mt,{to:"/admin/users",onClick:()=>h(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/admin/users")}`,children:"Gerenciar Usurios"}),f.jsx(mt,{to:"/admin/dev",onClick:()=>h(!1),className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300",children:"Desenvolvimento"})]})]}),f.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200",children:[f.jsxs("div",{className:"flex items-center px-4",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("div",{className:"text-base font-medium text-gray-800",children:e.name||"Usurio"}),f.jsx("div",{className:"text-sm font-medium text-gray-500",children:e.email})]})]}),f.jsx("div",{className:"mt-3 space-y-1",children:f.jsx("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",children:"Sair do Sistema"})})]})]})]}),f.jsx("main",{className:"flex-1 py-6",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})]}):f.jsx(f.Fragment,{children:i})},f4=()=>{const[i,e]=D.useState(""),[n,r]=D.useState(""),{user:o,loading:c,login:h,loginWithGoogle:p}=Hi(),y=Br(),[g,x]=D.useState(""),[E,T]=D.useState(!1);D.useEffect(()=>{!c&&o&&y("/dashboard")},[o,c,y]);const O=async z=>{z.preventDefault(),x(""),T(!0);try{await h(i,n)}catch(U){console.error(U),x(U.message||"Falha no login. Verifique suas credenciais.")}finally{T(!1)}},P=async()=>{x(""),T(!0);try{await p()}catch(z){x(z.message||"Erro ao autenticar com Google"),T(!1)}};return c||!c&&o?f.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:"Verificando sesso..."}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[f.jsx("div",{className:"flex justify-start",children:f.jsxs(mt,{to:"/",className:"flex items-center text-sm text-gray-500 hover:text-primary transition-colors font-medium",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-4xl font-bold text-primary",children:"EduEvent"}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Entre na sua conta"}),f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Utilize suas credenciais ou entre com o Google."})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:O,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Endereo de email"}),f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Endereo de email",value:i,onChange:z=>e(z.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:Dp.useFirebase,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Sua senha",value:n,onChange:z=>r(z.target.value)})]})]}),g&&f.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded border border-red-200",children:g}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:E,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70",children:E?"Entrando...":"Entrar"})}),f.jsxs("div",{className:"relative my-4",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-300"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Ou continue com"})})]}),f.jsxs("button",{type:"button",onClick:P,disabled:E,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70",children:[f.jsxs("svg",{className:"h-5 w-5 mr-2","aria-hidden":"true",viewBox:"0 0 24 24",children:[f.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),f.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),f.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),f.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Entrar com Google"]})]}),!1]})})},m4=()=>{const{user:i,refreshProfile:e}=Hi(),n=Br(),[r,o]=D.useState([]),[c,h]=D.useState([]),[p,y]=D.useState(null),[g,x]=D.useState({name:"",rm:"",courseId:"",classId:""});D.useEffect(()=>{if(i!=null&&i.isOnboarded){n("/dashboard");return}De.getCourses().then(o)},[i,n]),D.useEffect(()=>{g.courseId&&(De.getClasses(g.courseId).then(h),x(T=>({...T,classId:""})))},[g.courseId]);const E=async T=>{if(T.preventDefault(),!!i){y(null);try{await De.updateUserProfile(i.uid,g),await e(),n("/dashboard")}catch(O){y(O.message||"Erro ao atualizar perfil")}}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Complete seu perfil"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Precisamos de mais alguns detalhes antes de comear."})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nome Completo"}),f.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Nome Completo",value:g.name,onChange:T=>x({...g,name:T.target.value})})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"rm",className:"sr-only",children:"Registro de Matrcula (RM)"}),f.jsx("input",{id:"rm",name:"rm",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"RM (ex: 12345)",value:g.rm,onChange:T=>x({...g,rm:T.target.value})})]}),f.jsx("div",{className:"mb-4",children:f.jsxs("select",{required:!0,className:"block w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:g.courseId,onChange:T=>x({...g,courseId:T.target.value}),children:[f.jsx("option",{value:"",children:"Selecione o Curso"}),r.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})}),f.jsx("div",{className:"mb-4",children:f.jsxs("select",{required:!0,disabled:!g.courseId,className:"block w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100",value:g.classId,onChange:T=>x({...g,classId:T.target.value}),children:[f.jsx("option",{value:"",children:"Selecione a Turma"}),c.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})})]}),p&&f.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 p-3 rounded text-center font-medium",children:p}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Concluir Cadastro"})})]})]})})},us=({isOpen:i,onClose:e,title:n,children:r})=>i?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:f.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e}),f.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:[f.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:n}),f.jsx("div",{className:"mt-2",children:r})]})})}),f.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:f.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:e,children:"Fechar"})})]})]})}):null,p4=({currentPage:i,totalItems:e,itemsPerPage:n,onPageChange:r})=>{const o=Math.ceil(e/n);if(o<=1)return null;const c=()=>{const h=[];if(o<=7)for(let p=1;p<=o;p++)h.push(p);else i<=4?h.push(1,2,3,4,5,"...",o):i>=o-3?h.push(1,"...",o-4,o-3,o-2,o-1,o):h.push(1,"...",i-1,i,i+1,"...",o);return h};return f.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[f.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[f.jsx("button",{onClick:()=>r(Math.max(1,i-1)),disabled:i===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsx("button",{onClick:()=>r(Math.min(o,i+1)),disabled:i===o,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[f.jsx("div",{children:f.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",f.jsx("span",{className:"font-medium",children:(i-1)*n+1})," a ",f.jsx("span",{className:"font-medium",children:Math.min(i*n,e)})," de ",f.jsx("span",{className:"font-medium",children:e})," resultados"]})}),f.jsx("div",{children:f.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[f.jsxs("button",{onClick:()=>r(Math.max(1,i-1)),disabled:i===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[f.jsx("span",{className:"sr-only",children:"Anterior"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),c().map((h,p)=>typeof h=="number"?f.jsx("button",{onClick:()=>r(h),"aria-current":i===h?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${i===h?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:h},p):f.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},p)),f.jsxs("button",{onClick:()=>r(Math.min(o,i+1)),disabled:i===o,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[f.jsx("span",{className:"sr-only",children:"Prximo"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},g4=Rc.memo(({event:i,hasChildren:e,onAction:n})=>{const r=!e&&i.sessions.length===1?i.sessions[0]:null,o=r?r.capacity:0,c=r?r.filled:0,h=o>0?c/o*100:0,p=o>0&&c>=o;let y="bg-indigo-500",g="Pblico";return i.visibility==="course"&&(y="bg-emerald-500",g="Meu Curso"),i.visibility==="class"&&(y="bg-purple-500",g="Minha Turma"),f.jsxs("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col h-full relative",children:[f.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${y} opacity-80`}),f.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${y} bg-opacity-10 text-gray-700`,children:g}),e?f.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium border border-gray-200",children:"Evento Principal"}):p&&r?f.jsxs("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Lotado"]}):f.jsxs("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Inscries Abertas"]})]}),f.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight mb-2 group-hover:text-primary transition-colors",children:i.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-4 flex-1",children:i.description}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mt-auto",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 flex justify-center text-gray-400 mr-2",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),f.jsx("span",{className:"font-medium",children:i.location})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 flex justify-center text-gray-400 mr-2",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"font-medium",children:e?"Ver programao completa":i.sessions.length>1?`${i.sessions.length} horrios disponveis`:`${ln(r==null?void 0:r.date)}  ${r==null?void 0:r.startTime}`})]})]}),!e&&r&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[f.jsx("span",{className:p?"text-red-600":"text-gray-500",children:p?"Esgotado":`${o-c} vagas restantes`}),f.jsxs("span",{className:"text-gray-400",children:[Math.round(h),"%"]})]}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${p?"bg-red-500":h>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${h}%`}})})]})]}),f.jsxs("button",{onClick:()=>n(i),className:"w-full py-3 text-sm font-bold text-primary bg-indigo-50 hover:bg-primary hover:text-white transition-colors border-t border-indigo-100 flex justify-center items-center",children:[e?"Explorar Evento":"Ver Detalhes e Inscrever",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),y4=()=>{const{user:i}=Hi(),e=Br(),[n,r]=D.useState([]),[o,c]=D.useState([]),[h,p]=D.useState(null),[y,g]=D.useState(null),[x,E]=D.useState(null),[T,O]=D.useState(""),[P,z]=D.useState(""),[U,$]=D.useState(!1),[ie,J]=D.useState(1),fe=9,ae=D.useCallback(async()=>{if(!i)return;const[N,A]=await Promise.all([De.getAvailableEventsForUser(i),De.getEnrollmentsForUser(i.uid)]);r(N),c(A)},[i]);D.useEffect(()=>{ae()},[ae]),D.useEffect(()=>{if(h){const N=n.find(A=>A.id===h.id);N&&N!==h&&p(N)}},[n,h]);const he=D.useCallback(N=>n.some(A=>A.parentId===N),[n]),R=D.useMemo(()=>{const N=new Date().toISOString().split("T")[0];return n.filter(A=>{if(A.parentId)return!1;const be=A.name.toLowerCase().includes(T.toLowerCase())||A.description.toLowerCase().includes(T.toLowerCase()),Te=n.filter(ge=>ge.parentId===A.id),Q=[...A.sessions,...Te.flatMap(ge=>ge.sessions)],le=P?Q.some(ge=>ge.date===P):!0,_e=U||Q.some(ge=>ge.date>=N);return be&&le&&_e})},[n,T,P,U]);D.useEffect(()=>{J(1)},[T,P,U]);const C=D.useMemo(()=>{const N=(ie-1)*fe;return R.slice(N,N+fe)},[R,ie]),I=(N,A)=>o.some(be=>be.eventId===N&&be.sessionId===A),k=D.useCallback(async N=>{if(!(!i||!h)){g(null),E(null);try{const A=await De.createEnrollment(i.uid,h.id,N);g({type:"success",msg:"Inscrio realizada com sucesso!"}),c(Te=>[...Te,A]);const be=await De.getAvailableEventsForUser(i);r(be),setTimeout(()=>{p(null)},1500)}catch(A){const be=A.message||"";if(be.startsWith("CONFLICT|")){const[Te,Q,le,_e]=be.split("|");E({name:Q,time:`${le} - ${_e}`})}else g({type:"error",msg:be||"Falha ao inscrever"})}}},[i,h]),V=D.useCallback(N=>{n.some(be=>be.parentId===N.id)?e(`/event/${N.id}`):(g(null),E(null),p(N))},[n,e]);return f.jsxs("div",{className:"space-y-8",children:[f.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Dashboard de Eventos"}),f.jsx("p",{className:"text-gray-500 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),f.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex flex-col lg:flex-row gap-4 items-end",children:[f.jsxs("div",{className:"flex-1 w-full",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),f.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 text-gray-900 py-2.5",value:T,onChange:N=>O(N.target.value)})]})]}),f.jsxs("div",{className:"w-full lg:w-48",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Data Especfica"}),f.jsx("input",{type:"date",className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 text-gray-900 py-2.5",value:P,onChange:N=>z(N.target.value)})]}),f.jsx("div",{className:"w-full lg:w-auto pb-2",children:f.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[f.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[f.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:U,onChange:N=>$(N.target.checked),style:{right:U?"0":"auto",left:U?"auto":"0",borderColor:U?"#4F46E5":"#E5E7EB"}}),f.jsx("label",{htmlFor:"toggle",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${U?"bg-primary":"bg-gray-300"}`})]}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mostrar Passados"})]})})]}),R.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-xl shadow-sm border border-dashed border-gray-300 text-center",children:[f.jsx("div",{className:"text-6xl mb-4",children:""}),f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nenhum evento encontrado"}),f.jsx("p",{className:"text-gray-500 max-w-sm mt-1",children:n.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":U?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'."}),f.jsxs("div",{className:"flex gap-4 mt-4",children:[T||P?f.jsx("button",{onClick:()=>{O(""),z("")},className:"text-primary font-medium hover:underline",children:"Limpar filtros de texto/data"}):null,!U&&f.jsx("button",{onClick:()=>$(!0),className:"text-primary font-medium hover:underline",children:"Ver histrico de eventos"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(N=>f.jsx(g4,{event:N,hasChildren:he(N.id),onAction:V},N.id))}),f.jsx(p4,{currentPage:ie,totalItems:R.length,itemsPerPage:fe,onPageChange:J})]}),f.jsx(us,{isOpen:!!h,onClose:()=>p(null),title:h?h.name:"",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:f.jsx("p",{className:"text-gray-700 leading-relaxed",children:h==null?void 0:h.description})}),y&&f.jsxs("div",{className:`p-4 rounded-md border flex items-start ${y.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[f.jsx("span",{className:"mr-3 text-xl",children:y.type==="success"?"":""}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold",children:y.type==="success"?"Sucesso!":"Erro"}),f.jsx("p",{className:"text-sm",children:y.msg})]})]}),x&&f.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-bold text-amber-800",children:"Conflito de Horrio"}),f.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[f.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),f.jsxs("div",{className:"bg-white bg-opacity-50 p-2 rounded border border-amber-200",children:[f.jsx("p",{className:"font-semibold",children:x.name}),f.jsx("p",{className:"text-xs",children:x.time})]})]})]})]})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[f.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:h==null?void 0:h.sessions.map(N=>{const A=I(h.id,N.id),be=N.filled>=N.capacity,Te=N.filled/N.capacity*100,Q=N.date<new Date().toISOString().split("T")[0];return f.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${A?"border-green-500 bg-green-50 ring-1 ring-green-500":be||Q?"border-gray-200 bg-gray-50 opacity-90":"border-gray-200 hover:border-primary hover:shadow-md bg-white"}`,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-bold text-gray-900 text-lg",children:ln(N.date)}),A&&f.jsx("span",{className:"bg-green-200 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),Q&&!A&&f.jsx("span",{className:"bg-gray-200 text-gray-600 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),f.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-4",children:f.jsxs("span",{className:"flex items-center",children:[" ",N.startTime," - ",N.endTime]})}),f.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${be?"bg-red-500":Te>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(Te,100)}%`}})}),f.jsx("span",{className:`text-xs font-bold w-24 text-right ${be?"text-red-600":"text-gray-500"}`,children:be?"ESGOTADO":`${N.capacity-N.filled} vagas`})]})]}),f.jsx("div",{className:"flex items-center",children:A?f.jsx("button",{disabled:!0,className:"w-full sm:w-auto bg-white border border-green-500 text-green-600 font-bold py-2 px-4 rounded-lg opacity-100",children:"Inscrito"}):f.jsx("button",{onClick:()=>k(N.id),disabled:be||Q,className:`w-full sm:w-auto px-6 py-2.5 rounded-lg font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all ${be||Q?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-indigo-700 hover:shadow-md"}`,children:Q?"Encerrado":be?"Lotado":"Inscrever"})})]})},N.id)})})]})]})})]})},v4=Rc.memo(({evt:i,onOpenSubEvent:e,onManageEnrollments:n,onEdit:r,onDelete:o})=>{const c=!!i.parentId,h=!c;return f.jsxs("li",{className:`px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition ${c?"bg-gray-50/50 pl-12 border-l-4 border-indigo-100":""}`,children:[f.jsxs("div",{children:[f.jsxs("h3",{className:`font-medium text-primary flex items-center ${c?"text-base":"text-lg"}`,children:[c&&f.jsx("span",{className:"text-gray-400 mr-2",children:""}),i.name]}),f.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[f.jsxs("span",{className:"mr-3",children:[" ",i.sessions.length," sesses"]}),f.jsxs("span",{children:[" ",i.visibility==="public"?"Pblico":i.visibility==="course"?"Por Curso":"Por Turma"]})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[h&&f.jsx("button",{onClick:()=>e(i),className:"text-indigo-600 hover:text-white hover:bg-indigo-600 p-2 rounded-full transition border border-transparent hover:border-indigo-600",title:"Adicionar Sub-evento vinculado",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("button",{onClick:()=>n(i),className:"text-emerald-600 hover:text-white hover:bg-emerald-600 p-2 rounded-full transition border border-transparent hover:border-emerald-600",title:"Gerenciar Inscritos e Exportar",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),f.jsx("button",{onClick:()=>r(i),className:"text-blue-600 hover:text-white hover:bg-blue-600 p-2 rounded-full transition border border-transparent hover:border-blue-600",title:"Editar Evento",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),f.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),f.jsx("button",{onClick:()=>o(i),className:"text-red-600 hover:text-white hover:bg-red-600 p-2 rounded-full transition border border-transparent hover:border-red-600",title:"Excluir Evento",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),_4=()=>{var Fi,fs,Pa;const{user:i}=Hi(),e=Br(),[n,r]=D.useState([]),[o,c]=D.useState([]),[h,p]=D.useState([]),[y,g]=D.useState(!1),[x,E]=D.useState(!1),[T,O]=D.useState(1),[P,z]=D.useState([void 0]),[U,$]=D.useState(!0),ie=10,[J,fe]=D.useState({searchTerm:"",visibility:"",course:""}),[ae,he]=D.useState(""),[R,C]=D.useState("manual"),[I,k]=D.useState(null),[V,N]=D.useState(null),[A,be]=D.useState(null),[Te,Q]=D.useState(null),[le,_e]=D.useState(!1),[ge,Oe]=D.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0}),[M,Z]=D.useState({date:"",startTime:"",endTime:"",capacity:30}),[oe,de]=D.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),Ce=`${new Date().getFullYear()+2}-12-31`,Le=D.useCallback(async te=>{E(!0);const ye=P[te-1],{data:Je,nextCursor:ht}=await De.getEvents({limit:ie,cursor:ye,filters:J});r(Je),$(!!ht),ht&&P.length<=te&&z(bt=>[...bt,ht]),E(!1)},[P,J]),xt=async()=>{const[te,ye]=await Promise.all([De.getCourses(),De.getClasses()]);c(te),p(ye)};D.useEffect(()=>{xt()},[]),D.useEffect(()=>{z([void 0]),O(1),Le(1)},[J]);const rt=()=>{if(!U)return;const te=T+1;O(te),Le(te)},$n=()=>{if(T===1)return;const te=T-1;O(te),Le(te)},jn=(te,ye)=>{fe(Je=>({...Je,[te]:ye}))},ds=()=>{O(1),z([void 0]),Le(1)},re=()=>{Oe({name:"",description:"",location:"",sessions:[],visibility:"public",allowedCourses:[],allowedClasses:[],parentId:void 0}),Z({date:"",startTime:"",endTime:"",capacity:30}),de({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),k(null),C("manual"),N(null),be(null)},$e=()=>{re(),he("Criar Novo Evento Principal"),g(!0)},yn=D.useCallback(te=>{var ye;if(re(),he(`Adicionar Sub-evento para: ${te.name}`),k(te.name),(ye=te.sessions)!=null&&ye.length){const Je=te.sessions.map(ht=>ht.date).sort();be({min:Je[0],max:Je[Je.length-1]})}Oe({parentId:te.id,visibility:te.visibility,allowedCourses:te.allowedCourses,allowedClasses:te.allowedClasses,location:te.location,sessions:[],name:"",description:""}),g(!0)},[]),On=D.useCallback(te=>{re(),Oe({...te}),he("Editar Evento"),g(!0)},[]),oi=D.useCallback(te=>{Q(te.id),_e(!te.parentId)},[]),Qr=D.useCallback(te=>{e(`/admin/events/${te.id}/enrollments`)},[e]),Tt=()=>{if(!M.date||!M.startTime||!M.endTime)return;if(A&&(M.date<A.min||M.date>A.max)){N(`A data deve estar entre ${ln(A.min)} e ${ln(A.max)}.`);return}const te={id:`sess_${Date.now()}`,date:M.date,startTime:M.startTime,endTime:M.endTime,capacity:M.capacity||30,filled:0};Oe(ye=>({...ye,sessions:[...ye.sessions||[],te]})),Z({date:"",startTime:"",endTime:"",capacity:30}),N(null)},Rt=()=>{N(null);const{startDate:te,endDate:ye,startTime:Je,endTime:ht,capacity:bt,daysOfWeek:vn}=oe;if(!te||!ye||!Je||!ht||!vn.length){N("Preencha todos os campos.");return}if(A&&(te<A.min||ye>A.max)){N(`O intervalo deve estar entre ${ln(A.min)} e ${ln(A.max)}.`);return}if(ye>Ce){N(`A gerao  limitada at ${ln(Ce)}.`);return}const gt=new Date(`${te}T12:00:00Z`),Yr=new Date(`${ye}T12:00:00Z`);if(gt>Yr){N("A data de incio deve ser anterior  de fim.");return}const ms=[];for(let En=new Date(gt);En<=Yr;En.setDate(En.getDate()+1))vn.includes(En.getUTCDay())&&ms.push({id:`sess_${En.getTime()}`,date:En.toISOString().split("T")[0],startTime:Je,endTime:ht,capacity:bt,filled:0});if(ms.length>100){N("Limite de 100 sesses por vez atingido.");return}if(!ms.length){N("Nenhuma data encontrada no intervalo.");return}Oe(En=>({...En,sessions:[...En.sessions||[],...ms]}))},Ds=te=>{Oe(ye=>{var Je;return{...ye,sessions:(Je=ye.sessions)==null?void 0:Je.filter((ht,bt)=>bt!==te)}})},sl=async te=>{var ye;if(te.preventDefault(),!ge.name||!((ye=ge.sessions)!=null&&ye.length)){N("Nome e ao menos uma sesso so obrigatrios.");return}E(!0);try{ge.id?await De.updateEvent(ge):await De.createEvent({...ge,id:`evt_${Date.now()}`,createdAt:new Date().toISOString(),createdBy:(i==null?void 0:i.uid)||""}),g(!1),re(),ds()}catch(Je){console.error(Je)}finally{E(!1)}},La=async()=>{Te&&(await De.deleteEvent(Te),Q(null),ds())},tn=te=>Oe(ye=>{var Je;return{...ye,allowedCourses:(Je=ye.allowedCourses)!=null&&Je.includes(te)?ye.allowedCourses.filter(ht=>ht!==te):[...ye.allowedCourses||[],te]}}),li=te=>Oe(ye=>{var Je;return{...ye,allowedClasses:(Je=ye.allowedClasses)!=null&&Je.includes(te)?ye.allowedClasses.filter(ht=>ht!==te):[...ye.allowedClasses||[],te]}}),Kr=te=>de(ye=>({...ye,daysOfWeek:ye.daysOfWeek.includes(te)?ye.daysOfWeek.filter(Je=>Je!==te):[...ye.daysOfWeek,te]}));return f.jsxs("div",{className:"container mx-auto space-y-6",children:[f.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Eventos"}),f.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[f.jsx("div",{className:"w-full xl:w-64",children:f.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full border-gray-300 rounded-md bg-white text-gray-900",value:J.searchTerm,onChange:te=>jn("searchTerm",te.target.value)})}),f.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[f.jsxs("select",{className:"w-full border-gray-300 rounded-md bg-white text-gray-900",value:J.visibility,onChange:te=>jn("visibility",te.target.value),children:[f.jsx("option",{value:"",children:"Visibilidade"}),f.jsx("option",{value:"public",children:"Pblico"}),f.jsx("option",{value:"course",children:"Por Curso"}),f.jsx("option",{value:"class",children:"Por Turma"})]}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md bg-white text-gray-900",value:J.course,onChange:te=>jn("course",te.target.value),children:[f.jsx("option",{value:"",children:"Todos os Cursos"}),o.map(te=>f.jsx("option",{value:te.id,children:te.name},te.id))]})]}),f.jsx("button",{onClick:$e,className:"w-full xl:w-auto bg-primary text-white px-6 py-2 rounded-md font-bold whitespace-nowrap",children:"+ Novo Evento"})]})]}),f.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:f.jsxs("ul",{className:"divide-y divide-gray-200",children:[x&&f.jsx("li",{className:"px-6 py-12 text-center text-gray-500",children:"Carregando eventos..."}),!x&&n.map(te=>f.jsx(v4,{evt:te,onOpenSubEvent:yn,onManageEnrollments:Qr,onEdit:On,onDelete:oi},te.id)),!x&&n.length===0&&f.jsx("li",{className:"px-6 py-12 text-center text-gray-500",children:"Nenhum evento encontrado."})]})}),f.jsxs("div",{className:"flex justify-between items-center mt-4",children:[f.jsx("button",{onClick:$n,disabled:T===1||x,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsxs("span",{className:"text-sm text-gray-500",children:["Pgina ",T]}),f.jsx("button",{onClick:rt,disabled:!U||x,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsx(us,{isOpen:!!Te,onClose:()=>Q(null),title:"Confirmar Excluso",children:f.jsxs("div",{children:[f.jsx("p",{children:"Tem certeza que deseja excluir este evento?"}),le&&f.jsx("p",{className:"text-red-600 font-bold",children:"Ateno: Todos os sub-eventos vinculados tambm sero excludos."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-gray-100 rounded",children:"Cancelar"}),f.jsx("button",{onClick:La,className:"px-4 py-2 bg-red-600 rounded text-white font-bold",children:"Confirmar"})]})]})}),f.jsx(us,{isOpen:y,onClose:()=>g(!1),title:ae,children:f.jsxs("form",{onSubmit:sl,className:"space-y-4 max-h-[80vh] overflow-y-auto px-1",children:[f.jsx("input",{type:"text",required:!0,placeholder:"Nome do Evento",className:"w-full border rounded p-2 bg-white text-gray-900",value:ge.name,onChange:te=>Oe({...ge,name:te.target.value})}),f.jsxs("div",{className:I?"opacity-50 pointer-events-none":"",children:[f.jsxs("select",{value:ge.visibility,onChange:te=>Oe({...ge,visibility:te.target.value}),className:"w-full border rounded p-2 bg-white text-gray-900",disabled:!!I,children:[f.jsx("option",{value:"public",children:"Pblico"}),f.jsx("option",{value:"course",children:"Restrito a Cursos"}),f.jsx("option",{value:"class",children:"Restrito a Turmas"})]}),ge.visibility==="course"&&f.jsx("div",{className:"p-2 border rounded max-h-40 overflow-y-auto",children:o.map(te=>{var ye;return f.jsxs("div",{children:[f.jsx("input",{type:"checkbox",id:`c_${te.id}`,checked:(ye=ge.allowedCourses)==null?void 0:ye.includes(te.id),onChange:()=>tn(te.id)}),f.jsx("label",{htmlFor:`c_${te.id}`,children:te.name})]},te.id)})}),ge.visibility==="class"&&f.jsx("div",{className:"p-2 border rounded max-h-40 overflow-y-auto",children:o.map(te=>f.jsxs("div",{children:[f.jsx("strong",{children:te.name}),h.filter(ye=>ye.courseId===te.id).map(ye=>{var Je;return f.jsxs("div",{children:[f.jsx("input",{type:"checkbox",id:`cl_${ye.id}`,checked:(Je=ge.allowedClasses)==null?void 0:Je.includes(ye.id),onChange:()=>li(ye.id)}),f.jsx("label",{htmlFor:`cl_${ye.id}`,children:ye.name})]},ye.id)})]},te.id))})]}),f.jsx("textarea",{placeholder:"Descrio",className:"w-full border rounded p-2 bg-white text-gray-900",rows:2,value:ge.description,onChange:te=>Oe({...ge,description:te.target.value})}),f.jsx("input",{type:"text",placeholder:"Local",className:"w-full border rounded p-2 bg-white text-gray-900",value:ge.location,onChange:te=>Oe({...ge,location:te.target.value})}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{children:"Gerenciar Sesses"}),A&&f.jsxs("div",{className:"bg-blue-100 p-2 rounded text-sm",children:["Restrio de Data Ativa: ",ln(A.min)," a ",ln(A.max),"."]}),f.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-t-md",children:[f.jsx("button",{type:"button",onClick:()=>C("manual"),className:`flex-1 py-2 text-sm rounded-md ${R==="manual"?"bg-white text-primary shadow":"text-gray-500"}`,children:"Manual"}),f.jsx("button",{type:"button",onClick:()=>C("recurring"),className:`flex-1 py-2 text-sm rounded-md ${R==="recurring"?"bg-white text-primary shadow":"text-gray-500"}`,children:"Recorrncia"})]}),R==="manual"&&f.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-50 p-3 rounded-b-md border",children:[f.jsx("input",{type:"date",className:"border p-1 rounded text-sm bg-white text-gray-900",value:M.date,min:A==null?void 0:A.min,max:A==null?void 0:A.max,onChange:te=>Z({...M,date:te.target.value})}),f.jsx("input",{type:"number",placeholder:"Capacidade",className:"border p-1 rounded text-sm bg-white text-gray-900",value:M.capacity,onChange:te=>Z({...M,capacity:parseInt(te.target.value)})}),f.jsx("input",{type:"time",className:"border p-1 rounded text-sm bg-white text-gray-900",value:M.startTime,onChange:te=>Z({...M,startTime:te.target.value})}),f.jsx("input",{type:"time",className:"border p-1 rounded text-sm bg-white text-gray-900",value:M.endTime,onChange:te=>Z({...M,endTime:te.target.value})}),f.jsx("button",{type:"button",onClick:Tt,className:"col-span-2 mt-2 bg-white border border-primary text-primary py-2 rounded text-sm",children:"+ Adicionar Sesso"})]}),R==="recurring"&&f.jsxs("div",{className:"bg-indigo-50 p-3 rounded-b-md space-y-3 border",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("input",{type:"date",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.startDate,min:A==null?void 0:A.min,max:Ce,onChange:te=>de({...oe,startDate:te.target.value})}),f.jsx("input",{type:"date",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.endDate,min:A==null?void 0:A.min,max:Ce,onChange:te=>de({...oe,endDate:te.target.value})})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.startTime,onChange:te=>de({...oe,startTime:te.target.value})}),f.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.endTime,onChange:te=>de({...oe,endTime:te.target.value})}),f.jsx("input",{type:"number",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.capacity,onChange:te=>de({...oe,capacity:parseInt(te.target.value)})})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map((te,ye)=>f.jsx("button",{type:"button",onClick:()=>Kr(ye),className:`text-xs px-3 py-1.5 rounded border ${oe.daysOfWeek.includes(ye)?"bg-primary text-white":"bg-white"}`,children:te},te))}),V&&f.jsx("div",{className:"text-xs text-red-600 p-2 rounded",children:V}),f.jsx("button",{type:"button",onClick:Rt,className:"w-full bg-primary text-white py-2 rounded text-sm",children:"Gerar Sesses"})]}),f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsxs("h5",{className:"text-xs font-bold text-gray-500",children:["Sesses Geradas (",((Fi=ge.sessions)==null?void 0:Fi.length)||0,")"]}),f.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded p-2 bg-gray-50",children:[((fs=ge.sessions)==null?void 0:fs.length)===0&&f.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"Nenhuma sesso"}),(Pa=ge.sessions)==null?void 0:Pa.slice().sort((te,ye)=>te.date.localeCompare(ye.date)).map((te,ye)=>f.jsxs("div",{className:"text-xs bg-white border p-2 rounded flex justify-between items-center",children:[f.jsxs("span",{children:[ln(te.date)," | ",te.startTime,"-",te.endTime," | ",te.capacity," vagas"]}),f.jsx("button",{type:"button",onClick:()=>Ds(ye),className:"text-red-500",children:""})]},ye))]})]})]}),f.jsxs("div",{className:"pt-4",children:[V&&f.jsx("div",{className:"mb-2 text-sm text-red-600 text-center",children:V}),f.jsx("button",{type:"submit",disabled:x,className:"w-full bg-green-600 text-white py-3 rounded-md disabled:opacity-50 font-bold",children:x?"Salvando...":"Confirmar"})]})]})})]})},x4=Rc.memo(({user:i,courseName:e,className:n,onEdit:r,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:h})=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold",children:i.name?i.name.charAt(0):i.email.charAt(0).toUpperCase()}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.name||"Sem nome"}),f.jsx("div",{className:"text-sm text-gray-500",children:i.email})]})]})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:e}),f.jsx("div",{className:"text-sm text-gray-500",children:n})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.rm||"-"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${i.role===Et.ADMIN?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:i.role})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[f.jsx("button",{onClick:()=>h(i),className:"text-cyan-600 hover:text-cyan-900",title:"Ver Inscries",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>r(i),className:"text-indigo-600 hover:text-indigo-900",children:"Editar"}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>o(i),className:"text-amber-600 hover:text-amber-900",children:i.role===Et.ADMIN?"Virar User":"Virar Admin"}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>c(i),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]})),b4=Rc.memo(({user:i,courseName:e,className:n,onEdit:r,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:h})=>f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold",children:i.name?i.name.charAt(0):i.email.charAt(0).toUpperCase()}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-bold text-gray-900",children:i.name||"Sem nome"}),f.jsx("div",{className:"text-xs text-gray-500",children:i.email})]})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i.role===Et.ADMIN?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:i.role})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm border-t border-b border-gray-100 py-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"Curso"}),f.jsx("span",{className:"font-medium",children:e})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"Turma"}),f.jsx("span",{className:"font-medium",children:n})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"RM"}),f.jsx("span",{className:"font-medium",children:i.rm||"-"})]})]}),f.jsxs("div",{className:"flex justify-end space-x-2 pt-1 overflow-x-auto",children:[f.jsxs("button",{onClick:()=>h(i),className:"text-cyan-600 text-sm font-medium border border-cyan-100 px-2 py-1 rounded hover:bg-cyan-50 flex items-center",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Agenda"]}),f.jsx("button",{onClick:()=>r(i),className:"text-indigo-600 text-sm font-medium border border-indigo-100 px-2 py-1 rounded hover:bg-indigo-50",children:"Editar"}),f.jsx("button",{onClick:()=>o(i),className:"text-amber-600 text-sm font-medium border border-amber-100 px-2 py-1 rounded hover:bg-amber-50",children:i.role===Et.ADMIN?"User":"Admin"}),f.jsx("button",{onClick:()=>c(i),className:"text-red-600 text-sm font-medium border border-red-100 px-2 py-1 rounded hover:bg-red-50",children:"Excluir"})]})]})),E4=()=>{const[i,e]=D.useState([]),[n,r]=D.useState([]),[o,c]=D.useState([]),[h,p]=D.useState(!1),[y,g]=D.useState(!0),[x,E]=D.useState(1),[T,O]=D.useState([void 0]),[P,z]=D.useState(!0),U=15,[$,ie]=D.useState({searchTerm:"",role:"",courseId:"",classId:""}),[J,fe]=D.useState(null),[ae,he]=D.useState({name:"",rm:"",courseId:"",classId:""}),[R,C]=D.useState(null),[I,k]=D.useState(null),[V,N]=D.useState([]),[A,be]=D.useState(!1),[Te,Q]=D.useState(null),le=D.useCallback(async re=>{p(!0);const $e=T[re-1],{data:yn,nextCursor:On}=await De.getUsers({limit:U,cursor:$e,filters:$});e(yn),z(!!On),On&&T.length<=re&&O(oi=>[...oi,On]),p(!1)},[T,$]),_e=async()=>{g(!0);const[re,$e]=await Promise.all([De.getCourses(),De.getClasses()]);r(re),c($e),g(!1)};D.useEffect(()=>{_e()},[]),D.useEffect(()=>{O([void 0]),E(1),le(1)},[$]);const ge=()=>{if(!P)return;const re=x+1;E(re),le(re)},Oe=()=>{if(x===1)return;const re=x-1;E(re),le(re)},M=(re,$e)=>{ie(yn=>({...yn,[re]:$e}))},Z=()=>{E(1),O([void 0]),le(1)},oe=D.useCallback(re=>Q({type:"DELETE",user:re}),[]),de=D.useCallback(re=>Q({type:"ROLE",user:re}),[]),Ne=D.useCallback(re=>{fe(re),he({name:re.name||"",rm:re.rm||"",courseId:re.courseId||"",classId:re.classId||""}),C(null)},[]),Ce=D.useCallback(async re=>{k(re),be(!0);try{const $e=await De.getUserEnrollmentsDetails(re.uid);N($e)}catch($e){console.error($e),N([])}finally{be(!1)}},[]),Le=async re=>{I&&(await De.cancelEnrollment(re),Ce(I))},xt=async()=>{if(Te){if(Te.type==="DELETE")await De.deleteUser(Te.user.uid);else if(Te.type==="ROLE"){const re=Te.user.role===Et.ADMIN?Et.USER:Et.ADMIN;await De.updateUserRole(Te.user.uid,re)}Q(null),Z()}},rt=async re=>{if(re.preventDefault(),!!J){C(null);try{await De.updateUserProfile(J.uid,ae),fe(null),Z()}catch($e){C($e.message)}}},$n=D.useCallback(re=>{var $e;return(($e=n.find(yn=>yn.id===re))==null?void 0:$e.name)||"-"},[n]),jn=D.useCallback(re=>{var $e;return(($e=o.find(yn=>yn.id===re))==null?void 0:$e.name)||"-"},[o]),ds=D.useMemo(()=>$.courseId?o.filter(re=>re.courseId===$.courseId):[],[o,$.courseId]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Usurios"}),f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Buscar"}),f.jsx("input",{type:"text",placeholder:"Nome, Email ou RM...",className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900",value:$.searchTerm,onChange:re=>M("searchTerm",re.target.value)})]}),f.jsxs("div",{className:"w-full md:w-40",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Perfil"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900",value:$.role,onChange:re=>M("role",re.target.value),children:[f.jsx("option",{value:"",children:"Todos"}),f.jsx("option",{value:Et.ADMIN,children:"Admin"}),f.jsx("option",{value:Et.USER,children:"User"})]})]}),f.jsxs("div",{className:"w-full md:w-48",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Curso"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900",value:$.courseId,onChange:re=>{ie({...$,courseId:re.target.value,classId:""})},children:[f.jsx("option",{value:"",children:"Todos os Cursos"}),n.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),f.jsxs("div",{className:"w-full md:w-48",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Turma"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900 disabled:bg-gray-100",value:$.classId,onChange:re=>M("classId",re.target.value),disabled:!$.courseId,children:[f.jsx("option",{value:"",children:"Todas as Turmas"}),ds.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]})]})]}),f.jsxs("div",{className:"bg-white shadow overflow-x-auto sm:rounded-lg",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 hidden md:table",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usurio"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Curso/Turma"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"RM"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),f.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[h&&f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Carregando..."})}),!h&&i.map(re=>f.jsx(x4,{user:re,courseName:$n(re.courseId),className:jn(re.classId),onEdit:Ne,onRequestRoleChange:de,onRequestDelete:oe,onViewEnrollments:Ce},re.uid)),!h&&i.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Nenhum usurio encontrado."})})]})]}),f.jsxs("div",{className:"md:hidden p-4 space-y-4",children:[h&&f.jsx("div",{className:"p-8 text-center text-gray-500",children:"Carregando..."}),!h&&i.map(re=>f.jsx(b4,{user:re,courseName:$n(re.courseId),className:jn(re.classId),onEdit:Ne,onRequestRoleChange:de,onRequestDelete:oe,onViewEnrollments:Ce},re.uid)),!h&&i.length===0&&f.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nenhum usurio encontrado."})]})]}),f.jsxs("div",{className:"flex justify-between items-center mt-4",children:[f.jsx("button",{onClick:Oe,disabled:x===1||h,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsxs("span",{className:"text-sm text-gray-500",children:["Pgina ",x]}),f.jsx("button",{onClick:ge,disabled:!P||h,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsx(us,{isOpen:!!Te,onClose:()=>Q(null),title:"Confirmar Ao",children:f.jsxs("div",{className:"space-y-4",children:[(Te==null?void 0:Te.type)==="DELETE"?f.jsxs("p",{children:["Tem certeza que deseja excluir ",f.jsx("strong",{children:Te.user.name}),"?"]}):f.jsxs("p",{children:["Deseja alterar o perfil de ",f.jsx("strong",{children:Te==null?void 0:Te.user.name})," para",f.jsxs("strong",{children:[" ",(Te==null?void 0:Te.user.role)===Et.ADMIN?"USURIO":"ADMIN"]}),"?"]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-gray-100 rounded",children:"Cancelar"}),f.jsx("button",{onClick:xt,className:"px-4 py-2 rounded text-white font-bold bg-red-600",children:"Confirmar"})]})]})}),f.jsx(us,{isOpen:!!J,onClose:()=>fe(null),title:"Editar Usurio",children:f.jsxs("form",{onSubmit:rt,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Nome Completo"}),f.jsx("input",{type:"text",className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ae.name,onChange:re=>he({...ae,name:re.target.value}),required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{children:"RM"}),f.jsx("input",{type:"text",className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ae.rm,onChange:re=>he({...ae,rm:re.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Curso"}),f.jsxs("select",{className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ae.courseId,onChange:re=>he({...ae,courseId:re.target.value,classId:""}),children:[f.jsx("option",{value:"",children:"Selecione..."}),n.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Turma"}),f.jsxs("select",{className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ae.classId,onChange:re=>he({...ae,classId:re.target.value}),disabled:!ae.courseId,children:[f.jsx("option",{value:"",children:"Selecione..."}),o.filter(re=>re.courseId===ae.courseId).map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),R&&f.jsx("div",{className:"text-red-600 text-sm p-2 bg-red-50 rounded",children:R}),f.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-bold",children:"Salvar"})]})}),f.jsx(us,{isOpen:!!I,onClose:()=>k(null),title:`Agenda: ${I==null?void 0:I.name}`,children:f.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:A?f.jsx("div",{className:"text-center py-8",children:"Carregando..."}):V.length===0?f.jsx("div",{className:"text-center py-8 bg-gray-50 rounded",children:"Nenhuma inscrio."}):f.jsx("ul",{className:"divide-y divide-gray-200",children:V.map((re,$e)=>f.jsxs("li",{className:"py-3 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-sm",children:re.eventName}),f.jsxs("div",{className:"text-xs text-gray-500",children:[" ",ln(re.sessionDate),"   ",re.sessionTime]})]}),f.jsx("button",{onClick:()=>Le(re.enrollmentId),className:"text-red-500 text-xs font-bold border px-2 py-1 rounded",children:"Remover"})]},$e))})})})]})},w4=()=>{const[i,e]=D.useState([]),[n,r]=D.useState([]),[o,c]=D.useState(!1),[h,p]=D.useState(""),[y,g]=D.useState(""),[x,E]=D.useState(""),[T,O]=D.useState(""),[P,z]=D.useState(null),[U,$]=D.useState(null),ie=async()=>{c(!0);const N=await De.getCourses(),A=await De.getClasses();e(N),r(A),c(!1)};D.useEffect(()=>{ie()},[]);const J=async N=>{N.preventDefault(),h&&(await De.addCourse(h),p(""),ie())},fe=N=>{$({type:"course",id:N})},ae=async N=>{N.preventDefault(),!(!y||!x)&&(await De.addClass(x,y),g(""),ie())},he=N=>{$({type:"class",id:N})},R=async()=>{U&&(U.type==="course"?await De.deleteCourse(U.id):await De.deleteClass(U.id),$(null),ie())},C=(N,A,be)=>{z({type:N,id:A,name:be})},I=async N=>{N.preventDefault(),!(!P||!P.name)&&(P.type==="course"?await De.updateCourse(P.id,P.name):await De.updateClass(P.id,P.name),z(null),ie())},k=i.filter(N=>N.name.toLowerCase().includes(T.toLowerCase())),V=n.filter(N=>{var Q;const A=((Q=i.find(le=>le.id===N.courseId))==null?void 0:Q.name)||"",be=N.name.toLowerCase().includes(T.toLowerCase()),Te=A.toLowerCase().includes(T.toLowerCase());return be||Te});return f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Cursos e Turmas"}),f.jsx("div",{className:"w-full sm:w-72",children:f.jsx("input",{type:"text",placeholder:"Buscar Curso ou Turma...",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:T,onChange:N=>O(N.target.value)})})]}),f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cursos"}),f.jsxs("form",{onSubmit:J,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsx("input",{type:"text",placeholder:"Nome do novo curso",className:"flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:h,onChange:N=>p(N.target.value)}),f.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-primary text-white px-4 py-2 rounded-md hover:bg-indigo-700 font-medium",children:"Adicionar Curso"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[k.map(N=>f.jsxs("div",{className:"border border-gray-200 rounded-md p-4 flex justify-between items-center bg-gray-50 shadow-sm",children:[f.jsx("span",{className:"font-medium text-gray-800 break-words flex-1 pr-2",children:N.name}),f.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[f.jsx("button",{onClick:()=>C("course",N.id,N.name),className:"text-blue-600 text-sm hover:text-white hover:bg-blue-600 font-medium px-2 py-1 rounded transition",title:"Editar",children:""}),f.jsx("button",{onClick:()=>fe(N.id),className:"text-red-600 text-sm hover:text-white hover:bg-red-600 font-medium px-2 py-1 rounded transition",title:"Excluir",children:""})]})]},N.id)),k.length===0&&f.jsx("div",{className:"text-gray-500 text-sm italic col-span-full",children:"Nenhum curso encontrado."})]})]}),f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Turmas"}),f.jsxs("form",{onSubmit:ae,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsxs("select",{className:"w-full sm:w-1/3 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:x,onChange:N=>E(N.target.value),required:!0,children:[f.jsx("option",{value:"",children:"Selecione o Curso..."}),i.map(N=>f.jsx("option",{value:N.id,children:N.name},N.id))]}),f.jsx("input",{type:"text",placeholder:"Nome da Turma (ex: 2024-A)",className:"flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:y,onChange:N=>g(N.target.value),required:!0}),f.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-secondary text-white px-4 py-2 rounded-md hover:bg-emerald-700 font-medium",children:"Adicionar Turma"})]}),f.jsxs("div",{className:"border border-gray-200 rounded-md bg-white overflow-hidden",children:[f.jsxs("div",{className:"hidden md:grid grid-cols-3 bg-gray-50 px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[f.jsx("div",{children:"Turma"}),f.jsx("div",{children:"Curso Associado"}),f.jsx("div",{className:"text-right",children:"Aes"})]}),f.jsxs("div",{className:"divide-y divide-gray-200",children:[V.map(N=>{var be;const A=((be=i.find(Te=>Te.id===N.courseId))==null?void 0:be.name)||"Curso removido";return f.jsxs("div",{className:"p-4 md:px-6 md:py-4 flex flex-col md:grid md:grid-cols-3 gap-2 md:items-center",children:[f.jsxs("div",{className:"flex justify-between items-center md:block",children:[f.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.name}),f.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Turma"})]}),f.jsxs("div",{className:"flex justify-between items-center md:block",children:[f.jsx("span",{className:"text-sm text-gray-500",children:A}),f.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Curso"})]}),f.jsxs("div",{className:"text-right mt-3 md:mt-0 pt-3 md:pt-0 border-t md:border-0 border-gray-100 flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>C("class",N.id,N.name),className:"text-blue-600 hover:text-white hover:bg-blue-600 text-sm font-medium border border-blue-200 px-3 py-1.5 rounded transition",children:"Editar"}),f.jsx("button",{onClick:()=>he(N.id),className:"text-red-600 hover:text-white hover:bg-red-600 text-sm font-medium border border-red-200 px-3 py-1.5 rounded transition",children:"Excluir"})]})]},N.id)}),V.length===0&&f.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"Nenhuma turma encontrada."})]})]})]}),f.jsx(us,{isOpen:!!U,onClose:()=>$(null),title:"Confirmar Excluso",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza que deseja excluir ",(U==null?void 0:U.type)==="course"?"este curso":"esta turma","?"]}),(U==null?void 0:U.type)==="course"&&f.jsx("p",{className:"text-xs text-red-500 font-bold",children:"Ateno: Isso pode deixar turmas e usurios rfos (sem curso vinculado)."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>$(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:R,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar"})]})]})}),f.jsx(us,{isOpen:!!P,onClose:()=>z(null),title:(P==null?void 0:P.type)==="course"?"Editar Curso":"Editar Turma",children:f.jsxs("form",{onSubmit:I,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),f.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:(P==null?void 0:P.name)||"",onChange:N=>z(A=>A?{...A,name:N.target.value}:null),required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-medium hover:bg-indigo-700",children:"Salvar"})]})})]})},T4=()=>{const{id:i}=nb(),[e,n]=D.useState(null),[r,o]=D.useState([]),[c,h]=D.useState(!0),[p,y]=D.useState(null),[g,x]=D.useState(""),E=async()=>{if(!i)return;h(!0);const z=await De.getEventById(i);n(z||null);const U=await De.getEnrichedEnrollments(i);o(U),h(!1)};D.useEffect(()=>{E()},[i]);const T=()=>{if(r.length===0)return;const U=[["Nome","Email","RM","Data Sesso","Horrio","Data Inscrio"].join(","),...r.map(fe=>[JSON.stringify(fe.user.name),JSON.stringify(fe.user.email),JSON.stringify(fe.user.rm),JSON.stringify(ln(fe.session.date)),JSON.stringify(`${fe.session.startTime} - ${fe.session.endTime}`),JSON.stringify(new Date(fe.enrolledAt).toLocaleString("pt-BR"))].join(","))].join(`
`),$=new Blob([U],{type:"text/csv;charset=utf-8;"}),ie=URL.createObjectURL($),J=document.createElement("a");J.href=ie,J.setAttribute("download",`inscritos_${(e==null?void 0:e.name.replace(/\s+/g,"_"))||"evento"}.csv`),document.body.appendChild(J),J.click(),document.body.removeChild(J)},O=async()=>{p&&(await De.cancelEnrollment(p),y(null),E())},P=r.filter(z=>{var U;return z.user.name.toLowerCase().includes(g.toLowerCase())||z.user.email.toLowerCase().includes(g.toLowerCase())||((U=z.user.rm)==null?void 0:U.includes(g))});return c?f.jsx("div",{className:"p-8 text-center",children:"Carregando..."}):e?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsxs(mt,{to:"/admin/events",className:"text-gray-500 hover:text-gray-700 font-medium flex-shrink-0",children:[f.jsx("span",{className:"sr-only",children:"Voltar"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})]}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 leading-tight",children:"Inscritos"}),f.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[200px] sm:max-w-md",children:e.name})]})]}),f.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[f.jsx("input",{type:"text",placeholder:"Buscar aluno...",className:"flex-1 sm:w-64 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:g,onChange:z=>x(z.target.value)}),f.jsxs("button",{onClick:T,disabled:r.length===0,className:"w-auto bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-sm",title:"Exportar CSV",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),f.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]}),P.length===0?f.jsx("div",{className:"bg-white shadow rounded-lg p-8 text-center text-gray-500",children:g?"Nenhum aluno encontrado para esta busca.":"Nenhum inscrito neste evento at o momento."}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aluno"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RM / Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sesso"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrito em"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(z=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.user.name})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:z.user.rm||"-"}),f.jsx("div",{className:"text-xs text-gray-500",children:z.user.email})]}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:ln(z.session.date)}),f.jsxs("div",{className:"text-xs text-gray-500",children:[z.session.startTime," - ",z.session.endTime]})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(z.enrolledAt).toLocaleDateString("pt-BR")}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f.jsx("button",{onClick:()=>y(z.id),className:"text-red-600 hover:text-red-900 font-bold",children:"Remover"})})]},z.id))})]})}),f.jsx("div",{className:"md:hidden space-y-4",children:P.map(z=>f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-bold text-gray-900",children:z.user.name}),f.jsx("p",{className:"text-xs text-gray-500",children:z.user.email})]}),f.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded font-medium",children:["RM: ",z.user.rm||"-"]})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-50 grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold tracking-wide",children:"Sesso"}),f.jsx("span",{className:"block font-medium text-gray-800",children:ln(z.session.date)}),f.jsxs("span",{className:"block text-xs text-gray-500",children:[z.session.startTime," - ",z.session.endTime]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold tracking-wide",children:"Inscrito em"}),f.jsx("span",{className:"block text-gray-600",children:new Date(z.enrolledAt).toLocaleDateString("pt-BR")})]})]}),f.jsx("div",{className:"mt-4 pt-3 border-t border-gray-50",children:f.jsx("button",{onClick:()=>y(z.id),className:"w-full text-sm text-red-600 hover:text-red-800 font-bold border border-red-100 bg-red-50 px-3 py-2 rounded hover:bg-red-100 transition",children:"Remover Inscrio"})})]},z.id))})]}),f.jsx(us,{isOpen:!!p,onClose:()=>y(null),title:"Remover Inscrio",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-700",children:"Tem certeza que deseja remover a inscrio deste aluno? A vaga ser liberada imediatamente."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar Remoo"})]})]})})]}):f.jsx("div",{className:"p-8 text-center",children:"Evento no encontrado."})},S4=()=>{const[i,e]=D.useState(!1),[n,r]=D.useState(!1),[o,c]=D.useState(null),h=()=>{c(null),r(!0)},p=async()=>{e(!0),c(null);try{await De.resetAndSeedData(),c({type:"success",msg:"Dados gerados com sucesso! Recarregando sistema..."}),setTimeout(()=>{window.location.reload()},2e3)}catch(y){console.error(y),c({type:"error",msg:"Ocorreu um erro ao gerar os dados."}),e(!1)}};return f.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto mt-10",children:[f.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Ferramentas de Desenvolvimento"}),f.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:[f.jsx("p",{children:"Utilize esta funo para popular o banco de dados local com informaes de teste."}),f.jsx("p",{className:"mt-2 font-bold text-red-500",children:"Isso  destrutivo e sobrescrever todos os dados existentes."})]}),f.jsx("div",{className:"mt-5",children:f.jsx("button",{type:"button",onClick:h,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:" Resetar e Gerar Massa de Dados"})})]})}),f.jsxs("div",{className:"bg-indigo-50 p-4 rounded-md border border-indigo-100",children:[f.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"O que ser gerado?"}),f.jsxs("ul",{className:"list-disc list-inside text-sm text-indigo-700 space-y-1",children:[f.jsx("li",{children:"Cursos: CC, Direito, Medicina, Design."}),f.jsx("li",{children:"Turmas associadas a cada curso."}),f.jsx("li",{children:"Usurios: 1 Admin (admin@school.com), 3 Alunos com perfis variados."}),f.jsx("li",{children:"Eventos Pblicos e Restritos (por curso/turma)."}),f.jsx("li",{children:"Hierarquia: Semana Acadmica com 2 sub-eventos."})]})]}),f.jsx(us,{isOpen:n,onClose:()=>!i&&r(!1),title:"Confirmar Reset",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza absoluta? Essa ao apagar ",f.jsx("strong",{children:"todos"})," os usurios, eventos e inscries atuais e criar dados fictcios."]}),o&&f.jsx("div",{className:`p-3 rounded text-sm font-bold text-center ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.msg}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{onClick:()=>r(!1),disabled:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800 disabled:opacity-50",children:"Cancelar"}),f.jsxs("button",{onClick:p,disabled:i,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold disabled:opacity-50 flex items-center",children:[i&&f.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Gerando...":"Sim, Resetar Tudo"]})]})]})})]})},A4=()=>{const{user:i}=Hi(),[e,n]=D.useState([]),[r,o]=D.useState(null),[c,h]=D.useState(!1),p=async()=>{if(!i)return;const g=await De.getEnrollmentsForUser(i.uid),x=await De.getEvents({limit:1e3,filters:{}}),E=g.map(T=>{const O=x.data.find(z=>z.id===T.eventId);if(!O)return null;const P=O.sessions.find(z=>z.id===T.sessionId);return P?{enrollment:T,event:O,session:P}:null}).filter(Boolean);n(E)};D.useEffect(()=>{p()},[i]);const y=async()=>{if(r){h(!0);try{await De.cancelEnrollment(r)}catch(g){console.error(g)}finally{o(null),h(!1),p()}}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Minha Agenda"}),e.length===0?f.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center text-gray-500",children:"Voc ainda no se inscreveu em nenhum evento."}):f.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:f.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(({enrollment:g,event:x,session:E})=>f.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-primary",children:x.name}),f.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:[" ",ln(E.date),"   ",E.startTime," - ",E.endTime]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[" ",x.location]})]}),f.jsx("div",{children:f.jsx("button",{onClick:()=>o(g.id),className:"w-full sm:w-auto text-sm text-red-600 hover:text-red-800 border border-red-200 px-3 py-2 rounded hover:bg-red-50 transition flex justify-center",children:"Cancelar Inscrio"})})]},g.id))})}),f.jsx(us,{isOpen:!!r,onClose:()=>o(null),title:"Confirmar Cancelamento",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-700",children:"Tem certeza que deseja cancelar sua inscrio neste evento? A vaga ser liberada para outro participante."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Manter Inscrio"}),f.jsx("button",{onClick:y,disabled:c,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:c?"Processando...":"Sim, Cancelar"})]})]})})]})},N4=()=>{const[i,e]=D.useState([]);D.useEffect(()=>{(async()=>{const o=await De.getPublicEvents();e(o.slice(0,3))})()},[]);const n=()=>{const r=document.getElementById("eventos");r&&r.scrollIntoView({behavior:"smooth"})};return f.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-sans",children:[f.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-20 items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-gray-900 font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(mt,{to:"/login",className:"text-gray-500 hover:text-primary font-medium px-3 py-2 transition-colors",children:"Login"}),f.jsx(mt,{to:"/login",className:"bg-primary hover:bg-indigo-700 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-indigo-200 transition-all transform hover:-translate-y-0.5",children:"Inscrever-se"})]})]})})}),f.jsxs("div",{className:"relative overflow-hidden",children:[f.jsx("div",{className:"max-w-7xl mx-auto",children:f.jsx("div",{className:"relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32 pt-20 px-4 sm:px-6 lg:px-8",children:f.jsx("main",{className:"mt-10 mx-auto max-w-7xl sm:mt-12 md:mt-16 lg:mt-20 xl:mt-28",children:f.jsxs("div",{className:"sm:text-center lg:text-left",children:[f.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full border border-indigo-100 bg-indigo-50 text-primary text-xs font-bold uppercase tracking-wide mb-4",children:" Gesto de Eventos Acadmicos"}),f.jsxs("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl mb-6",children:[f.jsx("span",{className:"block",children:"Organize sua agenda"}),f.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600",children:"escolar com inteligncia"})]}),f.jsx("p",{className:"mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 leading-relaxed",children:"Nunca mais perca um workshop ou palestra. O EduEvent centraliza inscries, gerencia conflitos de horrio e mantm voc atualizado sobre todas as atividades do campus."}),f.jsxs("div",{className:"mt-8 sm:mt-10 sm:flex sm:justify-center lg:justify-start gap-4",children:[f.jsx("div",{className:"rounded-md shadow",children:f.jsx(mt,{to:"/login",className:"w-full flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-xl text-white bg-primary hover:bg-indigo-700 md:py-4 md:text-lg transition-all shadow-xl shadow-indigo-200",children:"Comear Agora"})}),f.jsx("div",{className:"mt-3 sm:mt-0",children:f.jsx("button",{onClick:n,className:"w-full flex items-center justify-center px-8 py-4 border border-gray-200 text-base font-bold rounded-xl text-gray-700 bg-white hover:bg-gray-50 md:py-4 md:text-lg transition-all",children:"Explorar Eventos"})})]})]})})})}),f.jsxs("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2",children:[f.jsx("img",{className:"h-56 w-full object-cover sm:h-72 md:h-96 lg:w-full lg:h-full",src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",alt:"Estudantes interagindo no campus"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/50 to-transparent lg:via-white/20"})]})]}),f.jsx("div",{className:"bg-indigo-900 py-12 border-y border-indigo-800",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"+1.5k"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Alunos Ativos"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"350+"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Eventos Realizados"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"100%"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Organizado"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"24/7"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Disponvel"})]})]})})}),f.jsx("div",{className:"py-24 bg-gray-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-base text-primary font-bold tracking-wide uppercase",children:"Recursos"}),f.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Tudo que voc precisa para gerenciar atividades"}),f.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 mx-auto",children:"Nossa plataforma foi desenhada para simplificar a vida acadmica, eliminando planilhas e confuso."})]}),f.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Gesto de Tempo Real"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"O sistema impede automaticamente inscries em eventos com horrios conflitantes. Nunca mais se preocupe com choque de agenda."})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-emerald-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrio Instantnea"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Garanta sua vaga em workshops e palestras com apenas um clique. Receba confirmao imediata e acompanhe seu status."})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Acesso Mobile"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Plataforma totalmente responsiva. Consulte seus eventos, locais e horrios diretamente do seu smartphone, onde estiver."})]})]})]})}),f.jsxs("div",{id:"eventos",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 w-full",children:[f.jsxs("div",{className:"flex justify-between items-end mb-12",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Prximos Eventos"}),f.jsx("p",{className:"mt-2 text-gray-500",children:"Confira o que est rolando no campus esta semana."})]}),f.jsxs(mt,{to:"/login",className:"hidden md:flex items-center font-bold text-primary hover:text-indigo-700 transition",children:["Ver todos os eventos ",f.jsx("span",{className:"ml-2",children:""})]})]}),i.length===0?f.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-3xl border border-dashed border-gray-300",children:f.jsx("p",{className:"text-gray-400 text-lg",children:"Nenhum evento pblico em destaque no momento."})}):f.jsx("div",{className:"grid gap-8 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:i.map(r=>{var p;const o=(p=r.sessions[0])!=null&&p.date?new Date(r.sessions[0].date):new Date,c=o.getDate(),h=o.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return f.jsxs("div",{className:"group flex flex-col bg-white rounded-2xl shadow-sm hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden hover:-translate-y-1",children:[f.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{className:"bg-indigo-50 text-primary rounded-lg p-2 text-center min-w-[60px]",children:[f.jsx("span",{className:"block text-xs font-bold",children:h}),f.jsx("span",{className:"block text-xl font-extrabold leading-none",children:c})]}),f.jsxs("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold",children:[r.sessions.length," Sesses"]})]}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:r.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-3 mb-4 flex-1",children:r.description}),f.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-auto pt-4 border-t border-gray-50",children:[f.jsxs("svg",{className:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.location]})]}),f.jsx("div",{className:"bg-gray-50 px-6 py-4",children:f.jsx(mt,{to:"/login",className:"block w-full text-center font-bold text-primary hover:text-indigo-800 transition",children:"Garantir Vaga "})})]},r.id)})}),f.jsx("div",{className:"mt-8 text-center md:hidden",children:f.jsx(mt,{to:"/login",className:"font-bold text-primary",children:"Ver todos os eventos "})})]}),f.jsx("div",{className:"bg-primary",children:f.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between",children:[f.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl mb-4 md:mb-0",children:[f.jsx("span",{className:"block",children:"Pronto para organizar sua agenda?"}),f.jsx("span",{className:"block text-indigo-200 text-2xl mt-1",children:"Crie sua conta gratuitamente hoje mesmo."})]}),f.jsx("div",{className:"flex space-x-3",children:f.jsx(mt,{to:"/login",className:"bg-white text-primary font-bold px-6 py-3 rounded-lg shadow hover:bg-indigo-50 transition",children:"Criar Conta"})})]})}),f.jsx("footer",{className:"bg-gray-900 text-white mt-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-2xl font-bold tracking-tight text-white",children:"EduEvent"}),f.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Facilitando a gesto de eventos acadmicos e conectando alunos ao conhecimento de forma organizada e eficiente."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Plataforma"}),f.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Eventos"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Cursos"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Login Administrativo"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Contato"}),f.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[f.jsxs("li",{className:"flex items-center",children:[f.jsx("span",{className:"mr-2",children:""})," suporte@eduevent.com"]}),f.jsxs("li",{className:"flex items-center",children:[f.jsx("span",{className:"mr-2",children:""})," Campus Principal, Bloco A"]})]})]})]}),f.jsx("div",{className:"mt-12 border-t border-gray-800 pt-8 text-center text-sm text-gray-500",children:" 2024 EduEvent System. Todos os direitos reservados."})]})})]})},C4=()=>{const{id:i}=nb(),{user:e}=Hi(),n=Br(),[r,o]=D.useState(null),[c,h]=D.useState([]),[p,y]=D.useState([]),[g,x]=D.useState(!0),[E,T]=D.useState(null),[O,P]=D.useState(null),[z,U]=D.useState(null),$=D.useCallback(async()=>{if(!(!i||!e)){x(ae=>ae&&!0);try{const ae=await De.getEventById(i);if(!ae){n("/dashboard");return}o(ae);const R=(await De.getAvailableEventsForUser(e)).filter(I=>I.parentId===i);h(R);const C=await De.getEnrollmentsForUser(e.uid);y(C)}catch(ae){console.error(ae)}finally{x(!1)}}},[i,e,n]);D.useEffect(()=>{$()},[$]),D.useEffect(()=>{if(E)if(r&&r.id===E.id)r!==E&&T(r);else{const ae=c.find(he=>he.id===E.id);ae&&ae!==E&&T(ae)}},[r,c,E]);const ie=(ae,he)=>p.some(R=>R.eventId===ae&&R.sessionId===he),J=D.useCallback(async ae=>{if(!(!e||!E)){P(null),U(null);try{const he=await De.createEnrollment(e.uid,E.id,ae);if(P({type:"success",msg:"Inscrio realizada com sucesso!"}),y(R=>[...R,he]),i){const R=await De.getEventById(i);R&&o(R);const I=(await De.getAvailableEventsForUser(e)).filter(k=>k.parentId===i);h(I)}setTimeout(()=>{T(null)},1500)}catch(he){const R=he.message||"";if(R.startsWith("CONFLICT|")){const[C,I,k,V]=R.split("|");U({name:I,time:`${k} - ${V}`})}else P({type:"error",msg:R||"Falha ao inscrever"})}}},[e,E,i]),fe=ae=>{P(null),U(null),T(ae)};return g?f.jsx("div",{className:"p-12 text-center text-gray-500 font-medium",children:"Carregando detalhes do evento..."}):r?f.jsxs("div",{className:"space-y-8 pb-12",children:[f.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:f.jsxs("ol",{className:"flex items-center space-x-2",children:[f.jsx("li",{children:f.jsx(mt,{to:"/dashboard",className:"text-gray-500 hover:text-primary font-medium transition",children:"Eventos"})}),f.jsx("li",{children:f.jsx("span",{className:"text-gray-300",children:"/"})}),f.jsx("li",{className:"text-gray-900 font-semibold","aria-current":"page",children:r.name})]})}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 relative",children:[f.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),f.jsx("div",{className:"p-8 md:p-10",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-xs font-bold uppercase tracking-wide mb-4 border border-indigo-100",children:"Evento Principal"}),f.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mb-4 leading-tight",children:r.name}),f.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-6 max-w-4xl",children:r.description}),f.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 text-sm font-medium",children:[f.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-1.5 rounded-lg",children:[f.jsx("span",{className:"mr-2 text-xl",children:""})," ",r.location]}),f.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-1.5 rounded-lg",children:[f.jsx("span",{className:"mr-2 text-xl",children:""})," ",r.sessions.length," Sesses Principais"]})]})]}),r.sessions.length>0&&f.jsx("div",{className:"flex-shrink-0",children:f.jsxs("button",{onClick:()=>fe(r),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao Geral",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Atividades & Sub-eventos"}),f.jsx("div",{className:"h-px bg-gray-200 flex-1"})]}),c.length===0?f.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[f.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),f.jsx("p",{className:"text-gray-500 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(ae=>{const he=ae.sessions.length===1?ae.sessions[0]:null,R=he?he.capacity:0,C=he?he.filled:0,I=R>0?C/R*100:0,k=R>0&&C>=R;return f.jsxs("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col relative",children:[f.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 group-hover:bg-primary transition-colors"}),f.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary transition-colors",children:ae.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-3 mb-4 flex-1",children:ae.description}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mt-auto pt-4 border-t border-gray-50",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"w-6 text-center mr-2 text-gray-400",children:""}),f.jsx("span",{className:"font-medium",children:ae.location})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"w-6 text-center mr-2 text-gray-400",children:""}),f.jsx("span",{className:"font-medium",children:ae.sessions.length>1?`${ae.sessions.length} opes de horrio`:`${ln(he==null?void 0:he.date)}  ${he==null?void 0:he.startTime}`})]})]}),he&&f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:f.jsx("span",{className:k?"text-red-600":"text-gray-500",children:k?"LOTADO":`${R-C} vagas`})}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:f.jsx("div",{className:`h-full rounded-full ${k?"bg-red-500":"bg-emerald-500"}`,style:{width:`${I}%`}})})]})]}),f.jsx("button",{onClick:()=>fe(ae),className:"w-full py-3 bg-gray-50 hover:bg-primary hover:text-white text-primary font-bold text-sm transition-colors border-t border-gray-100",children:ae.sessions.length>1?"Escolher Horrio":k?"Ver Detalhes":"Inscrever-se Agora"})]},ae.id)})}),f.jsx(us,{isOpen:!!E,onClose:()=>T(null),title:E?E.name:"",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:f.jsx("p",{className:"text-gray-700 leading-relaxed",children:E==null?void 0:E.description})}),O&&f.jsxs("div",{className:`p-4 rounded-md border flex items-start ${O.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[f.jsx("span",{className:"mr-3 text-xl",children:O.type==="success"?"":""}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold",children:O.type==="success"?"Sucesso!":"Erro"}),f.jsx("p",{className:"text-sm",children:O.msg})]})]}),z&&f.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-bold text-amber-800",children:"Conflito de Horrio"}),f.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[f.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),f.jsxs("div",{className:"bg-white bg-opacity-50 p-2 rounded border border-amber-200",children:[f.jsx("p",{className:"font-semibold",children:z.name}),f.jsx("p",{className:"text-xs",children:z.time})]})]})]})]})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[f.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:E==null?void 0:E.sessions.map(ae=>{const he=ie(E.id,ae.id),R=ae.filled>=ae.capacity,C=ae.filled/ae.capacity*100;return f.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${he?"border-green-500 bg-green-50 ring-1 ring-green-500":R?"border-gray-200 bg-gray-50 opacity-90":"border-gray-200 hover:border-primary hover:shadow-md bg-white"}`,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-bold text-gray-900 text-lg",children:ln(ae.date)}),he&&f.jsx("span",{className:"bg-green-200 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),f.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-4",children:f.jsxs("span",{className:"flex items-center",children:[" ",ae.startTime," - ",ae.endTime]})}),f.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${R?"bg-red-500":C>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(C,100)}%`}})}),f.jsx("span",{className:`text-xs font-bold w-24 text-right ${R?"text-red-600":"text-gray-500"}`,children:R?"ESGOTADO":`${ae.capacity-ae.filled} vagas`})]})]}),f.jsx("div",{className:"flex items-center",children:he?f.jsx("button",{disabled:!0,className:"w-full sm:w-auto bg-white border border-green-500 text-green-600 font-bold py-2 px-4 rounded-lg opacity-100",children:"Inscrito"}):f.jsx("button",{onClick:()=>J(ae.id),disabled:R,className:`w-full sm:w-auto px-6 py-2.5 rounded-lg font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all ${R?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-indigo-700 hover:shadow-md"}`,children:R?"Lotado":"Inscrever"})})]})},ae.id)})})]})]})})]}):f.jsx("div",{className:"p-12 text-center text-red-500 font-bold",children:"Evento no encontrado."})},Ci=({children:i,roleRequired:e})=>{const{user:n,loading:r}=Hi();return r?f.jsx("div",{className:"h-screen flex items-center justify-center",children:"Carregando..."}):n?!n.isOnboarded&&window.location.hash!=="#/complete-profile"?f.jsx(Sh,{to:"/complete-profile"}):e&&n.role!==e?f.jsx(Sh,{to:"/dashboard"}):f.jsx(f.Fragment,{children:i}):f.jsx(Sh,{to:"/login"})},R4=()=>{const{user:i}=Hi();return f.jsxs(pS,{children:[f.jsx(ls,{path:"/",element:i?f.jsx(Sh,{to:"/dashboard"}):f.jsx(N4,{})}),f.jsx(ls,{path:"/login",element:f.jsx(f4,{})}),f.jsx(ls,{path:"/complete-profile",element:f.jsx(Ci,{children:f.jsx(m4,{})})}),f.jsx(ls,{path:"/dashboard",element:f.jsx(Ci,{children:f.jsx(wr,{children:f.jsx(y4,{})})})}),f.jsx(ls,{path:"/event/:id",element:f.jsx(Ci,{children:f.jsx(wr,{children:f.jsx(C4,{})})})}),f.jsx(ls,{path:"/my-enrollments",element:f.jsx(Ci,{children:f.jsx(wr,{children:f.jsx(A4,{})})})}),f.jsx(ls,{path:"/admin/events",element:f.jsx(Ci,{roleRequired:Et.ADMIN,children:f.jsx(wr,{children:f.jsx(_4,{})})})}),f.jsx(ls,{path:"/admin/events/:id/enrollments",element:f.jsx(Ci,{roleRequired:Et.ADMIN,children:f.jsx(wr,{children:f.jsx(T4,{})})})}),f.jsx(ls,{path:"/admin/courses",element:f.jsx(Ci,{roleRequired:Et.ADMIN,children:f.jsx(wr,{children:f.jsx(w4,{})})})}),f.jsx(ls,{path:"/admin/users",element:f.jsx(Ci,{roleRequired:Et.ADMIN,children:f.jsx(wr,{children:f.jsx(E4,{})})})}),f.jsx(ls,{path:"/admin/dev",element:f.jsx(Ci,{roleRequired:Et.ADMIN,children:f.jsx(wr,{children:f.jsx(S4,{})})})})]})};function I4(){return f.jsx(d4,{children:f.jsx(PS,{children:f.jsx(R4,{})})})}const Lw=document.getElementById("root");if(!Lw)throw new Error("Could not find root element to mount to");const D4=T1.createRoot(Lw);D4.render(f.jsx(Rc.StrictMode,{children:f.jsx(I4,{})}));
