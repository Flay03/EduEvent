(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function tE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Mm={exports:{}},lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function vS(){if(e_)return lc;e_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return lc.Fragment=e,lc.jsx=n,lc.jsxs=n,lc}var t_;function _S(){return t_||(t_=1,Mm.exports=vS()),Mm.exports}var f=_S(),Vm={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function xS(){if(n_)return Me;n_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function O(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function G(V,ee,oe){this.props=V,this.context=ee,this.refs=P,this.updater=oe||L}G.prototype.isReactComponent={},G.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},G.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=G.prototype;function Y(V,ee,oe){this.props=V,this.context=ee,this.refs=P,this.updater=oe||L}var de=Y.prototype=new J;de.constructor=Y,k(de,G.prototype),de.isPureReactComponent=!0;var ye=Array.isArray;function le(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function I(V,ee,oe){var he=oe.ref;return{$$typeof:i,type:V,key:ee,ref:he!==void 0?he:null,props:oe}}function U(V,ee){return I(V.type,ee,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function D(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return ee[oe]})}var S=/\/+/g;function Te(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):ee.toString(36)}function Ee(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(le,le):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,ee,oe,he,Ie){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var Pe=!1;if(V===null)Pe=!0;else switch(Re){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(V.$$typeof){case i:case e:Pe=!0;break;case x:return Pe=V._init,K(Pe(V._payload),ee,oe,he,Ie)}}if(Pe)return Ie=Ie(V),Pe=he===""?"."+Te(V,0):he,ye(Ie)?(oe="",Pe!=null&&(oe=Pe.replace(S,"$&/")+"/"),K(Ie,ee,oe,"",function(Wn){return Wn})):Ie!=null&&(M(Ie)&&(Ie=U(Ie,oe+(Ie.key==null||V&&V.key===Ie.key?"":(""+Ie.key).replace(S,"$&/")+"/")+Pe)),ee.push(Ie)),1;Pe=0;var bt=he===""?".":he+":";if(ye(V))for(var ot=0;ot<V.length;ot++)he=V[ot],Re=bt+Te(he,ot),Pe+=K(he,ee,oe,Re,Ie);else if(ot=O(V),typeof ot=="function")for(V=ot.call(V),ot=0;!(he=V.next()).done;)he=he.value,Re=bt+Te(he,ot++),Pe+=K(he,ee,oe,Re,Ie);else if(Re==="object"){if(typeof V.then=="function")return K(Ee(V),ee,oe,he,Ie);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ae(V,ee,oe){if(V==null)return V;var he=[],Ie=0;return K(V,he,"","",function(Re){return ee.call(oe,Re,Ie++)}),he}function xe(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var be=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ne={map:ae,forEach:function(V,ee,oe){ae(V,function(){ee.apply(this,arguments)},oe)},count:function(V){var ee=0;return ae(V,function(){ee++}),ee},toArray:function(V){return ae(V,function(ee){return ee})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Me.Activity=b,Me.Children=Ne,Me.Component=G,Me.Fragment=n,Me.Profiler=o,Me.PureComponent=Y,Me.StrictMode=r,Me.Suspense=y,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Me.__COMPILER_RUNTIME={__proto__:null,c:function(V){return C.H.useMemoCache(V)}},Me.cache=function(V){return function(){return V.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(V,ee,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var he=k({},V.props),Ie=V.key;if(ee!=null)for(Re in ee.key!==void 0&&(Ie=""+ee.key),ee)!N.call(ee,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ee.ref===void 0||(he[Re]=ee[Re]);var Re=arguments.length-2;if(Re===1)he.children=oe;else if(1<Re){for(var Pe=Array(Re),bt=0;bt<Re;bt++)Pe[bt]=arguments[bt+2];he.children=Pe}return I(V.type,Ie,he)},Me.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Me.createElement=function(V,ee,oe){var he,Ie={},Re=null;if(ee!=null)for(he in ee.key!==void 0&&(Re=""+ee.key),ee)N.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ie[he]=ee[he]);var Pe=arguments.length-2;if(Pe===1)Ie.children=oe;else if(1<Pe){for(var bt=Array(Pe),ot=0;ot<Pe;ot++)bt[ot]=arguments[ot+2];Ie.children=bt}if(V&&V.defaultProps)for(he in Pe=V.defaultProps,Pe)Ie[he]===void 0&&(Ie[he]=Pe[he]);return I(V,Re,Ie)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(V){return{$$typeof:p,render:V}},Me.isValidElement=M,Me.lazy=function(V){return{$$typeof:x,_payload:{_status:-1,_result:V},_init:xe}},Me.memo=function(V,ee){return{$$typeof:g,type:V,compare:ee===void 0?null:ee}},Me.startTransition=function(V){var ee=C.T,oe={};C.T=oe;try{var he=V(),Ie=C.S;Ie!==null&&Ie(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(le,be)}catch(Re){be(Re)}finally{ee!==null&&oe.types!==null&&(ee.types=oe.types),C.T=ee}},Me.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Me.use=function(V){return C.H.use(V)},Me.useActionState=function(V,ee,oe){return C.H.useActionState(V,ee,oe)},Me.useCallback=function(V,ee){return C.H.useCallback(V,ee)},Me.useContext=function(V){return C.H.useContext(V)},Me.useDebugValue=function(){},Me.useDeferredValue=function(V,ee){return C.H.useDeferredValue(V,ee)},Me.useEffect=function(V,ee){return C.H.useEffect(V,ee)},Me.useEffectEvent=function(V){return C.H.useEffectEvent(V)},Me.useId=function(){return C.H.useId()},Me.useImperativeHandle=function(V,ee,oe){return C.H.useImperativeHandle(V,ee,oe)},Me.useInsertionEffect=function(V,ee){return C.H.useInsertionEffect(V,ee)},Me.useLayoutEffect=function(V,ee){return C.H.useLayoutEffect(V,ee)},Me.useMemo=function(V,ee){return C.H.useMemo(V,ee)},Me.useOptimistic=function(V,ee){return C.H.useOptimistic(V,ee)},Me.useReducer=function(V,ee,oe){return C.H.useReducer(V,ee,oe)},Me.useRef=function(V){return C.H.useRef(V)},Me.useState=function(V){return C.H.useState(V)},Me.useSyncExternalStore=function(V,ee,oe){return C.H.useSyncExternalStore(V,ee,oe)},Me.useTransition=function(){return C.H.useTransition()},Me.version="19.2.0",Me}var s_;function Cp(){return s_||(s_=1,Vm.exports=xS()),Vm.exports}var R=Cp();const Mc=tE(R);var km={exports:{}},cc={},Lm={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function ES(){return i_||(i_=1,(function(i){function e(K,ae){var xe=K.length;K.push(ae);e:for(;0<xe;){var be=xe-1>>>1,Ne=K[be];if(0<o(Ne,ae))K[be]=ae,K[xe]=Ne,xe=be;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ae=K[0],xe=K.pop();if(xe!==ae){K[0]=xe;e:for(var be=0,Ne=K.length,V=Ne>>>1;be<V;){var ee=2*(be+1)-1,oe=K[ee],he=ee+1,Ie=K[he];if(0>o(oe,xe))he<Ne&&0>o(Ie,oe)?(K[be]=Ie,K[he]=xe,be=he):(K[be]=oe,K[ee]=xe,be=ee);else if(he<Ne&&0>o(Ie,xe))K[be]=Ie,K[he]=xe,be=he;else break e}}return ae}function o(K,ae){var xe=K.sortIndex-ae.sortIndex;return xe!==0?xe:K.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();i.unstable_now=function(){return u.now()-p}}var y=[],g=[],x=1,b=null,T=3,O=!1,L=!1,k=!1,P=!1,G=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function de(K){for(var ae=n(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=K)r(g),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=n(g)}}function ye(K){if(k=!1,de(K),!L)if(n(y)!==null)L=!0,le||(le=!0,D());else{var ae=n(g);ae!==null&&Ee(ye,ae.startTime-K)}}var le=!1,C=-1,N=5,I=-1;function U(){return P?!0:!(i.unstable_now()-I<N)}function M(){if(P=!1,le){var K=i.unstable_now();I=K;var ae=!0;try{e:{L=!1,k&&(k=!1,J(C),C=-1),O=!0;var xe=T;try{t:{for(de(K),b=n(y);b!==null&&!(b.expirationTime>K&&U());){var be=b.callback;if(typeof be=="function"){b.callback=null,T=b.priorityLevel;var Ne=be(b.expirationTime<=K);if(K=i.unstable_now(),typeof Ne=="function"){b.callback=Ne,de(K),ae=!0;break t}b===n(y)&&r(y),de(K)}else r(y);b=n(y)}if(b!==null)ae=!0;else{var V=n(g);V!==null&&Ee(ye,V.startTime-K),ae=!1}}break e}finally{b=null,T=xe,O=!1}ae=void 0}}finally{ae?D():le=!1}}}var D;if(typeof Y=="function")D=function(){Y(M)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Te=S.port2;S.port1.onmessage=M,D=function(){Te.postMessage(null)}}else D=function(){G(M,0)};function Ee(K,ae){C=G(function(){K(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(K){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var xe=T;T=ae;try{return K()}finally{T=xe}},i.unstable_requestPaint=function(){P=!0},i.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var xe=T;T=K;try{return ae()}finally{T=xe}},i.unstable_scheduleCallback=function(K,ae,xe){var be=i.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?be+xe:be):xe=be,K){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=xe+Ne,K={id:x++,callback:ae,priorityLevel:K,startTime:xe,expirationTime:Ne,sortIndex:-1},xe>be?(K.sortIndex=xe,e(g,K),n(y)===null&&K===n(g)&&(k?(J(C),C=-1):k=!0,Ee(ye,xe-be))):(K.sortIndex=Ne,e(y,K),L||O||(L=!0,le||(le=!0,D()))),K},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(K){var ae=T;return function(){var xe=T;T=ae;try{return K.apply(this,arguments)}finally{T=xe}}}})(Pm)),Pm}var r_;function bS(){return r_||(r_=1,Lm.exports=ES()),Lm.exports}var Um={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function wS(){if(a_)return mn;a_=1;var i=Cp();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,g,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:g,implementation:x}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mn.createPortal=function(y,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,x)},mn.flushSync=function(y){var g=u.T,x=r.p;try{if(u.T=null,r.p=2,y)return y()}finally{u.T=g,r.p=x,r.d.f()}},mn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},mn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},mn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var x=g.as,b=p(x,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:O}):x==="script"&&r.d.X(y,{crossOrigin:b,integrity:T,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},mn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},mn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,b=p(x,g.crossOrigin);r.d.L(y,x,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},mn.preloadModule=function(y,g){if(typeof y=="string")if(g){var x=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},mn.requestFormReset=function(y){r.d.r(y)},mn.unstable_batchedUpdates=function(y,g){return y(g)},mn.useFormState=function(y,g,x){return u.H.useFormState(y,g,x)},mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},mn.version="19.2.0",mn}var o_;function TS(){if(o_)return Um.exports;o_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Um.exports=wS(),Um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function SS(){if(l_)return cc;l_=1;var i=bS(),e=Cp(),n=TS();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return y(h),t;if(m===l)return y(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var _=!1,w=h.child;w;){if(w===a){_=!0,a=h,l=m;break}if(w===l){_=!0,l=h,a=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===a){_=!0,a=m,l=h;break}if(w===l){_=!0,l=m,a=h;break}w=w.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var S=Symbol.for("react.client.reference");function Te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case G:return"Profiler";case P:return"StrictMode";case ye:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case Y:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case de:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:Te(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return Te(t(s))}catch{}}return null}var Ee=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},be=[],Ne=-1;function V(t){return{current:t}}function ee(t){0>Ne||(t.current=be[Ne],be[Ne]=null,Ne--)}function oe(t,s){Ne++,be[Ne]=t.current,t.current=s}var he=V(null),Ie=V(null),Re=V(null),Pe=V(null);function bt(t,s){switch(oe(Re,s),oe(Ie,t),oe(he,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?wv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=wv(s),t=Tv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(he),oe(he,t)}function ot(){ee(he),ee(Ie),ee(Re)}function Wn(t){t.memoizedState!==null&&oe(Pe,t);var s=he.current,a=Tv(s,t.type);s!==a&&(oe(Ie,t),oe(he,a))}function Vn(t){Ie.current===t&&(ee(he),ee(Ie)),Pe.current===t&&(ee(Pe),ic._currentValue=xe)}var gs,re;function Xe(t){if(gs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);gs=s&&s[1]||"",re=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gs+t+re}var xn=!1;function kn(t,s){if(!t||xn)return"";xn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var Q=X}Reflect.construct(t,[],se)}else{try{se.call()}catch(X){Q=X}t.call(se.prototype)}}else{try{throw Error()}catch(X){Q=X}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var j=_.split(`
`),H=w.split(`
`);for(h=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===j.length||h===H.length)for(l=j.length-1,h=H.length-1;1<=l&&0<=h&&j[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(j[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||j[l]!==H[h]){var Z=`
`+j[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=h);break}}}finally{xn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Xe(a):""}function ui(t,s){switch(t.tag){case 26:case 27:case 5:return Xe(t.type);case 16:return Xe("Lazy");case 13:return t.child!==s&&s!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return kn(t.type,!1);case 11:return kn(t.type.render,!1);case 1:return kn(t.type,!0);case 31:return Xe("Activity");default:return""}}function Xr(t){try{var s="",a=null;do s+=ui(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var At=Object.prototype.hasOwnProperty,Dt=i.unstable_scheduleCallback,Vs=i.unstable_cancelCallback,ll=i.unstable_shouldYield,Fa=i.unstable_requestPaint,rn=i.unstable_now,di=i.unstable_getCurrentPriorityLevel,Jr=i.unstable_ImmediatePriority,Qi=i.unstable_UserBlockingPriority,ys=i.unstable_NormalPriority,Ha=i.unstable_LowPriority,ne=i.unstable_IdlePriority,ve=i.log,Ze=i.unstable_setDisableYieldValue,ft=null,wt=null;function En(t){if(typeof ve=="function"&&Ze(t),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(ft,t)}catch{}}var vt=Math.clz32?Math.clz32:An,Wr=Math.log,vs=Math.LN2;function An(t){return t>>>=0,t===0?32:31-(Wr(t)/vs|0)|0}var ks=256,Zr=262144,kt=4194304;function Ls(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ps(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=Ls(l):(_&=w,_!==0?h=Ls(_):a||(a=w&~t,a!==0&&(h=Ls(a))))):(w=l&~m,w!==0?h=Ls(w):_!==0?h=Ls(_):a||(a=l&~t,a!==0&&(h=Ls(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function _s(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Lh(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wc(){var t=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),t}function Us(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function ea(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ph(t,s,a,l,h,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,j=t.expirationTimes,H=t.hiddenUpdates;for(a=_&~a;0<a;){var Z=31-vt(a),se=1<<Z;w[Z]=0,j[Z]=-1;var Q=H[Z];if(Q!==null)for(H[Z]=null,Z=0;Z<Q.length;Z++){var X=Q[Z];X!==null&&(X.lane&=-536870913)}a&=~se}l!==0&&ta(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function ta(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-vt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function cl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-vt(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function ul(t,s){var a=s&-s;return a=(a&42)!==0?1:na(a),(a&(t.suspendedLanes|s))!==0?0:a}function na(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function hi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Zc(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:Kv(t.type))}function xs(t,s){var a=ae.p;try{return ae.p=t,s()}finally{ae.p=a}}var Es=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Es,Wt="__reactProps$"+Es,zs="__reactContainer$"+Es,Ga="__reactEvents$"+Es,Uh="__reactListeners$"+Es,eu="__reactHandles$"+Es,tu="__reactResources$"+Es,Bs="__reactMarker$"+Es;function Qa(t){delete t[Lt],delete t[Wt],delete t[Ga],delete t[Uh],delete t[eu]}function qs(t){var s=t[Lt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[zs]||a[Lt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Dv(t);t!==null;){if(a=t[Lt])return a;t=Dv(t)}return s}t=a,a=t.parentNode}return null}function Zn(t){if(t=t[Lt]||t[zs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Ln(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Fs(t){var s=t[tu];return s||(s=t[tu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(t){t[Bs]=!0}var dl=new Set,hl={};function Hs(t,s){Gs(t,s),Gs(t+"Capture",s)}function Gs(t,s){for(hl[t]=s,t=0;t<s.length;t++)dl.add(s[t])}var fl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ml={},pl={};function nu(t){return At.call(pl,t)?!0:At.call(ml,t)?!1:fl.test(t)?pl[t]=!0:(ml[t]=!0,!1)}function Ka(t,s,a){if(nu(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Pn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ut(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ki(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gl(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function st(t){if(!t._valueTracker){var s=Ki(t)?"checked":"value";t._valueTracker=gl(t,s,""+t[s])}}function sa(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Ki(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ia=/[\n"\\]/g;function Nn(t){return t.replace(ia,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $a(t,s,a,l,h,m,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Zt(s)):t.value!==""+Zt(s)&&(t.value=""+Zt(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?yl(t,_,Zt(s)):a!=null?yl(t,_,Zt(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Zt(w):t.removeAttribute("name")}function su(t,s,a,l,h,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){st(t);return}a=a!=null?""+Zt(a):"",s=s!=null?""+Zt(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),st(t)}function yl(t,s,a){s==="number"&&Qs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function $i(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Zt(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function iu(t,s,a){if(s!=null&&(s=""+Zt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Zt(a):""}function Yi(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ee(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Zt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),st(t)}function Cn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vl(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||ru.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function _l(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&vl(t,h,l)}else for(var m in s)s.hasOwnProperty(m)&&vl(t,m,s[m])}function Ya(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(t){return Xi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function bs(){}var xl=null;function es(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ji=null,Ks=null;function ra(t){var s=Zn(t);if(s&&(t=s.stateNode)){var a=t[Wt]||null;e:switch(t=s.stateNode,s.type){case"input":if($a(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[Wt]||null;if(!h)throw Error(r(90));$a(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&sa(l)}break e;case"textarea":iu(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&$i(t,!!a.multiple,s,!1)}}}var Ja=!1;function Wi(t,s,a){if(Ja)return t(s,a);Ja=!0;try{var l=t(s);return l}finally{if(Ja=!1,(Ji!==null||Ks!==null)&&(Zu(),Ji&&(s=Ji,t=Ks,Ks=Ji=null,ra(s),t)))for(s=0;s<t.length;s++)ra(t[s])}}function ws(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Wt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aa=!1;if(ts)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){aa=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{aa=!1}var $s=null,El=null,oa=null;function bl(){if(oa)return oa;var t,s=El,a=s.length,l,h="value"in $s?$s.value:$s.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===h[m-l];l++);return oa=h.slice(t,1<l?1-l:void 0)}function la(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function fi(){return!0}function Ts(){return!1}function an(t){function s(a,l,h,m,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fi:Ts,this.isPropagationStopped=Ts,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),s}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=an(mi),Zi=b({},mi,{view:0,detail:0}),wl=an(Zi),er,Wa,Xs,Za=b({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(er=t.screenX-Xs.screenX,Wa=t.screenY-Xs.screenY):Wa=er=0,Xs=t),er)},movementY:function(t){return"movementY"in t?t.movementY:Wa}}),Tl=an(Za),ca=b({},Za,{dataTransfer:0}),ou=an(ca),lu=b({},Zi,{relatedTarget:0}),ua=an(lu),Sl=b({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),cu=an(Sl),eo=b({},mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uu=an(eo),du=b({},mi,{data:0}),Js=an(du),hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=mu[t])?!!s[t]:!1}function tr(){return pu}var bn=b({},Zi,{key:function(t){if(t.key){var s=hu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=la(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(t){return t.type==="keypress"?la(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?la(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gu=an(bn),yu=b({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pi=an(yu),d=b({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),v=an(d),E=b({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=an(E),q=b({},Za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=an(q),ue=b({},mi,{newState:0,oldState:0}),ke=an(ue),jt=[9,13,27,32],et=ts&&"CompositionEvent"in window,_t=null;ts&&"documentMode"in document&&(_t=document.documentMode);var ns=ts&&"TextEvent"in window&&!_t,Ws=ts&&(!et||_t&&8<_t&&11>=_t),Ss=" ",As=!1;function da(t,s){switch(t){case"keyup":return jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function to(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var no=!1;function qw(t,s){switch(t){case"compositionend":return to(s);case"keypress":return s.which!==32?null:(As=!0,Ss);case"textInput":return t=s.data,t===Ss&&As?null:t;default:return null}}function Fw(t,s){if(no)return t==="compositionend"||!et&&da(t,s)?(t=bl(),oa=El=$s=null,no=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ws&&s.locale!=="ko"?null:s.data;default:return null}}var Hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Hw[t.type]:s==="textarea"}function Vg(t,s,a,l){Ji?Ks?Ks.push(l):Ks=[l]:Ji=l,s=ad(s,"onChange"),0<s.length&&(a=new Ys("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Al=null,Nl=null;function Gw(t){yv(t,0)}function vu(t){var s=Ln(t);if(sa(s))return t}function kg(t,s){if(t==="change")return s}var Lg=!1;if(ts){var zh;if(ts){var Bh="oninput"in document;if(!Bh){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),Bh=typeof Pg.oninput=="function"}zh=Bh}else zh=!1;Lg=zh&&(!document.documentMode||9<document.documentMode)}function Ug(){Al&&(Al.detachEvent("onpropertychange",zg),Nl=Al=null)}function zg(t){if(t.propertyName==="value"&&vu(Nl)){var s=[];Vg(s,Nl,t,es(t)),Wi(Gw,s)}}function Qw(t,s,a){t==="focusin"?(Ug(),Al=s,Nl=a,Al.attachEvent("onpropertychange",zg)):t==="focusout"&&Ug()}function Kw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Nl)}function $w(t,s){if(t==="click")return vu(s)}function Yw(t,s){if(t==="input"||t==="change")return vu(s)}function Xw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Un=typeof Object.is=="function"?Object.is:Xw;function Cl(t,s){if(Un(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!At.call(s,h)||!Un(t[h],s[h]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,s){var a=Bg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bg(a)}}function Fg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Fg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Hg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Qs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Qs(t.document)}return s}function qh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Jw=ts&&"documentMode"in document&&11>=document.documentMode,so=null,Fh=null,Il=null,Hh=!1;function Gg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||so==null||so!==Qs(l)||(l=so,"selectionStart"in l&&qh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Il&&Cl(Il,l)||(Il=l,l=ad(Fh,"onSelect"),0<l.length&&(s=new Ys("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=so)))}function ha(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var io={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Gh={},Qg={};ts&&(Qg=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function fa(t){if(Gh[t])return Gh[t];if(!io[t])return t;var s=io[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Qg)return Gh[t]=s[a];return t}var Kg=fa("animationend"),$g=fa("animationiteration"),Yg=fa("animationstart"),Ww=fa("transitionrun"),Zw=fa("transitionstart"),eT=fa("transitioncancel"),Xg=fa("transitionend"),Jg=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function Ns(t,s){Jg.set(t,s),Hs(s,[t])}var _u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ss=[],ro=0,Kh=0;function xu(){for(var t=ro,s=Kh=ro=0;s<t;){var a=ss[s];ss[s++]=null;var l=ss[s];ss[s++]=null;var h=ss[s];ss[s++]=null;var m=ss[s];if(ss[s++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}m!==0&&Wg(a,h,m)}}function Eu(t,s,a,l){ss[ro++]=t,ss[ro++]=s,ss[ro++]=a,ss[ro++]=l,Kh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function $h(t,s,a,l){return Eu(t,s,a,l),bu(t)}function ma(t,s){return Eu(t,null,null,s),bu(t)}function Wg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-vt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),m):null}function bu(t){if(50<Jl)throw Jl=0,im=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ao={};function tT(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,s,a,l){return new tT(t,s,a,l)}function Yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gi(t,s){var a=t.alternate;return a===null?(a=zn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Zg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function wu(t,s,a,l,h,m){var _=0;if(l=t,typeof t=="function")Yh(t)&&(_=1);else if(typeof t=="string")_=aS(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=zn(31,a,s,h),t.elementType=I,t.lanes=m,t;case k:return pa(a.children,h,m,s);case P:_=8,h|=24;break;case G:return t=zn(12,a,s,h|2),t.elementType=G,t.lanes=m,t;case ye:return t=zn(13,a,s,h),t.elementType=ye,t.lanes=m,t;case le:return t=zn(19,a,s,h),t.elementType=le,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:_=10;break e;case J:_=9;break e;case de:_=11;break e;case C:_=14;break e;case N:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=zn(_,a,s,h),s.elementType=t,s.type=l,s.lanes=m,s}function pa(t,s,a,l){return t=zn(7,t,l,s),t.lanes=a,t}function Xh(t,s,a){return t=zn(6,t,null,s),t.lanes=a,t}function ey(t){var s=zn(18,null,null,0);return s.stateNode=t,s}function Jh(t,s,a){return s=zn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var ty=new WeakMap;function is(t,s){if(typeof t=="object"&&t!==null){var a=ty.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Xr(s)},ty.set(t,s),s)}return{value:t,source:s,stack:Xr(s)}}var oo=[],lo=0,Tu=null,Rl=0,rs=[],as=0,nr=null,Zs=1,ei="";function yi(t,s){oo[lo++]=Rl,oo[lo++]=Tu,Tu=t,Rl=s}function ny(t,s,a){rs[as++]=Zs,rs[as++]=ei,rs[as++]=nr,nr=t;var l=Zs;t=ei;var h=32-vt(l)-1;l&=~(1<<h),a+=1;var m=32-vt(s)+h;if(30<m){var _=h-h%5;m=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Zs=1<<32-vt(s)+h|a<<h|l,ei=m+t}else Zs=1<<m|a<<h|l,ei=t}function Wh(t){t.return!==null&&(yi(t,1),ny(t,1,0))}function Zh(t){for(;t===Tu;)Tu=oo[--lo],oo[lo]=null,Rl=oo[--lo],oo[lo]=null;for(;t===nr;)nr=rs[--as],rs[as]=null,ei=rs[--as],rs[as]=null,Zs=rs[--as],rs[as]=null}function sy(t,s){rs[as++]=Zs,rs[as++]=ei,rs[as++]=nr,Zs=s.id,ei=s.overflow,nr=t}var on=null,mt=null,Ke=!1,sr=null,os=!1,ef=Error(r(519));function ir(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(is(s,t)),ef}function iy(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Lt]=t,s[Wt]=l,a){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Be(Zl[a],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),su(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Yi(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Ev(s.textContent,a)?(l.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),l.onScroll!=null&&Be("scroll",s),l.onScrollEnd!=null&&Be("scrollend",s),l.onClick!=null&&(s.onclick=bs),s=!0):s=!1,s||ir(t,!0)}function ry(t){for(on=t.return;on;)switch(on.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:on=on.return}}function co(t){if(t!==on)return!1;if(!Ke)return ry(t),Ke=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||_m(t.type,t.memoizedProps)),a=!a),a&&mt&&ir(t),ry(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));mt=Rv(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));mt=Rv(t)}else s===27?(s=mt,vr(t.type)?(t=Tm,Tm=null,mt=t):mt=s):mt=on?cs(t.stateNode.nextSibling):null;return!0}function ga(){mt=on=null,Ke=!1}function tf(){var t=sr;return t!==null&&(jn===null?jn=t:jn.push.apply(jn,t),sr=null),t}function Dl(t){sr===null?sr=[t]:sr.push(t)}var nf=V(null),ya=null,vi=null;function rr(t,s,a){oe(nf,s._currentValue),s._currentValue=a}function _i(t){t._currentValue=nf.current,ee(nf)}function sf(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function rf(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var j=0;j<s.length;j++)if(w.context===s[j]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),sf(m.return,a,t),l||(_=null);break e}m=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),sf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function uo(t,s,a,l){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var w=h.type;Un(h.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(h===Pe.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ic):t=[ic])}h=h.return}t!==null&&rf(s,t,a,l),s.flags|=262144}function Su(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function va(t){ya=t,vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return ay(ya,t)}function Au(t,s){return ya===null&&va(t),ay(t,s)}function ay(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},vi===null){if(t===null)throw Error(r(308));vi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else vi=vi.next=s;return a}var nT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},sT=i.unstable_scheduleCallback,iT=i.unstable_NormalPriority,zt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new nT,data:new Map,refCount:0}}function jl(t){t.refCount--,t.refCount===0&&sT(iT,function(){t.controller.abort()})}var Ol=null,of=0,ho=0,fo=null;function rT(t,s){if(Ol===null){var a=Ol=[];of=0,ho=um(),fo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return of++,s.then(oy,oy),s}function oy(){if(--of===0&&Ol!==null){fo!==null&&(fo.status="fulfilled");var t=Ol;Ol=null,ho=0,fo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function aT(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ly=K.S;K.S=function(t,s){G0=rn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&rT(t,s),ly!==null&&ly(t,s)};var _a=V(null);function lf(){var t=_a.current;return t!==null?t:ht.pooledCache}function Nu(t,s){s===null?oe(_a,_a.current):oe(_a,s.pool)}function cy(){var t=lf();return t===null?null:{parent:zt._currentValue,pool:t}}var mo=Error(r(460)),cf=Error(r(474)),Cu=Error(r(542)),Iu={then:function(){}};function uy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dy(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(bs,bs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,fy(t),t;default:if(typeof s.status=="string")s.then(bs,bs);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,fy(t),t}throw Ea=s,mo}}function xa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ea=a,mo):a}}var Ea=null;function hy(){if(Ea===null)throw Error(r(459));var t=Ea;return Ea=null,t}function fy(t){if(t===mo||t===Cu)throw Error(r(483))}var po=null,Ml=0;function Ru(t){var s=Ml;return Ml+=1,po===null&&(po=[]),dy(po,t,s)}function Vl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Du(t,s){throw s.$$typeof===T?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function my(t){function s(B,z){if(t){var F=B.deletions;F===null?(B.deletions=[z],B.flags|=16):F.push(z)}}function a(B,z){if(!t)return null;for(;z!==null;)s(B,z),z=z.sibling;return null}function l(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function h(B,z){return B=gi(B,z),B.index=0,B.sibling=null,B}function m(B,z,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<z?(B.flags|=67108866,z):F):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,z,F,te){return z===null||z.tag!==6?(z=Xh(F,B.mode,te),z.return=B,z):(z=h(z,F),z.return=B,z)}function j(B,z,F,te){var Se=F.type;return Se===k?Z(B,z,F.props.children,te,F.key):z!==null&&(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&xa(Se)===z.type)?(z=h(z,F.props),Vl(z,F),z.return=B,z):(z=wu(F.type,F.key,F.props,null,B.mode,te),Vl(z,F),z.return=B,z)}function H(B,z,F,te){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=Jh(F,B.mode,te),z.return=B,z):(z=h(z,F.children||[]),z.return=B,z)}function Z(B,z,F,te,Se){return z===null||z.tag!==7?(z=pa(F,B.mode,te,Se),z.return=B,z):(z=h(z,F),z.return=B,z)}function se(B,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Xh(""+z,B.mode,F),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return F=wu(z.type,z.key,z.props,null,B.mode,F),Vl(F,z),F.return=B,F;case L:return z=Jh(z,B.mode,F),z.return=B,z;case N:return z=xa(z),se(B,z,F)}if(Ee(z)||D(z))return z=pa(z,B.mode,F,null),z.return=B,z;if(typeof z.then=="function")return se(B,Ru(z),F);if(z.$$typeof===Y)return se(B,Au(B,z),F);Du(B,z)}return null}function Q(B,z,F,te){var Se=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Se!==null?null:w(B,z,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return F.key===Se?j(B,z,F,te):null;case L:return F.key===Se?H(B,z,F,te):null;case N:return F=xa(F),Q(B,z,F,te)}if(Ee(F)||D(F))return Se!==null?null:Z(B,z,F,te,null);if(typeof F.then=="function")return Q(B,z,Ru(F),te);if(F.$$typeof===Y)return Q(B,z,Au(B,F),te);Du(B,F)}return null}function X(B,z,F,te,Se){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(F)||null,w(z,B,""+te,Se);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case O:return B=B.get(te.key===null?F:te.key)||null,j(z,B,te,Se);case L:return B=B.get(te.key===null?F:te.key)||null,H(z,B,te,Se);case N:return te=xa(te),X(B,z,F,te,Se)}if(Ee(te)||D(te))return B=B.get(F)||null,Z(z,B,te,Se,null);if(typeof te.then=="function")return X(B,z,F,Ru(te),Se);if(te.$$typeof===Y)return X(B,z,F,Au(z,te),Se);Du(z,te)}return null}function ge(B,z,F,te){for(var Se=null,Je=null,_e=z,Ue=z=0,Fe=null;_e!==null&&Ue<F.length;Ue++){_e.index>Ue?(Fe=_e,_e=null):Fe=_e.sibling;var We=Q(B,_e,F[Ue],te);if(We===null){_e===null&&(_e=Fe);break}t&&_e&&We.alternate===null&&s(B,_e),z=m(We,z,Ue),Je===null?Se=We:Je.sibling=We,Je=We,_e=Fe}if(Ue===F.length)return a(B,_e),Ke&&yi(B,Ue),Se;if(_e===null){for(;Ue<F.length;Ue++)_e=se(B,F[Ue],te),_e!==null&&(z=m(_e,z,Ue),Je===null?Se=_e:Je.sibling=_e,Je=_e);return Ke&&yi(B,Ue),Se}for(_e=l(_e);Ue<F.length;Ue++)Fe=X(_e,B,Ue,F[Ue],te),Fe!==null&&(t&&Fe.alternate!==null&&_e.delete(Fe.key===null?Ue:Fe.key),z=m(Fe,z,Ue),Je===null?Se=Fe:Je.sibling=Fe,Je=Fe);return t&&_e.forEach(function(wr){return s(B,wr)}),Ke&&yi(B,Ue),Se}function Ce(B,z,F,te){if(F==null)throw Error(r(151));for(var Se=null,Je=null,_e=z,Ue=z=0,Fe=null,We=F.next();_e!==null&&!We.done;Ue++,We=F.next()){_e.index>Ue?(Fe=_e,_e=null):Fe=_e.sibling;var wr=Q(B,_e,We.value,te);if(wr===null){_e===null&&(_e=Fe);break}t&&_e&&wr.alternate===null&&s(B,_e),z=m(wr,z,Ue),Je===null?Se=wr:Je.sibling=wr,Je=wr,_e=Fe}if(We.done)return a(B,_e),Ke&&yi(B,Ue),Se;if(_e===null){for(;!We.done;Ue++,We=F.next())We=se(B,We.value,te),We!==null&&(z=m(We,z,Ue),Je===null?Se=We:Je.sibling=We,Je=We);return Ke&&yi(B,Ue),Se}for(_e=l(_e);!We.done;Ue++,We=F.next())We=X(_e,B,Ue,We.value,te),We!==null&&(t&&We.alternate!==null&&_e.delete(We.key===null?Ue:We.key),z=m(We,z,Ue),Je===null?Se=We:Je.sibling=We,Je=We);return t&&_e.forEach(function(yS){return s(B,yS)}),Ke&&yi(B,Ue),Se}function dt(B,z,F,te){if(typeof F=="object"&&F!==null&&F.type===k&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case O:e:{for(var Se=F.key;z!==null;){if(z.key===Se){if(Se=F.type,Se===k){if(z.tag===7){a(B,z.sibling),te=h(z,F.props.children),te.return=B,B=te;break e}}else if(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&xa(Se)===z.type){a(B,z.sibling),te=h(z,F.props),Vl(te,F),te.return=B,B=te;break e}a(B,z);break}else s(B,z);z=z.sibling}F.type===k?(te=pa(F.props.children,B.mode,te,F.key),te.return=B,B=te):(te=wu(F.type,F.key,F.props,null,B.mode,te),Vl(te,F),te.return=B,B=te)}return _(B);case L:e:{for(Se=F.key;z!==null;){if(z.key===Se)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){a(B,z.sibling),te=h(z,F.children||[]),te.return=B,B=te;break e}else{a(B,z);break}else s(B,z);z=z.sibling}te=Jh(F,B.mode,te),te.return=B,B=te}return _(B);case N:return F=xa(F),dt(B,z,F,te)}if(Ee(F))return ge(B,z,F,te);if(D(F)){if(Se=D(F),typeof Se!="function")throw Error(r(150));return F=Se.call(F),Ce(B,z,F,te)}if(typeof F.then=="function")return dt(B,z,Ru(F),te);if(F.$$typeof===Y)return dt(B,z,Au(B,F),te);Du(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,z!==null&&z.tag===6?(a(B,z.sibling),te=h(z,F),te.return=B,B=te):(a(B,z),te=Xh(F,B.mode,te),te.return=B,B=te),_(B)):a(B,z)}return function(B,z,F,te){try{Ml=0;var Se=dt(B,z,F,te);return po=null,Se}catch(_e){if(_e===mo||_e===Cu)throw _e;var Je=zn(29,_e,null,B.mode);return Je.lanes=te,Je.return=B,Je}finally{}}}var ba=my(!0),py=my(!1),ar=!1;function uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function df(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function or(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function lr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=bu(t),Wg(t,null,a),s}return Eu(t,l,s,a),bu(t)}function kl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,cl(t,a)}}function hf(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var ff=!1;function Ll(){if(ff){var t=fo;if(t!==null)throw t}}function Pl(t,s,a,l){ff=!1;var h=t.updateQueue;ar=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var j=w,H=j.next;j.next=null,_===null?m=H:_.next=H,_=j;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==_&&(w===null?Z.firstBaseUpdate=H:w.next=H,Z.lastBaseUpdate=j))}if(m!==null){var se=h.baseState;_=0,Z=H=j=null,w=m;do{var Q=w.lane&-536870913,X=Q!==w.lane;if(X?(qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===ho&&(ff=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ge=t,Ce=w;Q=s;var dt=a;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){se=ge.call(dt,se,Q);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,Q=typeof ge=="function"?ge.call(dt,se,Q):ge,Q==null)break e;se=b({},se,Q);break e;case 2:ar=!0}}Q=w.callback,Q!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(H=Z=X,j=se):Z=Z.next=X,_|=Q;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;X=w,w=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);Z===null&&(j=se),h.baseState=j,h.firstBaseUpdate=H,h.lastBaseUpdate=Z,m===null&&(h.shared.lanes=0),fr|=_,t.lanes=_,t.memoizedState=se}}function gy(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function yy(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)gy(a[t],s)}var go=V(null),ju=V(0);function vy(t,s){t=Ci,oe(ju,t),oe(go,s),Ci=t|s.baseLanes}function mf(){oe(ju,Ci),oe(go,go.current)}function pf(){Ci=ju.current,ee(go),ee(ju)}var Bn=V(null),ls=null;function cr(t){var s=t.alternate;oe(Ot,Ot.current&1),oe(Bn,t),ls===null&&(s===null||go.current!==null||s.memoizedState!==null)&&(ls=t)}function gf(t){oe(Ot,Ot.current),oe(Bn,t),ls===null&&(ls=t)}function _y(t){t.tag===22?(oe(Ot,Ot.current),oe(Bn,t),ls===null&&(ls=t)):ur()}function ur(){oe(Ot,Ot.current),oe(Bn,Bn.current)}function qn(t){ee(Bn),ls===t&&(ls=null),ee(Ot)}var Ot=V(0);function Ou(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bm(a)||wm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xi=0,Le=null,ct=null,Bt=null,Mu=!1,yo=!1,wa=!1,Vu=0,Ul=0,vo=null,oT=0;function Nt(){throw Error(r(321))}function yf(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Un(t[a],s[a]))return!1;return!0}function vf(t,s,a,l,h,m){return xi=m,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=t===null||t.memoizedState===null?n0:Of,wa=!1,m=a(l,h),wa=!1,yo&&(m=Ey(s,a,l,h)),xy(t),m}function xy(t){K.H=ql;var s=ct!==null&&ct.next!==null;if(xi=0,Bt=ct=Le=null,Mu=!1,Ul=0,vo=null,s)throw Error(r(300));t===null||qt||(t=t.dependencies,t!==null&&Su(t)&&(qt=!0))}function Ey(t,s,a,l){Le=t;var h=0;do{if(yo&&(vo=null),Ul=0,yo=!1,25<=h)throw Error(r(301));if(h+=1,Bt=ct=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=s0,m=s(a,l)}while(yo);return m}function lT(){var t=K.H,s=t.useState()[0];return s=typeof s.then=="function"?zl(s):s,t=t.useState()[0],(ct!==null?ct.memoizedState:null)!==t&&(Le.flags|=1024),s}function _f(){var t=Vu!==0;return Vu=0,t}function xf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Ef(t){if(Mu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Mu=!1}xi=0,Bt=ct=Le=null,yo=!1,Ul=Vu=0,vo=null}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Le.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Mt(){if(ct===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var s=Bt===null?Le.memoizedState:Bt.next;if(s!==null)Bt=s,ct=t;else{if(t===null)throw Le.alternate===null?Error(r(467)):Error(r(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Bt===null?Le.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(t){var s=Ul;return Ul+=1,vo===null&&(vo=[]),t=dy(vo,t,s),s=Le,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?n0:Of),t}function Lu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return zl(t);if(t.$$typeof===Y)return ln(t)}throw Error(r(438,String(t)))}function bf(t){var s=null,a=Le.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ku(),Le.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=U;return s.index++,a}function Ei(t,s){return typeof s=="function"?s(t):s}function Pu(t){var s=Mt();return wf(s,ct,t)}function wf(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}s.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var w=_=null,j=null,H=s,Z=!1;do{var se=H.lane&-536870913;if(se!==H.lane?(qe&se)===se:(xi&se)===se){var Q=H.revertLane;if(Q===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),se===ho&&(Z=!0);else if((xi&Q)===Q){H=H.next,Q===ho&&(Z=!0);continue}else se={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(w=j=se,_=m):j=j.next=se,Le.lanes|=Q,fr|=Q;se=H.action,wa&&a(m,se),m=H.hasEagerState?H.eagerState:a(m,se)}else Q={lane:se,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(w=j=Q,_=m):j=j.next=Q,Le.lanes|=se,fr|=se;H=H.next}while(H!==null&&H!==s);if(j===null?_=m:j.next=w,!Un(m,t.memoizedState)&&(qt=!0,Z&&(a=fo,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=j,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Tf(t){var s=Mt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do m=t(m,_.action),_=_.next;while(_!==h);Un(m,s.memoizedState)||(qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function by(t,s,a){var l=Le,h=Mt(),m=Ke;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!Un((ct||h).memoizedState,a);if(_&&(h.memoizedState=a,qt=!0),h=h.queue,Nf(Sy.bind(null,l,h,t),[t]),h.getSnapshot!==s||_||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,_o(9,{destroy:void 0},Ty.bind(null,l,h,a,s),null),ht===null)throw Error(r(349));m||(xi&127)!==0||wy(l,s,a)}return a}function wy(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Le.updateQueue,s===null?(s=ku(),Le.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Ty(t,s,a,l){s.value=a,s.getSnapshot=l,Ay(s)&&Ny(t)}function Sy(t,s,a){return a(function(){Ay(s)&&Ny(t)})}function Ay(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Un(t,a)}catch{return!0}}function Ny(t){var s=ma(t,2);s!==null&&On(s,t,2)}function Sf(t){var s=wn();if(typeof t=="function"){var a=t;if(t=a(),wa){En(!0);try{a()}finally{En(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:t},s}function Cy(t,s,a,l){return t.baseState=a,wf(t,ct,typeof l=="function"?l:Ei)}function cT(t,s,a,l,h){if(Bu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Iy(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Iy(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var m=K.T,_={};K.T=_;try{var w=a(h,l),j=K.S;j!==null&&j(_,w),Ry(t,s,w)}catch(H){Af(t,s,H)}finally{m!==null&&_.types!==null&&(m.types=_.types),K.T=m}}else try{m=a(h,l),Ry(t,s,m)}catch(H){Af(t,s,H)}}function Ry(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Dy(t,s,l)},function(l){return Af(t,s,l)}):Dy(t,s,a)}function Dy(t,s,a){s.status="fulfilled",s.value=a,jy(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Iy(t,a)))}function Af(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,jy(s),s=s.next;while(s!==l)}t.action=null}function jy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Oy(t,s){return s}function My(t,s){if(Ke){var a=ht.formState;if(a!==null){e:{var l=Le;if(Ke){if(mt){t:{for(var h=mt,m=os;h.nodeType!==8;){if(!m){h=null;break t}if(h=cs(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){mt=cs(h.nextSibling),l=h.data==="F!";break e}}ir(l)}l=!1}l&&(s=a[0])}}return a=wn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:s},a.queue=l,a=Zy.bind(null,Le,l),l.dispatch=a,l=Sf(!1),m=jf.bind(null,Le,!1,l.queue),l=wn(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=cT.bind(null,Le,h,m,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function Vy(t){var s=Mt();return ky(s,ct,t)}function ky(t,s,a){if(s=wf(t,s,Oy)[0],t=Pu(Ei)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=zl(s)}catch(_){throw _===mo?Cu:_}else l=s;s=Mt();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Le.flags|=2048,_o(9,{destroy:void 0},uT.bind(null,h,a),null)),[l,m,t]}function uT(t,s){t.action=s}function Ly(t){var s=Mt(),a=ct;if(a!==null)return ky(s,a,t);Mt(),s=s.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function _o(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Le.updateQueue,s===null&&(s=ku(),Le.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Py(){return Mt().memoizedState}function Uu(t,s,a,l){var h=wn();Le.flags|=t,h.memoizedState=_o(1|s,{destroy:void 0},a,l===void 0?null:l)}function zu(t,s,a,l){var h=Mt();l=l===void 0?null:l;var m=h.memoizedState.inst;ct!==null&&l!==null&&yf(l,ct.memoizedState.deps)?h.memoizedState=_o(s,m,a,l):(Le.flags|=t,h.memoizedState=_o(1|s,m,a,l))}function Uy(t,s){Uu(8390656,8,t,s)}function Nf(t,s){zu(2048,8,t,s)}function dT(t){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=ku(),Le.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function zy(t){var s=Mt().memoizedState;return dT({ref:s,nextImpl:t}),function(){if((tt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function By(t,s){return zu(4,2,t,s)}function qy(t,s){return zu(4,4,t,s)}function Fy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Hy(t,s,a){a=a!=null?a.concat([t]):null,zu(4,4,Fy.bind(null,s,t),a)}function Cf(){}function Gy(t,s){var a=Mt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&yf(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Qy(t,s){var a=Mt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&yf(s,l[1]))return l[0];if(l=t(),wa){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,s],l}function If(t,s,a){return a===void 0||(xi&1073741824)!==0&&(qe&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=K0(),Le.lanes|=t,fr|=t,a)}function Ky(t,s,a,l){return Un(a,s)?a:go.current!==null?(t=If(t,a,l),Un(t,s)||(qt=!0),t):(xi&42)===0||(xi&1073741824)!==0&&(qe&261930)===0?(qt=!0,t.memoizedState=a):(t=K0(),Le.lanes|=t,fr|=t,s)}function $y(t,s,a,l,h){var m=ae.p;ae.p=m!==0&&8>m?m:8;var _=K.T,w={};K.T=w,jf(t,!1,s,a);try{var j=h(),H=K.S;if(H!==null&&H(w,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Z=aT(j,l);Bl(t,s,Z,Gn(t))}else Bl(t,s,l,Gn(t))}catch(se){Bl(t,s,{then:function(){},status:"rejected",reason:se},Gn())}finally{ae.p=m,_!==null&&w.types!==null&&(_.types=w.types),K.T=_}}function hT(){}function Rf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var h=Yy(t).queue;$y(t,h,s,xe,a===null?hT:function(){return Xy(t),a(l)})}function Yy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:xe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Xy(t){var s=Yy(t);s.next===null&&(s=t.alternate.memoizedState),Bl(t,s.next.queue,{},Gn())}function Df(){return ln(ic)}function Jy(){return Mt().memoizedState}function Wy(){return Mt().memoizedState}function fT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Gn();t=or(a);var l=lr(s,t,a);l!==null&&(On(l,s,a),kl(l,s,a)),s={cache:af()},t.payload=s;return}s=s.return}}function mT(t,s,a){var l=Gn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(t)?e0(s,a):(a=$h(t,s,a,l),a!==null&&(On(a,t,l),t0(a,s,l)))}function Zy(t,s,a){var l=Gn();Bl(t,s,a,l)}function Bl(t,s,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(t))e0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,w=m(_,a);if(h.hasEagerState=!0,h.eagerState=w,Un(w,_))return Eu(t,s,h,0),ht===null&&xu(),!1}catch{}finally{}if(a=$h(t,s,h,l),a!==null)return On(a,t,l),t0(a,s,l),!0}return!1}function jf(t,s,a,l){if(l={lane:2,revertLane:um(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bu(t)){if(s)throw Error(r(479))}else s=$h(t,a,l,2),s!==null&&On(s,t,2)}function Bu(t){var s=t.alternate;return t===Le||s!==null&&s===Le}function e0(t,s){yo=Mu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function t0(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,cl(t,a)}}var ql={readContext:ln,use:Lu,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};ql.useEffectEvent=Nt;var n0={readContext:ln,use:Lu,useCallback:function(t,s){return wn().memoizedState=[t,s===void 0?null:s],t},useContext:ln,useEffect:Uy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Uu(4194308,4,Fy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Uu(4194308,4,t,s)},useInsertionEffect:function(t,s){Uu(4,2,t,s)},useMemo:function(t,s){var a=wn();s=s===void 0?null:s;var l=t();if(wa){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=wn();if(a!==void 0){var h=a(s);if(wa){En(!0);try{a(s)}finally{En(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=mT.bind(null,Le,t),[l.memoizedState,t]},useRef:function(t){var s=wn();return t={current:t},s.memoizedState=t},useState:function(t){t=Sf(t);var s=t.queue,a=Zy.bind(null,Le,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Cf,useDeferredValue:function(t,s){var a=wn();return If(a,t,s)},useTransition:function(){var t=Sf(!1);return t=$y.bind(null,Le,t.queue,!0,!1),wn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Le,h=wn();if(Ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ht===null)throw Error(r(349));(qe&127)!==0||wy(l,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,Uy(Sy.bind(null,l,m,t),[t]),l.flags|=2048,_o(9,{destroy:void 0},Ty.bind(null,l,m,a,s),null),a},useId:function(){var t=wn(),s=ht.identifierPrefix;if(Ke){var a=ei,l=Zs;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Vu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=oT++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Df,useFormState:My,useActionState:My,useOptimistic:function(t){var s=wn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=jf.bind(null,Le,!0,a),a.dispatch=s,[t,s]},useMemoCache:bf,useCacheRefresh:function(){return wn().memoizedState=fT.bind(null,Le)},useEffectEvent:function(t){var s=wn(),a={impl:t};return s.memoizedState=a,function(){if((tt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Of={readContext:ln,use:Lu,useCallback:Gy,useContext:ln,useEffect:Nf,useImperativeHandle:Hy,useInsertionEffect:By,useLayoutEffect:qy,useMemo:Qy,useReducer:Pu,useRef:Py,useState:function(){return Pu(Ei)},useDebugValue:Cf,useDeferredValue:function(t,s){var a=Mt();return Ky(a,ct.memoizedState,t,s)},useTransition:function(){var t=Pu(Ei)[0],s=Mt().memoizedState;return[typeof t=="boolean"?t:zl(t),s]},useSyncExternalStore:by,useId:Jy,useHostTransitionStatus:Df,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,s){var a=Mt();return Cy(a,ct,t,s)},useMemoCache:bf,useCacheRefresh:Wy};Of.useEffectEvent=zy;var s0={readContext:ln,use:Lu,useCallback:Gy,useContext:ln,useEffect:Nf,useImperativeHandle:Hy,useInsertionEffect:By,useLayoutEffect:qy,useMemo:Qy,useReducer:Tf,useRef:Py,useState:function(){return Tf(Ei)},useDebugValue:Cf,useDeferredValue:function(t,s){var a=Mt();return ct===null?If(a,t,s):Ky(a,ct.memoizedState,t,s)},useTransition:function(){var t=Tf(Ei)[0],s=Mt().memoizedState;return[typeof t=="boolean"?t:zl(t),s]},useSyncExternalStore:by,useId:Jy,useHostTransitionStatus:Df,useFormState:Ly,useActionState:Ly,useOptimistic:function(t,s){var a=Mt();return ct!==null?Cy(a,ct,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:bf,useCacheRefresh:Wy};s0.useEffectEvent=zy;function Mf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:b({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Vf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Gn(),h=or(l);h.payload=s,a!=null&&(h.callback=a),s=lr(t,h,l),s!==null&&(On(s,t,l),kl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Gn(),h=or(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=lr(t,h,l),s!==null&&(On(s,t,l),kl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Gn(),l=or(a);l.tag=2,s!=null&&(l.callback=s),s=lr(t,l,a),s!==null&&(On(s,t,a),kl(s,t,a))}};function i0(t,s,a,l,h,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!Cl(a,l)||!Cl(h,m):!0}function r0(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Vf.enqueueReplaceState(s,s.state,null)}function Ta(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function a0(t){_u(t)}function o0(t){console.error(t)}function l0(t){_u(t)}function qu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function c0(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function kf(t,s,a){return a=or(a),a.tag=3,a.payload={element:null},a.callback=function(){qu(t,s)},a}function u0(t){return t=or(t),t.tag=3,t}function d0(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){c0(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){c0(s,a,l),typeof h!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function pT(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&uo(s,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 31:case 13:return ls===null?ed():a.alternate===null&&Ct===0&&(Ct=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Iu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),om(t,l,h)),!1;case 22:return a.flags|=65536,l===Iu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),om(t,l,h)),!1}throw Error(r(435,a.tag))}return om(t,l,h),ed(),!1}if(Ke)return s=Bn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==ef&&(t=Error(r(422),{cause:l}),Dl(is(t,a)))):(l!==ef&&(s=Error(r(423),{cause:l}),Dl(is(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=is(l,a),h=kf(t.stateNode,l,h),hf(t,h),Ct!==4&&(Ct=2)),!1;var m=Error(r(520),{cause:l});if(m=is(m,a),Xl===null?Xl=[m]:Xl.push(m),Ct!==4&&(Ct=2),s===null)return!0;l=is(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=kf(a.stateNode,l,t),hf(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(mr===null||!mr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=u0(h),d0(h,t,a,l),hf(a,h),!1}a=a.return}while(a!==null);return!1}var Lf=Error(r(461)),qt=!1;function cn(t,s,a,l){s.child=t===null?py(s,null,a,l):ba(s,t.child,a,l)}function h0(t,s,a,l,h){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return va(s),l=vf(t,s,a,_,m,h),w=_f(),t!==null&&!qt?(xf(t,s,h),bi(t,s,h)):(Ke&&w&&Wh(s),s.flags|=1,cn(t,s,l,h),s.child)}function f0(t,s,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Yh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,m0(t,s,m,l,h)):(t=wu(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Gf(t,h)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Cl,a(_,l)&&t.ref===s.ref)return bi(t,s,h)}return s.flags|=1,t=gi(m,l),t.ref=s.ref,t.return=s,s.child=t}function m0(t,s,a,l,h){if(t!==null){var m=t.memoizedProps;if(Cl(m,l)&&t.ref===s.ref)if(qt=!1,s.pendingProps=l=m,Gf(t,h))(t.flags&131072)!==0&&(qt=!0);else return s.lanes=t.lanes,bi(t,s,h)}return Pf(t,s,a,l,h)}function p0(t,s,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,s.child=null;return g0(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Nu(s,m!==null?m.cachePool:null),m!==null?vy(s,m):mf(),_y(s);else return l=s.lanes=536870912,g0(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Nu(s,m.cachePool),vy(s,m),ur(),s.memoizedState=null):(t!==null&&Nu(s,null),mf(),ur());return cn(t,s,h,a),s.child}function Fl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function g0(t,s,a,l,h){var m=lf();return m=m===null?null:{parent:zt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&Nu(s,null),mf(),_y(s),t!==null&&uo(t,s,l,!0),s.childLanes=h,null}function Fu(t,s){return s=Gu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function y0(t,s,a){return ba(s,t.child,null,a),t=Fu(s,s.pendingProps),t.flags|=2,qn(s),s.memoizedState=null,t}function gT(t,s,a){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Ke){if(l.mode==="hidden")return t=Fu(s,l),s.lanes=536870912,Fl(null,t);if(gf(s),(t=mt)?(t=Iv(t,os),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:nr!==null?{id:Zs,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},a=ey(t),a.return=s,s.child=a,on=s,mt=null)):t=null,t===null)throw ir(s);return s.lanes=536870912,null}return Fu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(gf(s),h)if(s.flags&256)s.flags&=-257,s=y0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(qt||uo(t,s,a,!1),h=(a&t.childLanes)!==0,qt||h){if(l=ht,l!==null&&(_=ul(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,ma(t,_),On(l,t,_),Lf;ed(),s=y0(t,s,a)}else t=m.treeContext,mt=cs(_.nextSibling),on=s,Ke=!0,sr=null,os=!1,t!==null&&sy(s,t),s=Fu(s,l),s.flags|=4096;return s}return t=gi(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Hu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Pf(t,s,a,l,h){return va(s),a=vf(t,s,a,l,void 0,h),l=_f(),t!==null&&!qt?(xf(t,s,h),bi(t,s,h)):(Ke&&l&&Wh(s),s.flags|=1,cn(t,s,a,h),s.child)}function v0(t,s,a,l,h,m){return va(s),s.updateQueue=null,a=Ey(s,l,a,h),xy(t),l=_f(),t!==null&&!qt?(xf(t,s,m),bi(t,s,m)):(Ke&&l&&Wh(s),s.flags|=1,cn(t,s,a,m),s.child)}function _0(t,s,a,l,h){if(va(s),s.stateNode===null){var m=ao,_=a.contextType;typeof _=="object"&&_!==null&&(m=ln(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Vf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},uf(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?ln(_):ao,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Mf(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Vf.enqueueReplaceState(m,m.state,null),Pl(s,l,m,h),Ll(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,j=Ta(a,w);m.props=j;var H=m.context,Z=a.contextType;_=ao,typeof Z=="object"&&Z!==null&&(_=ln(Z));var se=a.getDerivedStateFromProps;Z=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||H!==_)&&r0(s,m,l,_),ar=!1;var Q=s.memoizedState;m.state=Q,Pl(s,l,m,h),Ll(),H=s.memoizedState,w||Q!==H||ar?(typeof se=="function"&&(Mf(s,a,se,l),H=s.memoizedState),(j=ar||i0(s,a,j,l,Q,H,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=H),m.props=l,m.state=H,m.context=_,l=j):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,df(t,s),_=s.memoizedProps,Z=Ta(a,_),m.props=Z,se=s.pendingProps,Q=m.context,H=a.contextType,j=ao,typeof H=="object"&&H!==null&&(j=ln(H)),w=a.getDerivedStateFromProps,(H=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==se||Q!==j)&&r0(s,m,l,j),ar=!1,Q=s.memoizedState,m.state=Q,Pl(s,l,m,h),Ll();var X=s.memoizedState;_!==se||Q!==X||ar||t!==null&&t.dependencies!==null&&Su(t.dependencies)?(typeof w=="function"&&(Mf(s,a,w,l),X=s.memoizedState),(Z=ar||i0(s,a,Z,l,Q,X,j)||t!==null&&t.dependencies!==null&&Su(t.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,X,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,X,j)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=X),m.props=l,m.state=X,m.context=j,l=Z):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Hu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=ba(s,t.child,null,h),s.child=ba(s,null,a,h)):cn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=bi(t,s,h),t}function x0(t,s,a,l){return ga(),s.flags|=256,cn(t,s,a,l),s.child}var Uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zf(t){return{baseLanes:t,cachePool:cy()}}function Bf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Hn),t}function E0(t,s,a){var l=s.pendingProps,h=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ke){if(h?cr(s):ur(),(t=mt)?(t=Iv(t,os),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:nr!==null?{id:Zs,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},a=ey(t),a.return=s,s.child=a,on=s,mt=null)):t=null,t===null)throw ir(s);return wm(t)?s.lanes=32:s.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(ur(),h=s.mode,w=Gu({mode:"hidden",children:w},h),l=pa(l,h,a,null),w.return=s,l.return=s,w.sibling=l,s.child=w,l=s.child,l.memoizedState=zf(a),l.childLanes=Bf(t,_,a),s.memoizedState=Uf,Fl(null,l)):(cr(s),qf(s,w))}var j=t.memoizedState;if(j!==null&&(w=j.dehydrated,w!==null)){if(m)s.flags&256?(cr(s),s.flags&=-257,s=Ff(t,s,a)):s.memoizedState!==null?(ur(),s.child=t.child,s.flags|=128,s=null):(ur(),w=l.fallback,h=s.mode,l=Gu({mode:"visible",children:l.children},h),w=pa(w,h,a,null),w.flags|=2,l.return=s,w.return=s,l.sibling=w,s.child=l,ba(s,t.child,null,a),l=s.child,l.memoizedState=zf(a),l.childLanes=Bf(t,_,a),s.memoizedState=Uf,s=Fl(null,l));else if(cr(s),wm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var H=_.dgst;_=H,l=Error(r(419)),l.stack="",l.digest=_,Dl({value:l,source:null,stack:null}),s=Ff(t,s,a)}else if(qt||uo(t,s,a,!1),_=(a&t.childLanes)!==0,qt||_){if(_=ht,_!==null&&(l=ul(_,a),l!==0&&l!==j.retryLane))throw j.retryLane=l,ma(t,l),On(_,t,l),Lf;bm(w)||ed(),s=Ff(t,s,a)}else bm(w)?(s.flags|=192,s.child=t.child,s=null):(t=j.treeContext,mt=cs(w.nextSibling),on=s,Ke=!0,sr=null,os=!1,t!==null&&sy(s,t),s=qf(s,l.children),s.flags|=4096);return s}return h?(ur(),w=l.fallback,h=s.mode,j=t.child,H=j.sibling,l=gi(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,H!==null?w=gi(H,w):(w=pa(w,h,a,null),w.flags|=2),w.return=s,l.return=s,l.sibling=w,s.child=l,Fl(null,l),l=s.child,w=t.child.memoizedState,w===null?w=zf(a):(h=w.cachePool,h!==null?(j=zt._currentValue,h=h.parent!==j?{parent:j,pool:j}:h):h=cy(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=Bf(t,_,a),s.memoizedState=Uf,Fl(t.child,l)):(cr(s),a=t.child,t=a.sibling,a=gi(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function qf(t,s){return s=Gu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Gu(t,s){return t=zn(22,t,null,s),t.lanes=0,t}function Ff(t,s,a){return ba(s,t.child,null,a),t=qf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function b0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),sf(t.return,s,a)}function Hf(t,s,a,l,h,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=m)}function w0(t,s,a){var l=s.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var _=Ot.current,w=(_&2)!==0;if(w?(_=_&1|2,s.flags|=128):_&=1,oe(Ot,_),cn(t,s,l,a),l=Ke?Rl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,a,s);else if(t.tag===19)b0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&Ou(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Hf(s,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Ou(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Hf(s,!0,a,null,m,l);break;case"together":Hf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function bi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),fr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(uo(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=gi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=gi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Gf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Su(t)))}function yT(t,s,a){switch(s.tag){case 3:bt(s,s.stateNode.containerInfo),rr(s,zt,t.memoizedState.cache),ga();break;case 27:case 5:Wn(s);break;case 4:bt(s,s.stateNode.containerInfo);break;case 10:rr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,gf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(cr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?E0(t,s,a):(cr(s),t=bi(t,s,a),t!==null?t.sibling:null);cr(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(uo(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return w0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Ot,Ot.current),l)break;return null;case 22:return s.lanes=0,p0(t,s,a,s.pendingProps);case 24:rr(s,zt,t.memoizedState.cache)}return bi(t,s,a)}function T0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)qt=!0;else{if(!Gf(t,a)&&(s.flags&128)===0)return qt=!1,yT(t,s,a);qt=(t.flags&131072)!==0}else qt=!1,Ke&&(s.flags&1048576)!==0&&ny(s,Rl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=xa(s.elementType),s.type=t,typeof t=="function")Yh(t)?(l=Ta(t,l),s.tag=1,s=_0(null,s,t,l,a)):(s.tag=0,s=Pf(null,s,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===de){s.tag=11,s=h0(null,s,t,l,a);break e}else if(h===C){s.tag=14,s=f0(null,s,t,l,a);break e}}throw s=Te(t)||t,Error(r(306,s,""))}}return s;case 0:return Pf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Ta(l,s.pendingProps),_0(t,s,l,h,a);case 3:e:{if(bt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;h=m.element,df(t,s),Pl(s,l,null,a);var _=s.memoizedState;if(l=_.cache,rr(s,zt,l),l!==m.cache&&rf(s,[zt],a,!0),Ll(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=x0(t,s,l,a);break e}else if(l!==h){h=is(Error(r(424)),s),Dl(h),s=x0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(mt=cs(t.firstChild),on=s,Ke=!0,sr=null,os=!0,a=py(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ga(),l===h){s=bi(t,s,a);break e}cn(t,s,l,a)}s=s.child}return s;case 26:return Hu(t,s),t===null?(a=Vv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ke||(a=s.type,t=s.pendingProps,l=od(Re.current).createElement(a),l[Lt]=s,l[Wt]=t,un(l,a,t),Pt(l),s.stateNode=l):s.memoizedState=Vv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Wn(s),t===null&&Ke&&(l=s.stateNode=jv(s.type,s.pendingProps,Re.current),on=s,os=!0,h=mt,vr(s.type)?(Tm=h,mt=cs(l.firstChild)):mt=h),cn(t,s,s.pendingProps.children,a),Hu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ke&&((h=l=mt)&&(l=KT(l,s.type,s.pendingProps,os),l!==null?(s.stateNode=l,on=s,mt=cs(l.firstChild),os=!1,h=!0):h=!1),h||ir(s)),Wn(s),h=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,_m(h,m)?l=null:_!==null&&_m(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=vf(t,s,lT,null,null,a),ic._currentValue=h),Hu(t,s),cn(t,s,l,a),s.child;case 6:return t===null&&Ke&&((t=a=mt)&&(a=$T(a,s.pendingProps,os),a!==null?(s.stateNode=a,on=s,mt=null,t=!0):t=!1),t||ir(s)),null;case 13:return E0(t,s,a);case 4:return bt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=ba(s,null,l,a):cn(t,s,l,a),s.child;case 11:return h0(t,s,s.type,s.pendingProps,a);case 7:return cn(t,s,s.pendingProps,a),s.child;case 8:return cn(t,s,s.pendingProps.children,a),s.child;case 12:return cn(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,rr(s,s.type,l.value),cn(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,va(s),h=ln(h),l=l(h),s.flags|=1,cn(t,s,l,a),s.child;case 14:return f0(t,s,s.type,s.pendingProps,a);case 15:return m0(t,s,s.type,s.pendingProps,a);case 19:return w0(t,s,a);case 31:return gT(t,s,a);case 22:return p0(t,s,a,s.pendingProps);case 24:return va(s),l=ln(zt),t===null?(h=lf(),h===null&&(h=ht,m=af(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:l,cache:h},uf(s),rr(s,zt,h)):((t.lanes&a)!==0&&(df(t,s),Pl(s,null,null,a),Ll()),h=t.memoizedState,m=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),rr(s,zt,l)):(l=m.cache,rr(s,zt,l),l!==h.cache&&rf(s,[zt],a,!0))),cn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function wi(t){t.flags|=4}function Qf(t,s,a,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(J0())t.flags|=8192;else throw Ea=Iu,cf}else t.flags&=-16777217}function S0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!zv(s))if(J0())t.flags|=8192;else throw Ea=Iu,cf}function Qu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Wc():536870912,t.lanes|=s,wo|=s)}function Hl(t,s){if(!Ke)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function vT(t,s,a){var l=s.pendingProps;switch(Zh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),_i(zt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(co(s)?wi(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,tf())),pt(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(wi(s),m!==null?(pt(s),S0(s,m)):(pt(s),Qf(s,h,null,l,a))):m?m!==t.memoizedState?(wi(s),pt(s),S0(s,m)):(pt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&wi(s),pt(s),Qf(s,h,t,l,a)),null;case 27:if(Vn(s),a=Re.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&wi(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return pt(s),null}t=he.current,co(s)?iy(s):(t=jv(h,l,a),s.stateNode=t,wi(s))}return pt(s),null;case 5:if(Vn(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&wi(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return pt(s),null}if(m=he.current,co(s))iy(s);else{var _=od(Re.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}m[Lt]=s,m[Wt]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(un(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&wi(s)}}return pt(s),Qf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&wi(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Re.current,co(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=on,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Lt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ev(t.nodeValue,a)),t||ir(s,!0)}else t=od(t).createTextNode(l),t[Lt]=s,s.stateNode=t}return pt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=co(s),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Lt]=s}else ga(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),t=!1}else a=tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(qn(s),s):(qn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return pt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=co(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Lt]=s}else ga(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),h=!1}else h=tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(qn(s),s):(qn(s),null)}return qn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Qu(s,s.updateQueue),pt(s),null);case 4:return ot(),t===null&&mm(s.stateNode.containerInfo),pt(s),null;case 10:return _i(s.type),pt(s),null;case 19:if(ee(Ot),l=s.memoizedState,l===null)return pt(s),null;if(h=(s.flags&128)!==0,m=l.rendering,m===null)if(h)Hl(l,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Ou(t),m!==null){for(s.flags|=128,Hl(l,!1),t=m.updateQueue,s.updateQueue=t,Qu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Zg(a,t),a=a.sibling;return oe(Ot,Ot.current&1|2),Ke&&yi(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&rn()>Ju&&(s.flags|=128,h=!0,Hl(l,!1),s.lanes=4194304)}else{if(!h)if(t=Ou(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Qu(s,t),Hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Ke)return pt(s),null}else 2*rn()-l.renderingStartTime>Ju&&a!==536870912&&(s.flags|=128,h=!0,Hl(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=rn(),t.sibling=null,a=Ot.current,oe(Ot,h?a&1|2:a&1),Ke&&yi(s,l.treeForkCount),t):(pt(s),null);case 22:case 23:return qn(s),pf(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),a=s.updateQueue,a!==null&&Qu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&ee(_a),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),_i(zt),pt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function _T(t,s){switch(Zh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return _i(zt),ot(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Vn(s),null;case 31:if(s.memoizedState!==null){if(qn(s),s.alternate===null)throw Error(r(340));ga()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(qn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ga()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ee(Ot),null;case 4:return ot(),null;case 10:return _i(s.type),null;case 22:case 23:return qn(s),pf(),t!==null&&ee(_a),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return _i(zt),null;case 25:return null;default:return null}}function A0(t,s){switch(Zh(s),s.tag){case 3:_i(zt),ot();break;case 26:case 27:case 5:Vn(s);break;case 4:ot();break;case 31:s.memoizedState!==null&&qn(s);break;case 13:qn(s);break;case 19:ee(Ot);break;case 10:_i(s.type);break;case 22:case 23:qn(s),pf(),t!==null&&ee(_a);break;case 24:_i(zt)}}function Gl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==h)}}catch(w){rt(s,s.return,w)}}function dr(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=s;var j=a,H=w;try{H()}catch(Z){rt(h,j,Z)}}}l=l.next}while(l!==m)}}catch(Z){rt(s,s.return,Z)}}function N0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{yy(s,a)}catch(l){rt(t,t.return,l)}}}function C0(t,s,a){a.props=Ta(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,s,l)}}function Ql(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){rt(t,s,h)}}function ti(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){rt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){rt(t,s,h)}else a.current=null}function I0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){rt(t,t.return,h)}}function Kf(t,s,a){try{var l=t.stateNode;BT(l,t.type,a,s),l[Wt]=s}catch(h){rt(t,t.return,h)}}function R0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&vr(t.type)||t.tag===4}function $f(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&vr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=bs));else if(l!==4&&(l===27&&vr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Yf(t,s,a),t=t.sibling;t!==null;)Yf(t,s,a),t=t.sibling}function Ku(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&vr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ku(t,s,a),t=t.sibling;t!==null;)Ku(t,s,a),t=t.sibling}function D0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);un(s,l,a),s[Lt]=t,s[Wt]=a}catch(m){rt(t,t.return,m)}}var Ti=!1,Ft=!1,Xf=!1,j0=typeof WeakSet=="function"?WeakSet:Set,en=null;function xT(t,s){if(t=t.containerInfo,ym=md,t=Hg(t),qh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,w=-1,j=-1,H=0,Z=0,se=t,Q=null;t:for(;;){for(var X;se!==a||h!==0&&se.nodeType!==3||(w=_+h),se!==m||l!==0&&se.nodeType!==3||(j=_+l),se.nodeType===3&&(_+=se.nodeValue.length),(X=se.firstChild)!==null;)Q=se,se=X;for(;;){if(se===t)break t;if(Q===a&&++H===h&&(w=_),Q===m&&++Z===l&&(j=_),(X=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=X}a=w===-1||j===-1?null:{start:w,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(vm={focusedElem:t,selectionRange:a},md=!1,en=s;en!==null;)if(s=en,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,en=t;else for(;en!==null;){switch(s=en,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ge=Ta(a.type,h);t=l.getSnapshotBeforeUpdate(ge,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ce){rt(a,a.return,Ce)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Em(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Em(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,en=t;break}en=s.return}}function O0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ai(t,a),l&4&&Gl(5,a);break;case 1:if(Ai(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){rt(a,a.return,_)}else{var h=Ta(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){rt(a,a.return,_)}}l&64&&N0(a),l&512&&Ql(a,a.return);break;case 3:if(Ai(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{yy(t,s)}catch(_){rt(a,a.return,_)}}break;case 27:s===null&&l&4&&D0(a);case 26:case 5:Ai(t,a),s===null&&l&4&&I0(a),l&512&&Ql(a,a.return);break;case 12:Ai(t,a);break;case 31:Ai(t,a),l&4&&k0(t,a);break;case 13:Ai(t,a),l&4&&L0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=IT.bind(null,a),YT(t,a))));break;case 22:if(l=a.memoizedState!==null||Ti,!l){s=s!==null&&s.memoizedState!==null||Ft,h=Ti;var m=Ft;Ti=l,(Ft=s)&&!m?Ni(t,a,(a.subtreeFlags&8772)!==0):Ai(t,a),Ti=h,Ft=m}break;case 30:break;default:Ai(t,a)}}function M0(t){var s=t.alternate;s!==null&&(t.alternate=null,M0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Qa(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var xt=null,In=!1;function Si(t,s,a){for(a=a.child;a!==null;)V0(t,s,a),a=a.sibling}function V0(t,s,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:Ft||ti(a,s),Si(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||ti(a,s);var l=xt,h=In;vr(a.type)&&(xt=a.stateNode,In=!1),Si(t,s,a),tc(a.stateNode),xt=l,In=h;break;case 5:Ft||ti(a,s);case 6:if(l=xt,h=In,xt=null,Si(t,s,a),xt=l,In=h,xt!==null)if(In)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(a.stateNode)}catch(m){rt(a,s,m)}else try{xt.removeChild(a.stateNode)}catch(m){rt(a,s,m)}break;case 18:xt!==null&&(In?(t=xt,Nv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Do(t)):Nv(xt,a.stateNode));break;case 4:l=xt,h=In,xt=a.stateNode.containerInfo,In=!0,Si(t,s,a),xt=l,In=h;break;case 0:case 11:case 14:case 15:dr(2,a,s),Ft||dr(4,a,s),Si(t,s,a);break;case 1:Ft||(ti(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&C0(a,s,l)),Si(t,s,a);break;case 21:Si(t,s,a);break;case 22:Ft=(l=Ft)||a.memoizedState!==null,Si(t,s,a),Ft=l;break;default:Si(t,s,a)}}function k0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Do(t)}catch(a){rt(s,s.return,a)}}}function L0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Do(t)}catch(a){rt(s,s.return,a)}}function ET(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new j0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new j0),s;default:throw Error(r(435,t.tag))}}function $u(t,s){var a=ET(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var h=RT.bind(null,t,l);l.then(h,h)}})}function Rn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,_=s,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(vr(w.type)){xt=w.stateNode,In=!1;break e}break;case 5:xt=w.stateNode,In=!1;break e;case 3:case 4:xt=w.stateNode.containerInfo,In=!0;break e}w=w.return}if(xt===null)throw Error(r(160));V0(m,_,h),xt=null,In=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)P0(s,t),s=s.sibling}var Cs=null;function P0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Rn(s,t),Dn(t),l&4&&(dr(3,t,t.return),Gl(3,t),dr(5,t,t.return));break;case 1:Rn(s,t),Dn(t),l&512&&(Ft||a===null||ti(a,a.return)),l&64&&Ti&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Cs;if(Rn(s,t),Dn(t),l&512&&(Ft||a===null||ti(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Bs]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),un(m,l,a),m[Lt]=t,Pt(m),l=m;break e;case"link":var _=Pv("link","href",h).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}m=h.createElement(l),un(m,l,a),h.head.appendChild(m);break;case"meta":if(_=Pv("meta","content",h).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}m=h.createElement(l),un(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[Lt]=t,Pt(m),l=m}t.stateNode=l}else Uv(h,t.type,t.stateNode);else t.stateNode=Lv(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Uv(h,t.type,t.stateNode):Lv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Kf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Rn(s,t),Dn(t),l&512&&(Ft||a===null||ti(a,a.return)),a!==null&&l&4&&Kf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Rn(s,t),Dn(t),l&512&&(Ft||a===null||ti(a,a.return)),t.flags&32){h=t.stateNode;try{Cn(h,"")}catch(ge){rt(t,t.return,ge)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Kf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Xf=!0);break;case 6:if(Rn(s,t),Dn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ge){rt(t,t.return,ge)}}break;case 3:if(ud=null,h=Cs,Cs=ld(s.containerInfo),Rn(s,t),Cs=h,Dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Do(s.containerInfo)}catch(ge){rt(t,t.return,ge)}Xf&&(Xf=!1,U0(t));break;case 4:l=Cs,Cs=ld(t.stateNode.containerInfo),Rn(s,t),Dn(t),Cs=l;break;case 12:Rn(s,t),Dn(t);break;case 31:Rn(s,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$u(t,l)));break;case 13:Rn(s,t),Dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xu=rn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$u(t,l)));break;case 22:h=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,H=Ti,Z=Ft;if(Ti=H||h,Ft=Z||j,Rn(s,t),Ft=Z,Ti=H,Dn(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||j||Ti||Ft||Sa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){j=a=s;try{if(m=j.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=j.stateNode;var se=j.memoizedProps.style,Q=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ge){rt(j,j.return,ge)}}}else if(s.tag===6){if(a===null){j=s;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(ge){rt(j,j.return,ge)}}}else if(s.tag===18){if(a===null){j=s;try{var X=j.stateNode;h?Cv(X,!0):Cv(j.stateNode,!1)}catch(ge){rt(j,j.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,$u(t,a))));break;case 19:Rn(s,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$u(t,l)));break;case 30:break;case 21:break;default:Rn(s,t),Dn(t)}}function Dn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(R0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=$f(t);Ku(t,m,h);break;case 5:var _=a.stateNode;a.flags&32&&(Cn(_,""),a.flags&=-33);var w=$f(t);Ku(t,w,_);break;case 3:case 4:var j=a.stateNode.containerInfo,H=$f(t);Yf(t,H,j);break;default:throw Error(r(161))}}catch(Z){rt(t,t.return,Z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function U0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;U0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ai(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)O0(t,s.alternate,s),s=s.sibling}function Sa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:dr(4,s,s.return),Sa(s);break;case 1:ti(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&C0(s,s.return,a),Sa(s);break;case 27:tc(s.stateNode);case 26:case 5:ti(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}t=t.sibling}}function Ni(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Ni(h,m,a),Gl(4,m);break;case 1:if(Ni(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){rt(l,l.return,H)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)gy(j[h],w)}catch(H){rt(l,l.return,H)}}a&&_&64&&N0(m),Ql(m,m.return);break;case 27:D0(m);case 26:case 5:Ni(h,m,a),a&&l===null&&_&4&&I0(m),Ql(m,m.return);break;case 12:Ni(h,m,a);break;case 31:Ni(h,m,a),a&&_&4&&k0(h,m);break;case 13:Ni(h,m,a),a&&_&4&&L0(h,m);break;case 22:m.memoizedState===null&&Ni(h,m,a),Ql(m,m.return);break;case 30:break;default:Ni(h,m,a)}s=s.sibling}}function Jf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&jl(a))}function Wf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&jl(t))}function Is(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)z0(t,s,a,l),s=s.sibling}function z0(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Is(t,s,a,l),h&2048&&Gl(9,s);break;case 1:Is(t,s,a,l);break;case 3:Is(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&jl(t)));break;case 12:if(h&2048){Is(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){rt(s,s.return,j)}}else Is(t,s,a,l);break;case 31:Is(t,s,a,l);break;case 13:Is(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Is(t,s,a,l):Kl(t,s):m._visibility&2?Is(t,s,a,l):(m._visibility|=2,xo(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Jf(_,s);break;case 24:Is(t,s,a,l),h&2048&&Wf(s.alternate,s);break;default:Is(t,s,a,l)}}function xo(t,s,a,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,w=a,j=l,H=_.flags;switch(_.tag){case 0:case 11:case 15:xo(m,_,w,j,h),Gl(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?xo(m,_,w,j,h):Kl(m,_):(Z._visibility|=2,xo(m,_,w,j,h)),h&&H&2048&&Jf(_.alternate,_);break;case 24:xo(m,_,w,j,h),h&&H&2048&&Wf(_.alternate,_);break;default:xo(m,_,w,j,h)}s=s.sibling}}function Kl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:Kl(a,l),h&2048&&Jf(l.alternate,l);break;case 24:Kl(a,l),h&2048&&Wf(l.alternate,l);break;default:Kl(a,l)}s=s.sibling}}var $l=8192;function Eo(t,s,a){if(t.subtreeFlags&$l)for(t=t.child;t!==null;)B0(t,s,a),t=t.sibling}function B0(t,s,a){switch(t.tag){case 26:Eo(t,s,a),t.flags&$l&&t.memoizedState!==null&&oS(a,Cs,t.memoizedState,t.memoizedProps);break;case 5:Eo(t,s,a);break;case 3:case 4:var l=Cs;Cs=ld(t.stateNode.containerInfo),Eo(t,s,a),Cs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=$l,$l=16777216,Eo(t,s,a),$l=l):Eo(t,s,a));break;default:Eo(t,s,a)}}function q0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Yl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];en=l,H0(l,t)}q0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)F0(t),t=t.sibling}function F0(t){switch(t.tag){case 0:case 11:case 15:Yl(t),t.flags&2048&&dr(9,t,t.return);break;case 3:Yl(t);break;case 12:Yl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Yu(t)):Yl(t);break;default:Yl(t)}}function Yu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];en=l,H0(l,t)}q0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:dr(8,s,s.return),Yu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Yu(s));break;default:Yu(s)}t=t.sibling}}function H0(t,s){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:dr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,en=l;else e:for(a=t;en!==null;){l=en;var h=l.sibling,m=l.return;if(M0(l),l===a){en=null;break e}if(h!==null){h.return=m,en=h;break e}en=m}}}var bT={getCacheForType:function(t){var s=ln(zt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return ln(zt).controller.signal}},wT=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,ze=null,qe=0,it=0,Fn=null,hr=!1,bo=!1,Zf=!1,Ci=0,Ct=0,fr=0,Aa=0,em=0,Hn=0,wo=0,Xl=null,jn=null,tm=!1,Xu=0,G0=0,Ju=1/0,Wu=null,mr=null,Xt=0,pr=null,To=null,Ii=0,nm=0,sm=null,Q0=null,Jl=0,im=null;function Gn(){return(tt&2)!==0&&qe!==0?qe&-qe:K.T!==null?um():Zc()}function K0(){if(Hn===0)if((qe&536870912)===0||Ke){var t=Zr;Zr<<=1,(Zr&3932160)===0&&(Zr=262144),Hn=t}else Hn=536870912;return t=Bn.current,t!==null&&(t.flags|=32),Hn}function On(t,s,a){(t===ht&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(So(t,0),gr(t,qe,Hn,!1)),ea(t,a),((tt&2)===0||t!==ht)&&(t===ht&&((tt&2)===0&&(Aa|=a),Ct===4&&gr(t,qe,Hn,!1)),ni(t))}function $0(t,s,a){if((tt&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||_s(t,s),h=l?AT(t,s):am(t,s,!0),m=l;do{if(h===0){bo&&!l&&gr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!TT(a)){h=am(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var w=t;h=Xl;var j=w.current.memoizedState.isDehydrated;if(j&&(So(w,_).flags|=256),_=am(w,_,!1),_!==2){if(Zf&&!j){w.errorRecoveryDisabledLanes|=m,Aa|=m,h=4;break e}m=jn,jn=h,m!==null&&(jn===null?jn=m:jn.push.apply(jn,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){So(t,0),gr(t,s,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:gr(l,s,Hn,!hr);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Xu+300-rn(),10<h)){if(gr(l,s,Hn,!hr),Ps(l,0,!0)!==0)break e;Ii=s,l.timeoutHandle=Sv(Y0.bind(null,l,a,jn,Wu,tm,s,Hn,Aa,wo,hr,m,"Throttled",-0,0),h);break e}Y0(l,a,jn,Wu,tm,s,Hn,Aa,wo,hr,m,null,-0,0)}}break}while(!0);ni(t)}function Y0(t,s,a,l,h,m,_,w,j,H,Z,se,Q,X){if(t.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bs},B0(s,m,se);var ge=(m&62914560)===m?Xu-rn():(m&4194048)===m?G0-rn():0;if(ge=lS(se,ge),ge!==null){Ii=m,t.cancelPendingCommit=ge(sv.bind(null,t,s,m,a,l,h,_,w,j,Z,se,null,Q,X)),gr(t,m,_,!H);return}}sv(t,s,m,a,l,h,_,w,j)}function TT(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Un(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gr(t,s,a,l){s&=~em,s&=~Aa,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var m=31-vt(h),_=1<<m;l[m]=-1,h&=~_}a!==0&&ta(t,a,s)}function Zu(){return(tt&6)===0?(Wl(0),!1):!0}function rm(){if(ze!==null){if(it===0)var t=ze.return;else t=ze,vi=ya=null,Ef(t),po=null,Ml=0,t=ze;for(;t!==null;)A0(t.alternate,t),t=t.return;ze=null}}function So(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,HT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ii=0,rm(),ht=t,ze=a=gi(t.current,null),qe=s,it=0,Fn=null,hr=!1,bo=_s(t,s),Zf=!1,wo=Hn=em=Aa=fr=Ct=0,jn=Xl=null,tm=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-vt(l),m=1<<h;s|=t[h],l&=~m}return Ci=s,xu(),a}function X0(t,s){Le=null,K.H=ql,s===mo||s===Cu?(s=hy(),it=3):s===cf?(s=hy(),it=4):it=s===Lf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Fn=s,ze===null&&(Ct=1,qu(t,is(s,t.current)))}function J0(){var t=Bn.current;return t===null?!0:(qe&4194048)===qe?ls===null:(qe&62914560)===qe||(qe&536870912)!==0?t===ls:!1}function W0(){var t=K.H;return K.H=ql,t===null?ql:t}function Z0(){var t=K.A;return K.A=bT,t}function ed(){Ct=4,hr||(qe&4194048)!==qe&&Bn.current!==null||(bo=!0),(fr&134217727)===0&&(Aa&134217727)===0||ht===null||gr(ht,qe,Hn,!1)}function am(t,s,a){var l=tt;tt|=2;var h=W0(),m=Z0();(ht!==t||qe!==s)&&(Wu=null,So(t,s)),s=!1;var _=Ct;e:do try{if(it!==0&&ze!==null){var w=ze,j=Fn;switch(it){case 8:rm(),_=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(s=!0);var H=it;if(it=0,Fn=null,Ao(t,w,j,H),a&&bo){_=0;break e}break;default:H=it,it=0,Fn=null,Ao(t,w,j,H)}}ST(),_=Ct;break}catch(Z){X0(t,Z)}while(!0);return s&&t.shellSuspendCounter++,vi=ya=null,tt=l,K.H=h,K.A=m,ze===null&&(ht=null,qe=0,xu()),_}function ST(){for(;ze!==null;)ev(ze)}function AT(t,s){var a=tt;tt|=2;var l=W0(),h=Z0();ht!==t||qe!==s?(Wu=null,Ju=rn()+500,So(t,s)):bo=_s(t,s);e:do try{if(it!==0&&ze!==null){s=ze;var m=Fn;t:switch(it){case 1:it=0,Fn=null,Ao(t,s,m,1);break;case 2:case 9:if(uy(m)){it=0,Fn=null,tv(s);break}s=function(){it!==2&&it!==9||ht!==t||(it=7),ni(t)},m.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:uy(m)?(it=0,Fn=null,tv(s)):(it=0,Fn=null,Ao(t,s,m,7));break;case 5:var _=null;switch(ze.tag){case 26:_=ze.memoizedState;case 5:case 27:var w=ze;if(_?zv(_):w.stateNode.complete){it=0,Fn=null;var j=w.sibling;if(j!==null)ze=j;else{var H=w.return;H!==null?(ze=H,td(H)):ze=null}break t}}it=0,Fn=null,Ao(t,s,m,5);break;case 6:it=0,Fn=null,Ao(t,s,m,6);break;case 8:rm(),Ct=6;break e;default:throw Error(r(462))}}NT();break}catch(Z){X0(t,Z)}while(!0);return vi=ya=null,K.H=l,K.A=h,tt=a,ze!==null?0:(ht=null,qe=0,xu(),Ct)}function NT(){for(;ze!==null&&!ll();)ev(ze)}function ev(t){var s=T0(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,s===null?td(t):ze=s}function tv(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=v0(a,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=v0(a,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Ef(s);default:A0(a,s),s=ze=Zg(s,Ci),s=T0(a,s,Ci)}t.memoizedProps=t.pendingProps,s===null?td(t):ze=s}function Ao(t,s,a,l){vi=ya=null,Ef(s),po=null,Ml=0;var h=s.return;try{if(pT(t,h,s,a,qe)){Ct=1,qu(t,is(a,t.current)),ze=null;return}}catch(m){if(h!==null)throw ze=h,m;Ct=1,qu(t,is(a,t.current)),ze=null;return}s.flags&32768?(Ke||l===1?t=!0:bo||(qe&536870912)!==0?t=!1:(hr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),nv(s,t)):td(s)}function td(t){var s=t;do{if((s.flags&32768)!==0){nv(s,hr);return}t=s.return;var a=vT(s.alternate,s,Ci);if(a!==null){ze=a;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=t}while(s!==null);Ct===0&&(Ct=5)}function nv(t,s){do{var a=_T(t.alternate,t);if(a!==null){a.flags&=32767,ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){ze=t;return}ze=t=a}while(t!==null);Ct=6,ze=null}function sv(t,s,a,l,h,m,_,w,j){t.cancelPendingCommit=null;do nd();while(Xt!==0);if((tt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Kh,Ph(t,a,m,_,w,j),t===ht&&(ze=ht=null,qe=0),To=s,pr=t,Ii=a,nm=m,sm=h,Q0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,DT(ys,function(){return lv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=ae.p,ae.p=2,_=tt,tt|=4;try{xT(t,s,a)}finally{tt=_,ae.p=h,K.T=l}}Xt=1,iv(),rv(),av()}}function iv(){if(Xt===1){Xt=0;var t=pr,s=To,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ae.p;ae.p=2;var h=tt;tt|=4;try{P0(s,t);var m=vm,_=Hg(t.containerInfo),w=m.focusedElem,j=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&Fg(w.ownerDocument.documentElement,w)){if(j!==null&&qh(w)){var H=j.start,Z=j.end;if(Z===void 0&&(Z=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(Z,w.value.length);else{var se=w.ownerDocument||document,Q=se&&se.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),ge=w.textContent.length,Ce=Math.min(j.start,ge),dt=j.end===void 0?Ce:Math.min(j.end,ge);!X.extend&&Ce>dt&&(_=dt,dt=Ce,Ce=_);var B=qg(w,Ce),z=qg(w,dt);if(B&&z&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==z.node||X.focusOffset!==z.offset)){var F=se.createRange();F.setStart(B.node,B.offset),X.removeAllRanges(),Ce>dt?(X.addRange(F),X.extend(z.node,z.offset)):(F.setEnd(z.node,z.offset),X.addRange(F))}}}}for(se=[],X=w;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var te=se[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}md=!!ym,vm=ym=null}finally{tt=h,ae.p=l,K.T=a}}t.current=s,Xt=2}}function rv(){if(Xt===2){Xt=0;var t=pr,s=To,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ae.p;ae.p=2;var h=tt;tt|=4;try{O0(t,s.alternate,s)}finally{tt=h,ae.p=l,K.T=a}}Xt=3}}function av(){if(Xt===4||Xt===3){Xt=0,Fa();var t=pr,s=To,a=Ii,l=Q0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Xt=5:(Xt=0,To=pr=null,ov(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(mr=null),hi(a),s=s.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(ft,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=K.T,h=ae.p,ae.p=2,K.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];m(w.value,{componentStack:w.stack})}}finally{K.T=s,ae.p=h}}(Ii&3)!==0&&nd(),ni(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===im?Jl++:(Jl=0,im=t):Jl=0,Wl(0)}}function ov(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,jl(s)))}function nd(){return iv(),rv(),av(),lv()}function lv(){if(Xt!==5)return!1;var t=pr,s=nm;nm=0;var a=hi(Ii),l=K.T,h=ae.p;try{ae.p=32>a?32:a,K.T=null,a=sm,sm=null;var m=pr,_=Ii;if(Xt=0,To=pr=null,Ii=0,(tt&6)!==0)throw Error(r(331));var w=tt;if(tt|=4,F0(m.current),z0(m,m.current,_,a),tt=w,Wl(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(ft,m)}catch{}return!0}finally{ae.p=h,K.T=l,ov(t,s)}}function cv(t,s,a){s=is(a,s),s=kf(t.stateNode,s,2),t=lr(t,s,2),t!==null&&(ea(t,2),ni(t))}function rt(t,s,a){if(t.tag===3)cv(t,t,a);else for(;s!==null;){if(s.tag===3){cv(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(mr===null||!mr.has(l))){t=is(a,t),a=u0(2),l=lr(s,a,2),l!==null&&(d0(a,l,s,t),ea(l,2),ni(l));break}}s=s.return}}function om(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new wT;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Zf=!0,h.add(a),t=CT.bind(null,t,s,a),s.then(t,t))}function CT(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(qe&a)===a&&(Ct===4||Ct===3&&(qe&62914560)===qe&&300>rn()-Xu?(tt&2)===0&&So(t,0):em|=a,wo===qe&&(wo=0)),ni(t)}function uv(t,s){s===0&&(s=Wc()),t=ma(t,s),t!==null&&(ea(t,s),ni(t))}function IT(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),uv(t,a)}function RT(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),uv(t,a)}function DT(t,s){return Dt(t,s)}var sd=null,No=null,lm=!1,id=!1,cm=!1,yr=0;function ni(t){t!==No&&t.next===null&&(No===null?sd=No=t:No=No.next=t),id=!0,lm||(lm=!0,OT())}function Wl(t,s){if(!cm&&id){cm=!0;do for(var a=!1,l=sd;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var _=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-vt(42|t)+1)-1,m&=h&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,mv(l,m))}else m=qe,m=Ps(l,l===ht?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||_s(l,m)||(a=!0,mv(l,m));l=l.next}while(a);cm=!1}}function jT(){dv()}function dv(){id=lm=!1;var t=0;yr!==0&&FT()&&(t=yr);for(var s=rn(),a=null,l=sd;l!==null;){var h=l.next,m=hv(l,s);m===0?(l.next=null,a===null?sd=h:a.next=h,h===null&&(No=a)):(a=l,(t!==0||(m&3)!==0)&&(id=!0)),l=h}Xt!==0&&Xt!==5||Wl(t),yr!==0&&(yr=0)}function hv(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-vt(m),w=1<<_,j=h[_];j===-1?((w&a)===0||(w&l)!==0)&&(h[_]=Lh(w,s)):j<=s&&(t.expiredLanes|=w),m&=~w}if(s=ht,a=qe,a=Ps(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(it===2||it===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Vs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||_s(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Vs(l),hi(a)){case 2:case 8:a=Qi;break;case 32:a=ys;break;case 268435456:a=ne;break;default:a=ys}return l=fv.bind(null,t),a=Dt(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Vs(l),t.callbackPriority=2,t.callbackNode=null,2}function fv(t,s){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(nd()&&t.callbackNode!==a)return null;var l=qe;return l=Ps(t,t===ht?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:($0(t,l,s),hv(t,rn()),t.callbackNode!=null&&t.callbackNode===a?fv.bind(null,t):null)}function mv(t,s){if(nd())return null;$0(t,s,!0)}function OT(){GT(function(){(tt&6)!==0?Dt(Jr,jT):dv()})}function um(){if(yr===0){var t=ho;t===0&&(t=ks,ks<<=1,(ks&261888)===0&&(ks=256)),yr=t}return yr}function pv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xa(""+t)}function gv(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function MT(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var m=pv((h[Wt]||null).action),_=l.submitter;_&&(s=(s=_[Wt]||null)?pv(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var w=new Ys("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(yr!==0){var j=_?gv(h,_):new FormData(h);Rf(a,{pending:!0,data:j,method:h.method,action:m},null,j)}}else typeof m=="function"&&(w.preventDefault(),j=_?gv(h,_):new FormData(h),Rf(a,{pending:!0,data:j,method:h.method,action:m},m,j))},currentTarget:h}]})}}for(var dm=0;dm<Qh.length;dm++){var hm=Qh[dm],VT=hm.toLowerCase(),kT=hm[0].toUpperCase()+hm.slice(1);Ns(VT,"on"+kT)}Ns(Kg,"onAnimationEnd"),Ns($g,"onAnimationIteration"),Ns(Yg,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Ww,"onTransitionRun"),Ns(Zw,"onTransitionStart"),Ns(eT,"onTransitionCancel"),Ns(Xg,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function yv(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var w=l[_],j=w.instance,H=w.currentTarget;if(w=w.listener,j!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=H;try{m(h)}catch(Z){_u(Z)}h.currentTarget=null,m=j}else for(_=0;_<l.length;_++){if(w=l[_],j=w.instance,H=w.currentTarget,w=w.listener,j!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=H;try{m(h)}catch(Z){_u(Z)}h.currentTarget=null,m=j}}}}function Be(t,s){var a=s[Ga];a===void 0&&(a=s[Ga]=new Set);var l=t+"__bubble";a.has(l)||(vv(s,t,2,!1),a.add(l))}function fm(t,s,a){var l=0;s&&(l|=4),vv(a,t,l,s)}var rd="_reactListening"+Math.random().toString(36).slice(2);function mm(t){if(!t[rd]){t[rd]=!0,dl.forEach(function(a){a!=="selectionchange"&&(LT.has(a)||fm(a,!1,t),fm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[rd]||(s[rd]=!0,fm("selectionchange",!1,s))}}function vv(t,s,a,l){switch(Kv(s)){case 2:var h=dS;break;case 8:h=hS;break;default:h=Im}a=h.bind(null,s,a,t),h=void 0,!aa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function pm(t,s,a,l,h){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=l.return;_!==null;){var j=_.tag;if((j===3||j===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=qs(w),_===null)return;if(j=_.tag,j===5||j===6||j===26||j===27){l=m=_;continue e}w=w.parentNode}}l=l.return}Wi(function(){var H=m,Z=es(a),se=[];e:{var Q=Jg.get(t);if(Q!==void 0){var X=Ys,ge=t;switch(t){case"keypress":if(la(a)===0)break e;case"keydown":case"keyup":X=gu;break;case"focusin":ge="focus",X=ua;break;case"focusout":ge="blur",X=ua;break;case"beforeblur":case"afterblur":X=ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=v;break;case Kg:case $g:case Yg:X=cu;break;case Xg:X=A;break;case"scroll":case"scrollend":X=wl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=pi;break;case"toggle":case"beforetoggle":X=ke}var Ce=(s&4)!==0,dt=!Ce&&(t==="scroll"||t==="scrollend"),B=Ce?Q!==null?Q+"Capture":null:Q;Ce=[];for(var z=H,F;z!==null;){var te=z;if(F=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||F===null||B===null||(te=ws(z,B),te!=null&&Ce.push(ec(z,te,F))),dt)break;z=z.return}0<Ce.length&&(Q=new X(Q,ge,null,a,Z),se.push({event:Q,listeners:Ce}))}}if((s&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",Q&&a!==xl&&(ge=a.relatedTarget||a.fromElement)&&(qs(ge)||ge[zs]))break e;if((X||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(ge=a.relatedTarget||a.toElement,X=H,ge=ge?qs(ge):null,ge!==null&&(dt=c(ge),Ce=ge.tag,ge!==dt||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(X=null,ge=H),X!==ge)){if(Ce=Tl,te="onMouseLeave",B="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Ce=pi,te="onPointerLeave",B="onPointerEnter",z="pointer"),dt=X==null?Q:Ln(X),F=ge==null?Q:Ln(ge),Q=new Ce(te,z+"leave",X,a,Z),Q.target=dt,Q.relatedTarget=F,te=null,qs(Z)===H&&(Ce=new Ce(B,z+"enter",ge,a,Z),Ce.target=F,Ce.relatedTarget=dt,te=Ce),dt=te,X&&ge)t:{for(Ce=PT,B=X,z=ge,F=0,te=B;te;te=Ce(te))F++;te=0;for(var Se=z;Se;Se=Ce(Se))te++;for(;0<F-te;)B=Ce(B),F--;for(;0<te-F;)z=Ce(z),te--;for(;F--;){if(B===z||z!==null&&B===z.alternate){Ce=B;break t}B=Ce(B),z=Ce(z)}Ce=null}else Ce=null;X!==null&&_v(se,Q,X,Ce,!1),ge!==null&&dt!==null&&_v(se,dt,ge,Ce,!0)}}e:{if(Q=H?Ln(H):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var Je=kg;else if(Mg(Q))if(Lg)Je=Yw;else{Je=Kw;var _e=Qw}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&Ya(H.elementType)&&(Je=kg):Je=$w;if(Je&&(Je=Je(t,H))){Vg(se,Je,a,Z);break e}_e&&_e(t,Q,H),t==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&yl(Q,"number",Q.value)}switch(_e=H?Ln(H):window,t){case"focusin":(Mg(_e)||_e.contentEditable==="true")&&(so=_e,Fh=H,Il=null);break;case"focusout":Il=Fh=so=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Gg(se,a,Z);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":Gg(se,a,Z)}var Ue;if(et)e:{switch(t){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else no?da(t,a)&&(Fe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ws&&a.locale!=="ko"&&(no||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&no&&(Ue=bl()):($s=Z,El="value"in $s?$s.value:$s.textContent,no=!0)),_e=ad(H,Fe),0<_e.length&&(Fe=new Js(Fe,t,null,a,Z),se.push({event:Fe,listeners:_e}),Ue?Fe.data=Ue:(Ue=to(a),Ue!==null&&(Fe.data=Ue)))),(Ue=ns?qw(t,a):Fw(t,a))&&(Fe=ad(H,"onBeforeInput"),0<Fe.length&&(_e=new Js("onBeforeInput","beforeinput",null,a,Z),se.push({event:_e,listeners:Fe}),_e.data=Ue)),MT(se,t,H,a,Z)}yv(se,s)})}function ec(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ad(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=ws(t,a),h!=null&&l.unshift(ec(t,h,m)),h=ws(t,s),h!=null&&l.push(ec(t,h,m))),t.tag===3)return l;t=t.return}return[]}function PT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _v(t,s,a,l,h){for(var m=s._reactName,_=[];a!==null&&a!==l;){var w=a,j=w.alternate,H=w.stateNode;if(w=w.tag,j!==null&&j===l)break;w!==5&&w!==26&&w!==27||H===null||(j=H,h?(H=ws(a,m),H!=null&&_.unshift(ec(a,H,j))):h||(H=ws(a,m),H!=null&&_.push(ec(a,H,j)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var UT=/\r\n?/g,zT=/\u0000|\uFFFD/g;function xv(t){return(typeof t=="string"?t:""+t).replace(UT,`
`).replace(zT,"")}function Ev(t,s){return s=xv(s),xv(t)===s}function ut(t,s,a,l,h,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Cn(t,""+l);break;case"className":Pn(t,"class",l);break;case"tabIndex":Pn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(t,a,l);break;case"style":_l(t,l,m);break;case"data":if(s!=="object"){Pn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Xa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&ut(t,s,"name",h.name,h,null),ut(t,s,"formEncType",h.formEncType,h,null),ut(t,s,"formMethod",h.formMethod,h,null),ut(t,s,"formTarget",h.formTarget,h,null)):(ut(t,s,"encType",h.encType,h,null),ut(t,s,"method",h.method,h,null),ut(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Xa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=bs);break;case"onScroll":l!=null&&Be("scroll",t);break;case"onScrollEnd":l!=null&&Be("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Xa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Be("beforetoggle",t),Be("toggle",t),Ka(t,"popover",l);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ka(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=au.get(a)||a,Ka(t,a,l))}}function gm(t,s,a,l,h,m){switch(a){case"style":_l(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&Cn(t,""+l);break;case"onScroll":l!=null&&Be("scroll",t);break;case"onScrollEnd":l!=null&&Be("scrollend",t);break;case"onClick":l!=null&&(t.onclick=bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[Wt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ka(t,a,l)}}}function un(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",t),Be("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ut(t,s,m,_,a,null)}}h&&ut(t,s,"srcSet",a.srcSet,a,null),l&&ut(t,s,"src",a.src,a,null);return;case"input":Be("invalid",t);var w=m=_=h=null,j=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":_=Z;break;case"checked":j=Z;break;case"defaultChecked":H=Z;break;case"value":m=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:ut(t,s,l,Z,a,null)}}su(t,m,w,j,H,_,h,!1);return;case"select":Be("invalid",t),l=_=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:ut(t,s,h,w,a,null)}s=m,a=_,t.multiple=!!l,s!=null?$i(t,!!l,s,!1):a!=null&&$i(t,!!l,a,!0);return;case"textarea":Be("invalid",t),m=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:ut(t,s,_,w,a,null)}Yi(t,l,h,m);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ut(t,s,j,l,a,null)}return;case"dialog":Be("beforetoggle",t),Be("toggle",t),Be("cancel",t),Be("close",t);break;case"iframe":case"object":Be("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Be(Zl[l],t);break;case"image":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"embed":case"source":case"link":Be("error",t),Be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ut(t,s,H,l,a,null)}return;default:if(Ya(s)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&gm(t,s,Z,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&ut(t,s,w,l,a,null))}function BT(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,w=null,j=null,H=null,Z=null;for(X in a){var se=a[X];if(a.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":j=se;default:l.hasOwnProperty(X)||ut(t,s,X,null,l,se)}}for(var Q in l){var X=l[Q];if(se=a[Q],l.hasOwnProperty(Q)&&(X!=null||se!=null))switch(Q){case"type":m=X;break;case"name":h=X;break;case"checked":H=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==se&&ut(t,s,Q,X,l,se)}}$a(t,_,w,j,H,Z,m,h);return;case"select":X=_=w=Q=null;for(m in a)if(j=a[m],a.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":X=j;default:l.hasOwnProperty(m)||ut(t,s,m,null,l,j)}for(h in l)if(m=l[h],j=a[h],l.hasOwnProperty(h)&&(m!=null||j!=null))switch(h){case"value":Q=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==j&&ut(t,s,h,m,l,j)}s=w,a=_,l=X,Q!=null?$i(t,!!a,Q,!1):!!l!=!!a&&(s!=null?$i(t,!!a,s,!0):$i(t,!!a,a?[]:"",!1));return;case"textarea":X=Q=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ut(t,s,w,null,l,h)}for(_ in l)if(h=l[_],m=a[_],l.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":Q=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&ut(t,s,_,h,l,m)}iu(t,Q,X);return;case"option":for(var ge in a)if(Q=a[ge],a.hasOwnProperty(ge)&&Q!=null&&!l.hasOwnProperty(ge))switch(ge){case"selected":t.selected=!1;break;default:ut(t,s,ge,null,l,Q)}for(j in l)if(Q=l[j],X=a[j],l.hasOwnProperty(j)&&Q!==X&&(Q!=null||X!=null))switch(j){case"selected":t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ut(t,s,j,Q,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)Q=a[Ce],a.hasOwnProperty(Ce)&&Q!=null&&!l.hasOwnProperty(Ce)&&ut(t,s,Ce,null,l,Q);for(H in l)if(Q=l[H],X=a[H],l.hasOwnProperty(H)&&Q!==X&&(Q!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:ut(t,s,H,Q,l,X)}return;default:if(Ya(s)){for(var dt in a)Q=a[dt],a.hasOwnProperty(dt)&&Q!==void 0&&!l.hasOwnProperty(dt)&&gm(t,s,dt,void 0,l,Q);for(Z in l)Q=l[Z],X=a[Z],!l.hasOwnProperty(Z)||Q===X||Q===void 0&&X===void 0||gm(t,s,Z,Q,l,X);return}}for(var B in a)Q=a[B],a.hasOwnProperty(B)&&Q!=null&&!l.hasOwnProperty(B)&&ut(t,s,B,null,l,Q);for(se in l)Q=l[se],X=a[se],!l.hasOwnProperty(se)||Q===X||Q==null&&X==null||ut(t,s,se,Q,l,X)}function bv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,_=h.initiatorType,w=h.duration;if(m&&w&&bv(_)){for(_=0,w=h.responseEnd,l+=1;l<a.length;l++){var j=a[l],H=j.startTime;if(H>w)break;var Z=j.transferSize,se=j.initiatorType;Z&&bv(se)&&(j=j.responseEnd,_+=Z*(j<w?1:(w-H)/(j-H)))}if(--l,s+=8*(m+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ym=null,vm=null;function od(t){return t.nodeType===9?t:t.ownerDocument}function wv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function _m(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xm=null;function FT(){var t=window.event;return t&&t.type==="popstate"?t===xm?!1:(xm=t,!0):(xm=null,!1)}var Sv=typeof setTimeout=="function"?setTimeout:void 0,HT=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,GT=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(t){return Av.resolve(null).then(t).catch(QT)}:Sv;function QT(t){setTimeout(function(){throw t})}function vr(t){return t==="head"}function Nv(t,s){var a=s,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Do(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")tc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,tc(a);for(var m=a.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[Bs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&tc(t.ownerDocument.body);a=h}while(a);Do(s)}function Cv(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Em(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Em(a),Qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function KT(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Bs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=cs(t.nextSibling),t===null)break}return null}function $T(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=cs(t.nextSibling),t===null))return null;return t}function Iv(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=cs(t.nextSibling),t===null))return null;return t}function bm(t){return t.data==="$?"||t.data==="$~"}function wm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function YT(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function cs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Tm=null;function Rv(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return cs(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Dv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function jv(t,s,a){switch(s=od(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function tc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Qa(t)}var us=new Map,Ov=new Set;function ld(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ri=ae.d;ae.d={f:XT,r:JT,D:WT,C:ZT,L:eS,m:tS,X:sS,S:nS,M:iS};function XT(){var t=Ri.f(),s=Zu();return t||s}function JT(t){var s=Zn(t);s!==null&&s.tag===5&&s.type==="form"?Xy(s):Ri.r(t)}var Co=typeof document>"u"?null:document;function Mv(t,s,a){var l=Co;if(l&&typeof s=="string"&&s){var h=Nn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Ov.has(h)||(Ov.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),un(s,"link",t),Pt(s),l.head.appendChild(s)))}}function WT(t){Ri.D(t),Mv("dns-prefetch",t,null)}function ZT(t,s){Ri.C(t,s),Mv("preconnect",t,s)}function eS(t,s,a){Ri.L(t,s,a);var l=Co;if(l&&t&&s){var h='link[rel="preload"][as="'+Nn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Nn(a.imageSizes)+'"]')):h+='[href="'+Nn(t)+'"]';var m=h;switch(s){case"style":m=Io(t);break;case"script":m=Ro(t)}us.has(m)||(t=b({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),us.set(m,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(nc(m))||s==="script"&&l.querySelector(sc(m))||(s=l.createElement("link"),un(s,"link",t),Pt(s),l.head.appendChild(s)))}}function tS(t,s){Ri.m(t,s);var a=Co;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Nn(l)+'"][href="'+Nn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ro(t)}if(!us.has(m)&&(t=b({rel:"modulepreload",href:t},s),us.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sc(m)))return}l=a.createElement("link"),un(l,"link",t),Pt(l),a.head.appendChild(l)}}}function nS(t,s,a){Ri.S(t,s,a);var l=Co;if(l&&t){var h=Fs(l).hoistableStyles,m=Io(t);s=s||"default";var _=h.get(m);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(nc(m)))w.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":s},a),(a=us.get(m))&&Sm(t,a);var j=_=l.createElement("link");Pt(j),un(j,"link",t),j._p=new Promise(function(H,Z){j.onload=H,j.onerror=Z}),j.addEventListener("load",function(){w.loading|=1}),j.addEventListener("error",function(){w.loading|=2}),w.loading|=4,cd(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(m,_)}}}function sS(t,s){Ri.X(t,s);var a=Co;if(a&&t){var l=Fs(a).hoistableScripts,h=Ro(t),m=l.get(h);m||(m=a.querySelector(sc(h)),m||(t=b({src:t,async:!0},s),(s=us.get(h))&&Am(t,s),m=a.createElement("script"),Pt(m),un(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function iS(t,s){Ri.M(t,s);var a=Co;if(a&&t){var l=Fs(a).hoistableScripts,h=Ro(t),m=l.get(h);m||(m=a.querySelector(sc(h)),m||(t=b({src:t,async:!0,type:"module"},s),(s=us.get(h))&&Am(t,s),m=a.createElement("script"),Pt(m),un(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Vv(t,s,a,l){var h=(h=Re.current)?ld(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Io(a.href),a=Fs(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Io(a.href);var m=Fs(h).hoistableStyles,_=m.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=h.querySelector(nc(t)))&&!m._p&&(_.instance=m,_.state.loading=5),us.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},us.set(t,a),m||rS(h,t,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ro(a),a=Fs(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Io(t){return'href="'+Nn(t)+'"'}function nc(t){return'link[rel="stylesheet"]['+t+"]"}function kv(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function rS(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),un(s,"link",a),Pt(s),t.head.appendChild(s))}function Ro(t){return'[src="'+Nn(t)+'"]'}function sc(t){return"script[async]"+t}function Lv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Nn(a.href)+'"]');if(l)return s.instance=l,Pt(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Pt(l),un(l,"style",h),cd(l,a.precedence,t),s.instance=l;case"stylesheet":h=Io(a.href);var m=t.querySelector(nc(h));if(m)return s.state.loading|=4,s.instance=m,Pt(m),m;l=kv(a),(h=us.get(h))&&Sm(l,h),m=(t.ownerDocument||t).createElement("link"),Pt(m);var _=m;return _._p=new Promise(function(w,j){_.onload=w,_.onerror=j}),un(m,"link",l),s.state.loading|=4,cd(m,a.precedence,t),s.instance=m;case"script":return m=Ro(a.src),(h=t.querySelector(sc(m)))?(s.instance=h,Pt(h),h):(l=a,(h=us.get(m))&&(l=b({},a),Am(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Pt(h),un(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,cd(l,a.precedence,t));return s.instance}function cd(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Sm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Am(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ud=null;function Pv(t,s,a){if(ud===null){var l=new Map,h=ud=new Map;h.set(a,l)}else h=ud,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Bs]||m[Lt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var w=l.get(_);w?w.push(m):l.set(_,[m])}}return l}function Uv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function aS(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function zv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function oS(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Io(l.href),m=s.querySelector(nc(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=dd.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Pt(m);return}m=s.ownerDocument||s,l=kv(l),(h=us.get(h))&&Sm(l,h),m=m.createElement("link"),Pt(m);var _=m;_._p=new Promise(function(w,j){_.onload=w,_.onerror=j}),un(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=dd.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Nm=0;function lS(t,s){return t.stylesheets&&t.count===0&&fd(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&fd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Nm===0&&(Nm=62500*qT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&fd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Nm?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function dd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var hd=null;function fd(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,hd=new Map,s.forEach(cS,t),hd=null,dd.call(t))}function cS(t,s){if(!(s.state.loading&4)){var a=hd.get(t);if(a)var l=a.get(null);else{a=new Map,hd.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=s.instance,_=h.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,h),a.set(_,h),this.count++,l=dd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var ic={$$typeof:Y,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function uS(t,s,a,l,h,m,_,w,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Bv(t,s,a,l,h,m,_,w,j,H,Z,se){return t=new uS(t,s,a,_,j,H,Z,se,w),s=1,m===!0&&(s|=24),m=zn(3,null,null,s),t.current=m,m.stateNode=t,s=af(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},uf(m),t}function qv(t){return t?(t=ao,t):ao}function Fv(t,s,a,l,h,m){h=qv(h),l.context===null?l.context=h:l.pendingContext=h,l=or(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=lr(t,l,s),a!==null&&(On(a,t,s),kl(a,t,s))}function Hv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Cm(t,s){Hv(t,s),(t=t.alternate)&&Hv(t,s)}function Gv(t){if(t.tag===13||t.tag===31){var s=ma(t,67108864);s!==null&&On(s,t,67108864),Cm(t,67108864)}}function Qv(t){if(t.tag===13||t.tag===31){var s=Gn();s=na(s);var a=ma(t,s);a!==null&&On(a,t,s),Cm(t,s)}}var md=!0;function dS(t,s,a,l){var h=K.T;K.T=null;var m=ae.p;try{ae.p=2,Im(t,s,a,l)}finally{ae.p=m,K.T=h}}function hS(t,s,a,l){var h=K.T;K.T=null;var m=ae.p;try{ae.p=8,Im(t,s,a,l)}finally{ae.p=m,K.T=h}}function Im(t,s,a,l){if(md){var h=Rm(l);if(h===null)pm(t,s,l,pd,a),$v(t,l);else if(mS(h,t,s,a,l))l.stopPropagation();else if($v(t,l),s&4&&-1<fS.indexOf(t)){for(;h!==null;){var m=Zn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ls(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var j=1<<31-vt(_);w.entanglements[1]|=j,_&=~j}ni(m),(tt&6)===0&&(Ju=rn()+500,Wl(0))}}break;case 31:case 13:w=ma(m,2),w!==null&&On(w,m,2),Zu(),Cm(m,2)}if(m=Rm(l),m===null&&pm(t,s,l,pd,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else pm(t,s,l,null,a)}}function Rm(t){return t=es(t),Dm(t)}var pd=null;function Dm(t){if(pd=null,t=qs(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return pd=t,null}function Kv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(di()){case Jr:return 2;case Qi:return 8;case ys:case Ha:return 32;case ne:return 268435456;default:return 32}default:return 32}}var jm=!1,_r=null,xr=null,Er=null,rc=new Map,ac=new Map,br=[],fS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $v(t,s){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":rc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(s.pointerId)}}function oc(t,s,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},s!==null&&(s=Zn(s),s!==null&&Gv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function mS(t,s,a,l,h){switch(s){case"focusin":return _r=oc(_r,t,s,a,l,h),!0;case"dragenter":return xr=oc(xr,t,s,a,l,h),!0;case"mouseover":return Er=oc(Er,t,s,a,l,h),!0;case"pointerover":var m=h.pointerId;return rc.set(m,oc(rc.get(m)||null,t,s,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,ac.set(m,oc(ac.get(m)||null,t,s,a,l,h)),!0}return!1}function Yv(t){var s=qs(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,xs(t.priority,function(){Qv(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,xs(t.priority,function(){Qv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Rm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);xl=l,a.target.dispatchEvent(l),xl=null}else return s=Zn(a),s!==null&&Gv(s),t.blockedOn=a,!1;s.shift()}return!0}function Xv(t,s,a){gd(t)&&a.delete(s)}function pS(){jm=!1,_r!==null&&gd(_r)&&(_r=null),xr!==null&&gd(xr)&&(xr=null),Er!==null&&gd(Er)&&(Er=null),rc.forEach(Xv),ac.forEach(Xv)}function yd(t,s){t.blockedOn===s&&(t.blockedOn=null,jm||(jm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,pS)))}var vd=null;function Jv(t){vd!==t&&(vd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){vd===t&&(vd=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(Dm(l||a)===null)continue;break}var m=Zn(a);m!==null&&(t.splice(s,3),s-=3,Rf(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Do(t){function s(j){return yd(j,t)}_r!==null&&yd(_r,t),xr!==null&&yd(xr,t),Er!==null&&yd(Er,t),rc.forEach(s),ac.forEach(s);for(var a=0;a<br.length;a++){var l=br[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<br.length&&(a=br[0],a.blockedOn===null);)Yv(a),a.blockedOn===null&&br.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],_=h[Wt]||null;if(typeof m=="function")_||Jv(a);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[Wt]||null)w=_.formAction;else if(Dm(h)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Jv(a)}}}function Wv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function Om(t){this._internalRoot=t}_d.prototype.render=Om.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Gn();Fv(a,l,t,s,null,null)},_d.prototype.unmount=Om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Fv(t.current,2,null,t,null,null),Zu(),s[zs]=null}};function _d(t){this._internalRoot=t}_d.prototype.unstable_scheduleHydration=function(t){if(t){var s=Zc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<br.length&&s!==0&&s<br[a].priority;a++);br.splice(a,0,t),a===0&&Yv(t)}};var Zv=e.version;if(Zv!=="19.2.0")throw Error(r(527,Zv,"19.2.0"));ae.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var gS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{ft=xd.inject(gS),wt=xd}catch{}}return cc.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",h=a0,m=o0,_=l0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Bv(t,1,!1,null,null,a,l,null,h,m,_,Wv),t[zs]=s.current,mm(t),new Om(s)},cc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=a0,_=o0,w=l0,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),s=Bv(t,1,!0,s,a??null,l,h,j,m,_,w,Wv),s.context=qv(null),a=s.current,l=Gn(),l=na(l),h=or(l),h.callback=null,lr(a,h,l),a=l,s.current.lanes=a,ea(s,a),ni(s),t[zs]=s.current,mm(t),new _d(s)},cc.version="19.2.0",cc}var c_;function AS(){if(c_)return km.exports;c_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),km.exports=SS(),km.exports}var NS=AS();const CS=tE(NS);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var u_="popstate";function IS(i={}){function e(o,c){let{pathname:u="/",search:p="",hash:y=""}=Va(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),tp("",{pathname:u,search:p,hash:y},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let u=o.document.querySelector("base"),p="";if(u&&u.getAttribute("href")){let y=o.location.href,g=y.indexOf("#");p=g===-1?y:y.slice(0,g)}return p+"#"+(typeof c=="string"?c:bc(c))}function r(o,c){Xn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return DS(e,n,r,i)}function Et(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Xn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RS(){return Math.random().toString(36).substring(2,10)}function d_(i,e){return{usr:i.state,key:i.key,idx:e}}function tp(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Va(e):e,state:n,key:e&&e.key||r||RS()}}function bc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Va(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function DS(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,u=o.history,p="POP",y=null,g=x();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function x(){return(u.state||{idx:null}).idx}function b(){p="POP";let P=x(),G=P==null?null:P-g;g=P,y&&y({action:p,location:k.location,delta:G})}function T(P,G){p="PUSH";let J=tp(k.location,P,G);n&&n(J,P),g=x()+1;let Y=d_(J,g),de=k.createHref(J);try{u.pushState(Y,"",de)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(de)}c&&y&&y({action:p,location:k.location,delta:1})}function O(P,G){p="REPLACE";let J=tp(k.location,P,G);n&&n(J,P),g=x();let Y=d_(J,g),de=k.createHref(J);u.replaceState(Y,"",de),c&&y&&y({action:p,location:k.location,delta:0})}function L(P){return jS(P)}let k={get action(){return p},get location(){return i(o,u)},listen(P){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(u_,b),y=P,()=>{o.removeEventListener(u_,b),y=null}},createHref(P){return e(o,P)},createURL:L,encodeLocation(P){let G=L(P);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:O,go(P){return u.go(P)}};return k}function jS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:bc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function nE(i,e,n="/"){return OS(i,e,n,!1)}function OS(i,e,n,r){let o=typeof e=="string"?Va(e):e,c=ki(o.pathname||"/",n);if(c==null)return null;let u=sE(i);MS(u);let p=null;for(let y=0;p==null&&y<u.length;++y){let g=GS(c);p=FS(u[y],g,r)}return p}function sE(i,e=[],n=[],r="",o=!1){let c=(u,p,y=o,g)=>{let x={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(r)&&y)return;Et(x.relativePath.startsWith(r),`Absolute route path "${x.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(r.length)}let b=Vi([r,x.relativePath]),T=n.concat(x);u.children&&u.children.length>0&&(Et(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),sE(u.children,e,T,b,y)),!(u.path==null&&!u.index)&&e.push({path:b,score:BS(b,u.index),routesMeta:T})};return i.forEach((u,p)=>{var y;if(u.path===""||!((y=u.path)!=null&&y.includes("?")))c(u,p);else for(let g of iE(u.path))c(u,p,!0,g)}),e}function iE(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let u=iE(r.join("/")),p=[];return p.push(...u.map(y=>y===""?c:[c,y].join("/"))),o&&p.push(...u),p.map(y=>i.startsWith("/")&&y===""?"/":y)}function MS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:qS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var VS=/^:[\w-]+$/,kS=3,LS=2,PS=1,US=10,zS=-2,h_=i=>i==="*";function BS(i,e){let n=i.split("/"),r=n.length;return n.some(h_)&&(r+=zS),e&&(r+=LS),n.filter(o=>!h_(o)).reduce((o,c)=>o+(VS.test(c)?kS:c===""?PS:US),r)}function qS(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function FS(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",u=[];for(let p=0;p<r.length;++p){let y=r[p],g=p===r.length-1,x=c==="/"?e:e.slice(c.length)||"/",b=qd({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},x),T=y.route;if(!b&&g&&n&&!r[r.length-1].route.index&&(b=qd({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},x)),!b)return null;Object.assign(o,b.params),u.push({params:o,pathname:Vi([c,b.pathname]),pathnameBase:XS(Vi([c,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(c=Vi([c,b.pathnameBase]))}return u}function qd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=HS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((g,{paramName:x,isOptional:b},T)=>{if(x==="*"){let L=p[T]||"";u=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const O=p[T];return b&&!O?g[x]=void 0:g[x]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:u,pattern:i}}function HS(i,e=!1,n=!0){Xn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,y)=>(r.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function GS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ki(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}var QS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KS=i=>QS.test(i);function $S(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?Va(i):i,c;if(n)if(KS(n))c=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Xn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?c=f_(n.substring(1),"/"):c=f_(n,e)}else c=e;return{pathname:c,search:JS(r),hash:WS(o)}}function f_(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function zm(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ip(i){let e=YS(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Rp(i,e,n,r=!1){let o;typeof i=="string"?o=Va(i):(o={...i},Et(!o.pathname||!o.pathname.includes("?"),zm("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),zm("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),zm("#","search","hash",o)));let c=i===""||o.pathname==="",u=c?"/":o.pathname,p;if(u==null)p=n;else{let b=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),b-=1;o.pathname=T.join("/")}p=b>=0?e[b]:"/"}let y=$S(o,p),g=u&&u!=="/"&&u.endsWith("/"),x=(c||u===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(g||x)&&(y.pathname+="/"),y}var Vi=i=>i.join("/").replace(/\/\/+/g,"/"),XS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),JS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,WS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ZS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rE=["POST","PUT","PATCH","DELETE"];new Set(rE);var e1=["GET",...rE];new Set(e1);var Zo=R.createContext(null);Zo.displayName="DataRouter";var dh=R.createContext(null);dh.displayName="DataRouterState";R.createContext(!1);var aE=R.createContext({isTransitioning:!1});aE.displayName="ViewTransition";var t1=R.createContext(new Map);t1.displayName="Fetchers";var n1=R.createContext(null);n1.displayName="Await";var Os=R.createContext(null);Os.displayName="Navigation";var Vc=R.createContext(null);Vc.displayName="Location";var Ms=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var Dp=R.createContext(null);Dp.displayName="RouteError";function s1(i,{relative:e}={}){Et(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Os),{hash:o,pathname:c,search:u}=kc(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:Vi([n,c])),r.createHref({pathname:p,search:u,hash:o})}function el(){return R.useContext(Vc)!=null}function Bi(){return Et(el(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Vc).location}var oE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lE(i){R.useContext(Os).static||R.useLayoutEffect(i)}function Qr(){let{isDataRoute:i}=R.useContext(Ms);return i?g1():i1()}function i1(){Et(el(),"useNavigate() may be used only in the context of a <Router> component.");let i=R.useContext(Zo),{basename:e,navigator:n}=R.useContext(Os),{matches:r}=R.useContext(Ms),{pathname:o}=Bi(),c=JSON.stringify(Ip(r)),u=R.useRef(!1);return lE(()=>{u.current=!0}),R.useCallback((y,g={})=>{if(Xn(u.current,oE),!u.current)return;if(typeof y=="number"){n.go(y);return}let x=Rp(y,JSON.parse(c),o,g.relative==="path");i==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Vi([e,x.pathname])),(g.replace?n.replace:n.push)(x,g.state,g)},[e,n,c,o,i])}R.createContext(null);function cE(){let{matches:i}=R.useContext(Ms),e=i[i.length-1];return e?e.params:{}}function kc(i,{relative:e}={}){let{matches:n}=R.useContext(Ms),{pathname:r}=Bi(),o=JSON.stringify(Ip(n));return R.useMemo(()=>Rp(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function r1(i,e){return uE(i,e)}function uE(i,e,n,r,o){var J;Et(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=R.useContext(Os),{matches:u}=R.useContext(Ms),p=u[u.length-1],y=p?p.params:{},g=p?p.pathname:"/",x=p?p.pathnameBase:"/",b=p&&p.route;{let Y=b&&b.path||"";dE(g,!b||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=Bi(),O;if(e){let Y=typeof e=="string"?Va(e):e;Et(x==="/"||((J=Y.pathname)==null?void 0:J.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),O=Y}else O=T;let L=O.pathname||"/",k=L;if(x!=="/"){let Y=x.replace(/^\//,"").split("/");k="/"+L.replace(/^\//,"").split("/").slice(Y.length).join("/")}let P=nE(i,{pathname:k});Xn(b||P!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Xn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=u1(P&&P.map(Y=>Object.assign({},Y,{params:Object.assign({},y,Y.params),pathname:Vi([x,c.encodeLocation?c.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?x:Vi([x,c.encodeLocation?c.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),u,n,r,o);return e&&G?R.createElement(Vc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},G):G}function a1(){let i=p1(),e=ZS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:c},"ErrorBoundary")," or"," ",R.createElement("code",{style:c},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:o},n):null,u)}var o1=R.createElement(a1,null),l1=class extends R.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?R.createElement(Ms.Provider,{value:this.props.routeContext},R.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function c1({routeContext:i,match:e,children:n}){let r=R.useContext(Zo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Ms.Provider,{value:i},n)}function u1(i,e=[],n=null,r=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,u=n==null?void 0:n.errors;if(u!=null){let x=c.findIndex(b=>b.route.id&&(u==null?void 0:u[b.route.id])!==void 0);Et(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let p=!1,y=-1;if(n)for(let x=0;x<c.length;x++){let b=c[x];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(y=x),b.route.id){let{loaderData:T,errors:O}=n,L=b.route.loader&&!T.hasOwnProperty(b.route.id)&&(!O||O[b.route.id]===void 0);if(b.route.lazy||L){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}let g=n&&r?(x,b)=>{var T,O;r(x,{location:n.location,params:((O=(T=n.matches)==null?void 0:T[0])==null?void 0:O.params)??{},errorInfo:b})}:void 0;return c.reduceRight((x,b,T)=>{let O,L=!1,k=null,P=null;n&&(O=u&&b.route.id?u[b.route.id]:void 0,k=b.route.errorElement||o1,p&&(y<0&&T===0?(dE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,P=null):y===T&&(L=!0,P=b.route.hydrateFallbackElement||null)));let G=e.concat(c.slice(0,T+1)),J=()=>{let Y;return O?Y=k:L?Y=P:b.route.Component?Y=R.createElement(b.route.Component,null):b.route.element?Y=b.route.element:Y=x,R.createElement(c1,{match:b,routeContext:{outlet:x,matches:G,isDataRoute:n!=null},children:Y})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?R.createElement(l1,{location:n.location,revalidation:n.revalidation,component:k,error:O,children:J(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:g}):J()},null)}function jp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d1(i){let e=R.useContext(Zo);return Et(e,jp(i)),e}function h1(i){let e=R.useContext(dh);return Et(e,jp(i)),e}function f1(i){let e=R.useContext(Ms);return Et(e,jp(i)),e}function Op(i){let e=f1(i),n=e.matches[e.matches.length-1];return Et(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function m1(){return Op("useRouteId")}function p1(){var r;let i=R.useContext(Dp),e=h1("useRouteError"),n=Op("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[n]}function g1(){let{router:i}=d1("useNavigate"),e=Op("useNavigate"),n=R.useRef(!1);return lE(()=>{n.current=!0}),R.useCallback(async(o,c={})=>{Xn(n.current,oE),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var m_={};function dE(i,e,n){!e&&!m_[i]&&(m_[i]=!0,Xn(!1,n))}R.memo(y1);function y1({routes:i,future:e,state:n,unstable_onError:r}){return uE(i,void 0,n,r,e)}function Id({to:i,replace:e,state:n,relative:r}){Et(el(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(Os);Xn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=R.useContext(Ms),{pathname:u}=Bi(),p=Qr(),y=Rp(i,Ip(c),u,r==="path"),g=JSON.stringify(y);return R.useEffect(()=>{p(JSON.parse(g),{replace:e,state:n,relative:r})},[p,g,r,e,n]),null}function ds(i){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function v1({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){Et(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),p=R.useMemo(()=>({basename:u,navigator:o,static:c,future:{}}),[u,o,c]);typeof n=="string"&&(n=Va(n));let{pathname:y="/",search:g="",hash:x="",state:b=null,key:T="default"}=n,O=R.useMemo(()=>{let L=ki(y,u);return L==null?null:{location:{pathname:L,search:g,hash:x,state:b,key:T},navigationType:r}},[u,y,g,x,b,T,r]);return Xn(O!=null,`<Router basename="${u}"> is not able to match the URL "${y}${g}${x}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:R.createElement(Os.Provider,{value:p},R.createElement(Vc.Provider,{children:e,value:O}))}function _1({children:i,location:e}){return r1(np(i),e)}function np(i,e=[]){let n=[];return R.Children.forEach(i,(r,o)=>{if(!R.isValidElement(r))return;let c=[...e,o];if(r.type===R.Fragment){n.push.apply(n,np(r.props.children,c));return}Et(r.type===ds,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=np(r.props.children,c)),n.push(u)}),n}var Rd="get",Dd="application/x-www-form-urlencoded";function hh(i){return i!=null&&typeof i.tagName=="string"}function x1(i){return hh(i)&&i.tagName.toLowerCase()==="button"}function E1(i){return hh(i)&&i.tagName.toLowerCase()==="form"}function b1(i){return hh(i)&&i.tagName.toLowerCase()==="input"}function w1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function T1(i,e){return i.button===0&&(!e||e==="_self")&&!w1(i)}var Ed=null;function S1(){if(Ed===null)try{new FormData(document.createElement("form"),0),Ed=!1}catch{Ed=!0}return Ed}var A1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bm(i){return i!=null&&!A1.has(i)?(Xn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dd}"`),null):i}function N1(i,e){let n,r,o,c,u;if(E1(i)){let p=i.getAttribute("action");r=p?ki(p,e):null,n=i.getAttribute("method")||Rd,o=Bm(i.getAttribute("enctype"))||Dd,c=new FormData(i)}else if(x1(i)||b1(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=i.getAttribute("formaction")||p.getAttribute("action");if(r=y?ki(y,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||Rd,o=Bm(i.getAttribute("formenctype"))||Bm(p.getAttribute("enctype"))||Dd,c=new FormData(p,i),!S1()){let{name:g,type:x,value:b}=i;if(x==="image"){let T=g?`${g}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else g&&c.append(g,b)}}else{if(hh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Rd,r=null,o=Dd,u=i}return c&&o==="text/plain"&&(u=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function C1(i,e,n){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ki(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function I1(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R1(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function D1(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let u=await I1(c,n);return u.links?u.links():[]}return[]}));return V1(r.flat(1).filter(R1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function p_(i,e,n,r,o,c){let u=(y,g)=>n[g]?y.route.id!==n[g].route.id:!0,p=(y,g)=>{var x;return n[g].pathname!==y.pathname||((x=n[g].route.path)==null?void 0:x.endsWith("*"))&&n[g].params["*"]!==y.params["*"]};return c==="assets"?e.filter((y,g)=>u(y,g)||p(y,g)):c==="data"?e.filter((y,g)=>{var b;let x=r.routes[y.route.id];if(!x||!x.hasLoader)return!1;if(u(y,g)||p(y,g))return!0;if(y.route.shouldRevalidate){let T=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(i,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function j1(i,e,{includeHydrateFallback:n}={}){return O1(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function O1(i){return[...new Set(i)]}function M1(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function V1(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(M1(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function hE(){let i=R.useContext(Zo);return Mp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function k1(){let i=R.useContext(dh);return Mp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Vp=R.createContext(void 0);Vp.displayName="FrameworkContext";function fE(){let i=R.useContext(Vp);return Mp(i,"You must render this element inside a <HydratedRouter> element"),i}function L1(i,e){let n=R.useContext(Vp),[r,o]=R.useState(!1),[c,u]=R.useState(!1),{onFocus:p,onBlur:y,onMouseEnter:g,onMouseLeave:x,onTouchStart:b}=e,T=R.useRef(null);R.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let k=G=>{G.forEach(J=>{u(J.isIntersecting)})},P=new IntersectionObserver(k,{threshold:.5});return T.current&&P.observe(T.current),()=>{P.disconnect()}}},[i]),R.useEffect(()=>{if(r){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[r]);let O=()=>{o(!0)},L=()=>{o(!1),u(!1)};return n?i!=="intent"?[c,T,{}]:[c,T,{onFocus:uc(p,O),onBlur:uc(y,L),onMouseEnter:uc(g,O),onMouseLeave:uc(x,L),onTouchStart:uc(b,O)}]:[!1,T,{}]}function uc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function P1({page:i,...e}){let{router:n}=hE(),r=R.useMemo(()=>nE(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?R.createElement(z1,{page:i,matches:r,...e}):null}function U1(i){let{manifest:e,routeModules:n}=fE(),[r,o]=R.useState([]);return R.useEffect(()=>{let c=!1;return D1(i,e,n).then(u=>{c||o(u)}),()=>{c=!0}},[i,e,n]),r}function z1({page:i,matches:e,...n}){let r=Bi(),{manifest:o,routeModules:c}=fE(),{basename:u}=hE(),{loaderData:p,matches:y}=k1(),g=R.useMemo(()=>p_(i,e,y,o,r,"data"),[i,e,y,o,r]),x=R.useMemo(()=>p_(i,e,y,o,r,"assets"),[i,e,y,o,r]),b=R.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let L=new Set,k=!1;if(e.forEach(G=>{var Y;let J=o.routes[G.route.id];!J||!J.hasLoader||(!g.some(de=>de.route.id===G.route.id)&&G.route.id in p&&((Y=c[G.route.id])!=null&&Y.shouldRevalidate)||J.hasClientLoader?k=!0:L.add(G.route.id))}),L.size===0)return[];let P=C1(i,u,"data");return k&&L.size>0&&P.searchParams.set("_routes",e.filter(G=>L.has(G.route.id)).map(G=>G.route.id).join(",")),[P.pathname+P.search]},[u,p,r,o,g,e,i,c]),T=R.useMemo(()=>j1(x,o),[x,o]),O=U1(x);return R.createElement(R.Fragment,null,b.map(L=>R.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),T.map(L=>R.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),O.map(({key:L,link:k})=>R.createElement("link",{key:L,nonce:n.nonce,...k})))}function B1(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mE&&(window.__reactRouterVersion="7.9.6")}catch{}function q1({basename:i,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=IS({window:n,v5Compat:!0}));let o=r.current,[c,u]=R.useState({action:o.action,location:o.location}),p=R.useCallback(y=>{R.startTransition(()=>u(y))},[u]);return R.useLayoutEffect(()=>o.listen(p),[o,p]),R.createElement(v1,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:u,state:p,target:y,to:g,preventScrollReset:x,viewTransition:b,...T},O){let{basename:L}=R.useContext(Os),k=typeof g=="string"&&pE.test(g),P,G=!1;if(typeof g=="string"&&k&&(P=g,mE))try{let I=new URL(window.location.href),U=g.startsWith("//")?new URL(I.protocol+g):new URL(g),M=ki(U.pathname,L);U.origin===I.origin&&M!=null?g=M+U.search+U.hash:G=!0}catch{Xn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=s1(g,{relative:o}),[Y,de,ye]=L1(r,T),le=Q1(g,{replace:u,state:p,target:y,preventScrollReset:x,relative:o,viewTransition:b});function C(I){e&&e(I),I.defaultPrevented||le(I)}let N=R.createElement("a",{...T,...ye,href:P||J,onClick:G||c?e:C,ref:B1(O,de),target:y,"data-discover":!k&&n==="render"?"true":void 0});return Y&&!k?R.createElement(R.Fragment,null,N,R.createElement(P1,{page:J})):N});gt.displayName="Link";var F1=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:u,viewTransition:p,children:y,...g},x){let b=kc(u,{relative:g.relative}),T=Bi(),O=R.useContext(dh),{navigator:L,basename:k}=R.useContext(Os),P=O!=null&&J1(b)&&p===!0,G=L.encodeLocation?L.encodeLocation(b).pathname:b.pathname,J=T.pathname,Y=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(J=J.toLowerCase(),Y=Y?Y.toLowerCase():null,G=G.toLowerCase()),Y&&k&&(Y=ki(Y,k)||Y);const de=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ye=J===G||!o&&J.startsWith(G)&&J.charAt(de)==="/",le=Y!=null&&(Y===G||!o&&Y.startsWith(G)&&Y.charAt(G.length)==="/"),C={isActive:ye,isPending:le,isTransitioning:P},N=ye?e:void 0,I;typeof r=="function"?I=r(C):I=[r,ye?"active":null,le?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let U=typeof c=="function"?c(C):c;return R.createElement(gt,{...g,"aria-current":N,className:I,ref:x,style:U,to:u,viewTransition:p},typeof y=="function"?y(C):y)});F1.displayName="NavLink";var H1=R.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:u=Rd,action:p,onSubmit:y,relative:g,preventScrollReset:x,viewTransition:b,...T},O)=>{let L=Y1(),k=X1(p,{relative:g}),P=u.toLowerCase()==="get"?"get":"post",G=typeof p=="string"&&pE.test(p),J=Y=>{if(y&&y(Y),Y.defaultPrevented)return;Y.preventDefault();let de=Y.nativeEvent.submitter,ye=(de==null?void 0:de.getAttribute("formmethod"))||u;L(de||Y.currentTarget,{fetcherKey:e,method:ye,navigate:n,replace:o,state:c,relative:g,preventScrollReset:x,viewTransition:b})};return R.createElement("form",{ref:O,method:P,action:k,onSubmit:r?y:J,...T,"data-discover":!G&&i==="render"?"true":void 0})});H1.displayName="Form";function G1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gE(i){let e=R.useContext(Zo);return Et(e,G1(i)),e}function Q1(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:u}={}){let p=Qr(),y=Bi(),g=kc(i,{relative:c});return R.useCallback(x=>{if(T1(x,e)){x.preventDefault();let b=n!==void 0?n:bc(y)===bc(g);p(i,{replace:b,state:r,preventScrollReset:o,relative:c,viewTransition:u})}},[y,p,g,n,r,e,i,o,c,u])}var K1=0,$1=()=>`__${String(++K1)}__`;function Y1(){let{router:i}=gE("useSubmit"),{basename:e}=R.useContext(Os),n=m1();return R.useCallback(async(r,o={})=>{let{action:c,method:u,encType:p,formData:y,body:g}=N1(r,e);if(o.navigate===!1){let x=o.fetcherKey||$1();await i.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:g,formMethod:o.method||u,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:g,formMethod:o.method||u,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function X1(i,{relative:e}={}){let{basename:n}=R.useContext(Os),r=R.useContext(Ms);Et(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...kc(i||".",{relative:e})},u=Bi();if(i==null){c.search=u.search;let p=new URLSearchParams(c.search),y=p.getAll("index");if(y.some(x=>x==="")){p.delete("index"),y.filter(b=>b).forEach(b=>p.append("index",b));let x=p.toString();c.search=x?`?${x}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Vi([n,c.pathname])),bc(c)}function J1(i,{relative:e}={}){let n=R.useContext(aE);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gE("useViewTransitionState"),o=kc(i,{relative:e});if(!n.isTransitioning)return!1;let c=ki(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=ki(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qd(o.pathname,u)!=null||qd(o.pathname,c)!=null}var nt=(i=>(i.ADMIN="admin",i.USER="user",i))(nt||{}),hs=(i=>(i.CONFIRMED="confirmed",i.CANCELED="canceled",i.WAITLIST="waitlist",i))(hs||{});const nn=i=>{if(!i)return"";if(i.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,n,r]=i.split("-");return`${r}/${n}/${e}`}try{const e=new Date(i);return isNaN(e.getTime())?i:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return i}},Ir=i=>{if(!i)return 0;const[e,n]=i.split(":").map(Number);return e*60+n},W1=i=>i&&i.apiKey&&i.projectId&&i.appId,g_={apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.appspot.com",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML"},Rr={useFirebase:W1(g_),firebase:g_},Z1=()=>{};var y_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},eA=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],u=i[n++],p=i[n++],y=((o&7)<<18|(c&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],u=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},vE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,p=u?i[o+1]:0,y=o+2<i.length,g=y?i[o+2]:0,x=c>>2,b=(c&3)<<4|p>>4;let T=(p&15)<<2|g>>6,O=g&63;y||(O=64,u||(T=64)),r.push(n[x],n[b],n[T],n[O])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(yE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):eA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||g==null||b==null)throw new tA;const T=c<<2|p>>4;if(r.push(T),g!==64){const O=p<<4&240|g>>2;if(r.push(O),b!==64){const L=g<<6&192|b;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class tA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nA=function(i){const e=yE(i);return vE.encodeByteArray(e,!0)},Fd=function(i){return nA(i).replace(/\./g,"")},_E=function(i){try{return vE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=()=>sA().__FIREBASE_DEFAULTS__,rA=()=>{if(typeof process>"u"||typeof y_>"u")return;const i=y_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},aA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&_E(i[1]);return e&&JSON.parse(e)},fh=()=>{try{return Z1()||iA()||rA()||aA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},xE=i=>{var e,n;return(n=(e=fh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},oA=i=>{const e=xE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EE=()=>{var i;return(i=fh())==null?void 0:i.config},bE=i=>{var e;return(e=fh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Fd(JSON.stringify(n)),Fd(JSON.stringify(u)),""].join(".")}const gc={};function uA(){const i={prod:[],emulator:[]};for(const e of Object.keys(gc))gc[e]?i.emulator.push(e):i.prod.push(e);return i}function dA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let v_=!1;function TE(i,e){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||gc[i]===e||gc[i]||v_)return;gc[i]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=uA().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,O){T.setAttribute("width","24"),T.setAttribute("id",O),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{v_=!0,u()},T}function x(T,O){T.setAttribute("id",O),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=dA(r),O=n("text"),L=document.getElementById(O)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),G=n("preprendIcon"),J=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Y=T.element;p(Y),x(P,k);const de=g();y(J,G),Y.append(J,L,P,de),document.body.appendChild(Y)}c?(L.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function fA(){var e;const i=(e=fh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function gA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const i=_n();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function vA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="FirebaseError";class qi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EA,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?bA(c,r):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new qi(o,p,r)}}function bA(i,e){return i.replace(wA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const wA=/\{\$([^}]+)}/g;function TA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ra(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],u=e[o];if(__(c)&&__(u)){if(!Ra(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function __(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function hc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function SA(i,e){const n=new AA(i,e);return n.subscribe.bind(n)}class AA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=qm),o.error===void 0&&(o.error=qm),o.complete===void 0&&(o.complete=qm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function qm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(i){return i&&i._delegate?i._delegate:i}class Da{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RA(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&u.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(i){return i===Na?void 0:i}function RA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(He||(He={}));const jA={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},OA=He.INFO,MA={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},VA=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=MA[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kp{constructor(e){this.name=e,this._logLevel=OA,this._logHandler=VA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const kA=(i,e)=>e.some(n=>i instanceof n);let x_,E_;function LA(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PA(){return E_||(E_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,sp=new WeakMap,AE=new WeakMap,Fm=new WeakMap,Lp=new WeakMap;function UA(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{n(Or(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&SE.set(n,i)}).catch(()=>{}),Lp.set(e,i),e}function zA(i){if(sp.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});sp.set(i,e)}let ip={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return sp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||AE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function BA(i){ip=i(ip)}function qA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Hm(this),e,...n);return AE.set(r,e.sort?e.sort():[e]),Or(r)}:PA().includes(i)?function(...e){return i.apply(Hm(this),e),Or(SE.get(this))}:function(...e){return Or(i.apply(Hm(this),e))}}function FA(i){return typeof i=="function"?qA(i):(i instanceof IDBTransaction&&zA(i),kA(i,LA())?new Proxy(i,ip):i)}function Or(i){if(i instanceof IDBRequest)return UA(i);if(Fm.has(i))return Fm.get(i);const e=FA(i);return e!==i&&(Fm.set(i,e),Lp.set(e,i)),e}const Hm=i=>Lp.get(i);function HA(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),p=Or(u);return r&&u.addEventListener("upgradeneeded",y=>{r(Or(u.result),y.oldVersion,y.newVersion,Or(u.transaction),y)}),n&&u.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const GA=["get","getKey","getAll","getAllKeys","count"],QA=["put","add","delete","clear"],Gm=new Map;function b_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Gm.get(e))return Gm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=QA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||GA.includes(n)))return;const c=async function(u,...p){const y=this.transaction(u,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&y.done]))[0]};return Gm.set(e,c),c}BA(i=>({...i,get:(e,n,r)=>b_(e,n)||i.get(e,n,r),has:(e,n)=>!!b_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($A(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $A(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",w_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new kp("@firebase/app"),YA="@firebase/app-compat",XA="@firebase/analytics-compat",JA="@firebase/analytics",WA="@firebase/app-check-compat",ZA="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",sN="@firebase/data-connect",iN="@firebase/database-compat",rN="@firebase/functions",aN="@firebase/functions-compat",oN="@firebase/installations",lN="@firebase/installations-compat",cN="@firebase/messaging",uN="@firebase/messaging-compat",dN="@firebase/performance",hN="@firebase/performance-compat",fN="@firebase/remote-config",mN="@firebase/remote-config-compat",pN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",vN="@firebase/ai",_N="@firebase/firestore-compat",xN="firebase",EN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",bN={[rp]:"fire-core",[YA]:"fire-core-compat",[JA]:"fire-analytics",[XA]:"fire-analytics-compat",[ZA]:"fire-app-check",[WA]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[sN]:"fire-data-connect",[iN]:"fire-rtdb-compat",[rN]:"fire-fn",[aN]:"fire-fn-compat",[oN]:"fire-iid",[lN]:"fire-iid-compat",[cN]:"fire-fcm",[uN]:"fire-fcm-compat",[dN]:"fire-perf",[hN]:"fire-perf-compat",[fN]:"fire-rc",[mN]:"fire-rc-compat",[pN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[_N]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[xN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new Map,wN=new Map,op=new Map;function T_(i,e){try{i.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ho(i){const e=i.name;if(op.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,i);for(const n of Hd.values())T_(n,i);for(const n of wN.values())T_(n,i);return!0}function Pp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function fs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Lc("app","Firebase",TN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=EN;function NE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:ap,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Mr.create("bad-app-name",{appName:String(o)});if(n||(n=EE()),!n)throw Mr.create("no-options");const c=Hd.get(o);if(c){if(Ra(n,c.options)&&Ra(r,c.config))return c;throw Mr.create("duplicate-app",{appName:o})}const u=new DA(o);for(const y of op.values())u.addComponent(y);const p=new SN(n,r,u);return Hd.set(o,p),p}function CE(i=ap){const e=Hd.get(i);if(!e&&i===ap&&EE())return NE();if(!e)throw Mr.create("no-app",{appName:i});return e}function Vr(i,e,n){let r=bN[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(u.join(" "));return}Ho(new Da(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="firebase-heartbeat-database",NN=1,wc="firebase-heartbeat-store";let Qm=null;function IE(){return Qm||(Qm=HA(AN,NN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Mr.create("idb-open",{originalErrorMessage:i.message})})),Qm}async function CN(i){try{const n=(await IE()).transaction(wc),r=await n.objectStore(wc).get(RE(i));return await n.done,r}catch(e){if(e instanceof qi)Li.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function S_(i,e){try{const r=(await IE()).transaction(wc,"readwrite");await r.objectStore(wc).put(e,RE(i)),await r.done}catch(n){if(n instanceof qi)Li.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(r.message)}}}function RE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=1024,RN=30;class DN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ON(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=A_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>RN){const u=MN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A_(),{heartbeatsToSend:r,unsentEntries:o}=jN(this._heartbeatsCache.heartbeats),c=Fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Li.warn(n),""}}}function A_(){return new Date().toISOString().substring(0,10)}function jN(i,e=IN){const n=[];let r=i.slice();for(const o of i){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),N_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),N_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _A()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function N_(i){return Fd(JSON.stringify({version:2,heartbeats:i})).length}function MN(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(i){Ho(new Da("platform-logger",e=>new KA(e),"PRIVATE")),Ho(new Da("heartbeat",e=>new DN(e),"PRIVATE")),Vr(rp,w_,i),Vr(rp,w_,"esm2020"),Vr("fire-js","")}VN("");var kN="firebase",LN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(kN,LN,"app");function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PN=DE,jE=new Lc("auth","Firebase",DE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new kp("@firebase/auth");function UN(i,...e){Gd.logLevel<=He.WARN&&Gd.warn(`Auth (${nl}): ${i}`,...e)}function jd(i,...e){Gd.logLevel<=He.ERROR&&Gd.error(`Auth (${nl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(i,...e){throw zp(i,...e)}function Ds(i,...e){return zp(i,...e)}function Up(i,e,n){const r={...PN(),[e]:n};return new Lc("auth","Firebase",r).create(e,{appName:i.name})}function kr(i){return Up(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zN(i,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ps(i,"argument-error"),Up(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return jE.create(i,...e)}function je(i,e,...n){if(!i)throw zp(e,...n)}function Oi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw jd(e),new Error(e)}function Pi(i,e){i||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function BN(){return C_()==="http:"||C_()==="https:"}function C_(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BN()||pA()||"connection"in navigator)?navigator.onLine:!0}function FN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=hA()||gA()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(i,e){Pi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QN=new Uc(3e4,6e4);function ka(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Kr(i,e,n,r,o={}){return ME(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const p=Pc({key:i.config.apiKey,...u}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:y,...c};return mA()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&tl(i.emulatorConfig.host)&&(g.credentials="include"),OE.fetch()(await VE(i,i.config.apiHost,n,p),g)})}async function ME(i,e,n){i._canInitEmulator=!1;const r={...HN,...e};try{const o=new $N(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw bd(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const p=c.ok?u.errorMessage:u.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw bd(i,"credential-already-in-use",u);if(y==="EMAIL_EXISTS")throw bd(i,"email-already-in-use",u);if(y==="USER_DISABLED")throw bd(i,"user-disabled",u);const x=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Up(i,x,g);ps(i,x)}}catch(o){if(o instanceof qi)throw o;ps(i,"network-request-failed",{message:String(o)})}}async function mh(i,e,n,r,o={}){const c=await Kr(i,e,n,r,o);return"mfaPendingCredential"in c&&ps(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function VE(i,e,n,r){const o=`${e}${n}?${r}`,c=i,u=c.config.emulator?Bp(i.config,o):`${i.config.apiScheme}://${o}`;return GN.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function KN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $N{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),QN.get())})}}function bd(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ds(i,e,r);return o.customData._tokenResponse=n,o}function I_(i){return i!==void 0&&i.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function XN(i,e){return Kr(i,"GET","/v2/recaptchaConfig",ka(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(i,e){return Kr(i,"POST","/v1/accounts:delete",e)}async function Qd(i,e){return Kr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WN(i,e=!1){const n=Tt(i),r=await n.getIdToken(e),o=qp(r);je(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:yc(Km(o.auth_time)),issuedAtTime:yc(Km(o.iat)),expirationTime:yc(Km(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Km(i){return Number(i)*1e3}function qp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{const o=_E(n);return o?JSON.parse(o):(jd("Failed to decode base64 JWT payload"),null)}catch(o){return jd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function R_(i){const e=qp(i);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qi&&ZN(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function ZN({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(i){var b;const e=i.auth,n=await i.getIdToken(),r=await Tc(i,Qd(e,{idToken:n}));je(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?kE(o.providerUserInfo):[],u=n2(i.providerData,c),p=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!(u!=null&&u.length),g=p?y:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,x)}async function t2(i){const e=Tt(i);await Kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n2(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function kE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(i,e){const n=await ME(i,{},async()=>{const r=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await VE(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return i.emulatorConfig&&tl(i.emulatorConfig.host)&&(y.credentials="include"),OE.fetch()(u,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function i2(i,e){return Kr(i,"POST","/v2/accounts:revokeToken",ka(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=R_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await s2(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,u=new Po;return r&&(je(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(je(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(je(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(i,e){je(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Rs{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new e2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Tc(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WN(this,e)}reload(){return t2(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject(kr(this.auth));const e=await this.getIdToken();return await Tc(this,JN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:b,emailVerified:T,isAnonymous:O,providerData:L,stsTokenManager:k}=n;je(b&&k,e,"internal-error");const P=Po.fromJSON(this.name,k);je(typeof b=="string",e,"internal-error"),Tr(r,e.name),Tr(o,e.name),je(typeof T=="boolean",e,"internal-error"),je(typeof O=="boolean",e,"internal-error"),Tr(c,e.name),Tr(u,e.name),Tr(p,e.name),Tr(y,e.name),Tr(g,e.name),Tr(x,e.name);const G=new Rs({uid:b,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:O,photoURL:u,phoneNumber:c,tenantId:p,stsTokenManager:P,createdAt:g,lastLoginAt:x});return L&&Array.isArray(L)&&(G.providerData=L.map(J=>({...J}))),y&&(G._redirectEventId=y),G}static async _fromIdTokenResponse(e,n,r=!1){const o=new Po;o.updateFromServerResponse(n);const c=new Rs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Kd(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];je(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?kE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new Po;p.updateFromIdToken(r);const y=new Rs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new Map;function Mi(i){Pi(i instanceof Function,"Expected a class definition");let e=D_.get(i);return e?(Pi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,D_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LE.type="NONE";const j_=LE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(i,e,n){return`firebase:${i}:${e}:${n}`}class Uo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Od(this.userKey,o.apiKey,c),this.fullPersistenceKey=Od("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qd(this.auth,{idToken:e}).catch(()=>{});return n?Rs._fromGetAccountInfoResponse(this.auth,n,e):null}return Rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Uo(Mi(j_),e,r);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||Mi(j_);const u=Od(r,e.config.apiKey,e.name);let p=null;for(const g of n)try{const x=await g._get(u);if(x){let b;if(typeof x=="string"){const T=await Qd(e,{idToken:x}).catch(()=>{});if(!T)break;b=await Rs._fromGetAccountInfoResponse(e,T,x)}else b=Rs._fromJSON(e,x);g!==c&&(p=b),c=g;break}}catch{}const y=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Uo(c,e,r):(c=y[0],p&&await c._set(u,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(u)}catch{}})),new Uo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FE(e))return"Blackberry";if(HE(e))return"Webos";if(UE(e))return"Safari";if((e.includes("chrome/")||zE(e))&&!e.includes("edge/"))return"Chrome";if(qE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PE(i=_n()){return/firefox\//i.test(i)}function UE(i=_n()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zE(i=_n()){return/crios\//i.test(i)}function BE(i=_n()){return/iemobile/i.test(i)}function qE(i=_n()){return/android/i.test(i)}function FE(i=_n()){return/blackberry/i.test(i)}function HE(i=_n()){return/webos/i.test(i)}function Fp(i=_n()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function r2(i=_n()){var e;return Fp(i)&&!!((e=window.navigator)!=null&&e.standalone)}function a2(){return yA()&&document.documentMode===10}function GE(i=_n()){return Fp(i)||qE(i)||HE(i)||FE(i)||/windows phone/i.test(i)||BE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(i,e=[]){let n;switch(i){case"Browser":n=O_(_n());break;case"Worker":n=`${O_(_n())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((u,p)=>{try{const y=e(c);u(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(i,e={}){return Kr(i,"GET","/v2/passwordPolicy",ka(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=6;class u2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??c2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new o2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qd(this,{idToken:e}),r=await Rs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(fs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,p=r==null?void 0:r._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===p)&&(y!=null&&y.user)&&(r=y.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject(kr(this));const n=e?Tt(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject(kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject(kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l2(this),n=new u2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await i2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(p,this,"internal-error"),p.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{u=!0,y()}}else{const y=e.addObserver(n);return()=>{u=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&UN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function La(i){return Tt(i)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function h2(i){ph=i}function KE(i){return ph.loadJS(i)}function f2(){return ph.recaptchaEnterpriseScript}function m2(){return ph.gapiScript}function p2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class g2{constructor(){this.enterprise=new y2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class y2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const v2="recaptcha-enterprise",$E="NO_RECAPTCHA";class _2{constructor(e){this.type=v2,this.auth=La(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,p)=>{XN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new YN(y);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,u(g.siteKey)}}).catch(y=>{p(y)})})}function o(c,u,p){const y=window.grecaptcha;I_(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(g=>{u(g)}).catch(()=>{u($E)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new g2().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{r(this.auth).then(p=>{if(!n&&I_(window.grecaptcha))o(p,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let y=f2();y.length!==0&&(y+=p),KE(y).then(()=>{o(p,c,u)}).catch(g=>{u(g)})}}).catch(p=>{u(p)})})}}async function V_(i,e,n,r=!1,o=!1){const c=new _2(i);let u;if(o)u=$E;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function k_(i,e,n,r,o){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await V_(i,e,n,n==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await V_(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(i,e){const n=Pp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Ra(c,e??{}))return o;ps(o,"already-initialized")}return n.initialize({options:e})}function E2(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function b2(i,e,n){const r=La(i);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=YE(e),{host:u,port:p}=w2(e),y=p===null?"":`:${p}`,g={url:`${c}//${u}${y}/`},x=Object.freeze({host:u,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(Ra(g,r.config.emulator)&&Ra(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,tl(u)?(wE(`${c}//${u}${y}`),TE("Auth",!0)):T2()}function YE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function w2(i){const e=YE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:L_(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:L_(u)}}}function L_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function T2(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function S2(i,e){return Kr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(i,e){return mh(i,"POST","/v1/accounts:signInWithPassword",ka(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(i,e){return mh(i,"POST","/v1/accounts:signInWithEmailLink",ka(i,e))}async function C2(i,e){return mh(i,"POST","/v1/accounts:signInWithEmailLink",ka(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Hp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Sc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k_(e,n,"signInWithPassword",A2);case"emailLink":return N2(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k_(e,r,"signUpPassword",S2);case"emailLink":return C2(e,{idToken:n,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(i,e){return mh(i,"POST","/v1/accounts:signInWithIdp",ka(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="http://localhost";class ja extends Hp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const u=new ja(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zo(e,n)}buildRequest(){const e={requestUri:I2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D2(i){const e=dc(hc(i)).link,n=e?dc(hc(e)).deep_link_id:null,r=dc(hc(i)).deep_link_id;return(r?dc(hc(r)).link:null)||r||n||e||i}class Gp{constructor(e){const n=dc(hc(e)),r=n.apiKey??null,o=n.oobCode??null,c=R2(n.mode??null);je(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=D2(e);try{return new Gp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.providerId=sl.PROVIDER_ID}static credential(e,n){return Sc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gp.parseLink(n);return je(r,"argument-error"),Sc._fromEmailAndCode(e,r.code,r.tenantId)}}sl.PROVIDER_ID="password";sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Qp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends zc{constructor(){super("facebook.com")}static credential(e){return ja._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ja._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends zc{constructor(){super("github.com")}static credential(e){return ja._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends zc{constructor(){super("twitter.com")}static credential(e,n){return ja._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Rs._fromIdTokenResponse(e,r,o),u=P_(r);return new Go({user:c,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=P_(r);return new Go({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function P_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends qi{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new $d(e,n,r,o)}}function XE(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(i,c,e,r):c})}async function j2(i,e,n=!1){const r=await Tc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Go._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(i,e,n=!1){const{auth:r}=i;if(fs(r.app))return Promise.reject(kr(r));const o="reauthenticate";try{const c=await Tc(i,XE(r,o,e,i),n);je(c.idToken,r,"internal-error");const u=qp(c.idToken);je(u,r,"internal-error");const{sub:p}=u;return je(i.uid===p,r,"user-mismatch"),Go._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(i,e,n=!1){if(fs(i.app))return Promise.reject(kr(i));const r="signIn",o=await XE(i,r,e),c=await Go._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function M2(i,e){return JE(La(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(i){const e=La(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function k2(i,e,n){return fs(i.app)?Promise.reject(kr(i)):M2(Tt(i),sl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&V2(i),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(i,e){return Tt(i).setPersistence(e)}function L2(i,e,n,r){return Tt(i).onIdTokenChanged(e,n,r)}function P2(i,e,n){return Tt(i).beforeAuthStateChanged(e,n)}function U2(i,e,n,r){return Tt(i).onAuthStateChanged(e,n,r)}function z2(i){return Tt(i).signOut()}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=1e3,q2=10;class ZE extends WE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,y)=>{this.notifyListeners(u,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);a2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,q2):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},B2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZE.type="LOCAL";const F2=ZE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb extends WE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eb.type="SESSION";const Xd=eb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(u).map(async g=>g(n.origin,c)),y=await H2(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((p,y)=>{const g=Kp("",20);o.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(b){const T=b;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(x),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function Q2(i){ii().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function K2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $2(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function Y2(){return tb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firebaseLocalStorageDb",X2=1,Jd="firebaseLocalStorage",sb="fbase_key";class Bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(i,e){return i.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function J2(){const i=indexedDB.deleteDatabase(nb);return new Bc(i).toPromise()}function up(){const i=indexedDB.open(nb,X2);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Jd,{keyPath:sb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Jd)?e(r):(r.close(),await J2(),e(await up()))})})}async function z_(i,e,n){const r=yh(i,!0).put({[sb]:e,value:n});return new Bc(r).toPromise()}async function W2(i,e){const n=yh(i,!1).get(e),r=await new Bc(n).toPromise();return r===void 0?null:r.value}function B_(i,e){const n=yh(i,!0).delete(e);return new Bc(n).toPromise()}const Z2=800,eC=3;class ib{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>eC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(Y2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await K2(),!this.activeServiceWorker)return;this.sender=new G2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await z_(e,Yd,"1"),await B_(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>z_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>W2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=yh(o,!1).getAll();return new Bc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ib.type="LOCAL";const tC=ib;new Uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(i,e){return e?Mi(e):(je(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Hp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nC(i){return JE(i.auth,new $p(i),i.bypassAuthState)}function sC(i){const{auth:e,user:n}=i;return je(n,e,"internal-error"),O2(n,new $p(i),i.bypassAuthState)}async function iC(i){const{auth:e,user:n}=i;return je(n,e,"internal-error"),j2(n,new $p(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:u,type:p}=e;if(u){this.reject(u);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nC;case"linkViaPopup":case"linkViaRedirect":return iC;case"reauthViaPopup":case"reauthViaRedirect":return sC;default:ps(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Uc(2e3,1e4);async function aC(i,e,n){if(fs(i.app))return Promise.reject(Ds(i,"operation-not-supported-in-this-environment"));const r=La(i);zN(i,e,Qp);const o=rb(r,n);return new Ca(r,"signInViaPopup",e,o).executeNotNull()}class Ca extends ab{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=Kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rC.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="pendingRedirect",Md=new Map;class lC extends ab{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const r=await cC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cC(i,e){const n=hC(e),r=dC(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function uC(i,e){Md.set(i._key(),e)}function dC(i){return Mi(i._redirectPersistence)}function hC(i){return Od(oC,i.config.apiKey,i.name)}async function fC(i,e,n=!1){if(fs(i.app))return Promise.reject(kr(i));const r=La(i),o=rb(r,e),u=await new lC(r,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=600*1e3;class pC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ob(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ds(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mC&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(e))}saveEventToCache(e){this.cachedEventUids.add(q_(e)),this.lastProcessedEventTime=Date.now()}}function q_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function ob({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ob(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(i,e={}){return Kr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_C=/^https?/;async function xC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await yC(i);for(const n of e)try{if(EC(n))return}catch{}ps(i,"unauthorized-domain")}function EC(i){const e=lp(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!_C.test(n))return!1;if(vC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Uc(3e4,6e4);function F_(){const i=ii().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function wC(i){return new Promise((e,n)=>{var o,c,u;function r(){F_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F_(),n(Ds(i,"network-request-failed"))},timeout:bC.get()})}if((c=(o=ii().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=ii().gapi)!=null&&u.load)r();else{const p=p2("iframefcb");return ii()[p]=()=>{gapi.load?r():n(Ds(i,"network-request-failed"))},KE(`${m2()}?onload=${p}`).catch(y=>n(y))}}).catch(e=>{throw Vd=null,e})}let Vd=null;function TC(i){return Vd=Vd||wC(i),Vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Uc(5e3,15e3),AC="__/auth/iframe",NC="emulator/auth/iframe",CC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RC(i){const e=i.config;je(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Bp(e,NC):`https://${i.config.authDomain}/${AC}`,r={apiKey:e.apiKey,appName:i.name,v:nl},o=IC.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Pc(r).slice(1)}`}async function DC(i){const e=await TC(i),n=ii().gapi;return je(n,i,"internal-error"),e.open({where:document.body,url:RC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=Ds(i,"network-request-failed"),p=ii().setTimeout(()=>{c(u)},SC.get());function y(){ii().clearTimeout(p),o(r)}r.ping(y).then(y,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OC=500,MC=600,VC="_blank",kC="http://localhost";class H_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LC(i,e,n,r=OC,o=MC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...jC,width:r.toString(),height:o.toString(),top:c,left:u},g=_n().toLowerCase();n&&(p=zE(g)?VC:n),PE(g)&&(e=e||kC,y.scrollbars="yes");const x=Object.entries(y).reduce((T,[O,L])=>`${T}${O}=${L},`,"");if(r2(g)&&p!=="_self")return PC(e||"",p),new H_(null);const b=window.open(e||"",p,x);je(b,i,"popup-blocked");try{b.focus()}catch{}return new H_(b)}function PC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="__/auth/handler",zC="emulator/auth/handler",BC=encodeURIComponent("fac");async function G_(i,e,n,r,o,c){je(i.config.authDomain,i,"auth-domain-config-required"),je(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:nl,eventId:o};if(e instanceof Qp){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",TA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,b]of Object.entries({}))u[x]=b}if(e instanceof zc){const x=e.getScopes().filter(b=>b!=="");x.length>0&&(u.scopes=x.join(","))}i.tenantId&&(u.tid=i.tenantId);const p=u;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const y=await i._getAppCheckToken(),g=y?`#${BC}=${encodeURIComponent(y)}`:"";return`${qC(i)}?${Pc(p).slice(1)}${g}`}function qC({config:i}){return i.emulator?Bp(i,zC):`https://${i.authDomain}/${UC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class FC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xd,this._completeRedirectFn=fC,this._overrideRedirectResult=uC}async _openPopup(e,n,r,o){var u;Pi((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await G_(e,n,r,lp(),o);return LC(e,c,Kp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await G_(e,n,r,lp(),o);return Q2(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Pi(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DC(e),r=new pC(e);return n.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($m,{type:$m},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[$m];c!==void 0&&n(!!c),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GE()||UE()||Fp()}}const HC=FC;var Q_="@firebase/auth",K_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KC(i){Ho(new Da("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;je(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:u,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QE(i)},g=new d2(r,o,c,y);return E2(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new Da("auth-internal",e=>{const n=La(e.getProvider("auth").getImmediate());return(r=>new GC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(Q_,K_,QC(i)),Vr(Q_,K_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=300,YC=bE("authIdTokenMaxAge")||$C;let $_=null;const XC=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YC)return;const o=n==null?void 0:n.token;$_!==o&&($_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function JC(i=CE()){const e=Pp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=x2(i,{popupRedirectResolver:HC,persistence:[tC,F2,Xd]}),r=bE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=XC(c.toString());P2(n,u,()=>u(n.currentUser)),L2(n,p=>u(p))}}const o=xE("auth");return o&&b2(n,`http://${o}`),n}function WC(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}h2({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ds("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",WC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KC("Browser");var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,lb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,N){function I(){}I.prototype=N.prototype,C.F=N.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(U,M,D){for(var S=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)S[Te-2]=arguments[Te];return N.prototype[M].apply(U,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,N,I){I||(I=0);const U=Array(16);if(typeof N=="string")for(var M=0;M<16;++M)U[M]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(M=0;M<16;++M)U[M]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=C.g[0],I=C.g[1],M=C.g[2];let D=C.g[3],S;S=N+(D^I&(M^D))+U[0]+3614090360&4294967295,N=I+(S<<7&4294967295|S>>>25),S=D+(M^N&(I^M))+U[1]+3905402710&4294967295,D=N+(S<<12&4294967295|S>>>20),S=M+(I^D&(N^I))+U[2]+606105819&4294967295,M=D+(S<<17&4294967295|S>>>15),S=I+(N^M&(D^N))+U[3]+3250441966&4294967295,I=M+(S<<22&4294967295|S>>>10),S=N+(D^I&(M^D))+U[4]+4118548399&4294967295,N=I+(S<<7&4294967295|S>>>25),S=D+(M^N&(I^M))+U[5]+1200080426&4294967295,D=N+(S<<12&4294967295|S>>>20),S=M+(I^D&(N^I))+U[6]+2821735955&4294967295,M=D+(S<<17&4294967295|S>>>15),S=I+(N^M&(D^N))+U[7]+4249261313&4294967295,I=M+(S<<22&4294967295|S>>>10),S=N+(D^I&(M^D))+U[8]+1770035416&4294967295,N=I+(S<<7&4294967295|S>>>25),S=D+(M^N&(I^M))+U[9]+2336552879&4294967295,D=N+(S<<12&4294967295|S>>>20),S=M+(I^D&(N^I))+U[10]+4294925233&4294967295,M=D+(S<<17&4294967295|S>>>15),S=I+(N^M&(D^N))+U[11]+2304563134&4294967295,I=M+(S<<22&4294967295|S>>>10),S=N+(D^I&(M^D))+U[12]+1804603682&4294967295,N=I+(S<<7&4294967295|S>>>25),S=D+(M^N&(I^M))+U[13]+4254626195&4294967295,D=N+(S<<12&4294967295|S>>>20),S=M+(I^D&(N^I))+U[14]+2792965006&4294967295,M=D+(S<<17&4294967295|S>>>15),S=I+(N^M&(D^N))+U[15]+1236535329&4294967295,I=M+(S<<22&4294967295|S>>>10),S=N+(M^D&(I^M))+U[1]+4129170786&4294967295,N=I+(S<<5&4294967295|S>>>27),S=D+(I^M&(N^I))+U[6]+3225465664&4294967295,D=N+(S<<9&4294967295|S>>>23),S=M+(N^I&(D^N))+U[11]+643717713&4294967295,M=D+(S<<14&4294967295|S>>>18),S=I+(D^N&(M^D))+U[0]+3921069994&4294967295,I=M+(S<<20&4294967295|S>>>12),S=N+(M^D&(I^M))+U[5]+3593408605&4294967295,N=I+(S<<5&4294967295|S>>>27),S=D+(I^M&(N^I))+U[10]+38016083&4294967295,D=N+(S<<9&4294967295|S>>>23),S=M+(N^I&(D^N))+U[15]+3634488961&4294967295,M=D+(S<<14&4294967295|S>>>18),S=I+(D^N&(M^D))+U[4]+3889429448&4294967295,I=M+(S<<20&4294967295|S>>>12),S=N+(M^D&(I^M))+U[9]+568446438&4294967295,N=I+(S<<5&4294967295|S>>>27),S=D+(I^M&(N^I))+U[14]+3275163606&4294967295,D=N+(S<<9&4294967295|S>>>23),S=M+(N^I&(D^N))+U[3]+4107603335&4294967295,M=D+(S<<14&4294967295|S>>>18),S=I+(D^N&(M^D))+U[8]+1163531501&4294967295,I=M+(S<<20&4294967295|S>>>12),S=N+(M^D&(I^M))+U[13]+2850285829&4294967295,N=I+(S<<5&4294967295|S>>>27),S=D+(I^M&(N^I))+U[2]+4243563512&4294967295,D=N+(S<<9&4294967295|S>>>23),S=M+(N^I&(D^N))+U[7]+1735328473&4294967295,M=D+(S<<14&4294967295|S>>>18),S=I+(D^N&(M^D))+U[12]+2368359562&4294967295,I=M+(S<<20&4294967295|S>>>12),S=N+(I^M^D)+U[5]+4294588738&4294967295,N=I+(S<<4&4294967295|S>>>28),S=D+(N^I^M)+U[8]+2272392833&4294967295,D=N+(S<<11&4294967295|S>>>21),S=M+(D^N^I)+U[11]+1839030562&4294967295,M=D+(S<<16&4294967295|S>>>16),S=I+(M^D^N)+U[14]+4259657740&4294967295,I=M+(S<<23&4294967295|S>>>9),S=N+(I^M^D)+U[1]+2763975236&4294967295,N=I+(S<<4&4294967295|S>>>28),S=D+(N^I^M)+U[4]+1272893353&4294967295,D=N+(S<<11&4294967295|S>>>21),S=M+(D^N^I)+U[7]+4139469664&4294967295,M=D+(S<<16&4294967295|S>>>16),S=I+(M^D^N)+U[10]+3200236656&4294967295,I=M+(S<<23&4294967295|S>>>9),S=N+(I^M^D)+U[13]+681279174&4294967295,N=I+(S<<4&4294967295|S>>>28),S=D+(N^I^M)+U[0]+3936430074&4294967295,D=N+(S<<11&4294967295|S>>>21),S=M+(D^N^I)+U[3]+3572445317&4294967295,M=D+(S<<16&4294967295|S>>>16),S=I+(M^D^N)+U[6]+76029189&4294967295,I=M+(S<<23&4294967295|S>>>9),S=N+(I^M^D)+U[9]+3654602809&4294967295,N=I+(S<<4&4294967295|S>>>28),S=D+(N^I^M)+U[12]+3873151461&4294967295,D=N+(S<<11&4294967295|S>>>21),S=M+(D^N^I)+U[15]+530742520&4294967295,M=D+(S<<16&4294967295|S>>>16),S=I+(M^D^N)+U[2]+3299628645&4294967295,I=M+(S<<23&4294967295|S>>>9),S=N+(M^(I|~D))+U[0]+4096336452&4294967295,N=I+(S<<6&4294967295|S>>>26),S=D+(I^(N|~M))+U[7]+1126891415&4294967295,D=N+(S<<10&4294967295|S>>>22),S=M+(N^(D|~I))+U[14]+2878612391&4294967295,M=D+(S<<15&4294967295|S>>>17),S=I+(D^(M|~N))+U[5]+4237533241&4294967295,I=M+(S<<21&4294967295|S>>>11),S=N+(M^(I|~D))+U[12]+1700485571&4294967295,N=I+(S<<6&4294967295|S>>>26),S=D+(I^(N|~M))+U[3]+2399980690&4294967295,D=N+(S<<10&4294967295|S>>>22),S=M+(N^(D|~I))+U[10]+4293915773&4294967295,M=D+(S<<15&4294967295|S>>>17),S=I+(D^(M|~N))+U[1]+2240044497&4294967295,I=M+(S<<21&4294967295|S>>>11),S=N+(M^(I|~D))+U[8]+1873313359&4294967295,N=I+(S<<6&4294967295|S>>>26),S=D+(I^(N|~M))+U[15]+4264355552&4294967295,D=N+(S<<10&4294967295|S>>>22),S=M+(N^(D|~I))+U[6]+2734768916&4294967295,M=D+(S<<15&4294967295|S>>>17),S=I+(D^(M|~N))+U[13]+1309151649&4294967295,I=M+(S<<21&4294967295|S>>>11),S=N+(M^(I|~D))+U[4]+4149444226&4294967295,N=I+(S<<6&4294967295|S>>>26),S=D+(I^(N|~M))+U[11]+3174756917&4294967295,D=N+(S<<10&4294967295|S>>>22),S=M+(N^(D|~I))+U[2]+718787259&4294967295,M=D+(S<<15&4294967295|S>>>17),S=I+(D^(M|~N))+U[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(M+(S<<21&4294967295|S>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.v=function(C,N){N===void 0&&(N=C.length);const I=N-this.blockSize,U=this.C;let M=this.h,D=0;for(;D<N;){if(M==0)for(;D<=I;)o(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<N;)if(U[M++]=C.charCodeAt(D++),M==this.blockSize){o(this,U),M=0;break}}else for(;D<N;)if(U[M++]=C[D++],M==this.blockSize){o(this,U),M=0;break}}this.h=M,this.o+=N},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;N=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=N&255,N/=256;for(this.v(C),C=Array(16),N=0,I=0;I<4;++I)for(let U=0;U<32;U+=8)C[N++]=this.g[I]>>>U&255;return C};function c(C,N){var I=p;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=N(C)}function u(C,N){this.h=N;const I=[];let U=!0;for(let M=C.length-1;M>=0;M--){const D=C[M]|0;U&&D==N||(I[M]=D,U=!1)}this.g=I}var p={};function y(C){return-128<=C&&C<128?c(C,function(N){return new u([N|0],N<0?-1:0)}):new u([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return b;if(C<0)return P(g(-C));const N=[];let I=1;for(let U=0;C>=I;U++)N[U]=C/I|0,I*=4294967296;return new u(N,0)}function x(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return P(x(C.substring(1),N));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(N,8));let U=b;for(let D=0;D<C.length;D+=8){var M=Math.min(8,C.length-D);const S=parseInt(C.substring(D,D+M),N);M<8?(M=g(Math.pow(N,M)),U=U.j(M).add(g(S))):(U=U.j(I),U=U.add(g(S)))}return U}var b=y(0),T=y(1),O=y(16777216);i=u.prototype,i.m=function(){if(k(this))return-P(this).m();let C=0,N=1;for(let I=0;I<this.g.length;I++){const U=this.i(I);C+=(U>=0?U:4294967296+U)*N,N*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(k(this))return"-"+P(this).toString(C);const N=g(Math.pow(C,6));var I=this;let U="";for(;;){const M=de(I,N).g;I=G(I,M.j(N));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=M,L(I))return D+U;for(;D.length<6;)D="0"+D;U=D+U}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(let N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function k(C){return C.h==-1}i.l=function(C){return C=G(this,C),k(C)?-1:L(C)?0:1};function P(C){const N=C.g.length,I=[];for(let U=0;U<N;U++)I[U]=~C.g[U];return new u(I,~C.h).add(T)}i.abs=function(){return k(this)?P(this):this},i.add=function(C){const N=Math.max(this.g.length,C.g.length),I=[];let U=0;for(let M=0;M<=N;M++){let D=U+(this.i(M)&65535)+(C.i(M)&65535),S=(D>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);U=S>>>16,D&=65535,S&=65535,I[M]=S<<16|D}return new u(I,I[I.length-1]&-2147483648?-1:0)};function G(C,N){return C.add(P(N))}i.j=function(C){if(L(this)||L(C))return b;if(k(this))return k(C)?P(this).j(P(C)):P(P(this).j(C));if(k(C))return P(this.j(P(C)));if(this.l(O)<0&&C.l(O)<0)return g(this.m()*C.m());const N=this.g.length+C.g.length,I=[];for(var U=0;U<2*N;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<C.g.length;M++){const D=this.i(U)>>>16,S=this.i(U)&65535,Te=C.i(M)>>>16,Ee=C.i(M)&65535;I[2*U+2*M]+=S*Ee,J(I,2*U+2*M),I[2*U+2*M+1]+=D*Ee,J(I,2*U+2*M+1),I[2*U+2*M+1]+=S*Te,J(I,2*U+2*M+1),I[2*U+2*M+2]+=D*Te,J(I,2*U+2*M+2)}for(C=0;C<N;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=N;C<2*N;C++)I[C]=0;return new u(I,0)};function J(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function Y(C,N){this.g=C,this.h=N}function de(C,N){if(L(N))throw Error("division by zero");if(L(C))return new Y(b,b);if(k(C))return N=de(P(C),N),new Y(P(N.g),P(N.h));if(k(N))return N=de(C,P(N)),new Y(P(N.g),N.h);if(C.g.length>30){if(k(C)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var I=T,U=N;U.l(C)<=0;)I=ye(I),U=ye(U);var M=le(I,1),D=le(U,1);for(U=le(U,2),I=le(I,2);!L(U);){var S=D.add(U);S.l(C)<=0&&(M=M.add(I),D=S),U=le(U,1),I=le(I,1)}return N=G(C,M.j(N)),new Y(M,N)}for(M=b;C.l(N)>=0;){for(I=Math.max(1,Math.floor(C.m()/N.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),D=g(I),S=D.j(N);k(S)||S.l(C)>0;)I-=U,D=g(I),S=D.j(N);L(D)&&(D=T),M=M.add(D),C=G(C,S)}return new Y(M,C)}i.B=function(C){return de(this,C).h},i.and=function(C){const N=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<N;U++)I[U]=this.i(U)&C.i(U);return new u(I,this.h&C.h)},i.or=function(C){const N=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<N;U++)I[U]=this.i(U)|C.i(U);return new u(I,this.h|C.h)},i.xor=function(C){const N=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<N;U++)I[U]=this.i(U)^C.i(U);return new u(I,this.h^C.h)};function ye(C){const N=C.g.length+1,I=[];for(let U=0;U<N;U++)I[U]=C.i(U)<<1|C.i(U-1)>>>31;return new u(I,C.h)}function le(C,N){const I=N>>5;N%=32;const U=C.g.length-I,M=[];for(let D=0;D<U;D++)M[D]=N>0?C.i(D+I)>>>N|C.i(D+I+1)<<32-N:C.i(D+I);return new u(M,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lb=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=x,Lr=u}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cb,fc,ub,kd,dp,db,hb,fb;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(d,v){if(v)e:{var E=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var q=d[A];if(!(q in E))break e;E=E[q]}d=d[d.length-1],A=E[d],v=v(A),v!=A&&v!=null&&e(E,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var E=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&E.push([A,v[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function y(d,v,E){return d.call.apply(d.bind,arguments)}function g(d,v,E){return g=y,g.apply(null,arguments)}function x(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function b(d,v){function E(){}E.prototype=v.prototype,d.Z=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(A,q,$){for(var ue=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ue[ke-2]=arguments[ke];return v.prototype[q].apply(A,ue)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const v=d.length;if(v>0){const E=Array(v);for(let A=0;A<v;A++)E[A]=d[A];return E}return[]}function L(d,v){for(let A=1;A<arguments.length;A++){const q=arguments[A];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=d.length||0;const $=q.length||0;d.length=E+$;for(let ue=0;ue<$;ue++)d[E+ue]=q[ue]}else d.push(q)}}class k{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(d){u.setTimeout(()=>{throw d},0)}function G(){var d=C;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class J{constructor(){this.h=this.g=null}add(v,E){const A=Y.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new k(()=>new de,d=>d.reset());class de{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,le=!1,C=new J,N=()=>{const d=Promise.resolve(void 0);ye=()=>{d.then(I)}};function I(){for(var d;d=G();){try{d.h.call(d.g)}catch(E){P(E)}var v=Y;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return d})();function S(d){return/^[\s\xa0]*$/.test(d)}function Te(d,v){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}b(Te,M),Te.prototype.init=function(d,v){const E=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),K=0;function ae(d,v,E,A,q){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=q,this.key=++K,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function be(d,v,E){for(const A in d)v.call(E,d[A],A,d)}function Ne(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function V(d){const v={};for(const E in d)v[E]=d[E];return v}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(d,v){let E,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(E in A)d[E]=A[E];for(let $=0;$<ee.length;$++)E=ee[$],Object.prototype.hasOwnProperty.call(A,E)&&(d[E]=A[E])}}function he(d){this.src=d,this.g={},this.h=0}he.prototype.add=function(d,v,E,A,q){const $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);const ue=Re(d,v,A,q);return ue>-1?(v=d[ue],E||(v.fa=!1)):(v=new ae(v,this.src,$,!!A,q),v.fa=E,d.push(v)),v};function Ie(d,v){const E=v.type;if(E in d.g){var A=d.g[E],q=Array.prototype.indexOf.call(A,v,void 0),$;($=q>=0)&&Array.prototype.splice.call(A,q,1),$&&(xe(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Re(d,v,E,A){for(let q=0;q<d.length;++q){const $=d[q];if(!$.da&&$.listener==v&&$.capture==!!E&&$.ha==A)return q}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),bt={};function ot(d,v,E,A,q){if(Array.isArray(v)){for(let $=0;$<v.length;$++)ot(d,v[$],E,A,q);return null}return E=Xr(E),d&&d[Ee]?d.J(v,E,p(A)?!!A.capture:!1,q):Wn(d,v,E,!1,A,q)}function Wn(d,v,E,A,q,$){if(!v)throw Error("Invalid event type");const ue=p(q)?!!q.capture:!!q;let ke=kn(d);if(ke||(d[Pe]=ke=new he(d)),E=ke.add(v,E,A,ue,$),E.proxy)return E;if(A=Vn(),E.proxy=A,A.src=d,A.listener=E,d.addEventListener)D||(q=ue),q===void 0&&(q=!1),d.addEventListener(v.toString(),A,q);else if(d.attachEvent)d.attachEvent(Xe(v.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Vn(){function d(E){return v.call(d.src,d.listener,E)}const v=xn;return d}function gs(d,v,E,A,q){if(Array.isArray(v))for(var $=0;$<v.length;$++)gs(d,v[$],E,A,q);else A=p(A)?!!A.capture:!!A,E=Xr(E),d&&d[Ee]?(d=d.i,$=String(v).toString(),$ in d.g&&(v=d.g[$],E=Re(v,E,A,q),E>-1&&(xe(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete d.g[$],d.h--)))):d&&(d=kn(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Re(v,E,A,q)),(E=d>-1?v[d]:null)&&re(E))}function re(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Ee])Ie(v.i,d);else{var E=d.type,A=d.proxy;v.removeEventListener?v.removeEventListener(E,A,d.capture):v.detachEvent?v.detachEvent(Xe(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=kn(v))?(Ie(E,d),E.h==0&&(E.src=null,v[Pe]=null)):xe(d)}}}function Xe(d){return d in bt?bt[d]:bt[d]="on"+d}function xn(d,v){if(d.da)d=!0;else{v=new Te(v,this);const E=d.listener,A=d.ha||d.src;d.fa&&re(d),d=E.call(A,v)}return d}function kn(d){return d=d[Pe],d instanceof he?d:null}var ui="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xr(d){return typeof d=="function"?d:(d[ui]||(d[ui]=function(v){return d.handleEvent(v)}),d[ui])}function At(){U.call(this),this.i=new he(this),this.M=this,this.G=null}b(At,U),At.prototype[Ee]=!0,At.prototype.removeEventListener=function(d,v,E,A){gs(this,d,v,E,A)};function Dt(d,v){var E,A=d.G;if(A)for(E=[];A;A=A.G)E.push(A);if(d=d.M,A=v.type||v,typeof v=="string")v=new M(v,d);else if(v instanceof M)v.target=v.target||d;else{var q=v;v=new M(A,d),oe(v,q)}q=!0;let $,ue;if(E)for(ue=E.length-1;ue>=0;ue--)$=v.g=E[ue],q=Vs($,A,!0,v)&&q;if($=v.g=d,q=Vs($,A,!0,v)&&q,q=Vs($,A,!1,v)&&q,E)for(ue=0;ue<E.length;ue++)$=v.g=E[ue],q=Vs($,A,!1,v)&&q}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const E=d.g[v];for(let A=0;A<E.length;A++)xe(E[A]);delete d.g[v],d.h--}}this.G=null},At.prototype.J=function(d,v,E,A){return this.i.add(String(d),v,!1,E,A)},At.prototype.K=function(d,v,E,A){return this.i.add(String(d),v,!0,E,A)};function Vs(d,v,E,A){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let q=!0;for(let $=0;$<v.length;++$){const ue=v[$];if(ue&&!ue.da&&ue.capture==E){const ke=ue.listener,jt=ue.ha||ue.src;ue.fa&&Ie(d.i,ue),q=ke.call(jt,A)!==!1&&q}}return q&&!A.defaultPrevented}function ll(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function Fa(d){d.g=ll(()=>{d.g=null,d.i&&(d.i=!1,Fa(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class rn extends U{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Fa(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(d){U.call(this),this.h=d,this.g={}}b(di,U);var Jr=[];function Qi(d){be(d.g,function(v,E){this.g.hasOwnProperty(E)&&re(v)},d),d.g={}}di.prototype.N=function(){di.Z.N.call(this),Qi(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=u.JSON.stringify,Ha=u.JSON.parse,ne=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function ve(){}function Ze(){}var ft={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wt(){M.call(this,"d")}b(wt,M);function En(){M.call(this,"c")}b(En,M);var vt={},Wr=null;function vs(){return Wr=Wr||new At}vt.Ia="serverreachability";function An(d){M.call(this,vt.Ia,d)}b(An,M);function ks(d){const v=vs();Dt(v,new An(v))}vt.STAT_EVENT="statevent";function Zr(d,v){M.call(this,vt.STAT_EVENT,d),this.stat=v}b(Zr,M);function kt(d){const v=vs();Dt(v,new Zr(v,d))}vt.Ja="timingevent";function Ls(d,v){M.call(this,vt.Ja,d),this.size=v}b(Ls,M);function Ps(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function _s(){this.g=!0}_s.prototype.ua=function(){this.g=!1};function Lh(d,v,E,A,q,$){d.info(function(){if(d.g)if($){var ue="",ke=$.split("&");for(let et=0;et<ke.length;et++){var jt=ke[et].split("=");if(jt.length>1){const _t=jt[0];jt=jt[1];const ns=_t.split("_");ue=ns.length>=2&&ns[1]=="type"?ue+(_t+"="+jt+"&"):ue+(_t+"=redacted&")}}}else ue=null;else ue=$;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+v+`
`+E+`
`+ue})}function Wc(d,v,E,A,q,$,ue){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+v+`
`+E+`
`+$+" "+ue})}function Us(d,v,E,A){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ph(d,E)+(A?" "+A:"")})}function ea(d,v){d.info(function(){return"TIMEOUT: "+v})}_s.prototype.info=function(){};function Ph(d,v){if(!d.g)return v;if(!v)return null;try{const $=JSON.parse(v);if($){for(d=0;d<$.length;d++)if(Array.isArray($[d])){var E=$[d];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ue=1;ue<A.length;ue++)A[ue]=""}}}}return ys($)}catch{return v}}var ta={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ul;function na(){}b(na,ve),na.prototype.g=function(){return new XMLHttpRequest},ul=new na;function hi(d){return encodeURIComponent(String(d))}function Zc(d){var v=1;d=d.split(":");const E=[];for(;v>0&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function xs(d,v,E,A){this.j=d,this.i=v,this.l=E,this.S=A||1,this.V=new di(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}var Lt={},Wt={};function zs(d,v,E){d.M=1,d.A=sa(Ut(v)),d.u=E,d.R=!0,Ga(d,null)}function Ga(d,v){d.F=Date.now(),Bs(d),d.B=Ut(d.A);var E=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),Ya(E.i,"t",A),d.C=0,E=d.j.L,d.h=new Es,d.g=mu(d.j,E?v:null,!d.u),d.P>0&&(d.O=new rn(g(d.Y,d,d.g),d.P)),v=d.V,E=d.g,A=d.ba;var q="readystatechange";Array.isArray(q)||(q&&(Jr[0]=q.toString()),q=Jr);for(let $=0;$<q.length;$++){const ue=ot(E,q[$],A||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=d.J?V(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),ks(),Lh(d.i,d.v,d.B,d.l,d.S,d.u)}xs.prototype.ba=function(d){d=d.target;const v=this.O;v&&Ts(d)==3?v.j():this.Y(d)},xs.prototype.Y=function(d){try{if(d==this.g)e:{const ke=Ts(this.g),jt=this.g.ya(),et=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||ke!=4||jt==7||(jt==8||et<=0?ks(3):ks(2)),qs(this);var v=this.g.ca();this.X=v;var E=Uh(this);if(this.o=v==200,Wc(this.i,this.v,this.B,this.l,this.S,ke,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(A)){var $=A;break t}}$=null}if(d=$)Us(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,d);else{this.o=!1,this.m=3,kt(12),Ln(this),Zn(this);break e}}if(this.R){d=!0;let _t;for(;!this.K&&this.C<E.length;)if(_t=tu(this,E),_t==Wt){ke==4&&(this.m=4,kt(14),d=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Lt){this.m=4,kt(15),Us(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else Us(this.i,this.l,_t,null),Fs(this,_t);if(eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||E.length!=0||this.h.h||(this.m=1,kt(16),d=!1),this.o=this.o&&d,!d)Us(this.i,this.l,E,"[Invalid Chunked Response]"),Ln(this),Zn(this);else if(E.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Sl(ue),ue.P=!0,kt(11))}}else Us(this.i,this.l,E,null),Fs(this,E);ke==4&&Ln(this),this.o&&!this.K&&(ke==4?uu(this.j,this):(this.o=!1,Bs(this)))}else mi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Ln(this),Zn(this)}}}catch{}finally{}};function Uh(d){if(!eu(d))return d.g.la();const v=an(d.g);if(v==="")return"";let E="";const A=v.length,q=Ts(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ln(d),Zn(d),"";d.h.i=new u.TextDecoder}for(let $=0;$<A;$++)d.h.h=!0,E+=d.h.i.decode(v[$],{stream:!(q&&$==A-1)});return v.length=0,d.h.g+=E,d.C=0,d.h.g}function eu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function tu(d,v){var E=d.C,A=v.indexOf(`
`,E);return A==-1?Wt:(E=Number(v.substring(E,A)),isNaN(E)?Lt:(A+=1,A+E>v.length?Wt:(v=v.slice(A,A+E),d.C=A+E,v)))}xs.prototype.cancel=function(){this.K=!0,Ln(this)};function Bs(d){d.T=Date.now()+d.H,Qa(d,d.H)}function Qa(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ps(g(d.aa,d),v)}function qs(d){d.D&&(u.clearTimeout(d.D),d.D=null)}xs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ea(this.i,this.B),this.M!=2&&(ks(),kt(17)),Ln(this),this.m=2,Zn(this)):Qa(this,this.T-d)};function Zn(d){d.j.I==0||d.K||uu(d.j,d)}function Ln(d){qs(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,Qi(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function Fs(d,v){try{var E=d.j;if(E.I!=0&&(E.g==d||Gs(E.h,d))){if(!d.L&&Gs(E.h,d)&&E.I==3){try{var A=E.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)eo(E),er(E);else break e;ua(E),kt(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ps(g(E.Va,E),6e3));Hs(E.h)<=1&&E.ta&&(E.ta=void 0)}else Js(E,11)}else if((d.L||E.g==d)&&eo(E),!S(v))for(q=E.Ba.g.parse(v),v=0;v<q.length;v++){let et=q[v];const _t=et[0];if(!(_t<=E.K))if(E.K=_t,et=et[1],E.I==2)if(et[0]=="c"){E.M=et[1],E.ba=et[2];const ns=et[3];ns!=null&&(E.ka=ns,E.j.info("VER="+E.ka));const Ws=et[4];Ws!=null&&(E.za=Ws,E.j.info("SVER="+E.za));const Ss=et[5];Ss!=null&&typeof Ss=="number"&&Ss>0&&(A=1.5*Ss,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const As=d.g;if(As){const da=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var $=A.h;$.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(fl($,$.h),$.h=null))}if(A.G){const to=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(A.wa=to,st(A.J,A.G,to))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var ue=d;if(A.na=fu(A,A.L?A.ba:null,A.W),ue.L){ml(A.h,ue);var ke=ue,jt=A.O;jt&&(ke.H=jt),ke.D&&(qs(ke),Bs(ke)),A.g=ue}else lu(A);E.i.length>0&&Xs(E)}else et[0]!="stop"&&et[0]!="close"||Js(E,7);else E.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Js(E,7):wl(E):et[0]!="noop"&&E.l&&E.l.qa(et),E.A=0)}}ks(4)}catch{}}var Pt=class{constructor(d,v){this.g=d,this.map=v}};function dl(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hs(d){return d.h?1:d.g?d.g.size:0}function Gs(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function fl(d,v){d.g?d.g.add(v):d.h=v}function ml(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}dl.prototype.cancel=function(){if(this.i=pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function pl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.G);return v}return O(d.i)}var nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ka(d,v){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const A=d[E].indexOf("=");let q,$=null;A>=0?(q=d[E].substring(0,A),$=d[E].substring(A+1)):q=d[E],v(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Pn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof Pn?(this.l=d.l,Zt(this,d.j),this.o=d.o,this.g=d.g,Ki(this,d.u),this.h=d.h,gl(this,au(d.i)),this.m=d.m):d&&(v=String(d).match(nu))?(this.l=!1,Zt(this,v[1]||"",!0),this.o=Qs(v[2]||""),this.g=Qs(v[3]||"",!0),Ki(this,v[4]),this.h=Qs(v[5]||"",!0),gl(this,v[6]||"",!0),this.m=Qs(v[7]||"")):(this.l=!1,this.i=new Yi(null,this.l))}Pn.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(ia(v,$a,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ia(v,$a,!0),"@"),d.push(hi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ia(E,E.charAt(0)=="/"?yl:su,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ia(E,iu)),d.join("")},Pn.prototype.resolve=function(d){const v=Ut(this);let E=!!d.j;E?Zt(v,d.j):E=!!d.o,E?v.o=d.o:E=!!d.g,E?v.g=d.g:E=d.u!=null;var A=d.h;if(E)Ki(v,d.u);else if(E=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=v.h.lastIndexOf("/");q!=-1&&(A=v.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let ue=0;ue<q.length;){const ke=q[ue++];ke=="."?A&&ue==q.length&&$.push(""):ke==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&ue==q.length&&$.push("")):($.push(ke),A=!0)}A=$.join("/")}else A=q}return E?v.h=A:E=d.i.toString()!=="",E?gl(v,au(d.i)):E=!!d.m,E&&(v.m=d.m),v};function Ut(d){return new Pn(d)}function Zt(d,v,E){d.j=E?Qs(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Ki(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function gl(d,v,E){v instanceof Yi?(d.i=v,Xa(d.i,d.l)):(E||(v=ia(v,$i)),d.i=new Yi(v,d.l))}function st(d,v,E){d.i.set(v,E)}function sa(d){return st(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Qs(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ia(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,Nn),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Nn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $a=/[#\/\?@]/g,su=/[#\?:]/g,yl=/[#\?]/g,$i=/[#\?@]/g,iu=/#/g;function Yi(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Cn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ka(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}i=Yi.prototype,i.add=function(d,v){Cn(this),this.i=null,d=Xi(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function ru(d,v){Cn(d),v=Xi(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function vl(d,v){return Cn(d),v=Xi(d,v),d.g.has(v)}i.forEach=function(d,v){Cn(this),this.g.forEach(function(E,A){E.forEach(function(q){d.call(v,q,A,this)},this)},this)};function _l(d,v){Cn(d);let E=[];if(typeof v=="string")vl(d,v)&&(E=E.concat(d.g.get(Xi(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)E=E.concat(d[v]);return E}i.set=function(d,v){return Cn(this),this.i=null,d=Xi(this,d),vl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},i.get=function(d,v){return d?(d=_l(this,d),d.length>0?String(d[0]):v):v};function Ya(d,v,E){ru(d,v),E.length>0&&(d.i=null,d.g.set(Xi(d,v),O(E)),d.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var E=v[A];const q=hi(E);E=_l(this,E);for(let $=0;$<E.length;$++){let ue=q;E[$]!==""&&(ue+="="+hi(E[$])),d.push(ue)}}return this.i=d.join("&")};function au(d){const v=new Yi;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Xi(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Xa(d,v){v&&!d.j&&(Cn(d),d.i=null,d.g.forEach(function(E,A){const q=A.toLowerCase();A!=q&&(ru(this,A),Ya(this,q,E))},d)),d.j=v}function bs(d,v){const E=new _s;if(u.Image){const A=new Image;A.onload=x(es,E,"TestLoadImage: loaded",!0,v,A),A.onerror=x(es,E,"TestLoadImage: error",!1,v,A),A.onabort=x(es,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=x(es,E,"TestLoadImage: timeout",!1,v,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else v(!1)}function xl(d,v){const E=new _s,A=new AbortController,q=setTimeout(()=>{A.abort(),es(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:A.signal}).then($=>{clearTimeout(q),$.ok?es(E,"TestPingServer: ok",!0,v):es(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),es(E,"TestPingServer: error",!1,v)})}function es(d,v,E,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(E)}catch{}}function Ji(){this.g=new ne}function Ks(d){this.i=d.Sb||null,this.h=d.ab||!1}b(Ks,ve),Ks.prototype.g=function(){return new ra(this.i,this.h)};function ra(d,v){At.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ra,At),i=ra.prototype,i.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,ws(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Wi(this):ws(this),this.readyState==3&&Ja(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Wi(this))},i.Na=function(d){this.g&&(this.response=d,Wi(this))},i.ga=function(){this.g&&Wi(this)};function Wi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ws(d)}i.setRequestHeader=function(d,v){this.A.append(d,v)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function ws(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ts(d){let v="";return be(d,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function aa(d,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=ts(E),typeof d=="string"?E!=null&&hi(E):st(d,v,E))}function lt(d){At.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(lt,At);var $s=/^https?$/i,El=["POST","PUT"];i=lt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ul.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch($){oa(this,$);return}if(d=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)E.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())E.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),q=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(El,v,void 0)>=0)||A||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ue]of E)this.g.setRequestHeader($,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch($){oa(this,$)}};function oa(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,bl(d),fi(d)}function bl(d){d.A||(d.A=!0,Dt(d,"complete"),Dt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Dt(this,"complete"),Dt(this,"abort"),fi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),lt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?la(this):this.Xa())},i.Xa=function(){la(this)};function la(d){if(d.h&&typeof c<"u"){if(d.v&&Ts(d)==4)setTimeout(d.Ca.bind(d),0);else if(Dt(d,"readystatechange"),Ts(d)==4){d.h=!1;try{const $=d.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=$===0){let ue=String(d.D).match(nu)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),A=!$s.test(ue?ue.toLowerCase():"")}E=A}if(E)Dt(d,"complete"),Dt(d,"success");else{d.o=6;try{var q=Ts(d)>2?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.ca()+"]",bl(d)}}finally{fi(d)}}}}function fi(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,v||Dt(d,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ts(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Ts(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ha(v)}};function an(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function mi(d){const v={};d=(d.g&&Ts(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(S(d[A]))continue;var E=Zc(d[A]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=v[q]||[];v[q]=$,$.push(E)}Ne(v,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function Zi(d){this.za=0,this.i=[],this.j=new _s,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,d),this.Za=Ys("retryDelaySeedMs",1e4,d),this.Ta=Ys("forwardChannelMaxRetries",2,d),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new dl(d&&d.concurrentRequestLimit),this.Ba=new Ji,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Zi.prototype,i.ka=8,i.I=1,i.connect=function(d,v,E,A){kt(0),this.W=d,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=fu(this,null,this.W),Xs(this)};function wl(d){if(Wa(d),d.I==3){var v=d.V++,E=Ut(d.J);if(st(E,"SID",d.M),st(E,"RID",v),st(E,"TYPE","terminate"),ca(d,E),v=new xs(d,d.j,v),v.M=2,v.A=sa(Ut(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.A,E=!0),E||(v.g=mu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Bs(v)}hu(d)}function er(d){d.g&&(Sl(d),d.g.cancel(),d.g=null)}function Wa(d){er(d),d.v&&(u.clearTimeout(d.v),d.v=null),eo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function Xs(d){if(!hl(d.h)&&!d.m){d.m=!0;var v=d.Ea;ye||N(),le||(ye(),le=!0),C.add(v,d),d.D=0}}function Za(d,v){return Hs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ps(g(d.Ea,d,v),du(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const q=new xs(this,this.j,d);let $=this.o;if(this.U&&($?($=V($),oe($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=ou(this,q,v),E=Ut(this.J),st(E,"RID",d),st(E,"CVER",22),this.G&&st(E,"X-HTTP-Session-Id",this.G),ca(this,E),$&&(this.R?v="headers="+hi(ts($))+"&"+v:this.u&&aa(E,this.u,$)),fl(this.h,q),this.Ra&&st(E,"TYPE","init"),this.S?(st(E,"$req",v),st(E,"SID","null"),q.U=!0,zs(q,E,null)):zs(q,E,v),this.I=2}}else this.I==3&&(d?Tl(this,d):this.i.length==0||hl(this.h)||Tl(this))};function Tl(d,v){var E;v?E=v.l:E=d.V++;const A=Ut(d.J);st(A,"SID",d.M),st(A,"RID",E),st(A,"AID",d.K),ca(d,A),d.u&&d.o&&aa(A,d.u,d.o),E=new xs(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),v&&(d.i=v.G.concat(d.i)),v=ou(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),fl(d.h,E),zs(E,A,v)}function ca(d,v){d.H&&be(d.H,function(E,A){st(v,A,E)}),d.l&&be({},function(E,A){st(v,A,E)})}function ou(d,v,E){E=Math.min(d.i.length,E);const A=d.l?g(d.l.Ka,d.l,d):null;e:{var q=d.i;let ke=-1;for(;;){const jt=["count="+E];ke==-1?E>0?(ke=q[0].g,jt.push("ofs="+ke)):ke=0:jt.push("ofs="+ke);let et=!0;for(let _t=0;_t<E;_t++){var $=q[_t].g;const ns=q[_t].map;if($-=ke,$<0)ke=Math.max(0,q[_t].g-100),et=!1;else try{$="req"+$+"_"||"";try{var ue=ns instanceof Map?ns:Object.entries(ns);for(const[Ws,Ss]of ue){let As=Ss;p(Ss)&&(As=ys(Ss)),jt.push($+Ws+"="+encodeURIComponent(As))}}catch(Ws){throw jt.push($+"type="+encodeURIComponent("_badmap")),Ws}}catch{A&&A(ns)}}if(et){ue=jt.join("&");break e}}ue=void 0}return d=d.i.splice(0,E),v.G=d,ue}function lu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;ye||N(),le||(ye(),le=!0),C.add(v,d),d.A=0}}function ua(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ps(g(d.Da,d),du(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ps(g(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),er(this),cu(this))};function Sl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function cu(d){d.g=new xs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Ut(d.na);st(v,"RID","rpc"),st(v,"SID",d.M),st(v,"AID",d.K),st(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&st(v,"TO",d.ia),st(v,"TYPE","xmlhttp"),ca(d,v),d.u&&d.o&&aa(v,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=sa(Ut(v)),E.u=null,E.R=!0,Ga(E,d)}i.Va=function(){this.C!=null&&(this.C=null,er(this),ua(this),kt(19))};function eo(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function uu(d,v){var E=null;if(d.g==v){eo(d),Sl(d),d.g=null;var A=2}else if(Gs(d.h,v))E=v.G,ml(d.h,v),A=1;else return;if(d.I!=0){if(v.o)if(A==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var q=d.D;A=vs(),Dt(A,new Ls(A,E)),Xs(d)}else lu(d);else if(q=v.m,q==3||q==0&&v.X>0||!(A==1&&Za(d,v)||A==2&&ua(d)))switch(E&&E.length>0&&(v=d.h,v.i=v.i.concat(E)),q){case 1:Js(d,5);break;case 4:Js(d,10);break;case 3:Js(d,6);break;default:Js(d,2)}}}function du(d,v){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*v}function Js(d,v){if(d.j.info("Error code "+v),v==2){var E=g(d.bb,d),A=d.Ua;const q=!A;A=new Pn(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Zt(A,"https"),sa(A),q?bs(A.toString(),E):xl(A.toString(),E)}else kt(2);d.I=0,d.l&&d.l.pa(v),hu(d),Wa(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function hu(d){if(d.I=0,d.ja=[],d.l){const v=pl(d.h);(v.length!=0||d.i.length!=0)&&(L(d.ja,v),L(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function fu(d,v,E){var A=E instanceof Pn?Ut(E):new Pn(E);if(A.g!="")v&&(A.g=v+"."+A.g),Ki(A,A.u);else{var q=u.location;A=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;const $=new Pn(null);A&&Zt($,A),v&&($.g=v),q&&Ki($,q),E&&($.h=E),A=$}return E=d.G,v=d.wa,E&&v&&st(A,E,v),st(A,"VER",d.ka),ca(d,A),A}function mu(d,v,E){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new lt(new Ks({ab:E})):new lt(d.ma),v.Fa(d.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function pu(){}i=pu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function tr(){}tr.prototype.g=function(d,v){return new bn(d,v)};function bn(d,v){At.call(this),this.g=new Zi(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!S(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!S(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new pi(this)}b(bn,At),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){wl(this.g)},bn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=ys(d),d=E);v.i.push(new Pt(v.Ya++,d)),v.I==3&&Xs(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,bn.Z.N.call(this)};function gu(d){wt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const E in v){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}b(gu,wt);function yu(){En.call(this),this.status=1}b(yu,En);function pi(d){this.g=d}b(pi,pu),pi.prototype.ra=function(){Dt(this.g,"a")},pi.prototype.qa=function(d){Dt(this.g,new gu(d))},pi.prototype.pa=function(d){Dt(this.g,new yu)},pi.prototype.oa=function(){Dt(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,fb=function(){return new tr},hb=function(){return vs()},db=vt,dp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,kd=ta,cl.COMPLETE="complete",ub=cl,Ze.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",At.prototype.listen=At.prototype.J,fc=Ze,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,cb=lt}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const X_="@firebase/firestore",J_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new kp("@firebase/firestore");function Oo(){return Oa.logLevel}function me(i,...e){if(Oa.logLevel<=He.DEBUG){const n=e.map(Yp);Oa.debug(`Firestore (${il}): ${i}`,...n)}}function Ui(i,...e){if(Oa.logLevel<=He.ERROR){const n=e.map(Yp);Oa.error(`Firestore (${il}): ${i}`,...n)}}function Qo(i,...e){if(Oa.logLevel<=He.WARN){const n=e.map(Yp);Oa.warn(`Firestore (${il}): ${i}`,...n)}}function Yp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,mb(i,r,n)}function mb(i,e,n){let r=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ui(r),new Error(r)}function Ye(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||mb(e,o,r)}function Oe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vn.UNAUTHENTICATED)))}shutdown(){}}class eI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class tI{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ri,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ri)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new pb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class nI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new nI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new W_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new W_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=rI(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ge(i,e){return i<e?-1:i>e?1:0}function hp(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return Ym(o)===Ym(c)?Ge(o,c):Ym(o)?1:-1}return Ge(i.length,e.length)}const aI=55296,oI=57343;function Ym(i){const e=i.charCodeAt(0);return e>=aI&&e<=oI}function Ko(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="__name__";class si{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof si?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=si.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ge(e.length,n.length)}static compareSegments(e,n){const r=si.isNumericId(e),o=si.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?si.extractNumericId(e).compare(si.extractNumericId(n)):hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lr.fromString(e.substring(4,e.length-2))}}class at extends si{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const lI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends si{construct(e,n,r){return new hn(e,n,r)}static isValidIdentifier(e){return lI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fp}static keyField(){return new hn([fp])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ce(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ce(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else p==="`"?(u=!u,o++):p!=="."||u?(r+=p,o++):(c(),o++)}if(c(),u)throw new ce(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(at.fromString(e))}static fromName(e){return new we(at.fromString(e).popFirst(5))}static empty(){return new we(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(i,e,n){if(!n)throw new ce(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cI(i,e,n,r){if(e===!0&&r===!0)throw new ce(W.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Z_(i){if(!we.isDocumentKey(i))throw new ce(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ex(i){if(we.isDocumentKey(i))throw new ce(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function yb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function vh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Jn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vh(i);throw new ce(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function uI(i,e){if(e<=0)throw new ce(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(i,e){const n={typeString:i};return e&&(n.value=e),n}function qc(i,e){if(!yb(i))throw new ce(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ce(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=-62135596800,nx=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nx);return new yt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tx)throw new ce(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nx}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qc(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Yt("string",yt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new yt(0,0))}static max(){return new De(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=-1;function dI(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new zr(o,we.empty(),e)}function hI(i){return new zr(i.readTime,i.key,Ac)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(De.min(),we.empty(),Ac)}static max(){return new zr(De.max(),we.empty(),Ac)}}function fI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(i.documentKey,e.documentKey),n!==0?n:Ge(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==mI)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,r)=>{n(e)}))}static reject(e){return new ie(((n,r)=>{r(e)}))}static waitFor(e){return new ie(((n,r)=>{let o=0,c=0,u=!1;e.forEach((p=>{++o,p.next((()=>{++c,u&&c===o&&n()}),(y=>r(y)))})),u=!0,c===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next((o=>o?ie.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new ie(((r,o)=>{const c=e.length,u=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;n(e[g]).next((x=>{u[g]=x,++p,p===c&&r(u)}),(x=>o(x)))}}))}static doWhile(e,n){return new ie(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function gI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function al(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=-1;function Fc(i){return i==null}function Wd(i){return i===0&&1/i==-1/0}function yI(i){return typeof i=="number"&&Number.isInteger(i)&&!Wd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="";function vI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=sx(e)),e=_I(i.get(n),e);return sx(e)}function _I(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case vb:n+="";break;default:n+=c}}return n}function sx(i){return i+vb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function $r(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function _b(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Td(this.root,e,this.comparator,!1)}getReverseIterator(){return new Td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Td(this.root,e,this.comparator,!0)}}class Td{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??dn.RED,this.left=o??dn.EMPTY,this.right=c??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new dn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return dn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rx(this.data.getIterator())}getIteratorFrom(e){return new rx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class rx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new $n([])}unionWith(e){let n=new Jt(hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new xb("Invalid base64 string: "+c):c}})(e);return new fn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const xI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(i){if(Ye(!!i,39018),typeof i=="string"){let e=0;const n=xI.exec(i);if(Ye(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(i.seconds),nanos:Vt(i.nanos)}}function Vt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function qr(i){return typeof i=="string"?fn.fromBase64String(i):fn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="server_timestamp",bb="__type__",wb="__previous_value__",Tb="__local_write_time__";function xh(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[bb])==null?void 0:r.stringValue)===Eb}function Eh(i){const e=i.mapValue.fields[wb];return xh(e)?Eh(e):e}function Nc(i){const e=Br(i.mapValue.fields[Tb].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r,o,c,u,p,y,g,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=x}}const Zd="(default)";class Cc{constructor(e,n){this.projectId=e,this.database=n||Zd}static empty(){return new Cc("","")}get isDefaultDatabase(){return this.database===Zd}isEqual(e){return e instanceof Cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="__type__",bI="__max__",Sd={mapValue:{}},Ab="__vector__",eh="value";function Fr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xh(i)?4:TI(i)?9007199254740991:wI(i)?10:11:Ae(28295,{value:i})}function ci(i,e){if(i===e)return!0;const n=Fr(i);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Nc(i).isEqual(Nc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Br(o.timestampValue),p=Br(c.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return qr(o.bytesValue).isEqual(qr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Vt(o.geoPointValue.latitude)===Vt(c.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Vt(o.integerValue)===Vt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Vt(o.doubleValue),p=Vt(c.doubleValue);return u===p?Wd(u)===Wd(p):isNaN(u)&&isNaN(p)}return!1})(i,e);case 9:return Ko(i.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},p=c.mapValue.fields||{};if(ix(u)!==ix(p))return!1;for(const y in u)if(u.hasOwnProperty(y)&&(p[y]===void 0||!ci(u[y],p[y])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function Ic(i,e){return(i.values||[]).find((n=>ci(n,e)))!==void 0}function $o(i,e){if(i===e)return 0;const n=Fr(i),r=Fr(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const p=Vt(c.integerValue||c.doubleValue),y=Vt(u.integerValue||u.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(i,e);case 3:return ax(i.timestampValue,e.timestampValue);case 4:return ax(Nc(i),Nc(e));case 5:return hp(i.stringValue,e.stringValue);case 6:return(function(c,u){const p=qr(c),y=qr(u);return p.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const p=c.split("/"),y=u.split("/");for(let g=0;g<p.length&&g<y.length;g++){const x=Ge(p[g],y[g]);if(x!==0)return x}return Ge(p.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const p=Ge(Vt(c.latitude),Vt(u.latitude));return p!==0?p:Ge(Vt(c.longitude),Vt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return ox(i.arrayValue,e.arrayValue);case 10:return(function(c,u){var T,O,L,k;const p=c.fields||{},y=u.fields||{},g=(T=p[eh])==null?void 0:T.arrayValue,x=(O=y[eh])==null?void 0:O.arrayValue,b=Ge(((L=g==null?void 0:g.values)==null?void 0:L.length)||0,((k=x==null?void 0:x.values)==null?void 0:k.length)||0);return b!==0?b:ox(g,x)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Sd.mapValue&&u===Sd.mapValue)return 0;if(c===Sd.mapValue)return 1;if(u===Sd.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=u.fields||{},x=Object.keys(g);y.sort(),x.sort();for(let b=0;b<y.length&&b<x.length;++b){const T=hp(y[b],x[b]);if(T!==0)return T;const O=$o(p[y[b]],g[x[b]]);if(O!==0)return O}return Ge(y.length,x.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function ax(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ge(i,e);const n=Br(i),r=Br(e),o=Ge(n.seconds,r.seconds);return o!==0?o:Ge(n.nanos,r.nanos)}function ox(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=$o(n[o],r[o]);if(c)return c}return Ge(n.length,r.length)}function Yo(i){return mp(i)}function mp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return qr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return we.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=mp(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${mp(n.fields[u])}`;return o+"}"})(i.mapValue):Ae(61005,{value:i})}function Ld(i){switch(Fr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(i);return e?16+Ld(e):16;case 5:return 2*i.stringValue.length;case 6:return qr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Ld(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return $r(r.fields,((c,u)=>{o+=c.length+Ld(u)})),o})(i.mapValue);default:throw Ae(13486,{value:i})}}function th(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function pp(i){return!!i&&"integerValue"in i}function Wp(i){return!!i&&"arrayValue"in i}function lx(i){return!!i&&"nullValue"in i}function cx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Pd(i){return!!i&&"mapValue"in i}function wI(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[Sb])==null?void 0:r.stringValue)===Ab}function vc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return $r(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=vc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(i.arrayValue.values[n]);return e}return{...i}}function TI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===bI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=hn.emptyPath(),r={},o=[];e.forEach(((u,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=p.popLast()}u?r[p.lastSegment()]=vc(u):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Pd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){$r(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Sn(vc(this.value))}}function Nb(i){const e=[];return $r(i.fields,((n,r)=>{const o=new hn([n]);if(Pd(r)){const c=Nb(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r,o,c,u,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=p}static newInvalidDocument(e){return new sn(e,0,De.min(),De.min(),De.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,o){return new sn(e,1,n,De.min(),r,o,0)}static newNoDocument(e,n){return new sn(e,2,n,De.min(),De.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,De.min(),De.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.position=e,this.inclusive=n}}function ux(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=we.comparator(we.fromName(u.referenceValue),n.key):r=$o(u,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function dx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ci(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function SI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{}class Kt extends Cb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NI(e,n,r):n==="array-contains"?new RI(e,r):n==="in"?new DI(e,r):n==="not-in"?new jI(e,r):n==="array-contains-any"?new OI(e,r):new Kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CI(e,r):new II(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($o(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class js extends Cb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new js(e,n)}matches(e){return Ib(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ib(i){return i.op==="and"}function Rb(i){return AI(i)&&Ib(i)}function AI(i){for(const e of i.filters)if(e instanceof js)return!1;return!0}function gp(i){if(i instanceof Kt)return i.field.canonicalString()+i.op.toString()+Yo(i.value);if(Rb(i))return i.filters.map((e=>gp(e))).join(",");{const e=i.filters.map((n=>gp(n))).join(",");return`${i.op}(${e})`}}function Db(i,e){return i instanceof Kt?(function(r,o){return o instanceof Kt&&r.op===o.op&&r.field.isEqual(o.field)&&ci(r.value,o.value)})(i,e):i instanceof js?(function(r,o){return o instanceof js&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,p)=>c&&Db(u,o.filters[p])),!0):!1})(i,e):void Ae(19439)}function jb(i){return i instanceof Kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`})(i):i instanceof js?(function(n){return n.op.toString()+" {"+n.getFilters().map(jb).join(" ,")+"}"})(i):"Filter"}class NI extends Kt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class CI extends Kt{constructor(e,n){super(e,"in",n),this.keys=Ob("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class II extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=Ob("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ob(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>we.fromName(r.referenceValue)))}class RI extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wp(n)&&Ic(n.arrayValue,this.value)}}class DI extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ic(this.value.arrayValue,n)}}class jI extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ic(this.value.arrayValue,n)}}class OI extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ic(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n=null,r=[],o=[],c=null,u=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=p,this.Te=null}}function hx(i,e=null,n=[],r=[],o=null,c=null,u=null){return new MI(i,e,n,r,o,c,u)}function Zp(i){const e=Oe(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>gp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Fc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Yo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Yo(r))).join(",")),e.Te=n}return e.Te}function eg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!SI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Db(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!dx(i.startAt,e.startAt)&&dx(i.endAt,e.endAt)}function yp(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n=null,r=[],o=[],c=null,u="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VI(i,e,n,r,o,c,u,p){return new Pa(i,e,n,r,o,c,u,p)}function tg(i){return new Pa(i)}function fx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function ng(i){return i.collectionGroup!==null}function Bo(i){const e=Oe(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Jt(hn.comparator);return u.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Rc(c,r))})),n.has(hn.keyField().canonicalString())||e.Ie.push(new Rc(hn.keyField(),r))}return e.Ie}function ai(i){const e=Oe(i);return e.Ee||(e.Ee=kI(e,Bo(i))),e.Ee}function kI(i,e){if(i.limitType==="F")return hx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Rc(o.field,c)}));const n=i.endAt?new Xo(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Xo(i.startAt.position,i.startAt.inclusive):null;return hx(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function vp(i,e){const n=i.filters.concat([e]);return new Pa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function nh(i,e,n){return new Pa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function bh(i,e){return eg(ai(i),ai(e))&&i.limitType===e.limitType}function Mb(i){return`${Zp(ai(i))}|lt:${i.limitType}`}function Mo(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>jb(o))).join(", ")}]`),Fc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Yo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Yo(o))).join(",")),`Target(${r})`})(ai(i))}; limitType=${i.limitType})`}function wh(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):we.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of Bo(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,p,y){const g=ux(u,p,y);return u.inclusive?g<=0:g<0})(r.startAt,Bo(r),o)||r.endAt&&!(function(u,p,y){const g=ux(u,p,y);return u.inclusive?g>=0:g>0})(r.endAt,Bo(r),o))})(i,e)}function LI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Vb(i){return(e,n)=>{let r=!1;for(const o of Bo(i)){const c=PI(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function PI(i,e,n){const r=i.field.isKeyField()?we.comparator(e.key,n.key):(function(c,u,p){const y=u.data.field(c),g=p.data.field(c);return y!==null&&g!==null?$o(y,g):Ae(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return _b(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new St(we.comparator);function zi(){return UI}const kb=new St(we.comparator);function mc(...i){let e=kb;for(const n of i)e=e.insert(n.key,n);return e}function Lb(i){let e=kb;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ia(){return _c()}function Pb(){return _c()}function _c(){return new Ua((i=>i.toString()),((i,e)=>i.isEqual(e)))}const zI=new St(we.comparator),BI=new Jt(we.comparator);function Qe(...i){let e=BI;for(const n of i)e=e.add(n);return e}const qI=new Jt(Ge);function FI(){return qI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function Ub(i){return{integerValue:""+i}}function HI(i,e){return yI(e)?Ub(e):sg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this._=void 0}}function GI(i,e,n){return i instanceof sh?(function(o,c){const u={fields:{[bb]:{stringValue:Eb},[Tb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&xh(c)&&(c=Eh(c)),c&&(u.fields[wb]=c),{mapValue:u}})(n,e):i instanceof Dc?Bb(i,e):i instanceof jc?qb(i,e):(function(o,c){const u=zb(o,c),p=mx(u)+mx(o.Ae);return pp(u)&&pp(o.Ae)?Ub(p):sg(o.serializer,p)})(i,e)}function QI(i,e,n){return i instanceof Dc?Bb(i,e):i instanceof jc?qb(i,e):n}function zb(i,e){return i instanceof ih?(function(r){return pp(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class sh extends Th{}class Dc extends Th{constructor(e){super(),this.elements=e}}function Bb(i,e){const n=Fb(e);for(const r of i.elements)n.some((o=>ci(o,r)))||n.push(r);return{arrayValue:{values:n}}}class jc extends Th{constructor(e){super(),this.elements=e}}function qb(i,e){let n=Fb(e);for(const r of i.elements)n=n.filter((o=>!ci(o,r)));return{arrayValue:{values:n}}}class ih extends Th{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mx(i){return Vt(i.integerValue||i.doubleValue)}function Fb(i){return Wp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function KI(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Dc&&o instanceof Dc||r instanceof jc&&o instanceof jc?Ko(r.elements,o.elements,ci):r instanceof ih&&o instanceof ih?ci(r.Ae,o.Ae):r instanceof sh&&o instanceof sh})(i.transform,e.transform)}class $I{constructor(e,n){this.version=e,this.transformResults=n}}class $t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $t}static exists(e){return new $t(void 0,e)}static updateTime(e){return new $t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ud(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Sh{}function Hb(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Gc(i.key,$t.none()):new Hc(i.key,i.data,$t.none());{const n=i.data,r=Sn.empty();let o=new Jt(hn.comparator);for(let c of e.fields)if(!o.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new Yr(i.key,r,new $n(o.toArray()),$t.none())}}function YI(i,e,n){i instanceof Hc?(function(o,c,u){const p=o.value.clone(),y=gx(o.fieldTransforms,c,u.transformResults);p.setAll(y),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Yr?(function(o,c,u){if(!Ud(o.precondition,c))return void c.convertToUnknownDocument(u.version);const p=gx(o.fieldTransforms,c,u.transformResults),y=c.data;y.setAll(Gb(o)),y.setAll(p),c.convertToFoundDocument(u.version,y).setHasCommittedMutations()})(i,e,n):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function xc(i,e,n,r){return i instanceof Hc?(function(c,u,p,y){if(!Ud(c.precondition,u))return p;const g=c.value.clone(),x=yx(c.fieldTransforms,y,u);return g.setAll(x),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(i,e,n,r):i instanceof Yr?(function(c,u,p,y){if(!Ud(c.precondition,u))return p;const g=yx(c.fieldTransforms,y,u),x=u.data;return x.setAll(Gb(c)),x.setAll(g),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(i,e,n,r):(function(c,u,p){return Ud(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(i,e,n)}function XI(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=zb(r.transform,o||null);c!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,c))}return n||null}function px(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ko(r,o,((c,u)=>KI(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Hc extends Sh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yr extends Sh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Gb(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function gx(i,e,n){const r=new Map;Ye(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],u=c.transform,p=e.data.field(c.field);r.set(c.field,QI(u,p,n[o]))}return r}function yx(i,e,n){const r=new Map;for(const o of i){const c=o.transform,u=n.data.field(o.field);r.set(o.field,GI(c,u,e))}return r}class Gc extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qb extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&YI(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Pb();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let p=this.applyToLocalView(u,c.mutatedFields);p=n.has(o.key)?null:p;const y=Hb(u,p);y!==null&&r.set(o.key,y),u.isValidDocument()||u.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,((n,r)=>px(n,r)))&&Ko(this.baseMutations,e.baseMutations,((n,r)=>px(n,r)))}}class ig{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return zI})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new ig(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,$e;function Kb(i){switch(i){case W.OK:return Ae(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function $b(i){if(i===void 0)return Ui("GRPC error has no .code"),W.UNKNOWN;switch(i){case Qt.OK:return W.OK;case Qt.CANCELLED:return W.CANCELLED;case Qt.UNKNOWN:return W.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return W.INTERNAL;case Qt.UNAVAILABLE:return W.UNAVAILABLE;case Qt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Qt.NOT_FOUND:return W.NOT_FOUND;case Qt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Qt.ABORTED:return W.ABORTED;case Qt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Qt.DATA_LOSS:return W.DATA_LOSS;default:return Ae(39323,{code:i})}}($e=Qt||(Qt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=new Lr([4294967295,4294967295],0);function vx(i){const e=eR().encode(i),n=new lb;return n.update(e),new Uint8Array(n.digest())}function _x(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Lr([n,r],0),new Lr([o,c],0)]}class rg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pc(`Invalid padding: ${n}`);if(r<0)throw new pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Lr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Lr.fromNumber(r)));return o.compare(tR)===1&&(o=new Lr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vx(e),[r,o]=_x(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new rg(c,o,n);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const n=vx(e),[r,o]=_x(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Qc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ah(De.min(),o,new St(Ge),zi(),Qe())}}class Qc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qc(r,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class Yb{constructor(e,n){this.targetId=e,this.Ce=n}}class Xb{constructor(e,n,r=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class xx{constructor(){this.ve=0,this.Fe=Ex(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),n=Qe(),r=Qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ae(38017,{changeType:c})}})),new Qc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ex()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nR{constructor(e){this.Ge=e,this.ze=new Map,this.je=zi(),this.Je=Ad(),this.He=Ad(),this.Ye=new St(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(yp(c))if(r===0){const u=new we(c.path);this.et(n,u,sn.newNoDocument(u,De.min()))}else Ye(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const p=this.ut(e),y=p?this.ct(p,e,u):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let u,p;try{u=qr(r).toUint8Array()}catch(y){if(y instanceof xb)return Qo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new rg(u,o,c)}catch(y){return Qo(y instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const p=this.ot(u);if(p){if(c.current&&yp(p.target)){const y=new we(p.target.path);this.It(y).has(u)||this.Et(u,y)||this.et(u,y,sn.newNoDocument(y,e))}c.Be&&(n.set(u,c.ke()),c.qe())}}));let r=Qe();this.He.forEach(((c,u)=>{let p=!0;u.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Ah(e,n,this.Ye,this.je,r);return this.je=zi(),this.Je=Ad(),this.He=Ad(),this.Ye=new St(Ge),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new xx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jt(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jt(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ad(){return new St(we.comparator)}function Ex(){return new St(we.comparator)}const sR={asc:"ASCENDING",desc:"DESCENDING"},iR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rR={and:"AND",or:"OR"};class aR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _p(i,e){return i.useProto3Json||Fc(e)?e:{value:e}}function rh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function oR(i,e){return rh(i,e.toTimestamp())}function Yn(i){return Ye(!!i,49232),De.fromTimestamp((function(n){const r=Br(n);return new yt(r.seconds,r.nanos)})(i))}function ag(i,e){return xp(i,e).canonicalString()}function xp(i,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Wb(i){const e=at.fromString(i);return Ye(iw(e),10190,{key:e.toString()}),e}function ah(i,e){return ag(i.databaseId,e.path)}function Ec(i,e){const n=Wb(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new we(ew(n))}function Zb(i,e){return ag(i.databaseId,e)}function lR(i){const e=Wb(i);return e.length===4?at.emptyPath():ew(e)}function Ep(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ew(i){return Ye(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function bx(i,e,n){return{name:ah(i,e),fields:n.value.mapValue.fields}}function cR(i,e){return"found"in e?(function(r,o){Ye(!!o.found,43571),o.found.name,o.found.updateTime;const c=Ec(r,o.found.name),u=Yn(o.found.updateTime),p=o.found.createTime?Yn(o.found.createTime):De.min(),y=new Sn({mapValue:{fields:o.found.fields}});return sn.newFoundDocument(c,u,p,y)})(i,e):"missing"in e?(function(r,o){Ye(!!o.missing,3894),Ye(!!o.readTime,22933);const c=Ec(r,o.missing),u=Yn(o.readTime);return sn.newNoDocument(c,u)})(i,e):Ae(7234,{result:e})}function uR(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ae(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,x){return g.useProto3Json?(Ye(x===void 0||typeof x=="string",58123),fn.fromBase64String(x||"")):(Ye(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),fn.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(g){const x=g.code===void 0?W.UNKNOWN:$b(g.code);return new ce(x,g.message||"")})(u);n=new Xb(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ec(i,r.document.name),c=Yn(r.document.updateTime),u=r.document.createTime?Yn(r.document.createTime):De.min(),p=new Sn({mapValue:{fields:r.document.fields}}),y=sn.newFoundDocument(o,c,u,p),g=r.targetIds||[],x=r.removedTargetIds||[];n=new zd(g,x,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Ec(i,r.document),c=r.readTime?Yn(r.readTime):De.min(),u=sn.newNoDocument(o,c),p=r.removedTargetIds||[];n=new zd([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Ec(i,r.document),c=r.removedTargetIds||[];n=new zd([],c,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new ZI(o,c),p=r.targetId;n=new Yb(p,u)}}return n}function tw(i,e){let n;if(e instanceof Hc)n={update:bx(i,e.key,e.value)};else if(e instanceof Gc)n={delete:ah(i,e.key)};else if(e instanceof Yr)n={update:bx(i,e.key,e.data),updateMask:_R(e.fieldMask)};else{if(!(e instanceof Qb))return Ae(16599,{Vt:e.type});n={verify:ah(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const p=u.transform;if(p instanceof sh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof jc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ih)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:oR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)})(i,e.precondition)),n}function dR(i,e){return i&&i.length>0?(Ye(e!==void 0,14353),i.map((n=>(function(o,c){let u=o.updateTime?Yn(o.updateTime):Yn(c);return u.isEqual(De.min())&&(u=Yn(c)),new $I(u,o.transformResults||[])})(n,e)))):[]}function hR(i,e){return{documents:[Zb(i,e.path)]}}function fR(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zb(i,o);const c=(function(g){if(g.length!==0)return sw(js.create(g,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(g){if(g.length!==0)return g.map((x=>(function(T){return{field:Vo(T.field),direction:gR(T.dir)}})(x)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const p=_p(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function mR(i){let e=lR(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ye(r===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(b){const T=nw(b);return T instanceof js&&Rb(T)?T.getFilters():[T]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((T=>(function(L){return new Rc(ko(L.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(b){let T;return T=typeof b=="object"?b.value:b,Fc(T)?null:T})(n.limit));let y=null;n.startAt&&(y=(function(b){const T=!!b.before,O=b.values||[];return new Xo(O,T)})(n.startAt));let g=null;return n.endAt&&(g=(function(b){const T=!b.before,O=b.values||[];return new Xo(O,T)})(n.endAt)),VI(e,o,u,c,p,"F",y,g)}function pR(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nw(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ko(n.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(n.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ko(n.unaryFilter.field);return Kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ko(n.unaryFilter.field);return Kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Kt.create(ko(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return js.create(n.compositeFilter.filters.map((r=>nw(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(i):Ae(30097,{filter:i})}function gR(i){return sR[i]}function yR(i){return iR[i]}function vR(i){return rR[i]}function Vo(i){return{fieldPath:i.canonicalString()}}function ko(i){return hn.fromServerFormat(i.fieldPath)}function sw(i){return i instanceof Kt?(function(n){if(n.op==="=="){if(cx(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(lx(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cx(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(lx(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:yR(n.op),value:n.value}}})(i):i instanceof js?(function(n){const r=n.getFilters().map((o=>sw(o)));return r.length===1?r[0]:{compositeFilter:{op:vR(n.op),filters:r}}})(i):Ae(54877,{filter:i})}function _R(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function iw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,o,c=De.min(),u=De.min(),p=fn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.yt=e}}function ER(i){const e=mR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.Cn=new wR}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(zr.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class wR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Jt(at.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Jt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rw=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(rw,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="LruGarbageCollector",TR=1048576;function Sx([i,e],[n,r]){const o=Ge(i,n);return o===0?Ge(e,r):o}class SR{constructor(e){this.Ir=e,this.buffer=new Jt(Sx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Sx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Tx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){al(n)?me(Tx,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Vr(3e5)}))}}class NR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(_h.ce);const r=new SR(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(wx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,u,p,y,g;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,u=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,p=Date.now(),this.removeTargets(e,r,n)))).next((b=>(c=b,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(g=Date.now(),Oo()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${o} in `+(p-u)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${b} documents in `+(g-y)+`ms
Total Duration: ${g-x}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function CR(i,e){return new NR(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.changes=new Ua((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&xc(r.mutation,o,$n.empty(),yt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Qe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Qe()){const o=Ia();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let u=mc();return c.forEach(((p,y)=>{u=u.insert(p,y.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Ia();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Qe())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,p)=>{n.set(u,p)}))}))}computeViews(e,n,r,o){let c=zi();const u=_c(),p=(function(){return _c()})();return n.forEach(((y,g)=>{const x=r.get(g.key);o.has(g.key)&&(x===void 0||x.mutation instanceof Yr)?c=c.insert(g.key,g):x!==void 0?(u.set(g.key,x.mutation.getFieldMask()),xc(x.mutation,g,x.mutation.getFieldMask(),yt.now())):u.set(g.key,$n.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((g,x)=>u.set(g,x))),n.forEach(((g,x)=>p.set(g,new RR(x,u.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=_c();let o=new St(((u,p)=>u-p)),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const p of u)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let x=r.get(y)||$n.empty();x=p.applyToLocalView(g,x),r.set(y,x);const b=(o.get(p.batchId)||Qe()).add(y);o=o.insert(p.batchId,b)}))})).next((()=>{const u=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,x=y.value,b=Pb();x.forEach((T=>{if(!c.has(T)){const O=Hb(n.get(T),r.get(T));O!==null&&b.set(T,O),c=c.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ie.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(u){return we.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ng(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):ie.resolve(Ia());let p=Ac,y=c;return u.next((g=>ie.forEach(g,((x,b)=>(p<b.largestBatchId&&(p=b.largestBatchId),c.get(x)?ie.resolve():this.remoteDocumentCache.getEntry(e,x).next((T=>{y=y.insert(x,T)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,y,g,Qe()))).next((x=>({batchId:p,changes:Lb(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next((r=>{let o=mc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let u=mc();return this.indexManager.getCollectionParents(e,c).next((p=>ie.forEach(p,(y=>{const g=(function(b,T){return new Pa(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next((x=>{x.forEach(((b,T)=>{u=u.insert(b,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((u=>{c.forEach(((y,g)=>{const x=g.getKey();u.get(x)===null&&(u=u.insert(x,sn.newInvalidDocument(x)))}));let p=mc();return u.forEach(((y,g)=>{const x=c.get(y);x!==void 0&&xc(x.mutation,g,$n.empty(),yt.now()),wh(n,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Yn(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:ER(o.bundledQuery),readTime:Yn(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.overlays=new St(we.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ia();return ie.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),ie.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const o=Ia(),c=n.length+1,u=new we(n.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new St(((g,x)=>g-x));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let x=c.get(g.largestBatchId);x===null&&(x=Ia(),c=c.insert(g.largestBatchId,x)),x.set(g.getKey(),g)}}const p=Ia(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,x)=>p.set(g,x))),!(p.size()>=o)););return ie.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new WI(n,r));let c=this.qr.get(n);c===void 0&&(c=Qe(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Qr=new Jt(tn.$r),this.Ur=new Jt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new tn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new we(new at([])),r=new tn(n,e),o=new tn(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new we(new at([])),r=new tn(n,e),o=new tn(n,e+1);let c=Qe();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new tn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return we.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(tn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new JI(c,n,r,o);this.mutationQueue.push(u);for(const p of o)this.Zr=this.Zr.add(new tn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Jp:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),o=new tn(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const p=this.Xr(u.Yr);c.push(p)})),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Jt(Ge);return n.forEach((o=>{const c=new tn(o,0),u=new tn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(p=>{r=r.add(p.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;we.isDocumentKey(c)||(c=c.child(""));const u=new tn(new we(c),0);let p=new Jt(Ge);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(p=p.add(y.Yr)),!0)}),u),ie.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(n.mutations,(o=>{const c=new tn(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new tn(n,0),o=this.Zr.firstAfterOrEqual(r);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.ri=e,this.docs=(function(){return new St(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=zi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():sn.newInvalidDocument(o))})),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=zi();const u=n.path,p=new we(u.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:x}}=y.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||fI(hI(x),r)<=0||(o.has(x.key)||wh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ae(9500)}ii(e,n){return ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new LR(this)}getSize(e){return ie.resolve(this.size)}}class LR extends IR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.persistence=e,this.si=new Ua((n=>Zp(n)),eg),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new og,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Jo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ie.waitFor(c).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new MR,this.referenceDelegate=e(this),this.Pi=new PR(this),this.indexManager=new bR,this.remoteDocumentCache=(function(o){return new kR(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new xR(n),this.Ii=new jR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const o=new UR(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class UR extends pI{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ri=new og,this.Vi=null}static mi(e){return new lg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const o=we.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class oh{constructor(e,n){this.persistence=e,this.pi=new Ua((r=>vI(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=CR(this,n)}static mi(e,n){return new oh(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?ie.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,n).next((p=>{p||(r++,c.removeEntry(u,De.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ld(e.data.value)),n}br(e,n,r){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Qe(),o=Qe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new cg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vA()?8:gI(_n())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new zR;return this.Ss(e,n,u).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,u,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(Oo()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Oo()<=He.DEBUG&&me("QueryEngine","Query:",Mo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Oo()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):ie.resolve())}ys(e,n){if(fx(n))return ie.resolve(null);let r=ai(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=nh(n,null,"F"),r=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=Qe(...c);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,u,y.readTime)?this.ys(e,nh(n,null,"F")):this.vs(e,g,n,y)}))))})))))}ws(e,n,r,o){return fx(n)||o.isEqual(De.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(n,c);return this.Cs(n,u,r,o)?ie.resolve(null):(Oo()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Mo(n)),this.vs(e,u,n,dI(o,Ac)).next((p=>p)))}))}Ds(e,n){let r=new Jt(Vb(e));return n.forEach(((o,c)=>{wh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return Oo()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.ps.getDocumentsMatchingQuery(e,n,zr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="LocalStore",qR=3e8;class FR{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new St(Ge),this.xs=new Ua((c=>Zp(c)),eg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function HR(i,e,n,r){return new FR(i,e,n,r)}async function ow(i,e){const n=Oe(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],p=[];let y=Qe();for(const g of o){u.push(g.batchId);for(const x of g.mutations)y=y.add(x.key)}for(const g of c){p.push(g.batchId);for(const x of g.mutations)y=y.add(x.key)}return n.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:p})))}))}))}function GR(i,e){const n=Oe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,x){const b=g.batch,T=b.keys();let O=ie.resolve();return T.forEach((L=>{O=O.next((()=>x.getEntry(y,L))).next((k=>{const P=g.docVersions.get(L);Ye(P!==null,48541),k.version.compareTo(P)<0&&(b.applyToRemoteDocument(k,g),k.isValidDocument()&&(k.setReadTime(g.commitVersion),x.addEntry(k)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(y,b)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Qe();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function lw(i){const e=Oe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function QR(i,e){const n=Oe(i),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((x,b)=>{const T=o.get(b);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,b))));let O=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?O=O.withResumeToken(fn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):x.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(x.resumeToken,r)),o=o.insert(b,O),(function(k,P,G){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=qR?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(T,O,x)&&p.push(n.Pi.updateTargetData(c,O))}));let y=zi(),g=Qe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(KR(c,u,e.documentUpdates).next((x=>{y=x.ks,g=x.qs}))),!r.isEqual(De.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(x)}return ie.waitFor(p).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(n.Ms=o,c)))}function KR(i,e,n){let r=Qe(),o=Qe();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=zi();return n.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(De.min())?(e.removeEntry(p,y.readTime),u=u.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),u=u.insert(p,y)):me(ug,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:u,qs:o}}))}function $R(i,e){const n=Oe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Jp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function YR(i,e){const n=Oe(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,ie.resolve(o)):n.Pi.allocateTargetId(r).next((u=>(o=new Dr(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function bp(i,e,n){const r=Oe(i),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!al(u))throw u;me(ug,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Ax(i,e,n){const r=Oe(i);let o=De.min(),c=Qe();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(y,g,x){const b=Oe(y),T=b.xs.get(x);return T!==void 0?ie.resolve(b.Ms.get(T)):b.Pi.getTargetData(g,x)})(r,u,ai(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?o:De.min(),n?c:Qe()))).next((p=>(XR(r,LI(e),p),{documents:p,Qs:c})))))}function XR(i,e,n){let r=i.Os.get(e)||De.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class Nx{constructor(){this.activeTargetIds=FI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JR{constructor(){this.Mo=new Nx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Nx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="ConnectivityMonitor";class Ix{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Cx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Cx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd=null;function wp(){return Nd===null?Nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nd++,"0x"+Nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="RestConnection",ZR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Zd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const u=wp(),p=this.zo(e,n.toUriEncodedString());me(Xm,`Sending RPC '${e}' ${u}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:g}=new URL(p),x=tl(g);return this.Jo(e,p,y,r,x).then((b=>(me(Xm,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Qo(Xm,`RPC '${e}' ${u} failed with error: `,b,"url: ",p,"request:",r),b}))}Ho(e,n,r,o,c,u){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=ZR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class nD extends eD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const u=wp();return new Promise(((p,y)=>{const g=new cb;g.setWithCredentials(!0),g.listenOnce(ub.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case kd.NO_ERROR:const b=g.getResponseJson();me(pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),p(b);break;case kd.TIMEOUT:me(pn,`RPC '${e}' ${u} timed out`),y(new ce(W.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const T=g.getStatus();if(me(pn,`RPC '${e}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const L=O==null?void 0:O.error;if(L&&L.status&&L.message){const k=(function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(J)>=0?J:W.UNKNOWN})(L.status);y(new ce(k,L.message))}else y(new ce(W.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ce(W.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(pn,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(o);me(pn,`RPC '${e}' ${u} sending request:`,o),g.send(n,"POST",x,r,15)}))}T_(e,n,r){const o=wp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fb(),p=hb(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const x=c.join("");me(pn,`Creating RPC '${e}' stream ${o}: ${x}`,y);const b=u.createWebChannel(x,y);this.I_(b);let T=!1,O=!1;const L=new tD({Yo:P=>{O?me(pn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(T||(me(pn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),T=!0),me(pn,`RPC '${e}' stream ${o} sending:`,P),b.send(P))},Zo:()=>b.close()}),k=(P,G,J)=>{P.listen(G,(Y=>{try{J(Y)}catch(de){setTimeout((()=>{throw de}),0)}}))};return k(b,fc.EventType.OPEN,(()=>{O||(me(pn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),k(b,fc.EventType.CLOSE,(()=>{O||(O=!0,me(pn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(b))})),k(b,fc.EventType.ERROR,(P=>{O||(O=!0,Qo(pn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),L.a_(new ce(W.UNAVAILABLE,"The operation could not be completed")))})),k(b,fc.EventType.MESSAGE,(P=>{var G;if(!O){const J=P.data[0];Ye(!!J,16349);const Y=J,de=(Y==null?void 0:Y.error)||((G=Y[0])==null?void 0:G.error);if(de){me(pn,`RPC '${e}' stream ${o} received error:`,de);const ye=de.status;let le=(function(I){const U=Qt[I];if(U!==void 0)return $b(U)})(ye),C=de.message;le===void 0&&(le=W.INTERNAL,C="Unknown error status: "+ye+" with message "+de.message),O=!0,L.a_(new ce(le,C)),b.close()}else me(pn,`RPC '${e}' stream ${o} received:`,J),L.u_(J)}})),k(p,db.STAT_EVENT,(P=>{P.stat===dp.PROXY?me(pn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===dp.NOPROXY&&me(pn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(i){return new aR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="PersistentStream";class cw{constructor(e,n,r,o,c,u,p,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ce(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(Rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sD extends cw{constructor(e,n,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uR(this.serializer,e),r=(function(c){if(!("targetChange"in c))return De.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Yn(u.readTime):De.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ep(this.serializer),n.addTarget=(function(c,u){let p;const y=u.target;if(p=yp(y)?{documents:hR(c,y)}:{query:fR(c,y).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=Jb(c,u.resumeToken);const g=_p(c,u.expectedCount);g!==null&&(p.expectedCount=g)}else if(u.snapshotVersion.compareTo(De.min())>0){p.readTime=rh(c,u.snapshotVersion.toTimestamp());const g=_p(c,u.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=pR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ep(this.serializer),n.removeTarget=e,this.q_(n)}}class iD extends cw{constructor(e,n,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dR(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ep(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>tw(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{}class aD extends rD{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,xp(n,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(W.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,xp(n,r),o,u,p,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ui(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class lD{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{za(this)&&(me(Ma,"Restarting streams for network reachability change."),await(async function(y){const g=Oe(y);g.Ea.add(4),await Kc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ch(g)})(this))}))})),this.Ra=new oD(r,o)}}async function Ch(i){if(za(i))for(const e of i.da)await e(!0)}async function Kc(i){for(const e of i.da)await e(!1)}function uw(i,e){const n=Oe(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pg(n)?mg(n):ol(n).O_()&&fg(n,e))}function hg(i,e){const n=Oe(i),r=ol(n);n.Ia.delete(e),r.O_()&&dw(n,e),n.Ia.size===0&&(r.O_()?r.L_():za(n)&&n.Ra.set("Unknown"))}function fg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(i).Y_(e)}function dw(i,e){i.Va.Ue(e),ol(i).Z_(e)}function mg(i){i.Va=new nR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ol(i).start(),i.Ra.ua()}function pg(i){return za(i)&&!ol(i).x_()&&i.Ia.size>0}function za(i){return Oe(i).Ea.size===0}function hw(i){i.Va=void 0}async function cD(i){i.Ra.set("Online")}async function uD(i){i.Ia.forEach(((e,n)=>{fg(i,e)}))}async function dD(i,e){hw(i),pg(i)?(i.Ra.ha(e),mg(i)):i.Ra.set("Unknown")}async function hD(i,e,n){if(i.Ra.set("Online"),e instanceof Xb&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,u),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){me(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lh(i,r)}else if(e instanceof zd?i.Va.Ze(e):e instanceof Yb?i.Va.st(e):i.Va.tt(e),!n.isEqual(De.min()))try{const r=await lw(i.localStore);n.compareTo(r)>=0&&await(function(c,u){const p=c.Va.Tt(u);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const x=c.Ia.get(g);x&&c.Ia.set(g,x.withResumeToken(y.resumeToken,u))}})),p.targetMismatches.forEach(((y,g)=>{const x=c.Ia.get(y);if(!x)return;c.Ia.set(y,x.withResumeToken(fn.EMPTY_BYTE_STRING,x.snapshotVersion)),dw(c,y);const b=new Dr(x.target,y,g,x.sequenceNumber);fg(c,b)})),c.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){me(Ma,"Failed to raise snapshot:",r),await lh(i,r)}}async function lh(i,e,n){if(!al(e))throw e;i.Ea.add(1),await Kc(i),i.Ra.set("Offline"),n||(n=()=>lw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(Ma,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Ch(i)}))}function fw(i,e){return e().catch((n=>lh(i,n,e)))}async function Ih(i){const e=Oe(i),n=Hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jp;for(;fD(e);)try{const o=await $R(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,mD(e,o)}catch(o){await lh(e,o)}mw(e)&&pw(e)}function fD(i){return za(i)&&i.Ta.length<10}function mD(i,e){i.Ta.push(e);const n=Hr(i);n.O_()&&n.X_&&n.ea(e.mutations)}function mw(i){return za(i)&&!Hr(i).x_()&&i.Ta.length>0}function pw(i){Hr(i).start()}async function pD(i){Hr(i).ra()}async function gD(i){const e=Hr(i);for(const n of i.Ta)e.ea(n.mutations)}async function yD(i,e,n){const r=i.Ta.shift(),o=ig.from(r,e,n);await fw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Ih(i)}async function vD(i,e){e&&Hr(i).X_&&await(async function(r,o){if((function(u){return Kb(u)&&u!==W.ABORTED})(o.code)){const c=r.Ta.shift();Hr(r).B_(),await fw(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Ih(r)}})(i,e),mw(i)&&pw(i)}async function Dx(i,e){const n=Oe(i);n.asyncQueue.verifyOperationInProgress(),me(Ma,"RemoteStore received new credentials");const r=za(n);n.Ea.add(3),await Kc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ch(n)}async function _D(i,e){const n=Oe(i);e?(n.Ea.delete(2),await Ch(n)):e||(n.Ea.add(2),await Kc(n),n.Ra.set("Unknown"))}function ol(i){return i.ma||(i.ma=(function(n,r,o){const c=Oe(n);return c.sa(),new sD(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:cD.bind(null,i),t_:uD.bind(null,i),r_:dD.bind(null,i),H_:hD.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),pg(i)?mg(i):i.Ra.set("Unknown")):(await i.ma.stop(),hw(i))}))),i.ma}function Hr(i){return i.fa||(i.fa=(function(n,r,o){const c=Oe(n);return c.sa(),new iD(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:pD.bind(null,i),r_:vD.bind(null,i),ta:gD.bind(null,i),na:yD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Ih(i)):(await i.fa.stop(),i.Ta.length>0&&(me(Ma,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const u=Date.now()+r,p=new gg(e,n,u,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(i,e){if(Ui("AsyncQueue",`${e}: ${i}`),al(i))return new ce(W.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=mc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.ga=new St(we.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Wo{constructor(e,n,r,o,c,u,p,y,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,o,c){const u=[];return n.forEach((p=>{u.push({type:0,doc:p})})),new Wo(e,n,qo.emptySet(n),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ED{constructor(){this.queries=Ox(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Oe(n),c=o.queries;o.queries=Ox(),c.forEach(((u,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new ce(W.ABORTED,"Firestore shutting down"))}}function Ox(){return new Ua((i=>Mb(i)),bh)}async function gw(i,e){const n=Oe(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new xD,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const p=yg(u,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&vg(n)}async function yw(i,e){const n=Oe(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bD(i,e){const n=Oe(i);let r=!1;for(const o of e){const c=o.query,u=n.queries.get(c);if(u){for(const p of u.Sa)p.Fa(o)&&(r=!0);u.wa=o}}r&&vg(n)}function wD(i,e,n){const r=Oe(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function vg(i){i.Ca.forEach((e=>{e.next()}))}var Tp,Mx;(Mx=Tp||(Tp={})).Ma="default",Mx.Cache="cache";class vw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class xw{constructor(e){this.key=e}}class TD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=Vb(e),this.tu=new qo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new jx,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,b)=>{const T=o.get(x),O=wh(this.query,b)?b:null,L=!!T&&this.mutatedKeys.has(T.key),k=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let P=!1;T&&O?T.data.isEqual(O.data)?L!==k&&(r.track({type:3,doc:O}),P=!0):this.su(T,O)||(r.track({type:2,doc:O}),P=!0,(y&&this.eu(O,y)>0||g&&this.eu(O,g)<0)&&(p=!0)):!T&&O?(r.track({type:0,doc:O}),P=!0):T&&!O&&(r.track({type:1,doc:T}),P=!0,(y||g)&&(p=!0)),P&&(O?(u=u.add(O),c=k?c.add(x):c.delete(x)):(u=u.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{tu:u,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,b)=>(function(O,L){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:P})}};return k(O)-k(L)})(x.type,b.type)||this.eu(x.doc,b.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,g=y!==this.Za;return this.Za=y,u.length!==0||g?{snapshot:new Wo(this.query,e.tu,c,u,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new xw(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new _w(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _g="SyncEngine";class SD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AD{constructor(e){this.key=e,this.hu=!1}}class ND{constructor(e,n,r,o,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ua((p=>Mb(p)),bh),this.Iu=new Map,this.Eu=new Set,this.du=new St(we.comparator),this.Au=new Map,this.Ru=new og,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CD(i,e,n=!0){const r=Aw(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Ew(r,e,n,!0),o}async function ID(i,e){const n=Aw(i);await Ew(n,e,!0,!1)}async function Ew(i,e,n,r){const o=await YR(i.localStore,ai(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await RD(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&n&&uw(i.remoteStore,o),p}async function RD(i,e,n,r,o){i.pu=(b,T,O)=>(async function(k,P,G,J){let Y=P.view.ru(G);Y.Cs&&(Y=await Ax(k.localStore,P.query,!1).then((({documents:C})=>P.view.ru(C,Y))));const de=J&&J.targetChanges.get(P.targetId),ye=J&&J.targetMismatches.get(P.targetId)!=null,le=P.view.applyChanges(Y,k.isPrimaryClient,de,ye);return kx(k,P.targetId,le.au),le.snapshot})(i,b,T,O);const c=await Ax(i.localStore,e,!0),u=new TD(e,c.Qs),p=u.ru(c.documents),y=Qc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),g=u.applyChanges(p,i.isPrimaryClient,y);kx(i,n,g.au);const x=new SD(e,n,u);return i.Tu.set(e,x),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function DD(i,e,n){const r=Oe(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!bh(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await bp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&hg(r.remoteStore,o.targetId),Sp(r,o.targetId)})).catch(rl)):(Sp(r,o.targetId),await bp(r.localStore,o.targetId,!0))}async function jD(i,e){const n=Oe(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hg(n.remoteStore,r.targetId))}async function OD(i,e,n){const r=zD(i);try{const o=await(function(u,p){const y=Oe(u),g=yt.now(),x=p.reduce(((O,L)=>O.add(L.key)),Qe());let b,T;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let L=zi(),k=Qe();return y.Ns.getEntries(O,x).next((P=>{L=P,L.forEach(((G,J)=>{J.isValidDocument()||(k=k.add(G))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,L))).next((P=>{b=P;const G=[];for(const J of p){const Y=XI(J,b.get(J.key).overlayedDocument);Y!=null&&G.push(new Yr(J.key,Y,Nb(Y.value.mapValue),$t.exists(!0)))}return y.mutationQueue.addMutationBatch(O,g,G,p)})).next((P=>{T=P;const G=P.applyToLocalDocumentSet(b,k);return y.documentOverlayCache.saveOverlays(O,P.batchId,G)}))})).then((()=>({batchId:T.batchId,changes:Lb(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,p,y){let g=u.Vu[u.currentUser.toKey()];g||(g=new St(Ge)),g=g.insert(p,y),u.Vu[u.currentUser.toKey()]=g})(r,o.batchId,n),await $c(r,o.changes),await Ih(r.remoteStore)}catch(o){const c=yg(o,"Failed to persist write");n.reject(c)}}async function bw(i,e){const n=Oe(i);try{const r=await QR(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=n.Au.get(c);u&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ye(u.hu,14607):o.removedDocuments.size>0&&(Ye(u.hu,42227),u.hu=!1))})),await $c(n,r,e)}catch(r){await rl(r)}}function Vx(i,e,n){const r=Oe(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,u)=>{const p=u.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(u,p){const y=Oe(u);y.onlineState=p;let g=!1;y.queries.forEach(((x,b)=>{for(const T of b.Sa)T.va(p)&&(g=!0)})),g&&vg(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MD(i,e,n){const r=Oe(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new St(we.comparator);u=u.insert(c,sn.newNoDocument(c,De.min()));const p=Qe().add(c),y=new Ah(De.min(),new Map,new St(Ge),u,p);await bw(r,y),r.du=r.du.remove(c),r.Au.delete(e),xg(r)}else await bp(r.localStore,e,!1).then((()=>Sp(r,e,n))).catch(rl)}async function VD(i,e){const n=Oe(i),r=e.batch.batchId;try{const o=await GR(n.localStore,e);Tw(n,r,null),ww(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $c(n,o)}catch(o){await rl(o)}}async function kD(i,e,n){const r=Oe(i);try{const o=await(function(u,p){const y=Oe(u);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let x;return y.mutationQueue.lookupMutationBatch(g,p).next((b=>(Ye(b!==null,37113),x=b.keys(),y.mutationQueue.removeMutationBatch(g,b)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,x,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,x))).next((()=>y.localDocuments.getDocuments(g,x)))}))})(r.localStore,e);Tw(r,e,n),ww(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $c(r,o)}catch(o){await rl(o)}}function ww(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Tw(i,e,n){const r=Oe(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Sp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||Sw(i,r)}))}function Sw(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(hg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),xg(i))}function kx(i,e,n){for(const r of n)r instanceof _w?(i.Ru.addReference(r.key,e),LD(i,r)):r instanceof xw?(me(_g,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||Sw(i,r.key)):Ae(19791,{wu:r})}function LD(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(me(_g,"New document in limbo: "+n),i.Eu.add(r),xg(i))}function xg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new we(at.fromString(e)),r=i.fu.next();i.Au.set(r,new AD(n)),i.du=i.du.insert(n,r),uw(i.remoteStore,new Dr(ai(tg(n.path)),r,"TargetPurposeLimboResolution",_h.ce))}}async function $c(i,e,n){const r=Oe(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{u.push(r.pu(y,e,n).then((g=>{var x;if((g||n)&&r.isPrimaryClient){const b=g?!g.fromCache:(x=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:x.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(g){o.push(g);const b=cg.As(y.targetId,g);c.push(b)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(y,g){const x=Oe(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ie.forEach(g,(T=>ie.forEach(T.Es,(O=>x.persistence.referenceDelegate.addReference(b,T.targetId,O))).next((()=>ie.forEach(T.ds,(O=>x.persistence.referenceDelegate.removeReference(b,T.targetId,O)))))))))}catch(b){if(!al(b))throw b;me(ug,"Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const O=x.Ms.get(T),L=O.snapshotVersion,k=O.withLastLimboFreeSnapshotVersion(L);x.Ms=x.Ms.insert(T,k)}}})(r.localStore,c))}async function PD(i,e){const n=Oe(i);if(!n.currentUser.isEqual(e)){me(_g,"User change. New user:",e.toKey());const r=await ow(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new ce(W.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $c(n,r.Ls)}}function UD(i,e){const n=Oe(i),r=n.Au.get(e);if(r&&r.hu)return Qe().add(r.key);{let o=Qe();const c=n.Iu.get(e);if(!c)return o;for(const u of c){const p=n.Tu.get(u);o=o.unionWith(p.view.nu)}return o}}function Aw(i){const e=Oe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MD.bind(null,e),e.Pu.H_=bD.bind(null,e.eventManager),e.Pu.yu=wD.bind(null,e.eventManager),e}function zD(i){const e=Oe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kD.bind(null,e),e}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HR(this.persistence,new BR,e.initialUser,this.serializer)}Cu(e){return new aw(lg.mi,this.serializer)}Du(e){return new JR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class BD extends ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof oh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new aw((r=>oh.mi(r,n)),this.serializer)}}class Ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PD.bind(null,this.syncEngine),await _D(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ED})()}createDatastore(e){const n=Nh(e.databaseInfo.databaseId),r=(function(c){return new nD(c)})(e.databaseInfo);return(function(c,u,p,y){return new aD(c,u,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,u,p){return new lD(r,o,c,u,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Vx(this.syncEngine,n,0)),(function(){return Ix.v()?new Ix:new WR})())}createSyncEngine(e,n){return(function(o,c,u,p,y,g,x){const b=new ND(o,c,u,p,y,g);return x&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Oe(o);me(Ma,"RemoteStore shutting down."),c.Ea.add(5),await Kc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ce(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const u=Oe(o),p={documents:c.map((b=>ah(u.serializer,b)))},y=await u.Ho("BatchGetDocuments",u.serializer.databaseId,at.emptyPath(),p,c.length),g=new Map;y.forEach((b=>{const T=cR(u.serializer,b);g.set(T.key.toString(),T)}));const x=[];return c.forEach((b=>{const T=g.get(b.toString());Ye(!!T,55234,{key:b}),x.push(T)})),x})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const o=we.fromPath(r);this.mutations.push(new Qb(o,this.precondition(o)))})),await(async function(r,o){const c=Oe(r),u={writes:o.map((p=>tw(c.serializer,p)))};await c.Go("Commit",c.serializer.databaseId,at.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});n=De.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ce(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(De.min())?$t.exists(!1):$t.updateTime(n):$t.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(De.min()))throw new ce(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $t.updateTime(n)}return $t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,r,o,c){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new dg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new qD(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Fc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Kb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class HD{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=vn.UNAUTHENTICATED,this.clientId=Xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{me(Gr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(me(Gr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Wm(i,e){i.asyncQueue.verifyOperationInProgress(),me(Gr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await ow(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Lx(i,e){i.asyncQueue.verifyOperationInProgress();const n=await GD(i);me(Gr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>Dx(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Dx(e.remoteStore,o))),i._onlineComponents=e}async function GD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(Gr,"Using user provided OfflineComponentProvider");try{await Wm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await Wm(i,new ch)}}else me(Gr,"Using default OfflineComponentProvider"),await Wm(i,new BD(void 0));return i._offlineComponents}async function Eg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(Gr,"Using user provided OnlineComponentProvider"),await Lx(i,i._uninitializedComponentsProvider._online)):(me(Gr,"Using default OnlineComponentProvider"),await Lx(i,new Ap))),i._onlineComponents}function QD(i){return Eg(i).then((e=>e.syncEngine))}function KD(i){return Eg(i).then((e=>e.datastore))}async function Cw(i){const e=await Eg(i),n=e.eventManager;return n.onListen=CD.bind(null,e.syncEngine),n.onUnlisten=DD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ID.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jD.bind(null,e.syncEngine),n}function $D(i,e,n={}){const r=new ri;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,y,g){const x=new Nw({next:T=>{x.Nu(),u.enqueueAndForget((()=>yw(c,b)));const O=T.docs.has(p);!O&&T.fromCache?g.reject(new ce(W.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&y&&y.source==="server"?g.reject(new ce(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new vw(tg(p.path),x,{includeMetadataChanges:!0,qa:!0});return gw(c,b)})(await Cw(i),i.asyncQueue,e,n,r))),r.promise}function YD(i,e,n={}){const r=new ri;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,y,g){const x=new Nw({next:T=>{x.Nu(),u.enqueueAndForget((()=>yw(c,b))),T.fromCache&&y.source==="server"?g.reject(new ce(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new vw(p,x,{includeMetadataChanges:!0,qa:!0});return gw(c,b)})(await Cw(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="firestore.googleapis.com",Ux=!0;class zx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rw,this.ssl=Ux}else this.host=e.host,this.ssl=e.ssl??Ux;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TR)throw new ce(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZC;switch(r.type){case"firstParty":return new sI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Px.get(n);r&&(me("ComponentProvider","Removing Datastore"),Px.delete(n),r.terminate())})(this),Promise.resolve()}}function XD(i,e,n,r={}){var g;i=Jn(i,Rh);const o=tl(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(wE(`https://${p}`),TE("Firestore",!0)),c.host!==Rw&&c.host!==p&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:o,emulatorOptions:r};if(!Ra(y,u)&&(i._setSettings(y),r.mockUserToken)){let x,b;if(typeof r.mockUserToken=="string")x=r.mockUserToken,b=vn.MOCK_USER;else{x=cA(r.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ce(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new vn(T)}i._authCredentials=new eI(new pb(x,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fi(this.firestore,e,this._query)}}class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(qc(n,Rt._jsonSchema))return new Rt(e,r||null,new we(at.fromString(n.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:Yt("string",Rt._jsonSchemaVersion),referencePath:Yt("string")};class Pr extends Fi{constructor(e,n,r){super(e,n,tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new we(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function Ht(i,e,...n){if(i=Tt(i),gb("collection","path",e),i instanceof Rh){const r=at.fromString(e,...n);return ex(r),new Pr(i,null,r)}{if(!(i instanceof Rt||i instanceof Pr))throw new ce(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(at.fromString(e,...n));return ex(r),new Pr(i.firestore,null,r)}}function yn(i,e,...n){if(i=Tt(i),arguments.length===1&&(e=Xp.newId()),gb("doc","path",e),i instanceof Rh){const r=at.fromString(e,...n);return Z_(r),new Rt(i,null,new we(r))}{if(!(i instanceof Rt||i instanceof Pr))throw new ce(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(at.fromString(e,...n));return Z_(r),new Rt(i.firestore,i instanceof Pr?i.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="AsyncQueue";class qx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dg(this,"async_queue_retry"),this._c=()=>{const r=Jm();r&&me(Bx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ri;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;me(Bx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ui("INTERNAL UNHANDLED ERROR: ",Fx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=gg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:Fx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Fx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Hi extends Rh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new qx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qx(e),this._firestoreClient=void 0,await e}}}function JD(i,e){const n=typeof i=="object"?i:CE(),r=typeof i=="string"?i:Zd,o=Pp(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=oA("firestore");c&&XD(o,...c)}return o}function Yc(i){if(i._terminated)throw new ce(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||WD(i),i._firestoreClient}function WD(i){var r,o,c;const e=i._freezeSettings(),n=(function(p,y,g,x){return new EI(p,y,g,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Iw(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new HD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(fn.fromBase64String(e))}catch(n){throw new ce(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qc(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Yt("string",Kn._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Hx(){return new Ba(fp)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oi._jsonSchemaVersion}}static fromJSON(e){if(qc(e,oi._jsonSchema))return new oi(e.latitude,e.longitude)}}oi._jsonSchemaVersion="firestore/geoPoint/1.0",oi._jsonSchema={type:Yt("string",oi._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qc(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new li(e.vectorValues);throw new ce(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Yt("string",li._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=/^__.*__$/;class e4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hc(e,this.data,n,this.fieldTransforms)}}class Dw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:i})}}class wg{constructor(e,n,r,o,c,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jw(this.Ac)&&ZD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nh(e)}Cc(e,n,r,o=!1){return new wg({Ac:e,methodName:n,Dc:r,path:hn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qa(i){const e=i._freezeSettings(),n=Nh(i._databaseId);return new t4(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Dh(i,e,n,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Ag("Data must be an object, but it was:",u,r);const p=Mw(r,u);let y,g;if(c.merge)y=new $n(u.fieldMask),g=u.fieldTransforms;else if(c.mergeFields){const x=[];for(const b of c.mergeFields){const T=Np(e,b,n);if(!u.contains(T))throw new ce(W.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);kw(x,T)||x.push(T)}y=new $n(x),g=u.fieldTransforms.filter((b=>y.covers(b.field)))}else y=null,g=u.fieldTransforms;return new e4(new Sn(p),y,g)}class jh extends bg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function Tg(i,e,n,r){const o=i.Cc(1,e,n);Ag("Data must be an object, but it was:",o,r);const c=[],u=Sn.empty();$r(r,((y,g)=>{const x=Ng(e,y,n);g=Tt(g);const b=o.yc(x);if(g instanceof jh)c.push(x);else{const T=Xc(g,b);T!=null&&(c.push(x),u.set(x,T))}}));const p=new $n(c);return new Dw(u,p,o.fieldTransforms)}function Sg(i,e,n,r,o,c){const u=i.Cc(1,e,n),p=[Np(e,r,n)],y=[o];if(c.length%2!=0)throw new ce(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(Np(e,c[T])),y.push(c[T+1]);const g=[],x=Sn.empty();for(let T=p.length-1;T>=0;--T)if(!kw(g,p[T])){const O=p[T];let L=y[T];L=Tt(L);const k=u.yc(O);if(L instanceof jh)g.push(O);else{const P=Xc(L,k);P!=null&&(g.push(O),x.set(O,P))}}const b=new $n(g);return new Dw(x,b,u.fieldTransforms)}function Ow(i,e,n,r=!1){return Xc(n,i.Cc(r?4:3,e))}function Xc(i,e){if(Vw(i=Tt(i)))return Ag("Unsupported field value:",e,i),Mw(i,e);if(i instanceof bg)return(function(r,o){if(!jw(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const p of r){let y=Xc(p,o.wc(u));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=yt.fromDate(r);return{timestampValue:rh(o.serializer,c)}}if(r instanceof yt){const c=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rh(o.serializer,c)}}if(r instanceof oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:Jb(o.serializer,r._byteString)};if(r instanceof Rt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ag(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof li)return(function(u,p){return{mapValue:{fields:{[Sb]:{stringValue:Ab},[eh]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return sg(p.serializer,g)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${vh(r)}`)})(i,e)}function Mw(i,e){const n={};return _b(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(i,((r,o)=>{const c=Xc(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function Vw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof yt||i instanceof oi||i instanceof Kn||i instanceof Rt||i instanceof bg||i instanceof li)}function Ag(i,e,n){if(!Vw(n)||!yb(n)){const r=vh(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Np(i,e,n){if((e=Tt(e))instanceof Ba)return e._internalPath;if(typeof e=="string")return Ng(i,e);throw uh("Field path arguments must be of type string or ",i,!1,void 0,n)}const n4=new RegExp("[~\\*/\\[\\]]");function Ng(i,e,n){if(e.search(n4)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Ba(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function uh(i,e,n,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||u)&&(y+=" (found",c&&(y+=` in field ${r}`),u&&(y+=` in document ${o}`),y+=")"),new ce(W.INVALID_ARGUMENT,p+i+y)}function kw(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s4 extends Oc{data(){return super.data()}}function Oh(i,e){return typeof e=="string"?Ng(i,e):e instanceof Ba?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cg{}class Mh extends Cg{}function Tn(i,e,...n){let r=[];e instanceof Cg&&r.push(e),r=r.concat(n),(function(c){const u=c.filter((y=>y instanceof Ig)).length,p=c.filter((y=>y instanceof Vh)).length;if(u>1||u>0&&p>0)throw new ce(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Vh extends Mh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vh(e,n,r)}_apply(e){const n=this._parse(e);return Lw(e._query,n),new Fi(e.firestore,e.converter,vp(e._query,n))}_parse(e){const n=qa(e.firestore);return(function(c,u,p,y,g,x,b){let T;if(g.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ce(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){Yx(b,x);const L=[];for(const k of b)L.push($x(y,c,k));T={arrayValue:{values:L}}}else T=$x(y,c,b)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||Yx(b,x),T=Ow(p,u,b,x==="in"||x==="not-in");return Kt.create(g,x,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function It(i,e,n){const r=e,o=Oh("where",i);return Vh._create(o,r,n)}class Ig extends Cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ig(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:js.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let u=o;const p=c.getFlattenedFilters();for(const y of p)Lw(u,y),u=vp(u,y)})(e._query,n),new Fi(e.firestore,e.converter,vp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rg extends Mh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rg(e,n)}_apply(e){const n=(function(o,c,u){if(o.startAt!==null)throw new ce(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(c,u)})(e._query,this._field,this._direction);return new Fi(e.firestore,e.converter,(function(o,c){const u=o.explicitOrderBy.concat([c]);return new Pa(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Gx(i,e="asc"){const n=e,r=Oh("orderBy",i);return Rg._create(r,n)}class Dg extends Mh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Dg(e,n,r)}_apply(e){return new Fi(e.firestore,e.converter,nh(e._query,this._limit,this._limitType))}}function Qx(i){return uI("limit",i),Dg._create("limit",i,"F")}class jg extends Mh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jg(e,n,r)}_apply(e){const n=r4(e,this.type,this._docOrFields,this._inclusive);return new Fi(e.firestore,e.converter,(function(o,c){return new Pa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)})(e._query,n))}}function Kx(...i){return jg._create("startAfter",i,!1)}function r4(i,e,n,r){if(n[0]=Tt(n[0]),n[0]instanceof Oc)return(function(c,u,p,y,g){if(!y)throw new ce(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const x=[];for(const b of Bo(c))if(b.field.isKeyField())x.push(th(u,y.key));else{const T=y.data.field(b.field);if(xh(T))throw new ce(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const O=b.field.canonicalString();throw new ce(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}x.push(T)}return new Xo(x,g)})(i._query,i.firestore._databaseId,e,n[0]._document,r);{const o=qa(i.firestore);return(function(u,p,y,g,x,b){const T=u.explicitOrderBy;if(x.length>T.length)throw new ce(W.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let L=0;L<x.length;L++){const k=x[L];if(T[L].field.isKeyField()){if(typeof k!="string")throw new ce(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof k}`);if(!ng(u)&&k.indexOf("/")!==-1)throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${k}' contains a slash.`);const P=u.path.child(at.fromString(k));if(!we.isDocumentKey(P))throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const G=new we(P);O.push(th(p,G))}else{const P=Ow(y,g,k);O.push(P)}}return new Xo(O,b)})(i._query,i.firestore._databaseId,o,e,n,r)}}function $x(i,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new ce(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ng(e)&&n.indexOf("/")!==-1)throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(at.fromString(n));if(!we.isDocumentKey(r))throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return th(i,new we(r))}if(n instanceof Rt)return th(i,n._key);throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(n)}.`)}function Yx(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lw(i,e){const n=(function(o,c){for(const u of o)for(const p of u.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Pw{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $r(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,o,c;const n=(c=(o=(r=e.fields)==null?void 0:r[eh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((u=>Vt(u.doubleValue)));return new li(n)}convertGeoPoint(e){return new oi(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Eh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const n=Br(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);Ye(iw(r),9688,{name:e});const o=new Cc(r.get(1),r.get(3)),c=new we(r.popFirst(5));return o.isEqual(n)||Ui(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class a4 extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends Oc{constructor(e,n,r,o,c,u){super(e,n,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Yt("string",Ur._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Bd extends Ur{data(e={}){return super.data(e)}}class Fo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Lo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bd(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((p=>{const y=new Bd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Lo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Bd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Lo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,x=-1;return p.type!==0&&(g=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),x=u.indexOf(p.doc.key)),{type:o4(p.type),doc:y,oldIndex:g,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(i){i=Jn(i,Rt);const e=Jn(i.firestore,Hi);return $D(Yc(e),i._key).then((n=>c4(e,i,n)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:Yt("string",Fo._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Og extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function gn(i){i=Jn(i,Fi);const e=Jn(i.firestore,Hi),n=Yc(e),r=new Og(e);return i4(i._query),YD(n,i._query).then((o=>new Fo(e,r,i,o)))}function l4(i,e,n){i=Jn(i,Rt);const r=Jn(i.firestore,Hi),o=kh(i.converter,e,n);return Jc(r,[Dh(qa(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,$t.none())])}function Cd(i,e,n,...r){i=Jn(i,Rt);const o=Jn(i.firestore,Hi),c=qa(o);let u;return u=typeof(e=Tt(e))=="string"||e instanceof Ba?Sg(c,"updateDoc",i._key,e,n,r):Tg(c,"updateDoc",i._key,e),Jc(o,[u.toMutation(i._key,$t.exists(!0))])}function Jx(i){return Jc(Jn(i.firestore,Hi),[new Gc(i._key,$t.none())])}function Zm(i,e){const n=Jn(i.firestore,Hi),r=yn(i),o=kh(i.converter,e);return Jc(n,[Dh(qa(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,$t.exists(!1))]).then((()=>r))}function Jc(i,e){return(function(r,o){const c=new ri;return r.asyncQueue.enqueueAndForget((async()=>OD(await QD(r),o,c))),c.promise})(Yc(i),e)}function c4(i,e,n){const r=n.docs.get(e._key),o=new Og(i);return new Ur(i,o,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qa(e)}set(e,n,r){this._verifyNotCommitted();const o=jr(e,this._firestore),c=kh(o.converter,n,r),u=Dh(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,r);return this._mutations.push(u.toMutation(o._key,$t.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const c=jr(e,this._firestore);let u;return u=typeof(n=Tt(n))=="string"||n instanceof Ba?Sg(this._dataReader,"WriteBatch.update",c._key,n,r,o):Tg(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(u.toMutation(c._key,$t.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Gc(n._key,$t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jr(i,e){if((i=Tt(i)).firestore!==e)throw new ce(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=qa(e)}get(e){const n=jr(e,this._firestore),r=new a4(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ae(24041);const c=o[0];if(c.isFoundDocument())return new Oc(this._firestore,r,c.key,c,n.converter);if(c.isNoDocument())return new Oc(this._firestore,r,n._key,null,n.converter);throw Ae(18433,{doc:c})}))}set(e,n,r){const o=jr(e,this._firestore),c=kh(o.converter,n,r),u=Dh(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,n,r,...o){const c=jr(e,this._firestore);let u;return u=typeof(n=Tt(n))=="string"||n instanceof Ba?Sg(this._dataReader,"Transaction.update",c._key,n,r,o):Tg(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,u),this}delete(e){const n=jr(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4 extends h4{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=jr(e,this._firestore),r=new Og(this._firestore);return super.get(e).then((o=>new Ur(this._firestore,r,n._key,o._document,new Lo(!1,!1),n.converter)))}}function Wx(i,e,n){i=Jn(i,Hi);const r={...u4,...n};return(function(c){if(c.maxAttempts<1)throw new ce(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,p){const y=new ri;return c.asyncQueue.enqueueAndForget((async()=>{const g=await KD(c);new FD(c.asyncQueue,g,p,u,y).ju()})),y.promise})(Yc(i),(o=>e(new f4(i,o))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(i){return Yc(i=Jn(i,Hi)),new d4(i,(e=>Jc(i,e)))}(function(e,n=!0){(function(o){il=o})(nl),Ho(new Da("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),p=new Hi(new tI(r.getProvider("auth-internal")),new iI(u,r.getProvider("app-check-internal")),(function(g,x){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cc(g.options.projectId,x)})(u,o),u);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Vr(X_,J_,e),Vr(X_,J_,"esm2020")})();const eE=Rr.firebase;let ep,Qn,pe;const m4=i=>i&&i.apiKey&&i.projectId&&i.appId;try{Rr.useFirebase&&m4(eE)?(ep=NE(eE),Qn=JC(ep),pe=JD(ep),console.log("Firebase initialized successfully.")):Rr.useFirebase?console.warn("Firebase `useFirebase` is true, but config keys are missing. Please check your .env.local file. Skipping Firebase Init."):console.log("`useFirebase` is false. Skipping Firebase Init.")}catch(i){console.error("Error initializing Firebase:",i)}class p4{constructor(){this.mapDocToEvent=e=>({id:e.id,...e.data()}),this.mapAuthError=e=>({"auth/invalid-credential":"Email ou senha incorretos.","auth/user-not-found":"Email ou senha incorretos.","auth/wrong-password":"Email ou senha incorretos.","auth/invalid-email":"O formato do email  invlido.","auth/user-disabled":"Esta conta foi desativada.","auth/email-already-in-use":"Email j cadastrado.","auth/too-many-requests":"Muitas tentativas. Tente novamente mais tarde.","auth/network-request-failed":"Erro de conexo.","auth/popup-closed-by-user":"Login cancelado.","auth/popup-blocked":"O navegador bloqueou a janela de login.","auth/operation-not-allowed":"Mtodo de login desabilitado.","auth/unauthorized-domain":"Domnio no autorizado.","permission-denied":"Permisso negada.",unavailable:"Servio indisponvel. Tente mais tarde."})[e]||`Erro inesperado (${e}).`}async login(e,n){if(!Qn)throw new Error("Servio de autenticao no inicializado.");if(!n)throw new Error("A senha  obrigatria.");try{await U_(Qn,Xd);const o=(await k2(Qn,e,n)).user;return this._fetchUserProfile(o)}catch(r){throw console.error("Erro no Login Firebase:",r),new Error(this.mapAuthError(r.code))}}async loginWithGoogle(){if(!Qn)throw new Error("Servio de autenticao no inicializado.");try{await U_(Qn,Xd);const e=new ji;await aC(Qn,e)}catch(e){throw console.error("Erro ao iniciar Login com Google:",e),new Error(this.mapAuthError(e.code))}}async _fetchUserProfile(e){if(!pe)throw new Error("Banco de dados no inicializado.");const n=yn(pe,"users",e.uid);let r;try{r=await Xx(n)}catch(o){if(console.error("Erro ao acessar Firestore:",o),o.code==="permission-denied")return console.warn("Permisso negada ao ler perfil. Retornando dados bsicos."),{uid:e.uid,email:e.email||"",role:nt.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(r.exists()){const o=r.data();return{uid:e.uid,email:e.email||"",name:o.name||e.displayName,role:o.role||nt.USER,rm:o.rm,courseId:o.courseId,classId:o.classId,isOnboarded:o.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:nt.USER,isOnboarded:!1}}async logout(){Qn&&await z2(Qn)}onAuthStateChanged(e){return Qn?U2(Qn,async n=>{if(n)try{const r=await this._fetchUserProfile(n);e(r)}catch(r){console.error("Erro ao carregar perfil no listener:",r),e({uid:n.uid,email:n.email||"",role:nt.USER,isOnboarded:!1})}else e(null)}):()=>{}}async updateUserProfile(e,n){if(!pe)throw new Error("Banco de dados no inicializado.");if(n.rm)try{const c=Ht(pe,"users"),u=Tn(c,It("rm","==",n.rm));if((await gn(u)).docs.find(g=>g.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(c){if(c.code!=="permission-denied")throw c;console.warn("Pulei validao de RM nico devido a permisses.")}const r=yn(pe,"users",e),o={...n,updatedAt:new Date().toISOString()};n.name&&n.rm&&(o.isOnboarded=!0);try{await l4(r,o,{merge:!0})}catch(c){throw console.error("Erro ao atualizar perfil:",c),new Error("No foi possvel salvar seus dados. Verifique sua conexo.")}return{...n,uid:e,email:"",role:nt.USER,isOnboarded:!0}}async getUserProfile(e){if(!pe||!Qn)throw new Error("Servio de autenticao ou banco de dados no inicializado.");const n=Qn.currentUser;return!n||n.uid!==e?(console.warn("Tentativa de buscar perfil de um usurio diferente/deslogado."),null):this._fetchUserProfile(n)}async getUsers(e){if(!pe)return{data:[],nextCursor:void 0};const{limit:n,cursor:r,filters:o}=e,{searchTerm:c,role:u,courseId:p,classId:y}=o,g=[Gx("email")];u&&g.push(It("role","==",u)),p&&g.push(It("courseId","==",p)),y&&g.push(It("classId","==",y)),g.push(Qx(n)),r&&g.push(Kx(r));try{const x=Tn(Ht(pe,"users"),...g),b=await gn(x);let T=b.docs.map(L=>({uid:L.id,...L.data()}));c&&(T=T.filter(L=>{var k,P;return((k=L.name)==null?void 0:k.toLowerCase().includes(c.toLowerCase()))||L.email.toLowerCase().includes(c.toLowerCase())||((P=L.rm)==null?void 0:P.includes(c))}));const O=b.docs.length===n?b.docs[b.docs.length-1]:void 0;return{data:T,nextCursor:O}}catch(x){return console.error("Erro ao buscar usurios paginados:",x),x.code==="failed-precondition"&&alert("ndice do Firestore ausente. Verifique o console para o link de criao do ndice."),{data:[],nextCursor:void 0}}}async deleteUser(e){pe&&await Jx(yn(pe,"users",e))}async updateUserRole(e,n){if(!pe)return;const r=yn(pe,"users",e);await Cd(r,{role:n})}async getCourses(){return pe?(await gn(Ht(pe,"courses"))).docs.map(n=>({id:n.id,...n.data()})):[]}async addCourse(e){if(!pe)throw new Error("DB not init");return{id:(await Zm(Ht(pe,"courses"),{name:e})).id,name:e}}async updateCourse(e,n){pe&&await Cd(yn(pe,"courses",e),{name:n})}async deleteCourse(e){if(!pe)return;const n=Zx(pe),r=yn(pe,"courses",e);n.delete(r);const o=Tn(Ht(pe,"classes"),It("courseId","==",e));(await gn(o)).forEach(u=>n.delete(u.ref)),await n.commit()}async getClasses(e){if(!pe)return[];let n=e?Tn(Ht(pe,"classes"),It("courseId","==",e)):Ht(pe,"classes");return(await gn(n)).docs.map(o=>({id:o.id,...o.data()}))}async addClass(e,n){if(!pe)throw new Error("DB not init");return{id:(await Zm(Ht(pe,"classes"),{courseId:e,name:n})).id,courseId:e,name:n}}async updateClass(e,n){pe&&await Cd(yn(pe,"classes",e),{name:n})}async deleteClass(e){pe&&await Jx(yn(pe,"classes",e))}async getEvents(e){if(!pe)return{data:[],nextCursor:void 0};const{limit:n,cursor:r,filters:o}=e,{searchTerm:c,visibility:u,course:p}=o,y=await this.getClasses(),g=[Gx("createdAt","desc")];u&&g.push(It("visibility","==",u)),p&&u==="course"&&g.push(It("allowedCourses","array-contains",p)),g.push(Qx(n)),r&&g.push(Kx(r));try{const x=Tn(Ht(pe,"events"),...g),b=await gn(x);let T=b.docs.map(L=>this.mapDocToEvent(L));c&&(T=T.filter(L=>L.name.toLowerCase().includes(c.toLowerCase())||L.description.toLowerCase().includes(c.toLowerCase()))),p&&u==="class"&&(T=T.filter(L=>{var k;return((k=L.allowedClasses)==null?void 0:k.some(P=>{const G=y.find(J=>J.id===P);return(G==null?void 0:G.courseId)===p}))||!1}));const O=b.docs.length===n?b.docs[b.docs.length-1]:void 0;return{data:T,nextCursor:O}}catch(x){return console.error("Erro ao buscar eventos paginados:",x),x.code==="failed-precondition"&&alert("ndice do Firestore ausente. Verifique o console."),{data:[],nextCursor:void 0}}}async getEventById(e){if(!pe)return;const n=yn(pe,"events",e),r=await Xx(n);return r.exists()?this.mapDocToEvent(r):void 0}async getEventsByIds(e){if(!pe||e.length===0)return[];const n=30,r=[];for(let o=0;o<e.length;o+=n){const c=e.slice(o,o+n),u=Tn(Ht(pe,"events"),It(Hx(),"in",c)),y=(await gn(u)).docs.map(g=>this.mapDocToEvent(g));r.push(...y)}return r}async getEventsByParentId(e){if(!pe)return[];const n=Tn(Ht(pe,"events"),It("parentId","==",e));return(await gn(n)).docs.map(o=>this.mapDocToEvent(o))}async getAvailableEventsForUser(e){if(!pe)return[];const n=[gn(Tn(Ht(pe,"events"),It("visibility","==","public")))];e.courseId&&n.push(gn(Tn(Ht(pe,"events"),It("visibility","==","course"),It("allowedCourses","array-contains",e.courseId)))),e.classId&&n.push(gn(Tn(Ht(pe,"events"),It("visibility","==","class"),It("allowedClasses","array-contains",e.classId))));const r=await Promise.all(n),o=new Map;return r.forEach(c=>c.forEach(u=>{o.has(u.id)||o.set(u.id,this.mapDocToEvent(u))})),Array.from(o.values())}async getPublicEvents(){if(!pe)return[];const e=Tn(Ht(pe,"events"),It("visibility","==","public"));return(await gn(e)).docs.map(r=>this.mapDocToEvent(r))}async createEvent(e){if(!pe)return;const{id:n,...r}=e,o=JSON.parse(JSON.stringify(r));await Zm(Ht(pe,"events"),o)}async updateEvent(e){if(!pe)return;const{id:n,...r}=e;await Cd(yn(pe,"events",n),JSON.parse(JSON.stringify(r)))}async deleteEvent(e){if(!pe)return;const n=Zx(pe);n.delete(yn(pe,"events",e));const r=Tn(Ht(pe,"events"),It("parentId","==",e));(await gn(r)).forEach(c=>n.delete(c.ref)),await n.commit()}async getEnrollmentsForUser(e){if(!pe)return[];const n=Tn(Ht(pe,"enrollments"),It("userId","==",e),It("status","==",hs.CONFIRMED));return(await gn(n)).docs.map(o=>({id:o.id,...o.data()}))}async getUserEnrollmentsDetails(e){const n=await this.getEnrollmentsForUser(e),r=[];for(const o of n){const c=await this.getEventById(o.eventId);if(c){const u=c.sessions.find(p=>p.id===o.sessionId);u&&r.push({enrollmentId:o.id,eventName:c.name,eventLocation:c.location,sessionDate:u.date,sessionTime:`${u.startTime} - ${u.endTime}`,enrolledAt:o.enrolledAt})}}return r}async getEnrichedEnrollments(e){if(!pe)return[];const n=await this.getEventById(e);if(!n)return[];const r=Tn(Ht(pe,"enrollments"),It("eventId","==",e),It("status","==",hs.CONFIRMED)),c=(await gn(r)).docs.map(g=>({id:g.id,...g.data()}));if(c.length===0)return[];const u=[...new Set(c.map(g=>g.userId))],p=new Map,y=30;for(let g=0;g<u.length;g+=y){const x=u.slice(g,g+y),b=Tn(Ht(pe,"users"),It(Hx(),"in",x));(await gn(b)).forEach(O=>p.set(O.id,{uid:O.id,...O.data()}))}return c.map(g=>{const x=p.get(g.userId)||{},b=n.sessions.find(T=>T.id===g.sessionId);return{id:g.id,user:{uid:g.userId,name:x.name||"Desconhecido",email:x.email||"",rm:x.rm||""},session:{id:b==null?void 0:b.id,date:b==null?void 0:b.date,startTime:b==null?void 0:b.startTime,endTime:b==null?void 0:b.endTime},status:g.status,enrolledAt:g.enrolledAt}})}async getEnrollmentDetailsForEvent(e){return(await this.getEnrichedEnrollments(e)).map(r=>({Nome:r.user.name,Email:r.user.email,RM:r.user.rm,SessaoData:r.session.date,SessaoHora:r.session.startTime,Status:r.status,DataInscricao:new Date(r.enrolledAt).toLocaleString("pt-BR")}))}async createEnrollment(e,n,r){if(!pe)throw new Error("Banco de dados no inicializado.");const o=await this.getEnrollmentsForUser(e),c=[...new Set(o.map(k=>k.eventId))],[u,p]=await Promise.all([this.getEventsByIds(c),this.getEventById(n)]);if(!p)throw new Error("Evento no encontrado.");const y=new Map(u.map(k=>[k.id,k])),g=p.sessions.find(k=>k.id===r);if(!g)throw new Error("Sesso no encontrada.");const x=Ir(g.startTime),b=Ir(g.endTime);for(const k of o){if(k.eventId===n)throw new Error("Voc j est inscrito neste evento.");const P=y.get(k.eventId);if(!P)continue;const G=P.sessions.find(J=>J.id===k.sessionId);if((G==null?void 0:G.date)===g.date){const J=Ir(G.startTime),Y=Ir(G.endTime);if(x<Y&&J<b)throw new Error(`CONFLICT|${P.name}|${G.startTime}|${G.endTime}`)}}const T=`${e}_${n}`,O=yn(pe,"enrollments",T),L=yn(pe,"events",n);return await Wx(pe,async k=>{const[P,G]=await Promise.all([k.get(O),k.get(L)]);if(P.exists()&&P.data().status===hs.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");if(!G.exists())throw new Error("Evento no existe mais.");const J=G.data(),Y=J.sessions.findIndex(ye=>ye.id===r);if(Y===-1)throw new Error("Sesso invlida.");if(J.sessions[Y].filled>=J.sessions[Y].capacity)throw new Error("Esta sesso atingiu a capacidade mxima.");const de=[...J.sessions];de[Y]={...de[Y],filled:de[Y].filled+1},k.update(L,{sessions:de}),k.set(O,{userId:e,eventId:n,sessionId:r,status:hs.CONFIRMED,enrolledAt:new Date().toISOString()})}),{id:T,userId:e,eventId:n,sessionId:r,status:hs.CONFIRMED,enrolledAt:new Date().toISOString()}}async cancelEnrollment(e){if(!pe)return;const n=yn(pe,"enrollments",e);await Wx(pe,async r=>{const o=await r.get(n);if(!o.exists())return;const{eventId:c,sessionId:u}=o.data(),p=yn(pe,"events",c),y=await r.get(p);if(y.exists()){const g=y.data(),x=g.sessions.findIndex(b=>b.id===u);if(x!==-1&&g.sessions[x].filled>0){const b=[...g.sessions];b[x]={...b[x],filled:b[x].filled-1},r.update(p,{sessions:b})}}r.delete(n)})}async resetAndSeedData(){alert("A funo de RESET est desabilitada no modo Firebase por segurana.")}}const g4=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Design Digital"},{id:"c3",name:"Administrao"}],y4=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DD-2024-A"},{id:"t4",courseId:"c3",name:"ADM-2024-A"}],fe={USERS:"eduevent_users",EVENTS:"eduevent_events",ENROLLMENTS:"eduevent_enrollments",CURRENT_USER:"eduevent_current_user",COURSES:"eduevent_courses",CLASSES:"eduevent_classes"},Gt=i=>new Promise(e=>setTimeout(e,i));class v4{constructor(){this.authListeners=[],localStorage.getItem(fe.COURSES)||localStorage.setItem(fe.COURSES,JSON.stringify(g4)),localStorage.getItem(fe.CLASSES)||localStorage.setItem(fe.CLASSES,JSON.stringify(y4))}notifyAuthListeners(e){this.authListeners.forEach(n=>n(e))}async login(e,n){await Gt(500);let o=this.getItems(fe.USERS).find(c=>c.email===e);return o||(o={uid:`user_${Date.now()}`,email:e,role:e.includes("admin")?nt.ADMIN:nt.USER,isOnboarded:!1},this.saveItem(fe.USERS,o)),localStorage.setItem(fe.CURRENT_USER,JSON.stringify(o)),this.notifyAuthListeners(o),o}async loginWithGoogle(){await Gt(800);const e="google.mock@example.com";let r=this.getItems(fe.USERS).find(o=>o.email===e);r||(r={uid:`user_google_${Date.now()}`,email:e,name:"Google Mock User",role:nt.USER,isOnboarded:!1},this.saveItem(fe.USERS,r)),localStorage.setItem(fe.CURRENT_USER,JSON.stringify(r)),this.notifyAuthListeners(r)}async logout(){localStorage.removeItem(fe.CURRENT_USER),this.notifyAuthListeners(null)}onAuthStateChanged(e){this.authListeners.push(e);const n=localStorage.getItem(fe.CURRENT_USER),r=n?JSON.parse(n):null;return e(r),()=>{this.authListeners=this.authListeners.filter(o=>o!==e)}}async updateUserProfile(e,n){await Gt(600);const r=this.getItems(fe.USERS),o=r.findIndex(y=>y.uid===e);if(o===-1)throw new Error("Usurio no encontrado");if(n.rm&&r.some(g=>g.rm===n.rm&&g.uid!==e))throw new Error("Este RM j est cadastrado para outro usurio.");const c={...r[o],...n,isOnboarded:!0};r[o]=c,localStorage.setItem(fe.USERS,JSON.stringify(r));const u=localStorage.getItem(fe.CURRENT_USER),p=u?JSON.parse(u):null;return p&&p.uid===e&&(localStorage.setItem(fe.CURRENT_USER,JSON.stringify(c)),this.notifyAuthListeners(c)),c}async getUserProfile(e){return await Gt(100),this.getItems(fe.USERS).find(o=>o.uid===e)||null}async getUsers(e){await Gt(500);const n=this.getItems(fe.USERS),{searchTerm:r,role:o,courseId:c,classId:u}=e.filters,p=n.filter(b=>{var P,G;const T=r?((P=b.name)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))||b.email.toLowerCase().includes(r.toLowerCase())||((G=b.rm)==null?void 0:G.includes(r)):!0,O=o?b.role===o:!0,L=c?b.courseId===c:!0,k=u?b.classId===u:!0;return T&&O&&L&&k}),y=e.cursor||0,g=p.slice(y,y+e.limit),x=y+g.length;return{data:g,nextCursor:x<p.length?x:void 0}}async deleteUser(e){await Gt(500);let n=this.getItems(fe.USERS);n=n.filter(r=>r.uid!==e),localStorage.setItem(fe.USERS,JSON.stringify(n))}async updateUserRole(e,n){await Gt(300);const r=this.getItems(fe.USERS),o=r.findIndex(c=>c.uid===e);o!==-1&&(r[o].role=n,localStorage.setItem(fe.USERS,JSON.stringify(r)))}async getCourses(){return this.getItems(fe.COURSES)}async addCourse(e){const n=this.getItems(fe.COURSES),r={id:`c_${Date.now()}`,name:e};return n.push(r),localStorage.setItem(fe.COURSES,JSON.stringify(n)),r}async updateCourse(e,n){const r=this.getItems(fe.COURSES),o=r.findIndex(c=>c.id===e);o!==-1&&(r[o].name=n,localStorage.setItem(fe.COURSES,JSON.stringify(r)))}async deleteCourse(e){let n=this.getItems(fe.COURSES);n=n.filter(o=>o.id!==e),localStorage.setItem(fe.COURSES,JSON.stringify(n));let r=this.getItems(fe.CLASSES);r=r.filter(o=>o.courseId!==e),localStorage.setItem(fe.CLASSES,JSON.stringify(r))}async getClasses(e){const n=this.getItems(fe.CLASSES);return e?n.filter(r=>r.courseId===e):n}async addClass(e,n){const r=this.getItems(fe.CLASSES),o={id:`t_${Date.now()}`,courseId:e,name:n};return r.push(o),localStorage.setItem(fe.CLASSES,JSON.stringify(r)),o}async updateClass(e,n){const r=this.getItems(fe.CLASSES),o=r.findIndex(c=>c.id===e);o!==-1&&(r[o].name=n,localStorage.setItem(fe.CLASSES,JSON.stringify(r)))}async deleteClass(e){let n=this.getItems(fe.CLASSES);n=n.filter(r=>r.id!==e),localStorage.setItem(fe.CLASSES,JSON.stringify(n))}async getEvents(e){await Gt(400);const n=this.getItems(fe.EVENTS),{searchTerm:r,visibility:o,course:c}=e.filters,u=this.getItems(fe.CLASSES),p=n.filter(b=>{var k,P;const T=r?b.name.toLowerCase().includes(r.toLowerCase())||b.description.toLowerCase().includes(r.toLowerCase()):!0,O=o?b.visibility===o:!0;let L=!0;return c&&(b.visibility==="public"?L=!1:b.visibility==="course"?L=((k=b.allowedCourses)==null?void 0:k.includes(c))||!1:b.visibility==="class"&&(L=((P=b.allowedClasses)==null?void 0:P.some(G=>{const J=u.find(Y=>Y.id===G);return(J==null?void 0:J.courseId)===c}))||!1)),T&&O&&L}),y=e.cursor||0,g=p.slice(y,y+e.limit),x=y+g.length;return{data:g,nextCursor:x<p.length?x:void 0}}async getEventById(e){return await Gt(200),this.getItems(fe.EVENTS).find(r=>r.id===e)}async getEventsByIds(e){return await Gt(200),this.getItems(fe.EVENTS).filter(r=>e.includes(r.id))}async getEventsByParentId(e){return await Gt(200),this.getItems(fe.EVENTS).filter(r=>r.parentId===e)}async getAvailableEventsForUser(e){return await Gt(400),this.getItems(fe.EVENTS).filter(r=>{var o,c;return r.visibility==="public"?!0:r.visibility==="course"?e.courseId?(o=r.allowedCourses)==null?void 0:o.includes(e.courseId):!1:r.visibility==="class"&&e.classId?(c=r.allowedClasses)==null?void 0:c.includes(e.classId):!1})}async getPublicEvents(){return await Gt(400),this.getItems(fe.EVENTS).filter(n=>n.visibility==="public")}async createEvent(e){await Gt(600);const n=this.getItems(fe.EVENTS);n.push(e),localStorage.setItem(fe.EVENTS,JSON.stringify(n))}async updateEvent(e){await Gt(500);const n=this.getItems(fe.EVENTS),r=n.findIndex(o=>o.id===e.id);if(r!==-1)n[r]=e,localStorage.setItem(fe.EVENTS,JSON.stringify(n));else throw new Error("Evento no encontrado para atualizao")}async deleteEvent(e){await Gt(400);let n=this.getItems(fe.EVENTS);n=n.filter(r=>r.id!==e&&r.parentId!==e),localStorage.setItem(fe.EVENTS,JSON.stringify(n))}async getEnrollmentsForUser(e){return await Gt(300),this.getItems(fe.ENROLLMENTS).filter(r=>r.userId===e&&r.status!==hs.CANCELED)}async getUserEnrollmentsDetails(e){const n=this.getItems(fe.ENROLLMENTS).filter(o=>o.userId===e&&o.status===hs.CONFIRMED),r=this.getItems(fe.EVENTS);return n.map(o=>{const c=r.find(p=>p.id===o.eventId),u=c==null?void 0:c.sessions.find(p=>p.id===o.sessionId);return!c||!u?null:{enrollmentId:o.id,eventName:c.name,eventLocation:c.location,sessionDate:u.date,sessionTime:`${u.startTime} - ${u.endTime}`,enrolledAt:o.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(e){const n=this.getItems(fe.ENROLLMENTS).filter(c=>c.eventId===e&&c.status===hs.CONFIRMED),r=this.getItems(fe.USERS),o=this.getItems(fe.EVENTS).find(c=>c.id===e);return n.map(c=>{const u=r.find(y=>y.uid===c.userId),p=o==null?void 0:o.sessions.find(y=>y.id===c.sessionId);return{id:c.id,user:{uid:u==null?void 0:u.uid,name:(u==null?void 0:u.name)||"Desconhecido",email:(u==null?void 0:u.email)||"",rm:(u==null?void 0:u.rm)||""},session:{id:p==null?void 0:p.id,date:p==null?void 0:p.date,startTime:p==null?void 0:p.startTime,endTime:p==null?void 0:p.endTime},status:c.status,enrolledAt:c.enrolledAt}})}async getEnrollmentDetailsForEvent(e){const n=this.getItems(fe.ENROLLMENTS).filter(c=>c.eventId===e&&c.status===hs.CONFIRMED),r=this.getItems(fe.USERS),o=this.getItems(fe.EVENTS).find(c=>c.id===e);return n.map(c=>{const u=r.find(y=>y.uid===c.userId),p=o==null?void 0:o.sessions.find(y=>y.id===c.sessionId);return{Nome:(u==null?void 0:u.name)||"Desconhecido",Email:(u==null?void 0:u.email)||"",RM:(u==null?void 0:u.rm)||"",SessaoData:nn(p==null?void 0:p.date),SessaoHora:(p==null?void 0:p.startTime)||"",Status:c.status,DataInscricao:new Date(c.enrolledAt).toLocaleString("pt-BR")}})}async createEnrollment(e,n,r){await Gt(800);const o=this.getItems(fe.EVENTS),c=o.findIndex(J=>J.id===n);if(c===-1)throw new Error("Evento no encontrado");const u=o[c].sessions.findIndex(J=>J.id===r);if(u===-1)throw new Error("Sesso no encontrada");const p=o[c].sessions[u];if(p.filled>=p.capacity)throw new Error("A sesso est lotada");const y=this.getItems(fe.ENROLLMENTS);if(y.find(J=>J.userId===e&&J.eventId===n&&J.status===hs.CONFIRMED))throw new Error("Voc j est inscrito neste evento");const x=await this.getEnrollmentsForUser(e),b=[...new Set(x.map(J=>J.eventId))],T=await this.getEventsByIds(b),O=new Map(T.map(J=>[J.id,J])),L=p.date,k=Ir(p.startTime),P=Ir(p.endTime);for(const J of x){const Y=O.get(J.eventId);if(!Y)continue;const de=Y.sessions.find(ye=>ye.id===J.sessionId);if(de&&de.date===L){const ye=Ir(de.startTime),le=Ir(de.endTime);if(k<le&&ye<P)throw new Error(`CONFLICT|${Y.name}|${de.startTime}|${de.endTime}`)}}const G={id:`enr_${Date.now()}`,userId:e,eventId:n,sessionId:r,status:hs.CONFIRMED,enrolledAt:new Date().toISOString()};return y.push(G),localStorage.setItem(fe.ENROLLMENTS,JSON.stringify(y)),o[c].sessions[u].filled+=1,localStorage.setItem(fe.EVENTS,JSON.stringify(o)),G}async cancelEnrollment(e){await Gt(500);const n=this.getItems(fe.ENROLLMENTS),r=n.findIndex(p=>p.id===e);if(r===-1)throw new Error("Inscrio no encontrada");const o=n[r],c=this.getItems(fe.EVENTS),u=c.findIndex(p=>p.id===o.eventId);if(u!==-1){const p=c[u].sessions.findIndex(y=>y.id===o.sessionId);p!==-1&&(c[u].sessions[p].filled=Math.max(0,c[u].sessions[p].filled-1),localStorage.setItem(fe.EVENTS,JSON.stringify(c)))}n.splice(r,1),localStorage.setItem(fe.ENROLLMENTS,JSON.stringify(n))}async resetAndSeedData(){localStorage.clear(),await Gt(500);const e=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Direito"},{id:"c3",name:"Medicina"},{id:"c4",name:"Design"}];localStorage.setItem(fe.COURSES,JSON.stringify(e));const n=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DIR-2024-A"},{id:"t4",courseId:"c3",name:"MED-2024-A"},{id:"t5",courseId:"c4",name:"DSG-2024-A"}];localStorage.setItem(fe.CLASSES,JSON.stringify(n));const r=[{uid:"u_admin",email:"admin@school.com",name:"Administrador Sistema",role:nt.ADMIN,isOnboarded:!0},{uid:"u_student1",email:"aluno.cc@school.com",name:"Joo da Silva",rm:"10001",courseId:"c1",classId:"t1",role:nt.USER,isOnboarded:!0},{uid:"u_student2",email:"aluno.dir@school.com",name:"Maria Souza",rm:"20002",courseId:"c2",classId:"t3",role:nt.USER,isOnboarded:!0},{uid:"u_student3",email:"aluno.med@school.com",name:"Pedro Santos",rm:"30003",courseId:"c3",classId:"t4",role:nt.USER,isOnboarded:!0}];localStorage.setItem(fe.USERS,JSON.stringify(r));const o=new Date,c=g=>g.toISOString().split("T")[0],u=new Date(o);u.setDate(o.getDate()+7);const p=new Date(o);p.setDate(o.getDate()+30);const y=[{id:"evt_1",name:"Feira de Profisses 2024",description:"Evento aberto a toda a comunidade para conhecer os cursos.",location:"Ginsio Principal",visibility:"public",sessions:[{id:"s1",date:c(u),startTime:"09:00",endTime:"17:00",capacity:500,filled:45}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_2",name:"Hackathon de Inovao",description:"Maratona de programao exclusiva para alunos de Computao.",location:"Laboratrio 3",visibility:"course",allowedCourses:["c1"],sessions:[{id:"s2",date:c(u),startTime:"18:00",endTime:"22:00",capacity:50,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_3",name:"Aula Magna de Anatomia",description:"Aula especial com convidados internacionais.",location:"Auditrio B",visibility:"class",allowedClasses:["t4"],sessions:[{id:"s3",date:c(p),startTime:"14:00",endTime:"16:00",capacity:100,filled:10}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_parent_1",name:"Semana Acadmica Integrada",description:"Uma semana de eventos para todos os cursos.",location:"Campus Central",visibility:"public",sessions:[{id:"s_p1",date:c(u),startTime:"08:00",endTime:"10:00",capacity:200,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_child_1",parentId:"evt_parent_1",name:"Workshop de IA (Sub-evento)",description:"Introduo a Redes Neurais.",location:"Sala 101",visibility:"public",sessions:[{id:"s_c1",date:c(u),startTime:"10:30",endTime:"12:00",capacity:30,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_child_2",parentId:"evt_parent_1",name:"Palestra: Direito Digital (Sub-evento)",description:"Impactos da tecnologia na legislao.",location:"Auditrio A",visibility:"public",sessions:[{id:"s_c2",date:c(u),startTime:"14:00",endTime:"16:00",capacity:100,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()}];localStorage.setItem(fe.EVENTS,JSON.stringify(y))}getItems(e){const n=localStorage.getItem(e);return n?JSON.parse(n):[]}saveItem(e,n){const r=this.getItems(e);r.push(n),localStorage.setItem(e,JSON.stringify(r))}}const _4=()=>Rr.useFirebase?new p4:new v4,Ve=_4(),Uw=R.createContext(void 0),x4=({children:i})=>{const[e,n]=R.useState(null),[r,o]=R.useState(!0);R.useEffect(()=>{const g=Ve.onAuthStateChanged(x=>{n(x),o(!1)});return()=>g()},[]);const c=async(g,x)=>{o(!0);try{await Ve.login(g,x)}catch(b){throw console.error(b),o(!1),b}},u=async()=>{o(!0);try{await Ve.loginWithGoogle()}catch(g){throw console.error(g),o(!1),g}},p=async()=>{o(!0),await Ve.logout()},y=async()=>{if(e){o(!0);try{const g=await Ve.getUserProfile(e.uid);n(g)}catch(g){console.error("Falha ao atualizar o perfil",g)}finally{o(!1)}}};return f.jsx(Uw.Provider,{value:{user:e,loading:r,login:c,loginWithGoogle:u,logout:p,refreshProfile:y},children:i})},Gi=()=>{const i=R.useContext(Uw);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},Sr=({children:i})=>{const{user:e,logout:n}=Gi(),r=Qr(),o=Bi(),[c,u]=R.useState(!1),p=async()=>{await n(),r("/")},y=x=>o.pathname===x?"bg-indigo-50 border-primary text-primary":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700",g=x=>o.pathname===x?"border-primary text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700";return e?f.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[f.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsx(gt,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight",children:"EduEvent"})}),f.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[f.jsx(gt,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/dashboard")}`,children:"Eventos"}),f.jsx(gt,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===nt.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx(gt,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/admin/events")}`,children:"Admin Eventos"}),f.jsx(gt,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/admin/courses")}`,children:"Admin Cursos"}),f.jsx(gt,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${g("/admin/users")}`,children:"Admin Usurios"}),f.jsx(gt,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 ${g("/admin/dev")}`,children:"Desenvolvimento"})]})]})]}),f.jsx("div",{className:"hidden sm:flex items-center",children:f.jsxs("div",{className:"flex-shrink-0",children:[f.jsxs("span",{className:"text-sm text-gray-500 mr-4",children:["Ol, ",e.name||e.email]}),f.jsx("button",{onClick:p,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none",children:"Sair"})]})}),f.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:f.jsxs("button",{onClick:()=>u(!c),type:"button",className:"bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[f.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),c?f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),c&&f.jsxs("div",{className:"sm:hidden border-t border-gray-200",id:"mobile-menu",children:[f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsx(gt,{to:"/dashboard",onClick:()=>u(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/dashboard")}`,children:"Eventos"}),f.jsx(gt,{to:"/my-enrollments",onClick:()=>u(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===nt.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"pt-4 pb-2",children:f.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),f.jsx(gt,{to:"/admin/events",onClick:()=>u(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/admin/events")}`,children:"Gerenciar Eventos"}),f.jsx(gt,{to:"/admin/courses",onClick:()=>u(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/admin/courses")}`,children:"Gerenciar Cursos"}),f.jsx(gt,{to:"/admin/users",onClick:()=>u(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${y("/admin/users")}`,children:"Gerenciar Usurios"}),f.jsx(gt,{to:"/admin/dev",onClick:()=>u(!1),className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300",children:"Desenvolvimento"})]})]}),f.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200",children:[f.jsxs("div",{className:"flex items-center px-4",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("div",{className:"text-base font-medium text-gray-800",children:e.name||"Usurio"}),f.jsx("div",{className:"text-sm font-medium text-gray-500",children:e.email})]})]}),f.jsx("div",{className:"mt-3 space-y-1",children:f.jsx("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",children:"Sair do Sistema"})})]})]})]}),f.jsx("main",{className:"flex-1 py-6",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})]}):f.jsx(f.Fragment,{children:i})},E4=()=>{const[i,e]=R.useState(""),[n,r]=R.useState(""),{user:o,loading:c,login:u,loginWithGoogle:p}=Gi(),y=Qr(),[g,x]=R.useState(""),[b,T]=R.useState(!1);R.useEffect(()=>{!c&&o&&y("/dashboard")},[o,c,y]);const O=async k=>{k.preventDefault(),x(""),T(!0);try{await u(i,n)}catch(P){console.error(P),x(P.message||"Falha no login. Verifique suas credenciais.")}finally{T(!1)}},L=async()=>{x(""),T(!0);try{await p()}catch(k){x(k.message||"Erro ao autenticar com Google"),T(!1)}};return c||!c&&o?f.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:"Verificando sesso..."}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[f.jsx("div",{className:"flex justify-start",children:f.jsxs(gt,{to:"/",className:"flex items-center text-sm text-gray-500 hover:text-primary transition-colors font-medium",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-4xl font-bold text-primary",children:"EduEvent"}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Entre na sua conta"}),f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Rr.useFirebase?"Utilize suas credenciais ou entre com o Google.":'Ou use "admin@school.com" para testar recursos de Admin.'})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:O,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Endereo de email"}),f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Endereo de email",value:i,onChange:k=>e(k.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:Rr.useFirebase,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:Rr.useFirebase?"Sua senha":"Senha (Opcional no Mock)",value:n,onChange:k=>r(k.target.value)})]})]}),g&&f.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded border border-red-200",children:g}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:b,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70",children:b?"Entrando...":"Entrar"})}),f.jsxs("div",{className:"relative my-4",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-300"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Ou continue com"})})]}),f.jsxs("button",{type:"button",onClick:L,disabled:b,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70",children:[f.jsxs("svg",{className:"h-5 w-5 mr-2","aria-hidden":"true",viewBox:"0 0 24 24",children:[f.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),f.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),f.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),f.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Entrar com Google"]})]}),!Rr.useFirebase&&f.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:[f.jsx("p",{children:"Credenciais de Demonstrao (Mock):"}),f.jsxs("ul",{className:"mt-1",children:[f.jsx("li",{onClick:()=>e("student@school.com"),className:"cursor-pointer hover:underline text-indigo-600",children:"student@school.com (Usurio)"}),f.jsx("li",{onClick:()=>e("admin@school.com"),className:"cursor-pointer hover:underline text-indigo-600",children:"admin@school.com (Admin)"})]})]})]})})},b4=()=>{const{user:i,refreshProfile:e}=Gi(),n=Qr(),[r,o]=R.useState([]),[c,u]=R.useState([]),[p,y]=R.useState(null),[g,x]=R.useState({name:(i==null?void 0:i.name)||"",rm:"",courseId:"",classId:""});R.useEffect(()=>{if(i!=null&&i.isOnboarded){n("/dashboard");return}Ve.getCourses().then(o)},[i,n]),R.useEffect(()=>{g.courseId&&(Ve.getClasses(g.courseId).then(u),x(T=>({...T,classId:""})))},[g.courseId]);const b=async T=>{if(T.preventDefault(),!!i){y(null);try{const O={...g,email:i.email,role:i.role};await Ve.updateUserProfile(i.uid,O),await e(),n("/dashboard")}catch(O){y(O.message||"Erro ao atualizar perfil")}}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Complete seu perfil"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Precisamos de mais alguns detalhes antes de comear."})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nome Completo"}),f.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Nome Completo",value:g.name,onChange:T=>x({...g,name:T.target.value})})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"rm",className:"sr-only",children:"Registro de Matrcula (RM)"}),f.jsx("input",{id:"rm",name:"rm",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"RM (ex: 12345)",value:g.rm,onChange:T=>x({...g,rm:T.target.value})})]}),f.jsx("div",{className:"mb-4",children:f.jsxs("select",{required:!0,className:"block w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:g.courseId,onChange:T=>x({...g,courseId:T.target.value}),children:[f.jsx("option",{value:"",children:"Selecione o Curso"}),r.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})}),f.jsx("div",{className:"mb-4",children:f.jsxs("select",{required:!0,disabled:!g.courseId,className:"block w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100",value:g.classId,onChange:T=>x({...g,classId:T.target.value}),children:[f.jsx("option",{value:"",children:"Selecione a Turma"}),c.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})})]}),p&&f.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 p-3 rounded text-center font-medium",children:p}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Concluir Cadastro"})})]})]})})},ms=({isOpen:i,onClose:e,title:n,children:r})=>i?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:f.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e}),f.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:[f.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:n}),f.jsx("div",{className:"mt-2",children:r})]})})}),f.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:f.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:e,children:"Fechar"})})]})]})}):null,w4=({currentPage:i,totalItems:e,itemsPerPage:n,onPageChange:r})=>{const o=Math.ceil(e/n);if(o<=1)return null;const c=()=>{const u=[];if(o<=7)for(let p=1;p<=o;p++)u.push(p);else i<=4?u.push(1,2,3,4,5,"...",o):i>=o-3?u.push(1,"...",o-4,o-3,o-2,o-1,o):u.push(1,"...",i-1,i,i+1,"...",o);return u};return f.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[f.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[f.jsx("button",{onClick:()=>r(Math.max(1,i-1)),disabled:i===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsx("button",{onClick:()=>r(Math.min(o,i+1)),disabled:i===o,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[f.jsx("div",{children:f.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",f.jsx("span",{className:"font-medium",children:(i-1)*n+1})," a ",f.jsx("span",{className:"font-medium",children:Math.min(i*n,e)})," de ",f.jsx("span",{className:"font-medium",children:e})," resultados"]})}),f.jsx("div",{children:f.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[f.jsxs("button",{onClick:()=>r(Math.max(1,i-1)),disabled:i===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[f.jsx("span",{className:"sr-only",children:"Anterior"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),c().map((u,p)=>typeof u=="number"?f.jsx("button",{onClick:()=>r(u),"aria-current":i===u?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${i===u?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:u},p):f.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},p)),f.jsxs("button",{onClick:()=>r(Math.min(o,i+1)),disabled:i===o,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[f.jsx("span",{className:"sr-only",children:"Prximo"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},zw=(i,e)=>{const[n,r]=R.useState(null),[o,c]=R.useState(null),[u,p]=R.useState(!1),y=R.useCallback(()=>{r(null),c(null)},[]);return{handleEnroll:R.useCallback(async(x,b)=>{if(i){y(),p(!0);try{await Ve.createEnrollment(i.uid,x.id,b),r({type:"success",msg:"Inscrio realizada com sucesso!"}),setTimeout(()=>{e()},1500)}catch(T){const O=T.message||"";if(O.startsWith("CONFLICT|")){const[L,k,P,G]=O.split("|");c({name:k,time:`${P} - ${G}`})}else r({type:"error",msg:O||"Falha ao inscrever"})}finally{p(!1)}}},[i,e,y]),isEnrolling:u,feedback:n,conflictData:o,clearState:y}},T4=Mc.memo(({event:i,hasChildren:e,onAction:n})=>{const r=!e&&i.sessions.length===1?i.sessions[0]:null,o=r?r.capacity:0,c=r?r.filled:0,u=o>0?c/o*100:0,p=o>0&&c>=o;let y="bg-indigo-500",g="Pblico";return i.visibility==="course"&&(y="bg-emerald-500",g="Meu Curso"),i.visibility==="class"&&(y="bg-purple-500",g="Minha Turma"),f.jsxs("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col h-full relative",children:[f.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${y} opacity-80`}),f.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${y} bg-opacity-10 text-gray-700`,children:g}),e?f.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium border border-gray-200",children:"Evento Principal"}):p&&r?f.jsxs("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Lotado"]}):f.jsxs("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Inscries Abertas"]})]}),f.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight mb-2 group-hover:text-primary transition-colors",children:i.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-4 flex-1",children:i.description}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mt-auto",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 flex justify-center text-gray-400 mr-2",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),f.jsx("span",{className:"font-medium",children:i.location})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 flex justify-center text-gray-400 mr-2",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"font-medium",children:e?"Ver programao completa":i.sessions.length>1?`${i.sessions.length} horrios disponveis`:`${nn(r==null?void 0:r.date)}  ${r==null?void 0:r.startTime}`})]})]}),!e&&r&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[f.jsx("span",{className:p?"text-red-600":"text-gray-500",children:p?"Esgotado":`${o-c} vagas restantes`}),f.jsxs("span",{className:"text-gray-400",children:[Math.round(u),"%"]})]}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${p?"bg-red-500":u>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${u}%`}})})]})]}),f.jsxs("button",{onClick:()=>n(i),className:"w-full py-3 text-sm font-bold text-primary bg-indigo-50 hover:bg-primary hover:text-white transition-colors border-t border-indigo-100 flex justify-center items-center",children:[e?"Explorar Evento":"Ver Detalhes e Inscrever",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),S4=()=>{const{user:i}=Gi(),e=Qr(),[n,r]=R.useState([]),[o,c]=R.useState([]),[u,p]=R.useState(null),y=R.useCallback(()=>{p(null),C()},[]),{handleEnroll:g,isEnrolling:x,feedback:b,conflictData:T,clearState:O}=zw(i,y),[L,k]=R.useState(""),[P,G]=R.useState(""),[J,Y]=R.useState(!1),[de,ye]=R.useState(1),le=9,C=R.useCallback(async()=>{if(!i)return;const[S,Te]=await Promise.all([Ve.getAvailableEventsForUser(i),Ve.getEnrollmentsForUser(i.uid)]);r(S),c(Te)},[i]);R.useEffect(()=>{C()},[C]),R.useEffect(()=>{if(u){const S=n.find(Te=>Te.id===u.id);S&&S!==u&&p(S)}},[n,u]);const N=R.useMemo(()=>{const S=new Set;return n.forEach(Te=>{Te.parentId&&S.add(Te.parentId)}),S},[n]),I=R.useMemo(()=>{const S=new Date().toISOString().split("T")[0];return n.filter(Te=>{if(Te.parentId)return!1;const Ee=Te.name.toLowerCase().includes(L.toLowerCase())||Te.description.toLowerCase().includes(L.toLowerCase()),K=n.filter(Ne=>Ne.parentId===Te.id),ae=[...Te.sessions,...K.flatMap(Ne=>Ne.sessions)],xe=P?ae.some(Ne=>Ne.date===P):!0,be=J||ae.some(Ne=>Ne.date>=S);return Ee&&xe&&be})},[n,L,P,J]);R.useEffect(()=>{ye(1)},[L,P,J]);const U=R.useMemo(()=>{const S=(de-1)*le;return I.slice(S,S+le)},[I,de]),M=(S,Te)=>o.some(Ee=>Ee.eventId===S&&Ee.sessionId===Te),D=R.useCallback(S=>{N.has(S.id)?e(`/event/${S.id}`):(O(),p(S))},[N,e,O]);return f.jsxs("div",{className:"space-y-8",children:[f.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Dashboard de Eventos"}),f.jsx("p",{className:"text-gray-500 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),f.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex flex-col lg:flex-row gap-4 items-end",children:[f.jsxs("div",{className:"flex-1 w-full",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),f.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 text-gray-900 py-2.5",value:L,onChange:S=>k(S.target.value)})]})]}),f.jsxs("div",{className:"w-full lg:w-48",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Data Especfica"}),f.jsx("input",{type:"date",className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 text-gray-900 py-2.5",value:P,onChange:S=>G(S.target.value)})]}),f.jsx("div",{className:"w-full lg:w-auto pb-2",children:f.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[f.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[f.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:J,onChange:S=>Y(S.target.checked),style:{right:J?"0":"auto",left:J?"auto":"0",borderColor:J?"#4F46E5":"#E5E7EB"}}),f.jsx("label",{htmlFor:"toggle",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${J?"bg-primary":"bg-gray-300"}`})]}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mostrar Passados"})]})})]}),I.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-xl shadow-sm border border-dashed border-gray-300 text-center",children:[f.jsx("div",{className:"text-6xl mb-4",children:""}),f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nenhum evento encontrado"}),f.jsx("p",{className:"text-gray-500 max-w-sm mt-1",children:n.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":J?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'."}),f.jsxs("div",{className:"flex gap-4 mt-4",children:[L||P?f.jsx("button",{onClick:()=>{k(""),G("")},className:"text-primary font-medium hover:underline",children:"Limpar filtros de texto/data"}):null,!J&&f.jsx("button",{onClick:()=>Y(!0),className:"text-primary font-medium hover:underline",children:"Ver histrico de eventos"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(S=>f.jsx(T4,{event:S,hasChildren:N.has(S.id),onAction:D},S.id))}),f.jsx(w4,{currentPage:de,totalItems:I.length,itemsPerPage:le,onPageChange:ye})]}),f.jsx(ms,{isOpen:!!u,onClose:()=>p(null),title:u?u.name:"",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:f.jsx("p",{className:"text-gray-700 leading-relaxed",children:u==null?void 0:u.description})}),b&&f.jsxs("div",{className:`p-4 rounded-md border flex items-start ${b.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[f.jsx("span",{className:"mr-3 text-xl",children:b.type==="success"?"":""}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold",children:b.type==="success"?"Sucesso!":"Erro"}),f.jsx("p",{className:"text-sm",children:b.msg})]})]}),T&&f.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-bold text-amber-800",children:"Conflito de Horrio"}),f.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[f.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),f.jsxs("div",{className:"bg-white bg-opacity-50 p-2 rounded border border-amber-200",children:[f.jsx("p",{className:"font-semibold",children:T.name}),f.jsx("p",{className:"text-xs",children:T.time})]})]})]})]})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[f.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:u==null?void 0:u.sessions.map(S=>{const Te=M(u.id,S.id),Ee=S.filled>=S.capacity,K=S.filled/S.capacity*100,ae=S.date<new Date().toISOString().split("T")[0];return f.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${Te?"border-green-500 bg-green-50 ring-1 ring-green-500":Ee||ae?"border-gray-200 bg-gray-50 opacity-90":"border-gray-200 hover:border-primary hover:shadow-md bg-white"}`,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-bold text-gray-900 text-lg",children:nn(S.date)}),Te&&f.jsx("span",{className:"bg-green-200 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),ae&&!Te&&f.jsx("span",{className:"bg-gray-200 text-gray-600 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),f.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-4",children:f.jsxs("span",{className:"flex items-center",children:[" ",S.startTime," - ",S.endTime]})}),f.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${Ee?"bg-red-500":K>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(K,100)}%`}})}),f.jsx("span",{className:`text-xs font-bold w-24 text-right ${Ee?"text-red-600":"text-gray-500"}`,children:Ee?"ESGOTADO":`${S.capacity-S.filled} vagas`})]})]}),f.jsx("div",{className:"flex items-center",children:Te?f.jsx("button",{disabled:!0,className:"w-full sm:w-auto bg-white border border-green-500 text-green-600 font-bold py-2 px-4 rounded-lg opacity-100",children:"Inscrito"}):f.jsx("button",{onClick:()=>u&&g(u,S.id),disabled:Ee||ae||x,className:`w-full sm:w-auto px-6 py-2.5 rounded-lg font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all ${Ee||ae?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-indigo-700 hover:shadow-md"} disabled:opacity-70`,children:x?"Inscrevendo...":ae?"Encerrado":Ee?"Lotado":"Inscrever"})})]})},S.id)})})]})]})})]})},A4=Mc.memo(({evt:i,onOpenSubEvent:e,onManageEnrollments:n,onEdit:r,onDelete:o})=>{const c=!!i.parentId,u=!c;return f.jsxs("li",{className:`px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition ${c?"bg-gray-50/50 pl-12 border-l-4 border-indigo-100":""}`,children:[f.jsxs("div",{children:[f.jsxs("h3",{className:`font-medium text-primary flex items-center ${c?"text-base":"text-lg"}`,children:[c&&f.jsx("span",{className:"text-gray-400 mr-2",children:""}),i.name]}),f.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[f.jsxs("span",{className:"mr-3",children:[" ",i.sessions.length," sesses"]}),f.jsxs("span",{children:[" ",i.visibility==="public"?"Pblico":i.visibility==="course"?"Por Curso":"Por Turma"]})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[u&&f.jsx("button",{onClick:()=>e(i),className:"text-indigo-600 hover:text-white hover:bg-indigo-600 p-2 rounded-full transition border border-transparent hover:border-indigo-600",title:"Adicionar Sub-evento vinculado",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("button",{onClick:()=>n(i),className:"text-emerald-600 hover:text-white hover:bg-emerald-600 p-2 rounded-full transition border border-transparent hover:border-emerald-600",title:"Gerenciar Inscritos e Exportar",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),f.jsx("button",{onClick:()=>r(i),className:"text-blue-600 hover:text-white hover:bg-blue-600 p-2 rounded-full transition border border-transparent hover:border-blue-600",title:"Editar Evento",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),f.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),f.jsx("button",{onClick:()=>o(i),className:"text-red-600 hover:text-white hover:bg-red-600 p-2 rounded-full transition border border-transparent hover:border-red-600",title:"Excluir Evento",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),N4=()=>{var Qi,ys,Ha;const{user:i}=Gi(),e=Qr(),[n,r]=R.useState([]),[o,c]=R.useState([]),[u,p]=R.useState([]),[y,g]=R.useState(!1),[x,b]=R.useState(!1),[T,O]=R.useState(1),[L,k]=R.useState([void 0]),[P,G]=R.useState(!0),J=10,[Y,de]=R.useState({searchTerm:"",visibility:"",course:""}),[ye,le]=R.useState(""),[C,N]=R.useState("manual"),[I,U]=R.useState(null),[M,D]=R.useState(null),[S,Te]=R.useState(null),[Ee,K]=R.useState(null),[ae,xe]=R.useState(!1),[be,Ne]=R.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0}),[V,ee]=R.useState({date:"",startTime:"",endTime:"",capacity:30}),[oe,he]=R.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),Re=`${new Date().getFullYear()+2}-12-31`,Pe=R.useCallback(async ne=>{b(!0);const ve=L[ne-1],{data:Ze,nextCursor:ft}=await Ve.getEvents({limit:J,cursor:ve,filters:Y});r(Ze),G(!!ft),ft&&L.length<=ne&&k(wt=>[...wt,ft]),b(!1)},[L,Y]),bt=async()=>{const[ne,ve]=await Promise.all([Ve.getCourses(),Ve.getClasses()]);c(ne),p(ve)};R.useEffect(()=>{bt()},[]),R.useEffect(()=>{k([void 0]),O(1),Pe(1)},[Y]);const ot=()=>{if(!P)return;const ne=T+1;O(ne),Pe(ne)},Wn=()=>{if(T===1)return;const ne=T-1;O(ne),Pe(ne)},Vn=(ne,ve)=>{de(Ze=>({...Ze,[ne]:ve}))},gs=()=>{O(1),k([void 0]),Pe(1)},re=()=>{Ne({name:"",description:"",location:"",sessions:[],visibility:"public",allowedCourses:[],allowedClasses:[],parentId:void 0}),ee({date:"",startTime:"",endTime:"",capacity:30}),he({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),U(null),N("manual"),D(null),Te(null)},Xe=()=>{re(),le("Criar Novo Evento Principal"),g(!0)},xn=R.useCallback(ne=>{var ve;if(re(),le(`Adicionar Sub-evento para: ${ne.name}`),U(ne.name),(ve=ne.sessions)!=null&&ve.length){const Ze=ne.sessions.map(ft=>ft.date).sort();Te({min:Ze[0],max:Ze[Ze.length-1]})}Ne({parentId:ne.id,visibility:ne.visibility,allowedCourses:ne.allowedCourses,allowedClasses:ne.allowedClasses,location:ne.location,sessions:[],name:"",description:""}),g(!0)},[]),kn=R.useCallback(ne=>{re(),Ne({...ne}),le("Editar Evento"),g(!0)},[]),ui=R.useCallback(ne=>{K(ne.id),xe(!ne.parentId)},[]),Xr=R.useCallback(ne=>{e(`/admin/events/${ne.id}/enrollments`)},[e]),At=()=>{if(!V.date||!V.startTime||!V.endTime)return;if(S&&(V.date<S.min||V.date>S.max)){D(`A data deve estar entre ${nn(S.min)} e ${nn(S.max)}.`);return}const ne={id:`sess_${Date.now()}`,date:V.date,startTime:V.startTime,endTime:V.endTime,capacity:V.capacity||30,filled:0};Ne(ve=>({...ve,sessions:[...ve.sessions||[],ne]})),ee({date:"",startTime:"",endTime:"",capacity:30}),D(null)},Dt=()=>{D(null);const{startDate:ne,endDate:ve,startTime:Ze,endTime:ft,capacity:wt,daysOfWeek:En}=oe;if(!ne||!ve||!Ze||!ft||!En.length){D("Preencha todos os campos.");return}if(S&&(ne<S.min||ve>S.max)){D(`O intervalo deve estar entre ${nn(S.min)} e ${nn(S.max)}.`);return}if(ve>Re){D(`A gerao  limitada at ${nn(Re)}.`);return}const vt=new Date(`${ne}T12:00:00Z`),Wr=new Date(`${ve}T12:00:00Z`);if(vt>Wr){D("A data de incio deve ser anterior  de fim.");return}const vs=[];for(let An=new Date(vt);An<=Wr;An.setDate(An.getDate()+1))En.includes(An.getUTCDay())&&vs.push({id:`sess_${An.getTime()}`,date:An.toISOString().split("T")[0],startTime:Ze,endTime:ft,capacity:wt,filled:0});if(vs.length>100){D("Limite de 100 sesses por vez atingido.");return}if(!vs.length){D("Nenhuma data encontrada no intervalo.");return}Ne(An=>({...An,sessions:[...An.sessions||[],...vs]}))},Vs=ne=>{Ne(ve=>{var Ze;return{...ve,sessions:(Ze=ve.sessions)==null?void 0:Ze.filter((ft,wt)=>wt!==ne)}})},ll=async ne=>{var ve;if(ne.preventDefault(),!be.name||!((ve=be.sessions)!=null&&ve.length)){D("Nome e ao menos uma sesso so obrigatrios.");return}b(!0);try{be.id?await Ve.updateEvent(be):await Ve.createEvent({...be,id:`evt_${Date.now()}`,createdAt:new Date().toISOString(),createdBy:(i==null?void 0:i.uid)||""}),g(!1),re(),gs()}catch(Ze){console.error(Ze)}finally{b(!1)}},Fa=async()=>{Ee&&(await Ve.deleteEvent(Ee),K(null),gs())},rn=ne=>Ne(ve=>{var Ze;return{...ve,allowedCourses:(Ze=ve.allowedCourses)!=null&&Ze.includes(ne)?ve.allowedCourses.filter(ft=>ft!==ne):[...ve.allowedCourses||[],ne]}}),di=ne=>Ne(ve=>{var Ze;return{...ve,allowedClasses:(Ze=ve.allowedClasses)!=null&&Ze.includes(ne)?ve.allowedClasses.filter(ft=>ft!==ne):[...ve.allowedClasses||[],ne]}}),Jr=ne=>he(ve=>({...ve,daysOfWeek:ve.daysOfWeek.includes(ne)?ve.daysOfWeek.filter(Ze=>Ze!==ne):[...ve.daysOfWeek,ne]}));return f.jsxs("div",{className:"container mx-auto space-y-6",children:[f.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Eventos"}),f.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[f.jsx("div",{className:"w-full xl:w-64",children:f.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full border-gray-300 rounded-md bg-white text-gray-900",value:Y.searchTerm,onChange:ne=>Vn("searchTerm",ne.target.value)})}),f.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[f.jsxs("select",{className:"w-full border-gray-300 rounded-md bg-white text-gray-900",value:Y.visibility,onChange:ne=>Vn("visibility",ne.target.value),children:[f.jsx("option",{value:"",children:"Visibilidade"}),f.jsx("option",{value:"public",children:"Pblico"}),f.jsx("option",{value:"course",children:"Por Curso"}),f.jsx("option",{value:"class",children:"Por Turma"})]}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md bg-white text-gray-900",value:Y.course,onChange:ne=>Vn("course",ne.target.value),children:[f.jsx("option",{value:"",children:"Todos os Cursos"}),o.map(ne=>f.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),f.jsx("button",{onClick:Xe,className:"w-full xl:w-auto bg-primary text-white px-6 py-2 rounded-md font-bold whitespace-nowrap",children:"+ Novo Evento"})]})]}),f.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:f.jsxs("ul",{className:"divide-y divide-gray-200",children:[x&&f.jsx("li",{className:"px-6 py-12 text-center text-gray-500",children:"Carregando eventos..."}),!x&&n.map(ne=>f.jsx(A4,{evt:ne,onOpenSubEvent:xn,onManageEnrollments:Xr,onEdit:kn,onDelete:ui},ne.id)),!x&&n.length===0&&f.jsx("li",{className:"px-6 py-12 text-center text-gray-500",children:"Nenhum evento encontrado."})]})}),f.jsxs("div",{className:"flex justify-between items-center mt-4",children:[f.jsx("button",{onClick:Wn,disabled:T===1||x,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsxs("span",{className:"text-sm text-gray-500",children:["Pgina ",T]}),f.jsx("button",{onClick:ot,disabled:!P||x,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsx(ms,{isOpen:!!Ee,onClose:()=>K(null),title:"Confirmar Excluso",children:f.jsxs("div",{children:[f.jsx("p",{children:"Tem certeza que deseja excluir este evento?"}),ae&&f.jsx("p",{className:"text-red-600 font-bold",children:"Ateno: Todos os sub-eventos vinculados tambm sero excludos."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>K(null),className:"px-4 py-2 bg-gray-100 rounded",children:"Cancelar"}),f.jsx("button",{onClick:Fa,className:"px-4 py-2 bg-red-600 rounded text-white font-bold",children:"Confirmar"})]})]})}),f.jsx(ms,{isOpen:y,onClose:()=>g(!1),title:ye,children:f.jsxs("form",{onSubmit:ll,className:"space-y-4 max-h-[80vh] overflow-y-auto px-1",children:[f.jsx("input",{type:"text",required:!0,placeholder:"Nome do Evento",className:"w-full border rounded p-2 bg-white text-gray-900",value:be.name,onChange:ne=>Ne({...be,name:ne.target.value})}),f.jsxs("div",{className:I?"opacity-50 pointer-events-none":"",children:[f.jsxs("select",{value:be.visibility,onChange:ne=>Ne({...be,visibility:ne.target.value}),className:"w-full border rounded p-2 bg-white text-gray-900",disabled:!!I,children:[f.jsx("option",{value:"public",children:"Pblico"}),f.jsx("option",{value:"course",children:"Restrito a Cursos"}),f.jsx("option",{value:"class",children:"Restrito a Turmas"})]}),be.visibility==="course"&&f.jsx("div",{className:"p-2 border rounded max-h-40 overflow-y-auto",children:o.map(ne=>{var ve;return f.jsxs("div",{children:[f.jsx("input",{type:"checkbox",id:`c_${ne.id}`,checked:(ve=be.allowedCourses)==null?void 0:ve.includes(ne.id),onChange:()=>rn(ne.id)}),f.jsx("label",{htmlFor:`c_${ne.id}`,children:ne.name})]},ne.id)})}),be.visibility==="class"&&f.jsx("div",{className:"p-2 border rounded max-h-40 overflow-y-auto",children:o.map(ne=>f.jsxs("div",{children:[f.jsx("strong",{children:ne.name}),u.filter(ve=>ve.courseId===ne.id).map(ve=>{var Ze;return f.jsxs("div",{children:[f.jsx("input",{type:"checkbox",id:`cl_${ve.id}`,checked:(Ze=be.allowedClasses)==null?void 0:Ze.includes(ve.id),onChange:()=>di(ve.id)}),f.jsx("label",{htmlFor:`cl_${ve.id}`,children:ve.name})]},ve.id)})]},ne.id))})]}),f.jsx("textarea",{placeholder:"Descrio",className:"w-full border rounded p-2 bg-white text-gray-900",rows:2,value:be.description,onChange:ne=>Ne({...be,description:ne.target.value})}),f.jsx("input",{type:"text",placeholder:"Local",className:"w-full border rounded p-2 bg-white text-gray-900",value:be.location,onChange:ne=>Ne({...be,location:ne.target.value})}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{children:"Gerenciar Sesses"}),S&&f.jsxs("div",{className:"bg-blue-100 p-2 rounded text-sm",children:["Restrio de Data Ativa: ",nn(S.min)," a ",nn(S.max),"."]}),f.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-t-md",children:[f.jsx("button",{type:"button",onClick:()=>N("manual"),className:`flex-1 py-2 text-sm rounded-md ${C==="manual"?"bg-white text-primary shadow":"text-gray-500"}`,children:"Manual"}),f.jsx("button",{type:"button",onClick:()=>N("recurring"),className:`flex-1 py-2 text-sm rounded-md ${C==="recurring"?"bg-white text-primary shadow":"text-gray-500"}`,children:"Recorrncia"})]}),C==="manual"&&f.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-50 p-3 rounded-b-md border",children:[f.jsx("input",{type:"date",className:"border p-1 rounded text-sm bg-white text-gray-900",value:V.date,min:S==null?void 0:S.min,max:S==null?void 0:S.max,onChange:ne=>ee({...V,date:ne.target.value})}),f.jsx("input",{type:"number",placeholder:"Capacidade",className:"border p-1 rounded text-sm bg-white text-gray-900",value:V.capacity,onChange:ne=>ee({...V,capacity:parseInt(ne.target.value)})}),f.jsx("input",{type:"time",className:"border p-1 rounded text-sm bg-white text-gray-900",value:V.startTime,onChange:ne=>ee({...V,startTime:ne.target.value})}),f.jsx("input",{type:"time",className:"border p-1 rounded text-sm bg-white text-gray-900",value:V.endTime,onChange:ne=>ee({...V,endTime:ne.target.value})}),f.jsx("button",{type:"button",onClick:At,className:"col-span-2 mt-2 bg-white border border-primary text-primary py-2 rounded text-sm",children:"+ Adicionar Sesso"})]}),C==="recurring"&&f.jsxs("div",{className:"bg-indigo-50 p-3 rounded-b-md space-y-3 border",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("input",{type:"date",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.startDate,min:S==null?void 0:S.min,max:Re,onChange:ne=>he({...oe,startDate:ne.target.value})}),f.jsx("input",{type:"date",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.endDate,min:S==null?void 0:S.min,max:Re,onChange:ne=>he({...oe,endDate:ne.target.value})})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.startTime,onChange:ne=>he({...oe,startTime:ne.target.value})}),f.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.endTime,onChange:ne=>he({...oe,endTime:ne.target.value})}),f.jsx("input",{type:"number",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:oe.capacity,onChange:ne=>he({...oe,capacity:parseInt(ne.target.value)})})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map((ne,ve)=>f.jsx("button",{type:"button",onClick:()=>Jr(ve),className:`text-xs px-3 py-1.5 rounded border ${oe.daysOfWeek.includes(ve)?"bg-primary text-white":"bg-white"}`,children:ne},ne))}),M&&f.jsx("div",{className:"text-xs text-red-600 p-2 rounded",children:M}),f.jsx("button",{type:"button",onClick:Dt,className:"w-full bg-primary text-white py-2 rounded text-sm",children:"Gerar Sesses"})]}),f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsxs("h5",{className:"text-xs font-bold text-gray-500",children:["Sesses Geradas (",((Qi=be.sessions)==null?void 0:Qi.length)||0,")"]}),f.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded p-2 bg-gray-50",children:[((ys=be.sessions)==null?void 0:ys.length)===0&&f.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"Nenhuma sesso"}),(Ha=be.sessions)==null?void 0:Ha.slice().sort((ne,ve)=>ne.date.localeCompare(ve.date)).map((ne,ve)=>f.jsxs("div",{className:"text-xs bg-white border p-2 rounded flex justify-between items-center",children:[f.jsxs("span",{children:[nn(ne.date)," | ",ne.startTime,"-",ne.endTime," | ",ne.capacity," vagas"]}),f.jsx("button",{type:"button",onClick:()=>Vs(ve),className:"text-red-500",children:""})]},ve))]})]})]}),f.jsxs("div",{className:"pt-4",children:[M&&f.jsx("div",{className:"mb-2 text-sm text-red-600 text-center",children:M}),f.jsx("button",{type:"submit",disabled:x,className:"w-full bg-green-600 text-white py-3 rounded-md disabled:opacity-50 font-bold",children:x?"Salvando...":"Confirmar"})]})]})})]})},C4=Mc.memo(({user:i,courseName:e,className:n,onEdit:r,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:u})=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold",children:i.name?i.name.charAt(0):i.email.charAt(0).toUpperCase()}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.name||"Sem nome"}),f.jsx("div",{className:"text-sm text-gray-500",children:i.email})]})]})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:e}),f.jsx("div",{className:"text-sm text-gray-500",children:n})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.rm||"-"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${i.role===nt.ADMIN?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:i.role})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[f.jsx("button",{onClick:()=>u(i),className:"text-cyan-600 hover:text-cyan-900",title:"Ver Inscries",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>r(i),className:"text-indigo-600 hover:text-indigo-900",children:"Editar"}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>o(i),className:"text-amber-600 hover:text-amber-900",children:i.role===nt.ADMIN?"Virar User":"Virar Admin"}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>c(i),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]})),I4=Mc.memo(({user:i,courseName:e,className:n,onEdit:r,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:u})=>f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold",children:i.name?i.name.charAt(0):i.email.charAt(0).toUpperCase()}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-bold text-gray-900",children:i.name||"Sem nome"}),f.jsx("div",{className:"text-xs text-gray-500",children:i.email})]})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i.role===nt.ADMIN?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:i.role})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm border-t border-b border-gray-100 py-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"Curso"}),f.jsx("span",{className:"font-medium",children:e})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"Turma"}),f.jsx("span",{className:"font-medium",children:n})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"RM"}),f.jsx("span",{className:"font-medium",children:i.rm||"-"})]})]}),f.jsxs("div",{className:"flex justify-end space-x-2 pt-1 overflow-x-auto",children:[f.jsxs("button",{onClick:()=>u(i),className:"text-cyan-600 text-sm font-medium border border-cyan-100 px-2 py-1 rounded hover:bg-cyan-50 flex items-center",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Agenda"]}),f.jsx("button",{onClick:()=>r(i),className:"text-indigo-600 text-sm font-medium border border-indigo-100 px-2 py-1 rounded hover:bg-indigo-50",children:"Editar"}),f.jsx("button",{onClick:()=>o(i),className:"text-amber-600 text-sm font-medium border border-amber-100 px-2 py-1 rounded hover:bg-amber-50",children:i.role===nt.ADMIN?"User":"Admin"}),f.jsx("button",{onClick:()=>c(i),className:"text-red-600 text-sm font-medium border border-red-100 px-2 py-1 rounded hover:bg-red-50",children:"Excluir"})]})]})),R4=()=>{const[i,e]=R.useState([]),[n,r]=R.useState([]),[o,c]=R.useState([]),[u,p]=R.useState(!1),[y,g]=R.useState(!0),[x,b]=R.useState(1),[T,O]=R.useState([void 0]),[L,k]=R.useState(!0),P=15,[G,J]=R.useState({searchTerm:"",role:"",courseId:"",classId:""}),[Y,de]=R.useState(null),[ye,le]=R.useState({name:"",rm:"",courseId:"",classId:""}),[C,N]=R.useState(null),[I,U]=R.useState(null),[M,D]=R.useState([]),[S,Te]=R.useState(!1),[Ee,K]=R.useState(null),ae=R.useCallback(async re=>{p(!0);const Xe=T[re-1],{data:xn,nextCursor:kn}=await Ve.getUsers({limit:P,cursor:Xe,filters:G});e(xn),k(!!kn),kn&&T.length<=re&&O(ui=>[...ui,kn]),p(!1)},[T,G]),xe=async()=>{g(!0);const[re,Xe]=await Promise.all([Ve.getCourses(),Ve.getClasses()]);r(re),c(Xe),g(!1)};R.useEffect(()=>{xe()},[]),R.useEffect(()=>{O([void 0]),b(1),ae(1)},[G]);const be=()=>{if(!L)return;const re=x+1;b(re),ae(re)},Ne=()=>{if(x===1)return;const re=x-1;b(re),ae(re)},V=(re,Xe)=>{J(xn=>({...xn,[re]:Xe}))},ee=()=>{b(1),O([void 0]),ae(1)},oe=R.useCallback(re=>K({type:"DELETE",user:re}),[]),he=R.useCallback(re=>K({type:"ROLE",user:re}),[]),Ie=R.useCallback(re=>{de(re),le({name:re.name||"",rm:re.rm||"",courseId:re.courseId||"",classId:re.classId||""}),N(null)},[]),Re=R.useCallback(async re=>{U(re),Te(!0);try{const Xe=await Ve.getUserEnrollmentsDetails(re.uid);D(Xe)}catch(Xe){console.error(Xe),D([])}finally{Te(!1)}},[]),Pe=async re=>{I&&(await Ve.cancelEnrollment(re),Re(I))},bt=async()=>{if(Ee){if(Ee.type==="DELETE")await Ve.deleteUser(Ee.user.uid);else if(Ee.type==="ROLE"){const re=Ee.user.role===nt.ADMIN?nt.USER:nt.ADMIN;await Ve.updateUserRole(Ee.user.uid,re)}K(null),ee()}},ot=async re=>{if(re.preventDefault(),!!Y){N(null);try{await Ve.updateUserProfile(Y.uid,ye),de(null),ee()}catch(Xe){N(Xe.message)}}},Wn=R.useCallback(re=>{var Xe;return((Xe=n.find(xn=>xn.id===re))==null?void 0:Xe.name)||"-"},[n]),Vn=R.useCallback(re=>{var Xe;return((Xe=o.find(xn=>xn.id===re))==null?void 0:Xe.name)||"-"},[o]),gs=R.useMemo(()=>G.courseId?o.filter(re=>re.courseId===G.courseId):[],[o,G.courseId]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Usurios"}),f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Buscar"}),f.jsx("input",{type:"text",placeholder:"Nome, Email ou RM...",className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900",value:G.searchTerm,onChange:re=>V("searchTerm",re.target.value)})]}),f.jsxs("div",{className:"w-full md:w-40",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Perfil"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900",value:G.role,onChange:re=>V("role",re.target.value),children:[f.jsx("option",{value:"",children:"Todos"}),f.jsx("option",{value:nt.ADMIN,children:"Admin"}),f.jsx("option",{value:nt.USER,children:"User"})]})]}),f.jsxs("div",{className:"w-full md:w-48",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Curso"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900",value:G.courseId,onChange:re=>{J({...G,courseId:re.target.value,classId:""})},children:[f.jsx("option",{value:"",children:"Todos os Cursos"}),n.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),f.jsxs("div",{className:"w-full md:w-48",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Turma"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm bg-white text-gray-900 disabled:bg-gray-100",value:G.classId,onChange:re=>V("classId",re.target.value),disabled:!G.courseId,children:[f.jsx("option",{value:"",children:"Todas as Turmas"}),gs.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]})]})]}),f.jsxs("div",{className:"bg-white shadow overflow-x-auto sm:rounded-lg",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 hidden md:table",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usurio"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Curso/Turma"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"RM"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),f.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[u&&f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Carregando..."})}),!u&&i.map(re=>f.jsx(C4,{user:re,courseName:Wn(re.courseId),className:Vn(re.classId),onEdit:Ie,onRequestRoleChange:he,onRequestDelete:oe,onViewEnrollments:Re},re.uid)),!u&&i.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Nenhum usurio encontrado."})})]})]}),f.jsxs("div",{className:"md:hidden p-4 space-y-4",children:[u&&f.jsx("div",{className:"p-8 text-center text-gray-500",children:"Carregando..."}),!u&&i.map(re=>f.jsx(I4,{user:re,courseName:Wn(re.courseId),className:Vn(re.classId),onEdit:Ie,onRequestRoleChange:he,onRequestDelete:oe,onViewEnrollments:Re},re.uid)),!u&&i.length===0&&f.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nenhum usurio encontrado."})]})]}),f.jsxs("div",{className:"flex justify-between items-center mt-4",children:[f.jsx("button",{onClick:Ne,disabled:x===1||u,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsxs("span",{className:"text-sm text-gray-500",children:["Pgina ",x]}),f.jsx("button",{onClick:be,disabled:!L||u,className:"px-4 py-2 bg-white border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsx(ms,{isOpen:!!Ee,onClose:()=>K(null),title:"Confirmar Ao",children:f.jsxs("div",{className:"space-y-4",children:[(Ee==null?void 0:Ee.type)==="DELETE"?f.jsxs("p",{children:["Tem certeza que deseja excluir ",f.jsx("strong",{children:Ee.user.name}),"?"]}):f.jsxs("p",{children:["Deseja alterar o perfil de ",f.jsx("strong",{children:Ee==null?void 0:Ee.user.name})," para",f.jsxs("strong",{children:[" ",(Ee==null?void 0:Ee.user.role)===nt.ADMIN?"USURIO":"ADMIN"]}),"?"]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>K(null),className:"px-4 py-2 bg-gray-100 rounded",children:"Cancelar"}),f.jsx("button",{onClick:bt,className:"px-4 py-2 rounded text-white font-bold bg-red-600",children:"Confirmar"})]})]})}),f.jsx(ms,{isOpen:!!Y,onClose:()=>de(null),title:"Editar Usurio",children:f.jsxs("form",{onSubmit:ot,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Nome Completo"}),f.jsx("input",{type:"text",className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ye.name,onChange:re=>le({...ye,name:re.target.value}),required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{children:"RM"}),f.jsx("input",{type:"text",className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ye.rm,onChange:re=>le({...ye,rm:re.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Curso"}),f.jsxs("select",{className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ye.courseId,onChange:re=>le({...ye,courseId:re.target.value,classId:""}),children:[f.jsx("option",{value:"",children:"Selecione..."}),n.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Turma"}),f.jsxs("select",{className:"mt-1 w-full border rounded-md p-2 bg-white text-gray-900",value:ye.classId,onChange:re=>le({...ye,classId:re.target.value}),disabled:!ye.courseId,children:[f.jsx("option",{value:"",children:"Selecione..."}),o.filter(re=>re.courseId===ye.courseId).map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),C&&f.jsx("div",{className:"text-red-600 text-sm p-2 bg-red-50 rounded",children:C}),f.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-bold",children:"Salvar"})]})}),f.jsx(ms,{isOpen:!!I,onClose:()=>U(null),title:`Agenda: ${I==null?void 0:I.name}`,children:f.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:S?f.jsx("div",{className:"text-center py-8",children:"Carregando..."}):M.length===0?f.jsx("div",{className:"text-center py-8 bg-gray-50 rounded",children:"Nenhuma inscrio."}):f.jsx("ul",{className:"divide-y divide-gray-200",children:M.map((re,Xe)=>f.jsxs("li",{className:"py-3 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-sm",children:re.eventName}),f.jsxs("div",{className:"text-xs text-gray-500",children:[" ",nn(re.sessionDate),"   ",re.sessionTime]})]}),f.jsx("button",{onClick:()=>Pe(re.enrollmentId),className:"text-red-500 text-xs font-bold border px-2 py-1 rounded",children:"Remover"})]},Xe))})})})]})},D4=()=>{const[i,e]=R.useState([]),[n,r]=R.useState([]),[o,c]=R.useState(!1),[u,p]=R.useState(""),[y,g]=R.useState(""),[x,b]=R.useState(""),[T,O]=R.useState(""),[L,k]=R.useState(null),[P,G]=R.useState(null),J=async()=>{c(!0);const D=await Ve.getCourses(),S=await Ve.getClasses();e(D),r(S),c(!1)};R.useEffect(()=>{J()},[]);const Y=async D=>{D.preventDefault(),u&&(await Ve.addCourse(u),p(""),J())},de=D=>{G({type:"course",id:D})},ye=async D=>{D.preventDefault(),!(!y||!x)&&(await Ve.addClass(x,y),g(""),J())},le=D=>{G({type:"class",id:D})},C=async()=>{P&&(P.type==="course"?await Ve.deleteCourse(P.id):await Ve.deleteClass(P.id),G(null),J())},N=(D,S,Te)=>{k({type:D,id:S,name:Te})},I=async D=>{D.preventDefault(),!(!L||!L.name)&&(L.type==="course"?await Ve.updateCourse(L.id,L.name):await Ve.updateClass(L.id,L.name),k(null),J())},U=i.filter(D=>D.name.toLowerCase().includes(T.toLowerCase())),M=n.filter(D=>{var K;const S=((K=i.find(ae=>ae.id===D.courseId))==null?void 0:K.name)||"",Te=D.name.toLowerCase().includes(T.toLowerCase()),Ee=S.toLowerCase().includes(T.toLowerCase());return Te||Ee});return f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Cursos e Turmas"}),f.jsx("div",{className:"w-full sm:w-72",children:f.jsx("input",{type:"text",placeholder:"Buscar Curso ou Turma...",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:T,onChange:D=>O(D.target.value)})})]}),f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cursos"}),f.jsxs("form",{onSubmit:Y,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsx("input",{type:"text",placeholder:"Nome do novo curso",className:"flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:u,onChange:D=>p(D.target.value)}),f.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-primary text-white px-4 py-2 rounded-md hover:bg-indigo-700 font-medium",children:"Adicionar Curso"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[U.map(D=>f.jsxs("div",{className:"border border-gray-200 rounded-md p-4 flex justify-between items-center bg-gray-50 shadow-sm",children:[f.jsx("span",{className:"font-medium text-gray-800 break-words flex-1 pr-2",children:D.name}),f.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[f.jsx("button",{onClick:()=>N("course",D.id,D.name),className:"text-blue-600 text-sm hover:text-white hover:bg-blue-600 font-medium px-2 py-1 rounded transition",title:"Editar",children:""}),f.jsx("button",{onClick:()=>de(D.id),className:"text-red-600 text-sm hover:text-white hover:bg-red-600 font-medium px-2 py-1 rounded transition",title:"Excluir",children:""})]})]},D.id)),U.length===0&&f.jsx("div",{className:"text-gray-500 text-sm italic col-span-full",children:"Nenhum curso encontrado."})]})]}),f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Turmas"}),f.jsxs("form",{onSubmit:ye,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsxs("select",{className:"w-full sm:w-1/3 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:x,onChange:D=>b(D.target.value),required:!0,children:[f.jsx("option",{value:"",children:"Selecione o Curso..."}),i.map(D=>f.jsx("option",{value:D.id,children:D.name},D.id))]}),f.jsx("input",{type:"text",placeholder:"Nome da Turma (ex: 2024-A)",className:"flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:y,onChange:D=>g(D.target.value),required:!0}),f.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-secondary text-white px-4 py-2 rounded-md hover:bg-emerald-700 font-medium",children:"Adicionar Turma"})]}),f.jsxs("div",{className:"border border-gray-200 rounded-md bg-white overflow-hidden",children:[f.jsxs("div",{className:"hidden md:grid grid-cols-3 bg-gray-50 px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[f.jsx("div",{children:"Turma"}),f.jsx("div",{children:"Curso Associado"}),f.jsx("div",{className:"text-right",children:"Aes"})]}),f.jsxs("div",{className:"divide-y divide-gray-200",children:[M.map(D=>{var Te;const S=((Te=i.find(Ee=>Ee.id===D.courseId))==null?void 0:Te.name)||"Curso removido";return f.jsxs("div",{className:"p-4 md:px-6 md:py-4 flex flex-col md:grid md:grid-cols-3 gap-2 md:items-center",children:[f.jsxs("div",{className:"flex justify-between items-center md:block",children:[f.jsx("span",{className:"text-sm font-medium text-gray-900",children:D.name}),f.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Turma"})]}),f.jsxs("div",{className:"flex justify-between items-center md:block",children:[f.jsx("span",{className:"text-sm text-gray-500",children:S}),f.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Curso"})]}),f.jsxs("div",{className:"text-right mt-3 md:mt-0 pt-3 md:pt-0 border-t md:border-0 border-gray-100 flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>N("class",D.id,D.name),className:"text-blue-600 hover:text-white hover:bg-blue-600 text-sm font-medium border border-blue-200 px-3 py-1.5 rounded transition",children:"Editar"}),f.jsx("button",{onClick:()=>le(D.id),className:"text-red-600 hover:text-white hover:bg-red-600 text-sm font-medium border border-red-200 px-3 py-1.5 rounded transition",children:"Excluir"})]})]},D.id)}),M.length===0&&f.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"Nenhuma turma encontrada."})]})]})]}),f.jsx(ms,{isOpen:!!P,onClose:()=>G(null),title:"Confirmar Excluso",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza que deseja excluir ",(P==null?void 0:P.type)==="course"?"este curso":"esta turma","?"]}),(P==null?void 0:P.type)==="course"&&f.jsx("p",{className:"text-xs text-red-500 font-bold",children:"Ateno: Isso pode deixar turmas e usurios rfos (sem curso vinculado)."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>G(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar"})]})]})}),f.jsx(ms,{isOpen:!!L,onClose:()=>k(null),title:(L==null?void 0:L.type)==="course"?"Editar Curso":"Editar Turma",children:f.jsxs("form",{onSubmit:I,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),f.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:(L==null?void 0:L.name)||"",onChange:D=>k(S=>S?{...S,name:D.target.value}:null),required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-medium hover:bg-indigo-700",children:"Salvar"})]})})]})},jo=i=>{const e=String(i??"");return/[",\n\r]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},j4=()=>{const{id:i}=cE(),[e,n]=R.useState(null),[r,o]=R.useState([]),[c,u]=R.useState(!0),[p,y]=R.useState(null),[g,x]=R.useState(""),b=async()=>{if(!i)return;u(!0);const k=await Ve.getEventById(i);n(k||null);const P=await Ve.getEnrichedEnrollments(i);o(P),u(!1)};R.useEffect(()=>{b()},[i]);const T=()=>{if(L.length===0)return;const P=[["Nome","Email","RM","Data Sesso","Horrio","Data Inscrio"].join(","),...L.map(de=>[jo(de.user.name),jo(de.user.email),jo(de.user.rm),jo(nn(de.session.date)),jo(`${de.session.startTime} - ${de.session.endTime}`),jo(new Date(de.enrolledAt).toLocaleString("pt-BR"))].join(","))].join(`
`),G=new Blob([`\uFEFF${P}`],{type:"text/csv;charset=utf-8;"}),J=URL.createObjectURL(G),Y=document.createElement("a");Y.href=J,Y.setAttribute("download",`inscritos_${(e==null?void 0:e.name.replace(/\s+/g,"_"))||"evento"}.csv`),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},O=async()=>{p&&(await Ve.cancelEnrollment(p),y(null),b())},L=r.filter(k=>{var P;return k.user.name.toLowerCase().includes(g.toLowerCase())||k.user.email.toLowerCase().includes(g.toLowerCase())||((P=k.user.rm)==null?void 0:P.includes(g))});return c?f.jsx("div",{className:"p-8 text-center",children:"Carregando..."}):e?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsxs(gt,{to:"/admin/events",className:"text-gray-500 hover:text-gray-700 font-medium flex-shrink-0",children:[f.jsx("span",{className:"sr-only",children:"Voltar"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})]}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 leading-tight",children:"Inscritos"}),f.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[200px] sm:max-w-md",children:e.name})]})]}),f.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[f.jsx("input",{type:"text",placeholder:"Buscar aluno...",className:"flex-1 sm:w-64 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:g,onChange:k=>x(k.target.value)}),f.jsxs("button",{onClick:T,disabled:L.length===0,className:"w-auto bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-sm",title:"Exportar CSV",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),f.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]}),L.length===0?f.jsx("div",{className:"bg-white shadow rounded-lg p-8 text-center text-gray-500",children:g?"Nenhum aluno encontrado para esta busca.":"Nenhum inscrito neste evento at o momento."}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aluno"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RM / Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sesso"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrito em"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(k=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.user.name})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:k.user.rm||"-"}),f.jsx("div",{className:"text-xs text-gray-500",children:k.user.email})]}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:nn(k.session.date)}),f.jsxs("div",{className:"text-xs text-gray-500",children:[k.session.startTime," - ",k.session.endTime]})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(k.enrolledAt).toLocaleDateString("pt-BR")}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f.jsx("button",{onClick:()=>y(k.id),className:"text-red-600 hover:text-red-900 font-bold",children:"Remover"})})]},k.id))})]})}),f.jsx("div",{className:"md:hidden space-y-4",children:L.map(k=>f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-bold text-gray-900",children:k.user.name}),f.jsx("p",{className:"text-xs text-gray-500",children:k.user.email})]}),f.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded font-medium",children:["RM: ",k.user.rm||"-"]})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-50 grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold tracking-wide",children:"Sesso"}),f.jsx("span",{className:"block font-medium text-gray-800",children:nn(k.session.date)}),f.jsxs("span",{className:"block text-xs text-gray-500",children:[k.session.startTime," - ",k.session.endTime]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold tracking-wide",children:"Inscrito em"}),f.jsx("span",{className:"block text-gray-600",children:new Date(k.enrolledAt).toLocaleDateString("pt-BR")})]})]}),f.jsx("div",{className:"mt-4 pt-3 border-t border-gray-50",children:f.jsx("button",{onClick:()=>y(k.id),className:"w-full text-sm text-red-600 hover:text-red-800 font-bold border border-red-100 bg-red-50 px-3 py-2 rounded hover:bg-red-100 transition",children:"Remover Inscrio"})})]},k.id))})]}),f.jsx(ms,{isOpen:!!p,onClose:()=>y(null),title:"Remover Inscrio",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-700",children:"Tem certeza que deseja remover a inscrio deste aluno? A vaga ser liberada imediatamente."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar Remoo"})]})]})})]}):f.jsx("div",{className:"p-8 text-center",children:"Evento no encontrado."})},O4=()=>{const[i,e]=R.useState(!1),[n,r]=R.useState(!1),[o,c]=R.useState(null),u=()=>{c(null),r(!0)},p=async()=>{e(!0),c(null);try{await Ve.resetAndSeedData(),c({type:"success",msg:"Dados gerados com sucesso! Recarregando sistema..."}),setTimeout(()=>{window.location.reload()},2e3)}catch(y){console.error(y),c({type:"error",msg:"Ocorreu um erro ao gerar os dados."}),e(!1)}};return f.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto mt-10",children:[f.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Ferramentas de Desenvolvimento"}),f.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:[f.jsx("p",{children:"Utilize esta funo para popular o banco de dados local com informaes de teste."}),f.jsx("p",{className:"mt-2 font-bold text-red-500",children:"Isso  destrutivo e sobrescrever todos os dados existentes."})]}),f.jsx("div",{className:"mt-5",children:f.jsx("button",{type:"button",onClick:u,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:" Resetar e Gerar Massa de Dados"})})]})}),f.jsxs("div",{className:"bg-indigo-50 p-4 rounded-md border border-indigo-100",children:[f.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"O que ser gerado?"}),f.jsxs("ul",{className:"list-disc list-inside text-sm text-indigo-700 space-y-1",children:[f.jsx("li",{children:"Cursos: CC, Direito, Medicina, Design."}),f.jsx("li",{children:"Turmas associadas a cada curso."}),f.jsx("li",{children:"Usurios: 1 Admin (admin@school.com), 3 Alunos com perfis variados."}),f.jsx("li",{children:"Eventos Pblicos e Restritos (por curso/turma)."}),f.jsx("li",{children:"Hierarquia: Semana Acadmica com 2 sub-eventos."})]})]}),f.jsx(ms,{isOpen:n,onClose:()=>!i&&r(!1),title:"Confirmar Reset",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza absoluta? Essa ao apagar ",f.jsx("strong",{children:"todos"})," os usurios, eventos e inscries atuais e criar dados fictcios."]}),o&&f.jsx("div",{className:`p-3 rounded text-sm font-bold text-center ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.msg}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{onClick:()=>r(!1),disabled:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800 disabled:opacity-50",children:"Cancelar"}),f.jsxs("button",{onClick:p,disabled:i,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold disabled:opacity-50 flex items-center",children:[i&&f.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Gerando...":"Sim, Resetar Tudo"]})]})]})})]})},M4=()=>{const{user:i}=Gi(),[e,n]=R.useState([]),[r,o]=R.useState(null),[c,u]=R.useState(!0),p=async()=>{if(i){u(!0);try{const g=await Ve.getEnrollmentsForUser(i.uid);if(g.length===0){n([]),u(!1);return}const x=[...new Set(g.map(L=>L.eventId))],b=await Ve.getEventsByIds(x),T=new Map(b.map(L=>[L.id,L])),O=g.map(L=>{const k=T.get(L.eventId);if(!k)return null;const P=k.sessions.find(G=>G.id===L.sessionId);return P?{enrollment:L,event:k,session:P}:null}).filter(Boolean);n(O)}catch(g){console.error("Failed to load enrollments data:",g),n([])}finally{u(!1)}}};R.useEffect(()=>{p()},[i]);const y=async()=>{if(r){u(!0);try{await Ve.cancelEnrollment(r)}catch(g){console.error(g)}finally{o(null),p()}}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Minha Agenda"}),c?f.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center text-gray-500",children:"Carregando suas inscries..."}):e.length===0?f.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center text-gray-500",children:"Voc ainda no se inscreveu em nenhum evento."}):f.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:f.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(({enrollment:g,event:x,session:b})=>f.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-primary",children:x.name}),f.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:[" ",nn(b.date),"   ",b.startTime," - ",b.endTime]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[" ",x.location]})]}),f.jsx("div",{children:f.jsx("button",{onClick:()=>o(g.id),className:"w-full sm:w-auto text-sm text-red-600 hover:text-red-800 border border-red-200 px-3 py-2 rounded hover:bg-red-50 transition flex justify-center",children:"Cancelar Inscrio"})})]},g.id))})}),f.jsx(ms,{isOpen:!!r,onClose:()=>o(null),title:"Confirmar Cancelamento",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-700",children:"Tem certeza que deseja cancelar sua inscrio neste evento? A vaga ser liberada para outro participante."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Manter Inscrio"}),f.jsx("button",{onClick:y,disabled:c,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:c?"Processando...":"Sim, Cancelar"})]})]})})]})},V4=()=>{const[i,e]=R.useState([]);R.useEffect(()=>{(async()=>{const o=await Ve.getPublicEvents();e(o.slice(0,3))})()},[]);const n=()=>{const r=document.getElementById("eventos");r&&r.scrollIntoView({behavior:"smooth"})};return f.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-sans",children:[f.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-20 items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-gray-900 font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(gt,{to:"/login",className:"text-gray-500 hover:text-primary font-medium px-3 py-2 transition-colors",children:"Login"}),f.jsx(gt,{to:"/login",className:"bg-primary hover:bg-indigo-700 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-indigo-200 transition-all transform hover:-translate-y-0.5",children:"Inscrever-se"})]})]})})}),f.jsxs("div",{className:"relative overflow-hidden",children:[f.jsx("div",{className:"max-w-7xl mx-auto",children:f.jsx("div",{className:"relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32 pt-20 px-4 sm:px-6 lg:px-8",children:f.jsx("main",{className:"mt-10 mx-auto max-w-7xl sm:mt-12 md:mt-16 lg:mt-20 xl:mt-28",children:f.jsxs("div",{className:"sm:text-center lg:text-left",children:[f.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full border border-indigo-100 bg-indigo-50 text-primary text-xs font-bold uppercase tracking-wide mb-4",children:" Gesto de Eventos Acadmicos"}),f.jsxs("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl mb-6",children:[f.jsx("span",{className:"block",children:"Organize sua agenda"}),f.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600",children:"escolar com inteligncia"})]}),f.jsx("p",{className:"mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 leading-relaxed",children:"Nunca mais perca um workshop ou palestra. O EduEvent centraliza inscries, gerencia conflitos de horrio e mantm voc atualizado sobre todas as atividades do campus."}),f.jsxs("div",{className:"mt-8 sm:mt-10 sm:flex sm:justify-center lg:justify-start gap-4",children:[f.jsx("div",{className:"rounded-md shadow",children:f.jsx(gt,{to:"/login",className:"w-full flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-xl text-white bg-primary hover:bg-indigo-700 md:py-4 md:text-lg transition-all shadow-xl shadow-indigo-200",children:"Comear Agora"})}),f.jsx("div",{className:"mt-3 sm:mt-0",children:f.jsx("button",{onClick:n,className:"w-full flex items-center justify-center px-8 py-4 border border-gray-200 text-base font-bold rounded-xl text-gray-700 bg-white hover:bg-gray-50 md:py-4 md:text-lg transition-all",children:"Explorar Eventos"})})]})]})})})}),f.jsxs("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2",children:[f.jsx("img",{className:"h-56 w-full object-cover sm:h-72 md:h-96 lg:w-full lg:h-full",src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",alt:"Estudantes interagindo no campus"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/50 to-transparent lg:via-white/20"})]})]}),f.jsx("div",{className:"bg-indigo-900 py-12 border-y border-indigo-800",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"+1.5k"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Alunos Ativos"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"350+"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Eventos Realizados"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"100%"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Organizado"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"24/7"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Disponvel"})]})]})})}),f.jsx("div",{className:"py-24 bg-gray-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-base text-primary font-bold tracking-wide uppercase",children:"Recursos"}),f.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Tudo que voc precisa para gerenciar atividades"}),f.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 mx-auto",children:"Nossa plataforma foi desenhada para simplificar a vida acadmica, eliminando planilhas e confuso."})]}),f.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Gesto de Tempo Real"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"O sistema impede automaticamente inscries em eventos com horrios conflitantes. Nunca mais se preocupe com choque de agenda."})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-emerald-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrio Instantnea"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Garanta sua vaga em workshops e palestras com apenas um clique. Receba confirmao imediata e acompanhe seu status."})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Acesso Mobile"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Plataforma totalmente responsiva. Consulte seus eventos, locais e horrios diretamente do seu smartphone, onde estiver."})]})]})]})}),f.jsxs("div",{id:"eventos",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 w-full",children:[f.jsxs("div",{className:"flex justify-between items-end mb-12",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Prximos Eventos"}),f.jsx("p",{className:"mt-2 text-gray-500",children:"Confira o que est rolando no campus esta semana."})]}),f.jsxs(gt,{to:"/login",className:"hidden md:flex items-center font-bold text-primary hover:text-indigo-700 transition",children:["Ver todos os eventos ",f.jsx("span",{className:"ml-2",children:""})]})]}),i.length===0?f.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-3xl border border-dashed border-gray-300",children:f.jsx("p",{className:"text-gray-400 text-lg",children:"Nenhum evento pblico em destaque no momento."})}):f.jsx("div",{className:"grid gap-8 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:i.map(r=>{var p;const o=(p=r.sessions[0])!=null&&p.date?new Date(r.sessions[0].date):new Date,c=o.getDate(),u=o.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return f.jsxs("div",{className:"group flex flex-col bg-white rounded-2xl shadow-sm hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden hover:-translate-y-1",children:[f.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{className:"bg-indigo-50 text-primary rounded-lg p-2 text-center min-w-[60px]",children:[f.jsx("span",{className:"block text-xs font-bold",children:u}),f.jsx("span",{className:"block text-xl font-extrabold leading-none",children:c})]}),f.jsxs("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold",children:[r.sessions.length," Sesses"]})]}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:r.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-3 mb-4 flex-1",children:r.description}),f.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-auto pt-4 border-t border-gray-50",children:[f.jsxs("svg",{className:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.location]})]}),f.jsx("div",{className:"bg-gray-50 px-6 py-4",children:f.jsx(gt,{to:"/login",className:"block w-full text-center font-bold text-primary hover:text-indigo-800 transition",children:"Garantir Vaga "})})]},r.id)})}),f.jsx("div",{className:"mt-8 text-center md:hidden",children:f.jsx(gt,{to:"/login",className:"font-bold text-primary",children:"Ver todos os eventos "})})]}),f.jsx("div",{className:"bg-primary",children:f.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between",children:[f.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl mb-4 md:mb-0",children:[f.jsx("span",{className:"block",children:"Pronto para organizar sua agenda?"}),f.jsx("span",{className:"block text-indigo-200 text-2xl mt-1",children:"Crie sua conta gratuitamente hoje mesmo."})]}),f.jsx("div",{className:"flex space-x-3",children:f.jsx(gt,{to:"/login",className:"bg-white text-primary font-bold px-6 py-3 rounded-lg shadow hover:bg-indigo-50 transition",children:"Criar Conta"})})]})}),f.jsx("footer",{className:"bg-gray-900 text-white mt-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-2xl font-bold tracking-tight text-white",children:"EduEvent"}),f.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Facilitando a gesto de eventos acadmicos e conectando alunos ao conhecimento de forma organizada e eficiente."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Plataforma"}),f.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Eventos"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Cursos"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Login Administrativo"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Contato"}),f.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[f.jsxs("li",{className:"flex items-center",children:[f.jsx("span",{className:"mr-2",children:""})," suporte@eduevent.com"]}),f.jsxs("li",{className:"flex items-center",children:[f.jsx("span",{className:"mr-2",children:""})," Campus Principal, Bloco A"]})]})]})]}),f.jsx("div",{className:"mt-12 border-t border-gray-800 pt-8 text-center text-sm text-gray-500",children:" 2024 EduEvent System. Todos os direitos reservados."})]})})]})},k4=()=>{const{id:i}=cE(),{user:e}=Gi(),n=Qr(),[r,o]=R.useState(null),[c,u]=R.useState([]),[p,y]=R.useState([]),[g,x]=R.useState(!0),[b,T]=R.useState(null),O=R.useCallback(()=>{T(null),Y()},[]),{handleEnroll:L,isEnrolling:k,feedback:P,conflictData:G,clearState:J}=zw(e,O),Y=R.useCallback(async()=>{if(!(!i||!e)){x(!0);try{const[le,C,N]=await Promise.all([Ve.getEventById(i),Ve.getEventsByParentId(i),Ve.getEnrollmentsForUser(e.uid)]);if(!le){n("/dashboard");return}o(le),u(C),y(N)}catch(le){console.error(le)}finally{x(!1)}}},[i,e,n]);R.useEffect(()=>{Y()},[Y]),R.useEffect(()=>{if(b){const C=[r,...c].filter(Boolean).find(N=>N.id===b.id);C&&C!==b&&T(C)}},[r,c,b]);const de=(le,C)=>p.some(N=>N.eventId===le&&N.sessionId===C),ye=le=>{J(),T(le)};return g?f.jsx("div",{className:"p-12 text-center text-gray-500 font-medium",children:"Carregando detalhes do evento..."}):r?f.jsxs("div",{className:"space-y-8 pb-12",children:[f.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:f.jsxs("ol",{className:"flex items-center space-x-2",children:[f.jsx("li",{children:f.jsx(gt,{to:"/dashboard",className:"text-gray-500 hover:text-primary font-medium transition",children:"Eventos"})}),f.jsx("li",{children:f.jsx("span",{className:"text-gray-300",children:"/"})}),f.jsx("li",{className:"text-gray-900 font-semibold","aria-current":"page",children:r.name})]})}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 relative",children:[f.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),f.jsx("div",{className:"p-8 md:p-10",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-xs font-bold uppercase tracking-wide mb-4 border border-indigo-100",children:"Evento Principal"}),f.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mb-4 leading-tight",children:r.name}),f.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-6 max-w-4xl",children:r.description}),f.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 text-sm font-medium",children:[f.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-1.5 rounded-lg",children:[f.jsx("span",{className:"mr-2 text-xl",children:""})," ",r.location]}),f.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-1.5 rounded-lg",children:[f.jsx("span",{className:"mr-2 text-xl",children:""})," ",r.sessions.length," Sesses Principais"]})]})]}),r.sessions.length>0&&f.jsx("div",{className:"flex-shrink-0",children:f.jsxs("button",{onClick:()=>ye(r),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao Geral",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Atividades & Sub-eventos"}),f.jsx("div",{className:"h-px bg-gray-200 flex-1"})]}),c.length===0?f.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[f.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),f.jsx("p",{className:"text-gray-500 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(le=>{const C=le.sessions.length===1?le.sessions[0]:null,N=C?C.capacity:0,I=C?C.filled:0,U=N>0?I/N*100:0,M=N>0&&I>=N;return f.jsxs("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col relative",children:[f.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 group-hover:bg-primary transition-colors"}),f.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary transition-colors",children:le.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-3 mb-4 flex-1",children:le.description}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mt-auto pt-4 border-t border-gray-50",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"w-6 text-center mr-2 text-gray-400",children:""}),f.jsx("span",{className:"font-medium",children:le.location})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"w-6 text-center mr-2 text-gray-400",children:""}),f.jsx("span",{className:"font-medium",children:le.sessions.length>1?`${le.sessions.length} opes de horrio`:`${nn(C==null?void 0:C.date)}  ${C==null?void 0:C.startTime}`})]})]}),C&&f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:f.jsx("span",{className:M?"text-red-600":"text-gray-500",children:M?"LOTADO":`${N-I} vagas`})}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:f.jsx("div",{className:`h-full rounded-full ${M?"bg-red-500":"bg-emerald-500"}`,style:{width:`${U}%`}})})]})]}),f.jsx("button",{onClick:()=>ye(le),className:"w-full py-3 bg-gray-50 hover:bg-primary hover:text-white text-primary font-bold text-sm transition-colors border-t border-gray-100",children:le.sessions.length>1?"Escolher Horrio":M?"Ver Detalhes":"Inscrever-se Agora"})]},le.id)})}),f.jsx(ms,{isOpen:!!b,onClose:()=>T(null),title:b?b.name:"",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:f.jsx("p",{className:"text-gray-700 leading-relaxed",children:b==null?void 0:b.description})}),P&&f.jsxs("div",{className:`p-4 rounded-md border flex items-start ${P.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[f.jsx("span",{className:"mr-3 text-xl",children:P.type==="success"?"":""}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold",children:P.type==="success"?"Sucesso!":"Erro"}),f.jsx("p",{className:"text-sm",children:P.msg})]})]}),G&&f.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-bold text-amber-800",children:"Conflito de Horrio"}),f.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[f.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),f.jsxs("div",{className:"bg-white bg-opacity-50 p-2 rounded border border-amber-200",children:[f.jsx("p",{className:"font-semibold",children:G.name}),f.jsx("p",{className:"text-xs",children:G.time})]})]})]})]})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[f.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:b==null?void 0:b.sessions.map(le=>{const C=de(b.id,le.id),N=le.filled>=le.capacity,I=le.filled/le.capacity*100;return f.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${C?"border-green-500 bg-green-50 ring-1 ring-green-500":N?"border-gray-200 bg-gray-50 opacity-90":"border-gray-200 hover:border-primary hover:shadow-md bg-white"}`,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-bold text-gray-900 text-lg",children:nn(le.date)}),C&&f.jsx("span",{className:"bg-green-200 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),f.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-4",children:f.jsxs("span",{className:"flex items-center",children:[" ",le.startTime," - ",le.endTime]})}),f.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${N?"bg-red-500":I>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(I,100)}%`}})}),f.jsx("span",{className:`text-xs font-bold w-24 text-right ${N?"text-red-600":"text-gray-500"}`,children:N?"ESGOTADO":`${le.capacity-le.filled} vagas`})]})]}),f.jsx("div",{className:"flex items-center",children:C?f.jsx("button",{disabled:!0,className:"w-full sm:w-auto bg-white border border-green-500 text-green-600 font-bold py-2 px-4 rounded-lg opacity-100",children:"Inscrito"}):f.jsx("button",{onClick:()=>b&&L(b,le.id),disabled:N||k,className:`w-full sm:w-auto px-6 py-2.5 rounded-lg font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all ${N?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-indigo-700 hover:shadow-md"} disabled:opacity-70`,children:k?"Inscrevendo...":N?"Lotado":"Inscrever"})})]})},le.id)})})]})]})})]}):f.jsx("div",{className:"p-12 text-center text-red-500 font-bold",children:"Evento no encontrado."})},Di=({children:i,roleRequired:e})=>{const{user:n,loading:r}=Gi();return r?f.jsx("div",{className:"h-screen flex items-center justify-center",children:"Carregando..."}):n?!n.isOnboarded&&window.location.hash!=="#/complete-profile"?f.jsx(Id,{to:"/complete-profile"}):e&&n.role!==e?f.jsx(Id,{to:"/dashboard"}):f.jsx(f.Fragment,{children:i}):f.jsx(Id,{to:"/login"})},L4=()=>{const{user:i}=Gi();return f.jsxs(_1,{children:[f.jsx(ds,{path:"/",element:i?f.jsx(Id,{to:"/dashboard"}):f.jsx(V4,{})}),f.jsx(ds,{path:"/login",element:f.jsx(E4,{})}),f.jsx(ds,{path:"/complete-profile",element:f.jsx(Di,{children:f.jsx(b4,{})})}),f.jsx(ds,{path:"/dashboard",element:f.jsx(Di,{children:f.jsx(Sr,{children:f.jsx(S4,{})})})}),f.jsx(ds,{path:"/event/:id",element:f.jsx(Di,{children:f.jsx(Sr,{children:f.jsx(k4,{})})})}),f.jsx(ds,{path:"/my-enrollments",element:f.jsx(Di,{children:f.jsx(Sr,{children:f.jsx(M4,{})})})}),f.jsx(ds,{path:"/admin/events",element:f.jsx(Di,{roleRequired:nt.ADMIN,children:f.jsx(Sr,{children:f.jsx(N4,{})})})}),f.jsx(ds,{path:"/admin/events/:id/enrollments",element:f.jsx(Di,{roleRequired:nt.ADMIN,children:f.jsx(Sr,{children:f.jsx(j4,{})})})}),f.jsx(ds,{path:"/admin/courses",element:f.jsx(Di,{roleRequired:nt.ADMIN,children:f.jsx(Sr,{children:f.jsx(D4,{})})})}),f.jsx(ds,{path:"/admin/users",element:f.jsx(Di,{roleRequired:nt.ADMIN,children:f.jsx(Sr,{children:f.jsx(R4,{})})})}),f.jsx(ds,{path:"/admin/dev",element:f.jsx(Di,{roleRequired:nt.ADMIN,children:f.jsx(Sr,{children:f.jsx(O4,{})})})})]})};function P4(){return f.jsx(x4,{children:f.jsx(q1,{children:f.jsx(L4,{})})})}const Bw=document.getElementById("root");if(!Bw)throw new Error("Could not find root element to mount to");const U4=CS.createRoot(Bw);U4.render(f.jsx(Mc.StrictMode,{children:f.jsx(P4,{})}));
