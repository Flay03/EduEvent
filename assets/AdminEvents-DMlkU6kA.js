import{r as d,u as R,a as K,s as $,R as ee,j as e,f as G,b as re,M as Z,L as X,c as ae,S as te,E as se,C as de}from"./index-Dq5zgPk1.js";const oe=10,ne=()=>{const[n,l]=d.useState([]),[S,M]=d.useState(!1),[y,m]=d.useState(!1),{addToast:E}=R(),[i,f]=d.useState(1),[v,b]=d.useState([void 0]),[D,k]=d.useState(!0),[o,a]=d.useState(""),x=K(o,300),[p,T]=d.useState({searchTerm:"",visibility:"",course:""}),j=d.useCallback(async(t,h)=>{M(!0);try{const N=v[t-1],{data:L,nextCursor:A}=await $.getEvents({limit:oe,cursor:N,filters:h});l(L),k(!!A),A&&v.length<=t&&b(z=>{const O=[...z];return O[t]=A,O})}catch(N){console.error("Error fetching events",N),E("error","Erro ao carregar eventos.")}finally{M(!1)}},[v,E]);return d.useEffect(()=>{T(t=>({...t,searchTerm:x}))},[x]),d.useEffect(()=>{b([void 0]),f(1),j(1,p)},[p]),{events:n,loading:S,processing:y,currentPage:i,hasNextPage:D,localSearchTerm:o,filters:p,setLocalSearchTerm:a,setFilters:T,handleNextPage:()=>{if(!D)return;const t=i+1;f(t),j(t,p)},handlePrevPage:()=>{if(i===1)return;const t=i-1;f(t),j(t,p)},deleteEvent:async t=>{m(!0);try{await $.deleteEvent(t),E("success","Evento removido!"),j(i,p)}catch(h){console.error(h),E("error","Erro ao excluir evento.")}finally{m(!1)}},refreshEvents:()=>{j(i,p)}}},Q=ee.memo(({evt:n,isNested:l,onOpenSubEvent:S,onManageEnrollments:M,onEdit:y,onDelete:m,onConfigPage:E})=>{const i=!l&&!!n.parentId,f=!n.parentId,v=n.sessions.reduce((C,g)=>C+g.capacity,0),b=n.sessions.reduce((C,g)=>C+g.filled,0),D=v>0?b/v*100:0,k=v>0&&b>=v;let o="bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",a="P√∫blico";n.visibility==="course"&&(o="bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300",a="Curso"),n.visibility==="class"&&(o="bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",a="Turma");const x="relative transition-all duration-200 border-b border-gray-100 dark:border-gray-700 last:border-0",p="bg-gray-50/80 hover:bg-gray-100 dark:bg-gray-800/40 dark:hover:bg-gray-800",j=i?"bg-yellow-50/50 hover:bg-yellow-100/50 dark:bg-yellow-900/10 dark:hover:bg-yellow-900/20":"bg-white hover:bg-gray-50 dark:bg-darkcard dark:hover:bg-gray-800/60";return e.jsxs("li",{className:`${x} ${l?p:j}`,children:[l&&e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-12 flex justify-center",children:[e.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 h-full absolute left-6 -top-1/2"}),e.jsx("div",{className:"absolute top-1/2 left-6 w-4 h-px bg-gray-300 dark:bg-gray-600"})]}),e.jsxs("div",{className:`px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between ${l?"pl-14":""}`,children:[e.jsxs("div",{className:"mb-4 sm:mb-0 flex-1 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l&&e.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:"Sub"}),i&&e.jsx("span",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider bg-amber-100 dark:bg-amber-900/40 px-1.5 py-0.5 rounded flex items-center",title:"Este √© um sub-evento cujo evento principal n√£o est√° sendo exibido nesta lista (talvez esteja em outra p√°gina).",children:"‚Ü≥ Sub-evento"}),n.isTeamEvent&&e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider bg-indigo-500 px-1.5 py-0.5 rounded shadow-sm",children:"Equipe"}),e.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${f?"text-lg":"text-base"}`,children:n.name}),n.hasDedicatedPage&&!l&&e.jsx("a",{href:`#/special/${n.id}`,target:"_blank",rel:"noreferrer",className:"text-[10px] font-bold bg-amber-100 text-amber-700 hover:bg-amber-200 dark:bg-amber-900/40 dark:text-amber-300 px-1.5 py-0.5 rounded border border-amber-200 dark:border-amber-700 ml-2 flex items-center gap-1",title:"Ver P√°gina Dedicada","aria-label":`Ver p√°gina dedicada do evento ${n.name}`,children:"‚≠ê PAGE ‚Üó"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 flex flex-wrap gap-3 items-center",children:[e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${o}`,children:a}),e.jsxs("span",{className:"flex items-center text-gray-400 dark:text-gray-500",title:"Sess√µes cadastradas",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n.sessions.length," sess√µes"]})]}),e.jsxs("div",{className:"mt-3 w-full max-w-[200px]",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 dark:text-gray-400 mb-1 uppercase font-bold tracking-wide",children:[e.jsx("span",{children:n.isTeamEvent?"Equipes":"Ocupa√ß√£o"}),e.jsxs("span",{className:k?"text-red-600 dark:text-red-400":"",children:[b,"/",v]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${k?"bg-red-500":D>80?"bg-amber-400":"bg-primary"}`,style:{width:`${Math.min(D,100)}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-80 hover:opacity-100",children:[!l&&!i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(n),className:`p-2 rounded-md transition border ${n.hasDedicatedPage?"bg-amber-50 text-amber-600 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800":"text-gray-400 border-transparent hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:"Configurar P√°gina Dedicada","aria-label":`Configurar p√°gina dedicada para ${n.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),e.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"})]}),f&&e.jsx("button",{onClick:()=>S(n),className:"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-2 rounded-md transition",title:"Adicionar Sub-evento vinculado","aria-label":`Adicionar sub-evento a ${n.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>M(n),className:"text-gray-500 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 p-2 rounded-md transition",title:"Gerenciar Inscritos e Exportar","aria-label":`Gerenciar inscritos de ${n.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx("button",{onClick:()=>y(n),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 p-2 rounded-md transition",title:"Editar Evento","aria-label":`Editar evento ${n.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002 2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>m(n),className:"text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 p-2 rounded-md transition",title:"Excluir Evento","aria-label":`Excluir evento ${n.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})}),le=({onGenerate:n,dateLimits:l,isTeamEvent:S})=>{const{addToast:M}=R(),m=`${new Date().getFullYear()+2}-12-31`,E=50,[i,f]=d.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),[v,b]=d.useState(null),D=o=>{f(a=>({...a,daysOfWeek:a.daysOfWeek.includes(o)?a.daysOfWeek.filter(x=>x!==o):[...a.daysOfWeek,o]}))},k=()=>{b(null);const{startDate:o,endDate:a,startTime:x,endTime:p,capacity:T,daysOfWeek:j}=i;if(!o||!a||!x||!p||!j.length){b("Preencha todos os campos.");return}if(l&&(o<l.min||a>l.max)){b(`O intervalo deve estar entre ${G(l.min)} e ${G(l.max)}.`);return}if(a>m){b(`A gera√ß√£o √© limitada at√© ${G(m)}.`);return}if(x>=p){b("O hor√°rio de t√©rmino deve ser ap√≥s o hor√°rio de in√≠cio.");return}const C=new Date(`${o}T12:00:00Z`),g=new Date(`${a}T12:00:00Z`);if(C>g){b("A data de in√≠cio deve ser anterior √† de fim.");return}const w=[],u=new Date(C);let t=0;for(;u<=g&&(t++,!(t>1e3));)j.includes(u.getUTCDay())&&w.push({id:`sess_${u.getTime()}_${w.length}`,date:u.toISOString().split("T")[0],startTime:x,endTime:p,capacity:T,filled:0}),u.setDate(u.getDate()+1);if(w.length>E){b("Limite de seguran√ßa excedido. Tente um intervalo menor.");return}if(!w.length){b("Nenhuma data encontrada no intervalo para os dias selecionados.");return}n(w),M("success",`${w.length} sess√µes geradas.`),b(null)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"De"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:i.startDate,min:l==null?void 0:l.min,max:m,onChange:o=>f({...i,startDate:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"At√©"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:i.endDate,min:l==null?void 0:l.min,max:m,onChange:o=>f({...i,endDate:o.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:i.startTime,onChange:o=>f({...i,startTime:o.target.value})}),e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:i.endTime,onChange:o=>f({...i,endTime:o.target.value})}),e.jsx("input",{type:"number",placeholder:S?"Qtd Equipes":"Cap.",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:i.capacity,onChange:o=>f({...i,capacity:parseInt(o.target.value)})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map((o,a)=>e.jsx("button",{type:"button",onClick:()=>D(a),className:`text-xs w-8 h-8 rounded-full border flex items-center justify-center transition 
                            ${i.daysOfWeek.includes(a)?"bg-primary text-white border-primary":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600"}`,children:o.charAt(0)},o))}),e.jsx("button",{type:"button",onClick:k,className:"w-full bg-primary text-white py-2 rounded text-sm hover:bg-indigo-700 transition-colors font-medium",children:"Gerar Sess√µes"}),v&&e.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded",children:v})]})},ie=({isOpen:n,onClose:l,initialData:S,isTeamEventMode:M=!1,parentEvent:y,onSaveSuccess:m})=>{var _,V,W,q;const{user:E}=re(),{addToast:i}=R(),[f,v]=d.useState(!1),[b,D]=d.useState([]),[k,o]=d.useState([]),[a,x]=d.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0,isTeamEvent:!1}),[p,T]=d.useState("details"),[j,C]=d.useState("manual"),[g,w]=d.useState({date:"",startTime:"",endTime:"",capacity:30}),[u,t]=d.useState(null),[h,N]=d.useState(null);d.useEffect(()=>{(async()=>{const[r,c]=await Promise.all([$.getCourses(),$.getClasses()]);D(r),o(c)})()},[]),d.useEffect(()=>{var s;if(n)if(T("details"),C("manual"),w({date:"",startTime:"",endTime:"",capacity:30}),N(null),x(S||{name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:y?y.id:void 0,isTeamEvent:M}),y&&((s=y.sessions)!=null&&s.length)){const r=y.sessions.map(c=>c.date).sort();t({min:r[0],max:r[r.length-1]})}else t(null)},[n,S,M,y]);const L=s=>{const r=s.target.value;x(c=>({...c,visibility:r,allowedCourses:r==="public"||r==="class"?[]:c.allowedCourses,allowedClasses:r==="public"||r==="course"?[]:c.allowedClasses}))},A=s=>x(r=>{var c;return{...r,allowedCourses:(c=r.allowedCourses)!=null&&c.includes(s)?r.allowedCourses.filter(I=>I!==s):[...r.allowedCourses||[],s]}}),z=s=>x(r=>{var c;return{...r,allowedClasses:(c=r.allowedClasses)!=null&&c.includes(s)?r.allowedClasses.filter(I=>I!==s):[...r.allowedClasses||[],s]}}),O=()=>{if(!g.date||!g.startTime||!g.endTime)return;if(u&&(g.date<u.min||g.date>u.max)){N(`A data deve estar entre ${G(u.min)} e ${G(u.max)}.`);return}if(g.startTime>=g.endTime){N("O hor√°rio de t√©rmino deve ser ap√≥s o hor√°rio de in√≠cio.");return}const s={id:`sess_${Date.now()}`,date:g.date,startTime:g.startTime,endTime:g.endTime,capacity:g.capacity||30,filled:0};x(r=>({...r,sessions:[...r.sessions||[],s]})),w({date:"",startTime:"",endTime:"",capacity:30}),N(null)},F=s=>{x(r=>({...r,sessions:[...r.sessions||[],...s]}))},U=s=>{x(r=>{var c;return{...r,sessions:(c=r.sessions)==null?void 0:c.filter((I,P)=>P!==s)}})},B=async s=>{var r,c;if(s.preventDefault(),!a.name||!((r=a.sessions)!=null&&r.length)){N("Nome e ao menos uma sess√£o s√£o obrigat√≥rios."),a.name&&!((c=a.sessions)!=null&&c.length)&&T("sessions");return}v(!0);try{a.id?(await $.updateEvent(a),i("success","Evento atualizado!")):(await $.createEvent({...a,id:`evt_${Date.now()}`,createdAt:new Date().toISOString(),createdBy:(E==null?void 0:E.uid)||""}),i("success","Evento criado!")),m(),l()}catch(I){console.error(I),i("error","Erro ao salvar evento.")}finally{v(!1)}},H=a.id?a.isTeamEvent?"Editar Evento por Equipe":"Editar Evento":y?"Adicionar Sub-evento":a.isTeamEvent?"Criar Novo Evento por Equipe":"Criar Novo Evento";return e.jsx(Z,{isOpen:n,onClose:l,title:H,children:e.jsxs("form",{onSubmit:B,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 mb-4 overflow-x-auto",children:[e.jsx("button",{type:"button",onClick:()=>T("details"),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${p==="details"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"1. Detalhes"}),e.jsxs("button",{type:"button",onClick:()=>T("sessions"),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${p==="sessions"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:["2. Sess√µes (",((_=a.sessions)==null?void 0:_.length)||0,")"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4",children:[p==="details"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.isTeamEvent&&e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-800 dark:text-indigo-300 p-3 rounded-md text-sm mb-4 border border-indigo-200 dark:border-indigo-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:"üë•"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Modo Evento por Equipe:"}),e.jsx("br",{}),"Neste modo, os usu√°rios se inscrevem em grupos. O sistema gerenciar√° c√≥digos de acesso e membros."]})]}),y&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 p-3 rounded-md text-sm mb-4",children:["Vinculado ao evento pai: ",e.jsx("strong",{children:y.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome do Evento *"}),e.jsx("input",{type:"text",required:!0,placeholder:"Ex: Feira de Ci√™ncias",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:a.name,onChange:s=>x({...a,name:s.target.value})})]}),e.jsxs("div",{className:y?"opacity-50 pointer-events-none":"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibilidade"}),e.jsxs("select",{value:a.visibility,onChange:L,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",disabled:!!y,children:[e.jsx("option",{value:"public",children:"P√∫blico (Todos podem ver)"}),e.jsx("option",{value:"course",children:"Restrito a Cursos"}),e.jsx("option",{value:"class",children:"Restrito a Turmas"})]}),a.visibility==="course"&&e.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione os cursos permitidos:"}),b.map(s=>{var r;return e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",id:`c_${s.id}`,checked:(r=a.allowedCourses)==null?void 0:r.includes(s.id),onChange:()=>A(s.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),e.jsx("label",{htmlFor:`c_${s.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:s.name})]},s.id)})]}),a.visibility==="class"&&e.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione as turmas permitidas:"}),b.map(s=>e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-xs text-gray-900 dark:text-gray-200 block mb-1",children:s.name}),e.jsx("div",{className:"pl-2",children:k.filter(r=>r.courseId===s.id).map(r=>{var c;return e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",id:`cl_${r.id}`,checked:(c=a.allowedClasses)==null?void 0:c.includes(r.id),onChange:()=>z(r.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),e.jsx("label",{htmlFor:`cl_${r.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:r.name})]},r.id)})})]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Local"}),e.jsx("input",{type:"text",placeholder:"Ex: Audit√≥rio Principal",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:a.location,onChange:s=>x({...a,location:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descri√ß√£o"}),e.jsx("textarea",{placeholder:"Detalhes do evento...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",rows:3,value:a.description,onChange:s=>x({...a,description:s.target.value})})]})]}),p==="sessions"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[u&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 p-3 text-sm text-amber-800 dark:text-amber-300",children:["üìÖ ",e.jsx("strong",{children:"Restri√ß√£o de Data:"})," Este sub-evento deve ocorrer entre ",G(u.min)," e ",G(u.max),"."]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("button",{type:"button",onClick:()=>C("manual"),className:`flex-1 py-2 text-sm font-medium ${j==="manual"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Adicionar Manual"}),e.jsx("button",{type:"button",onClick:()=>C("recurring"),className:`flex-1 py-2 text-sm font-medium ${j==="recurring"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Gerar Recorr√™ncia"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:[j==="manual"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Data"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.date,min:u==null?void 0:u.min,max:u==null?void 0:u.max,onChange:s=>w({...g,date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"In√≠cio"}),e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.startTime,onChange:s=>w({...g,startTime:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fim"}),e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.endTime,onChange:s=>w({...g,endTime:s.target.value})})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.isTeamEvent?"N¬∫ de Equipes":"Vagas"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.capacity,onChange:s=>w({...g,capacity:parseInt(s.target.value)})})]}),e.jsx("button",{type:"button",onClick:O,className:"bg-white dark:bg-gray-700 border border-primary dark:border-indigo-500 text-primary dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-gray-600 px-4 py-1.5 rounded text-sm font-medium h-[34px]",children:"+ Adicionar"})]}),h&&e.jsx("div",{className:"sm:col-span-2 mt-2 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded",children:h})]}),j==="recurring"&&e.jsx(le,{onGenerate:F,dateLimits:u,isTeamEvent:a.isTeamEvent})]})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex justify-between items-center",children:["Sess√µes Geradas",e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:((V=a.sessions)==null?void 0:V.length)||0})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md max-h-48 overflow-y-auto bg-white dark:bg-gray-800 divide-y divide-gray-100 dark:divide-gray-700",children:[((W=a.sessions)==null?void 0:W.length)===0&&e.jsx("p",{className:"text-sm text-gray-400 text-center py-6 italic",children:"Nenhuma sess√£o adicionada ainda."}),(q=a.sessions)==null?void 0:q.slice().sort((s,r)=>s.date.localeCompare(r.date)).map((s,r)=>e.jsxs("div",{className:"p-2.5 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/50 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:G(s.date)}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.startTime," - ",s.endTime," ‚Ä¢ ",s.capacity," ",a.isTeamEvent?"equipes":"vagas"]})]}),e.jsx("button",{type:"button",onClick:()=>U(r),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400 p-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},r))]})]})]})]}),e.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),e.jsx(X,{type:"submit",isLoading:f,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar Evento"})]})]})})},ce=({isOpen:n,onClose:l,eventId:S,eventName:M,initialHasPage:y,initialConfig:m,onSaveSuccess:E})=>{const{addToast:i}=R(),[f,v]=d.useState(!1),[b,D]=d.useState(y),[k,o]=d.useState({schedule:[],gallery:[],themeColor:"#4F46E5",presentationText:""}),[a,x]=d.useState({time:"",title:"",description:""}),[p,T]=d.useState("");d.useEffect(()=>{n&&(D(y),o({schedule:(m==null?void 0:m.schedule)||[],gallery:(m==null?void 0:m.gallery)||[],themeColor:(m==null?void 0:m.themeColor)||"#4F46E5",presentationText:(m==null?void 0:m.presentationText)||""}))},[n,y,m]);const j=async t=>{t.preventDefault(),v(!0);try{const h=await $.getEventById(S);if(h){const N={...h,hasDedicatedPage:b,dedicatedPageConfig:k};await $.updateEvent(N),i("success","Configura√ß√£o da p√°gina salva!"),E(),l()}}catch(h){console.error(h),i("error","Erro ao salvar configura√ß√£o.")}finally{v(!1)}},C=()=>{if(!a.time||!a.title)return;const t={id:`sch_${Date.now()}`,...a};o(h=>({...h,schedule:[...h.schedule,t]})),x({time:"",title:"",description:""})},g=t=>{o(h=>({...h,schedule:h.schedule.filter(N=>N.id!==t)}))},w=()=>{if(!p)return;const t={id:`img_${Date.now()}`,url:p};o(h=>({...h,gallery:[...h.gallery,t]})),T("")},u=t=>{o(h=>({...h,gallery:h.gallery.filter(N=>N.id!==t)}))};return e.jsx(Z,{isOpen:n,onClose:l,title:`P√°gina Dedicada: ${M}`,children:e.jsxs("form",{onSubmit:j,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4 space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-200 dark:border-amber-900/30",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-amber-900 dark:text-amber-400",children:"Habilitar P√°gina Dedicada"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-500",children:"Cria uma landing page exclusiva e p√∫blica para este evento."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:b,onChange:t=>D(t.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto de Apresenta√ß√£o (Hero)"}),e.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",rows:4,placeholder:"Uma descri√ß√£o detalhada e convidativa sobre o evento...",value:k.presentationText,onChange:t=>o({...k,presentationText:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cor do Tema"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",className:"h-10 w-20 p-0 border-0 rounded cursor-pointer",value:k.themeColor,onChange:t=>o({...k,themeColor:t.target.value})}),e.jsx("span",{className:"text-sm text-gray-500 uppercase",children:k.themeColor})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Cronograma Personalizado (Itens Extras)"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-md mb-3 space-y-2 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{type:"time",className:"border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:a.time,onChange:t=>x({...a,time:t.target.value})}),e.jsx("input",{type:"text",placeholder:"T√≠tulo",className:"col-span-2 border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:a.title,onChange:t=>x({...a,title:t.target.value})})]}),e.jsx("input",{type:"text",placeholder:"Descri√ß√£o (opcional)",className:"w-full border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:a.description,onChange:t=>x({...a,description:t.target.value})}),e.jsx("button",{type:"button",onClick:C,className:"w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 text-xs font-bold py-1.5 rounded hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Adicionar Item"})]}),e.jsx("ul",{className:"space-y-2",children:k.schedule.map(t=>e.jsxs("li",{className:"flex justify-between items-center text-sm bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-2 rounded shadow-sm",children:[e.jsxs("div",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("span",{className:"font-bold mr-2 text-primary dark:text-indigo-400",children:t.time}),t.title]}),e.jsx("button",{type:"button",onClick:()=>g(t.id),className:"text-red-500 hover:text-red-700 px-2",children:"√ó"})]},t.id))})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Galeria de Imagens"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Insira URLs de imagens para o destaque e galeria."}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"url",placeholder:"https://...",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:p,onChange:t=>T(t.target.value)}),e.jsx("button",{type:"button",onClick:w,className:"bg-primary text-white px-3 py-1 rounded text-xs font-bold hover:bg-indigo-700 transition-colors",children:"Adicionar"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:k.gallery.map(t=>e.jsxs("div",{className:"relative group aspect-square bg-gray-100 dark:bg-gray-800 rounded-md overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("img",{src:t.url,alt:"Gallery",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>u(t.id),className:"absolute top-1 right-1 bg-red-500/80 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"√ó"})]},t.id))})]})]})]}),e.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),e.jsx(X,{type:"submit",isLoading:f,className:"px-6 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar P√°gina"})]})]})})},xe=()=>{const n=ae(),{events:l,loading:S,processing:M,currentPage:y,hasNextPage:m,localSearchTerm:E,filters:i,setLocalSearchTerm:f,setFilters:v,handleNextPage:b,handlePrevPage:D,deleteEvent:k,refreshEvents:o}=ne(),[a,x]=d.useState([]),[p,T]=d.useState([]),[j,C]=d.useState(!1),[g,w]=d.useState(!1),[u,t]=d.useState(null),[h,N]=d.useState(void 0),[L,A]=d.useState(!1),[z,O]=d.useState(null),[F,U]=d.useState(null);d.useEffect(()=>{(async()=>{const[c,I]=await Promise.all([$.getCourses(),$.getClasses()]);x(c),T(I)})()},[]);const B=d.useMemo(()=>{const r=[],c={},I=new Set(l.map(P=>P.id));return l.forEach(P=>{P.parentId&&I.has(P.parentId)?(c[P.parentId]||(c[P.parentId]=[]),c[P.parentId].push(P)):r.push(P)}),r.sort((P,Y)=>(Y.createdAt||"").localeCompare(P.createdAt||"")),Object.values(c).forEach(P=>P.sort((Y,J)=>(Y.createdAt||"").localeCompare(J.createdAt||""))),{roots:r,childrenMap:c}},[l]),H=(r=!1)=>{t(null),N(void 0),A(r),C(!0)},_=d.useCallback(r=>{t(null),N(r),A(!!r.isTeamEvent),C(!0)},[]),V=d.useCallback(r=>{t(r),N(void 0),C(!0)},[]),W=d.useCallback(r=>{U({id:r.id,name:r.name,hasPage:r.hasDedicatedPage||!1,config:r.dedicatedPageConfig}),w(!0)},[]),q=d.useCallback(r=>O(r.id),[]),s=d.useCallback(r=>n(`/admin/events/${r.id}/enrollments`),[n]);return e.jsxs("div",{className:"container mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gerenciamento de Eventos"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Crie, edite e gerencie eventos e suas sess√µes."})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[e.jsxs("div",{className:"w-full xl:w-64 relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full pl-9 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:E,onChange:r=>f(r.target.value)}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 absolute left-2 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[e.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:i.visibility,onChange:r=>v({...i,visibility:r.target.value}),children:[e.jsx("option",{value:"",children:"Todas Visibilidades"}),e.jsx("option",{value:"public",children:"P√∫blico"}),e.jsx("option",{value:"course",children:"Por Curso"}),e.jsx("option",{value:"class",children:"Por Turma"})]}),e.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:i.course,onChange:r=>v({...i,course:r.target.value}),children:[e.jsx("option",{value:"",children:"Todos os Cursos"}),a.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[e.jsx("button",{onClick:()=>H(!1),className:"flex-1 bg-primary text-white px-4 py-2 rounded-md font-bold whitespace-nowrap hover:bg-indigo-700 shadow-sm transition",children:"+ Evento"}),e.jsxs("button",{onClick:()=>H(!0),className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-md font-bold whitespace-nowrap hover:bg-indigo-800 shadow-sm transition flex items-center justify-center gap-2 border border-indigo-400/50",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"+ Equipe"]})]})]})]}),S?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((r,c)=>e.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm rounded-lg p-0 overflow-hidden border border-gray-100 dark:border-gray-700",children:e.jsx(te,{})},c))}):l.length===0?e.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 sm:rounded-lg p-8",children:e.jsx(se,{title:"Nenhum evento encontrado",description:"Tente ajustar os filtros ou crie um novo evento."})}):e.jsx("div",{className:"space-y-4",children:B.roots.map(r=>{const c=B.childrenMap[r.id]||[];return e.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden transition-shadow hover:shadow-md",children:e.jsxs("ul",{children:[e.jsx(Q,{evt:r,onOpenSubEvent:_,onManageEnrollments:s,onEdit:V,onDelete:q,onConfigPage:W}),c.map(I=>e.jsx(Q,{evt:I,isNested:!0,onOpenSubEvent:_,onManageEnrollments:s,onEdit:V,onDelete:q,onConfigPage:W},I.id))]})},r.id)})}),l.length>0&&e.jsx("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-lg px-4 py-3 flex items-center justify-between sm:px-6 shadow-sm",children:e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["P√°gina ",e.jsx("span",{className:"font-medium",children:y})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:D,disabled:y===1||S,className:"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Anterior"}),e.jsx("button",{onClick:b,disabled:!m||S,className:"relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Pr√≥ximo"})]})})]})}),e.jsx(de,{isOpen:!!z,onClose:()=>O(null),onConfirm:()=>z&&k(z).then(()=>O(null)),title:"Confirmar Exclus√£o",message:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Tem certeza que deseja excluir este evento?"}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-2 font-bold",children:"Sub-eventos vinculados tamb√©m ser√£o exclu√≠dos."})]}),isProcessing:M}),e.jsx(ie,{isOpen:j,onClose:()=>C(!1),initialData:u||void 0,isTeamEventMode:L,parentEvent:h,onSaveSuccess:o}),F&&e.jsx(ce,{isOpen:g,onClose:()=>w(!1),eventId:F.id,eventName:F.name,initialHasPage:F.hasPage,initialConfig:F.config,onSaveSuccess:o})]})};export{xe as AdminEvents};
