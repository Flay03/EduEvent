(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function zx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Tm={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function s1(){if(Fv)return sc;Fv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:c}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var Gv;function r1(){return Gv||(Gv=1,Tm.exports=s1()),Tm.exports}var f=r1(),Sm={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function i1(){if(Qv)return Me;Qv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function k(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,P={};function te(D,X,ie){this.props=D,this.context=X,this.refs=P,this.updater=ie||z}te.prototype.isReactComponent={},te.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},te.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function re(){}re.prototype=te.prototype;function Z(D,X,ie){this.props=D,this.context=X,this.refs=P,this.updater=ie||z}var fe=Z.prototype=new re;fe.constructor=Z,B(fe,te.prototype),fe.isPureReactComponent=!0;var ae=Array.isArray;function ue(){}var R={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(D,X,ie){var he=ie.ref;return{$$typeof:r,type:D,key:X,ref:he!==void 0?he:null,props:ie}}function V(D,X){return I(D.type,X,D.props)}function M(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function N(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ie){return X[ie]})}var A=/\/+/g;function xe(D,X){return typeof D=="object"&&D!==null&&D.key!=null?N(""+D.key):X.toString(36)}function Ee(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ue,ue):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Q(D,X,ie,he,ve){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var Pe=!1;if(D===null)Pe=!0;else switch(Ce){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(D.$$typeof){case r:case e:Pe=!0;break;case b:return Pe=D._init,Q(Pe(D._payload),X,ie,he,ve)}}if(Pe)return ve=ve(D),Pe=he===""?"."+xe(D,0):he,ae(ve)?(ie="",Pe!=null&&(ie=Pe.replace(A,"$&/")+"/"),Q(ve,X,ie,"",function(oe){return oe})):ve!=null&&(M(ve)&&(ve=V(ve,ie+(ve.key==null||D&&D.key===ve.key?"":(""+ve.key).replace(A,"$&/")+"/")+Pe)),X.push(ve)),1;Pe=0;var nt=he===""?".":he+":";if(ae(D))for(var tt=0;tt<D.length;tt++)he=D[tt],Ce=nt+xe(he,tt),Pe+=Q(he,X,ie,Ce,ve);else if(tt=k(D),typeof tt=="function")for(D=tt.call(D),tt=0;!(he=D.next()).done;)he=he.value,Ce=nt+xe(he,tt++),Pe+=Q(he,X,ie,Ce,ve);else if(Ce==="object"){if(typeof D.then=="function")return Q(Ee(D),X,ie,he,ve);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function le(D,X,ie){if(D==null)return D;var he=[],ve=0;return Q(D,he,"","",function(Ce){return X.call(ie,Ce,ve++)}),he}function ye(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=ie)},function(ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=ie)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var Ae=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ke={map:le,forEach:function(D,X,ie){le(D,function(){X.apply(this,arguments)},ie)},count:function(D){var X=0;return le(D,function(){X++}),X},toArray:function(D){return le(D,function(X){return X})||[]},only:function(D){if(!M(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Me.Activity=E,Me.Children=Ke,Me.Component=te,Me.Fragment=n,Me.Profiler=o,Me.PureComponent=Z,Me.StrictMode=i,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Me.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},Me.cache=function(D){return function(){return D.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(D,X,ie){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var he=B({},D.props),ve=D.key;if(X!=null)for(Ce in X.key!==void 0&&(ve=""+X.key),X)!C.call(X,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&X.ref===void 0||(he[Ce]=X[Ce]);var Ce=arguments.length-2;if(Ce===1)he.children=ie;else if(1<Ce){for(var Pe=Array(Ce),nt=0;nt<Ce;nt++)Pe[nt]=arguments[nt+2];he.children=Pe}return I(D.type,ve,he)},Me.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Me.createElement=function(D,X,ie){var he,ve={},Ce=null;if(X!=null)for(he in X.key!==void 0&&(Ce=""+X.key),X)C.call(X,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ve[he]=X[he]);var Pe=arguments.length-2;if(Pe===1)ve.children=ie;else if(1<Pe){for(var nt=Array(Pe),tt=0;tt<Pe;tt++)nt[tt]=arguments[tt+2];ve.children=nt}if(D&&D.defaultProps)for(he in Pe=D.defaultProps,Pe)ve[he]===void 0&&(ve[he]=Pe[he]);return I(D,Ce,ve)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(D){return{$$typeof:p,render:D}},Me.isValidElement=M,Me.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:ye}},Me.memo=function(D,X){return{$$typeof:y,type:D,compare:X===void 0?null:X}},Me.startTransition=function(D){var X=R.T,ie={};R.T=ie;try{var he=D(),ve=R.S;ve!==null&&ve(ie,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,Ae)}catch(Ce){Ae(Ce)}finally{X!==null&&ie.types!==null&&(X.types=ie.types),R.T=X}},Me.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Me.use=function(D){return R.H.use(D)},Me.useActionState=function(D,X,ie){return R.H.useActionState(D,X,ie)},Me.useCallback=function(D,X){return R.H.useCallback(D,X)},Me.useContext=function(D){return R.H.useContext(D)},Me.useDebugValue=function(){},Me.useDeferredValue=function(D,X){return R.H.useDeferredValue(D,X)},Me.useEffect=function(D,X){return R.H.useEffect(D,X)},Me.useEffectEvent=function(D){return R.H.useEffectEvent(D)},Me.useId=function(){return R.H.useId()},Me.useImperativeHandle=function(D,X,ie){return R.H.useImperativeHandle(D,X,ie)},Me.useInsertionEffect=function(D,X){return R.H.useInsertionEffect(D,X)},Me.useLayoutEffect=function(D,X){return R.H.useLayoutEffect(D,X)},Me.useMemo=function(D,X){return R.H.useMemo(D,X)},Me.useOptimistic=function(D,X){return R.H.useOptimistic(D,X)},Me.useReducer=function(D,X,ie){return R.H.useReducer(D,X,ie)},Me.useRef=function(D){return R.H.useRef(D)},Me.useState=function(D){return R.H.useState(D)},Me.useSyncExternalStore=function(D,X,ie){return R.H.useSyncExternalStore(D,X,ie)},Me.useTransition=function(){return R.H.useTransition()},Me.version="19.2.0",Me}var Kv;function vp(){return Kv||(Kv=1,Sm.exports=i1()),Sm.exports}var j=vp();const Cc=zx(j);var Am={exports:{}},rc={},Nm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function a1(){return Yv||(Yv=1,(function(r){function e(Q,le){var ye=Q.length;Q.push(le);e:for(;0<ye;){var Ae=ye-1>>>1,Ke=Q[Ae];if(0<o(Ke,le))Q[Ae]=le,Q[ye]=Ke,ye=Ae;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var le=Q[0],ye=Q.pop();if(ye!==le){Q[0]=ye;e:for(var Ae=0,Ke=Q.length,D=Ke>>>1;Ae<D;){var X=2*(Ae+1)-1,ie=Q[X],he=X+1,ve=Q[he];if(0>o(ie,ye))he<Ke&&0>o(ve,ie)?(Q[Ae]=ve,Q[he]=ye,Ae=he):(Q[Ae]=ie,Q[X]=ye,Ae=X);else if(he<Ke&&0>o(ve,ye))Q[Ae]=ve,Q[he]=ye,Ae=he;else break e}}return le}function o(Q,le){var ye=Q.sortIndex-le.sortIndex;return ye!==0?ye:Q.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],b=1,E=null,T=3,k=!1,z=!1,B=!1,P=!1,te=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function fe(Q){for(var le=n(y);le!==null;){if(le.callback===null)i(y);else if(le.startTime<=Q)i(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=n(y)}}function ae(Q){if(B=!1,fe(Q),!z)if(n(g)!==null)z=!0,ue||(ue=!0,N());else{var le=n(y);le!==null&&Ee(ae,le.startTime-Q)}}var ue=!1,R=-1,C=5,I=-1;function V(){return P?!0:!(r.unstable_now()-I<C)}function M(){if(P=!1,ue){var Q=r.unstable_now();I=Q;var le=!0;try{e:{z=!1,B&&(B=!1,re(R),R=-1),k=!0;var ye=T;try{t:{for(fe(Q),E=n(g);E!==null&&!(E.expirationTime>Q&&V());){var Ae=E.callback;if(typeof Ae=="function"){E.callback=null,T=E.priorityLevel;var Ke=Ae(E.expirationTime<=Q);if(Q=r.unstable_now(),typeof Ke=="function"){E.callback=Ke,fe(Q),le=!0;break t}E===n(g)&&i(g),fe(Q)}else i(g);E=n(g)}if(E!==null)le=!0;else{var D=n(y);D!==null&&Ee(ae,D.startTime-Q),le=!1}}break e}finally{E=null,T=ye,k=!1}le=void 0}}finally{le?N():ue=!1}}}var N;if(typeof Z=="function")N=function(){Z(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,xe=A.port2;A.port1.onmessage=M,N=function(){xe.postMessage(null)}}else N=function(){te(M,0)};function Ee(Q,le){R=te(function(){Q(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var ye=T;T=le;try{return Q()}finally{T=ye}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ye=T;T=Q;try{return le()}finally{T=ye}},r.unstable_scheduleCallback=function(Q,le,ye){var Ae=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ae+ye:Ae):ye=Ae,Q){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ye+Ke,Q={id:b++,callback:le,priorityLevel:Q,startTime:ye,expirationTime:Ke,sortIndex:-1},ye>Ae?(Q.sortIndex=ye,e(y,Q),n(g)===null&&Q===n(y)&&(B?(re(R),R=-1):B=!0,Ee(ae,ye-Ae))):(Q.sortIndex=Ke,e(g,Q),z||k||(z=!0,ue||(ue=!0,N()))),Q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(Q){var le=T;return function(){var ye=T;T=le;try{return Q.apply(this,arguments)}finally{T=ye}}}})(Cm)),Cm}var $v;function o1(){return $v||($v=1,Nm.exports=a1()),Nm.exports}var Rm={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function l1(){if(Xv)return hn;Xv=1;var r=vp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:y,implementation:b}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,b)},hn.flushSync=function(g){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=b,i.d.f()}},hn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},hn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},hn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:k}):b==="script"&&i.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},hn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},hn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},hn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},hn.requestFormReset=function(g){i.d.r(g)},hn.unstable_batchedUpdates=function(g,y){return g(y)},hn.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},hn.version="19.2.0",hn}var Wv;function c1(){if(Wv)return Rm.exports;Wv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Rm.exports=l1(),Rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function u1(){if(Jv)return rc;Jv=1;var r=o1(),e=vp(),n=c1();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return g(h),t;if(m===l)return g(h),s;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var _=!1,w=h.child;w;){if(w===a){_=!0,a=h,l=m;break}if(w===l){_=!0,l=h,a=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===a){_=!0,a=m,l=h;break}if(w===l){_=!0,l=m,a=h;break}w=w.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function N(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case te:return"Profiler";case P:return"StrictMode";case ae:return"Suspense";case ue:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case Z:return t.displayName||"Context";case re:return(t._context.displayName||"Context")+".Consumer";case fe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return s=t.displayName||null,s!==null?s:xe(t.type)||"Memo";case C:s=t._payload,t=t._init;try{return xe(t(s))}catch{}}return null}var Ee=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ae=[],Ke=-1;function D(t){return{current:t}}function X(t){0>Ke||(t.current=Ae[Ke],Ae[Ke]=null,Ke--)}function ie(t,s){Ke++,Ae[Ke]=t.current,t.current=s}var he=D(null),ve=D(null),Ce=D(null),Pe=D(null);function nt(t,s){switch(ie(Ce,s),ie(ve,t),ie(he,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?fv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=fv(s),t=mv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(he),ie(he,t)}function tt(){X(he),X(ve),X(Ce)}function oe(t){t.memoizedState!==null&&ie(Pe,t);var s=he.current,a=mv(s,t.type);s!==a&&(ie(ve,t),ie(he,a))}function at(t){ve.current===t&&(X(he),X(ve)),Pe.current===t&&(X(Pe),Zl._currentValue=ye)}var Kt,ms;function en(t){if(Kt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Kt=s&&s[1]||"",ms=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kt+t+ms}var Is=!1;function $n(t,s){if(!t||Is)return"";Is=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var G=Y}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Y){G=Y}t.call(ne.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var O=_.split(`
`),F=w.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===F.length)for(l=O.length-1,h=F.length-1;1<=l&&0<=h&&O[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==F[h]){var W=`
`+O[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{Is=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?en(a):""}function Hi(t,s){switch(t.tag){case 26:case 27:case 5:return en(t.type);case 16:return en("Lazy");case 13:return t.child!==s&&s!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return $n(t.type,!1);case 11:return $n(t.type.render,!1);case 1:return $n(t.type,!0);case 31:return en("Activity");default:return""}}function Fi(t){try{var s="",a=null;do s+=Hi(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wt=Object.prototype.hasOwnProperty,Ct=r.unstable_scheduleCallback,js=r.unstable_cancelCallback,il=r.unstable_shouldYield,Pa=r.unstable_requestPaint,tn=r.unstable_now,ir=r.unstable_getCurrentPriorityLevel,Gi=r.unstable_ImmediatePriority,Qi=r.unstable_UserBlockingPriority,Ds=r.unstable_NormalPriority,Ua=r.unstable_LowPriority,Ki=r.unstable_IdlePriority,Yi=r.log,$i=r.unstable_setDisableYieldValue,_n=null,$=null;function me(t){if(typeof Yi=="function"&&$i(t),$&&typeof $.setStrictMode=="function")try{$.setStrictMode(_n,t)}catch{}}var we=Math.clz32?Math.clz32:Dn,Ye=Math.log,Tt=Math.LN2;function Dn(t){return t>>>=0,t===0?32:31-(Ye(t)/Tt|0)|0}var xn=256,On=262144,yt=4194304;function Xn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Wn(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=Xn(l):(_&=w,_!==0?h=Xn(_):a||(a=w&~t,a!==0&&(h=Xn(a))))):(w=l&~m,w!==0?h=Xn(w):_!==0?h=Xn(_):a||(a=l&~t,a!==0&&(h=Xn(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function Mn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function za(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(){var t=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),t}function bn(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Os(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function En(t,s,a,l,h,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-we(a),ne=1<<W;w[W]=0,O[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var Y=G[W];Y!==null&&(Y.lane&=-536870913)}a&=~ne}l!==0&&ar(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function ar(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-we(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Wi(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-we(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function Ji(t,s){var a=s&-s;return a=(a&42)!==0?1:Zi(a),(a&(t.suspendedLanes|s))!==0?0:a}function Zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function or(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Kc(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:Lv(t.type))}function ps(t,s){var a=le.p;try{return le.p=t,s()}finally{le.p=a}}var gs=Math.random().toString(36).slice(2),Mt="__reactFiber$"+gs,Yt="__reactProps$"+gs,Ms="__reactContainer$"+gs,Ba="__reactEvents$"+gs,Rh="__reactListeners$"+gs,Yc="__reactHandles$"+gs,$c="__reactResources$"+gs,Vs="__reactMarker$"+gs;function qa(t){delete t[Mt],delete t[Yt],delete t[Ba],delete t[Rh],delete t[Yc]}function ks(t){var s=t[Mt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Ms]||a[Mt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=bv(t);t!==null;){if(a=t[Mt])return a;t=bv(t)}return s}t=a,a=t.parentNode}return null}function Jn(t){if(t=t[Mt]||t[Ms]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Vn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Ls(t){var s=t[$c];return s||(s=t[$c]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Vt(t){t[Vs]=!0}var al=new Set,ol={};function Ps(t,s){Us(t,s),Us(t+"Capture",s)}function Us(t,s){for(ol[t]=s,t=0;t<s.length;t++)al.add(s[t])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},ul={};function Xc(t){return wt.call(ul,t)?!0:wt.call(cl,t)?!1:ll.test(t)?ul[t]=!0:(cl[t]=!0,!1)}function Ha(t,s,a){if(Xc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function kn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function kt(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function $t(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qr(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dl(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function st(t){if(!t._valueTracker){var s=qr(t)?"checked":"value";t._valueTracker=dl(t,s,""+t[s])}}function ea(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=qr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function zs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ta=/[\n"\\]/g;function wn(t){return t.replace(ta,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fa(t,s,a,l,h,m,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+$t(s)):t.value!==""+$t(s)&&(t.value=""+$t(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?hl(t,_,$t(s)):a!=null?hl(t,_,$t(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+$t(w):t.removeAttribute("name")}function Wc(t,s,a,l,h,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){st(t);return}a=a!=null?""+$t(a):"",s=s!=null?""+$t(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),st(t)}function hl(t,s,a){s==="number"&&zs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Hr(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+$t(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function Jc(t,s,a){if(s!=null&&(s=""+$t(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+$t(a):""}function Fr(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(Ee(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=$t(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),st(t)}function Tn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Zc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fl(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Zc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function ml(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&fl(t,h,l)}else for(var m in s)s.hasOwnProperty(m)&&fl(t,m,s[m])}function Ga(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(t){return Gr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ys(){}var pl=null;function Zn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qr=null,Bs=null;function na(t){var s=Jn(t);if(s&&(t=s.stateNode)){var a=t[Yt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Fa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[Yt]||null;if(!h)throw Error(i(90));Fa(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&ea(l)}break e;case"textarea":Jc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Hr(t,!!a.multiple,s,!1)}}}var Ka=!1;function Kr(t,s,a){if(Ka)return t(s,a);Ka=!0;try{var l=t(s);return l}finally{if(Ka=!1,(Qr!==null||Bs!==null)&&(Ku(),Qr&&(s=Qr,t=Bs,Bs=Qr=null,na(s),t)))for(s=0;s<t.length;s++)na(t[s])}}function vs(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Yt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sa=!1;if(es)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){sa=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{sa=!1}var qs=null,gl=null,ra=null;function yl(){if(ra)return ra;var t,s=gl,a=s.length,l,h="value"in qs?qs.value:qs.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===h[m-l];l++);return ra=h.slice(t,1<l?1-l:void 0)}function ia(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function lr(){return!0}function _s(){return!1}function nn(t){function s(a,l,h,m,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lr:_s,this.isPropagationStopped=_s,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=nn(cr),Yr=E({},cr,{view:0,detail:0}),vl=nn(Yr),$r,Ya,Fs,$a=E({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fs&&(Fs&&t.type==="mousemove"?($r=t.screenX-Fs.screenX,Ya=t.screenY-Fs.screenY):Ya=$r=0,Fs=t),$r)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),_l=nn($a),aa=E({},$a,{dataTransfer:0}),tu=nn(aa),nu=E({},Yr,{relatedTarget:0}),oa=nn(nu),xl=E({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),su=nn(xl),Xa=E({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ru=nn(Xa),iu=E({},cr,{data:0}),Gs=nn(iu),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=lu[t])?!!s[t]:!1}function Xr(){return cu}var gn=E({},Yr,{key:function(t){if(t.key){var s=au[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ou[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uu=nn(gn),du=E({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ur=nn(du),u=E({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),v=nn(u),x=E({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=nn(x),q=E({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=nn(q),ce=E({},cr,{newState:0,oldState:0}),Ve=nn(ce),Rt=[9,13,27,32],Ze=es&&"CompositionEvent"in window,vt=null;es&&"documentMode"in document&&(vt=document.documentMode);var ts=es&&"TextEvent"in window&&!vt,Qs=es&&(!Ze||vt&&8<vt&&11>=vt),xs=" ",bs=!1;function la(t,s){switch(t){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ja=!1;function Nw(t,s){switch(t){case"compositionend":return Wa(s);case"keypress":return s.which!==32?null:(bs=!0,xs);case"textInput":return t=s.data,t===xs&&bs?null:t;default:return null}}function Cw(t,s){if(Ja)return t==="compositionend"||!Ze&&la(t,s)?(t=yl(),ra=gl=qs=null,Ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qs&&s.locale!=="ko"?null:s.data;default:return null}}var Rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Rw[t.type]:s==="textarea"}function Sg(t,s,a,l){Qr?Bs?Bs.push(l):Bs=[l]:Qr=l,s=ed(s,"onChange"),0<s.length&&(a=new Hs("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var bl=null,El=null;function Iw(t){ov(t,0)}function hu(t){var s=Vn(t);if(ea(s))return t}function Ag(t,s){if(t==="change")return s}var Ng=!1;if(es){var Ih;if(es){var jh="oninput"in document;if(!jh){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),jh=typeof Cg.oninput=="function"}Ih=jh}else Ih=!1;Ng=Ih&&(!document.documentMode||9<document.documentMode)}function Rg(){bl&&(bl.detachEvent("onpropertychange",Ig),El=bl=null)}function Ig(t){if(t.propertyName==="value"&&hu(El)){var s=[];Sg(s,El,t,Zn(t)),Kr(Iw,s)}}function jw(t,s,a){t==="focusin"?(Rg(),bl=s,El=a,bl.attachEvent("onpropertychange",Ig)):t==="focusout"&&Rg()}function Dw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(El)}function Ow(t,s){if(t==="click")return hu(s)}function Mw(t,s){if(t==="input"||t==="change")return hu(s)}function Vw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ln=typeof Object.is=="function"?Object.is:Vw;function wl(t,s){if(Ln(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!wt.call(s,h)||!Ln(t[h],s[h]))return!1}return!0}function jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dg(t,s){var a=jg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jg(a)}}function Og(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Og(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=zs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=zs(t.document)}return s}function Dh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var kw=es&&"documentMode"in document&&11>=document.documentMode,Za=null,Oh=null,Tl=null,Mh=!1;function Vg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mh||Za==null||Za!==zs(l)||(l=Za,"selectionStart"in l&&Dh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tl&&wl(Tl,l)||(Tl=l,l=ed(Oh,"onSelect"),0<l.length&&(s=new Hs("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Za)))}function ca(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var eo={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},Vh={},kg={};es&&(kg=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function ua(t){if(Vh[t])return Vh[t];if(!eo[t])return t;var s=eo[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in kg)return Vh[t]=s[a];return t}var Lg=ua("animationend"),Pg=ua("animationiteration"),Ug=ua("animationstart"),Lw=ua("transitionrun"),Pw=ua("transitionstart"),Uw=ua("transitioncancel"),zg=ua("transitionend"),Bg=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function Es(t,s){Bg.set(t,s),Ps(s,[t])}var fu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ns=[],to=0,Lh=0;function mu(){for(var t=to,s=Lh=to=0;s<t;){var a=ns[s];ns[s++]=null;var l=ns[s];ns[s++]=null;var h=ns[s];ns[s++]=null;var m=ns[s];if(ns[s++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}m!==0&&qg(a,h,m)}}function pu(t,s,a,l){ns[to++]=t,ns[to++]=s,ns[to++]=a,ns[to++]=l,Lh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ph(t,s,a,l){return pu(t,s,a,l),gu(t)}function da(t,s){return pu(t,null,null,s),gu(t)}function qg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-we(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),m):null}function gu(t){if(50<Ql)throw Ql=0,Yf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var no={};function zw(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,s,a,l){return new zw(t,s,a,l)}function Uh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dr(t,s){var a=t.alternate;return a===null?(a=Pn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function yu(t,s,a,l,h,m){var _=0;if(l=t,typeof t=="function")Uh(t)&&(_=1);else if(typeof t=="string")_=GT(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Pn(31,a,s,h),t.elementType=I,t.lanes=m,t;case B:return ha(a.children,h,m,s);case P:_=8,h|=24;break;case te:return t=Pn(12,a,s,h|2),t.elementType=te,t.lanes=m,t;case ae:return t=Pn(13,a,s,h),t.elementType=ae,t.lanes=m,t;case ue:return t=Pn(19,a,s,h),t.elementType=ue,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:_=10;break e;case re:_=9;break e;case fe:_=11;break e;case R:_=14;break e;case C:_=16,l=null;break e}_=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=Pn(_,a,s,h),s.elementType=t,s.type=l,s.lanes=m,s}function ha(t,s,a,l){return t=Pn(7,t,l,s),t.lanes=a,t}function zh(t,s,a){return t=Pn(6,t,null,s),t.lanes=a,t}function Fg(t){var s=Pn(18,null,null,0);return s.stateNode=t,s}function Bh(t,s,a){return s=Pn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Gg=new WeakMap;function ss(t,s){if(typeof t=="object"&&t!==null){var a=Gg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Fi(s)},Gg.set(t,s),s)}return{value:t,source:s,stack:Fi(s)}}var so=[],ro=0,vu=null,Sl=0,rs=[],is=0,Wr=null,Ks=1,Ys="";function hr(t,s){so[ro++]=Sl,so[ro++]=vu,vu=t,Sl=s}function Qg(t,s,a){rs[is++]=Ks,rs[is++]=Ys,rs[is++]=Wr,Wr=t;var l=Ks;t=Ys;var h=32-we(l)-1;l&=~(1<<h),a+=1;var m=32-we(s)+h;if(30<m){var _=h-h%5;m=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Ks=1<<32-we(s)+h|a<<h|l,Ys=m+t}else Ks=1<<m|a<<h|l,Ys=t}function qh(t){t.return!==null&&(hr(t,1),Qg(t,1,0))}function Hh(t){for(;t===vu;)vu=so[--ro],so[ro]=null,Sl=so[--ro],so[ro]=null;for(;t===Wr;)Wr=rs[--is],rs[is]=null,Ys=rs[--is],rs[is]=null,Ks=rs[--is],rs[is]=null}function Kg(t,s){rs[is++]=Ks,rs[is++]=Ys,rs[is++]=Wr,Ks=s.id,Ys=s.overflow,Wr=t}var sn=null,ft=null,Qe=!1,Jr=null,as=!1,Fh=Error(i(519));function Zr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Al(ss(s,t)),Fh}function Yg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Mt]=t,s[Yt]=l,a){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(a=0;a<Yl.length;a++)ze(Yl[a],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),Wc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Fr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||dv(s.textContent,a)?(l.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),l.onScroll!=null&&ze("scroll",s),l.onScrollEnd!=null&&ze("scrollend",s),l.onClick!=null&&(s.onclick=ys),s=!0):s=!1,s||Zr(t,!0)}function $g(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:as=!1;return;case 27:case 3:as=!0;return;default:sn=sn.return}}function io(t){if(t!==sn)return!1;if(!Qe)return $g(t),Qe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||cm(t.type,t.memoizedProps)),a=!a),a&&ft&&Zr(t),$g(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));ft=xv(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));ft=xv(t)}else s===27?(s=ft,fi(t.type)?(t=mm,mm=null,ft=t):ft=s):ft=sn?ls(t.stateNode.nextSibling):null;return!0}function fa(){ft=sn=null,Qe=!1}function Gh(){var t=Jr;return t!==null&&(Cn===null?Cn=t:Cn.push.apply(Cn,t),Jr=null),t}function Al(t){Jr===null?Jr=[t]:Jr.push(t)}var Qh=D(null),ma=null,fr=null;function ei(t,s,a){ie(Qh,s._currentValue),s._currentValue=a}function mr(t){t._currentValue=Qh.current,X(Qh)}function Kh(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Yh(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var O=0;O<s.length;O++)if(w.context===s[O]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Kh(m.return,a,t),l||(_=null);break e}m=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Kh(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ao(t,s,a,l){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var w=h.type;Ln(h.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(h===Pe.current){if(_=h.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Zl):t=[Zl])}h=h.return}t!==null&&Yh(s,t,a,l),s.flags|=262144}function _u(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pa(t){ma=t,fr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return Xg(ma,t)}function xu(t,s){return ma===null&&pa(t),Xg(t,s)}function Xg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},fr===null){if(t===null)throw Error(i(308));fr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else fr=fr.next=s;return a}var Bw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},qw=r.unstable_scheduleCallback,Hw=r.unstable_NormalPriority,Lt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $h(){return{controller:new Bw,data:new Map,refCount:0}}function Nl(t){t.refCount--,t.refCount===0&&qw(Hw,function(){t.controller.abort()})}var Cl=null,Xh=0,oo=0,lo=null;function Fw(t,s){if(Cl===null){var a=Cl=[];Xh=0,oo=em(),lo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Xh++,s.then(Wg,Wg),s}function Wg(){if(--Xh===0&&Cl!==null){lo!==null&&(lo.status="fulfilled");var t=Cl;Cl=null,oo=0,lo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Gw(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Jg=Q.S;Q.S=function(t,s){V0=tn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Fw(t,s),Jg!==null&&Jg(t,s)};var ga=D(null);function Wh(){var t=ga.current;return t!==null?t:ht.pooledCache}function bu(t,s){s===null?ie(ga,ga.current):ie(ga,s.pool)}function Zg(){var t=Wh();return t===null?null:{parent:Lt._currentValue,pool:t}}var co=Error(i(460)),Jh=Error(i(474)),Eu=Error(i(542)),wu={then:function(){}};function ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ty(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(ys,ys),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,sy(t),t;default:if(typeof s.status=="string")s.then(ys,ys);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,sy(t),t}throw va=s,co}}function ya(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(va=a,co):a}}var va=null;function ny(){if(va===null)throw Error(i(459));var t=va;return va=null,t}function sy(t){if(t===co||t===Eu)throw Error(i(483))}var uo=null,Rl=0;function Tu(t){var s=Rl;return Rl+=1,uo===null&&(uo=[]),ty(uo,t,s)}function Il(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Su(t,s){throw s.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function ry(t){function s(U,L){if(t){var H=U.deletions;H===null?(U.deletions=[L],U.flags|=16):H.push(L)}}function a(U,L){if(!t)return null;for(;L!==null;)s(U,L),L=L.sibling;return null}function l(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function h(U,L){return U=dr(U,L),U.index=0,U.sibling=null,U}function m(U,L,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<L?(U.flags|=67108866,L):H):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function w(U,L,H,ee){return L===null||L.tag!==6?(L=zh(H,U.mode,ee),L.return=U,L):(L=h(L,H),L.return=U,L)}function O(U,L,H,ee){var Se=H.type;return Se===B?W(U,L,H.props.children,ee,H.key):L!==null&&(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===C&&ya(Se)===L.type)?(L=h(L,H.props),Il(L,H),L.return=U,L):(L=yu(H.type,H.key,H.props,null,U.mode,ee),Il(L,H),L.return=U,L)}function F(U,L,H,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Bh(H,U.mode,ee),L.return=U,L):(L=h(L,H.children||[]),L.return=U,L)}function W(U,L,H,ee,Se){return L===null||L.tag!==7?(L=ha(H,U.mode,ee,Se),L.return=U,L):(L=h(L,H),L.return=U,L)}function ne(U,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=zh(""+L,U.mode,H),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return H=yu(L.type,L.key,L.props,null,U.mode,H),Il(H,L),H.return=U,H;case z:return L=Bh(L,U.mode,H),L.return=U,L;case C:return L=ya(L),ne(U,L,H)}if(Ee(L)||N(L))return L=ha(L,U.mode,H,null),L.return=U,L;if(typeof L.then=="function")return ne(U,Tu(L),H);if(L.$$typeof===Z)return ne(U,xu(U,L),H);Su(U,L)}return null}function G(U,L,H,ee){var Se=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:w(U,L,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return H.key===Se?O(U,L,H,ee):null;case z:return H.key===Se?F(U,L,H,ee):null;case C:return H=ya(H),G(U,L,H,ee)}if(Ee(H)||N(H))return Se!==null?null:W(U,L,H,ee,null);if(typeof H.then=="function")return G(U,L,Tu(H),ee);if(H.$$typeof===Z)return G(U,L,xu(U,H),ee);Su(U,H)}return null}function Y(U,L,H,ee,Se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return U=U.get(H)||null,w(L,U,""+ee,Se);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case k:return U=U.get(ee.key===null?H:ee.key)||null,O(L,U,ee,Se);case z:return U=U.get(ee.key===null?H:ee.key)||null,F(L,U,ee,Se);case C:return ee=ya(ee),Y(U,L,H,ee,Se)}if(Ee(ee)||N(ee))return U=U.get(H)||null,W(L,U,ee,Se,null);if(typeof ee.then=="function")return Y(U,L,H,Tu(ee),Se);if(ee.$$typeof===Z)return Y(U,L,H,xu(L,ee),Se);Su(L,ee)}return null}function ge(U,L,H,ee){for(var Se=null,We=null,_e=L,Le=L=0,qe=null;_e!==null&&Le<H.length;Le++){_e.index>Le?(qe=_e,_e=null):qe=_e.sibling;var Je=G(U,_e,H[Le],ee);if(Je===null){_e===null&&(_e=qe);break}t&&_e&&Je.alternate===null&&s(U,_e),L=m(Je,L,Le),We===null?Se=Je:We.sibling=Je,We=Je,_e=qe}if(Le===H.length)return a(U,_e),Qe&&hr(U,Le),Se;if(_e===null){for(;Le<H.length;Le++)_e=ne(U,H[Le],ee),_e!==null&&(L=m(_e,L,Le),We===null?Se=_e:We.sibling=_e,We=_e);return Qe&&hr(U,Le),Se}for(_e=l(_e);Le<H.length;Le++)qe=Y(_e,U,Le,H[Le],ee),qe!==null&&(t&&qe.alternate!==null&&_e.delete(qe.key===null?Le:qe.key),L=m(qe,L,Le),We===null?Se=qe:We.sibling=qe,We=qe);return t&&_e.forEach(function(vi){return s(U,vi)}),Qe&&hr(U,Le),Se}function Re(U,L,H,ee){if(H==null)throw Error(i(151));for(var Se=null,We=null,_e=L,Le=L=0,qe=null,Je=H.next();_e!==null&&!Je.done;Le++,Je=H.next()){_e.index>Le?(qe=_e,_e=null):qe=_e.sibling;var vi=G(U,_e,Je.value,ee);if(vi===null){_e===null&&(_e=qe);break}t&&_e&&vi.alternate===null&&s(U,_e),L=m(vi,L,Le),We===null?Se=vi:We.sibling=vi,We=vi,_e=qe}if(Je.done)return a(U,_e),Qe&&hr(U,Le),Se;if(_e===null){for(;!Je.done;Le++,Je=H.next())Je=ne(U,Je.value,ee),Je!==null&&(L=m(Je,L,Le),We===null?Se=Je:We.sibling=Je,We=Je);return Qe&&hr(U,Le),Se}for(_e=l(_e);!Je.done;Le++,Je=H.next())Je=Y(_e,U,Le,Je.value,ee),Je!==null&&(t&&Je.alternate!==null&&_e.delete(Je.key===null?Le:Je.key),L=m(Je,L,Le),We===null?Se=Je:We.sibling=Je,We=Je);return t&&_e.forEach(function(n1){return s(U,n1)}),Qe&&hr(U,Le),Se}function ut(U,L,H,ee){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case k:e:{for(var Se=H.key;L!==null;){if(L.key===Se){if(Se=H.type,Se===B){if(L.tag===7){a(U,L.sibling),ee=h(L,H.props.children),ee.return=U,U=ee;break e}}else if(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===C&&ya(Se)===L.type){a(U,L.sibling),ee=h(L,H.props),Il(ee,H),ee.return=U,U=ee;break e}a(U,L);break}else s(U,L);L=L.sibling}H.type===B?(ee=ha(H.props.children,U.mode,ee,H.key),ee.return=U,U=ee):(ee=yu(H.type,H.key,H.props,null,U.mode,ee),Il(ee,H),ee.return=U,U=ee)}return _(U);case z:e:{for(Se=H.key;L!==null;){if(L.key===Se)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(U,L.sibling),ee=h(L,H.children||[]),ee.return=U,U=ee;break e}else{a(U,L);break}else s(U,L);L=L.sibling}ee=Bh(H,U.mode,ee),ee.return=U,U=ee}return _(U);case C:return H=ya(H),ut(U,L,H,ee)}if(Ee(H))return ge(U,L,H,ee);if(N(H)){if(Se=N(H),typeof Se!="function")throw Error(i(150));return H=Se.call(H),Re(U,L,H,ee)}if(typeof H.then=="function")return ut(U,L,Tu(H),ee);if(H.$$typeof===Z)return ut(U,L,xu(U,H),ee);Su(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(U,L.sibling),ee=h(L,H),ee.return=U,U=ee):(a(U,L),ee=zh(H,U.mode,ee),ee.return=U,U=ee),_(U)):a(U,L)}return function(U,L,H,ee){try{Rl=0;var Se=ut(U,L,H,ee);return uo=null,Se}catch(_e){if(_e===co||_e===Eu)throw _e;var We=Pn(29,_e,null,U.mode);return We.lanes=ee,We.return=U,We}finally{}}}var _a=ry(!0),iy=ry(!1),ti=!1;function Zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function si(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=gu(t),qg(t,null,a),s}return pu(t,l,s,a),gu(t)}function jl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Wi(t,a)}}function tf(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var nf=!1;function Dl(){if(nf){var t=lo;if(t!==null)throw t}}function Ol(t,s,a,l){nf=!1;var h=t.updateQueue;ti=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var O=w,F=O.next;O.next=null,_===null?m=F:_.next=F,_=O;var W=t.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==_&&(w===null?W.firstBaseUpdate=F:w.next=F,W.lastBaseUpdate=O))}if(m!==null){var ne=h.baseState;_=0,W=F=O=null,w=m;do{var G=w.lane&-536870913,Y=G!==w.lane;if(Y?(Be&G)===G:(l&G)===G){G!==0&&G===oo&&(nf=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ge=t,Re=w;G=s;var ut=a;switch(Re.tag){case 1:if(ge=Re.payload,typeof ge=="function"){ne=ge.call(ut,ne,G);break e}ne=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Re.payload,G=typeof ge=="function"?ge.call(ut,ne,G):ge,G==null)break e;ne=E({},ne,G);break e;case 2:ti=!0}}G=w.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(F=W=Y,O=ne):W=W.next=Y,_|=G;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);W===null&&(O=ne),h.baseState=O,h.firstBaseUpdate=F,h.lastBaseUpdate=W,m===null&&(h.shared.lanes=0),li|=_,t.lanes=_,t.memoizedState=ne}}function ay(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function oy(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ay(a[t],s)}var ho=D(null),Au=D(0);function ly(t,s){t=wr,ie(Au,t),ie(ho,s),wr=t|s.baseLanes}function sf(){ie(Au,wr),ie(ho,ho.current)}function rf(){wr=Au.current,X(ho),X(Au)}var Un=D(null),os=null;function ri(t){var s=t.alternate;ie(It,It.current&1),ie(Un,t),os===null&&(s===null||ho.current!==null||s.memoizedState!==null)&&(os=t)}function af(t){ie(It,It.current),ie(Un,t),os===null&&(os=t)}function cy(t){t.tag===22?(ie(It,It.current),ie(Un,t),os===null&&(os=t)):ii()}function ii(){ie(It,It.current),ie(Un,Un.current)}function zn(t){X(Un),os===t&&(os=null),X(It)}var It=D(0);function Nu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hm(a)||fm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pr=0,ke=null,lt=null,Pt=null,Cu=!1,fo=!1,xa=!1,Ru=0,Ml=0,mo=null,Qw=0;function St(){throw Error(i(321))}function of(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Ln(t[a],s[a]))return!1;return!0}function lf(t,s,a,l,h,m){return pr=m,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=t===null||t.memoizedState===null?Qy:wf,xa=!1,m=a(l,h),xa=!1,fo&&(m=dy(s,a,l,h)),uy(t),m}function uy(t){Q.H=Ll;var s=lt!==null&&lt.next!==null;if(pr=0,Pt=lt=ke=null,Cu=!1,Ml=0,mo=null,s)throw Error(i(300));t===null||Ut||(t=t.dependencies,t!==null&&_u(t)&&(Ut=!0))}function dy(t,s,a,l){ke=t;var h=0;do{if(fo&&(mo=null),Ml=0,fo=!1,25<=h)throw Error(i(301));if(h+=1,Pt=lt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=Ky,m=s(a,l)}while(fo);return m}function Kw(){var t=Q.H,s=t.useState()[0];return s=typeof s.then=="function"?Vl(s):s,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(ke.flags|=1024),s}function cf(){var t=Ru!==0;return Ru=0,t}function uf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function df(t){if(Cu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Cu=!1}pr=0,Pt=lt=ke=null,fo=!1,Ml=Ru=0,mo=null}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ke.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function jt(){if(lt===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var s=Pt===null?ke.memoizedState:Pt.next;if(s!==null)Pt=s,lt=t;else{if(t===null)throw ke.alternate===null?Error(i(467)):Error(i(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Pt===null?ke.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(t){var s=Ml;return Ml+=1,mo===null&&(mo=[]),t=ty(mo,t,s),s=ke,(Pt===null?s.memoizedState:Pt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Qy:wf),t}function ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vl(t);if(t.$$typeof===Z)return rn(t)}throw Error(i(438,String(t)))}function hf(t){var s=null,a=ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Iu(),ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=V;return s.index++,a}function gr(t,s){return typeof s=="function"?s(t):s}function Du(t){var s=jt();return ff(s,lt,t)}function ff(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}s.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var w=_=null,O=null,F=s,W=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(Be&ne)===ne:(pr&ne)===ne){var G=F.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===oo&&(W=!0);else if((pr&G)===G){F=F.next,G===oo&&(W=!0);continue}else ne={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(w=O=ne,_=m):O=O.next=ne,ke.lanes|=G,li|=G;ne=F.action,xa&&a(m,ne),m=F.hasEagerState?F.eagerState:a(m,ne)}else G={lane:ne,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(w=O=G,_=m):O=O.next=G,ke.lanes|=ne,li|=ne;F=F.next}while(F!==null&&F!==s);if(O===null?_=m:O.next=w,!Ln(m,t.memoizedState)&&(Ut=!0,W&&(a=lo,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=O,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function mf(t){var s=jt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do m=t(m,_.action),_=_.next;while(_!==h);Ln(m,s.memoizedState)||(Ut=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function hy(t,s,a){var l=ke,h=jt(),m=Qe;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var _=!Ln((lt||h).memoizedState,a);if(_&&(h.memoizedState=a,Ut=!0),h=h.queue,yf(py.bind(null,l,h,t),[t]),h.getSnapshot!==s||_||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,po(9,{destroy:void 0},my.bind(null,l,h,a,s),null),ht===null)throw Error(i(349));m||(pr&127)!==0||fy(l,s,a)}return a}function fy(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ke.updateQueue,s===null?(s=Iu(),ke.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function my(t,s,a,l){s.value=a,s.getSnapshot=l,gy(s)&&yy(t)}function py(t,s,a){return a(function(){gy(s)&&yy(t)})}function gy(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Ln(t,a)}catch{return!0}}function yy(t){var s=da(t,2);s!==null&&Rn(s,t,2)}function pf(t){var s=yn();if(typeof t=="function"){var a=t;if(t=a(),xa){me(!0);try{a()}finally{me(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:t},s}function vy(t,s,a,l){return t.baseState=a,ff(t,lt,typeof l=="function"?l:gr)}function Yw(t,s,a,l,h){if(Vu(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Q.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,_y(s,m)):(m.next=a.next,s.pending=a.next=m)}}function _y(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var m=Q.T,_={};Q.T=_;try{var w=a(h,l),O=Q.S;O!==null&&O(_,w),xy(t,s,w)}catch(F){gf(t,s,F)}finally{m!==null&&_.types!==null&&(m.types=_.types),Q.T=m}}else try{m=a(h,l),xy(t,s,m)}catch(F){gf(t,s,F)}}function xy(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){by(t,s,l)},function(l){return gf(t,s,l)}):by(t,s,a)}function by(t,s,a){s.status="fulfilled",s.value=a,Ey(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,_y(t,a)))}function gf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Ey(s),s=s.next;while(s!==l)}t.action=null}function Ey(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function wy(t,s){return s}function Ty(t,s){if(Qe){var a=ht.formState;if(a!==null){e:{var l=ke;if(Qe){if(ft){t:{for(var h=ft,m=as;h.nodeType!==8;){if(!m){h=null;break t}if(h=ls(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){ft=ls(h.nextSibling),l=h.data==="F!";break e}}Zr(l)}l=!1}l&&(s=a[0])}}return a=yn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:s},a.queue=l,a=Hy.bind(null,ke,l),l.dispatch=a,l=pf(!1),m=Ef.bind(null,ke,!1,l.queue),l=yn(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=Yw.bind(null,ke,h,m,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function Sy(t){var s=jt();return Ay(s,lt,t)}function Ay(t,s,a){if(s=ff(t,s,wy)[0],t=Du(gr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Vl(s)}catch(_){throw _===co?Eu:_}else l=s;s=jt();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(ke.flags|=2048,po(9,{destroy:void 0},$w.bind(null,h,a),null)),[l,m,t]}function $w(t,s){t.action=s}function Ny(t){var s=jt(),a=lt;if(a!==null)return Ay(s,a,t);jt(),s=s.memoizedState,a=jt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function po(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=ke.updateQueue,s===null&&(s=Iu(),ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Cy(){return jt().memoizedState}function Ou(t,s,a,l){var h=yn();ke.flags|=t,h.memoizedState=po(1|s,{destroy:void 0},a,l===void 0?null:l)}function Mu(t,s,a,l){var h=jt();l=l===void 0?null:l;var m=h.memoizedState.inst;lt!==null&&l!==null&&of(l,lt.memoizedState.deps)?h.memoizedState=po(s,m,a,l):(ke.flags|=t,h.memoizedState=po(1|s,m,a,l))}function Ry(t,s){Ou(8390656,8,t,s)}function yf(t,s){Mu(2048,8,t,s)}function Xw(t){ke.flags|=4;var s=ke.updateQueue;if(s===null)s=Iu(),ke.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Iy(t){var s=jt().memoizedState;return Xw({ref:s,nextImpl:t}),function(){if((et&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function jy(t,s){return Mu(4,2,t,s)}function Dy(t,s){return Mu(4,4,t,s)}function Oy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function My(t,s,a){a=a!=null?a.concat([t]):null,Mu(4,4,Oy.bind(null,s,t),a)}function vf(){}function Vy(t,s){var a=jt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&of(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function ky(t,s){var a=jt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&of(s,l[1]))return l[0];if(l=t(),xa){me(!0);try{t()}finally{me(!1)}}return a.memoizedState=[l,s],l}function _f(t,s,a){return a===void 0||(pr&1073741824)!==0&&(Be&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=L0(),ke.lanes|=t,li|=t,a)}function Ly(t,s,a,l){return Ln(a,s)?a:ho.current!==null?(t=_f(t,a,l),Ln(t,s)||(Ut=!0),t):(pr&42)===0||(pr&1073741824)!==0&&(Be&261930)===0?(Ut=!0,t.memoizedState=a):(t=L0(),ke.lanes|=t,li|=t,s)}function Py(t,s,a,l,h){var m=le.p;le.p=m!==0&&8>m?m:8;var _=Q.T,w={};Q.T=w,Ef(t,!1,s,a);try{var O=h(),F=Q.S;if(F!==null&&F(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=Gw(O,l);kl(t,s,W,Hn(t))}else kl(t,s,l,Hn(t))}catch(ne){kl(t,s,{then:function(){},status:"rejected",reason:ne},Hn())}finally{le.p=m,_!==null&&w.types!==null&&(_.types=w.types),Q.T=_}}function Ww(){}function xf(t,s,a,l){if(t.tag!==5)throw Error(i(476));var h=Uy(t).queue;Py(t,h,s,ye,a===null?Ww:function(){return zy(t),a(l)})}function Uy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function zy(t){var s=Uy(t);s.next===null&&(s=t.alternate.memoizedState),kl(t,s.next.queue,{},Hn())}function bf(){return rn(Zl)}function By(){return jt().memoizedState}function qy(){return jt().memoizedState}function Jw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Hn();t=ni(a);var l=si(s,t,a);l!==null&&(Rn(l,s,a),jl(l,s,a)),s={cache:$h()},t.payload=s;return}s=s.return}}function Zw(t,s,a){var l=Hn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Vu(t)?Fy(s,a):(a=Ph(t,s,a,l),a!==null&&(Rn(a,t,l),Gy(a,s,l)))}function Hy(t,s,a){var l=Hn();kl(t,s,a,l)}function kl(t,s,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vu(t))Fy(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,w=m(_,a);if(h.hasEagerState=!0,h.eagerState=w,Ln(w,_))return pu(t,s,h,0),ht===null&&mu(),!1}catch{}finally{}if(a=Ph(t,s,h,l),a!==null)return Rn(a,t,l),Gy(a,s,l),!0}return!1}function Ef(t,s,a,l){if(l={lane:2,revertLane:em(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Vu(t)){if(s)throw Error(i(479))}else s=Ph(t,a,l,2),s!==null&&Rn(s,t,2)}function Vu(t){var s=t.alternate;return t===ke||s!==null&&s===ke}function Fy(t,s){fo=Cu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Gy(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Wi(t,a)}}var Ll={readContext:rn,use:ju,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Ll.useEffectEvent=St;var Qy={readContext:rn,use:ju,useCallback:function(t,s){return yn().memoizedState=[t,s===void 0?null:s],t},useContext:rn,useEffect:Ry,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ou(4194308,4,Oy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ou(4194308,4,t,s)},useInsertionEffect:function(t,s){Ou(4,2,t,s)},useMemo:function(t,s){var a=yn();s=s===void 0?null:s;var l=t();if(xa){me(!0);try{t()}finally{me(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=yn();if(a!==void 0){var h=a(s);if(xa){me(!0);try{a(s)}finally{me(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Zw.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var s=yn();return t={current:t},s.memoizedState=t},useState:function(t){t=pf(t);var s=t.queue,a=Hy.bind(null,ke,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:vf,useDeferredValue:function(t,s){var a=yn();return _f(a,t,s)},useTransition:function(){var t=pf(!1);return t=Py.bind(null,ke,t.queue,!0,!1),yn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=ke,h=yn();if(Qe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),ht===null)throw Error(i(349));(Be&127)!==0||fy(l,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,Ry(py.bind(null,l,m,t),[t]),l.flags|=2048,po(9,{destroy:void 0},my.bind(null,l,m,a,s),null),a},useId:function(){var t=yn(),s=ht.identifierPrefix;if(Qe){var a=Ys,l=Ks;a=(l&~(1<<32-we(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ru++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Qw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:bf,useFormState:Ty,useActionState:Ty,useOptimistic:function(t){var s=yn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Ef.bind(null,ke,!0,a),a.dispatch=s,[t,s]},useMemoCache:hf,useCacheRefresh:function(){return yn().memoizedState=Jw.bind(null,ke)},useEffectEvent:function(t){var s=yn(),a={impl:t};return s.memoizedState=a,function(){if((et&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},wf={readContext:rn,use:ju,useCallback:Vy,useContext:rn,useEffect:yf,useImperativeHandle:My,useInsertionEffect:jy,useLayoutEffect:Dy,useMemo:ky,useReducer:Du,useRef:Cy,useState:function(){return Du(gr)},useDebugValue:vf,useDeferredValue:function(t,s){var a=jt();return Ly(a,lt.memoizedState,t,s)},useTransition:function(){var t=Du(gr)[0],s=jt().memoizedState;return[typeof t=="boolean"?t:Vl(t),s]},useSyncExternalStore:hy,useId:By,useHostTransitionStatus:bf,useFormState:Sy,useActionState:Sy,useOptimistic:function(t,s){var a=jt();return vy(a,lt,t,s)},useMemoCache:hf,useCacheRefresh:qy};wf.useEffectEvent=Iy;var Ky={readContext:rn,use:ju,useCallback:Vy,useContext:rn,useEffect:yf,useImperativeHandle:My,useInsertionEffect:jy,useLayoutEffect:Dy,useMemo:ky,useReducer:mf,useRef:Cy,useState:function(){return mf(gr)},useDebugValue:vf,useDeferredValue:function(t,s){var a=jt();return lt===null?_f(a,t,s):Ly(a,lt.memoizedState,t,s)},useTransition:function(){var t=mf(gr)[0],s=jt().memoizedState;return[typeof t=="boolean"?t:Vl(t),s]},useSyncExternalStore:hy,useId:By,useHostTransitionStatus:bf,useFormState:Ny,useActionState:Ny,useOptimistic:function(t,s){var a=jt();return lt!==null?vy(a,lt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:hf,useCacheRefresh:qy};Ky.useEffectEvent=Iy;function Tf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Sf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Hn(),h=ni(l);h.payload=s,a!=null&&(h.callback=a),s=si(t,h,l),s!==null&&(Rn(s,t,l),jl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Hn(),h=ni(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=si(t,h,l),s!==null&&(Rn(s,t,l),jl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Hn(),l=ni(a);l.tag=2,s!=null&&(l.callback=s),s=si(t,l,a),s!==null&&(Rn(s,t,a),jl(s,t,a))}};function Yy(t,s,a,l,h,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!wl(a,l)||!wl(h,m):!0}function $y(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Sf.enqueueReplaceState(s,s.state,null)}function ba(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Xy(t){fu(t)}function Wy(t){console.error(t)}function Jy(t){fu(t)}function ku(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Af(t,s,a){return a=ni(a),a.tag=3,a.payload={element:null},a.callback=function(){ku(t,s)},a}function e0(t){return t=ni(t),t.tag=3,t}function t0(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){Zy(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Zy(s,a,l),typeof h!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function eT(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&ao(s,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 31:case 13:return os===null?Yu():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===wu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Wf(t,l,h)),!1;case 22:return a.flags|=65536,l===wu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Wf(t,l,h)),!1}throw Error(i(435,a.tag))}return Wf(t,l,h),Yu(),!1}if(Qe)return s=Un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Fh&&(t=Error(i(422),{cause:l}),Al(ss(t,a)))):(l!==Fh&&(s=Error(i(423),{cause:l}),Al(ss(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ss(l,a),h=Af(t.stateNode,l,h),tf(t,h),At!==4&&(At=2)),!1;var m=Error(i(520),{cause:l});if(m=ss(m,a),Gl===null?Gl=[m]:Gl.push(m),At!==4&&(At=2),s===null)return!0;l=ss(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Af(a.stateNode,l,t),tf(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ci===null||!ci.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=e0(h),t0(h,t,a,l),tf(a,h),!1}a=a.return}while(a!==null);return!1}var Nf=Error(i(461)),Ut=!1;function an(t,s,a,l){s.child=t===null?iy(s,null,a,l):_a(s,t.child,a,l)}function n0(t,s,a,l,h){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return pa(s),l=lf(t,s,a,_,m,h),w=cf(),t!==null&&!Ut?(uf(t,s,h),yr(t,s,h)):(Qe&&w&&qh(s),s.flags|=1,an(t,s,l,h),s.child)}function s0(t,s,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Uh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,r0(t,s,m,l,h)):(t=yu(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Vf(t,h)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(_,l)&&t.ref===s.ref)return yr(t,s,h)}return s.flags|=1,t=dr(m,l),t.ref=s.ref,t.return=s,s.child=t}function r0(t,s,a,l,h){if(t!==null){var m=t.memoizedProps;if(wl(m,l)&&t.ref===s.ref)if(Ut=!1,s.pendingProps=l=m,Vf(t,h))(t.flags&131072)!==0&&(Ut=!0);else return s.lanes=t.lanes,yr(t,s,h)}return Cf(t,s,a,l,h)}function i0(t,s,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,s.child=null;return a0(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&bu(s,m!==null?m.cachePool:null),m!==null?ly(s,m):sf(),cy(s);else return l=s.lanes=536870912,a0(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(bu(s,m.cachePool),ly(s,m),ii(),s.memoizedState=null):(t!==null&&bu(s,null),sf(),ii());return an(t,s,h,a),s.child}function Pl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function a0(t,s,a,l,h){var m=Wh();return m=m===null?null:{parent:Lt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&bu(s,null),sf(),cy(s),t!==null&&ao(t,s,l,!0),s.childLanes=h,null}function Lu(t,s){return s=Uu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function o0(t,s,a){return _a(s,t.child,null,a),t=Lu(s,s.pendingProps),t.flags|=2,zn(s),s.memoizedState=null,t}function tT(t,s,a){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Qe){if(l.mode==="hidden")return t=Lu(s,l),s.lanes=536870912,Pl(null,t);if(af(s),(t=ft)?(t=_v(t,as),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Wr!==null?{id:Ks,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},a=Fg(t),a.return=s,s.child=a,sn=s,ft=null)):t=null,t===null)throw Zr(s);return s.lanes=536870912,null}return Lu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(af(s),h)if(s.flags&256)s.flags&=-257,s=o0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ut||ao(t,s,a,!1),h=(a&t.childLanes)!==0,Ut||h){if(l=ht,l!==null&&(_=Ji(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,da(t,_),Rn(l,t,_),Nf;Yu(),s=o0(t,s,a)}else t=m.treeContext,ft=ls(_.nextSibling),sn=s,Qe=!0,Jr=null,as=!1,t!==null&&Kg(s,t),s=Lu(s,l),s.flags|=4096;return s}return t=dr(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Pu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Cf(t,s,a,l,h){return pa(s),a=lf(t,s,a,l,void 0,h),l=cf(),t!==null&&!Ut?(uf(t,s,h),yr(t,s,h)):(Qe&&l&&qh(s),s.flags|=1,an(t,s,a,h),s.child)}function l0(t,s,a,l,h,m){return pa(s),s.updateQueue=null,a=dy(s,l,a,h),uy(t),l=cf(),t!==null&&!Ut?(uf(t,s,m),yr(t,s,m)):(Qe&&l&&qh(s),s.flags|=1,an(t,s,a,m),s.child)}function c0(t,s,a,l,h){if(pa(s),s.stateNode===null){var m=no,_=a.contextType;typeof _=="object"&&_!==null&&(m=rn(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Sf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Zh(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?rn(_):no,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Tf(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Sf.enqueueReplaceState(m,m.state,null),Ol(s,l,m,h),Dl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var w=s.memoizedProps,O=ba(a,w);m.props=O;var F=m.context,W=a.contextType;_=no,typeof W=="object"&&W!==null&&(_=rn(W));var ne=a.getDerivedStateFromProps;W=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==_)&&$y(s,m,l,_),ti=!1;var G=s.memoizedState;m.state=G,Ol(s,l,m,h),Dl(),F=s.memoizedState,w||G!==F||ti?(typeof ne=="function"&&(Tf(s,a,ne,l),F=s.memoizedState),(O=ti||Yy(s,a,O,l,G,F,_))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=F),m.props=l,m.state=F,m.context=_,l=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,ef(t,s),_=s.memoizedProps,W=ba(a,_),m.props=W,ne=s.pendingProps,G=m.context,F=a.contextType,O=no,typeof F=="object"&&F!==null&&(O=rn(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ne||G!==O)&&$y(s,m,l,O),ti=!1,G=s.memoizedState,m.state=G,Ol(s,l,m,h),Dl();var Y=s.memoizedState;_!==ne||G!==Y||ti||t!==null&&t.dependencies!==null&&_u(t.dependencies)?(typeof w=="function"&&(Tf(s,a,w,l),Y=s.memoizedState),(W=ti||Yy(s,a,W,l,G,Y,O)||t!==null&&t.dependencies!==null&&_u(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Y,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Y,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Y),m.props=l,m.state=Y,m.context=O,l=W):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Pu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=_a(s,t.child,null,h),s.child=_a(s,null,a,h)):an(t,s,a,h),s.memoizedState=m.state,t=s.child):t=yr(t,s,h),t}function u0(t,s,a,l){return fa(),s.flags|=256,an(t,s,a,l),s.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:Zg()}}function jf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=qn),t}function d0(t,s,a){var l=s.pendingProps,h=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Qe){if(h?ri(s):ii(),(t=ft)?(t=_v(t,as),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Wr!==null?{id:Ks,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},a=Fg(t),a.return=s,s.child=a,sn=s,ft=null)):t=null,t===null)throw Zr(s);return fm(t)?s.lanes=32:s.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(ii(),h=s.mode,w=Uu({mode:"hidden",children:w},h),l=ha(l,h,a,null),w.return=s,l.return=s,w.sibling=l,s.child=w,l=s.child,l.memoizedState=If(a),l.childLanes=jf(t,_,a),s.memoizedState=Rf,Pl(null,l)):(ri(s),Df(s,w))}var O=t.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(m)s.flags&256?(ri(s),s.flags&=-257,s=Of(t,s,a)):s.memoizedState!==null?(ii(),s.child=t.child,s.flags|=128,s=null):(ii(),w=l.fallback,h=s.mode,l=Uu({mode:"visible",children:l.children},h),w=ha(w,h,a,null),w.flags|=2,l.return=s,w.return=s,l.sibling=w,s.child=l,_a(s,t.child,null,a),l=s.child,l.memoizedState=If(a),l.childLanes=jf(t,_,a),s.memoizedState=Rf,s=Pl(null,l));else if(ri(s),fm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(i(419)),l.stack="",l.digest=_,Al({value:l,source:null,stack:null}),s=Of(t,s,a)}else if(Ut||ao(t,s,a,!1),_=(a&t.childLanes)!==0,Ut||_){if(_=ht,_!==null&&(l=Ji(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,da(t,l),Rn(_,t,l),Nf;hm(w)||Yu(),s=Of(t,s,a)}else hm(w)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,ft=ls(w.nextSibling),sn=s,Qe=!0,Jr=null,as=!1,t!==null&&Kg(s,t),s=Df(s,l.children),s.flags|=4096);return s}return h?(ii(),w=l.fallback,h=s.mode,O=t.child,F=O.sibling,l=dr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,F!==null?w=dr(F,w):(w=ha(w,h,a,null),w.flags|=2),w.return=s,l.return=s,l.sibling=w,s.child=l,Pl(null,l),l=s.child,w=t.child.memoizedState,w===null?w=If(a):(h=w.cachePool,h!==null?(O=Lt._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=Zg(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=jf(t,_,a),s.memoizedState=Rf,Pl(t.child,l)):(ri(s),a=t.child,t=a.sibling,a=dr(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function Df(t,s){return s=Uu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Uu(t,s){return t=Pn(22,t,null,s),t.lanes=0,t}function Of(t,s,a){return _a(s,t.child,null,a),t=Df(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function h0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Kh(t.return,s,a)}function Mf(t,s,a,l,h,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=m)}function f0(t,s,a){var l=s.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var _=It.current,w=(_&2)!==0;if(w?(_=_&1|2,s.flags|=128):_&=1,ie(It,_),an(t,s,l,a),l=Qe?Sl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&h0(t,a,s);else if(t.tag===19)h0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&Nu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Mf(s,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Nu(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Mf(s,!0,a,null,m,l);break;case"together":Mf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function yr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),li|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(ao(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=dr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=dr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Vf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&_u(t)))}function nT(t,s,a){switch(s.tag){case 3:nt(s,s.stateNode.containerInfo),ei(s,Lt,t.memoizedState.cache),fa();break;case 27:case 5:oe(s);break;case 4:nt(s,s.stateNode.containerInfo);break;case 10:ei(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,af(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ri(s),s.flags|=128,null):(a&s.child.childLanes)!==0?d0(t,s,a):(ri(s),t=yr(t,s,a),t!==null?t.sibling:null);ri(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(ao(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return f0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(It,It.current),l)break;return null;case 22:return s.lanes=0,i0(t,s,a,s.pendingProps);case 24:ei(s,Lt,t.memoizedState.cache)}return yr(t,s,a)}function m0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Ut=!0;else{if(!Vf(t,a)&&(s.flags&128)===0)return Ut=!1,nT(t,s,a);Ut=(t.flags&131072)!==0}else Ut=!1,Qe&&(s.flags&1048576)!==0&&Qg(s,Sl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=ya(s.elementType),s.type=t,typeof t=="function")Uh(t)?(l=ba(t,l),s.tag=1,s=c0(null,s,t,l,a)):(s.tag=0,s=Cf(null,s,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===fe){s.tag=11,s=n0(null,s,t,l,a);break e}else if(h===R){s.tag=14,s=s0(null,s,t,l,a);break e}}throw s=xe(t)||t,Error(i(306,s,""))}}return s;case 0:return Cf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=ba(l,s.pendingProps),c0(t,s,l,h,a);case 3:e:{if(nt(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;h=m.element,ef(t,s),Ol(s,l,null,a);var _=s.memoizedState;if(l=_.cache,ei(s,Lt,l),l!==m.cache&&Yh(s,[Lt],a,!0),Dl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=u0(t,s,l,a);break e}else if(l!==h){h=ss(Error(i(424)),s),Al(h),s=u0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ft=ls(t.firstChild),sn=s,Qe=!0,Jr=null,as=!0,a=iy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fa(),l===h){s=yr(t,s,a);break e}an(t,s,l,a)}s=s.child}return s;case 26:return Pu(t,s),t===null?(a=Sv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Qe||(a=s.type,t=s.pendingProps,l=td(Ce.current).createElement(a),l[Mt]=s,l[Yt]=t,on(l,a,t),Vt(l),s.stateNode=l):s.memoizedState=Sv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return oe(s),t===null&&Qe&&(l=s.stateNode=Ev(s.type,s.pendingProps,Ce.current),sn=s,as=!0,h=ft,fi(s.type)?(mm=h,ft=ls(l.firstChild)):ft=h),an(t,s,s.pendingProps.children,a),Pu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Qe&&((h=l=ft)&&(l=DT(l,s.type,s.pendingProps,as),l!==null?(s.stateNode=l,sn=s,ft=ls(l.firstChild),as=!1,h=!0):h=!1),h||Zr(s)),oe(s),h=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,cm(h,m)?l=null:_!==null&&cm(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=lf(t,s,Kw,null,null,a),Zl._currentValue=h),Pu(t,s),an(t,s,l,a),s.child;case 6:return t===null&&Qe&&((t=a=ft)&&(a=OT(a,s.pendingProps,as),a!==null?(s.stateNode=a,sn=s,ft=null,t=!0):t=!1),t||Zr(s)),null;case 13:return d0(t,s,a);case 4:return nt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=_a(s,null,l,a):an(t,s,l,a),s.child;case 11:return n0(t,s,s.type,s.pendingProps,a);case 7:return an(t,s,s.pendingProps,a),s.child;case 8:return an(t,s,s.pendingProps.children,a),s.child;case 12:return an(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,ei(s,s.type,l.value),an(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,pa(s),h=rn(h),l=l(h),s.flags|=1,an(t,s,l,a),s.child;case 14:return s0(t,s,s.type,s.pendingProps,a);case 15:return r0(t,s,s.type,s.pendingProps,a);case 19:return f0(t,s,a);case 31:return tT(t,s,a);case 22:return i0(t,s,a,s.pendingProps);case 24:return pa(s),l=rn(Lt),t===null?(h=Wh(),h===null&&(h=ht,m=$h(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:l,cache:h},Zh(s),ei(s,Lt,h)):((t.lanes&a)!==0&&(ef(t,s),Ol(s,null,null,a),Dl()),h=t.memoizedState,m=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ei(s,Lt,l)):(l=m.cache,ei(s,Lt,l),l!==h.cache&&Yh(s,[Lt],a,!0))),an(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function vr(t){t.flags|=4}function kf(t,s,a,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(B0())t.flags|=8192;else throw va=wu,Jh}else t.flags&=-16777217}function p0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Iv(s))if(B0())t.flags|=8192;else throw va=wu,Jh}function zu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Xi():536870912,t.lanes|=s,_o|=s)}function Ul(t,s){if(!Qe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function mt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function sT(t,s,a){var l=s.pendingProps;switch(Hh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),mr(Lt),tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(io(s)?vr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Gh())),mt(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(vr(s),m!==null?(mt(s),p0(s,m)):(mt(s),kf(s,h,null,l,a))):m?m!==t.memoizedState?(vr(s),mt(s),p0(s,m)):(mt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&vr(s),mt(s),kf(s,h,t,l,a)),null;case 27:if(at(s),a=Ce.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&vr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return mt(s),null}t=he.current,io(s)?Yg(s):(t=Ev(h,l,a),s.stateNode=t,vr(s))}return mt(s),null;case 5:if(at(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&vr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(m=he.current,io(s))Yg(s);else{var _=td(Ce.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}m[Mt]=s,m[Yt]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(on(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&vr(s)}}return mt(s),kf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&vr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=Ce.current,io(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=sn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Mt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||dv(t.nodeValue,a)),t||Zr(s,!0)}else t=td(t).createTextNode(l),t[Mt]=s,s.stateNode=t}return mt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=io(s),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Mt]=s}else fa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),t=!1}else a=Gh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(zn(s),s):(zn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return mt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=io(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Mt]=s}else fa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),h=!1}else h=Gh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(zn(s),s):(zn(s),null)}return zn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),zu(s,s.updateQueue),mt(s),null);case 4:return tt(),t===null&&rm(s.stateNode.containerInfo),mt(s),null;case 10:return mr(s.type),mt(s),null;case 19:if(X(It),l=s.memoizedState,l===null)return mt(s),null;if(h=(s.flags&128)!==0,m=l.rendering,m===null)if(h)Ul(l,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Nu(t),m!==null){for(s.flags|=128,Ul(l,!1),t=m.updateQueue,s.updateQueue=t,zu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Hg(a,t),a=a.sibling;return ie(It,It.current&1|2),Qe&&hr(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&tn()>Gu&&(s.flags|=128,h=!0,Ul(l,!1),s.lanes=4194304)}else{if(!h)if(t=Nu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,zu(s,t),Ul(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Qe)return mt(s),null}else 2*tn()-l.renderingStartTime>Gu&&a!==536870912&&(s.flags|=128,h=!0,Ul(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=tn(),t.sibling=null,a=It.current,ie(It,h?a&1|2:a&1),Qe&&hr(s,l.treeForkCount),t):(mt(s),null);case 22:case 23:return zn(s),rf(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),a=s.updateQueue,a!==null&&zu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&X(ga),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),mr(Lt),mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function rT(t,s){switch(Hh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return mr(Lt),tt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return at(s),null;case 31:if(s.memoizedState!==null){if(zn(s),s.alternate===null)throw Error(i(340));fa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(zn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));fa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return X(It),null;case 4:return tt(),null;case 10:return mr(s.type),null;case 22:case 23:return zn(s),rf(),t!==null&&X(ga),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return mr(Lt),null;case 25:return null;default:return null}}function g0(t,s){switch(Hh(s),s.tag){case 3:mr(Lt),tt();break;case 26:case 27:case 5:at(s);break;case 4:tt();break;case 31:s.memoizedState!==null&&zn(s);break;case 13:zn(s);break;case 19:X(It);break;case 10:mr(s.type);break;case 22:case 23:zn(s),rf(),t!==null&&X(ga);break;case 24:mr(Lt)}}function zl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==h)}}catch(w){it(s,s.return,w)}}function ai(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=s;var O=a,F=w;try{F()}catch(W){it(h,O,W)}}}l=l.next}while(l!==m)}}catch(W){it(s,s.return,W)}}function y0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{oy(s,a)}catch(l){it(t,t.return,l)}}}function v0(t,s,a){a.props=ba(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,s,l)}}function Bl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){it(t,s,h)}}function $s(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){it(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){it(t,s,h)}else a.current=null}function _0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){it(t,t.return,h)}}function Lf(t,s,a){try{var l=t.stateNode;AT(l,t.type,a,s),l[Yt]=s}catch(h){it(t,t.return,h)}}function x0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fi(t.type)||t.tag===4}function Pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uf(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ys));else if(l!==4&&(l===27&&fi(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Uf(t,s,a),t=t.sibling;t!==null;)Uf(t,s,a),t=t.sibling}function Bu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&fi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Bu(t,s,a),t=t.sibling;t!==null;)Bu(t,s,a),t=t.sibling}function b0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);on(s,l,a),s[Mt]=t,s[Yt]=a}catch(m){it(t,t.return,m)}}var _r=!1,zt=!1,zf=!1,E0=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function iT(t,s){if(t=t.containerInfo,om=ld,t=Mg(t),Dh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,w=-1,O=-1,F=0,W=0,ne=t,G=null;t:for(;;){for(var Y;ne!==a||h!==0&&ne.nodeType!==3||(w=_+h),ne!==m||l!==0&&ne.nodeType!==3||(O=_+l),ne.nodeType===3&&(_+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)G=ne,ne=Y;for(;;){if(ne===t)break t;if(G===a&&++F===h&&(w=_),G===m&&++W===l&&(O=_),(Y=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=Y}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(lm={focusedElem:t,selectionRange:a},ld=!1,Xt=s;Xt!==null;)if(s=Xt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Xt=t;else for(;Xt!==null;){switch(s=Xt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ge=ba(a.type,h);t=l.getSnapshotBeforeUpdate(ge,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Re){it(a,a.return,Re)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)dm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,Xt=t;break}Xt=s.return}}function w0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:br(t,a),l&4&&zl(5,a);break;case 1:if(br(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){it(a,a.return,_)}else{var h=ba(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){it(a,a.return,_)}}l&64&&y0(a),l&512&&Bl(a,a.return);break;case 3:if(br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{oy(t,s)}catch(_){it(a,a.return,_)}}break;case 27:s===null&&l&4&&b0(a);case 26:case 5:br(t,a),s===null&&l&4&&_0(a),l&512&&Bl(a,a.return);break;case 12:br(t,a);break;case 31:br(t,a),l&4&&A0(t,a);break;case 13:br(t,a),l&4&&N0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=mT.bind(null,a),MT(t,a))));break;case 22:if(l=a.memoizedState!==null||_r,!l){s=s!==null&&s.memoizedState!==null||zt,h=_r;var m=zt;_r=l,(zt=s)&&!m?Er(t,a,(a.subtreeFlags&8772)!==0):br(t,a),_r=h,zt=m}break;case 30:break;default:br(t,a)}}function T0(t){var s=t.alternate;s!==null&&(t.alternate=null,T0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&qa(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,Sn=!1;function xr(t,s,a){for(a=a.child;a!==null;)S0(t,s,a),a=a.sibling}function S0(t,s,a){if($&&typeof $.onCommitFiberUnmount=="function")try{$.onCommitFiberUnmount(_n,a)}catch{}switch(a.tag){case 26:zt||$s(a,s),xr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||$s(a,s);var l=_t,h=Sn;fi(a.type)&&(_t=a.stateNode,Sn=!1),xr(t,s,a),Xl(a.stateNode),_t=l,Sn=h;break;case 5:zt||$s(a,s);case 6:if(l=_t,h=Sn,_t=null,xr(t,s,a),_t=l,Sn=h,_t!==null)if(Sn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(a.stateNode)}catch(m){it(a,s,m)}else try{_t.removeChild(a.stateNode)}catch(m){it(a,s,m)}break;case 18:_t!==null&&(Sn?(t=_t,yv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),No(t)):yv(_t,a.stateNode));break;case 4:l=_t,h=Sn,_t=a.stateNode.containerInfo,Sn=!0,xr(t,s,a),_t=l,Sn=h;break;case 0:case 11:case 14:case 15:ai(2,a,s),zt||ai(4,a,s),xr(t,s,a);break;case 1:zt||($s(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&v0(a,s,l)),xr(t,s,a);break;case 21:xr(t,s,a);break;case 22:zt=(l=zt)||a.memoizedState!==null,xr(t,s,a),zt=l;break;default:xr(t,s,a)}}function A0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{No(t)}catch(a){it(s,s.return,a)}}}function N0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{No(t)}catch(a){it(s,s.return,a)}}function aT(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new E0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new E0),s;default:throw Error(i(435,t.tag))}}function qu(t,s){var a=aT(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var h=pT.bind(null,t,l);l.then(h,h)}})}function An(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,_=s,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(fi(w.type)){_t=w.stateNode,Sn=!1;break e}break;case 5:_t=w.stateNode,Sn=!1;break e;case 3:case 4:_t=w.stateNode.containerInfo,Sn=!0;break e}w=w.return}if(_t===null)throw Error(i(160));S0(m,_,h),_t=null,Sn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)C0(s,t),s=s.sibling}var ws=null;function C0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(s,t),Nn(t),l&4&&(ai(3,t,t.return),zl(3,t),ai(5,t,t.return));break;case 1:An(s,t),Nn(t),l&512&&(zt||a===null||$s(a,a.return)),l&64&&_r&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ws;if(An(s,t),Nn(t),l&512&&(zt||a===null||$s(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Vs]||m[Mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),on(m,l,a),m[Mt]=t,Vt(m),l=m;break e;case"link":var _=Cv("link","href",h).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}m=h.createElement(l),on(m,l,a),h.head.appendChild(m);break;case"meta":if(_=Cv("meta","content",h).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}m=h.createElement(l),on(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Mt]=t,Vt(m),l=m}t.stateNode=l}else Rv(h,t.type,t.stateNode);else t.stateNode=Nv(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Rv(h,t.type,t.stateNode):Nv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Lf(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(s,t),Nn(t),l&512&&(zt||a===null||$s(a,a.return)),a!==null&&l&4&&Lf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(s,t),Nn(t),l&512&&(zt||a===null||$s(a,a.return)),t.flags&32){h=t.stateNode;try{Tn(h,"")}catch(ge){it(t,t.return,ge)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Lf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(zf=!0);break;case 6:if(An(s,t),Nn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ge){it(t,t.return,ge)}}break;case 3:if(rd=null,h=ws,ws=nd(s.containerInfo),An(s,t),ws=h,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{No(s.containerInfo)}catch(ge){it(t,t.return,ge)}zf&&(zf=!1,R0(t));break;case 4:l=ws,ws=nd(t.stateNode.containerInfo),An(s,t),Nn(t),ws=l;break;case 12:An(s,t),Nn(t);break;case 31:An(s,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qu(t,l)));break;case 13:An(s,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Fu=tn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qu(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,F=_r,W=zt;if(_r=F||h,zt=W||O,An(s,t),zt=W,_r=F,Nn(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||O||_r||zt||Ea(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(m=O.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=O.stateNode;var ne=O.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ge){it(O,O.return,ge)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(ge){it(O,O.return,ge)}}}else if(s.tag===18){if(a===null){O=s;try{var Y=O.stateNode;h?vv(Y,!0):vv(O.stateNode,!1)}catch(ge){it(O,O.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,qu(t,a))));break;case 19:An(s,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qu(t,l)));break;case 30:break;case 21:break;default:An(s,t),Nn(t)}}function Nn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(x0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=Pf(t);Bu(t,m,h);break;case 5:var _=a.stateNode;a.flags&32&&(Tn(_,""),a.flags&=-33);var w=Pf(t);Bu(t,w,_);break;case 3:case 4:var O=a.stateNode.containerInfo,F=Pf(t);Uf(t,F,O);break;default:throw Error(i(161))}}catch(W){it(t,t.return,W)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function R0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;R0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function br(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)w0(t,s.alternate,s),s=s.sibling}function Ea(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ai(4,s,s.return),Ea(s);break;case 1:$s(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&v0(s,s.return,a),Ea(s);break;case 27:Xl(s.stateNode);case 26:case 5:$s(s,s.return),Ea(s);break;case 22:s.memoizedState===null&&Ea(s);break;case 30:Ea(s);break;default:Ea(s)}t=t.sibling}}function Er(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Er(h,m,a),zl(4,m);break;case 1:if(Er(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){it(l,l.return,F)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)ay(O[h],w)}catch(F){it(l,l.return,F)}}a&&_&64&&y0(m),Bl(m,m.return);break;case 27:b0(m);case 26:case 5:Er(h,m,a),a&&l===null&&_&4&&_0(m),Bl(m,m.return);break;case 12:Er(h,m,a);break;case 31:Er(h,m,a),a&&_&4&&A0(h,m);break;case 13:Er(h,m,a),a&&_&4&&N0(h,m);break;case 22:m.memoizedState===null&&Er(h,m,a),Bl(m,m.return);break;case 30:break;default:Er(h,m,a)}s=s.sibling}}function Bf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Nl(a))}function qf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Nl(t))}function Ts(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I0(t,s,a,l),s=s.sibling}function I0(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ts(t,s,a,l),h&2048&&zl(9,s);break;case 1:Ts(t,s,a,l);break;case 3:Ts(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Nl(t)));break;case 12:if(h&2048){Ts(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){it(s,s.return,O)}}else Ts(t,s,a,l);break;case 31:Ts(t,s,a,l);break;case 13:Ts(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Ts(t,s,a,l):ql(t,s):m._visibility&2?Ts(t,s,a,l):(m._visibility|=2,go(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Bf(_,s);break;case 24:Ts(t,s,a,l),h&2048&&qf(s.alternate,s);break;default:Ts(t,s,a,l)}}function go(t,s,a,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,w=a,O=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:go(m,_,w,O,h),zl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?go(m,_,w,O,h):ql(m,_):(W._visibility|=2,go(m,_,w,O,h)),h&&F&2048&&Bf(_.alternate,_);break;case 24:go(m,_,w,O,h),h&&F&2048&&qf(_.alternate,_);break;default:go(m,_,w,O,h)}s=s.sibling}}function ql(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:ql(a,l),h&2048&&Bf(l.alternate,l);break;case 24:ql(a,l),h&2048&&qf(l.alternate,l);break;default:ql(a,l)}s=s.sibling}}var Hl=8192;function yo(t,s,a){if(t.subtreeFlags&Hl)for(t=t.child;t!==null;)j0(t,s,a),t=t.sibling}function j0(t,s,a){switch(t.tag){case 26:yo(t,s,a),t.flags&Hl&&t.memoizedState!==null&&QT(a,ws,t.memoizedState,t.memoizedProps);break;case 5:yo(t,s,a);break;case 3:case 4:var l=ws;ws=nd(t.stateNode.containerInfo),yo(t,s,a),ws=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Hl,Hl=16777216,yo(t,s,a),Hl=l):yo(t,s,a));break;default:yo(t,s,a)}}function D0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Fl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Xt=l,M0(l,t)}D0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)O0(t),t=t.sibling}function O0(t){switch(t.tag){case 0:case 11:case 15:Fl(t),t.flags&2048&&ai(9,t,t.return);break;case 3:Fl(t);break;case 12:Fl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Hu(t)):Fl(t);break;default:Fl(t)}}function Hu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Xt=l,M0(l,t)}D0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ai(8,s,s.return),Hu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(s));break;default:Hu(s)}t=t.sibling}}function M0(t,s){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:ai(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Xt=l;else e:for(a=t;Xt!==null;){l=Xt;var h=l.sibling,m=l.return;if(T0(l),l===a){Xt=null;break e}if(h!==null){h.return=m,Xt=h;break e}Xt=m}}}var oT={getCacheForType:function(t){var s=rn(Lt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return rn(Lt).controller.signal}},lT=typeof WeakMap=="function"?WeakMap:Map,et=0,ht=null,Ue=null,Be=0,rt=0,Bn=null,oi=!1,vo=!1,Hf=!1,wr=0,At=0,li=0,wa=0,Ff=0,qn=0,_o=0,Gl=null,Cn=null,Gf=!1,Fu=0,V0=0,Gu=1/0,Qu=null,ci=null,Gt=0,ui=null,xo=null,Tr=0,Qf=0,Kf=null,k0=null,Ql=0,Yf=null;function Hn(){return(et&2)!==0&&Be!==0?Be&-Be:Q.T!==null?em():Kc()}function L0(){if(qn===0)if((Be&536870912)===0||Qe){var t=On;On<<=1,(On&3932160)===0&&(On=262144),qn=t}else qn=536870912;return t=Un.current,t!==null&&(t.flags|=32),qn}function Rn(t,s,a){(t===ht&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(bo(t,0),di(t,Be,qn,!1)),Os(t,a),((et&2)===0||t!==ht)&&(t===ht&&((et&2)===0&&(wa|=a),At===4&&di(t,Be,qn,!1)),Xs(t))}function P0(t,s,a){if((et&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Mn(t,s),h=l?dT(t,s):Xf(t,s,!0),m=l;do{if(h===0){vo&&!l&&di(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!cT(a)){h=Xf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var w=t;h=Gl;var O=w.current.memoizedState.isDehydrated;if(O&&(bo(w,_).flags|=256),_=Xf(w,_,!1),_!==2){if(Hf&&!O){w.errorRecoveryDisabledLanes|=m,wa|=m,h=4;break e}m=Cn,Cn=h,m!==null&&(Cn===null?Cn=m:Cn.push.apply(Cn,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){bo(t,0),di(t,s,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:di(l,s,qn,!oi);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Fu+300-tn(),10<h)){if(di(l,s,qn,!oi),Wn(l,0,!0)!==0)break e;Tr=s,l.timeoutHandle=pv(U0.bind(null,l,a,Cn,Qu,Gf,s,qn,wa,_o,oi,m,"Throttled",-0,0),h);break e}U0(l,a,Cn,Qu,Gf,s,qn,wa,_o,oi,m,null,-0,0)}}break}while(!0);Xs(t)}function U0(t,s,a,l,h,m,_,w,O,F,W,ne,G,Y){if(t.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ys},j0(s,m,ne);var ge=(m&62914560)===m?Fu-tn():(m&4194048)===m?V0-tn():0;if(ge=KT(ne,ge),ge!==null){Tr=m,t.cancelPendingCommit=ge(K0.bind(null,t,s,m,a,l,h,_,w,O,W,ne,null,G,Y)),di(t,m,_,!F);return}}K0(t,s,m,a,l,h,_,w,O)}function cT(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Ln(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(t,s,a,l){s&=~Ff,s&=~wa,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var m=31-we(h),_=1<<m;l[m]=-1,h&=~_}a!==0&&ar(t,a,s)}function Ku(){return(et&6)===0?(Kl(0),!1):!0}function $f(){if(Ue!==null){if(rt===0)var t=Ue.return;else t=Ue,fr=ma=null,df(t),uo=null,Rl=0,t=Ue;for(;t!==null;)g0(t.alternate,t),t=t.return;Ue=null}}function bo(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,RT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tr=0,$f(),ht=t,Ue=a=dr(t.current,null),Be=s,rt=0,Bn=null,oi=!1,vo=Mn(t,s),Hf=!1,_o=qn=Ff=wa=li=At=0,Cn=Gl=null,Gf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-we(l),m=1<<h;s|=t[h],l&=~m}return wr=s,mu(),a}function z0(t,s){ke=null,Q.H=Ll,s===co||s===Eu?(s=ny(),rt=3):s===Jh?(s=ny(),rt=4):rt=s===Nf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bn=s,Ue===null&&(At=1,ku(t,ss(s,t.current)))}function B0(){var t=Un.current;return t===null?!0:(Be&4194048)===Be?os===null:(Be&62914560)===Be||(Be&536870912)!==0?t===os:!1}function q0(){var t=Q.H;return Q.H=Ll,t===null?Ll:t}function H0(){var t=Q.A;return Q.A=oT,t}function Yu(){At=4,oi||(Be&4194048)!==Be&&Un.current!==null||(vo=!0),(li&134217727)===0&&(wa&134217727)===0||ht===null||di(ht,Be,qn,!1)}function Xf(t,s,a){var l=et;et|=2;var h=q0(),m=H0();(ht!==t||Be!==s)&&(Qu=null,bo(t,s)),s=!1;var _=At;e:do try{if(rt!==0&&Ue!==null){var w=Ue,O=Bn;switch(rt){case 8:$f(),_=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(s=!0);var F=rt;if(rt=0,Bn=null,Eo(t,w,O,F),a&&vo){_=0;break e}break;default:F=rt,rt=0,Bn=null,Eo(t,w,O,F)}}uT(),_=At;break}catch(W){z0(t,W)}while(!0);return s&&t.shellSuspendCounter++,fr=ma=null,et=l,Q.H=h,Q.A=m,Ue===null&&(ht=null,Be=0,mu()),_}function uT(){for(;Ue!==null;)F0(Ue)}function dT(t,s){var a=et;et|=2;var l=q0(),h=H0();ht!==t||Be!==s?(Qu=null,Gu=tn()+500,bo(t,s)):vo=Mn(t,s);e:do try{if(rt!==0&&Ue!==null){s=Ue;var m=Bn;t:switch(rt){case 1:rt=0,Bn=null,Eo(t,s,m,1);break;case 2:case 9:if(ey(m)){rt=0,Bn=null,G0(s);break}s=function(){rt!==2&&rt!==9||ht!==t||(rt=7),Xs(t)},m.then(s,s);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:ey(m)?(rt=0,Bn=null,G0(s)):(rt=0,Bn=null,Eo(t,s,m,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var w=Ue;if(_?Iv(_):w.stateNode.complete){rt=0,Bn=null;var O=w.sibling;if(O!==null)Ue=O;else{var F=w.return;F!==null?(Ue=F,$u(F)):Ue=null}break t}}rt=0,Bn=null,Eo(t,s,m,5);break;case 6:rt=0,Bn=null,Eo(t,s,m,6);break;case 8:$f(),At=6;break e;default:throw Error(i(462))}}hT();break}catch(W){z0(t,W)}while(!0);return fr=ma=null,Q.H=l,Q.A=h,et=a,Ue!==null?0:(ht=null,Be=0,mu(),At)}function hT(){for(;Ue!==null&&!il();)F0(Ue)}function F0(t){var s=m0(t.alternate,t,wr);t.memoizedProps=t.pendingProps,s===null?$u(t):Ue=s}function G0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=l0(a,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=l0(a,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:df(s);default:g0(a,s),s=Ue=Hg(s,wr),s=m0(a,s,wr)}t.memoizedProps=t.pendingProps,s===null?$u(t):Ue=s}function Eo(t,s,a,l){fr=ma=null,df(s),uo=null,Rl=0;var h=s.return;try{if(eT(t,h,s,a,Be)){At=1,ku(t,ss(a,t.current)),Ue=null;return}}catch(m){if(h!==null)throw Ue=h,m;At=1,ku(t,ss(a,t.current)),Ue=null;return}s.flags&32768?(Qe||l===1?t=!0:vo||(Be&536870912)!==0?t=!1:(oi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Q0(s,t)):$u(s)}function $u(t){var s=t;do{if((s.flags&32768)!==0){Q0(s,oi);return}t=s.return;var a=sT(s.alternate,s,wr);if(a!==null){Ue=a;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=t}while(s!==null);At===0&&(At=5)}function Q0(t,s){do{var a=rT(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);At=6,Ue=null}function K0(t,s,a,l,h,m,_,w,O){t.cancelPendingCommit=null;do Xu();while(Gt!==0);if((et&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Lh,En(t,a,m,_,w,O),t===ht&&(Ue=ht=null,Be=0),xo=s,ui=t,Tr=a,Qf=m,Kf=h,k0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gT(Ds,function(){return J0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=le.p,le.p=2,_=et,et|=4;try{iT(t,s,a)}finally{et=_,le.p=h,Q.T=l}}Gt=1,Y0(),$0(),X0()}}function Y0(){if(Gt===1){Gt=0;var t=ui,s=xo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=et;et|=4;try{C0(s,t);var m=lm,_=Mg(t.containerInfo),w=m.focusedElem,O=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&Og(w.ownerDocument.documentElement,w)){if(O!==null&&Dh(w)){var F=O.start,W=O.end;if(W===void 0&&(W=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(W,w.value.length);else{var ne=w.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var Y=G.getSelection(),ge=w.textContent.length,Re=Math.min(O.start,ge),ut=O.end===void 0?Re:Math.min(O.end,ge);!Y.extend&&Re>ut&&(_=ut,ut=Re,Re=_);var U=Dg(w,Re),L=Dg(w,ut);if(U&&L&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(U.node,U.offset),Y.removeAllRanges(),Re>ut?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(ne=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var ee=ne[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}ld=!!om,lm=om=null}finally{et=h,le.p=l,Q.T=a}}t.current=s,Gt=2}}function $0(){if(Gt===2){Gt=0;var t=ui,s=xo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=et;et|=4;try{w0(t,s.alternate,s)}finally{et=h,le.p=l,Q.T=a}}Gt=3}}function X0(){if(Gt===4||Gt===3){Gt=0,Pa();var t=ui,s=xo,a=Tr,l=k0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gt=5:(Gt=0,xo=ui=null,W0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ci=null),or(a),s=s.stateNode,$&&typeof $.onCommitFiberRoot=="function")try{$.onCommitFiberRoot(_n,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,h=le.p,le.p=2,Q.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];m(w.value,{componentStack:w.stack})}}finally{Q.T=s,le.p=h}}(Tr&3)!==0&&Xu(),Xs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Yf?Ql++:(Ql=0,Yf=t):Ql=0,Kl(0)}}function W0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Nl(s)))}function Xu(){return Y0(),$0(),X0(),J0()}function J0(){if(Gt!==5)return!1;var t=ui,s=Qf;Qf=0;var a=or(Tr),l=Q.T,h=le.p;try{le.p=32>a?32:a,Q.T=null,a=Kf,Kf=null;var m=ui,_=Tr;if(Gt=0,xo=ui=null,Tr=0,(et&6)!==0)throw Error(i(331));var w=et;if(et|=4,O0(m.current),I0(m,m.current,_,a),et=w,Kl(0,!1),$&&typeof $.onPostCommitFiberRoot=="function")try{$.onPostCommitFiberRoot(_n,m)}catch{}return!0}finally{le.p=h,Q.T=l,W0(t,s)}}function Z0(t,s,a){s=ss(a,s),s=Af(t.stateNode,s,2),t=si(t,s,2),t!==null&&(Os(t,2),Xs(t))}function it(t,s,a){if(t.tag===3)Z0(t,t,a);else for(;s!==null;){if(s.tag===3){Z0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ci===null||!ci.has(l))){t=ss(a,t),a=e0(2),l=si(s,a,2),l!==null&&(t0(a,l,s,t),Os(l,2),Xs(l));break}}s=s.return}}function Wf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new lT;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Hf=!0,h.add(a),t=fT.bind(null,t,s,a),s.then(t,t))}function fT(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(Be&a)===a&&(At===4||At===3&&(Be&62914560)===Be&&300>tn()-Fu?(et&2)===0&&bo(t,0):Ff|=a,_o===Be&&(_o=0)),Xs(t)}function ev(t,s){s===0&&(s=Xi()),t=da(t,s),t!==null&&(Os(t,s),Xs(t))}function mT(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),ev(t,a)}function pT(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),ev(t,a)}function gT(t,s){return Ct(t,s)}var Wu=null,wo=null,Jf=!1,Ju=!1,Zf=!1,hi=0;function Xs(t){t!==wo&&t.next===null&&(wo===null?Wu=wo=t:wo=wo.next=t),Ju=!0,Jf||(Jf=!0,vT())}function Kl(t,s){if(!Zf&&Ju){Zf=!0;do for(var a=!1,l=Wu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var _=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-we(42|t)+1)-1,m&=h&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,rv(l,m))}else m=Be,m=Wn(l,l===ht?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Mn(l,m)||(a=!0,rv(l,m));l=l.next}while(a);Zf=!1}}function yT(){tv()}function tv(){Ju=Jf=!1;var t=0;hi!==0&&CT()&&(t=hi);for(var s=tn(),a=null,l=Wu;l!==null;){var h=l.next,m=nv(l,s);m===0?(l.next=null,a===null?Wu=h:a.next=h,h===null&&(wo=a)):(a=l,(t!==0||(m&3)!==0)&&(Ju=!0)),l=h}Gt!==0&&Gt!==5||Kl(t),hi!==0&&(hi=0)}function nv(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-we(m),w=1<<_,O=h[_];O===-1?((w&a)===0||(w&l)!==0)&&(h[_]=za(w,s)):O<=s&&(t.expiredLanes|=w),m&=~w}if(s=ht,a=Be,a=Wn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&js(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Mn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&js(l),or(a)){case 2:case 8:a=Qi;break;case 32:a=Ds;break;case 268435456:a=Ki;break;default:a=Ds}return l=sv.bind(null,t),a=Ct(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&js(l),t.callbackPriority=2,t.callbackNode=null,2}function sv(t,s){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Xu()&&t.callbackNode!==a)return null;var l=Be;return l=Wn(t,t===ht?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(P0(t,l,s),nv(t,tn()),t.callbackNode!=null&&t.callbackNode===a?sv.bind(null,t):null)}function rv(t,s){if(Xu())return null;P0(t,s,!0)}function vT(){IT(function(){(et&6)!==0?Ct(Gi,yT):tv()})}function em(){if(hi===0){var t=oo;t===0&&(t=xn,xn<<=1,(xn&261888)===0&&(xn=256)),hi=t}return hi}function iv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Qa(""+t)}function av(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function _T(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var m=iv((h[Yt]||null).action),_=l.submitter;_&&(s=(s=_[Yt]||null)?iv(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var w=new Hs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(hi!==0){var O=_?av(h,_):new FormData(h);xf(a,{pending:!0,data:O,method:h.method,action:m},null,O)}}else typeof m=="function"&&(w.preventDefault(),O=_?av(h,_):new FormData(h),xf(a,{pending:!0,data:O,method:h.method,action:m},m,O))},currentTarget:h}]})}}for(var tm=0;tm<kh.length;tm++){var nm=kh[tm],xT=nm.toLowerCase(),bT=nm[0].toUpperCase()+nm.slice(1);Es(xT,"on"+bT)}Es(Lg,"onAnimationEnd"),Es(Pg,"onAnimationIteration"),Es(Ug,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(Lw,"onTransitionRun"),Es(Pw,"onTransitionStart"),Es(Uw,"onTransitionCancel"),Es(zg,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ET=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function ov(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var w=l[_],O=w.instance,F=w.currentTarget;if(w=w.listener,O!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(W){fu(W)}h.currentTarget=null,m=O}else for(_=0;_<l.length;_++){if(w=l[_],O=w.instance,F=w.currentTarget,w=w.listener,O!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(W){fu(W)}h.currentTarget=null,m=O}}}}function ze(t,s){var a=s[Ba];a===void 0&&(a=s[Ba]=new Set);var l=t+"__bubble";a.has(l)||(lv(s,t,2,!1),a.add(l))}function sm(t,s,a){var l=0;s&&(l|=4),lv(a,t,l,s)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function rm(t){if(!t[Zu]){t[Zu]=!0,al.forEach(function(a){a!=="selectionchange"&&(ET.has(a)||sm(a,!1,t),sm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Zu]||(s[Zu]=!0,sm("selectionchange",!1,s))}}function lv(t,s,a,l){switch(Lv(s)){case 2:var h=XT;break;case 8:h=WT;break;default:h=_m}a=h.bind(null,s,a,t),h=void 0,!sa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function im(t,s,a,l,h){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=ks(w),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=m=_;continue e}w=w.parentNode}}l=l.return}Kr(function(){var F=m,W=Zn(a),ne=[];e:{var G=Bg.get(t);if(G!==void 0){var Y=Hs,ge=t;switch(t){case"keypress":if(ia(a)===0)break e;case"keydown":case"keyup":Y=uu;break;case"focusin":ge="focus",Y=oa;break;case"focusout":ge="blur",Y=oa;break;case"beforeblur":case"afterblur":Y=oa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=v;break;case Lg:case Pg:case Ug:Y=su;break;case zg:Y=S;break;case"scroll":case"scrollend":Y=vl;break;case"wheel":Y=K;break;case"copy":case"cut":case"paste":Y=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ur;break;case"toggle":case"beforetoggle":Y=Ve}var Re=(s&4)!==0,ut=!Re&&(t==="scroll"||t==="scrollend"),U=Re?G!==null?G+"Capture":null:G;Re=[];for(var L=F,H;L!==null;){var ee=L;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||U===null||(ee=vs(L,U),ee!=null&&Re.push($l(L,ee,H))),ut)break;L=L.return}0<Re.length&&(G=new Y(G,ge,null,a,W),ne.push({event:G,listeners:Re}))}}if((s&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&a!==pl&&(ge=a.relatedTarget||a.fromElement)&&(ks(ge)||ge[Ms]))break e;if((Y||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(ge=a.relatedTarget||a.toElement,Y=F,ge=ge?ks(ge):null,ge!==null&&(ut=c(ge),Re=ge.tag,ge!==ut||Re!==5&&Re!==27&&Re!==6)&&(ge=null)):(Y=null,ge=F),Y!==ge)){if(Re=_l,ee="onMouseLeave",U="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Re=ur,ee="onPointerLeave",U="onPointerEnter",L="pointer"),ut=Y==null?G:Vn(Y),H=ge==null?G:Vn(ge),G=new Re(ee,L+"leave",Y,a,W),G.target=ut,G.relatedTarget=H,ee=null,ks(W)===F&&(Re=new Re(U,L+"enter",ge,a,W),Re.target=H,Re.relatedTarget=ut,ee=Re),ut=ee,Y&&ge)t:{for(Re=wT,U=Y,L=ge,H=0,ee=U;ee;ee=Re(ee))H++;ee=0;for(var Se=L;Se;Se=Re(Se))ee++;for(;0<H-ee;)U=Re(U),H--;for(;0<ee-H;)L=Re(L),ee--;for(;H--;){if(U===L||L!==null&&U===L.alternate){Re=U;break t}U=Re(U),L=Re(L)}Re=null}else Re=null;Y!==null&&cv(ne,G,Y,Re,!1),ge!==null&&ut!==null&&cv(ne,ut,ge,Re,!0)}}e:{if(G=F?Vn(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var We=Ag;else if(Tg(G))if(Ng)We=Mw;else{We=Dw;var _e=jw}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Ga(F.elementType)&&(We=Ag):We=Ow;if(We&&(We=We(t,F))){Sg(ne,We,a,W);break e}_e&&_e(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&hl(G,"number",G.value)}switch(_e=F?Vn(F):window,t){case"focusin":(Tg(_e)||_e.contentEditable==="true")&&(Za=_e,Oh=F,Tl=null);break;case"focusout":Tl=Oh=Za=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,Vg(ne,a,W);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Vg(ne,a,W)}var Le;if(Ze)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Ja?la(t,a)&&(qe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(Qs&&a.locale!=="ko"&&(Ja||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Ja&&(Le=yl()):(qs=W,gl="value"in qs?qs.value:qs.textContent,Ja=!0)),_e=ed(F,qe),0<_e.length&&(qe=new Gs(qe,t,null,a,W),ne.push({event:qe,listeners:_e}),Le?qe.data=Le:(Le=Wa(a),Le!==null&&(qe.data=Le)))),(Le=ts?Nw(t,a):Cw(t,a))&&(qe=ed(F,"onBeforeInput"),0<qe.length&&(_e=new Gs("onBeforeInput","beforeinput",null,a,W),ne.push({event:_e,listeners:qe}),_e.data=Le)),_T(ne,t,F,a,W)}ov(ne,s)})}function $l(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ed(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=vs(t,a),h!=null&&l.unshift($l(t,h,m)),h=vs(t,s),h!=null&&l.push($l(t,h,m))),t.tag===3)return l;t=t.return}return[]}function wT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function cv(t,s,a,l,h){for(var m=s._reactName,_=[];a!==null&&a!==l;){var w=a,O=w.alternate,F=w.stateNode;if(w=w.tag,O!==null&&O===l)break;w!==5&&w!==26&&w!==27||F===null||(O=F,h?(F=vs(a,m),F!=null&&_.unshift($l(a,F,O))):h||(F=vs(a,m),F!=null&&_.push($l(a,F,O)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var TT=/\r\n?/g,ST=/\u0000|\uFFFD/g;function uv(t){return(typeof t=="string"?t:""+t).replace(TT,`
`).replace(ST,"")}function dv(t,s){return s=uv(s),uv(t)===s}function ct(t,s,a,l,h,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Tn(t,""+l);break;case"className":kn(t,"class",l);break;case"tabIndex":kn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(t,a,l);break;case"style":ml(t,l,m);break;case"data":if(s!=="object"){kn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Qa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&ct(t,s,"name",h.name,h,null),ct(t,s,"formEncType",h.formEncType,h,null),ct(t,s,"formMethod",h.formMethod,h,null),ct(t,s,"formTarget",h.formTarget,h,null)):(ct(t,s,"encType",h.encType,h,null),ct(t,s,"method",h.method,h,null),ct(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Qa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ys);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Qa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ze("beforetoggle",t),ze("toggle",t),Ha(t,"popover",l);break;case"xlinkActuate":kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":kt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":kt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":kt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":kt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ha(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eu.get(a)||a,Ha(t,a,l))}}function am(t,s,a,l,h,m){switch(a){case"style":ml(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&Tn(t,""+l);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ys);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[Yt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ha(t,a,l)}}}function on(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",t),ze("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(t,s,m,_,a,null)}}h&&ct(t,s,"srcSet",a.srcSet,a,null),l&&ct(t,s,"src",a.src,a,null);return;case"input":ze("invalid",t);var w=m=_=h=null,O=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":_=W;break;case"checked":O=W;break;case"defaultChecked":F=W;break;case"value":m=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:ct(t,s,l,W,a,null)}}Wc(t,m,w,O,F,_,h,!1);return;case"select":ze("invalid",t),l=_=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:ct(t,s,h,w,a,null)}s=m,a=_,t.multiple=!!l,s!=null?Hr(t,!!l,s,!1):a!=null&&Hr(t,!!l,a,!0);return;case"textarea":ze("invalid",t),m=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ct(t,s,_,w,a,null)}Fr(t,l,h,m);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ct(t,s,O,l,a,null)}return;case"dialog":ze("beforetoggle",t),ze("toggle",t),ze("cancel",t),ze("close",t);break;case"iframe":case"object":ze("load",t);break;case"video":case"audio":for(l=0;l<Yl.length;l++)ze(Yl[l],t);break;case"image":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"embed":case"source":case"link":ze("error",t),ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(t,s,F,l,a,null)}return;default:if(Ga(s)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&am(t,s,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&ct(t,s,w,l,a,null))}function AT(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,w=null,O=null,F=null,W=null;for(Y in a){var ne=a[Y];if(a.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=ne;default:l.hasOwnProperty(Y)||ct(t,s,Y,null,l,ne)}}for(var G in l){var Y=l[G];if(ne=a[G],l.hasOwnProperty(G)&&(Y!=null||ne!=null))switch(G){case"type":m=Y;break;case"name":h=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":_=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==ne&&ct(t,s,G,Y,l,ne)}}Fa(t,_,w,O,F,W,m,h);return;case"select":Y=_=w=G=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Y=O;default:l.hasOwnProperty(m)||ct(t,s,m,null,l,O)}for(h in l)if(m=l[h],O=a[h],l.hasOwnProperty(h)&&(m!=null||O!=null))switch(h){case"value":G=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==O&&ct(t,s,h,m,l,O)}s=w,a=_,l=Y,G!=null?Hr(t,!!a,G,!1):!!l!=!!a&&(s!=null?Hr(t,!!a,s,!0):Hr(t,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ct(t,s,w,null,l,h)}for(_ in l)if(h=l[_],m=a[_],l.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":G=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&ct(t,s,_,h,l,m)}Jc(t,G,Y);return;case"option":for(var ge in a)if(G=a[ge],a.hasOwnProperty(ge)&&G!=null&&!l.hasOwnProperty(ge))switch(ge){case"selected":t.selected=!1;break;default:ct(t,s,ge,null,l,G)}for(O in l)if(G=l[O],Y=a[O],l.hasOwnProperty(O)&&G!==Y&&(G!=null||Y!=null))switch(O){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ct(t,s,O,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)G=a[Re],a.hasOwnProperty(Re)&&G!=null&&!l.hasOwnProperty(Re)&&ct(t,s,Re,null,l,G);for(F in l)if(G=l[F],Y=a[F],l.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:ct(t,s,F,G,l,Y)}return;default:if(Ga(s)){for(var ut in a)G=a[ut],a.hasOwnProperty(ut)&&G!==void 0&&!l.hasOwnProperty(ut)&&am(t,s,ut,void 0,l,G);for(W in l)G=l[W],Y=a[W],!l.hasOwnProperty(W)||G===Y||G===void 0&&Y===void 0||am(t,s,W,G,l,Y);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&ct(t,s,U,null,l,G);for(ne in l)G=l[ne],Y=a[ne],!l.hasOwnProperty(ne)||G===Y||G==null&&Y==null||ct(t,s,ne,G,l,Y)}function hv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,_=h.initiatorType,w=h.duration;if(m&&w&&hv(_)){for(_=0,w=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],F=O.startTime;if(F>w)break;var W=O.transferSize,ne=O.initiatorType;W&&hv(ne)&&(O=O.responseEnd,_+=W*(O<w?1:(w-F)/(O-F)))}if(--l,s+=8*(m+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var om=null,lm=null;function td(t){return t.nodeType===9?t:t.ownerDocument}function fv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function cm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var um=null;function CT(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var pv=typeof setTimeout=="function"?setTimeout:void 0,RT=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,IT=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(t){return gv.resolve(null).then(t).catch(jT)}:pv;function jT(t){setTimeout(function(){throw t})}function fi(t){return t==="head"}function yv(t,s){var a=s,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),No(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Xl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Xl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[Vs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Xl(t.ownerDocument.body);a=h}while(a);No(s)}function vv(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function dm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dm(a),qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function DT(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Vs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ls(t.nextSibling),t===null)break}return null}function OT(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ls(t.nextSibling),t===null))return null;return t}function _v(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ls(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$?"||t.data==="$~"}function fm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function MT(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ls(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var mm=null;function xv(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return ls(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function bv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Ev(t,s,a){switch(s=td(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Xl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);qa(t)}var cs=new Map,wv=new Set;function nd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sr=le.d;le.d={f:VT,r:kT,D:LT,C:PT,L:UT,m:zT,X:qT,S:BT,M:HT};function VT(){var t=Sr.f(),s=Ku();return t||s}function kT(t){var s=Jn(t);s!==null&&s.tag===5&&s.type==="form"?zy(s):Sr.r(t)}var To=typeof document>"u"?null:document;function Tv(t,s,a){var l=To;if(l&&typeof s=="string"&&s){var h=wn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),wv.has(h)||(wv.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),on(s,"link",t),Vt(s),l.head.appendChild(s)))}}function LT(t){Sr.D(t),Tv("dns-prefetch",t,null)}function PT(t,s){Sr.C(t,s),Tv("preconnect",t,s)}function UT(t,s,a){Sr.L(t,s,a);var l=To;if(l&&t&&s){var h='link[rel="preload"][as="'+wn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+wn(a.imageSizes)+'"]')):h+='[href="'+wn(t)+'"]';var m=h;switch(s){case"style":m=So(t);break;case"script":m=Ao(t)}cs.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),cs.set(m,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(Wl(m))||s==="script"&&l.querySelector(Jl(m))||(s=l.createElement("link"),on(s,"link",t),Vt(s),l.head.appendChild(s)))}}function zT(t,s){Sr.m(t,s);var a=To;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+wn(l)+'"][href="'+wn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ao(t)}if(!cs.has(m)&&(t=E({rel:"modulepreload",href:t},s),cs.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jl(m)))return}l=a.createElement("link"),on(l,"link",t),Vt(l),a.head.appendChild(l)}}}function BT(t,s,a){Sr.S(t,s,a);var l=To;if(l&&t){var h=Ls(l).hoistableStyles,m=So(t);s=s||"default";var _=h.get(m);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(Wl(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=cs.get(m))&&pm(t,a);var O=_=l.createElement("link");Vt(O),on(O,"link",t),O._p=new Promise(function(F,W){O.onload=F,O.onerror=W}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,sd(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(m,_)}}}function qT(t,s){Sr.X(t,s);var a=To;if(a&&t){var l=Ls(a).hoistableScripts,h=Ao(t),m=l.get(h);m||(m=a.querySelector(Jl(h)),m||(t=E({src:t,async:!0},s),(s=cs.get(h))&&gm(t,s),m=a.createElement("script"),Vt(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function HT(t,s){Sr.M(t,s);var a=To;if(a&&t){var l=Ls(a).hoistableScripts,h=Ao(t),m=l.get(h);m||(m=a.querySelector(Jl(h)),m||(t=E({src:t,async:!0,type:"module"},s),(s=cs.get(h))&&gm(t,s),m=a.createElement("script"),Vt(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Sv(t,s,a,l){var h=(h=Ce.current)?nd(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=So(a.href),a=Ls(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=So(a.href);var m=Ls(h).hoistableStyles,_=m.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=h.querySelector(Wl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),cs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},cs.set(t,a),m||FT(h,t,a,_.state))),s&&l===null)throw Error(i(528,""));return _}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ao(a),a=Ls(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function So(t){return'href="'+wn(t)+'"'}function Wl(t){return'link[rel="stylesheet"]['+t+"]"}function Av(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function FT(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),on(s,"link",a),Vt(s),t.head.appendChild(s))}function Ao(t){return'[src="'+wn(t)+'"]'}function Jl(t){return"script[async]"+t}function Nv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+wn(a.href)+'"]');if(l)return s.instance=l,Vt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Vt(l),on(l,"style",h),sd(l,a.precedence,t),s.instance=l;case"stylesheet":h=So(a.href);var m=t.querySelector(Wl(h));if(m)return s.state.loading|=4,s.instance=m,Vt(m),m;l=Av(a),(h=cs.get(h))&&pm(l,h),m=(t.ownerDocument||t).createElement("link"),Vt(m);var _=m;return _._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),on(m,"link",l),s.state.loading|=4,sd(m,a.precedence,t),s.instance=m;case"script":return m=Ao(a.src),(h=t.querySelector(Jl(m)))?(s.instance=h,Vt(h),h):(l=a,(h=cs.get(m))&&(l=E({},a),gm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Vt(h),on(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,sd(l,a.precedence,t));return s.instance}function sd(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function pm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function gm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var rd=null;function Cv(t,s,a){if(rd===null){var l=new Map,h=rd=new Map;h.set(a,l)}else h=rd,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Vs]||m[Mt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var w=l.get(_);w?w.push(m):l.set(_,[m])}}return l}function Rv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function GT(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Iv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function QT(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=So(l.href),m=s.querySelector(Wl(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=id.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Vt(m);return}m=s.ownerDocument||s,l=Av(l),(h=cs.get(h))&&pm(l,h),m=m.createElement("link"),Vt(m);var _=m;_._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),on(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=id.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var ym=0;function KT(t,s){return t.stylesheets&&t.count===0&&od(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&od(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&ym===0&&(ym=62500*NT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&od(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>ym?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function id(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function od(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,s.forEach(YT,t),ad=null,id.call(t))}function YT(t,s){if(!(s.state.loading&4)){var a=ad.get(t);if(a)var l=a.get(null);else{a=new Map,ad.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=s.instance,_=h.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,h),a.set(_,h),this.count++,l=id.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var Zl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function $T(t,s,a,l,h,m,_,w,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.hiddenUpdates=bn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function jv(t,s,a,l,h,m,_,w,O,F,W,ne){return t=new $T(t,s,a,_,O,F,W,ne,w),s=1,m===!0&&(s|=24),m=Pn(3,null,null,s),t.current=m,m.stateNode=t,s=$h(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Zh(m),t}function Dv(t){return t?(t=no,t):no}function Ov(t,s,a,l,h,m){h=Dv(h),l.context===null?l.context=h:l.pendingContext=h,l=ni(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=si(t,l,s),a!==null&&(Rn(a,t,s),jl(a,t,s))}function Mv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function vm(t,s){Mv(t,s),(t=t.alternate)&&Mv(t,s)}function Vv(t){if(t.tag===13||t.tag===31){var s=da(t,67108864);s!==null&&Rn(s,t,67108864),vm(t,67108864)}}function kv(t){if(t.tag===13||t.tag===31){var s=Hn();s=Zi(s);var a=da(t,s);a!==null&&Rn(a,t,s),vm(t,s)}}var ld=!0;function XT(t,s,a,l){var h=Q.T;Q.T=null;var m=le.p;try{le.p=2,_m(t,s,a,l)}finally{le.p=m,Q.T=h}}function WT(t,s,a,l){var h=Q.T;Q.T=null;var m=le.p;try{le.p=8,_m(t,s,a,l)}finally{le.p=m,Q.T=h}}function _m(t,s,a,l){if(ld){var h=xm(l);if(h===null)im(t,s,l,cd,a),Pv(t,l);else if(ZT(h,t,s,a,l))l.stopPropagation();else if(Pv(t,l),s&4&&-1<JT.indexOf(t)){for(;h!==null;){var m=Jn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Xn(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var O=1<<31-we(_);w.entanglements[1]|=O,_&=~O}Xs(m),(et&6)===0&&(Gu=tn()+500,Kl(0))}}break;case 31:case 13:w=da(m,2),w!==null&&Rn(w,m,2),Ku(),vm(m,2)}if(m=xm(l),m===null&&im(t,s,l,cd,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else im(t,s,l,null,a)}}function xm(t){return t=Zn(t),bm(t)}var cd=null;function bm(t){if(cd=null,t=ks(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return cd=t,null}function Lv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ir()){case Gi:return 2;case Qi:return 8;case Ds:case Ua:return 32;case Ki:return 268435456;default:return 32}default:return 32}}var Em=!1,mi=null,pi=null,gi=null,ec=new Map,tc=new Map,yi=[],JT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pv(t,s){switch(t){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":ec.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(s.pointerId)}}function nc(t,s,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},s!==null&&(s=Jn(s),s!==null&&Vv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function ZT(t,s,a,l,h){switch(s){case"focusin":return mi=nc(mi,t,s,a,l,h),!0;case"dragenter":return pi=nc(pi,t,s,a,l,h),!0;case"mouseover":return gi=nc(gi,t,s,a,l,h),!0;case"pointerover":var m=h.pointerId;return ec.set(m,nc(ec.get(m)||null,t,s,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,tc.set(m,nc(tc.get(m)||null,t,s,a,l,h)),!0}return!1}function Uv(t){var s=ks(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,ps(t.priority,function(){kv(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,ps(t.priority,function(){kv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ud(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=xm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);pl=l,a.target.dispatchEvent(l),pl=null}else return s=Jn(a),s!==null&&Vv(s),t.blockedOn=a,!1;s.shift()}return!0}function zv(t,s,a){ud(t)&&a.delete(s)}function e1(){Em=!1,mi!==null&&ud(mi)&&(mi=null),pi!==null&&ud(pi)&&(pi=null),gi!==null&&ud(gi)&&(gi=null),ec.forEach(zv),tc.forEach(zv)}function dd(t,s){t.blockedOn===s&&(t.blockedOn=null,Em||(Em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,e1)))}var hd=null;function Bv(t){hd!==t&&(hd=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hd===t&&(hd=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(bm(l||a)===null)continue;break}var m=Jn(a);m!==null&&(t.splice(s,3),s-=3,xf(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function No(t){function s(O){return dd(O,t)}mi!==null&&dd(mi,t),pi!==null&&dd(pi,t),gi!==null&&dd(gi,t),ec.forEach(s),tc.forEach(s);for(var a=0;a<yi.length;a++){var l=yi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<yi.length&&(a=yi[0],a.blockedOn===null);)Uv(a),a.blockedOn===null&&yi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],_=h[Yt]||null;if(typeof m=="function")_||Bv(a);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[Yt]||null)w=_.formAction;else if(bm(h)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Bv(a)}}}function qv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function wm(t){this._internalRoot=t}fd.prototype.render=wm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=Hn();Ov(a,l,t,s,null,null)},fd.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ov(t.current,2,null,t,null,null),Ku(),s[Ms]=null}};function fd(t){this._internalRoot=t}fd.prototype.unstable_scheduleHydration=function(t){if(t){var s=Kc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<yi.length&&s!==0&&s<yi[a].priority;a++);yi.splice(a,0,t),a===0&&Uv(t)}};var Hv=e.version;if(Hv!=="19.2.0")throw Error(i(527,Hv,"19.2.0"));le.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var t1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{_n=md.inject(t1),$=md}catch{}}return rc.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,l="",h=Xy,m=Wy,_=Jy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=jv(t,1,!1,null,null,a,l,null,h,m,_,qv),t[Ms]=s.current,rm(t),new wm(s)},rc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=Xy,_=Wy,w=Jy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=jv(t,1,!0,s,a??null,l,h,O,m,_,w,qv),s.context=Dv(null),a=s.current,l=Hn(),l=Zi(l),h=ni(l),h.callback=null,si(a,h,l),a=l,s.current.lanes=a,Os(s,a),Xs(s),t[Ms]=s.current,rm(t),new fd(s)},rc.version="19.2.0",rc}var Zv;function d1(){if(Zv)return Am.exports;Zv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Am.exports=u1(),Am.exports}var h1=d1();const f1=zx(h1);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e_="popstate";function m1(r={}){function e(o,c){let{pathname:d="/",search:p="",hash:g=""}=Oa(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Gm("",{pathname:d,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:vc(c))}function i(o,c){Kn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return g1(e,n,i,r)}function bt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Kn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p1(){return Math.random().toString(36).substring(2,10)}function t_(r,e){return{usr:r.state,key:r.key,idx:e}}function Gm(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Oa(e):e,state:n,key:e&&e.key||i||p1()}}function vc({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Oa(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function g1(r,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,p="POP",g=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function E(){p="POP";let P=b(),te=P==null?null:P-y;y=P,g&&g({action:p,location:B.location,delta:te})}function T(P,te){p="PUSH";let re=Gm(B.location,P,te);n&&n(re,P),y=b()+1;let Z=t_(re,y),fe=B.createHref(re);try{d.pushState(Z,"",fe)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(fe)}c&&g&&g({action:p,location:B.location,delta:1})}function k(P,te){p="REPLACE";let re=Gm(B.location,P,te);n&&n(re,P),y=b();let Z=t_(re,y),fe=B.createHref(re);d.replaceState(Z,"",fe),c&&g&&g({action:p,location:B.location,delta:0})}function z(P){return y1(P)}let B={get action(){return p},get location(){return r(o,d)},listen(P){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(e_,E),g=P,()=>{o.removeEventListener(e_,E),g=null}},createHref(P){return e(o,P)},createURL:z,encodeLocation(P){let te=z(P);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:T,replace:k,go(P){return d.go(P)}};return B}function y1(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),bt(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:vc(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Bx(r,e,n="/"){return v1(r,e,n,!1)}function v1(r,e,n,i){let o=typeof e=="string"?Oa(e):e,c=Or(o.pathname||"/",n);if(c==null)return null;let d=qx(r);_1(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=I1(c);p=C1(d[g],y,i)}return p}function qx(r,e=[],n=[],i="",o=!1){let c=(d,p,g=o,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;bt(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let E=Dr([i,b.relativePath]),T=n.concat(b);d.children&&d.children.length>0&&(bt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),qx(d.children,e,T,E,g)),!(d.path==null&&!d.index)&&e.push({path:E,score:A1(E,d.index),routesMeta:T})};return r.forEach((d,p)=>{var g;if(d.path===""||!((g=d.path)!=null&&g.includes("?")))c(d,p);else for(let y of Hx(d.path))c(d,p,!0,y)}),e}function Hx(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=Hx(i.join("/")),p=[];return p.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...d),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function _1(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:N1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var x1=/^:[\w-]+$/,b1=3,E1=2,w1=1,T1=10,S1=-2,n_=r=>r==="*";function A1(r,e){let n=r.split("/"),i=n.length;return n.some(n_)&&(i+=S1),e&&(i+=E1),n.filter(o=>!n_(o)).reduce((o,c)=>o+(x1.test(c)?b1:c===""?w1:T1),i)}function N1(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function C1(r,e,n=!1){let{routesMeta:i}=r,o={},c="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=c==="/"?e:e.slice(c.length)||"/",E=Ld({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),T=g.route;if(!E&&y&&n&&!i[i.length-1].route.index&&(E=Ld({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:Dr([c,E.pathname]),pathnameBase:V1(Dr([c,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(c=Dr([c,E.pathnameBase]))}return d}function Ld(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=R1(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:E},T)=>{if(b==="*"){let z=p[T]||"";d=c.slice(0,c.length-z.length).replace(/(.)\/+$/,"$1")}const k=p[T];return E&&!k?y[b]=void 0:y[b]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function R1(r,e=!1,n=!0){Kn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function I1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Or(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}var j1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D1=r=>j1.test(r);function O1(r,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof r=="string"?Oa(r):r,c;if(n)if(D1(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?c=s_(n.substring(1),"/"):c=s_(n,e)}else c=e;return{pathname:c,search:k1(i),hash:L1(o)}}function s_(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Im(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M1(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _p(r){let e=M1(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function xp(r,e,n,i=!1){let o;typeof r=="string"?o=Oa(r):(o={...r},bt(!o.pathname||!o.pathname.includes("?"),Im("?","pathname","search",o)),bt(!o.pathname||!o.pathname.includes("#"),Im("#","pathname","hash",o)),bt(!o.search||!o.search.includes("#"),Im("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=n;else{let E=e.length-1;if(!i&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}p=E>=0?e[E]:"/"}let g=O1(o,p),y=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var Dr=r=>r.join("/").replace(/\/\/+/g,"/"),V1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),k1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,L1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function P1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Fx=["POST","PUT","PATCH","DELETE"];new Set(Fx);var U1=["GET",...Fx];new Set(U1);var Ko=j.createContext(null);Ko.displayName="DataRouter";var ah=j.createContext(null);ah.displayName="DataRouterState";j.createContext(!1);var Gx=j.createContext({isTransitioning:!1});Gx.displayName="ViewTransition";var z1=j.createContext(new Map);z1.displayName="Fetchers";var B1=j.createContext(null);B1.displayName="Await";var Cs=j.createContext(null);Cs.displayName="Navigation";var Rc=j.createContext(null);Rc.displayName="Location";var Rs=j.createContext({outlet:null,matches:[],isDataRoute:!1});Rs.displayName="Route";var bp=j.createContext(null);bp.displayName="RouteError";function q1(r,{relative:e}={}){bt(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=j.useContext(Cs),{hash:o,pathname:c,search:d}=Ic(r,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:Dr([n,c])),i.createHref({pathname:p,search:d,hash:o})}function Yo(){return j.useContext(Rc)!=null}function Pr(){return bt(Yo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Rc).location}var Qx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kx(r){j.useContext(Cs).static||j.useLayoutEffect(r)}function Ui(){let{isDataRoute:r}=j.useContext(Rs);return r?tS():H1()}function H1(){bt(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(Ko),{basename:e,navigator:n}=j.useContext(Cs),{matches:i}=j.useContext(Rs),{pathname:o}=Pr(),c=JSON.stringify(_p(i)),d=j.useRef(!1);return Kx(()=>{d.current=!0}),j.useCallback((g,y={})=>{if(Kn(d.current,Qx),!d.current)return;if(typeof g=="number"){n.go(g);return}let b=xp(g,JSON.parse(c),o,y.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Dr([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,o,r])}j.createContext(null);function Yx(){let{matches:r}=j.useContext(Rs),e=r[r.length-1];return e?e.params:{}}function Ic(r,{relative:e}={}){let{matches:n}=j.useContext(Rs),{pathname:i}=Pr(),o=JSON.stringify(_p(n));return j.useMemo(()=>xp(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function F1(r,e){return $x(r,e)}function $x(r,e,n,i,o){var re;bt(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=j.useContext(Cs),{matches:d}=j.useContext(Rs),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",E=p&&p.route;{let Z=E&&E.path||"";Xx(y,!E||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let T=Pr(),k;if(e){let Z=typeof e=="string"?Oa(e):e;bt(b==="/"||((re=Z.pathname)==null?void 0:re.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),k=Z}else k=T;let z=k.pathname||"/",B=z;if(b!=="/"){let Z=b.replace(/^\//,"").split("/");B="/"+z.replace(/^\//,"").split("/").slice(Z.length).join("/")}let P=Bx(r,{pathname:B});Kn(E||P!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Kn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=$1(P&&P.map(Z=>Object.assign({},Z,{params:Object.assign({},g,Z.params),pathname:Dr([b,c.encodeLocation?c.encodeLocation(Z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?b:Dr([b,c.encodeLocation?c.encodeLocation(Z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathnameBase])})),d,n,i,o);return e&&te?j.createElement(Rc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},te):te}function G1(){let r=eS(),e=P1(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:c},"ErrorBoundary")," or"," ",j.createElement("code",{style:c},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:o},n):null,d)}var Q1=j.createElement(G1,null),K1=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?j.createElement(Rs.Provider,{value:this.props.routeContext},j.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Y1({routeContext:r,match:e,children:n}){let i=j.useContext(Ko);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Rs.Provider,{value:r},n)}function $1(r,e=[],n=null,i=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let c=r,d=n==null?void 0:n.errors;if(d!=null){let b=c.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);bt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<c.length;b++){let E=c[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=b),E.route.id){let{loaderData:T,errors:k}=n,z=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!k||k[E.route.id]===void 0);if(E.route.lazy||z){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&i?(b,E)=>{var T,k;i(b,{location:n.location,params:((k=(T=n.matches)==null?void 0:T[0])==null?void 0:k.params)??{},errorInfo:E})}:void 0;return c.reduceRight((b,E,T)=>{let k,z=!1,B=null,P=null;n&&(k=d&&E.route.id?d[E.route.id]:void 0,B=E.route.errorElement||Q1,p&&(g<0&&T===0?(Xx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,P=null):g===T&&(z=!0,P=E.route.hydrateFallbackElement||null)));let te=e.concat(c.slice(0,T+1)),re=()=>{let Z;return k?Z=B:z?Z=P:E.route.Component?Z=j.createElement(E.route.Component,null):E.route.element?Z=E.route.element:Z=b,j.createElement(Y1,{match:E,routeContext:{outlet:b,matches:te,isDataRoute:n!=null},children:Z})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?j.createElement(K1,{location:n.location,revalidation:n.revalidation,component:B,error:k,children:re(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:y}):re()},null)}function Ep(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X1(r){let e=j.useContext(Ko);return bt(e,Ep(r)),e}function W1(r){let e=j.useContext(ah);return bt(e,Ep(r)),e}function J1(r){let e=j.useContext(Rs);return bt(e,Ep(r)),e}function wp(r){let e=J1(r),n=e.matches[e.matches.length-1];return bt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function Z1(){return wp("useRouteId")}function eS(){var i;let r=j.useContext(bp),e=W1("useRouteError"),n=wp("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[n]}function tS(){let{router:r}=X1("useNavigate"),e=wp("useNavigate"),n=j.useRef(!1);return Kx(()=>{n.current=!0}),j.useCallback(async(o,c={})=>{Kn(n.current,Qx),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var r_={};function Xx(r,e,n){!e&&!r_[r]&&(r_[r]=!0,Kn(!1,n))}j.memo(nS);function nS({routes:r,future:e,state:n,unstable_onError:i}){return $x(r,void 0,n,i,e)}function Td({to:r,replace:e,state:n,relative:i}){bt(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(Cs);Kn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=j.useContext(Rs),{pathname:d}=Pr(),p=Ui(),g=xp(r,_p(c),d,i==="path"),y=JSON.stringify(g);return j.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function us(r){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sS({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){bt(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=Oa(n));let{pathname:g="/",search:y="",hash:b="",state:E=null,key:T="default"}=n,k=j.useMemo(()=>{let z=Or(g,d);return z==null?null:{location:{pathname:z,search:y,hash:b,state:E,key:T},navigationType:i}},[d,g,y,b,E,T,i]);return Kn(k!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:j.createElement(Cs.Provider,{value:p},j.createElement(Rc.Provider,{children:e,value:k}))}function rS({children:r,location:e}){return F1(Qm(r),e)}function Qm(r,e=[]){let n=[];return j.Children.forEach(r,(i,o)=>{if(!j.isValidElement(i))return;let c=[...e,o];if(i.type===j.Fragment){n.push.apply(n,Qm(i.props.children,c));return}bt(i.type===us,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Qm(i.props.children,c)),n.push(d)}),n}var Sd="get",Ad="application/x-www-form-urlencoded";function oh(r){return r!=null&&typeof r.tagName=="string"}function iS(r){return oh(r)&&r.tagName.toLowerCase()==="button"}function aS(r){return oh(r)&&r.tagName.toLowerCase()==="form"}function oS(r){return oh(r)&&r.tagName.toLowerCase()==="input"}function lS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function cS(r,e){return r.button===0&&(!e||e==="_self")&&!lS(r)}var pd=null;function uS(){if(pd===null)try{new FormData(document.createElement("form"),0),pd=!1}catch{pd=!0}return pd}var dS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jm(r){return r!=null&&!dS.has(r)?(Kn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ad}"`),null):r}function hS(r,e){let n,i,o,c,d;if(aS(r)){let p=r.getAttribute("action");i=p?Or(p,e):null,n=r.getAttribute("method")||Sd,o=jm(r.getAttribute("enctype"))||Ad,c=new FormData(r)}else if(iS(r)||oS(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||p.getAttribute("action");if(i=g?Or(g,e):null,n=r.getAttribute("formmethod")||p.getAttribute("method")||Sd,o=jm(r.getAttribute("formenctype"))||jm(p.getAttribute("enctype"))||Ad,c=new FormData(p,r),!uS()){let{name:y,type:b,value:E}=r;if(b==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,E)}}else{if(oh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sd,i=null,o=Ad,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function fS(r,e,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Or(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function mS(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function gS(r,e,n){let i=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await mS(c,n);return d.links?d.links():[]}return[]}));return xS(i.flat(1).filter(pS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function i_(r,e,n,i,o,c){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var b;return n[y].pathname!==g.pathname||((b=n[y].route.path)==null?void 0:b.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var E;let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function yS(r,e,{includeHydrateFallback:n}={}){return vS(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function vS(r){return[...new Set(r)]}function _S(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function xS(r,e){let n=new Set;return new Set(e),r.reduce((i,o)=>{let c=JSON.stringify(_S(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function Wx(){let r=j.useContext(Ko);return Tp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function bS(){let r=j.useContext(ah);return Tp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Sp=j.createContext(void 0);Sp.displayName="FrameworkContext";function Jx(){let r=j.useContext(Sp);return Tp(r,"You must render this element inside a <HydratedRouter> element"),r}function ES(r,e){let n=j.useContext(Sp),[i,o]=j.useState(!1),[c,d]=j.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:E}=e,T=j.useRef(null);j.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let B=te=>{te.forEach(re=>{d(re.isIntersecting)})},P=new IntersectionObserver(B,{threshold:.5});return T.current&&P.observe(T.current),()=>{P.disconnect()}}},[r]),j.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let k=()=>{o(!0)},z=()=>{o(!1),d(!1)};return n?r!=="intent"?[c,T,{}]:[c,T,{onFocus:ic(p,k),onBlur:ic(g,z),onMouseEnter:ic(y,k),onMouseLeave:ic(b,z),onTouchStart:ic(E,k)}]:[!1,T,{}]}function ic(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function wS({page:r,...e}){let{router:n}=Wx(),i=j.useMemo(()=>Bx(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?j.createElement(SS,{page:r,matches:i,...e}):null}function TS(r){let{manifest:e,routeModules:n}=Jx(),[i,o]=j.useState([]);return j.useEffect(()=>{let c=!1;return gS(r,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[r,e,n]),i}function SS({page:r,matches:e,...n}){let i=Pr(),{manifest:o,routeModules:c}=Jx(),{basename:d}=Wx(),{loaderData:p,matches:g}=bS(),y=j.useMemo(()=>i_(r,e,g,o,i,"data"),[r,e,g,o,i]),b=j.useMemo(()=>i_(r,e,g,o,i,"assets"),[r,e,g,o,i]),E=j.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let z=new Set,B=!1;if(e.forEach(te=>{var Z;let re=o.routes[te.route.id];!re||!re.hasLoader||(!y.some(fe=>fe.route.id===te.route.id)&&te.route.id in p&&((Z=c[te.route.id])!=null&&Z.shouldRevalidate)||re.hasClientLoader?B=!0:z.add(te.route.id))}),z.size===0)return[];let P=fS(r,d,"data");return B&&z.size>0&&P.searchParams.set("_routes",e.filter(te=>z.has(te.route.id)).map(te=>te.route.id).join(",")),[P.pathname+P.search]},[d,p,i,o,y,e,r,c]),T=j.useMemo(()=>yS(b,o),[b,o]),k=TS(b);return j.createElement(j.Fragment,null,E.map(z=>j.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),T.map(z=>j.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),k.map(({key:z,link:B})=>j.createElement("link",{key:z,nonce:n.nonce,...B})))}function AS(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Zx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zx&&(window.__reactRouterVersion="7.9.6")}catch{}function NS({basename:r,children:e,window:n}){let i=j.useRef();i.current==null&&(i.current=m1({window:n,v5Compat:!0}));let o=i.current,[c,d]=j.useState({action:o.action,location:o.location}),p=j.useCallback(g=>{j.startTransition(()=>d(g))},[d]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.createElement(sS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=j.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:p,target:g,to:y,preventScrollReset:b,viewTransition:E,...T},k){let{basename:z}=j.useContext(Cs),B=typeof y=="string"&&eb.test(y),P,te=!1;if(typeof y=="string"&&B&&(P=y,Zx))try{let I=new URL(window.location.href),V=y.startsWith("//")?new URL(I.protocol+y):new URL(y),M=Or(V.pathname,z);V.origin===I.origin&&M!=null?y=M+V.search+V.hash:te=!0}catch{Kn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=q1(y,{relative:o}),[Z,fe,ae]=ES(i,T),ue=jS(y,{replace:d,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:E});function R(I){e&&e(I),I.defaultPrevented||ue(I)}let C=j.createElement("a",{...T,...ae,href:P||re,onClick:te||c?e:R,ref:AS(k,fe),target:g,"data-discover":!B&&n==="render"?"true":void 0});return Z&&!B?j.createElement(j.Fragment,null,C,j.createElement(wS,{page:re})):C});pt.displayName="Link";var CS=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:p,children:g,...y},b){let E=Ic(d,{relative:y.relative}),T=Pr(),k=j.useContext(ah),{navigator:z,basename:B}=j.useContext(Cs),P=k!=null&&kS(E)&&p===!0,te=z.encodeLocation?z.encodeLocation(E).pathname:E.pathname,re=T.pathname,Z=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(re=re.toLowerCase(),Z=Z?Z.toLowerCase():null,te=te.toLowerCase()),Z&&B&&(Z=Or(Z,B)||Z);const fe=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let ae=re===te||!o&&re.startsWith(te)&&re.charAt(fe)==="/",ue=Z!=null&&(Z===te||!o&&Z.startsWith(te)&&Z.charAt(te.length)==="/"),R={isActive:ae,isPending:ue,isTransitioning:P},C=ae?e:void 0,I;typeof i=="function"?I=i(R):I=[i,ae?"active":null,ue?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let V=typeof c=="function"?c(R):c;return j.createElement(pt,{...y,"aria-current":C,className:I,ref:b,style:V,to:d,viewTransition:p},typeof g=="function"?g(R):g)});CS.displayName="NavLink";var RS=j.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:d=Sd,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:E,...T},k)=>{let z=MS(),B=VS(p,{relative:y}),P=d.toLowerCase()==="get"?"get":"post",te=typeof p=="string"&&eb.test(p),re=Z=>{if(g&&g(Z),Z.defaultPrevented)return;Z.preventDefault();let fe=Z.nativeEvent.submitter,ae=(fe==null?void 0:fe.getAttribute("formmethod"))||d;z(fe||Z.currentTarget,{fetcherKey:e,method:ae,navigate:n,replace:o,state:c,relative:y,preventScrollReset:b,viewTransition:E})};return j.createElement("form",{ref:k,method:P,action:B,onSubmit:i?g:re,...T,"data-discover":!te&&r==="render"?"true":void 0})});RS.displayName="Form";function IS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tb(r){let e=j.useContext(Ko);return bt(e,IS(r)),e}function jS(r,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=Ui(),g=Pr(),y=Ic(r,{relative:c});return j.useCallback(b=>{if(cS(b,e)){b.preventDefault();let E=n!==void 0?n:vc(g)===vc(y);p(r,{replace:E,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[g,p,y,n,i,e,r,o,c,d])}var DS=0,OS=()=>`__${String(++DS)}__`;function MS(){let{router:r}=tb("useSubmit"),{basename:e}=j.useContext(Cs),n=Z1();return j.useCallback(async(i,o={})=>{let{action:c,method:d,encType:p,formData:g,body:y}=hS(i,e);if(o.navigate===!1){let b=o.fetcherKey||OS();await r.fetch(b,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function VS(r,{relative:e}={}){let{basename:n}=j.useContext(Cs),i=j.useContext(Rs);bt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...Ic(r||".",{relative:e})},d=Pr();if(r==null){c.search=d.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let b=p.toString();c.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Dr([n,c.pathname])),vc(c)}function kS(r,{relative:e}={}){let n=j.useContext(Gx);bt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=tb("useViewTransitionState"),o=Ic(r,{relative:e});if(!n.isTransitioning)return!1;let c=Or(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=Or(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ld(o.pathname,d)!=null||Ld(o.pathname,c)!=null}var xt=(r=>(r.ADMIN="admin",r.USER="user",r))(xt||{}),Co=(r=>(r.CONFIRMED="confirmed",r.CANCELED="canceled",r.WAITLIST="waitlist",r))(Co||{});const ln=r=>{if(!r)return"";if(r.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,n,i]=r.split("-");return`${i}/${n}/${e}`}try{const e=new Date(r);return isNaN(e.getTime())?r:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return r}},Ap={useFirebase:!0,firebase:{apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.firebasestorage.app",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML"}},LS=()=>{};var a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},PS=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],p=r[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,b=c>>2,E=(c&3)<<4|p>>4;let T=(p&15)<<2|y>>6,k=y&63;g||(k=64,d||(T=64)),i.push(n[b],n[E],n[T],n[k])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):PS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const E=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||p==null||y==null||E==null)throw new US;const T=c<<2|p>>4;if(i.push(T),y!==64){const k=p<<4&240|y>>2;if(i.push(k),E!==64){const z=y<<6&192|E;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class US extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(r){const e=nb(r);return sb.encodeByteArray(e,!0)},Pd=function(r){return zS(r).replace(/\./g,"")},rb=function(r){try{return sb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=()=>BS().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof a_>"u")return;const r=a_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},FS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rb(r[1]);return e&&JSON.parse(e)},lh=()=>{try{return LS()||qS()||HS()||FS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ib=r=>{var e,n;return(n=(e=lh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},GS=r=>{const e=ib(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ab=()=>{var r;return(r=lh())==null?void 0:r.config},ob=r=>{var e;return(e=lh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lb(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Pd(JSON.stringify(n)),Pd(JSON.stringify(d)),""].join(".")}const dc={};function YS(){const r={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?r.emulator.push(e):r.prod.push(e);return r}function $S(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let o_=!1;function cb(r,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||dc[r]===e||dc[r]||o_)return;dc[r]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",c=YS().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{o_=!0,d()},T}function b(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=$S(i),k=n("text"),z=document.getElementById(k)||document.createElement("span"),B=n("learnmore"),P=document.getElementById(B)||document.createElement("a"),te=n("preprendIcon"),re=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Z=T.element;p(Z),b(P,B);const fe=y();g(re,te),Z.append(re,z,P,fe),document.body.appendChild(Z)}c?(z.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function WS(){var e;const r=(e=lh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function eA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tA(){const r=pn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function nA(){return!WS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){try{return typeof indexedDB=="object"}catch{return!1}}function rA(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="FirebaseError";class Ur extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=iA,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jc.prototype.create)}}class jc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?aA(c,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Ur(o,p,i)}}function aA(r,e){return r.replace(oA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const oA=/\{\$([^}]+)}/g;function lA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ca(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=r[o],d=e[o];if(l_(c)&&l_(d)){if(!Ca(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function l_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ac(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function oc(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function cA(r,e){const n=new uA(r,e);return n.subscribe.bind(n)}class uA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Dm),o.error===void 0&&(o.error=Dm),o.complete===void 0&&(o.complete=Dm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(r){return r&&r._delegate?r._delegate:r}class Ra{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new QS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mA(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fA(r){return r===Sa?void 0:r}function mA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(He||(He={}));const gA={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},yA=He.INFO,vA={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},_A=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=vA[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=yA,this._logHandler=_A,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const xA=(r,e)=>e.some(n=>r instanceof n);let c_,u_;function bA(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EA(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,Km=new WeakMap,db=new WeakMap,Om=new WeakMap,Cp=new WeakMap;function wA(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Ai(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&ub.set(n,r)}).catch(()=>{}),Cp.set(e,r),e}function TA(r){if(Km.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Km.set(r,e)}let Ym={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Km.get(r);if(e==="objectStoreNames")return r.objectStoreNames||db.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function SA(r){Ym=r(Ym)}function AA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(Mm(this),e,...n);return db.set(i,e.sort?e.sort():[e]),Ai(i)}:EA().includes(r)?function(...e){return r.apply(Mm(this),e),Ai(ub.get(this))}:function(...e){return Ai(r.apply(Mm(this),e))}}function NA(r){return typeof r=="function"?AA(r):(r instanceof IDBTransaction&&TA(r),xA(r,bA())?new Proxy(r,Ym):r)}function Ai(r){if(r instanceof IDBRequest)return wA(r);if(Om.has(r))return Om.get(r);const e=NA(r);return e!==r&&(Om.set(r,e),Cp.set(e,r)),e}const Mm=r=>Cp.get(r);function CA(r,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),p=Ai(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Ai(d.result),g.oldVersion,g.newVersion,Ai(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const RA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],Vm=new Map;function d_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=IA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RA.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Vm.set(e,c),c}SA(r=>({...r,get:(e,n,i)=>d_(e,n)||r.get(e,n,i),has:(e,n)=>!!d_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",h_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Np("@firebase/app"),OA="@firebase/app-compat",MA="@firebase/analytics-compat",VA="@firebase/analytics",kA="@firebase/app-check-compat",LA="@firebase/app-check",PA="@firebase/auth",UA="@firebase/auth-compat",zA="@firebase/database",BA="@firebase/data-connect",qA="@firebase/database-compat",HA="@firebase/functions",FA="@firebase/functions-compat",GA="@firebase/installations",QA="@firebase/installations-compat",KA="@firebase/messaging",YA="@firebase/messaging-compat",$A="@firebase/performance",XA="@firebase/performance-compat",WA="@firebase/remote-config",JA="@firebase/remote-config-compat",ZA="@firebase/storage",e2="@firebase/storage-compat",t2="@firebase/firestore",n2="@firebase/ai",s2="@firebase/firestore-compat",r2="firebase",i2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="[DEFAULT]",a2={[$m]:"fire-core",[OA]:"fire-core-compat",[VA]:"fire-analytics",[MA]:"fire-analytics-compat",[LA]:"fire-app-check",[kA]:"fire-app-check-compat",[PA]:"fire-auth",[UA]:"fire-auth-compat",[zA]:"fire-rtdb",[BA]:"fire-data-connect",[qA]:"fire-rtdb-compat",[HA]:"fire-fn",[FA]:"fire-fn-compat",[GA]:"fire-iid",[QA]:"fire-iid-compat",[KA]:"fire-fcm",[YA]:"fire-fcm-compat",[$A]:"fire-perf",[XA]:"fire-perf-compat",[WA]:"fire-rc",[JA]:"fire-rc-compat",[ZA]:"fire-gcs",[e2]:"fire-gcs-compat",[t2]:"fire-fst",[s2]:"fire-fst-compat",[n2]:"fire-vertex","fire-js":"fire-js",[r2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Map,o2=new Map,Wm=new Map;function f_(r,e){try{r.container.addComponent(e)}catch(n){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Uo(r){const e=r.name;if(Wm.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,r);for(const n of Ud.values())f_(n,r);for(const n of o2.values())f_(n,r);return!0}function Rp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ds(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new jc("app","Firebase",l2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=i2;function hb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:Xm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ni.create("bad-app-name",{appName:String(o)});if(n||(n=ab()),!n)throw Ni.create("no-options");const c=Ud.get(o);if(c){if(Ca(n,c.options)&&Ca(i,c.config))return c;throw Ni.create("duplicate-app",{appName:o})}const d=new pA(o);for(const g of Wm.values())d.addComponent(g);const p=new c2(n,i,d);return Ud.set(o,p),p}function fb(r=Xm){const e=Ud.get(r);if(!e&&r===Xm&&ab())return hb();if(!e)throw Ni.create("no-app",{appName:r});return e}function Ci(r,e,n){let i=a2[r]??r;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(d.join(" "));return}Uo(new Ra(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="firebase-heartbeat-database",d2=1,_c="firebase-heartbeat-store";let km=null;function mb(){return km||(km=CA(u2,d2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_c)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ni.create("idb-open",{originalErrorMessage:r.message})})),km}async function h2(r){try{const n=(await mb()).transaction(_c),i=await n.objectStore(_c).get(pb(r));return await n.done,i}catch(e){if(e instanceof Ur)Mr.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mr.warn(n.message)}}}async function m_(r,e){try{const i=(await mb()).transaction(_c,"readwrite");await i.objectStore(_c).put(e,pb(r)),await i.done}catch(n){if(n instanceof Ur)Mr.warn(n.message);else{const i=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mr.warn(i.message)}}}function pb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1024,m2=30;class p2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=p_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>m2){const d=v2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Mr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p_(),{heartbeatsToSend:i,unsentEntries:o}=g2(this._heartbeatsCache.heartbeats),c=Pd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Mr.warn(n),""}}}function p_(){return new Date().toISOString().substring(0,10)}function g2(r,e=f2){const n=[];let i=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),g_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),g_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sA()?rA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function g_(r){return Pd(JSON.stringify({version:2,heartbeats:r})).length}function v2(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(r){Uo(new Ra("platform-logger",e=>new jA(e),"PRIVATE")),Uo(new Ra("heartbeat",e=>new p2(e),"PRIVATE")),Ci($m,h_,r),Ci($m,h_,"esm2020"),Ci("fire-js","")}_2("");var x2="firebase",b2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(x2,b2,"app");function gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E2=gb,yb=new jc("auth","Firebase",gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Np("@firebase/auth");function w2(r,...e){zd.logLevel<=He.WARN&&zd.warn(`Auth (${Xo}): ${r}`,...e)}function Nd(r,...e){zd.logLevel<=He.ERROR&&zd.error(`Auth (${Xo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(r,...e){throw jp(r,...e)}function As(r,...e){return jp(r,...e)}function Ip(r,e,n){const i={...E2(),[e]:n};return new jc("auth","Firebase",i).create(e,{appName:r.name})}function Ri(r){return Ip(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function T2(r,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&fs(r,"argument-error"),Ip(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jp(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return yb.create(r,...e)}function je(r,e,...n){if(!r)throw jp(e,...n)}function Ir(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Nd(e),new Error(e)}function Vr(r,e){r||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function S2(){return y_()==="http:"||y_()==="https:"}function y_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S2()||ZS()||"connection"in navigator)?navigator.onLine:!0}function N2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=XS()||eA()}get(){return A2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r,e){Vr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I2=new Oc(3e4,6e4);function Ma(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function zi(r,e,n,i,o={}){return _b(r,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const p=Dc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return JS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&$o(r.emulatorConfig.host)&&(y.credentials="include"),vb.fetch()(await xb(r,r.config.apiHost,n,p),y)})}async function _b(r,e,n){r._canInitEmulator=!1;const i={...C2,...e};try{const o=new D2(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw gd(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw gd(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw gd(r,"user-disabled",d);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Ip(r,b,y);fs(r,b)}}catch(o){if(o instanceof Ur)throw o;fs(r,"network-request-failed",{message:String(o)})}}async function ch(r,e,n,i,o={}){const c=await zi(r,e,n,i,o);return"mfaPendingCredential"in c&&fs(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function xb(r,e,n,i){const o=`${e}${n}?${i}`,c=r,d=c.config.emulator?Dp(r.config,o):`${r.config.apiScheme}://${o}`;return R2.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function j2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(As(this.auth,"network-request-failed")),I2.get())})}}function gd(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=As(r,e,i);return o.customData._tokenResponse=n,o}function v_(r){return r!==void 0&&r.enterprise!==void 0}class O2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function M2(r,e){return zi(r,"GET","/v2/recaptchaConfig",Ma(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(r,e){return zi(r,"POST","/v1/accounts:delete",e)}async function Bd(r,e){return zi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k2(r,e=!1){const n=Ot(r),i=await n.getIdToken(e),o=Op(i);je(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:hc(Lm(o.auth_time)),issuedAtTime:hc(Lm(o.iat)),expirationTime:hc(Lm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Lm(r){return Number(r)*1e3}function Op(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const o=rb(n);return o?JSON.parse(o):(Nd("Failed to decode base64 JWT payload"),null)}catch(o){return Nd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function __(r){const e=Op(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ur&&L2(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function L2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(r){var E;const e=r.auth,n=await r.getIdToken(),i=await xc(r,Bd(e,{idToken:n}));je(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=(E=o.providerUserInfo)!=null&&E.length?bb(o.providerUserInfo):[],d=z2(r.providerData,c),p=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(d!=null&&d.length),y=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Zm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function U2(r){const e=Ot(r);await qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z2(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function bb(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(r,e){const n=await _b(r,{},async()=>{const i=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await xb(r,o,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return r.emulatorConfig&&$o(r.emulatorConfig.host)&&(g.credentials="include"),vb.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q2(r,e){return zi(r,"POST","/v2/accounts:revokeToken",Ma(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):__(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=__(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await B2(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,d=new Mo;return i&&(je(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(je(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(je(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ss{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new P2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await xc(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k2(this,e)}reload(){return U2(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await qd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await xc(this,V2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:k,providerData:z,stsTokenManager:B}=n;je(E&&B,e,"internal-error");const P=Mo.fromJSON(this.name,B);je(typeof E=="string",e,"internal-error"),_i(i,e.name),_i(o,e.name),je(typeof T=="boolean",e,"internal-error"),je(typeof k=="boolean",e,"internal-error"),_i(c,e.name),_i(d,e.name),_i(p,e.name),_i(g,e.name),_i(y,e.name),_i(b,e.name);const te=new Ss({uid:E,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:k,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:P,createdAt:y,lastLoginAt:b});return z&&Array.isArray(z)&&(te.providerData=z.map(re=>({...re}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,n,i=!1){const o=new Mo;o.updateFromServerResponse(n);const c=new Ss({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await qd(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];je(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?bb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new Mo;p.updateFromIdToken(i);const g=new Ss({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function jr(r){Vr(r instanceof Function,"Expected a class definition");let e=x_.get(r);return e?(Vr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,x_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Eb.type="NONE";const b_=Eb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(r,e,n){return`firebase:${r}:${e}:${n}`}class Vo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Cd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Cd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bd(this.auth,{idToken:e}).catch(()=>{});return n?Ss._fromGetAccountInfoResponse(this.auth,n,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vo(jr(b_),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||jr(b_);const d=Cd(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(d);if(b){let E;if(typeof b=="string"){const T=await Bd(e,{idToken:b}).catch(()=>{});if(!T)break;E=await Ss._fromGetAccountInfoResponse(e,T,b)}else E=Ss._fromJSON(e,b);y!==c&&(p=E),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Vo(c,e,i):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Vo(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ab(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cb(e))return"Blackberry";if(Rb(e))return"Webos";if(Tb(e))return"Safari";if((e.includes("chrome/")||Sb(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function wb(r=pn()){return/firefox\//i.test(r)}function Tb(r=pn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sb(r=pn()){return/crios\//i.test(r)}function Ab(r=pn()){return/iemobile/i.test(r)}function Nb(r=pn()){return/android/i.test(r)}function Cb(r=pn()){return/blackberry/i.test(r)}function Rb(r=pn()){return/webos/i.test(r)}function Mp(r=pn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function H2(r=pn()){var e;return Mp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function F2(){return tA()&&document.documentMode===10}function Ib(r=pn()){return Mp(r)||Nb(r)||Rb(r)||Cb(r)||/windows phone/i.test(r)||Ab(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(r,e=[]){let n;switch(r){case"Browser":n=E_(pn());break;case"Worker":n=`${E_(pn())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(r,e={}){return zi(r,"GET","/v2/passwordPolicy",Ma(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=6;class Y2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??K2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w_(this),this.idTokenSubscription=new w_(this),this.beforeStateQueue=new G2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bd(this,{idToken:e}),i=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(ds(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,p=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(Ri(this));const n=e?Ot(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Q2(this),n=new Y2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await q2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&w2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Va(r){return Ot(r)}class w_{constructor(e){this.auth=e,this.observer=null,this.addObserver=cA(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X2(r){uh=r}function Db(r){return uh.loadJS(r)}function W2(){return uh.recaptchaEnterpriseScript}function J2(){return uh.gapiScript}function Z2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class eN{constructor(){this.enterprise=new tN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nN="recaptcha-enterprise",Ob="NO_RECAPTCHA";class sN{constructor(e){this.type=nN,this.auth=Va(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{M2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new O2(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,d,p){const g=window.grecaptcha;v_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Ob)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(p=>{if(!n&&v_(window.grecaptcha))o(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=W2();g.length!==0&&(g+=p),Db(g).then(()=>{o(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function T_(r,e,n,i=!1,o=!1){const c=new sN(r);let d;if(o)d=Ob;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function S_(r,e,n,i,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await T_(r,e,n,n==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await T_(r,e,n,n==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(r,e){const n=Rp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Ca(c,e??{}))return o;fs(o,"already-initialized")}return n.initialize({options:e})}function iN(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function aN(r,e,n){const i=Va(r);je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Mb(e),{host:d,port:p}=oN(e),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),je(Ca(y,i.config.emulator)&&Ca(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,$o(d)?(lb(`${c}//${d}${g}`),cb("Auth",!0)):lN()}function Mb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function oN(r){const e=Mb(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:A_(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:A_(d)}}}function A_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function lN(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function cN(r,e){return zi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(r,e){return ch(r,"POST","/v1/accounts:signInWithPassword",Ma(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(r,e){return ch(r,"POST","/v1/accounts:signInWithEmailLink",Ma(r,e))}async function hN(r,e){return ch(r,"POST","/v1/accounts:signInWithEmailLink",Ma(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Vp{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new bc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new bc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,n,"signInWithPassword",uN);case"emailLink":return dN(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,i,"signUpPassword",cN);case"emailLink":return hN(e,{idToken:n,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r,e){return ch(r,"POST","/v1/accounts:signInWithIdp",Ma(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="http://localhost";class Ia extends Vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const d=new Ia(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ko(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:fN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pN(r){const e=ac(oc(r)).link,n=e?ac(oc(e)).deep_link_id:null,i=ac(oc(r)).deep_link_id;return(i?ac(oc(i)).link:null)||i||n||e||r}class kp{constructor(e){const n=ac(oc(e)),i=n.apiKey??null,o=n.oobCode??null,c=mN(n.mode??null);je(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pN(e);try{return new kp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return bc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=kp.parseLink(n);return je(i,"argument-error"),bc._fromEmailAndCode(e,i.code,i.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Mc{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ia._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Rr.credential(n,i)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Mc{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Mc{constructor(){super("twitter.com")}static credential(e,n){return Ia._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await Ss._fromIdTokenResponse(e,i,o),d=N_(i);return new zo({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=N_(i);return new zo({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function N_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Ur{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Hd(e,n,i,o)}}function Vb(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(r,c,e,i):c})}async function gN(r,e,n=!1){const i=await xc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return zo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(r,e,n=!1){const{auth:i}=r;if(ds(i.app))return Promise.reject(Ri(i));const o="reauthenticate";try{const c=await xc(r,Vb(i,o,e,r),n);je(c.idToken,i,"internal-error");const d=Op(c.idToken);je(d,i,"internal-error");const{sub:p}=d;return je(r.uid===p,i,"user-mismatch"),zo._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&fs(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(r,e,n=!1){if(ds(r.app))return Promise.reject(Ri(r));const i="signIn",o=await Vb(r,i,e),c=await zo._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(c.user),c}async function vN(r,e){return kb(Va(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(r){const e=Va(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function xN(r,e,n){return ds(r.app)?Promise.reject(Ri(r)):vN(Ot(r),Wo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_N(r),i})}function bN(r,e,n,i){return Ot(r).onIdTokenChanged(e,n,i)}function EN(r,e,n){return Ot(r).beforeAuthStateChanged(e,n)}function wN(r,e,n,i){return Ot(r).onAuthStateChanged(e,n,i)}function TN(r){return Ot(r).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,AN=10;class Pb extends Lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ib(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);F2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,AN):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pb.type="LOCAL";const NN=Pb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends Lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ub.type="SESSION";const zb=Ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new dh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await CN(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Pp("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return window}function IN(r){Zs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(){return typeof Zs().WorkerGlobalScope<"u"&&typeof Zs().importScripts=="function"}async function jN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function ON(){return Bb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebaseLocalStorageDb",MN=1,Gd="firebaseLocalStorage",Hb="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(r,e){return r.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function VN(){const r=indexedDB.deleteDatabase(qb);return new Vc(r).toPromise()}function ep(){const r=indexedDB.open(qb,MN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Gd,{keyPath:Hb})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Gd)?e(i):(i.close(),await VN(),e(await ep()))})})}async function C_(r,e,n){const i=hh(r,!0).put({[Hb]:e,value:n});return new Vc(i).toPromise()}async function kN(r,e){const n=hh(r,!1).get(e),i=await new Vc(n).toPromise();return i===void 0?null:i.value}function R_(r,e){const n=hh(r,!0).delete(e);return new Vc(n).toPromise()}const LN=800,PN=3;class Fb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>PN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dh._getInstance(ON()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await jN(),!this.activeServiceWorker)return;this.sender=new RN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ep();return await C_(e,Fd,"1"),await R_(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>C_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>kN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=hh(o,!1).getAll();return new Vc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fb.type="LOCAL";const UN=Fb;new Oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(r,e){return e?jr(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends Vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zN(r){return kb(r.auth,new Up(r),r.bypassAuthState)}function BN(r){const{auth:e,user:n}=r;return je(n,e,"internal-error"),yN(n,new Up(r),r.bypassAuthState)}async function qN(r){const{auth:e,user:n}=r;return je(n,e,"internal-error"),gN(n,new Up(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zN;case"linkViaPopup":case"linkViaRedirect":return qN;case"reauthViaPopup":case"reauthViaRedirect":return BN;default:fs(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Oc(2e3,1e4);async function FN(r,e,n){if(ds(r.app))return Promise.reject(As(r,"operation-not-supported-in-this-environment"));const i=Va(r);T2(r,e,Lp);const o=Gb(i,n);return new Aa(i,"signInViaPopup",e,o).executeNotNull()}class Aa extends Qb{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HN.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="pendingRedirect",Rd=new Map;class QN extends Qb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Rd.get(this.auth._key());if(!e){try{const i=await KN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Rd.set(this.auth._key(),e)}return this.bypassAuthState||Rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KN(r,e){const n=XN(e),i=$N(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function YN(r,e){Rd.set(r._key(),e)}function $N(r){return jr(r._redirectPersistence)}function XN(r){return Cd(GN,r.config.apiKey,r.name)}async function WN(r,e,n=!1){if(ds(r.app))return Promise.reject(Ri(r));const i=Va(r),o=Gb(i,e),d=await new QN(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=600*1e3;class ZN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Kb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(As(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JN&&this.cachedEventUids.clear(),this.cachedEventUids.has(I_(e))}saveEventToCache(e){this.cachedEventUids.add(I_(e)),this.lastProcessedEventTime=Date.now()}}function I_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Kb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(r,e={}){return zi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sC=/^https?/;async function rC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await tC(r);for(const n of e)try{if(iC(n))return}catch{}fs(r,"unauthorized-domain")}function iC(r){const e=Jm(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!sC.test(n))return!1;if(nC.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Oc(3e4,6e4);function j_(){const r=Zs().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function oC(r){return new Promise((e,n)=>{var o,c,d;function i(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),n(As(r,"network-request-failed"))},timeout:aC.get()})}if((c=(o=Zs().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Zs().gapi)!=null&&d.load)i();else{const p=Z2("iframefcb");return Zs()[p]=()=>{gapi.load?i():n(As(r,"network-request-failed"))},Db(`${J2()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Id=null,e})}let Id=null;function lC(r){return Id=Id||oC(r),Id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Oc(5e3,15e3),uC="__/auth/iframe",dC="emulator/auth/iframe",hC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mC(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Dp(e,dC):`https://${r.config.authDomain}/${uC}`,i={apiKey:e.apiKey,appName:r.name,v:Xo},o=fC.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Dc(i).slice(1)}`}async function pC(r){const e=await lC(r),n=Zs().gapi;return je(n,r,"internal-error"),e.open({where:document.body,url:mC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hC,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=As(r,"network-request-failed"),p=Zs().setTimeout(()=>{c(d)},cC.get());function g(){Zs().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yC=500,vC=600,_C="_blank",xC="http://localhost";class D_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bC(r,e,n,i=yC,o=vC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...gC,width:i.toString(),height:o.toString(),top:c,left:d},y=pn().toLowerCase();n&&(p=Sb(y)?_C:n),wb(y)&&(e=e||xC,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[k,z])=>`${T}${k}=${z},`,"");if(H2(y)&&p!=="_self")return EC(e||"",p),new D_(null);const E=window.open(e||"",p,b);je(E,r,"popup-blocked");try{E.focus()}catch{}return new D_(E)}function EC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="__/auth/handler",TC="emulator/auth/handler",SC=encodeURIComponent("fac");async function O_(r,e,n,i,o,c){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Xo,eventId:o};if(e instanceof Lp){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",lA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))d[b]=E}if(e instanceof Mc){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(d.scopes=b.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await r._getAppCheckToken(),y=g?`#${SC}=${encodeURIComponent(g)}`:"";return`${AC(r)}?${Dc(p).slice(1)}${y}`}function AC({config:r}){return r.emulator?Dp(r,TC):`https://${r.authDomain}/${wC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class NC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zb,this._completeRedirectFn=WN,this._overrideRedirectResult=YN}async _openPopup(e,n,i,o){var d;Vr((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await O_(e,n,i,Jm(),o);return bC(e,c,Pp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await O_(e,n,i,Jm(),o);return IN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Vr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await pC(e),i=new ZN(e);return n.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pm,{type:Pm},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[Pm];c!==void 0&&n(!!c),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ib()||Tb()||Mp()}}const CC=NC;var M_="@firebase/auth",V_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jC(r){Uo(new Ra("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;je(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jb(r)},y=new $2(i,o,c,g);return iN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Ra("auth-internal",e=>{const n=Va(e.getProvider("auth").getImmediate());return(i=>new RC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(M_,V_,IC(r)),Ci(M_,V_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=300,OC=ob("authIdTokenMaxAge")||DC;let k_=null;const MC=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>OC)return;const o=n==null?void 0:n.token;k_!==o&&(k_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function VC(r=fb()){const e=Rp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=rN(r,{popupRedirectResolver:CC,persistence:[UN,NN,zb]}),i=ob("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=MC(c.toString());EN(n,d,()=>d(n.currentUser)),bN(n,p=>d(p))}}const o=ib("auth");return o&&aN(n,`http://${o}`),n}function kC(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}X2({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=As("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",kC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jC("Browser");var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ii,Yb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function I(){}I.prototype=C.prototype,R.F=C.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(V,M,N){for(var A=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)A[xe-2]=arguments[xe];return C.prototype[M].apply(V,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,C,I){I||(I=0);const V=Array(16);if(typeof C=="string")for(var M=0;M<16;++M)V[M]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(M=0;M<16;++M)V[M]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=R.g[0],I=R.g[1],M=R.g[2];let N=R.g[3],A;A=C+(N^I&(M^N))+V[0]+3614090360&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(M^C&(I^M))+V[1]+3905402710&4294967295,N=C+(A<<12&4294967295|A>>>20),A=M+(I^N&(C^I))+V[2]+606105819&4294967295,M=N+(A<<17&4294967295|A>>>15),A=I+(C^M&(N^C))+V[3]+3250441966&4294967295,I=M+(A<<22&4294967295|A>>>10),A=C+(N^I&(M^N))+V[4]+4118548399&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(M^C&(I^M))+V[5]+1200080426&4294967295,N=C+(A<<12&4294967295|A>>>20),A=M+(I^N&(C^I))+V[6]+2821735955&4294967295,M=N+(A<<17&4294967295|A>>>15),A=I+(C^M&(N^C))+V[7]+4249261313&4294967295,I=M+(A<<22&4294967295|A>>>10),A=C+(N^I&(M^N))+V[8]+1770035416&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(M^C&(I^M))+V[9]+2336552879&4294967295,N=C+(A<<12&4294967295|A>>>20),A=M+(I^N&(C^I))+V[10]+4294925233&4294967295,M=N+(A<<17&4294967295|A>>>15),A=I+(C^M&(N^C))+V[11]+2304563134&4294967295,I=M+(A<<22&4294967295|A>>>10),A=C+(N^I&(M^N))+V[12]+1804603682&4294967295,C=I+(A<<7&4294967295|A>>>25),A=N+(M^C&(I^M))+V[13]+4254626195&4294967295,N=C+(A<<12&4294967295|A>>>20),A=M+(I^N&(C^I))+V[14]+2792965006&4294967295,M=N+(A<<17&4294967295|A>>>15),A=I+(C^M&(N^C))+V[15]+1236535329&4294967295,I=M+(A<<22&4294967295|A>>>10),A=C+(M^N&(I^M))+V[1]+4129170786&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^M&(C^I))+V[6]+3225465664&4294967295,N=C+(A<<9&4294967295|A>>>23),A=M+(C^I&(N^C))+V[11]+643717713&4294967295,M=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(M^N))+V[0]+3921069994&4294967295,I=M+(A<<20&4294967295|A>>>12),A=C+(M^N&(I^M))+V[5]+3593408605&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^M&(C^I))+V[10]+38016083&4294967295,N=C+(A<<9&4294967295|A>>>23),A=M+(C^I&(N^C))+V[15]+3634488961&4294967295,M=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(M^N))+V[4]+3889429448&4294967295,I=M+(A<<20&4294967295|A>>>12),A=C+(M^N&(I^M))+V[9]+568446438&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^M&(C^I))+V[14]+3275163606&4294967295,N=C+(A<<9&4294967295|A>>>23),A=M+(C^I&(N^C))+V[3]+4107603335&4294967295,M=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(M^N))+V[8]+1163531501&4294967295,I=M+(A<<20&4294967295|A>>>12),A=C+(M^N&(I^M))+V[13]+2850285829&4294967295,C=I+(A<<5&4294967295|A>>>27),A=N+(I^M&(C^I))+V[2]+4243563512&4294967295,N=C+(A<<9&4294967295|A>>>23),A=M+(C^I&(N^C))+V[7]+1735328473&4294967295,M=N+(A<<14&4294967295|A>>>18),A=I+(N^C&(M^N))+V[12]+2368359562&4294967295,I=M+(A<<20&4294967295|A>>>12),A=C+(I^M^N)+V[5]+4294588738&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^M)+V[8]+2272392833&4294967295,N=C+(A<<11&4294967295|A>>>21),A=M+(N^C^I)+V[11]+1839030562&4294967295,M=N+(A<<16&4294967295|A>>>16),A=I+(M^N^C)+V[14]+4259657740&4294967295,I=M+(A<<23&4294967295|A>>>9),A=C+(I^M^N)+V[1]+2763975236&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^M)+V[4]+1272893353&4294967295,N=C+(A<<11&4294967295|A>>>21),A=M+(N^C^I)+V[7]+4139469664&4294967295,M=N+(A<<16&4294967295|A>>>16),A=I+(M^N^C)+V[10]+3200236656&4294967295,I=M+(A<<23&4294967295|A>>>9),A=C+(I^M^N)+V[13]+681279174&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^M)+V[0]+3936430074&4294967295,N=C+(A<<11&4294967295|A>>>21),A=M+(N^C^I)+V[3]+3572445317&4294967295,M=N+(A<<16&4294967295|A>>>16),A=I+(M^N^C)+V[6]+76029189&4294967295,I=M+(A<<23&4294967295|A>>>9),A=C+(I^M^N)+V[9]+3654602809&4294967295,C=I+(A<<4&4294967295|A>>>28),A=N+(C^I^M)+V[12]+3873151461&4294967295,N=C+(A<<11&4294967295|A>>>21),A=M+(N^C^I)+V[15]+530742520&4294967295,M=N+(A<<16&4294967295|A>>>16),A=I+(M^N^C)+V[2]+3299628645&4294967295,I=M+(A<<23&4294967295|A>>>9),A=C+(M^(I|~N))+V[0]+4096336452&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~M))+V[7]+1126891415&4294967295,N=C+(A<<10&4294967295|A>>>22),A=M+(C^(N|~I))+V[14]+2878612391&4294967295,M=N+(A<<15&4294967295|A>>>17),A=I+(N^(M|~C))+V[5]+4237533241&4294967295,I=M+(A<<21&4294967295|A>>>11),A=C+(M^(I|~N))+V[12]+1700485571&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~M))+V[3]+2399980690&4294967295,N=C+(A<<10&4294967295|A>>>22),A=M+(C^(N|~I))+V[10]+4293915773&4294967295,M=N+(A<<15&4294967295|A>>>17),A=I+(N^(M|~C))+V[1]+2240044497&4294967295,I=M+(A<<21&4294967295|A>>>11),A=C+(M^(I|~N))+V[8]+1873313359&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~M))+V[15]+4264355552&4294967295,N=C+(A<<10&4294967295|A>>>22),A=M+(C^(N|~I))+V[6]+2734768916&4294967295,M=N+(A<<15&4294967295|A>>>17),A=I+(N^(M|~C))+V[13]+1309151649&4294967295,I=M+(A<<21&4294967295|A>>>11),A=C+(M^(I|~N))+V[4]+4149444226&4294967295,C=I+(A<<6&4294967295|A>>>26),A=N+(I^(C|~M))+V[11]+3174756917&4294967295,N=C+(A<<10&4294967295|A>>>22),A=M+(C^(N|~I))+V[2]+718787259&4294967295,M=N+(A<<15&4294967295|A>>>17),A=I+(N^(M|~C))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+N&4294967295}i.prototype.v=function(R,C){C===void 0&&(C=R.length);const I=C-this.blockSize,V=this.C;let M=this.h,N=0;for(;N<C;){if(M==0)for(;N<=I;)o(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<C;)if(V[M++]=R.charCodeAt(N++),M==this.blockSize){o(this,V),M=0;break}}else for(;N<C;)if(V[M++]=R[N++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=C},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;C=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=C&255,C/=256;for(this.v(R),R=Array(16),C=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)R[C++]=this.g[I]>>>V&255;return R};function c(R,C){var I=p;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=C(R)}function d(R,C){this.h=C;const I=[];let V=!0;for(let M=R.length-1;M>=0;M--){const N=R[M]|0;V&&N==C||(I[M]=N,V=!1)}this.g=I}var p={};function g(R){return-128<=R&&R<128?c(R,function(C){return new d([C|0],C<0?-1:0)}):new d([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return P(y(-R));const C=[];let I=1;for(let V=0;R>=I;V++)C[V]=R/I|0,I*=4294967296;return new d(C,0)}function b(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return P(b(R.substring(1),C));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(C,8));let V=E;for(let N=0;N<R.length;N+=8){var M=Math.min(8,R.length-N);const A=parseInt(R.substring(N,N+M),C);M<8?(M=y(Math.pow(C,M)),V=V.j(M).add(y(A))):(V=V.j(I),V=V.add(y(A)))}return V}var E=g(0),T=g(1),k=g(16777216);r=d.prototype,r.m=function(){if(B(this))return-P(this).m();let R=0,C=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);R+=(V>=0?V:4294967296+V)*C,C*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(z(this))return"0";if(B(this))return"-"+P(this).toString(R);const C=y(Math.pow(R,6));var I=this;let V="";for(;;){const M=fe(I,C).g;I=te(I,M.j(C));let N=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=M,z(I))return N+V;for(;N.length<6;)N="0"+N;V=N+V}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function z(R){if(R.h!=0)return!1;for(let C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function B(R){return R.h==-1}r.l=function(R){return R=te(this,R),B(R)?-1:z(R)?0:1};function P(R){const C=R.g.length,I=[];for(let V=0;V<C;V++)I[V]=~R.g[V];return new d(I,~R.h).add(T)}r.abs=function(){return B(this)?P(this):this},r.add=function(R){const C=Math.max(this.g.length,R.g.length),I=[];let V=0;for(let M=0;M<=C;M++){let N=V+(this.i(M)&65535)+(R.i(M)&65535),A=(N>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);V=A>>>16,N&=65535,A&=65535,I[M]=A<<16|N}return new d(I,I[I.length-1]&-2147483648?-1:0)};function te(R,C){return R.add(P(C))}r.j=function(R){if(z(this)||z(R))return E;if(B(this))return B(R)?P(this).j(P(R)):P(P(this).j(R));if(B(R))return P(this.j(P(R)));if(this.l(k)<0&&R.l(k)<0)return y(this.m()*R.m());const C=this.g.length+R.g.length,I=[];for(var V=0;V<2*C;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<R.g.length;M++){const N=this.i(V)>>>16,A=this.i(V)&65535,xe=R.i(M)>>>16,Ee=R.i(M)&65535;I[2*V+2*M]+=A*Ee,re(I,2*V+2*M),I[2*V+2*M+1]+=N*Ee,re(I,2*V+2*M+1),I[2*V+2*M+1]+=A*xe,re(I,2*V+2*M+1),I[2*V+2*M+2]+=N*xe,re(I,2*V+2*M+2)}for(R=0;R<C;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=C;R<2*C;R++)I[R]=0;return new d(I,0)};function re(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function Z(R,C){this.g=R,this.h=C}function fe(R,C){if(z(C))throw Error("division by zero");if(z(R))return new Z(E,E);if(B(R))return C=fe(P(R),C),new Z(P(C.g),P(C.h));if(B(C))return C=fe(R,P(C)),new Z(P(C.g),C.h);if(R.g.length>30){if(B(R)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var I=T,V=C;V.l(R)<=0;)I=ae(I),V=ae(V);var M=ue(I,1),N=ue(V,1);for(V=ue(V,2),I=ue(I,2);!z(V);){var A=N.add(V);A.l(R)<=0&&(M=M.add(I),N=A),V=ue(V,1),I=ue(I,1)}return C=te(R,M.j(C)),new Z(M,C)}for(M=E;R.l(C)>=0;){for(I=Math.max(1,Math.floor(R.m()/C.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),N=y(I),A=N.j(C);B(A)||A.l(R)>0;)I-=V,N=y(I),A=N.j(C);z(N)&&(N=T),M=M.add(N),R=te(R,A)}return new Z(M,R)}r.B=function(R){return fe(this,R).h},r.and=function(R){const C=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)&R.i(V);return new d(I,this.h&R.h)},r.or=function(R){const C=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)|R.i(V);return new d(I,this.h|R.h)},r.xor=function(R){const C=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)^R.i(V);return new d(I,this.h^R.h)};function ae(R){const C=R.g.length+1,I=[];for(let V=0;V<C;V++)I[V]=R.i(V)<<1|R.i(V-1)>>>31;return new d(I,R.h)}function ue(R,C){const I=C>>5;C%=32;const V=R.g.length-I,M=[];for(let N=0;N<V;N++)M[N]=C>0?R.i(N+I)>>>C|R.i(N+I+1)<<32-C:R.i(N+I);return new d(M,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Yb=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ii=d}).apply(typeof L_<"u"?L_:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $b,lc,Xb,jd,tp,Wb,Jb,Zb;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function o(u,v){if(v)e:{var x=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in x))break e;x=x[q]}u=u[u.length-1],S=x[u],v=v(S),v!=S&&v!=null&&e(x,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var x=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&x.push([S,v[S]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function g(u,v,x){return u.call.apply(u.bind,arguments)}function y(u,v,x){return y=g,y.apply(null,arguments)}function b(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,v){function x(){}x.prototype=v.prototype,u.Z=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(S,q,K){for(var ce=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ce[Ve-2]=arguments[Ve];return v.prototype[q].apply(S,ce)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const v=u.length;if(v>0){const x=Array(v);for(let S=0;S<v;S++)x[S]=u[S];return x}return[]}function z(u,v){for(let S=1;S<arguments.length;S++){const q=arguments[S];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=u.length||0;const K=q.length||0;u.length=x+K;for(let ce=0;ce<K;ce++)u[x+ce]=q[ce]}else u.push(q)}}class B{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(u){d.setTimeout(()=>{throw u},0)}function te(){var u=R;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class re{constructor(){this.h=this.g=null}add(v,x){const S=Z.get();S.set(v,x),this.h?this.h.next=S:this.g=S,this.h=S}}var Z=new B(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ue=!1,R=new re,C=()=>{const u=Promise.resolve(void 0);ae=()=>{u.then(I)}};function I(){for(var u;u=te();){try{u.h.call(u.g)}catch(x){P(x)}var v=Z;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}ue=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};d.addEventListener("test",x,v),d.removeEventListener("test",x,v)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function xe(u,v){M.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}E(xe,M),xe.prototype.init=function(u,v){const x=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(u,v,x,S,q){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!S,this.ha=q,this.key=++Q,this.da=this.fa=!1}function ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ae(u,v,x){for(const S in u)v.call(x,u[S],S,u)}function Ke(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function D(u){const v={};for(const x in u)v[x]=u[x];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(u,v){let x,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(x in S)u[x]=S[x];for(let K=0;K<X.length;K++)x=X[K],Object.prototype.hasOwnProperty.call(S,x)&&(u[x]=S[x])}}function he(u){this.src=u,this.g={},this.h=0}he.prototype.add=function(u,v,x,S,q){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const ce=Ce(u,v,S,q);return ce>-1?(v=u[ce],x||(v.fa=!1)):(v=new le(v,this.src,K,!!S,q),v.fa=x,u.push(v)),v};function ve(u,v){const x=v.type;if(x in u.g){var S=u.g[x],q=Array.prototype.indexOf.call(S,v,void 0),K;(K=q>=0)&&Array.prototype.splice.call(S,q,1),K&&(ye(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Ce(u,v,x,S){for(let q=0;q<u.length;++q){const K=u[q];if(!K.da&&K.listener==v&&K.capture==!!x&&K.ha==S)return q}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),nt={};function tt(u,v,x,S,q){if(Array.isArray(v)){for(let K=0;K<v.length;K++)tt(u,v[K],x,S,q);return null}return x=Fi(x),u&&u[Ee]?u.J(v,x,p(S)?!!S.capture:!1,q):oe(u,v,x,!1,S,q)}function oe(u,v,x,S,q,K){if(!v)throw Error("Invalid event type");const ce=p(q)?!!q.capture:!!q;let Ve=$n(u);if(Ve||(u[Pe]=Ve=new he(u)),x=Ve.add(v,x,S,ce,K),x.proxy)return x;if(S=at(),x.proxy=S,S.src=u,S.listener=x,u.addEventListener)N||(q=ce),q===void 0&&(q=!1),u.addEventListener(v.toString(),S,q);else if(u.attachEvent)u.attachEvent(en(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function at(){function u(x){return v.call(u.src,u.listener,x)}const v=Is;return u}function Kt(u,v,x,S,q){if(Array.isArray(v))for(var K=0;K<v.length;K++)Kt(u,v[K],x,S,q);else S=p(S)?!!S.capture:!!S,x=Fi(x),u&&u[Ee]?(u=u.i,K=String(v).toString(),K in u.g&&(v=u.g[K],x=Ce(v,x,S,q),x>-1&&(ye(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete u.g[K],u.h--)))):u&&(u=$n(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ce(v,x,S,q)),(x=u>-1?v[u]:null)&&ms(x))}function ms(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[Ee])ve(v.i,u);else{var x=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(x,S,u.capture):v.detachEvent?v.detachEvent(en(x),S):v.addListener&&v.removeListener&&v.removeListener(S),(x=$n(v))?(ve(x,u),x.h==0&&(x.src=null,v[Pe]=null)):ye(u)}}}function en(u){return u in nt?nt[u]:nt[u]="on"+u}function Is(u,v){if(u.da)u=!0;else{v=new xe(v,this);const x=u.listener,S=u.ha||u.src;u.fa&&ms(u),u=x.call(S,v)}return u}function $n(u){return u=u[Pe],u instanceof he?u:null}var Hi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fi(u){return typeof u=="function"?u:(u[Hi]||(u[Hi]=function(v){return u.handleEvent(v)}),u[Hi])}function wt(){V.call(this),this.i=new he(this),this.M=this,this.G=null}E(wt,V),wt.prototype[Ee]=!0,wt.prototype.removeEventListener=function(u,v,x,S){Kt(this,u,v,x,S)};function Ct(u,v){var x,S=u.G;if(S)for(x=[];S;S=S.G)x.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new M(v,u);else if(v instanceof M)v.target=v.target||u;else{var q=v;v=new M(S,u),ie(v,q)}q=!0;let K,ce;if(x)for(ce=x.length-1;ce>=0;ce--)K=v.g=x[ce],q=js(K,S,!0,v)&&q;if(K=v.g=u,q=js(K,S,!0,v)&&q,q=js(K,S,!1,v)&&q,x)for(ce=0;ce<x.length;ce++)K=v.g=x[ce],q=js(K,S,!1,v)&&q}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const x=u.g[v];for(let S=0;S<x.length;S++)ye(x[S]);delete u.g[v],u.h--}}this.G=null},wt.prototype.J=function(u,v,x,S){return this.i.add(String(u),v,!1,x,S)},wt.prototype.K=function(u,v,x,S){return this.i.add(String(u),v,!0,x,S)};function js(u,v,x,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let q=!0;for(let K=0;K<v.length;++K){const ce=v[K];if(ce&&!ce.da&&ce.capture==x){const Ve=ce.listener,Rt=ce.ha||ce.src;ce.fa&&ve(u.i,ce),q=Ve.call(Rt,S)!==!1&&q}}return q&&!S.defaultPrevented}function il(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(u,v||0)}function Pa(u){u.g=il(()=>{u.g=null,u.i&&(u.i=!1,Pa(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class tn extends V{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Pa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(u){V.call(this),this.h=u,this.g={}}E(ir,V);var Gi=[];function Qi(u){Ae(u.g,function(v,x){this.g.hasOwnProperty(x)&&ms(v)},u),u.g={}}ir.prototype.N=function(){ir.Z.N.call(this),Qi(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=d.JSON.stringify,Ua=d.JSON.parse,Ki=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Yi(){}function $i(){}var _n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $(){M.call(this,"d")}E($,M);function me(){M.call(this,"c")}E(me,M);var we={},Ye=null;function Tt(){return Ye=Ye||new wt}we.Ia="serverreachability";function Dn(u){M.call(this,we.Ia,u)}E(Dn,M);function xn(u){const v=Tt();Ct(v,new Dn(v))}we.STAT_EVENT="statevent";function On(u,v){M.call(this,we.STAT_EVENT,u),this.stat=v}E(On,M);function yt(u){const v=Tt();Ct(v,new On(v,u))}we.Ja="timingevent";function Xn(u,v){M.call(this,we.Ja,u),this.size=v}E(Xn,M);function Wn(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},v)}function Mn(){this.g=!0}Mn.prototype.ua=function(){this.g=!1};function za(u,v,x,S,q,K){u.info(function(){if(u.g)if(K){var ce="",Ve=K.split("&");for(let Ze=0;Ze<Ve.length;Ze++){var Rt=Ve[Ze].split("=");if(Rt.length>1){const vt=Rt[0];Rt=Rt[1];const ts=vt.split("_");ce=ts.length>=2&&ts[1]=="type"?ce+(vt+"="+Rt+"&"):ce+(vt+"=redacted&")}}}else ce=null;else ce=K;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+x+`
`+ce})}function Xi(u,v,x,S,q,K,ce){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+x+`
`+K+" "+ce})}function bn(u,v,x,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+En(u,x)+(S?" "+S:"")})}function Os(u,v){u.info(function(){return"TIMEOUT: "+v})}Mn.prototype.info=function(){};function En(u,v){if(!u.g)return v;if(!v)return null;try{const K=JSON.parse(v);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var x=K[u];if(!(x.length<2)){var S=x[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ce=1;ce<S.length;ce++)S[ce]=""}}}}return Ds(K)}catch{return v}}var ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ji;function Zi(){}E(Zi,Yi),Zi.prototype.g=function(){return new XMLHttpRequest},Ji=new Zi;function or(u){return encodeURIComponent(String(u))}function Kc(u){var v=1;u=u.split(":");const x=[];for(;v>0&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function ps(u,v,x,S){this.j=u,this.i=v,this.l=x,this.S=S||1,this.V=new ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}var Mt={},Yt={};function Ms(u,v,x){u.M=1,u.A=ea(kt(v)),u.u=x,u.R=!0,Ba(u,null)}function Ba(u,v){u.F=Date.now(),Vs(u),u.B=kt(u.A);var x=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ga(x.i,"t",S),u.C=0,x=u.j.L,u.h=new gs,u.g=lu(u.j,x?v:null,!u.u),u.P>0&&(u.O=new tn(y(u.Y,u,u.g),u.P)),v=u.V,x=u.g,S=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Gi[0]=q.toString()),q=Gi);for(let K=0;K<q.length;K++){const ce=tt(x,q[K],S||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),xn(),za(u.i,u.v,u.B,u.l,u.S,u.u)}ps.prototype.ba=function(u){u=u.target;const v=this.O;v&&_s(u)==3?v.j():this.Y(u)},ps.prototype.Y=function(u){try{if(u==this.g)e:{const Ve=_s(this.g),Rt=this.g.ya(),Ze=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Ve!=4||Rt==7||(Rt==8||Ze<=0?xn(3):xn(2)),ks(this);var v=this.g.ca();this.X=v;var x=Rh(this);if(this.o=v==200,Xi(this.i,this.v,this.B,this.l,this.S,Ve,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var K=S;break t}}K=null}if(u=K)bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ls(this,u);else{this.o=!1,this.m=3,yt(12),Vn(this),Jn(this);break e}}if(this.R){u=!0;let vt;for(;!this.K&&this.C<x.length;)if(vt=$c(this,x),vt==Yt){Ve==4&&(this.m=4,yt(14),u=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Mt){this.m=4,yt(15),bn(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else bn(this.i,this.l,vt,null),Ls(this,vt);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||x.length!=0||this.h.h||(this.m=1,yt(16),u=!1),this.o=this.o&&u,!u)bn(this.i,this.l,x,"[Invalid Chunked Response]"),Vn(this),Jn(this);else if(x.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),xl(ce),ce.P=!0,yt(11))}}else bn(this.i,this.l,x,null),Ls(this,x);Ve==4&&Vn(this),this.o&&!this.K&&(Ve==4?ru(this.j,this):(this.o=!1,Vs(this)))}else cr(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),Vn(this),Jn(this)}}}catch{}finally{}};function Rh(u){if(!Yc(u))return u.g.la();const v=nn(u.g);if(v==="")return"";let x="";const S=v.length,q=_s(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Vn(u),Jn(u),"";u.h.i=new d.TextDecoder}for(let K=0;K<S;K++)u.h.h=!0,x+=u.h.i.decode(v[K],{stream:!(q&&K==S-1)});return v.length=0,u.h.g+=x,u.C=0,u.h.g}function Yc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function $c(u,v){var x=u.C,S=v.indexOf(`
`,x);return S==-1?Yt:(x=Number(v.substring(x,S)),isNaN(x)?Mt:(S+=1,S+x>v.length?Yt:(v=v.slice(S,S+x),u.C=S+x,v)))}ps.prototype.cancel=function(){this.K=!0,Vn(this)};function Vs(u){u.T=Date.now()+u.H,qa(u,u.H)}function qa(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Wn(y(u.aa,u),v)}function ks(u){u.D&&(d.clearTimeout(u.D),u.D=null)}ps.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Os(this.i,this.B),this.M!=2&&(xn(),yt(17)),Vn(this),this.m=2,Jn(this)):qa(this,this.T-u)};function Jn(u){u.j.I==0||u.K||ru(u.j,u)}function Vn(u){ks(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Qi(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function Ls(u,v){try{var x=u.j;if(x.I!=0&&(x.g==u||Us(x.h,u))){if(!u.L&&Us(x.h,u)&&x.I==3){try{var S=x.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)Xa(x),$r(x);else break e;oa(x),yt(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Wn(y(x.Va,x),6e3));Ps(x.h)<=1&&x.ta&&(x.ta=void 0)}else Gs(x,11)}else if((u.L||x.g==u)&&Xa(x),!A(v))for(q=x.Ba.g.parse(v),v=0;v<q.length;v++){let Ze=q[v];const vt=Ze[0];if(!(vt<=x.K))if(x.K=vt,Ze=Ze[1],x.I==2)if(Ze[0]=="c"){x.M=Ze[1],x.ba=Ze[2];const ts=Ze[3];ts!=null&&(x.ka=ts,x.j.info("VER="+x.ka));const Qs=Ze[4];Qs!=null&&(x.za=Qs,x.j.info("SVER="+x.za));const xs=Ze[5];xs!=null&&typeof xs=="number"&&xs>0&&(S=1.5*xs,x.O=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const bs=u.g;if(bs){const la=bs.g?bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var K=S.h;K.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ll(K,K.h),K.h=null))}if(S.G){const Wa=bs.g?bs.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(S.wa=Wa,st(S.J,S.G,Wa))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),S=x;var ce=u;if(S.na=ou(S,S.L?S.ba:null,S.W),ce.L){cl(S.h,ce);var Ve=ce,Rt=S.O;Rt&&(Ve.H=Rt),Ve.D&&(ks(Ve),Vs(Ve)),S.g=ce}else nu(S);x.i.length>0&&Fs(x)}else Ze[0]!="stop"&&Ze[0]!="close"||Gs(x,7);else x.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Gs(x,7):vl(x):Ze[0]!="noop"&&x.l&&x.l.qa(Ze),x.A=0)}}xn(4)}catch{}}var Vt=class{constructor(u,v){this.g=u,this.map=v}};function al(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ps(u){return u.h?1:u.g?u.g.size:0}function Us(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function ll(u,v){u.g?u.g.add(v):u.h=v}function cl(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}al.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ul(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.G);return v}return k(u.i)}var Xc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ha(u,v){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const S=u[x].indexOf("=");let q,K=null;S>=0?(q=u[x].substring(0,S),K=u[x].substring(S+1)):q=u[x],v(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof kn?(this.l=u.l,$t(this,u.j),this.o=u.o,this.g=u.g,qr(this,u.u),this.h=u.h,dl(this,eu(u.i)),this.m=u.m):u&&(v=String(u).match(Xc))?(this.l=!1,$t(this,v[1]||"",!0),this.o=zs(v[2]||""),this.g=zs(v[3]||"",!0),qr(this,v[4]),this.h=zs(v[5]||"",!0),dl(this,v[6]||"",!0),this.m=zs(v[7]||"")):(this.l=!1,this.i=new Fr(null,this.l))}kn.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(ta(v,Fa,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(ta(v,Fa,!0),"@"),u.push(or(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(ta(x,x.charAt(0)=="/"?hl:Wc,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",ta(x,Jc)),u.join("")},kn.prototype.resolve=function(u){const v=kt(this);let x=!!u.j;x?$t(v,u.j):x=!!u.o,x?v.o=u.o:x=!!u.g,x?v.g=u.g:x=u.u!=null;var S=u.h;if(x)qr(v,u.u);else if(x=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=v.h.lastIndexOf("/");q!=-1&&(S=v.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let ce=0;ce<q.length;){const Ve=q[ce++];Ve=="."?S&&ce==q.length&&K.push(""):Ve==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&ce==q.length&&K.push("")):(K.push(Ve),S=!0)}S=K.join("/")}else S=q}return x?v.h=S:x=u.i.toString()!=="",x?dl(v,eu(u.i)):x=!!u.m,x&&(v.m=u.m),v};function kt(u){return new kn(u)}function $t(u,v,x){u.j=x?zs(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function qr(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function dl(u,v,x){v instanceof Fr?(u.i=v,Qa(u.i,u.l)):(x||(v=ta(v,Hr)),u.i=new Fr(v,u.l))}function st(u,v,x){u.i.set(v,x)}function ea(u){return st(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function zs(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ta(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,wn),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fa=/[#\/\?@]/g,Wc=/[#\?:]/g,hl=/[#\?]/g,Hr=/[#\?@]/g,Jc=/#/g;function Fr(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ha(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}r=Fr.prototype,r.add=function(u,v){Tn(this),this.i=null,u=Gr(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function Zc(u,v){Tn(u),v=Gr(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function fl(u,v){return Tn(u),v=Gr(u,v),u.g.has(v)}r.forEach=function(u,v){Tn(this),this.g.forEach(function(x,S){x.forEach(function(q){u.call(v,q,S,this)},this)},this)};function ml(u,v){Tn(u);let x=[];if(typeof v=="string")fl(u,v)&&(x=x.concat(u.g.get(Gr(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)x=x.concat(u[v]);return x}r.set=function(u,v){return Tn(this),this.i=null,u=Gr(this,u),fl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},r.get=function(u,v){return u?(u=ml(this,u),u.length>0?String(u[0]):v):v};function Ga(u,v,x){Zc(u,v),x.length>0&&(u.i=null,u.g.set(Gr(u,v),k(x)),u.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var x=v[S];const q=or(x);x=ml(this,x);for(let K=0;K<x.length;K++){let ce=q;x[K]!==""&&(ce+="="+or(x[K])),u.push(ce)}}return this.i=u.join("&")};function eu(u){const v=new Fr;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function Gr(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Qa(u,v){v&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(x,S){const q=S.toLowerCase();S!=q&&(Zc(this,S),Ga(this,q,x))},u)),u.j=v}function ys(u,v){const x=new Mn;if(d.Image){const S=new Image;S.onload=b(Zn,x,"TestLoadImage: loaded",!0,v,S),S.onerror=b(Zn,x,"TestLoadImage: error",!1,v,S),S.onabort=b(Zn,x,"TestLoadImage: abort",!1,v,S),S.ontimeout=b(Zn,x,"TestLoadImage: timeout",!1,v,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function pl(u,v){const x=new Mn,S=new AbortController,q=setTimeout(()=>{S.abort(),Zn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(q),K.ok?Zn(x,"TestPingServer: ok",!0,v):Zn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Zn(x,"TestPingServer: error",!1,v)})}function Zn(u,v,x,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(x)}catch{}}function Qr(){this.g=new Ki}function Bs(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Bs,Yi),Bs.prototype.g=function(){return new na(this.i,this.h)};function na(u,v){wt.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(na,wt),r=na.prototype,r.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,vs(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ka(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ka(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Kr(this):vs(this),this.readyState==3&&Ka(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Kr(this))},r.Na=function(u){this.g&&(this.response=u,Kr(this))},r.ga=function(){this.g&&Kr(this)};function Kr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vs(u)}r.setRequestHeader=function(u,v){this.A.append(u,v)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function vs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function es(u){let v="";return Ae(u,function(x,S){v+=S,v+=":",v+=x,v+=`\r
`}),v}function sa(u,v,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=es(x),typeof u=="string"?x!=null&&or(x):st(u,v,x))}function ot(u){wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ot,wt);var qs=/^https?$/i,gl=["POST","PUT"];r=ot.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,v,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ji.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(K){ra(this,K);return}if(u=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)x.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())x.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),q=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(gl,v,void 0)>=0)||S||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ce]of x)this.g.setRequestHeader(K,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){ra(this,K)}};function ra(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,yl(u),lr(u)}function yl(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ct(this,"complete"),Ct(this,"abort"),lr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ia(this):this.Xa())},r.Xa=function(){ia(this)};function ia(u){if(u.h&&typeof c<"u"){if(u.v&&_s(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ct(u,"readystatechange"),_s(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var S;if(S=K===0){let ce=String(u.D).match(Xc)[1]||null;!ce&&d.self&&d.self.location&&(ce=d.self.location.protocol.slice(0,-1)),S=!qs.test(ce?ce.toLowerCase():"")}x=S}if(x)Ct(u,"complete"),Ct(u,"success");else{u.o=6;try{var q=_s(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",yl(u)}}finally{lr(u)}}}}function lr(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,v||Ct(u,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function _s(u){return u.g?u.g.readyState:0}r.ca=function(){try{return _s(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Ua(v)}};function nn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cr(u){const v={};u=(u.g&&_s(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(A(u[S]))continue;var x=Kc(u[S]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=v[q]||[];v[q]=K,K.push(x)}Ke(v,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function Yr(u){this.za=0,this.i=[],this.j=new Mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,u),this.Za=Hs("retryDelaySeedMs",1e4,u),this.Ta=Hs("forwardChannelMaxRetries",2,u),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new al(u&&u.concurrentRequestLimit),this.Ba=new Qr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Yr.prototype,r.ka=8,r.I=1,r.connect=function(u,v,x,S){yt(0),this.W=u,this.H=v||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.J=ou(this,null,this.W),Fs(this)};function vl(u){if(Ya(u),u.I==3){var v=u.V++,x=kt(u.J);if(st(x,"SID",u.M),st(x,"RID",v),st(x,"TYPE","terminate"),aa(u,x),v=new ps(u,u.j,v),v.M=2,v.A=ea(kt(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&d.Image&&(new Image().src=v.A,x=!0),x||(v.g=lu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Vs(v)}au(u)}function $r(u){u.g&&(xl(u),u.g.cancel(),u.g=null)}function Ya(u){$r(u),u.v&&(d.clearTimeout(u.v),u.v=null),Xa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Fs(u){if(!ol(u.h)&&!u.m){u.m=!0;var v=u.Ea;ae||C(),ue||(ae(),ue=!0),R.add(v,u),u.D=0}}function $a(u,v){return Ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Wn(y(u.Ea,u,v),iu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new ps(this,this.j,u);let K=this.o;if(this.U&&(K?(K=D(K),ie(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=tu(this,q,v),x=kt(this.J),st(x,"RID",u),st(x,"CVER",22),this.G&&st(x,"X-HTTP-Session-Id",this.G),aa(this,x),K&&(this.R?v="headers="+or(es(K))+"&"+v:this.u&&sa(x,this.u,K)),ll(this.h,q),this.Ra&&st(x,"TYPE","init"),this.S?(st(x,"$req",v),st(x,"SID","null"),q.U=!0,Ms(q,x,null)):Ms(q,x,v),this.I=2}}else this.I==3&&(u?_l(this,u):this.i.length==0||ol(this.h)||_l(this))};function _l(u,v){var x;v?x=v.l:x=u.V++;const S=kt(u.J);st(S,"SID",u.M),st(S,"RID",x),st(S,"AID",u.K),aa(u,S),u.u&&u.o&&sa(S,u.u,u.o),x=new ps(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),v&&(u.i=v.G.concat(u.i)),v=tu(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ll(u.h,x),Ms(x,S,v)}function aa(u,v){u.H&&Ae(u.H,function(x,S){st(v,S,x)}),u.l&&Ae({},function(x,S){st(v,S,x)})}function tu(u,v,x){x=Math.min(u.i.length,x);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var q=u.i;let Ve=-1;for(;;){const Rt=["count="+x];Ve==-1?x>0?(Ve=q[0].g,Rt.push("ofs="+Ve)):Ve=0:Rt.push("ofs="+Ve);let Ze=!0;for(let vt=0;vt<x;vt++){var K=q[vt].g;const ts=q[vt].map;if(K-=Ve,K<0)Ve=Math.max(0,q[vt].g-100),Ze=!1;else try{K="req"+K+"_"||"";try{var ce=ts instanceof Map?ts:Object.entries(ts);for(const[Qs,xs]of ce){let bs=xs;p(xs)&&(bs=Ds(xs)),Rt.push(K+Qs+"="+encodeURIComponent(bs))}}catch(Qs){throw Rt.push(K+"type="+encodeURIComponent("_badmap")),Qs}}catch{S&&S(ts)}}if(Ze){ce=Rt.join("&");break e}}ce=void 0}return u=u.i.splice(0,x),v.G=u,ce}function nu(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;ae||C(),ue||(ae(),ue=!0),R.add(v,u),u.A=0}}function oa(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Wn(y(u.Da,u),iu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Wn(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),$r(this),su(this))};function xl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function su(u){u.g=new ps(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=kt(u.na);st(v,"RID","rpc"),st(v,"SID",u.M),st(v,"AID",u.K),st(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&st(v,"TO",u.ia),st(v,"TYPE","xmlhttp"),aa(u,v),u.u&&u.o&&sa(v,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=ea(kt(v)),x.u=null,x.R=!0,Ba(x,u)}r.Va=function(){this.C!=null&&(this.C=null,$r(this),oa(this),yt(19))};function Xa(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function ru(u,v){var x=null;if(u.g==v){Xa(u),xl(u),u.g=null;var S=2}else if(Us(u.h,v))x=v.G,cl(u.h,v),S=1;else return;if(u.I!=0){if(v.o)if(S==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var q=u.D;S=Tt(),Ct(S,new Xn(S,x)),Fs(u)}else nu(u);else if(q=v.m,q==3||q==0&&v.X>0||!(S==1&&$a(u,v)||S==2&&oa(u)))switch(x&&x.length>0&&(v=u.h,v.i=v.i.concat(x)),q){case 1:Gs(u,5);break;case 4:Gs(u,10);break;case 3:Gs(u,6);break;default:Gs(u,2)}}}function iu(u,v){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*v}function Gs(u,v){if(u.j.info("Error code "+v),v==2){var x=y(u.bb,u),S=u.Ua;const q=!S;S=new kn(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$t(S,"https"),ea(S),q?ys(S.toString(),x):pl(S.toString(),x)}else yt(2);u.I=0,u.l&&u.l.pa(v),au(u),Ya(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function au(u){if(u.I=0,u.ja=[],u.l){const v=ul(u.h);(v.length!=0||u.i.length!=0)&&(z(u.ja,v),z(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function ou(u,v,x){var S=x instanceof kn?kt(x):new kn(x);if(S.g!="")v&&(S.g=v+"."+S.g),qr(S,S.u);else{var q=d.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;const K=new kn(null);S&&$t(K,S),v&&(K.g=v),q&&qr(K,q),x&&(K.h=x),S=K}return x=u.G,v=u.wa,x&&v&&st(S,x,v),st(S,"VER",u.ka),aa(u,S),S}function lu(u,v,x){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new ot(new Bs({ab:x})):new ot(u.ma),v.Fa(u.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}r=cu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xr(){}Xr.prototype.g=function(u,v){return new gn(u,v)};function gn(u,v){wt.call(this),this.g=new Yr(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!A(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new ur(this)}E(gn,wt),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){vl(this.g)},gn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=Ds(u),u=x);v.i.push(new Vt(v.Ya++,u)),v.I==3&&Fs(v)},gn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,gn.Z.N.call(this)};function uu(u){$.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}E(uu,$);function du(){me.call(this),this.status=1}E(du,me);function ur(u){this.g=u}E(ur,cu),ur.prototype.ra=function(){Ct(this.g,"a")},ur.prototype.qa=function(u){Ct(this.g,new uu(u))},ur.prototype.pa=function(u){Ct(this.g,new du)},ur.prototype.oa=function(){Ct(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Zb=function(){return new Xr},Jb=function(){return Tt()},Wb=we,tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,jd=ar,Wi.COMPLETE="complete",Xb=Wi,$i.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",wt.prototype.listen=wt.prototype.J,lc=$i,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,$b=ot}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore",U_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new Np("@firebase/firestore");function Ro(){return ja.logLevel}function pe(r,...e){if(ja.logLevel<=He.DEBUG){const n=e.map(zp);ja.debug(`Firestore (${Jo}): ${r}`,...n)}}function kr(r,...e){if(ja.logLevel<=He.ERROR){const n=e.map(zp);ja.error(`Firestore (${Jo}): ${r}`,...n)}}function Bo(r,...e){if(ja.logLevel<=He.WARN){const n=e.map(zp);ja.warn(`Firestore (${Jo}): ${r}`,...n)}}function zp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,eE(r,i,n)}function eE(r,e,n){let i=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw kr(i),new Error(i)}function Xe(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||eE(e,o,i)}function Oe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mn.UNAUTHENTICATED)))}shutdown(){}}class PC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UC{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new er,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new er)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string",31837,{l:i}),new tE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class zC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new zC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const i=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new z_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=HC(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function Fe(r,e){return r<e?-1:r>e?1:0}function np(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return Um(o)===Um(c)?Fe(o,c):Um(o)?1:-1}return Fe(r.length,e.length)}const FC=55296,GC=57343;function Um(r){const e=r.charCodeAt(0);return e>=FC&&e<=GC}function qo(r,e,n){return r.length===e.length&&r.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="__name__";class Js{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ne(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=Js.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Fe(e.length,n.length)}static compareSegments(e,n){const i=Js.isNumericId(e),o=Js.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Js.extractNumericId(e).compare(Js.extractNumericId(n)):np(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ii.fromString(e.substring(4,e.length-2))}}class dt extends Js{construct(e,n,i){return new dt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Js{construct(e,n,i){return new un(e,n,i)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B_}static keyField(){return new un([B_])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(c(),o++)}if(c(),d)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(dt.fromString(e))}static fromName(e){return new Te(dt.fromString(e).popFirst(5))}static empty(){return new Te(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(r,e,n){if(!n)throw new de(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function KC(r,e,n,i){if(e===!0&&i===!0)throw new de(J.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function q_(r){if(!Te.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function H_(r){if(Te.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function sE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ne(12329,{type:typeof r})}function Yn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(r);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r,e){const n={typeString:r};return e&&(n.value=e),n}function kc(r,e){if(!sE(r))throw new de(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new de(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=-62135596800,G_=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*G_);return new gt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<F_)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G_}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kc(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-F_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Ft("string",gt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new gt(0,0))}static max(){return new Ie(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-1;function YC(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new Oi(o,Te.empty(),e)}function $C(r){return new Oi(r.readTime,r.key,Ec)}class Oi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Oi(Ie.min(),Te.empty(),Ec)}static max(){return new Oi(Ie.max(),Te.empty(),Ec)}}function XC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(r.documentKey,e.documentKey),n!==0?n:Fe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==WC)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,i)=>{n(e)}))}static reject(e){return new se(((n,i)=>{i(e)}))}static waitFor(e){return new se(((n,i)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&n()}),(g=>i(g)))})),d=!0,c===o&&n()}))}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next((o=>o?se.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new se(((i,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((b=>{d[y]=b,++p,p===c&&i(d)}),(b=>o(b)))}}))}static doWhile(e,n){return new se(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function ZC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function Lc(r){return r==null}function Qd(r){return r===0&&1/r==-1/0}function eR(r){return typeof r=="number"&&Number.isInteger(r)&&!Qd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="";function tR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Q_(e)),e=nR(r.get(n),e);return Q_(e)}function nR(r,e){let n=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case rE:n+="";break;default:n+=c}}return n}function Q_(r){return r+rE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Bi(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function iE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??cn.RED,this.left=o??cn.EMPTY,this.right=c??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new cn(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return cn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y_(this.data.getIterator())}getIteratorFrom(e){return new Y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class Y_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new Qt(un.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new aE("Invalid base64 string: "+c):c}})(e);return new dn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const sR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(r){if(Xe(!!r,39018),typeof r=="string"){let e=0;const n=sR.exec(r);if(Xe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dt(r.seconds),nanos:Dt(r.nanos)}}function Dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Vi(r){return typeof r=="string"?dn.fromBase64String(r):dn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="server_timestamp",lE="__type__",cE="__previous_value__",uE="__local_write_time__";function Hp(r){var n,i;return((i=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[lE])==null?void 0:i.stringValue)===oE}function ph(r){const e=r.mapValue.fields[cE];return Hp(e)?ph(e):e}function wc(r){const e=Mi(r.mapValue.fields[uE].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,i,o,c,d,p,g,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const Kd="(default)";class Tc{constructor(e,n){this.projectId=e,this.database=n||Kd}static empty(){return new Tc("","")}get isDefaultDatabase(){return this.database===Kd}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="__type__",iR="__max__",_d={mapValue:{}},hE="__vector__",Yd="value";function ki(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hp(r)?4:oR(r)?9007199254740991:aR(r)?10:11:Ne(28295,{value:r})}function rr(r,e){if(r===e)return!0;const n=ki(r);if(n!==ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return wc(r).isEqual(wc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Mi(o.timestampValue),p=Mi(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Vi(o.bytesValue).isEqual(Vi(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Dt(o.geoPointValue.latitude)===Dt(c.geoPointValue.latitude)&&Dt(o.geoPointValue.longitude)===Dt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Dt(o.integerValue)===Dt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Dt(o.doubleValue),p=Dt(c.doubleValue);return d===p?Qd(d)===Qd(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return qo(r.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(K_(d)!==K_(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!rr(d[g],p[g])))return!1;return!0})(r,e);default:return Ne(52216,{left:r})}}function Sc(r,e){return(r.values||[]).find((n=>rr(n,e)))!==void 0}function Ho(r,e){if(r===e)return 0;const n=ki(r),i=ki(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=Dt(c.integerValue||c.doubleValue),g=Dt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return $_(r.timestampValue,e.timestampValue);case 4:return $_(wc(r),wc(e));case 5:return np(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=Vi(c),g=Vi(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Fe(p[y],g[y]);if(b!==0)return b}return Fe(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Fe(Dt(c.latitude),Dt(d.latitude));return p!==0?p:Fe(Dt(c.longitude),Dt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return X_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var T,k,z,B;const p=c.fields||{},g=d.fields||{},y=(T=p[Yd])==null?void 0:T.arrayValue,b=(k=g[Yd])==null?void 0:k.arrayValue,E=Fe(((z=y==null?void 0:y.values)==null?void 0:z.length)||0,((B=b==null?void 0:b.values)==null?void 0:B.length)||0);return E!==0?E:X_(y,b)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===_d.mapValue&&d===_d.mapValue)return 0;if(c===_d.mapValue)return 1;if(d===_d.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const T=np(g[E],b[E]);if(T!==0)return T;const k=Ho(p[g[E]],y[b[E]]);if(k!==0)return k}return Fe(g.length,b.length)})(r.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function $_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const n=Mi(r),i=Mi(e),o=Fe(n.seconds,i.seconds);return o!==0?o:Fe(n.nanos,i.nanos)}function X_(r,e){const n=r.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=Ho(n[o],i[o]);if(c)return c}return Fe(n.length,i.length)}function Fo(r){return sp(r)}function sp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=Mi(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Vi(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Te.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=sp(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${sp(n.fields[d])}`;return o+"}"})(r.mapValue):Ne(61005,{value:r})}function Dd(r){switch(ki(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(r);return e?16+Dd(e):16;case 5:return 2*r.stringValue.length;case 6:return Vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+Dd(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Bi(i.fields,((c,d)=>{o+=c.length+Dd(d)})),o})(r.mapValue);default:throw Ne(13486,{value:r})}}function W_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function rp(r){return!!r&&"integerValue"in r}function Fp(r){return!!r&&"arrayValue"in r}function J_(r){return!!r&&"nullValue"in r}function Z_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Od(r){return!!r&&"mapValue"in r}function aR(r){var n,i;return((i=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[dE])==null?void 0:i.stringValue)===hE}function fc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Bi(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=fc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(r.arrayValue.values[n]);return e}return{...r}}function oR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=un.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}d?i[p.lastSegment()]=fc(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());Od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Od(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Bi(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new vn(fc(this.value))}}function fE(r){const e=[];return Bi(r.fields,((n,i)=>{const o=new un([n]);if(Od(i)){const c=fE(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,i,o,c,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Zt(e,0,Ie.min(),Ie.min(),Ie.min(),vn.empty(),0)}static newFoundDocument(e,n,i,o){return new Zt(e,1,n,Ie.min(),i,o,0)}static newNoDocument(e,n){return new Zt(e,2,n,Ie.min(),Ie.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Ie.min(),Ie.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.position=e,this.inclusive=n}}function ex(r,e,n){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?i=Te.comparator(Te.fromName(d.referenceValue),n.key):i=Ho(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function tx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!rr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function lR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{}class qt extends mE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new uR(e,n,i):n==="array-contains"?new fR(e,i):n==="in"?new mR(e,i):n==="not-in"?new pR(e,i):n==="array-contains-any"?new gR(e,i):new qt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new dR(e,i):new hR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ho(n,this.value)):n!==null&&ki(this.value)===ki(n)&&this.matchesComparison(Ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ns extends mE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ns(e,n)}matches(e){return pE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pE(r){return r.op==="and"}function gE(r){return cR(r)&&pE(r)}function cR(r){for(const e of r.filters)if(e instanceof Ns)return!1;return!0}function ip(r){if(r instanceof qt)return r.field.canonicalString()+r.op.toString()+Fo(r.value);if(gE(r))return r.filters.map((e=>ip(e))).join(",");{const e=r.filters.map((n=>ip(n))).join(",");return`${r.op}(${e})`}}function yE(r,e){return r instanceof qt?(function(i,o){return o instanceof qt&&i.op===o.op&&i.field.isEqual(o.field)&&rr(i.value,o.value)})(r,e):r instanceof Ns?(function(i,o){return o instanceof Ns&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,p)=>c&&yE(d,o.filters[p])),!0):!1})(r,e):void Ne(19439)}function vE(r){return r instanceof qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Fo(n.value)}`})(r):r instanceof Ns?(function(n){return n.op.toString()+" {"+n.getFilters().map(vE).join(" ,")+"}"})(r):"Filter"}class uR extends qt{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class dR extends qt{constructor(e,n){super(e,"in",n),this.keys=_E("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class hR extends qt{constructor(e,n){super(e,"not-in",n),this.keys=_E("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function _E(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class fR extends qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&Sc(n.arrayValue,this.value)}}class mR extends qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}}class pR extends qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sc(this.value.arrayValue,n)}}class gR extends qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Sc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n=null,i=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function nx(r,e=null,n=[],i=[],o=null,c=null,d=null){return new yR(r,e,n,i,o,c,d)}function Gp(r){const e=Oe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>ip(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Lc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Fo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Fo(i))).join(",")),e.Te=n}return e.Te}function Qp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!lR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!yE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!tx(r.startAt,e.startAt)&&tx(r.endAt,e.endAt)}function ap(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n=null,i=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vR(r,e,n,i,o,c,d,p){return new Pc(r,e,n,i,o,c,d,p)}function Kp(r){return new Pc(r)}function sx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xE(r){return r.collectionGroup!==null}function mc(r){const e=Oe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Qt(un.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Xd(c,i))})),n.has(un.keyField().canonicalString())||e.Ie.push(new Xd(un.keyField(),i))}return e.Ie}function tr(r){const e=Oe(r);return e.Ee||(e.Ee=_R(e,mc(r))),e.Ee}function _R(r,e){if(r.limitType==="F")return nx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Xd(o.field,c)}));const n=r.endAt?new $d(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new $d(r.startAt.position,r.startAt.inclusive):null;return nx(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function op(r,e){const n=r.filters.concat([e]);return new Pc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function lp(r,e,n){return new Pc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function gh(r,e){return Qp(tr(r),tr(e))&&r.limitType===e.limitType}function bE(r){return`${Gp(tr(r))}|lt:${r.limitType}`}function Io(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>vE(o))).join(", ")}]`),Lc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Fo(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Fo(o))).join(",")),`Target(${i})`})(tr(r))}; limitType=${r.limitType})`}function yh(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Te.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of mc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,g){const y=ex(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,mc(i),o)||i.endAt&&!(function(d,p,g){const y=ex(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,mc(i),o))})(r,e)}function xR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function EE(r){return(e,n)=>{let i=!1;for(const o of mc(r)){const c=bR(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function bR(r,e,n){const i=r.field.isKeyField()?Te.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Ho(g,y):Ne(42886)})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Bi(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new Et(Te.comparator);function Lr(){return ER}const wE=new Et(Te.comparator);function cc(...r){let e=wE;for(const n of r)e=e.insert(n.key,n);return e}function TE(r){let e=wE;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Na(){return pc()}function SE(){return pc()}function pc(){return new ka((r=>r.toString()),((r,e)=>r.isEqual(e)))}const wR=new Et(Te.comparator),TR=new Qt(Te.comparator);function Ge(...r){let e=TR;for(const n of r)e=e.add(n);return e}const SR=new Qt(Fe);function AR(){return SR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function AE(r){return{integerValue:""+r}}function NR(r,e){return eR(e)?AE(e):Yp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this._=void 0}}function CR(r,e,n){return r instanceof Wd?(function(o,c){const d={fields:{[lE]:{stringValue:oE},[uE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Hp(c)&&(c=ph(c)),c&&(d.fields[cE]=c),{mapValue:d}})(n,e):r instanceof Ac?CE(r,e):r instanceof Nc?RE(r,e):(function(o,c){const d=NE(o,c),p=rx(d)+rx(o.Ae);return rp(d)&&rp(o.Ae)?AE(p):Yp(o.serializer,p)})(r,e)}function RR(r,e,n){return r instanceof Ac?CE(r,e):r instanceof Nc?RE(r,e):n}function NE(r,e){return r instanceof Jd?(function(i){return rp(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Wd extends vh{}class Ac extends vh{constructor(e){super(),this.elements=e}}function CE(r,e){const n=IE(e);for(const i of r.elements)n.some((o=>rr(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Nc extends vh{constructor(e){super(),this.elements=e}}function RE(r,e){let n=IE(e);for(const i of r.elements)n=n.filter((o=>!rr(o,i)));return{arrayValue:{values:n}}}class Jd extends vh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rx(r){return Dt(r.integerValue||r.doubleValue)}function IE(r){return Fp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function IR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Ac&&o instanceof Ac||i instanceof Nc&&o instanceof Nc?qo(i.elements,o.elements,rr):i instanceof Jd&&o instanceof Jd?rr(i.Ae,o.Ae):i instanceof Wd&&o instanceof Wd})(r.transform,e.transform)}class jR{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Md(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class _h{}function jE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new zc(r.key,Ht.none()):new Uc(r.key,r.data,Ht.none());{const n=r.data,i=vn.empty();let o=new Qt(un.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new qi(r.key,i,new Gn(o.toArray()),Ht.none())}}function DR(r,e,n){r instanceof Uc?(function(o,c,d){const p=o.value.clone(),g=ax(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof qi?(function(o,c,d){if(!Md(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=ax(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(DE(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function gc(r,e,n,i){return r instanceof Uc?(function(c,d,p,g){if(!Md(c.precondition,d))return p;const y=c.value.clone(),b=ox(c.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,i):r instanceof qi?(function(c,d,p,g){if(!Md(c.precondition,d))return p;const y=ox(c.fieldTransforms,g,d),b=d.data;return b.setAll(DE(c)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(r,e,n,i):(function(c,d,p){return Md(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function OR(r,e){let n=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=NE(i.transform,o||null);c!=null&&(n===null&&(n=vn.empty()),n.set(i.field,c))}return n||null}function ix(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&qo(i,o,((c,d)=>IR(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Uc extends _h{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qi extends _h{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function DE(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function ax(r,e,n){const i=new Map;Xe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,p=e.data.field(c.field);i.set(c.field,RR(d,p,n[o]))}return i}function ox(r,e,n){const i=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);i.set(o.field,CR(c,d,e))}return i}class zc extends _h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OE extends _h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&DR(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=SE();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=jE(d,p);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((n,i)=>ix(n,i)))&&qo(this.baseMutations,e.baseMutations,((n,i)=>ix(n,i)))}}class $p{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Xe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return wR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new $p(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,$e;function ME(r){switch(r){case J.OK:return Ne(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ne(15467,{code:r})}}function VE(r){if(r===void 0)return kr("GRPC error has no .code"),J.UNKNOWN;switch(r){case Bt.OK:return J.OK;case Bt.CANCELLED:return J.CANCELLED;case Bt.UNKNOWN:return J.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return J.INTERNAL;case Bt.UNAVAILABLE:return J.UNAVAILABLE;case Bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Bt.NOT_FOUND:return J.NOT_FOUND;case Bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Bt.ABORTED:return J.ABORTED;case Bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Bt.DATA_LOSS:return J.DATA_LOSS;default:return Ne(39323,{code:r})}}($e=Bt||(Bt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Ii([4294967295,4294967295],0);function lx(r){const e=LR().encode(r),n=new Yb;return n.update(e),new Uint8Array(n.digest())}function cx(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ii([n,i],0),new Ii([o,c],0)]}class Xp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new uc(`Invalid padding: ${n}`);if(i<0)throw new uc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new uc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new uc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ii.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Ii.fromNumber(i)));return o.compare(PR)===1&&(o=new Ii([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lx(e),[i,o]=cx(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Xp(c,o,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=lx(e),[i,o]=cx(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new xh(Ie.min(),o,new Et(Fe),Lr(),Ge())}}class Bc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Bc(i,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class kE{constructor(e,n){this.targetId=e,this.Ce=n}}class LE{constructor(e,n,i=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class ux{constructor(){this.ve=0,this.Fe=dx(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),i=Ge();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:c})}})),new Bc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=dx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Lr(),this.Je=xd(),this.He=xd(),this.Ye=new Et(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(ap(c))if(i===0){const d=new Te(c.path);this.et(n,d,Zt.newNoDocument(d,Ie.min()))}else Xe(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=Vi(i).toUint8Array()}catch(g){if(g instanceof aE)return Bo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Xp(d,o,c)}catch(g){return Bo(g instanceof uc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&ap(p.target)){const g=new Te(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Zt.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let i=Ge();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new xh(e,n,this.Ye,this.je,i);return this.je=Lr(),this.Je=xd(),this.He=xd(),this.Ye=new Et(Fe),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ux,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ux),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xd(){return new Et(Te.comparator)}function dx(){return new Et(Te.comparator)}const zR={asc:"ASCENDING",desc:"DESCENDING"},BR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qR={and:"AND",or:"OR"};class HR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cp(r,e){return r.useProto3Json||Lc(e)?e:{value:e}}function Zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function FR(r,e){return Zd(r,e.toTimestamp())}function Qn(r){return Xe(!!r,49232),Ie.fromTimestamp((function(n){const i=Mi(n);return new gt(i.seconds,i.nanos)})(r))}function Wp(r,e){return up(r,e).canonicalString()}function up(r,e){const n=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function UE(r){const e=dt.fromString(r);return Xe(GE(e),10190,{key:e.toString()}),e}function eh(r,e){return Wp(r.databaseId,e.path)}function yc(r,e){const n=UE(e);if(n.get(1)!==r.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Te(BE(n))}function zE(r,e){return Wp(r.databaseId,e)}function GR(r){const e=UE(r);return e.length===4?dt.emptyPath():BE(e)}function dp(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function BE(r){return Xe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function hx(r,e,n){return{name:eh(r,e),fields:n.value.mapValue.fields}}function QR(r,e){return"found"in e?(function(i,o){Xe(!!o.found,43571),o.found.name,o.found.updateTime;const c=yc(i,o.found.name),d=Qn(o.found.updateTime),p=o.found.createTime?Qn(o.found.createTime):Ie.min(),g=new vn({mapValue:{fields:o.found.fields}});return Zt.newFoundDocument(c,d,p,g)})(r,e):"missing"in e?(function(i,o){Xe(!!o.missing,3894),Xe(!!o.readTime,22933);const c=yc(i,o.missing),d=Qn(o.readTime);return Zt.newNoDocument(c,d)})(r,e):Ne(7234,{result:e})}function KR(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ne(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Xe(b===void 0||typeof b=="string",58123),dn.fromBase64String(b||"")):(Xe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),dn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const b=y.code===void 0?J.UNKNOWN:VE(y.code);return new de(b,y.message||"")})(d);n=new LE(i,o,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=yc(r,i.document.name),c=Qn(i.document.updateTime),d=i.document.createTime?Qn(i.document.createTime):Ie.min(),p=new vn({mapValue:{fields:i.document.fields}}),g=Zt.newFoundDocument(o,c,d,p),y=i.targetIds||[],b=i.removedTargetIds||[];n=new Vd(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=yc(r,i.document),c=i.readTime?Qn(i.readTime):Ie.min(),d=Zt.newNoDocument(o,c),p=i.removedTargetIds||[];n=new Vd([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=yc(r,i.document),c=i.removedTargetIds||[];n=new Vd([],c,o,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new kR(o,c),p=i.targetId;n=new kE(p,d)}}return n}function qE(r,e){let n;if(e instanceof Uc)n={update:hx(r,e.key,e.value)};else if(e instanceof zc)n={delete:eh(r,e.key)};else if(e instanceof qi)n={update:hx(r,e.key,e.data),updateMask:nI(e.fieldMask)};else{if(!(e instanceof OE))return Ne(16599,{Vt:e.type});n={verify:eh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const p=d.transform;if(p instanceof Wd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ac)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Nc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Jd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ne(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:FR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ne(27497)})(r,e.precondition)),n}function YR(r,e){return r&&r.length>0?(Xe(e!==void 0,14353),r.map((n=>(function(o,c){let d=o.updateTime?Qn(o.updateTime):Qn(c);return d.isEqual(Ie.min())&&(d=Qn(c)),new jR(d,o.transformResults||[])})(n,e)))):[]}function $R(r,e){return{documents:[zE(r,e.path)]}}function XR(r,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zE(r,o);const c=(function(y){if(y.length!==0)return FE(Ns.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:jo(T.field),direction:ZR(T.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=cp(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function WR(r){let e=GR(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Xe(i===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(E){const T=HE(E);return T instanceof Ns&&gE(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((T=>(function(z){return new Xd(Do(z.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,Lc(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(E){const T=!!E.before,k=E.values||[];return new $d(k,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const T=!E.before,k=E.values||[];return new $d(k,T)})(n.endAt)),vR(e,o,d,c,p,"F",g,y)}function JR(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HE(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Do(n.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(n.unaryFilter.field);return qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Do(n.unaryFilter.field);return qt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Do(n.unaryFilter.field);return qt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(r):r.fieldFilter!==void 0?(function(n){return qt.create(Do(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ns.create(n.compositeFilter.filters.map((i=>HE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(r):Ne(30097,{filter:r})}function ZR(r){return zR[r]}function eI(r){return BR[r]}function tI(r){return qR[r]}function jo(r){return{fieldPath:r.canonicalString()}}function Do(r){return un.fromServerFormat(r.fieldPath)}function FE(r){return r instanceof qt?(function(n){if(n.op==="=="){if(Z_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(J_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(J_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:eI(n.op),value:n.value}}})(r):r instanceof Ns?(function(n){const i=n.getFilters().map((o=>FE(o)));return i.length===1?i[0]:{compositeFilter:{op:tI(n.op),filters:i}}})(r):Ne(54877,{filter:r})}function nI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function GE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,i,o,c=Ie.min(),d=Ie.min(),p=dn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.yt=e}}function rI(r){const e=WR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Cn=new aI}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Oi.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class aI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Qt(dt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Qt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QE=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(QE,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Go(0)}static cr(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="LruGarbageCollector",oI=1048576;function px([r,e],[n,i]){const o=Fe(r,n);return o===0?Fe(e,i):o}class lI{constructor(e){this.Ir=e,this.buffer=new Qt(px),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();px(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(mx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?pe(mx,"Ignoring IndexedDB error during garbage collection: ",n):await Zo(n)}await this.Vr(3e5)}))}}class uI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(mh.ce);const i=new lI(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(fx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,c,d,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,n)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Ro()<=He.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function dI(r,e){return new uI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&gc(i.mutation,o,Gn.empty(),gt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ge()){const o=Na();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let d=cc();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Na();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ge())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,o){let c=Lr();const d=pc(),p=(function(){return pc()})();return n.forEach(((g,y)=>{const b=i.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof qi)?c=c.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),gc(b.mutation,y,b.mutation.getFieldMask(),gt.now())):d.set(y.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>p.set(y,new fI(b,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=pc();let o=new Et(((d,p)=>d-p)),c=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=i.get(g)||Gn.empty();b=p.applyToLocalView(y,b),i.set(g,b);const E=(o.get(p.batchId)||Ge()).add(g);o=o.insert(p.batchId,E)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,E=SE();b.forEach((T=>{if(!c.has(T)){const k=jE(n.get(T),i.get(T));k!==null&&E.set(T,k),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return se.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):se.resolve(Na());let p=Ec,g=c;return d.next((y=>se.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),c.get(b)?se.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ge()))).next((b=>({batchId:p,changes:TE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((i=>{let o=cc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let d=cc();return this.indexManager.getCollectionParents(e,c).next((p=>se.forEach(p,(g=>{const y=(function(E,T){return new Pc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((b=>{b.forEach(((E,T)=>{d=d.insert(E,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((d=>{c.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,Zt.newInvalidDocument(b)))}));let p=cc();return d.forEach(((g,y)=>{const b=c.get(g);b!==void 0&&gc(b.mutation,y,Gn.empty(),gt.now()),yh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Qn(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:rI(o.bundledQuery),readTime:Qn(o.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.overlays=new Et(Te.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Na();return se.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.St(e,n,c)})),se.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const o=Na(),c=n.length+1,d=new Te(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new Et(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=c.get(y.largestBatchId);b===null&&(b=Na(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Na(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return se.resolve(p)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new VR(n,i));let c=this.qr.get(n);c===void 0&&(c=Ge(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.Qr=new Qt(Jt.$r),this.Ur=new Qt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Jt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Jt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Te(new dt([])),i=new Jt(n,e),o=new Jt(n,e+1),c=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new dt([])),i=new Jt(n,e),o=new Jt(n,e+1);let c=Ge();return this.Ur.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Jt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(Jt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new MR(c,n,i,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new Jt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?qp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Jt(n,0),o=new Jt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(d=>{const p=this.Xr(d.Yr);c.push(p)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Qt(Fe);return n.forEach((o=>{const c=new Jt(o,0),d=new Jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{i=i.add(p.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Te.isDocumentKey(c)||(c=c.child(""));const d=new Jt(new Te(c),0);let p=new Qt(Fe);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),d),se.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(n.mutations,(o=>{const c=new Jt(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Jt(n,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.ri=e,this.docs=(function(){return new Et(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let i=Lr();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():Zt.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=Lr();const d=n.path,p=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||XC($C(b),i)<=0||(o.has(b.key)||yh(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Ne(9500)}ii(e,n){return se.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new xI(this)}getSize(e){return se.resolve(this.size)}}class xI extends hI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.persistence=e,this.si=new ka((n=>Gp(n)),Qp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Jp,this.targetCount=0,this.ai=Go.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),se.waitFor(c).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.ui={},this.overlays={},this.ci=new mh(0),this.li=!1,this.li=!0,this.hi=new yI,this.referenceDelegate=e(this),this.Pi=new bI(this),this.indexManager=new iI,this.remoteDocumentCache=(function(o){return new _I(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new sI(n),this.Ii=new pI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new vI(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){pe("MemoryPersistence","Starting transaction:",e);const o=new EI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class EI extends JC{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Jp,this.Vi=null}static mi(e){return new Zp(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class th{constructor(e,n){this.persistence=e,this.pi=new ka((i=>tR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=dI(this,n)}static mi(e,n){return new th(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?se.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((p=>{p||(i++,c.removeEntry(d,Ie.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dd(e.data.value)),n}br(e,n,i){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Ge(),o=Ge();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new eg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nA()?8:ZC(pn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new wI;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(Ro()<=He.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Ro()<=He.DEBUG&&pe("QueryEngine","Query:",Io(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ro()<=He.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):se.resolve())}ys(e,n){if(sx(n))return se.resolve(null);let i=tr(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=lp(n,null,"F"),i=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Ge(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,lp(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,i,o){return sx(n)||o.isEqual(Ie.min())?se.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,i,o)?se.resolve(null):(Ro()<=He.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(n)),this.vs(e,d,n,YC(o,Ec)).next((p=>p)))}))}Ds(e,n){let i=new Qt(EE(e));return n.forEach(((o,c)=>{yh(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return Ro()<=He.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Io(n)),this.ps.getDocumentsMatchingQuery(e,n,Oi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",SI=3e8;class AI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Et(Fe),this.xs=new ka((c=>Gp(c)),Qp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function NI(r,e,n,i){return new AI(r,e,n,i)}async function YE(r,e){const n=Oe(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],p=[];let g=Ge();for(const y of o){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of c){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function CI(r,e){const n=Oe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const E=y.batch,T=E.keys();let k=se.resolve();return T.forEach((z=>{k=k.next((()=>b.getEntry(g,z))).next((B=>{const P=y.docVersions.get(z);Xe(P!==null,48541),B.version.compareTo(P)<0&&(E.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),b.addEntry(B)))}))})),k.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ge();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function $E(r){const e=Oe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function RI(r,e){const n=Oe(r),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((b,E)=>{const T=o.get(E);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,E))));let k=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?k=k.withResumeToken(dn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,i)),o=o.insert(E,k),(function(B,P,te){return B.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=SI?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(T,k,b)&&p.push(n.Pi.updateTargetData(c,k))}));let g=Lr(),y=Ge();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(II(c,d,e.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!i.isEqual(Ie.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((E=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(b)}return se.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function II(r,e,n){let i=Ge(),o=Ge();return n.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=Lr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):pe(tg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function jI(r,e){const n=Oe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function DI(r,e){const n=Oe(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((c=>c?(o=c,se.resolve(o)):n.Pi.allocateTargetId(i).next((d=>(o=new Ti(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function hp(r,e,n){const i=Oe(r),o=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!el(d))throw d;pe(tg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function gx(r,e,n){const i=Oe(r);let o=Ie.min(),c=Ge();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const E=Oe(g),T=E.xs.get(b);return T!==void 0?se.resolve(E.Ms.get(T)):E.Pi.getTargetData(y,b)})(i,d,tr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?o:Ie.min(),n?c:Ge()))).next((p=>(OI(i,xR(e),p),{documents:p,Qs:c})))))}function OI(r,e,n){let i=r.Os.get(e)||Ie.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Os.set(e,i)}class yx{constructor(){this.activeTargetIds=AR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MI{constructor(){this.Mo=new yx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="ConnectivityMonitor";class _x{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(vx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(vx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd=null;function fp(){return bd===null?bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():bd++,"0x"+bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",kI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Kd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,c){const d=fp(),p=this.zo(e,n.toUriEncodedString());pe(zm,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),b=$o(y);return this.Jo(e,p,g,i,b).then((E=>(pe(zm,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Bo(zm,`RPC '${e}' ${d} failed with error: `,E,"url: ",p,"request:",i),E}))}Ho(e,n,i,o,c,d){return this.Go(e,n,i,o,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const i=kI[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class UI extends LI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const d=fp();return new Promise(((p,g)=>{const y=new $b;y.setWithCredentials(!0),y.listenOnce(Xb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case jd.NO_ERROR:const E=y.getResponseJson();pe(fn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),p(E);break;case jd.TIMEOUT:pe(fn,`RPC '${e}' ${d} timed out`),g(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case jd.HTTP_ERROR:const T=y.getStatus();if(pe(fn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k==null?void 0:k.error;if(z&&z.status&&z.message){const B=(function(te){const re=te.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(re)>=0?re:J.UNKNOWN})(z.status);g(new de(B,z.message))}else g(new de(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new de(J.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{pe(fn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);pe(fn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",b,i,15)}))}T_(e,n,i){const o=fp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Zb(),p=Jb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const b=c.join("");pe(fn,`Creating RPC '${e}' stream ${o}: ${b}`,g);const E=d.createWebChannel(b,g);this.I_(E);let T=!1,k=!1;const z=new PI({Yo:P=>{k?pe(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(T||(pe(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),pe(fn,`RPC '${e}' stream ${o} sending:`,P),E.send(P))},Zo:()=>E.close()}),B=(P,te,re)=>{P.listen(te,(Z=>{try{re(Z)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return B(E,lc.EventType.OPEN,(()=>{k||(pe(fn,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),B(E,lc.EventType.CLOSE,(()=>{k||(k=!0,pe(fn,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(E))})),B(E,lc.EventType.ERROR,(P=>{k||(k=!0,Bo(fn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),z.a_(new de(J.UNAVAILABLE,"The operation could not be completed")))})),B(E,lc.EventType.MESSAGE,(P=>{var te;if(!k){const re=P.data[0];Xe(!!re,16349);const Z=re,fe=(Z==null?void 0:Z.error)||((te=Z[0])==null?void 0:te.error);if(fe){pe(fn,`RPC '${e}' stream ${o} received error:`,fe);const ae=fe.status;let ue=(function(I){const V=Bt[I];if(V!==void 0)return VE(V)})(ae),R=fe.message;ue===void 0&&(ue=J.INTERNAL,R="Unknown error status: "+ae+" with message "+fe.message),k=!0,z.a_(new de(ue,R)),E.close()}else pe(fn,`RPC '${e}' stream ${o} received:`,re),z.u_(re)}})),B(p,Wb.STAT_EVENT,(P=>{P.stat===tp.PROXY?pe(fn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===tp.NOPROXY&&pe(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(r){return new HR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="PersistentStream";class XE{constructor(e,n,i,o,c,d,p,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ng(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(xx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(pe(xx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zI extends XE{constructor(e,n,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=KR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ie.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ie.min():d.readTime?Qn(d.readTime):Ie.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=dp(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=ap(g)?{documents:$R(c,g)}:{query:XR(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=PE(c,d.resumeToken);const y=cp(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ie.min())>0){p.readTime=Zd(c,d.snapshotVersion.toTimestamp());const y=cp(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=JR(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=dp(this.serializer),n.removeTarget=e,this.q_(n)}}class BI extends XE{constructor(e,n,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YR(e.writeResults,e.commitTime),i=Qn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=dp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>qE(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{}class HI extends qI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,up(n,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(J.UNKNOWN,c.toString())}))}Ho(e,n,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,up(n,i),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new de(J.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kr(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class GI{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{La(this)&&(pe(Da,"Restarting streams for network reachability change."),await(async function(g){const y=Oe(g);y.Ea.add(4),await qc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Eh(y)})(this))}))})),this.Ra=new FI(i,o)}}async function Eh(r){if(La(r))for(const e of r.da)await e(!0)}async function qc(r){for(const e of r.da)await e(!1)}function WE(r,e){const n=Oe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ag(n)?ig(n):tl(n).O_()&&rg(n,e))}function sg(r,e){const n=Oe(r),i=tl(n);n.Ia.delete(e),i.O_()&&JE(n,e),n.Ia.size===0&&(i.O_()?i.L_():La(n)&&n.Ra.set("Unknown"))}function rg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(r).Y_(e)}function JE(r,e){r.Va.Ue(e),tl(r).Z_(e)}function ig(r){r.Va=new UR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),tl(r).start(),r.Ra.ua()}function ag(r){return La(r)&&!tl(r).x_()&&r.Ia.size>0}function La(r){return Oe(r).Ea.size===0}function ZE(r){r.Va=void 0}async function QI(r){r.Ra.set("Online")}async function KI(r){r.Ia.forEach(((e,n)=>{rg(r,e)}))}async function YI(r,e){ZE(r),ag(r)?(r.Ra.ha(e),ig(r)):r.Ra.set("Unknown")}async function $I(r,e,n){if(r.Ra.set("Online"),e instanceof LE&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){pe(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await nh(r,i)}else if(e instanceof Vd?r.Va.Ze(e):e instanceof kE?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ie.min()))try{const i=await $E(r.localStore);n.compareTo(i)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(dn.EMPTY_BYTE_STRING,b.snapshotVersion)),JE(c,g);const E=new Ti(b.target,g,y,b.sequenceNumber);rg(c,E)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(i){pe(Da,"Failed to raise snapshot:",i),await nh(r,i)}}async function nh(r,e,n){if(!el(e))throw e;r.Ea.add(1),await qc(r),r.Ra.set("Offline"),n||(n=()=>$E(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(Da,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Eh(r)}))}function ew(r,e){return e().catch((n=>nh(r,n,e)))}async function wh(r){const e=Oe(r),n=Li(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qp;for(;XI(e);)try{const o=await jI(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,WI(e,o)}catch(o){await nh(e,o)}tw(e)&&nw(e)}function XI(r){return La(r)&&r.Ta.length<10}function WI(r,e){r.Ta.push(e);const n=Li(r);n.O_()&&n.X_&&n.ea(e.mutations)}function tw(r){return La(r)&&!Li(r).x_()&&r.Ta.length>0}function nw(r){Li(r).start()}async function JI(r){Li(r).ra()}async function ZI(r){const e=Li(r);for(const n of r.Ta)e.ea(n.mutations)}async function ej(r,e,n){const i=r.Ta.shift(),o=$p.from(i,e,n);await ew(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await wh(r)}async function tj(r,e){e&&Li(r).X_&&await(async function(i,o){if((function(d){return ME(d)&&d!==J.ABORTED})(o.code)){const c=i.Ta.shift();Li(i).B_(),await ew(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await wh(i)}})(r,e),tw(r)&&nw(r)}async function bx(r,e){const n=Oe(r);n.asyncQueue.verifyOperationInProgress(),pe(Da,"RemoteStore received new credentials");const i=La(n);n.Ea.add(3),await qc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Eh(n)}async function nj(r,e){const n=Oe(r);e?(n.Ea.delete(2),await Eh(n)):e||(n.Ea.add(2),await qc(n),n.Ra.set("Unknown"))}function tl(r){return r.ma||(r.ma=(function(n,i,o){const c=Oe(n);return c.sa(),new zI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:QI.bind(null,r),t_:KI.bind(null,r),r_:YI.bind(null,r),H_:$I.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ag(r)?ig(r):r.Ra.set("Unknown")):(await r.ma.stop(),ZE(r))}))),r.ma}function Li(r){return r.fa||(r.fa=(function(n,i,o){const c=Oe(n);return c.sa(),new BI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:JI.bind(null,r),r_:tj.bind(null,r),ta:ZI.bind(null,r),na:ej.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await wh(r)):(await r.fa.stop(),r.Ta.length>0&&(pe(Da,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const d=Date.now()+i,p=new og(e,n,d,o,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lg(r,e){if(kr("AsyncQueue",`${e}: ${r}`),el(r))return new de(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=cc(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Lo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.ga=new Et(Te.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Qo{constructor(e,n,i,o,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Qo(e,n,Lo.emptySet(n),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class rj{constructor(){this.queries=wx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Oe(n),c=o.queries;o.queries=wx(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(i)}))})(this,new de(J.ABORTED,"Firestore shutting down"))}}function wx(){return new ka((r=>bE(r)),gh)}async function sw(r,e){const n=Oe(r);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new sj,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=lg(d,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&cg(n)}async function rw(r,e){const n=Oe(r),i=e.query;let o=3;const c=n.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ij(r,e){const n=Oe(r);let i=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(o)&&(i=!0);d.wa=o}}i&&cg(n)}function aj(r,e,n){const i=Oe(r),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function cg(r){r.Ca.forEach((e=>{e.next()}))}var mp,Tx;(Tx=mp||(mp={})).Ma="default",Tx.Cache="cache";class iw{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class oj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=EE(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Ex,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,E)=>{const T=o.get(b),k=yh(this.query,E)?E:null,z=!!T&&this.mutatedKeys.has(T.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let P=!1;T&&k?T.data.isEqual(k.data)?z!==B&&(i.track({type:3,doc:k}),P=!0):this.su(T,k)||(i.track({type:2,doc:k}),P=!0,(g&&this.eu(k,g)>0||y&&this.eu(k,y)<0)&&(p=!0)):!T&&k?(i.track({type:0,doc:k}),P=!0):T&&!k&&(i.track({type:1,doc:T}),P=!0,(g||y)&&(p=!0)),P&&(k?(d=d.add(k),c=B?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,E)=>(function(k,z){const B=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:P})}};return B(k)-B(z)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(i),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new Qo(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new ow(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new aw(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ug="SyncEngine";class lj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class cj{constructor(e){this.key=e,this.hu=!1}}class uj{constructor(e,n,i,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ka((p=>bE(p)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Te.comparator),this.Au=new Map,this.Ru=new Jp,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dj(r,e,n=!0){const i=fw(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await lw(i,e,n,!0),o}async function hj(r,e){const n=fw(r);await lw(n,e,!0,!1)}async function lw(r,e,n,i){const o=await DI(r.localStore,tr(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await fj(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&WE(r.remoteStore,o),p}async function fj(r,e,n,i,o){r.pu=(E,T,k)=>(async function(B,P,te,re){let Z=P.view.ru(te);Z.Cs&&(Z=await gx(B.localStore,P.query,!1).then((({documents:R})=>P.view.ru(R,Z))));const fe=re&&re.targetChanges.get(P.targetId),ae=re&&re.targetMismatches.get(P.targetId)!=null,ue=P.view.applyChanges(Z,B.isPrimaryClient,fe,ae);return Ax(B,P.targetId,ue.au),ue.snapshot})(r,E,T,k);const c=await gx(r.localStore,e,!0),d=new oj(e,c.Qs),p=d.ru(c.documents),g=Bc.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",o),y=d.applyChanges(p,r.isPrimaryClient,g);Ax(r,n,y.au);const b=new lj(e,n,d);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function mj(r,e,n){const i=Oe(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((d=>!gh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&sg(i.remoteStore,o.targetId),pp(i,o.targetId)})).catch(Zo)):(pp(i,o.targetId),await hp(i.localStore,o.targetId,!0))}async function pj(r,e){const n=Oe(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sg(n.remoteStore,i.targetId))}async function gj(r,e,n){const i=wj(r);try{const o=await(function(d,p){const g=Oe(d),y=gt.now(),b=p.reduce(((k,z)=>k.add(z.key)),Ge());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let z=Lr(),B=Ge();return g.Ns.getEntries(k,b).next((P=>{z=P,z.forEach(((te,re)=>{re.isValidDocument()||(B=B.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,z))).next((P=>{E=P;const te=[];for(const re of p){const Z=OR(re,E.get(re.key).overlayedDocument);Z!=null&&te.push(new qi(re.key,Z,fE(Z.value.mapValue),Ht.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,te,p)})).next((P=>{T=P;const te=P.applyToLocalDocumentSet(E,B);return g.documentOverlayCache.saveOverlays(k,P.batchId,te)}))})).then((()=>({batchId:T.batchId,changes:TE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new Et(Fe)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(i,o.batchId,n),await Hc(i,o.changes),await wh(i.remoteStore)}catch(o){const c=lg(o,"Failed to persist write");n.reject(c)}}async function cw(r,e){const n=Oe(r);try{const i=await RI(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Xe(d.hu,14607):o.removedDocuments.size>0&&(Xe(d.hu,42227),d.hu=!1))})),await Hc(n,i,e)}catch(i){await Zo(i)}}function Sx(r,e,n){const i=Oe(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Oe(d);g.onlineState=p;let y=!1;g.queries.forEach(((b,E)=>{for(const T of E.Sa)T.va(p)&&(y=!0)})),y&&cg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function yj(r,e,n){const i=Oe(r);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),c=o&&o.key;if(c){let d=new Et(Te.comparator);d=d.insert(c,Zt.newNoDocument(c,Ie.min()));const p=Ge().add(c),g=new xh(Ie.min(),new Map,new Et(Fe),d,p);await cw(i,g),i.du=i.du.remove(c),i.Au.delete(e),dg(i)}else await hp(i.localStore,e,!1).then((()=>pp(i,e,n))).catch(Zo)}async function vj(r,e){const n=Oe(r),i=e.batch.batchId;try{const o=await CI(n.localStore,e);dw(n,i,null),uw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Hc(n,o)}catch(o){await Zo(o)}}async function _j(r,e,n){const i=Oe(r);try{const o=await(function(d,p){const g=Oe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((E=>(Xe(E!==null,37113),b=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);dw(i,e,n),uw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Hc(i,o)}catch(o){await Zo(o)}}function uw(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function dw(r,e,n){const i=Oe(r);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function pp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),n&&r.Pu.yu(i,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||hw(r,i)}))}function hw(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(sg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),dg(r))}function Ax(r,e,n){for(const i of n)i instanceof aw?(r.Ru.addReference(i.key,e),xj(r,i)):i instanceof ow?(pe(ug,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||hw(r,i.key)):Ne(19791,{wu:i})}function xj(r,e){const n=e.key,i=n.path.canonicalString();r.du.get(n)||r.Eu.has(i)||(pe(ug,"New document in limbo: "+n),r.Eu.add(i),dg(r))}function dg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Te(dt.fromString(e)),i=r.fu.next();r.Au.set(i,new cj(n)),r.du=r.du.insert(n,i),WE(r.remoteStore,new Ti(tr(Kp(n.path)),i,"TargetPurposeLimboResolution",mh.ce))}}async function Hc(r,e,n){const i=Oe(r),o=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,n).then((y=>{var b;if((y||n)&&i.isPrimaryClient){const E=y?!y.fromCache:(b=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:b.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=eg.As(g.targetId,y);c.push(E)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,y){const b=Oe(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(y,(T=>se.forEach(T.Es,(k=>b.persistence.referenceDelegate.addReference(E,T.targetId,k))).next((()=>se.forEach(T.ds,(k=>b.persistence.referenceDelegate.removeReference(E,T.targetId,k)))))))))}catch(E){if(!el(E))throw E;pe(tg,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const k=b.Ms.get(T),z=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(z);b.Ms=b.Ms.insert(T,B)}}})(i.localStore,c))}async function bj(r,e){const n=Oe(r);if(!n.currentUser.isEqual(e)){pe(ug,"User change. New user:",e.toKey());const i=await YE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new de(J.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hc(n,i.Ls)}}function Ej(r,e){const n=Oe(r),i=n.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let o=Ge();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function fw(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yj.bind(null,e),e.Pu.H_=ij.bind(null,e.eventManager),e.Pu.yu=aj.bind(null,e.eventManager),e}function wj(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_j.bind(null,e),e}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NI(this.persistence,new TI,e.initialUser,this.serializer)}Cu(e){return new KE(Zp.mi,this.serializer)}Du(e){return new MI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class Tj extends sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof th,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cI(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new KE((i=>th.mi(i,n)),this.serializer)}}class gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Sx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bj.bind(null,this.syncEngine),await nj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rj})()}createDatastore(e){const n=bh(e.databaseInfo.databaseId),i=(function(c){return new UI(c)})(e.databaseInfo);return(function(c,d,p,g){return new HI(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,d,p){return new GI(i,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Sx(this.syncEngine,n,0)),(function(){return _x.v()?new _x:new VI})())}createSyncEngine(e,n){return(function(o,c,d,p,g,y,b){const E=new uj(o,c,d,p,g,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Oe(o);pe(Da,"RemoteStore shutting down."),c.Ea.add(5),await qc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gp.provider={build:()=>new gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const d=Oe(o),p={documents:c.map((E=>eh(d.serializer,E)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,dt.emptyPath(),p,c.length),y=new Map;g.forEach((E=>{const T=QR(d.serializer,E);y.set(T.key.toString(),T)}));const b=[];return c.forEach((E=>{const T=y.get(E.toString());Xe(!!T,55234,{key:E}),b.push(T)})),b})(this.datastore,e);return n.forEach((i=>this.recordVersion(i))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new zc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,i)=>{const o=Te.fromPath(i);this.mutations.push(new OE(o,this.precondition(o)))})),await(async function(i,o){const c=Oe(i),d={writes:o.map((p=>qE(c.serializer,p)))};await c.Go("Commit",c.serializer.databaseId,dt.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Gu:e.constructor.name});n=Ie.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new de(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ie.min())?Ht.exists(!1):Ht.updateTime(n):Ht.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ie.min()))throw new de(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ht.updateTime(n)}return Ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,i,o,c){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new ng(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Sj(this.datastore),n=this.Hu(e);n&&n.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Lc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ME(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="FirestoreClient";class Nj{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{pe(Pi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(pe(Pi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=lg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function qm(r,e){r.asyncQueue.verifyOperationInProgress(),pe(Pi,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await YE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Nx(r,e){r.asyncQueue.verifyOperationInProgress();const n=await Cj(r);pe(Pi,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>bx(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>bx(e.remoteStore,o))),r._onlineComponents=e}async function Cj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(Pi,"Using user provided OfflineComponentProvider");try{await qm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await qm(r,new sh)}}else pe(Pi,"Using default OfflineComponentProvider"),await qm(r,new Tj(void 0));return r._offlineComponents}async function hg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(Pi,"Using user provided OnlineComponentProvider"),await Nx(r,r._uninitializedComponentsProvider._online)):(pe(Pi,"Using default OnlineComponentProvider"),await Nx(r,new gp))),r._onlineComponents}function Rj(r){return hg(r).then((e=>e.syncEngine))}function Ij(r){return hg(r).then((e=>e.datastore))}async function pw(r){const e=await hg(r),n=e.eventManager;return n.onListen=dj.bind(null,e.syncEngine),n.onUnlisten=mj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pj.bind(null,e.syncEngine),n}function jj(r,e,n={}){const i=new er;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const b=new mw({next:T=>{b.Nu(),d.enqueueAndForget((()=>rw(c,E)));const k=T.docs.has(p);!k&&T.fromCache?y.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&g&&g.source==="server"?y.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new iw(Kp(p.path),b,{includeMetadataChanges:!0,qa:!0});return sw(c,E)})(await pw(r),r.asyncQueue,e,n,i))),i.promise}function Dj(r,e,n={}){const i=new er;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const b=new mw({next:T=>{b.Nu(),d.enqueueAndForget((()=>rw(c,E))),T.fromCache&&g.source==="server"?y.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new iw(p,b,{includeMetadataChanges:!0,qa:!0});return sw(c,E)})(await pw(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firestore.googleapis.com",Rx=!0;class Ix{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yw,this.ssl=Rx}else this.host=e.host,this.ssl=e.ssl??Rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oI)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ix(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LC;switch(i.type){case"firstParty":return new BC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Cx.get(n);i&&(pe("ComponentProvider","Removing Datastore"),Cx.delete(n),i.terminate())})(this),Promise.resolve()}}function Oj(r,e,n,i={}){var y;r=Yn(r,Th);const o=$o(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;o&&(lb(`https://${p}`),cb("Firestore",!0)),c.host!==yw&&c.host!==p&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:i};if(!Ca(g,d)&&(r._setSettings(g),i.mockUserToken)){let b,E;if(typeof i.mockUserToken=="string")b=i.mockUserToken,E=mn.MOCK_USER;else{b=KS(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new mn(T)}r._authCredentials=new PC(new tE(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class Nt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(kc(n,Nt._jsonSchema))return new Nt(e,i||null,new Te(dt.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Ft("string",Nt._jsonSchemaVersion),referencePath:Ft("string")};class ji extends nl{constructor(e,n,i){super(e,n,Kp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Te(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function In(r,e,...n){if(r=Ot(r),nE("collection","path",e),r instanceof Th){const i=dt.fromString(e,...n);return H_(i),new ji(r,null,i)}{if(!(r instanceof Nt||r instanceof ji))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...n));return H_(i),new ji(r.firestore,null,i)}}function Wt(r,e,...n){if(r=Ot(r),arguments.length===1&&(e=Bp.newId()),nE("doc","path",e),r instanceof Th){const i=dt.fromString(e,...n);return q_(i),new Nt(r,null,new Te(i))}{if(!(r instanceof Nt||r instanceof ji))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...n));return q_(i),new Nt(r.firestore,r instanceof ji?r.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="AsyncQueue";class Dx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ng(this,"async_queue_retry"),this._c=()=>{const i=Bm();i&&pe(jx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;pe(jx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,kr("INTERNAL UNHANDLED ERROR: ",Ox(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=og.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:Ox(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ox(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class zr extends Th{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Dx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dx(e),this._firestoreClient=void 0,await e}}}function Mj(r,e){const n=typeof r=="object"?r:fb(),i=typeof r=="string"?r:Kd,o=Rp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=GS("firestore");c&&Oj(o,...c)}return o}function Fc(r){if(r._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Vj(r),r._firestoreClient}function Vj(r){var i,o,c;const e=r._freezeSettings(),n=(function(p,g,y,b){return new rR(p,g,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,gw(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Nj(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(dn.fromBase64String(e))}catch(n){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Ft("string",Fn._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nr._jsonSchemaVersion}}static fromJSON(e){if(kc(e,nr._jsonSchema))return new nr(e.latitude,e.longitude)}}nr._jsonSchemaVersion="firestore/geoPoint/1.0",nr._jsonSchema={type:Ft("string",nr._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kc(e,sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new sr(e.vectorValues);throw new de(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sr._jsonSchemaVersion="firestore/vectorValue/1.0",sr._jsonSchema={type:Ft("string",sr._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=/^__.*__$/;class Lj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uc(e,this.data,n,this.fieldTransforms)}}class vw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _w(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:r})}}class mg{constructor(e,n,i,o,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_w(this.Ac)&&kj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Pj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||bh(e)}Cc(e,n,i,o=!1){return new mg({Ac:e,methodName:n,Dc:i,path:un.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rl(r){const e=r._freezeSettings(),n=bh(r._databaseId);return new Pj(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Sh(r,e,n,i,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);yg("Data must be an object, but it was:",d,i);const p=xw(i,d);let g,y;if(c.merge)g=new Gn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const E of c.mergeFields){const T=yp(e,E,n);if(!d.contains(T))throw new de(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Ew(b,T)||b.push(T)}g=new Gn(b),y=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=d.fieldTransforms;return new Lj(new vn(p),g,y)}class Ah extends fg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ah}}function pg(r,e,n,i){const o=r.Cc(1,e,n);yg("Data must be an object, but it was:",o,i);const c=[],d=vn.empty();Bi(i,((g,y)=>{const b=vg(e,g,n);y=Ot(y);const E=o.yc(b);if(y instanceof Ah)c.push(b);else{const T=Gc(y,E);T!=null&&(c.push(b),d.set(b,T))}}));const p=new Gn(c);return new vw(d,p,o.fieldTransforms)}function gg(r,e,n,i,o,c){const d=r.Cc(1,e,n),p=[yp(e,i,n)],g=[o];if(c.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(yp(e,c[T])),g.push(c[T+1]);const y=[],b=vn.empty();for(let T=p.length-1;T>=0;--T)if(!Ew(y,p[T])){const k=p[T];let z=g[T];z=Ot(z);const B=d.yc(k);if(z instanceof Ah)y.push(k);else{const P=Gc(z,B);P!=null&&(y.push(k),b.set(k,P))}}const E=new Gn(y);return new vw(b,E,d.fieldTransforms)}function Uj(r,e,n,i=!1){return Gc(n,r.Cc(i?4:3,e))}function Gc(r,e){if(bw(r=Ot(r)))return yg("Unsupported field value:",e,r),xw(r,e);if(r instanceof fg)return(function(i,o){if(!_w(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const p of i){let g=Gc(p,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return NR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=gt.fromDate(i);return{timestampValue:Zd(o.serializer,c)}}if(i instanceof gt){const c=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Zd(o.serializer,c)}}if(i instanceof nr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:PE(o.serializer,i._byteString)};if(i instanceof Nt){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Wp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof sr)return(function(d,p){return{mapValue:{fields:{[dE]:{stringValue:hE},[Yd]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Yp(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${fh(i)}`)})(r,e)}function xw(r,e){const n={};return iE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bi(r,((i,o)=>{const c=Gc(o,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function bw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof nr||r instanceof Fn||r instanceof Nt||r instanceof fg||r instanceof sr)}function yg(r,e,n){if(!bw(n)||!sE(n)){const i=fh(n);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function yp(r,e,n){if((e=Ot(e))instanceof sl)return e._internalPath;if(typeof e=="string")return vg(r,e);throw rh("Field path arguments must be of type string or ",r,!1,void 0,n)}const zj=new RegExp("[~\\*/\\[\\]]");function vg(r,e,n){if(e.search(zj)>=0)throw rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new sl(...e.split("."))._internalPath}catch{throw rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function rh(r,e,n,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new de(J.INVALID_ARGUMENT,p+r+g)}function Ew(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bj extends ih{data(){return super.data()}}function _g(r,e){return typeof e=="string"?vg(r,e):e instanceof sl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class Hj extends xg{}function Ta(r,e,...n){let i=[];e instanceof xg&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((g=>g instanceof bg)).length,p=c.filter((g=>g instanceof Nh)).length;if(d>1||d>0&&p>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Nh extends Hj{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Nh(e,n,i)}_apply(e){const n=this._parse(e);return ww(e._query,n),new nl(e.firestore,e.converter,op(e._query,n))}_parse(e){const n=rl(e.firestore);return(function(c,d,p,g,y,b,E){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Vx(E,b);const z=[];for(const B of E)z.push(Mx(g,c,B));T={arrayValue:{values:z}}}else T=Mx(g,c,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Vx(E,b),T=Uj(p,d,E,b==="in"||b==="not-in");return qt.create(y,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ar(r,e,n){const i=e,o=_g("where",r);return Nh._create(o,i,n)}class bg extends xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const g of p)ww(d,g),d=op(d,g)})(e._query,n),new nl(e.firestore,e.converter,op(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Mx(r,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xE(e)&&n.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(dt.fromString(n));if(!Te.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return W_(r,new Te(i))}if(n instanceof Nt)return W_(r,n._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fh(n)}.`)}function Vx(r,e){if(!Array.isArray(r)||r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ww(r,e){const n=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Tw{convertValue(e,n="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Bi(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){var i,o,c;const n=(c=(o=(i=e.fields)==null?void 0:i[Yd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>Dt(d.doubleValue)));return new sr(n)}convertGeoPoint(e){return new nr(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ph(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=dt.fromString(e);Xe(GE(i),9688,{name:e});const o=new Tc(i.get(1),i.get(3)),c=new Te(i.popFirst(5));return o.isEqual(n)||kr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(r,e,n){let i;return i=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,i}class Fj extends Tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}class Oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends ih{constructor(e,n,i,o,c,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_g("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:Ft("string",Di._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class kd extends Di{data(e={}){return super.data(e)}}class Po{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Oo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new kd(this._firestore,this._userDataWriter,i.key,i,new Oo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new kd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Oo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new kd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Oo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:Gj(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Gj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(r){r=Yn(r,Nt);const e=Yn(r.firestore,zr);return jj(Fc(e),r._key).then((n=>Kj(e,r,n)))}Po._jsonSchemaVersion="firestore/querySnapshot/1.0",Po._jsonSchema={type:Ft("string",Po._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Eg extends Tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Ws(r){r=Yn(r,nl);const e=Yn(r.firestore,zr),n=Fc(e),i=new Eg(e);return qj(r._query),Dj(n,r._query).then((o=>new Po(e,i,r,o)))}function Qj(r,e,n){r=Yn(r,Nt);const i=Yn(r.firestore,zr),o=Ch(r.converter,e,n);return Qc(i,[Sh(rl(i),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Ht.none())])}function wd(r,e,n,...i){r=Yn(r,Nt);const o=Yn(r.firestore,zr),c=rl(o);let d;return d=typeof(e=Ot(e))=="string"||e instanceof sl?gg(c,"updateDoc",r._key,e,n,i):pg(c,"updateDoc",r._key,e),Qc(o,[d.toMutation(r._key,Ht.exists(!0))])}function kx(r){return Qc(Yn(r.firestore,zr),[new zc(r._key,Ht.none())])}function Hm(r,e){const n=Yn(r.firestore,zr),i=Wt(r),o=Ch(r.converter,e);return Qc(n,[Sh(rl(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Ht.exists(!1))]).then((()=>i))}function Qc(r,e){return(function(i,o){const c=new er;return i.asyncQueue.enqueueAndForget((async()=>gj(await Rj(i),o,c))),c.promise})(Fc(r),e)}function Kj(r,e,n){const i=n.docs.get(e._key),o=new Eg(r);return new Di(r,o,e._key,i,new Oo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rl(e)}set(e,n,i){this._verifyNotCommitted();const o=Si(e,this._firestore),c=Ch(o.converter,n,i),d=Sh(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,i);return this._mutations.push(d.toMutation(o._key,Ht.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const c=Si(e,this._firestore);let d;return d=typeof(n=Ot(n))=="string"||n instanceof sl?gg(this._dataReader,"WriteBatch.update",c._key,n,i,o):pg(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Si(e,this._firestore);return this._mutations=this._mutations.concat(new zc(n._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Si(r,e){if((r=Ot(r)).firestore!==e)throw new de(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=rl(e)}get(e){const n=Si(e,this._firestore),i=new Fj(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ne(24041);const c=o[0];if(c.isFoundDocument())return new ih(this._firestore,i,c.key,c,n.converter);if(c.isNoDocument())return new ih(this._firestore,i,n._key,null,n.converter);throw Ne(18433,{doc:c})}))}set(e,n,i){const o=Si(e,this._firestore),c=Ch(o.converter,n,i),d=Sh(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,d),this}update(e,n,i,...o){const c=Si(e,this._firestore);let d;return d=typeof(n=Ot(n))=="string"||n instanceof sl?gg(this._dataReader,"Transaction.update",c._key,n,i,o):pg(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(e){const n=Si(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj extends Xj{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Si(e,this._firestore),i=new Eg(this._firestore);return super.get(e).then((o=>new Di(this._firestore,i,n._key,o._document,new Oo(!1,!1),n.converter)))}}function Lx(r,e,n){r=Yn(r,zr);const i={...Yj,...n};return(function(c){if(c.maxAttempts<1)throw new de(J.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,d,p){const g=new er;return c.asyncQueue.enqueueAndForget((async()=>{const y=await Ij(c);new Aj(c.asyncQueue,y,p,d,g).ju()})),g.promise})(Fc(r),(o=>e(new Wj(r,o))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(r){return Fc(r=Yn(r,zr)),new $j(r,(e=>Qc(r,e)))}(function(e,n=!0){(function(o){Jo=o})(Xo),Uo(new Ra("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),p=new zr(new UC(i.getProvider("auth-internal")),new qC(d,i.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(y.options.projectId,b)})(d,o),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ci(P_,U_,e),Ci(P_,U_,"esm2020")})();const Ux=Ap.firebase;let Fm,Cr,be;try{Ap.useFirebase&&Ux.apiKey!=="SUA_API_KEY_AQUI"?(Fm=hb(Ux),Cr=VC(Fm),be=Mj(Fm)):console.log("Firebase keys not configured or Mock mode active. Skipping Firebase Init.")}catch(r){console.error("Error initializing Firebase:",r)}class Jj{async login(e,n){if(!Cr)throw new Error("Servio de autenticao no inicializado.");if(!n)throw new Error("A senha  obrigatria.");try{const o=(await xN(Cr,e,n)).user;return this._fetchUserProfile(o)}catch(i){throw console.error("Erro no Login Firebase:",i),new Error(this.mapAuthError(i.code))}}async loginWithGoogle(){if(!Cr)throw new Error("Servio de autenticao no inicializado.");try{const e=new Rr,n=await FN(Cr,e);return this._fetchUserProfile(n.user)}catch(e){throw console.error("Erro no Login Google:",e),new Error(this.mapAuthError(e.code))}}async _fetchUserProfile(e){if(!be)throw new Error("Banco de dados no inicializado.");const n=Wt(be,"users",e.uid);let i;try{i=await Ed(n)}catch(o){if(console.error("Erro ao acessar Firestore:",o),o.code==="permission-denied")return console.warn("Permisso negada ao ler perfil. Retornando dados bsicos."),{uid:e.uid,email:e.email||"",role:xt.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(i.exists()){const o=i.data();return{uid:e.uid,email:e.email||"",name:o.name||e.displayName,role:o.role||xt.USER,rm:o.rm,courseId:o.courseId,classId:o.classId,isOnboarded:o.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:xt.USER,isOnboarded:!1}}async logout(){Cr&&await TN(Cr)}async getCurrentUser(){if(!Cr)return null;const e=await new Promise(n=>{const i=wN(Cr,o=>{i(),n(o)})});if(!e)return null;try{const n=Wt(be,"users",e.uid),i=await Ed(n);if(i.exists()){const o=i.data();return{uid:e.uid,email:e.email||"",name:o.name||e.displayName,role:o.role||xt.USER,rm:o.rm,courseId:o.courseId,classId:o.classId,isOnboarded:o.isOnboarded||!1}}}catch(n){console.warn("Perfil incompleto ou erro de rede:",n)}return{uid:e.uid,email:e.email||"",role:xt.USER,isOnboarded:!1}}async updateUserProfile(e,n){if(!be)throw new Error("Banco de dados no inicializado.");if(n.rm)try{const d=In(be,"users"),p=Ta(d,Ar("rm","==",n.rm));if((await Ws(p)).docs.find(b=>b.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(d){if(d.code!=="permission-denied")throw d;console.warn("Pulei validao de RM nico devido a permisses.")}const i=Wt(be,"users",e),o={...n,updatedAt:new Date().toISOString()};n.name&&n.rm&&(o.isOnboarded=!0);try{await Qj(i,o,{merge:!0})}catch(d){throw console.error("Erro ao atualizar perfil:",d),new Error("No foi possvel salvar seus dados. Verifique sua conexo.")}const c=await this.getCurrentUser();if(!c)throw new Error("Sesso perdida aps atualizao.");return c}async getUsers(){if(!be)return[];try{return(await Ws(In(be,"users"))).docs.map(n=>{const i=n.data();return{uid:n.id,email:i.email||"",name:i.name,role:i.role||xt.USER,rm:i.rm,courseId:i.courseId,classId:i.classId,isOnboarded:i.isOnboarded||!1}})}catch(e){if(console.error("Erro ao buscar usurios:",e),e.code==="permission-denied")return[];throw new Error("Erro ao carregar lista de usurios.")}}async deleteUser(e){be&&await kx(Wt(be,"users",e))}async updateUserRole(e,n){if(!be)return;const i=Wt(be,"users",e);await wd(i,{role:n})}async getCourses(){if(!be)return[];try{return(await Ws(In(be,"courses"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){return console.error("Erro ao buscar cursos:",e),[]}}async addCourse(e){if(!be)throw new Error("DB not init");return{id:(await Hm(In(be,"courses"),{name:e})).id,name:e}}async updateCourse(e,n){be&&await wd(Wt(be,"courses",e),{name:n})}async deleteCourse(e){if(!be)return;const n=Px(be),i=Wt(be,"courses",e);n.delete(i);const o=Ta(In(be,"classes"),Ar("courseId","==",e));(await Ws(o)).forEach(d=>n.delete(d.ref)),await n.commit()}async getClasses(e){if(!be)return[];try{let n;return e?n=Ta(In(be,"classes"),Ar("courseId","==",e)):n=In(be,"classes"),(await Ws(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){return console.error("Erro ao buscar turmas",n),[]}}async addClass(e,n){if(!be)throw new Error("DB not init");return{id:(await Hm(In(be,"classes"),{courseId:e,name:n})).id,courseId:e,name:n}}async updateClass(e,n){be&&await wd(Wt(be,"classes",e),{name:n})}async deleteClass(e){be&&await kx(Wt(be,"classes",e))}async getEvents(){if(!be)return[];try{return(await Ws(In(be,"events"))).docs.map(n=>this.mapDocToEvent(n))}catch(e){return console.error("Erro ao buscar eventos:",e),[]}}async getEventById(e){if(be)try{const n=Wt(be,"events",e),i=await Ed(n);if(i.exists())return this.mapDocToEvent(i)}catch(n){console.error("Erro ao buscar evento por ID:",n)}}async getAvailableEventsForUser(e){return(await this.getEvents()).filter(i=>{var o,c;return i.visibility==="public"?!0:i.visibility==="course"?e.courseId?(o=i.allowedCourses)==null?void 0:o.includes(e.courseId):!1:i.visibility==="class"&&e.classId?(c=i.allowedClasses)==null?void 0:c.includes(e.classId):!1})}async getPublicEvents(){if(!be)return[];try{const e=Ta(In(be,"events"),Ar("visibility","==","public"));return(await Ws(e)).docs.map(i=>this.mapDocToEvent(i))}catch(e){return console.error("Erro ao buscar eventos pblicos:",e),[]}}async createEvent(e){if(!be)return;const{id:n,...i}=e,o=JSON.parse(JSON.stringify(i));await Hm(In(be,"events"),o)}async updateEvent(e){if(!be)return;const n=Wt(be,"events",e.id),{id:i,...o}=e,c=JSON.parse(JSON.stringify(o));await wd(n,c)}async deleteEvent(e){if(!be)return;const n=Px(be);n.delete(Wt(be,"events",e));const i=Ta(In(be,"events"),Ar("parentId","==",e));(await Ws(i)).forEach(c=>n.delete(c.ref)),await n.commit()}async getEnrollmentsForUser(e){if(!be)return[];try{const n=Ta(In(be,"enrollments"),Ar("userId","==",e),Ar("status","==",Co.CONFIRMED));return(await Ws(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){return console.error("Erro ao buscar inscries:",n),[]}}async getUserEnrollmentsDetails(e){const n=await this.getEnrollmentsForUser(e),i=[];for(const o of n){const c=await this.getEventById(o.eventId);if(c){const d=c.sessions.find(p=>p.id===o.sessionId);d&&i.push({enrollmentId:o.id,eventName:c.name,eventLocation:c.location,sessionDate:d.date,sessionTime:`${d.startTime} - ${d.endTime}`,enrolledAt:o.enrolledAt})}}return i}async getEnrichedEnrollments(e){if(!be)return[];const n=Ta(In(be,"enrollments"),Ar("eventId","==",e),Ar("status","==",Co.CONFIRMED)),i=await Ws(n),o=await this.getEventById(e);if(!o)return[];const c=i.docs.map(p=>({id:p.id,...p.data()})),d=[];for(const p of c){const g=Wt(be,"users",p.userId),y=await Ed(g),b=y.exists()?y.data():{},E=o.sessions.find(T=>T.id===p.sessionId);d.push({id:p.id,user:{uid:p.userId,name:b.name||"Desconhecido",email:b.email||"",rm:b.rm||""},session:{id:E==null?void 0:E.id,date:E==null?void 0:E.date,startTime:E==null?void 0:E.startTime,endTime:E==null?void 0:E.endTime},status:p.status,enrolledAt:p.enrolledAt})}return d}async getEnrollmentDetailsForEvent(e){return(await this.getEnrichedEnrollments(e)).map(i=>({Nome:i.user.name,Email:i.user.email,RM:i.user.rm,SessaoData:i.session.date,SessaoHora:i.session.startTime,Status:i.status,DataInscricao:new Date(i.enrolledAt).toLocaleString("pt-BR")}))}async createEnrollment(e,n,i){if(!be)throw new Error("Banco de dados no inicializado.");const o=await this.getEnrollmentsForUser(e),c=await this.getEventById(n);if(!c)throw new Error("Evento no encontrado.");const d=c.sessions.find(b=>b.id===i);if(!d)throw new Error("Sesso no encontrada.");for(const b of o){const E=await this.getEventById(b.eventId);if(!E)continue;const T=E.sessions.find(k=>k.id===b.sessionId);if(T&&T.date===d.date&&(d.startTime>=T.startTime&&d.startTime<T.endTime||d.endTime>T.startTime&&d.endTime<=T.endTime||d.startTime<=T.startTime&&d.endTime>=T.endTime))throw new Error(`CONFLICT|${E.name}|${T.startTime}|${T.endTime}`)}const p=`${e}_${n}`,g=Wt(be,"enrollments",p),y=Wt(be,"events",n);try{await Lx(be,async b=>{const E=await b.get(g);if(E.exists()&&E.data().status===Co.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");const T=await b.get(y);if(!T.exists())throw new Error("Evento no existe mais.");const k=T.data(),z=k.sessions.findIndex(te=>te.id===i);if(z===-1)throw new Error("Sesso invlida.");const B=k.sessions[z];if(B.filled>=B.capacity)throw new Error("Esta sesso atingiu a capacidade mxima.");const P=[...k.sessions];P[z].filled+=1,b.update(y,{sessions:P}),b.set(g,{userId:e,eventId:n,sessionId:i,status:Co.CONFIRMED,enrolledAt:new Date().toISOString()})})}catch(b){throw b.message.includes("sesso atingiu")||b.message.includes("j est inscrito")?b:b.code==="permission-denied"||b.message.includes("Missing or insufficient permissions")?(console.error("Erro de Permisso (Firestore):",b),new Error("Erro de permisso: As regras do Firestore bloquearam a ao. Certifique-se de copiar o contedo de 'firestore.rules' para o Firebase Console > Firestore Database > Rules.")):(console.error("Erro na transao de inscrio:",b),new Error("Erro ao processar inscrio. Tente novamente."))}return{id:p,userId:e,eventId:n,sessionId:i,status:Co.CONFIRMED,enrolledAt:new Date().toISOString()}}async cancelEnrollment(e){if(!be)return;const n=Wt(be,"enrollments",e);await Lx(be,async i=>{const o=await i.get(n);if(!o.exists())throw new Error("Inscrio no encontrada.");const c=o.data(),d=Wt(be,"events",c.eventId),p=await i.get(d);if(p.exists()){const g=p.data(),y=g.sessions.findIndex(b=>b.id===c.sessionId);if(y!==-1){const b=[...g.sessions];b[y].filled=Math.max(0,b[y].filled-1),i.update(d,{sessions:b})}}i.delete(n)})}async resetAndSeedData(){console.warn("Seed disabled in Firebase."),alert("A funo de RESET est desabilitada no modo Firebase por segurana.")}mapDocToEvent(e){const n=e.data();return{id:e.id,name:n.name,description:n.description,location:n.location,visibility:n.visibility,allowedCourses:n.allowedCourses,allowedClasses:n.allowedClasses,parentId:n.parentId,createdBy:n.createdBy,createdAt:n.createdAt,sessions:n.sessions||[]}}mapAuthError(e){switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"Email ou senha incorretos. Verifique seus dados.";case"auth/invalid-email":return"O formato do email  invlido.";case"auth/user-disabled":return"Esta conta foi desativada pelo administrador.";case"auth/email-already-in-use":return"J existe uma conta cadastrada com este email.";case"auth/too-many-requests":return"Muitas tentativas falhas consecutivas. Aguarde alguns minutos e tente novamente.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/popup-closed-by-user":return"O login foi cancelado antes da concluso.";case"auth/popup-blocked":return"O navegador bloqueou a janela de login. Permita pop-ups para este site.";case"auth/operation-not-allowed":return"Este mtodo de login no est habilitado.";case"auth/unauthorized-domain":return"O domnio atual no est autorizado no Firebase. Adicione-o em Authentication > Settings > Authorized Domains no Console.";case"permission-denied":return"Voc no tem permisso para realizar esta ao.";case"unavailable":return"O servio est temporariamente indisponvel. Tente mais tarde.";default:return`Ocorreu um erro inesperado (${e}). Tente novamente.`}}}const Zj=()=>new Jj,De=Zj(),Sw=j.createContext(void 0),eD=({children:r})=>{const[e,n]=j.useState(null),[i,o]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const b=await De.getCurrentUser();n(b)}catch(b){console.error("Auth check failed",b)}finally{o(!1)}})()},[]);const c=async(y,b)=>{o(!0);try{const E=await De.login(y,b);n(E)}catch(E){throw console.error(E),E}finally{o(!1)}},d=async()=>{o(!0);try{const y=await De.loginWithGoogle();n(y)}catch(y){throw console.error(y),y}finally{o(!1)}},p=async()=>{await De.logout(),n(null)},g=async()=>{const y=await De.getCurrentUser();n(y)};return f.jsx(Sw.Provider,{value:{user:e,loading:i,login:c,loginWithGoogle:d,logout:p,refreshProfile:g},children:r})},Br=()=>{const r=j.useContext(Sw);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},xi=({children:r})=>{const{user:e,logout:n}=Br(),i=Ui(),o=Pr(),[c,d]=j.useState(!1),p=async()=>{await n(),i("/")},g=b=>o.pathname===b?"bg-indigo-50 border-primary text-primary":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700",y=b=>o.pathname===b?"border-primary text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700";return e?f.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[f.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsx(pt,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight",children:"EduEvent"})}),f.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[f.jsx(pt,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${y("/dashboard")}`,children:"Eventos"}),f.jsx(pt,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${y("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===xt.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx(pt,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${y("/admin/events")}`,children:"Admin Eventos"}),f.jsx(pt,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${y("/admin/courses")}`,children:"Admin Cursos"}),f.jsx(pt,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${y("/admin/users")}`,children:"Admin Usurios"}),f.jsx(pt,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 ${y("/admin/dev")}`,children:"Desenvolvimento"})]})]})]}),f.jsx("div",{className:"hidden sm:flex items-center",children:f.jsxs("div",{className:"flex-shrink-0",children:[f.jsxs("span",{className:"text-sm text-gray-500 mr-4",children:["Ol, ",e.name||e.email]}),f.jsx("button",{onClick:p,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none",children:"Sair"})]})}),f.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:f.jsxs("button",{onClick:()=>d(!c),type:"button",className:"bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[f.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),c?f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),c&&f.jsxs("div",{className:"sm:hidden border-t border-gray-200",id:"mobile-menu",children:[f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsx(pt,{to:"/dashboard",onClick:()=>d(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${g("/dashboard")}`,children:"Eventos"}),f.jsx(pt,{to:"/my-enrollments",onClick:()=>d(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${g("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===xt.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"pt-4 pb-2",children:f.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),f.jsx(pt,{to:"/admin/events",onClick:()=>d(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${g("/admin/events")}`,children:"Gerenciar Eventos"}),f.jsx(pt,{to:"/admin/courses",onClick:()=>d(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${g("/admin/courses")}`,children:"Gerenciar Cursos"}),f.jsx(pt,{to:"/admin/users",onClick:()=>d(!1),className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${g("/admin/users")}`,children:"Gerenciar Usurios"}),f.jsx(pt,{to:"/admin/dev",onClick:()=>d(!1),className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300",children:"Desenvolvimento"})]})]}),f.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200",children:[f.jsxs("div",{className:"flex items-center px-4",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("div",{className:"text-base font-medium text-gray-800",children:e.name||"Usurio"}),f.jsx("div",{className:"text-sm font-medium text-gray-500",children:e.email})]})]}),f.jsx("div",{className:"mt-3 space-y-1",children:f.jsx("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",children:"Sair do Sistema"})})]})]})]}),f.jsx("main",{className:"flex-1 py-6",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r})})]}):f.jsx(f.Fragment,{children:r})},tD=()=>{const[r,e]=j.useState(""),[n,i]=j.useState(""),{login:o,loginWithGoogle:c}=Br(),d=Ui(),[p,g]=j.useState(""),[y,b]=j.useState(!1),E=async k=>{k.preventDefault(),g(""),b(!0);try{await o(r,n),d("/dashboard")}catch(z){console.error(z),g(z.message||"Falha no login. Verifique suas credenciais.")}finally{b(!1)}},T=async()=>{g(""),b(!0);try{await c(),d("/dashboard")}catch(k){g(k.message||"Erro ao autenticar com Google")}finally{b(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[f.jsx("div",{className:"flex justify-start",children:f.jsxs(pt,{to:"/",className:"flex items-center text-sm text-gray-500 hover:text-primary transition-colors font-medium",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-4xl font-bold text-primary",children:"EduEvent"}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Entre na sua conta"}),f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Utilize suas credenciais ou entre com o Google."})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Endereo de email"}),f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Endereo de email",value:r,onChange:k=>e(k.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:Ap.useFirebase,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Sua senha",value:n,onChange:k=>i(k.target.value)})]})]}),p&&f.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded border border-red-200",children:p}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:y,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70",children:y?"Entrando...":"Entrar"})}),f.jsxs("div",{className:"relative my-4",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-300"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Ou continue com"})})]}),f.jsxs("button",{type:"button",onClick:T,disabled:y,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70",children:[f.jsxs("svg",{className:"h-5 w-5 mr-2","aria-hidden":"true",viewBox:"0 0 24 24",children:[f.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),f.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),f.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),f.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Entrar com Google"]})]}),!1]})})},nD=()=>{const{user:r,refreshProfile:e}=Br(),n=Ui(),[i,o]=j.useState([]),[c,d]=j.useState([]),[p,g]=j.useState(null),[y,b]=j.useState({name:"",rm:"",courseId:"",classId:""});j.useEffect(()=>{if(r!=null&&r.isOnboarded){n("/dashboard");return}De.getCourses().then(o)},[r,n]),j.useEffect(()=>{y.courseId&&(De.getClasses(y.courseId).then(d),b(T=>({...T,classId:""})))},[y.courseId]);const E=async T=>{if(T.preventDefault(),!!r){g(null);try{await De.updateUserProfile(r.uid,y),await e(),n("/dashboard")}catch(k){g(k.message||"Erro ao atualizar perfil")}}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Complete seu perfil"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Precisamos de mais alguns detalhes antes de comear."})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nome Completo"}),f.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Nome Completo",value:y.name,onChange:T=>b({...y,name:T.target.value})})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"rm",className:"sr-only",children:"Registro de Matrcula (RM)"}),f.jsx("input",{id:"rm",name:"rm",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"RM (ex: 12345)",value:y.rm,onChange:T=>b({...y,rm:T.target.value})})]}),f.jsx("div",{className:"mb-4",children:f.jsxs("select",{required:!0,className:"block w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:y.courseId,onChange:T=>b({...y,courseId:T.target.value}),children:[f.jsx("option",{value:"",children:"Selecione o Curso"}),i.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})}),f.jsx("div",{className:"mb-4",children:f.jsxs("select",{required:!0,disabled:!y.courseId,className:"block w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100",value:y.classId,onChange:T=>b({...y,classId:T.target.value}),children:[f.jsx("option",{value:"",children:"Selecione a Turma"}),c.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})})]}),p&&f.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 p-3 rounded text-center font-medium",children:p}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Concluir Cadastro"})})]})]})})},hs=({isOpen:r,onClose:e,title:n,children:i})=>r?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:f.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e}),f.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:[f.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:n}),f.jsx("div",{className:"mt-2",children:i})]})})}),f.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:f.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:e,children:"Fechar"})})]})]})}):null,wg=({currentPage:r,totalItems:e,itemsPerPage:n,onPageChange:i})=>{const o=Math.ceil(e/n);if(o<=1)return null;const c=()=>{const d=[];if(o<=7)for(let p=1;p<=o;p++)d.push(p);else r<=4?d.push(1,2,3,4,5,"...",o):r>=o-3?d.push(1,"...",o-4,o-3,o-2,o-1,o):d.push(1,"...",r-1,r,r+1,"...",o);return d};return f.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[f.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[f.jsx("button",{onClick:()=>i(Math.max(1,r-1)),disabled:r===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),f.jsx("button",{onClick:()=>i(Math.min(o,r+1)),disabled:r===o,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),f.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[f.jsx("div",{children:f.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",f.jsx("span",{className:"font-medium",children:(r-1)*n+1})," a ",f.jsx("span",{className:"font-medium",children:Math.min(r*n,e)})," de ",f.jsx("span",{className:"font-medium",children:e})," resultados"]})}),f.jsx("div",{children:f.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[f.jsxs("button",{onClick:()=>i(Math.max(1,r-1)),disabled:r===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[f.jsx("span",{className:"sr-only",children:"Anterior"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),c().map((d,p)=>typeof d=="number"?f.jsx("button",{onClick:()=>i(d),"aria-current":r===d?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${r===d?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:d},p):f.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},p)),f.jsxs("button",{onClick:()=>i(Math.min(o,r+1)),disabled:r===o,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[f.jsx("span",{className:"sr-only",children:"Prximo"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},sD=Cc.memo(({event:r,hasChildren:e,onAction:n})=>{const i=!e&&r.sessions.length===1?r.sessions[0]:null,o=i?i.capacity:0,c=i?i.filled:0,d=o>0?c/o*100:0,p=o>0&&c>=o;let g="bg-indigo-500",y="Pblico";return r.visibility==="course"&&(g="bg-emerald-500",y="Meu Curso"),r.visibility==="class"&&(g="bg-purple-500",y="Minha Turma"),f.jsxs("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col h-full relative",children:[f.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${g} opacity-80`}),f.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${g} bg-opacity-10 text-gray-700`,children:y}),e?f.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium border border-gray-200",children:"Evento Principal"}):p&&i?f.jsxs("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Lotado"]}):f.jsxs("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Inscries Abertas"]})]}),f.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight mb-2 group-hover:text-primary transition-colors",children:r.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-4 flex-1",children:r.description}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mt-auto",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 flex justify-center text-gray-400 mr-2",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),f.jsx("span",{className:"font-medium",children:r.location})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 flex justify-center text-gray-400 mr-2",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"font-medium",children:e?"Ver programao completa":r.sessions.length>1?`${r.sessions.length} horrios disponveis`:`${ln(i==null?void 0:i.date)}  ${i==null?void 0:i.startTime}`})]})]}),!e&&i&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[f.jsx("span",{className:p?"text-red-600":"text-gray-500",children:p?"Esgotado":`${o-c} vagas restantes`}),f.jsxs("span",{className:"text-gray-400",children:[Math.round(d),"%"]})]}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${p?"bg-red-500":d>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${d}%`}})})]})]}),f.jsxs("button",{onClick:()=>n(r),className:"w-full py-3 text-sm font-bold text-primary bg-indigo-50 hover:bg-primary hover:text-white transition-colors border-t border-indigo-100 flex justify-center items-center",children:[e?"Explorar Evento":"Ver Detalhes e Inscrever",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),rD=()=>{const{user:r}=Br(),e=Ui(),[n,i]=j.useState([]),[o,c]=j.useState([]),[d,p]=j.useState(null),[g,y]=j.useState(null),[b,E]=j.useState(null),[T,k]=j.useState(""),[z,B]=j.useState(""),[P,te]=j.useState(!1),[re,Z]=j.useState(1),fe=9,ae=j.useCallback(async()=>{if(!r)return;const[N,A]=await Promise.all([De.getAvailableEventsForUser(r),De.getEnrollmentsForUser(r.uid)]);i(N),c(A)},[r]);j.useEffect(()=>{ae()},[ae]),j.useEffect(()=>{if(d){const N=n.find(A=>A.id===d.id);N&&N!==d&&p(N)}},[n,d]);const ue=j.useCallback(N=>n.some(A=>A.parentId===N),[n]),R=j.useMemo(()=>{const N=new Date().toISOString().split("T")[0];return n.filter(A=>{if(A.parentId)return!1;const xe=A.name.toLowerCase().includes(T.toLowerCase())||A.description.toLowerCase().includes(T.toLowerCase()),Ee=n.filter(Ae=>Ae.parentId===A.id),Q=[...A.sessions,...Ee.flatMap(Ae=>Ae.sessions)],le=z?Q.some(Ae=>Ae.date===z):!0,ye=P||Q.some(Ae=>Ae.date>=N);return xe&&le&&ye})},[n,T,z,P]);j.useEffect(()=>{Z(1)},[T,z,P]);const C=j.useMemo(()=>{const N=(re-1)*fe;return R.slice(N,N+fe)},[R,re]),I=(N,A)=>o.some(xe=>xe.eventId===N&&xe.sessionId===A),V=j.useCallback(async N=>{if(!(!r||!d)){y(null),E(null);try{const A=await De.createEnrollment(r.uid,d.id,N);y({type:"success",msg:"Inscrio realizada com sucesso!"}),c(Ee=>[...Ee,A]);const xe=await De.getAvailableEventsForUser(r);i(xe),setTimeout(()=>{p(null)},1500)}catch(A){const xe=A.message||"";if(xe.startsWith("CONFLICT|")){const[Ee,Q,le,ye]=xe.split("|");E({name:Q,time:`${le} - ${ye}`})}else y({type:"error",msg:xe||"Falha ao inscrever"})}}},[r,d]),M=j.useCallback(N=>{n.some(xe=>xe.parentId===N.id)?e(`/event/${N.id}`):(y(null),E(null),p(N))},[n,e]);return f.jsxs("div",{className:"space-y-8",children:[f.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Dashboard de Eventos"}),f.jsx("p",{className:"text-gray-500 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),f.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex flex-col lg:flex-row gap-4 items-end",children:[f.jsxs("div",{className:"flex-1 w-full",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),f.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 text-gray-900 py-2.5",value:T,onChange:N=>k(N.target.value)})]})]}),f.jsxs("div",{className:"w-full lg:w-48",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Data Especfica"}),f.jsx("input",{type:"date",className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 text-gray-900 py-2.5",value:z,onChange:N=>B(N.target.value)})]}),f.jsx("div",{className:"w-full lg:w-auto pb-2",children:f.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[f.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[f.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:P,onChange:N=>te(N.target.checked),style:{right:P?"0":"auto",left:P?"auto":"0",borderColor:P?"#4F46E5":"#E5E7EB"}}),f.jsx("label",{htmlFor:"toggle",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${P?"bg-primary":"bg-gray-300"}`})]}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mostrar Passados"})]})})]}),R.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-xl shadow-sm border border-dashed border-gray-300 text-center",children:[f.jsx("div",{className:"text-6xl mb-4",children:""}),f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nenhum evento encontrado"}),f.jsx("p",{className:"text-gray-500 max-w-sm mt-1",children:n.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":P?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'."}),f.jsxs("div",{className:"flex gap-4 mt-4",children:[T||z?f.jsx("button",{onClick:()=>{k(""),B("")},className:"text-primary font-medium hover:underline",children:"Limpar filtros de texto/data"}):null,!P&&f.jsx("button",{onClick:()=>te(!0),className:"text-primary font-medium hover:underline",children:"Ver histrico de eventos"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(N=>f.jsx(sD,{event:N,hasChildren:ue(N.id),onAction:M},N.id))}),f.jsx(wg,{currentPage:re,totalItems:R.length,itemsPerPage:fe,onPageChange:Z})]}),f.jsx(hs,{isOpen:!!d,onClose:()=>p(null),title:d?d.name:"",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:f.jsx("p",{className:"text-gray-700 leading-relaxed",children:d==null?void 0:d.description})}),g&&f.jsxs("div",{className:`p-4 rounded-md border flex items-start ${g.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[f.jsx("span",{className:"mr-3 text-xl",children:g.type==="success"?"":""}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold",children:g.type==="success"?"Sucesso!":"Erro"}),f.jsx("p",{className:"text-sm",children:g.msg})]})]}),b&&f.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-bold text-amber-800",children:"Conflito de Horrio"}),f.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[f.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),f.jsxs("div",{className:"bg-white bg-opacity-50 p-2 rounded border border-amber-200",children:[f.jsx("p",{className:"font-semibold",children:b.name}),f.jsx("p",{className:"text-xs",children:b.time})]})]})]})]})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[f.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:d==null?void 0:d.sessions.map(N=>{const A=I(d.id,N.id),xe=N.filled>=N.capacity,Ee=N.filled/N.capacity*100,Q=N.date<new Date().toISOString().split("T")[0];return f.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${A?"border-green-500 bg-green-50 ring-1 ring-green-500":xe||Q?"border-gray-200 bg-gray-50 opacity-90":"border-gray-200 hover:border-primary hover:shadow-md bg-white"}`,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-bold text-gray-900 text-lg",children:ln(N.date)}),A&&f.jsx("span",{className:"bg-green-200 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),Q&&!A&&f.jsx("span",{className:"bg-gray-200 text-gray-600 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),f.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-4",children:f.jsxs("span",{className:"flex items-center",children:[" ",N.startTime," - ",N.endTime]})}),f.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${xe?"bg-red-500":Ee>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(Ee,100)}%`}})}),f.jsx("span",{className:`text-xs font-bold w-24 text-right ${xe?"text-red-600":"text-gray-500"}`,children:xe?"ESGOTADO":`${N.capacity-N.filled} vagas`})]})]}),f.jsx("div",{className:"flex items-center",children:A?f.jsx("button",{disabled:!0,className:"w-full sm:w-auto bg-white border border-green-500 text-green-600 font-bold py-2 px-4 rounded-lg opacity-100",children:"Inscrito"}):f.jsx("button",{onClick:()=>V(N.id),disabled:xe||Q,className:`w-full sm:w-auto px-6 py-2.5 rounded-lg font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all ${xe||Q?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-indigo-700 hover:shadow-md"}`,children:Q?"Encerrado":xe?"Lotado":"Inscrever"})})]})},N.id)})})]})]})})]})},iD=Cc.memo(({evt:r,onOpenSubEvent:e,onManageEnrollments:n,onEdit:i,onDelete:o})=>{const c=!!r.parentId,d=!c;return f.jsxs("li",{className:`px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition ${c?"bg-gray-50/50 pl-12 border-l-4 border-indigo-100":""}`,children:[f.jsxs("div",{children:[f.jsxs("h3",{className:`font-medium text-primary flex items-center ${c?"text-base":"text-lg"}`,children:[c&&f.jsx("span",{className:"text-gray-400 mr-2",children:""}),r.name]}),f.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[f.jsxs("span",{className:"mr-3",children:[" ",r.sessions.length," sesses"]}),f.jsxs("span",{children:[" ",r.visibility==="public"?"Pblico":r.visibility==="course"?"Por Curso":"Por Turma"]})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[d&&f.jsx("button",{onClick:()=>e(r),className:"text-indigo-600 hover:text-white hover:bg-indigo-600 p-2 rounded-full transition border border-transparent hover:border-indigo-600",title:"Adicionar Sub-evento vinculado",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("button",{onClick:()=>n(r),className:"text-emerald-600 hover:text-white hover:bg-emerald-600 p-2 rounded-full transition border border-transparent hover:border-emerald-600",title:"Gerenciar Inscritos e Exportar",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),f.jsx("button",{onClick:()=>i(r),className:"text-blue-600 hover:text-white hover:bg-blue-600 p-2 rounded-full transition border border-transparent hover:border-blue-600",title:"Editar Evento",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),f.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),f.jsx("button",{onClick:()=>o(r),className:"text-red-600 hover:text-white hover:bg-red-600 p-2 rounded-full transition border border-transparent hover:border-red-600",title:"Excluir Evento",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),aD=()=>{var Ki,Yi,$i,_n;const{user:r}=Br(),e=Ui(),[n,i]=j.useState([]),[o,c]=j.useState([]),[d,p]=j.useState([]),[g,y]=j.useState(!1),[b,E]=j.useState(!1),[T,k]=j.useState(1),[z,B]=j.useState(""),[P,te]=j.useState(""),[re,Z]=j.useState(""),fe=15,[ae,ue]=j.useState(""),[R,C]=j.useState("manual"),[I,V]=j.useState(null),[M,N]=j.useState(null),[A,xe]=j.useState(null),[Ee,Q]=j.useState(null),[le,ye]=j.useState(!1),[Ae,Ke]=j.useState({totalEvents:0,totalSessions:0,totalCapacity:0,totalFilled:0}),[D,X]=j.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0}),[ie,he]=j.useState({date:"",startTime:"",endTime:"",capacity:30}),[ve,Ce]=j.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),Pe=new Date().getFullYear(),nt=`${Pe}-12-31`,tt=async()=>{const $=await De.getEvents();i($);let me=0,we=0,Ye=0;$.forEach(Tt=>{me+=Tt.sessions.length,Tt.sessions.forEach(Dn=>{we+=Dn.capacity,Ye+=Dn.filled})}),Ke({totalEvents:$.length,totalSessions:me,totalCapacity:we,totalFilled:Ye})},oe=async()=>{const $=await De.getCourses(),me=await De.getClasses();c($),p(me)};j.useEffect(()=>{tt(),oe()},[]);const at=j.useMemo(()=>{const $=n.filter(Ye=>!Ye.parentId),me=n.filter(Ye=>Ye.parentId),we=[];return $.forEach(Ye=>{we.push(Ye),me.filter(Tt=>Tt.parentId===Ye.id).forEach(Tt=>we.push(Tt))}),me.filter(Ye=>!$.find(Tt=>Tt.id===Ye.parentId)).forEach(Ye=>we.push(Ye)),we},[n]),Kt=j.useMemo(()=>at.filter($=>{var Tt,Dn;const me=$.name.toLowerCase().includes(z.toLowerCase())||$.description.toLowerCase().includes(z.toLowerCase()),we=P?$.visibility===P:!0;let Ye=!0;return re&&($.visibility==="public"?Ye=!1:$.visibility==="course"?Ye=((Tt=$.allowedCourses)==null?void 0:Tt.includes(re))||!1:$.visibility==="class"&&(Ye=((Dn=$.allowedClasses)==null?void 0:Dn.some(xn=>{const On=d.find(yt=>yt.id===xn);return(On==null?void 0:On.courseId)===re}))||!1)),me&&we&&Ye}),[at,z,P,re,d]);j.useEffect(()=>{k(1)},[z,P,re]);const ms=j.useMemo(()=>{const $=(T-1)*fe;return Kt.slice($,$+fe)},[Kt,T]),en=()=>{X({name:"",description:"",location:"",sessions:[],visibility:"public",allowedCourses:[],allowedClasses:[],parentId:void 0}),he({date:"",startTime:"",endTime:"",capacity:30}),Ce({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),V(null),C("manual"),N(null),xe(null)},Is=()=>{en(),ue("Criar Novo Evento Principal"),y(!0)},$n=j.useCallback($=>{if(en(),ue(`Adicionar Sub-evento para: ${$.name}`),V($.name),$.sessions&&$.sessions.length>0){const me=$.sessions.map(we=>we.date).sort();xe({min:me[0],max:me[me.length-1]})}else xe(null);X({parentId:$.id,visibility:$.visibility,allowedCourses:$.allowedCourses,allowedClasses:$.allowedClasses,location:$.location,sessions:[],name:"",description:""}),y(!0)},[]),Hi=j.useCallback($=>{en(),X({...$}),ue("Editar Evento"),$.parentId,y(!0)},[]),Fi=j.useCallback($=>{Q($.id),ye(!$.parentId)},[]),wt=j.useCallback($=>{e(`/admin/events/${$.id}/enrollments`)},[e]),Ct=()=>{if(!ie.date||!ie.startTime||!ie.endTime)return;if(A&&(ie.date<A.min||ie.date>A.max)){N(`A data deve estar entre ${ln(A.min)} e ${ln(A.max)} (Perodo do evento pai).`);return}const $={id:`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,date:ie.date,startTime:ie.startTime,endTime:ie.endTime,capacity:ie.capacity||30,filled:0};X(me=>({...me,sessions:[...me.sessions||[],$]})),he({date:"",startTime:"",endTime:"",capacity:30}),N(null)},js=()=>{N(null);const{startDate:$,endDate:me,startTime:we,endTime:Ye,capacity:Tt,daysOfWeek:Dn}=ve;if(!$||!me||!we||!Ye||Dn.length===0){N("Preencha todos os campos e selecione pelo menos um dia da semana.");return}if(A&&($<A.min||$>A.max||me<A.min||me>A.max)){N(`O intervalo deve estar contido entre ${ln(A.min)} e ${ln(A.max)}.`);return}if(me>nt){N(`Para evitar sobrecarga no sistema, a gerao automtica de sesses  limitada at ${ln(nt)}.`);return}const[xn,On,yt]=$.split("-").map(Number),[Xn,Wn,Mn]=me.split("-").map(Number),za=new Date(xn,On-1,yt,12,0,0),Xi=new Date(Xn,Wn-1,Mn,12,0,0),bn=[];if(za>Xi){N("A data de incio deve ser anterior  data de fim.");return}let Os=0;for(let En=new Date(za);En<=Xi&&(Os++,!(Os>370));En.setDate(En.getDate()+1))if(Dn.includes(En.getDay())){const ar=En.getFullYear(),Wi=String(En.getMonth()+1).padStart(2,"0"),Ji=String(En.getDate()).padStart(2,"0");bn.push({id:`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,date:`${ar}-${Wi}-${Ji}`,startTime:we,endTime:Ye,capacity:Tt,filled:0})}if(bn.length===0){N("Nenhuma data encontrada.");return}X(En=>({...En,sessions:[...En.sessions||[],...bn]}))},il=$=>{X(me=>{var we;return{...me,sessions:(we=me.sessions)==null?void 0:we.filter((Ye,Tt)=>Tt!==$)}})},Pa=async $=>{var me;if($.preventDefault(),!D.name||!((me=D.sessions)!=null&&me.length)){N("Preencha o nome e adicione sesso.");return}E(!0);try{D.id?await De.updateEvent(D):await De.createEvent({id:`evt_${Date.now()}`,name:D.name,description:D.description||"",location:D.location||"A definir",visibility:D.visibility||"public",allowedCourses:D.allowedCourses,allowedClasses:D.allowedClasses,sessions:D.sessions||[],parentId:D.parentId||void 0,createdBy:(r==null?void 0:r.uid)||"",createdAt:new Date().toISOString()}),y(!1),en(),tt()}catch(we){console.error(we)}finally{E(!1)}},tn=async()=>{Ee&&(await De.deleteEvent(Ee),Q(null),tt())},ir=$=>{X(me=>{var we;return{...me,allowedCourses:(we=me.allowedCourses)!=null&&we.includes($)?me.allowedCourses.filter(Ye=>Ye!==$):[...me.allowedCourses||[],$]}})},Gi=$=>{X(me=>{var we;return{...me,allowedClasses:(we=me.allowedClasses)!=null&&we.includes($)?me.allowedClasses.filter(Ye=>Ye!==$):[...me.allowedClasses||[],$]}})},Qi=$=>{Ce(me=>({...me,daysOfWeek:me.daysOfWeek.includes($)?me.daysOfWeek.filter(we=>we!==$):[...me.daysOfWeek,$]}))},Ds=Ae.totalCapacity>0?Math.round(Ae.totalFilled/Ae.totalCapacity*100):0,Ua=j.useMemo(()=>A&&A.max<nt?A.max:nt,[A,nt]);return f.jsxs("div",{className:"container mx-auto space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"bg-white p-4 rounded shadow border-l-4 border-primary",children:[f.jsx("div",{className:"text-gray-500 text-sm font-medium uppercase",children:"Eventos Ativos"}),f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ae.totalEvents})]}),f.jsxs("div",{className:"bg-white p-4 rounded shadow border-l-4 border-blue-500",children:[f.jsx("div",{className:"text-gray-500 text-sm font-medium uppercase",children:"Total de Sesses"}),f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ae.totalSessions})]}),f.jsxs("div",{className:"bg-white p-4 rounded shadow border-l-4 border-secondary",children:[f.jsx("div",{className:"text-gray-500 text-sm font-medium uppercase",children:"Inscritos / Vagas"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Ae.totalFilled," ",f.jsxs("span",{className:"text-gray-400 text-lg",children:["/ ",Ae.totalCapacity]})]})]}),f.jsxs("div",{className:"bg-white p-4 rounded shadow border-l-4 border-orange-500",children:[f.jsx("div",{className:"text-gray-500 text-sm font-medium uppercase",children:"Taxa de Ocupao"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Ds,"%"]})]})]}),f.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Eventos"}),f.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[f.jsx("div",{className:"w-full xl:w-64",children:f.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:z,onChange:$=>B($.target.value)})}),f.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[f.jsx("div",{className:"flex-1 xl:w-40",children:f.jsxs("select",{className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-white text-gray-900",value:P,onChange:$=>te($.target.value),children:[f.jsx("option",{value:"",children:"Visibilidade"}),f.jsx("option",{value:"public",children:"Pblico"}),f.jsx("option",{value:"course",children:"Por Curso"}),f.jsx("option",{value:"class",children:"Por Turma"})]})}),f.jsx("div",{className:"flex-1 xl:w-48",children:f.jsxs("select",{className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-white text-gray-900",value:re,onChange:$=>Z($.target.value),children:[f.jsx("option",{value:"",children:"Todos os Cursos"}),o.map($=>f.jsx("option",{value:$.id,children:$.name},$.id))]})})]}),f.jsx("button",{onClick:Is,className:"w-full xl:w-auto bg-primary text-white px-6 py-2 rounded-md hover:bg-indigo-700 shadow-sm transition font-bold whitespace-nowrap",children:"+ Novo Evento"})]})]}),f.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:f.jsxs("ul",{className:"divide-y divide-gray-200",children:[ms.map($=>f.jsx(iD,{evt:$,onOpenSubEvent:$n,onManageEnrollments:wt,onEdit:Hi,onDelete:Fi},$.id)),ms.length===0&&f.jsx("li",{className:"px-6 py-12 text-center text-gray-500",children:"Nenhum evento encontrado com os filtros atuais."})]})}),f.jsx(wg,{currentPage:T,totalItems:Kt.length,itemsPerPage:fe,onPageChange:k}),f.jsx(hs,{isOpen:!!Ee,onClose:()=>Q(null),title:"Confirmar Excluso",children:f.jsxs("div",{className:"p-2",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza que deseja excluir este evento e todas as suas sesses?",le&&f.jsxs(f.Fragment,{children:[f.jsx("br",{}),f.jsx("span",{className:"text-red-600 font-bold block mt-2",children:" Ateno: Ao excluir um evento principal, todos os sub-eventos vinculados a ele tambm sero excludos permanentemente."})]}),!le&&f.jsx("br",{}),f.jsx("span",{className:"text-red-500 text-sm font-bold block mt-2",children:"Essa ao no pode ser desfeita."})]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:tn,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar Excluso"})]})]})}),f.jsx(hs,{isOpen:g,onClose:()=>y(!1),title:ae,children:f.jsxs("form",{onSubmit:Pa,className:"space-y-4 max-h-[80vh] overflow-y-auto px-1",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome do Evento"}),f.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:D.name,onChange:$=>X({...D,name:$.target.value})})]}),f.jsxs("div",{className:I?"opacity-50 pointer-events-none":"",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Visibilidade ",I&&f.jsxs("span",{className:"text-xs text-indigo-600",children:["(Herdado do Pai: ",I,")"]})]}),f.jsxs("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-white text-gray-900",value:D.visibility,onChange:$=>X({...D,visibility:$.target.value}),disabled:!!I,children:[f.jsx("option",{value:"public",children:"Pblico (Todos)"}),f.jsx("option",{value:"course",children:"Restrito a Cursos"}),f.jsx("option",{value:"class",children:"Restrito a Turmas"})]})]}),D.visibility==="course"&&f.jsxs("div",{className:"bg-gray-50 p-3 rounded border mt-2",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2 uppercase",children:"Selecione os Cursos Permitidos"}),f.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:o.map($=>{var me;return f.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:(me=D.allowedCourses)==null?void 0:me.includes($.id),onChange:()=>ir($.id),className:"rounded text-primary focus:ring-primary bg-white"}),f.jsx("span",{className:"text-sm",children:$.name})]},$.id)})})]}),D.visibility==="class"&&f.jsxs("div",{className:"bg-gray-50 p-3 rounded border mt-2",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2 uppercase",children:"Selecione as Turmas Permitidas"}),f.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:o.map($=>{const me=d.filter(we=>we.courseId===$.id);return me.length===0?null:f.jsxs("div",{children:[f.jsx("div",{className:"text-xs font-bold text-indigo-600 mb-1 sticky top-0 bg-gray-50 py-1",children:$.name}),f.jsx("div",{className:"pl-2 space-y-1 border-l-2 border-indigo-100",children:me.map(we=>{var Ye;return f.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100 rounded p-1",children:[f.jsx("input",{type:"checkbox",checked:(Ye=D.allowedClasses)==null?void 0:Ye.includes(we.id),onChange:()=>Gi(we.id),className:"rounded text-primary focus:ring-primary bg-white"}),f.jsx("span",{className:"text-sm",children:we.name})]},we.id)})})]},$.id)})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrio"}),f.jsx("textarea",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",rows:3,value:D.description,onChange:$=>X({...D,description:$.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Local"}),f.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:D.location,onChange:$=>X({...D,location:$.target.value})})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Gerenciar Sesses"}),A&&f.jsx("div",{className:"mb-4 bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Restrio de Data Ativa"}),f.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[f.jsxs("p",{children:["O evento pai ocorre entre ",f.jsx("span",{className:"font-bold whitespace-nowrap",children:ln(A.min)})," e ",f.jsx("span",{className:"font-bold whitespace-nowrap",children:ln(A.max)}),"."]}),f.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Todas as sesses deste sub-evento devem estar contidas neste intervalo."})]})]})]})}),f.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-t-md",children:[f.jsx("button",{type:"button",onClick:()=>C("manual"),className:`flex-1 py-2 text-sm font-medium rounded-md transition-colors ${R==="manual"?"bg-white text-primary shadow":"text-gray-500 hover:text-gray-700"}`,children:"Insero Manual"}),f.jsx("button",{type:"button",onClick:()=>C("recurring"),className:`flex-1 py-2 text-sm font-medium rounded-md transition-colors ${R==="recurring"?"bg-white text-primary shadow":"text-gray-500 hover:text-gray-700"}`,children:"Gerador de Recorrncia"})]}),R==="manual"&&f.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-50 p-3 rounded-b-md border border-gray-200 border-t-0",children:[f.jsx("div",{className:"col-span-2 text-xs font-medium text-gray-500 uppercase",children:"Data e Capacidade"}),f.jsx("input",{type:"date",className:"border p-1 rounded text-sm bg-white text-gray-900",value:ie.date,min:A==null?void 0:A.min,max:A==null?void 0:A.max,onChange:$=>he({...ie,date:$.target.value})}),f.jsx("input",{type:"number",placeholder:"Capacidade",className:"border p-1 rounded text-sm bg-white text-gray-900",value:ie.capacity,onChange:$=>he({...ie,capacity:parseInt($.target.value)})}),f.jsx("div",{className:"col-span-2 text-xs font-medium text-gray-500 uppercase mt-2",children:"Horrio (Incio - Fim)"}),f.jsx("input",{type:"time",className:"border p-1 rounded text-sm bg-white text-gray-900",value:ie.startTime,onChange:$=>he({...ie,startTime:$.target.value})}),f.jsx("input",{type:"time",className:"border p-1 rounded text-sm bg-white text-gray-900",value:ie.endTime,onChange:$=>he({...ie,endTime:$.target.value})}),f.jsx("button",{type:"button",onClick:Ct,className:"col-span-2 mt-2 bg-white border border-primary text-primary py-2 rounded text-sm hover:bg-indigo-50 font-medium",children:"+ Adicionar Sesso"})]}),R==="recurring"&&f.jsxs("div",{className:"bg-indigo-50 p-3 rounded-b-md space-y-3 border border-indigo-100 border-t-0",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 font-bold",children:"Data Incio"}),f.jsx("input",{type:"date",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:ve.startDate,min:A==null?void 0:A.min,max:Ua,onChange:$=>Ce({...ve,startDate:$.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 font-bold",children:"Data Fim"}),f.jsx("input",{type:"date",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:ve.endDate,min:A==null?void 0:A.min,max:Ua,onChange:$=>Ce({...ve,endDate:$.target.value})})]})]}),f.jsxs("div",{className:"text-xs text-indigo-600 italic",children:["* A gerao automtica  limitada ao ano corrente (",Pe,")."]}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 font-bold",children:"Incio"}),f.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:ve.startTime,onChange:$=>Ce({...ve,startTime:$.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 font-bold",children:"Fim"}),f.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:ve.endTime,onChange:$=>Ce({...ve,endTime:$.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 font-bold",children:"Capacidade"}),f.jsx("input",{type:"number",className:"w-full border p-1 rounded text-sm bg-white text-gray-900",value:ve.capacity,onChange:$=>Ce({...ve,capacity:parseInt($.target.value)})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 font-bold block mb-1",children:"Dias da Semana"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map(($,me)=>f.jsx("button",{type:"button",onClick:()=>Qi(me),className:`text-xs px-3 py-1.5 rounded border font-medium transition ${ve.daysOfWeek.includes(me)?"bg-primary text-white border-primary":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:$},$))})]}),M&&f.jsx("div",{className:"text-xs text-red-600 bg-red-50 border border-red-200 p-2 rounded",children:M}),f.jsx("button",{type:"button",onClick:js,className:"w-full bg-primary text-white py-2 rounded text-sm hover:bg-indigo-700 shadow-sm font-medium",children:"Gerar Sesses Automaticamente"})]}),f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h5",{className:"text-xs font-bold text-gray-500 uppercase",children:["Sesses Geradas (",((Ki=D.sessions)==null?void 0:Ki.length)||0,")"]}),(((Yi=D.sessions)==null?void 0:Yi.length)||0)>0&&f.jsx("button",{type:"button",onClick:()=>X({...D,sessions:[]}),className:"text-xs text-red-500 hover:underline",children:"Limpar Tudo"})]}),f.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded p-2 bg-gray-50",children:[(($i=D.sessions)==null?void 0:$i.length)===0&&f.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"Nenhuma sesso adicionada"}),(_n=D.sessions)==null?void 0:_n.slice().sort(($,me)=>$.date.localeCompare(me.date)||$.startTime.localeCompare(me.startTime)).map(($,me)=>f.jsxs("div",{className:"text-xs bg-white border p-2 rounded flex justify-between items-center group hover:border-primary",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-gray-800",children:ln($.date)}),f.jsx("span",{className:"mx-2 text-gray-300",children:"|"}),f.jsxs("span",{children:[$.startTime," - ",$.endTime]}),f.jsx("span",{className:"mx-2 text-gray-300",children:"|"}),f.jsxs("span",{className:"text-blue-600 font-medium",children:[$.capacity," vagas"]})]}),f.jsx("button",{type:"button",onClick:()=>il(me),className:"text-red-500 hover:text-red-700 font-medium",children:""})]},me))]})]})]}),f.jsxs("div",{className:"pt-4",children:[M&&f.jsx("div",{className:"mb-2 text-sm text-red-600 text-center font-bold",children:"Existem erros no formulrio, verifique acima."}),f.jsx("button",{type:"submit",disabled:b,className:"w-full bg-green-600 text-white py-3 rounded-md hover:bg-green-700 disabled:opacity-50 font-bold text-sm shadow-sm",children:b?"Salvando...":D.id?"Atualizar Evento":"Confirmar Criao do Evento"})]})]})})]})},oD=Cc.memo(({user:r,courseName:e,className:n,onEdit:i,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:d})=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold",children:r.name?r.name.charAt(0):r.email.charAt(0).toUpperCase()}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.name||"Sem nome"}),f.jsx("div",{className:"text-sm text-gray-500",children:r.email})]})]})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:e}),f.jsx("div",{className:"text-sm text-gray-500",children:n})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.rm||"-"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r.role===xt.ADMIN?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:r.role})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[f.jsx("button",{onClick:()=>d(r),className:"text-cyan-600 hover:text-cyan-900",title:"Ver Inscries",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>i(r),className:"text-indigo-600 hover:text-indigo-900",children:"Editar"}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>o(r),className:"text-amber-600 hover:text-amber-900",children:r.role===xt.ADMIN?"Virar User":"Virar Admin"}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsx("button",{onClick:()=>c(r),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]})),lD=Cc.memo(({user:r,courseName:e,className:n,onEdit:i,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:d})=>f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold",children:r.name?r.name.charAt(0):r.email.charAt(0).toUpperCase()}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-bold text-gray-900",children:r.name||"Sem nome"}),f.jsx("div",{className:"text-xs text-gray-500",children:r.email})]})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.role===xt.ADMIN?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:r.role})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm border-t border-b border-gray-100 py-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"Curso"}),f.jsx("span",{className:"font-medium",children:e})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"Turma"}),f.jsx("span",{className:"font-medium",children:n})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500 text-xs block",children:"RM"}),f.jsx("span",{className:"font-medium",children:r.rm||"-"})]})]}),f.jsxs("div",{className:"flex justify-end space-x-2 pt-1 overflow-x-auto",children:[f.jsxs("button",{onClick:()=>d(r),className:"text-cyan-600 text-sm font-medium border border-cyan-100 px-2 py-1 rounded hover:bg-cyan-50 flex items-center",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Agenda"]}),f.jsx("button",{onClick:()=>i(r),className:"text-indigo-600 text-sm font-medium border border-indigo-100 px-2 py-1 rounded hover:bg-indigo-50",children:"Editar"}),f.jsx("button",{onClick:()=>o(r),className:"text-amber-600 text-sm font-medium border border-amber-100 px-2 py-1 rounded hover:bg-amber-50",children:r.role===xt.ADMIN?"User":"Admin"}),f.jsx("button",{onClick:()=>c(r),className:"text-red-600 text-sm font-medium border border-red-100 px-2 py-1 rounded hover:bg-red-50",children:"Excluir"})]})]})),cD=()=>{const[r,e]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState([]),[d,p]=j.useState(!1),[g,y]=j.useState(1),b=15,[E,T]=j.useState(""),[k,z]=j.useState(""),[B,P]=j.useState(""),[te,re]=j.useState(""),[Z,fe]=j.useState(null),[ae,ue]=j.useState({name:"",rm:"",courseId:"",classId:""}),[R,C]=j.useState(null),[I,V]=j.useState(null),[M,N]=j.useState([]),[A,xe]=j.useState(!1),[Ee,Q]=j.useState(null),le=async()=>{p(!0);const[oe,at,Kt]=await Promise.all([De.getUsers(),De.getCourses(),De.getClasses()]);e(oe),i(at),c(Kt),p(!1)};j.useEffect(()=>{le()},[]);const ye=j.useMemo(()=>r.filter(oe=>{var Is,$n;const at=((Is=oe.name)==null?void 0:Is.toLowerCase().includes(E.toLowerCase()))||oe.email.toLowerCase().includes(E.toLowerCase())||(($n=oe.rm)==null?void 0:$n.includes(E)),Kt=k?oe.role===k:!0,ms=B?oe.courseId===B:!0,en=te?oe.classId===te:!0;return at&&Kt&&ms&&en}),[r,E,k,B,te]);j.useEffect(()=>{y(1)},[E,k,B,te]);const Ae=j.useMemo(()=>{const oe=(g-1)*b;return ye.slice(oe,oe+b)},[ye,g]),Ke=j.useCallback(oe=>Q({type:"DELETE",user:oe}),[]),D=j.useCallback(oe=>Q({type:"ROLE",user:oe}),[]),X=j.useCallback(oe=>{fe(oe),ue({name:oe.name||"",rm:oe.rm||"",courseId:oe.courseId||"",classId:oe.classId||""}),C(null)},[]),ie=j.useCallback(async oe=>{V(oe),xe(!0);try{const at=await De.getUserEnrollmentsDetails(oe.uid);N(at)}catch(at){console.error(at),N([])}finally{xe(!1)}},[]),he=async oe=>{if(I)try{await De.cancelEnrollment(oe),ie(I)}catch{alert("Erro ao remover inscrio")}},ve=async()=>{if(Ee){if(Ee.type==="DELETE")await De.deleteUser(Ee.user.uid);else if(Ee.type==="ROLE"){const oe=Ee.user.role===xt.ADMIN?xt.USER:xt.ADMIN;await De.updateUserRole(Ee.user.uid,oe)}Q(null),le()}},Ce=async oe=>{if(oe.preventDefault(),!!Z){C(null);try{await De.updateUserProfile(Z.uid,ae),fe(null),le()}catch(at){C(at.message)}}},Pe=j.useCallback(oe=>{var at;return((at=n.find(Kt=>Kt.id===oe))==null?void 0:at.name)||"-"},[n]),nt=j.useCallback(oe=>{var at;return((at=o.find(Kt=>Kt.id===oe))==null?void 0:at.name)||"-"},[o]),tt=j.useMemo(()=>B?o.filter(oe=>oe.courseId===B):[],[o,B]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Usurios"}),f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Buscar"}),f.jsx("input",{type:"text",placeholder:"Nome, Email ou RM...",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-white text-gray-900",value:E,onChange:oe=>T(oe.target.value)})]}),f.jsxs("div",{className:"w-full md:w-40",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Perfil"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-white text-gray-900",value:k,onChange:oe=>z(oe.target.value),children:[f.jsx("option",{value:"",children:"Todos"}),f.jsx("option",{value:xt.ADMIN,children:"Admin"}),f.jsx("option",{value:xt.USER,children:"User"})]})]}),f.jsxs("div",{className:"w-full md:w-48",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Curso"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-white text-gray-900",value:B,onChange:oe=>{P(oe.target.value),re("")},children:[f.jsx("option",{value:"",children:"Todos os Cursos"}),n.map(oe=>f.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),f.jsxs("div",{className:"w-full md:w-48",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Turma"}),f.jsxs("select",{className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-white text-gray-900 disabled:bg-gray-100",value:te,onChange:oe=>re(oe.target.value),disabled:!B,children:[f.jsx("option",{value:"",children:"Todas as Turmas"}),tt.map(oe=>f.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})]})]}),f.jsx("div",{className:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Curso / Turma"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RM"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),f.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Ae.map(oe=>f.jsx(oD,{user:oe,courseName:Pe(oe.courseId),className:nt(oe.classId),onEdit:X,onRequestRoleChange:D,onRequestDelete:Ke,onViewEnrollments:ie},oe.uid)),Ae.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Nenhum usurio encontrado com os filtros atuais."})})]})]})}),f.jsxs("div",{className:"md:hidden space-y-4",children:[Ae.map(oe=>f.jsx(lD,{user:oe,courseName:Pe(oe.courseId),className:nt(oe.classId),onEdit:X,onRequestRoleChange:D,onRequestDelete:Ke,onViewEnrollments:ie},oe.uid)),Ae.length===0&&f.jsx("div",{className:"text-center text-gray-500 text-sm py-8",children:"Nenhum usurio encontrado."})]}),f.jsx(wg,{currentPage:g,totalItems:ye.length,itemsPerPage:b,onPageChange:y}),f.jsx(hs,{isOpen:!!Ee,onClose:()=>Q(null),title:"Confirmar Ao",children:f.jsxs("div",{className:"space-y-4",children:[(Ee==null?void 0:Ee.type)==="DELETE"?f.jsxs("p",{className:"text-gray-700",children:["Tem certeza que deseja excluir o usurio ",f.jsx("strong",{children:Ee.user.name||Ee.user.email}),"?",f.jsx("br",{}),f.jsx("span",{className:"text-red-500 text-sm font-bold mt-2 block",children:"Esta ao excluir todas as inscries associadas e no pode ser desfeita."})]}):f.jsxs("p",{className:"text-gray-700",children:["Deseja alterar o nvel de acesso de ",f.jsx("strong",{children:Ee==null?void 0:Ee.user.name})," para",f.jsxs("strong",{children:[" ",(Ee==null?void 0:Ee.user.role)===xt.ADMIN?"USURIO COMUM":"ADMINISTRADOR"]}),"?"]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:ve,className:`px-4 py-2 rounded text-white font-bold ${(Ee==null?void 0:Ee.type)==="DELETE"?"bg-red-600 hover:bg-red-700":"bg-amber-500 hover:bg-amber-600"}`,children:"Confirmar"})]})]})}),f.jsx(hs,{isOpen:!!Z,onClose:()=>fe(null),title:"Editar Usurio",children:f.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome Completo"}),f.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:ae.name,onChange:oe=>ue({...ae,name:oe.target.value}),required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"RM"}),f.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:ae.rm,onChange:oe=>ue({...ae,rm:oe.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Curso"}),f.jsxs("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-white text-gray-900",value:ae.courseId,onChange:oe=>ue({...ae,courseId:oe.target.value,classId:""}),children:[f.jsx("option",{value:"",children:"Selecione..."}),n.map(oe=>f.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Turma"}),f.jsxs("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-white text-gray-900",value:ae.classId,onChange:oe=>ue({...ae,classId:oe.target.value}),disabled:!ae.courseId,children:[f.jsx("option",{value:"",children:"Selecione..."}),o.filter(oe=>oe.courseId===ae.courseId).map(oe=>f.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),R&&f.jsx("div",{className:"text-red-600 text-sm p-2 bg-red-50 rounded",children:R}),f.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-bold hover:bg-indigo-700",children:"Salvar Alteraes"})]})}),f.jsx(hs,{isOpen:!!I,onClose:()=>V(null),title:`Agenda: ${(I==null?void 0:I.name)||"Usurio"}`,children:f.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[A?f.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando inscries..."}):M.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded border border-dashed",children:"Este usurio no est inscrito em nenhum evento."}):f.jsx("ul",{className:"divide-y divide-gray-200",children:M.map((oe,at)=>f.jsxs("li",{className:"py-3 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-gray-800 text-sm",children:oe.eventName}),f.jsxs("div",{className:"text-xs text-gray-500",children:[" ",ln(oe.sessionDate),"   ",oe.sessionTime]}),f.jsxs("div",{className:"text-xs text-gray-400",children:[" ",oe.eventLocation]})]}),f.jsx("button",{onClick:()=>he(oe.enrollmentId),className:"text-red-500 hover:text-red-700 text-xs font-bold border border-red-200 px-2 py-1 rounded hover:bg-red-50",children:"Remover"})]},at))}),f.jsx("div",{className:"pt-2 border-t mt-4 text-right",children:f.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800 text-sm",children:"Fechar"})})]})})]})},uD=()=>{const[r,e]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState(!1),[d,p]=j.useState(""),[g,y]=j.useState(""),[b,E]=j.useState(""),[T,k]=j.useState(""),[z,B]=j.useState(null),[P,te]=j.useState(null),re=async()=>{c(!0);const N=await De.getCourses(),A=await De.getClasses();e(N),i(A),c(!1)};j.useEffect(()=>{re()},[]);const Z=async N=>{N.preventDefault(),d&&(await De.addCourse(d),p(""),re())},fe=N=>{te({type:"course",id:N})},ae=async N=>{N.preventDefault(),!(!g||!b)&&(await De.addClass(b,g),y(""),re())},ue=N=>{te({type:"class",id:N})},R=async()=>{P&&(P.type==="course"?await De.deleteCourse(P.id):await De.deleteClass(P.id),te(null),re())},C=(N,A,xe)=>{B({type:N,id:A,name:xe})},I=async N=>{N.preventDefault(),!(!z||!z.name)&&(z.type==="course"?await De.updateCourse(z.id,z.name):await De.updateClass(z.id,z.name),B(null),re())},V=r.filter(N=>N.name.toLowerCase().includes(T.toLowerCase())),M=n.filter(N=>{var Q;const A=((Q=r.find(le=>le.id===N.courseId))==null?void 0:Q.name)||"",xe=N.name.toLowerCase().includes(T.toLowerCase()),Ee=A.toLowerCase().includes(T.toLowerCase());return xe||Ee});return f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Cursos e Turmas"}),f.jsx("div",{className:"w-full sm:w-72",children:f.jsx("input",{type:"text",placeholder:"Buscar Curso ou Turma...",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:T,onChange:N=>k(N.target.value)})})]}),f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cursos"}),f.jsxs("form",{onSubmit:Z,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsx("input",{type:"text",placeholder:"Nome do novo curso",className:"flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:d,onChange:N=>p(N.target.value)}),f.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-primary text-white px-4 py-2 rounded-md hover:bg-indigo-700 font-medium",children:"Adicionar Curso"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[V.map(N=>f.jsxs("div",{className:"border border-gray-200 rounded-md p-4 flex justify-between items-center bg-gray-50 shadow-sm",children:[f.jsx("span",{className:"font-medium text-gray-800 break-words flex-1 pr-2",children:N.name}),f.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[f.jsx("button",{onClick:()=>C("course",N.id,N.name),className:"text-blue-600 text-sm hover:text-white hover:bg-blue-600 font-medium px-2 py-1 rounded transition",title:"Editar",children:""}),f.jsx("button",{onClick:()=>fe(N.id),className:"text-red-600 text-sm hover:text-white hover:bg-red-600 font-medium px-2 py-1 rounded transition",title:"Excluir",children:""})]})]},N.id)),V.length===0&&f.jsx("div",{className:"text-gray-500 text-sm italic col-span-full",children:"Nenhum curso encontrado."})]})]}),f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Turmas"}),f.jsxs("form",{onSubmit:ae,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsxs("select",{className:"w-full sm:w-1/3 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:b,onChange:N=>E(N.target.value),required:!0,children:[f.jsx("option",{value:"",children:"Selecione o Curso..."}),r.map(N=>f.jsx("option",{value:N.id,children:N.name},N.id))]}),f.jsx("input",{type:"text",placeholder:"Nome da Turma (ex: 2024-A)",className:"flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:g,onChange:N=>y(N.target.value),required:!0}),f.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-secondary text-white px-4 py-2 rounded-md hover:bg-emerald-700 font-medium",children:"Adicionar Turma"})]}),f.jsxs("div",{className:"border border-gray-200 rounded-md bg-white overflow-hidden",children:[f.jsxs("div",{className:"hidden md:grid grid-cols-3 bg-gray-50 px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[f.jsx("div",{children:"Turma"}),f.jsx("div",{children:"Curso Associado"}),f.jsx("div",{className:"text-right",children:"Aes"})]}),f.jsxs("div",{className:"divide-y divide-gray-200",children:[M.map(N=>{var xe;const A=((xe=r.find(Ee=>Ee.id===N.courseId))==null?void 0:xe.name)||"Curso removido";return f.jsxs("div",{className:"p-4 md:px-6 md:py-4 flex flex-col md:grid md:grid-cols-3 gap-2 md:items-center",children:[f.jsxs("div",{className:"flex justify-between items-center md:block",children:[f.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.name}),f.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Turma"})]}),f.jsxs("div",{className:"flex justify-between items-center md:block",children:[f.jsx("span",{className:"text-sm text-gray-500",children:A}),f.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Curso"})]}),f.jsxs("div",{className:"text-right mt-3 md:mt-0 pt-3 md:pt-0 border-t md:border-0 border-gray-100 flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>C("class",N.id,N.name),className:"text-blue-600 hover:text-white hover:bg-blue-600 text-sm font-medium border border-blue-200 px-3 py-1.5 rounded transition",children:"Editar"}),f.jsx("button",{onClick:()=>ue(N.id),className:"text-red-600 hover:text-white hover:bg-red-600 text-sm font-medium border border-red-200 px-3 py-1.5 rounded transition",children:"Excluir"})]})]},N.id)}),M.length===0&&f.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"Nenhuma turma encontrada."})]})]})]}),f.jsx(hs,{isOpen:!!P,onClose:()=>te(null),title:"Confirmar Excluso",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza que deseja excluir ",(P==null?void 0:P.type)==="course"?"este curso":"esta turma","?"]}),(P==null?void 0:P.type)==="course"&&f.jsx("p",{className:"text-xs text-red-500 font-bold",children:"Ateno: Isso pode deixar turmas e usurios rfos (sem curso vinculado)."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>te(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:R,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar"})]})]})}),f.jsx(hs,{isOpen:!!z,onClose:()=>B(null),title:(z==null?void 0:z.type)==="course"?"Editar Curso":"Editar Turma",children:f.jsxs("form",{onSubmit:I,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),f.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:(z==null?void 0:z.name)||"",onChange:N=>B(A=>A?{...A,name:N.target.value}:null),required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-medium hover:bg-indigo-700",children:"Salvar"})]})})]})},dD=()=>{const{id:r}=Yx(),[e,n]=j.useState(null),[i,o]=j.useState([]),[c,d]=j.useState(!0),[p,g]=j.useState(null),[y,b]=j.useState(""),E=async()=>{if(!r)return;d(!0);const B=await De.getEventById(r);n(B||null);const P=await De.getEnrichedEnrollments(r);o(P),d(!1)};j.useEffect(()=>{E()},[r]);const T=()=>{if(i.length===0)return;const P=[["Nome","Email","RM","Data Sesso","Horrio","Data Inscrio"].join(","),...i.map(fe=>[JSON.stringify(fe.user.name),JSON.stringify(fe.user.email),JSON.stringify(fe.user.rm),JSON.stringify(ln(fe.session.date)),JSON.stringify(`${fe.session.startTime} - ${fe.session.endTime}`),JSON.stringify(new Date(fe.enrolledAt).toLocaleString("pt-BR"))].join(","))].join(`
`),te=new Blob([P],{type:"text/csv;charset=utf-8;"}),re=URL.createObjectURL(te),Z=document.createElement("a");Z.href=re,Z.setAttribute("download",`inscritos_${(e==null?void 0:e.name.replace(/\s+/g,"_"))||"evento"}.csv`),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},k=async()=>{p&&(await De.cancelEnrollment(p),g(null),E())},z=i.filter(B=>{var P;return B.user.name.toLowerCase().includes(y.toLowerCase())||B.user.email.toLowerCase().includes(y.toLowerCase())||((P=B.user.rm)==null?void 0:P.includes(y))});return c?f.jsx("div",{className:"p-8 text-center",children:"Carregando..."}):e?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsxs(pt,{to:"/admin/events",className:"text-gray-500 hover:text-gray-700 font-medium flex-shrink-0",children:[f.jsx("span",{className:"sr-only",children:"Voltar"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})]}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 leading-tight",children:"Inscritos"}),f.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[200px] sm:max-w-md",children:e.name})]})]}),f.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[f.jsx("input",{type:"text",placeholder:"Buscar aluno...",className:"flex-1 sm:w-64 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white text-gray-900",value:y,onChange:B=>b(B.target.value)}),f.jsxs("button",{onClick:T,disabled:i.length===0,className:"w-auto bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 flex justify-center items-center disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-sm",title:"Exportar CSV",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),f.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]}),z.length===0?f.jsx("div",{className:"bg-white shadow rounded-lg p-8 text-center text-gray-500",children:y?"Nenhum aluno encontrado para esta busca.":"Nenhum inscrito neste evento at o momento."}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aluno"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RM / Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sesso"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrito em"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(B=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.user.name})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:B.user.rm||"-"}),f.jsx("div",{className:"text-xs text-gray-500",children:B.user.email})]}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:ln(B.session.date)}),f.jsxs("div",{className:"text-xs text-gray-500",children:[B.session.startTime," - ",B.session.endTime]})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(B.enrolledAt).toLocaleDateString("pt-BR")}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f.jsx("button",{onClick:()=>g(B.id),className:"text-red-600 hover:text-red-900 font-bold",children:"Remover"})})]},B.id))})]})}),f.jsx("div",{className:"md:hidden space-y-4",children:z.map(B=>f.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-bold text-gray-900",children:B.user.name}),f.jsx("p",{className:"text-xs text-gray-500",children:B.user.email})]}),f.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded font-medium",children:["RM: ",B.user.rm||"-"]})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-50 grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold tracking-wide",children:"Sesso"}),f.jsx("span",{className:"block font-medium text-gray-800",children:ln(B.session.date)}),f.jsxs("span",{className:"block text-xs text-gray-500",children:[B.session.startTime," - ",B.session.endTime]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold tracking-wide",children:"Inscrito em"}),f.jsx("span",{className:"block text-gray-600",children:new Date(B.enrolledAt).toLocaleDateString("pt-BR")})]})]}),f.jsx("div",{className:"mt-4 pt-3 border-t border-gray-50",children:f.jsx("button",{onClick:()=>g(B.id),className:"w-full text-sm text-red-600 hover:text-red-800 font-bold border border-red-100 bg-red-50 px-3 py-2 rounded hover:bg-red-100 transition",children:"Remover Inscrio"})})]},B.id))})]}),f.jsx(hs,{isOpen:!!p,onClose:()=>g(null),title:"Remover Inscrio",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-700",children:"Tem certeza que deseja remover a inscrio deste aluno? A vaga ser liberada imediatamente."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Cancelar"}),f.jsx("button",{onClick:k,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:"Confirmar Remoo"})]})]})})]}):f.jsx("div",{className:"p-8 text-center",children:"Evento no encontrado."})},hD=()=>{const[r,e]=j.useState(!1),[n,i]=j.useState(!1),[o,c]=j.useState(null),d=()=>{c(null),i(!0)},p=async()=>{e(!0),c(null);try{await De.resetAndSeedData(),c({type:"success",msg:"Dados gerados com sucesso! Recarregando sistema..."}),setTimeout(()=>{window.location.reload()},2e3)}catch(g){console.error(g),c({type:"error",msg:"Ocorreu um erro ao gerar os dados."}),e(!1)}};return f.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto mt-10",children:[f.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Ferramentas de Desenvolvimento"}),f.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:[f.jsx("p",{children:"Utilize esta funo para popular o banco de dados local com informaes de teste."}),f.jsx("p",{className:"mt-2 font-bold text-red-500",children:"Isso  destrutivo e sobrescrever todos os dados existentes."})]}),f.jsx("div",{className:"mt-5",children:f.jsx("button",{type:"button",onClick:d,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:" Resetar e Gerar Massa de Dados"})})]})}),f.jsxs("div",{className:"bg-indigo-50 p-4 rounded-md border border-indigo-100",children:[f.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"O que ser gerado?"}),f.jsxs("ul",{className:"list-disc list-inside text-sm text-indigo-700 space-y-1",children:[f.jsx("li",{children:"Cursos: CC, Direito, Medicina, Design."}),f.jsx("li",{children:"Turmas associadas a cada curso."}),f.jsx("li",{children:"Usurios: 1 Admin (admin@school.com), 3 Alunos com perfis variados."}),f.jsx("li",{children:"Eventos Pblicos e Restritos (por curso/turma)."}),f.jsx("li",{children:"Hierarquia: Semana Acadmica com 2 sub-eventos."})]})]}),f.jsx(hs,{isOpen:n,onClose:()=>!r&&i(!1),title:"Confirmar Reset",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-700",children:["Tem certeza absoluta? Essa ao apagar ",f.jsx("strong",{children:"todos"})," os usurios, eventos e inscries atuais e criar dados fictcios."]}),o&&f.jsx("div",{className:`p-3 rounded text-sm font-bold text-center ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.msg}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{onClick:()=>i(!1),disabled:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800 disabled:opacity-50",children:"Cancelar"}),f.jsxs("button",{onClick:p,disabled:r,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold disabled:opacity-50 flex items-center",children:[r&&f.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r?"Gerando...":"Sim, Resetar Tudo"]})]})]})})]})},fD=()=>{const{user:r}=Br(),[e,n]=j.useState([]),[i,o]=j.useState(null),[c,d]=j.useState(!1),p=async()=>{if(!r)return;const y=await De.getEnrollmentsForUser(r.uid),b=await De.getEvents(),E=y.map(T=>{const k=b.find(B=>B.id===T.eventId);if(!k)return null;const z=k.sessions.find(B=>B.id===T.sessionId);return z?{enrollment:T,event:k,session:z}:null}).filter(Boolean);n(E)};j.useEffect(()=>{p()},[r]);const g=async()=>{if(i){d(!0);try{await De.cancelEnrollment(i)}catch(y){console.error(y)}finally{o(null),d(!1),p()}}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Minha Agenda"}),e.length===0?f.jsx("div",{className:"bg-white p-8 rounded-lg shadow text-center text-gray-500",children:"Voc ainda no se inscreveu em nenhum evento."}):f.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:f.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(({enrollment:y,event:b,session:E})=>f.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-primary",children:b.name}),f.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:[" ",ln(E.date),"   ",E.startTime," - ",E.endTime]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[" ",b.location]})]}),f.jsx("div",{children:f.jsx("button",{onClick:()=>o(y.id),className:"w-full sm:w-auto text-sm text-red-600 hover:text-red-800 border border-red-200 px-3 py-2 rounded hover:bg-red-50 transition flex justify-center",children:"Cancelar Inscrio"})})]},y.id))})}),f.jsx(hs,{isOpen:!!i,onClose:()=>o(null),title:"Confirmar Cancelamento",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-700",children:"Tem certeza que deseja cancelar sua inscrio neste evento? A vaga ser liberada para outro participante."}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 text-gray-800",children:"Manter Inscrio"}),f.jsx("button",{onClick:g,disabled:c,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700 text-white font-bold",children:c?"Processando...":"Sim, Cancelar"})]})]})})]})},mD=()=>{const[r,e]=j.useState([]);j.useEffect(()=>{(async()=>{const o=await De.getPublicEvents();e(o.slice(0,3))})()},[]);const n=()=>{const i=document.getElementById("eventos");i&&i.scrollIntoView({behavior:"smooth"})};return f.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-sans",children:[f.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-20 items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-gray-900 font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(pt,{to:"/login",className:"text-gray-500 hover:text-primary font-medium px-3 py-2 transition-colors",children:"Login"}),f.jsx(pt,{to:"/login",className:"bg-primary hover:bg-indigo-700 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-indigo-200 transition-all transform hover:-translate-y-0.5",children:"Inscrever-se"})]})]})})}),f.jsxs("div",{className:"relative overflow-hidden",children:[f.jsx("div",{className:"max-w-7xl mx-auto",children:f.jsx("div",{className:"relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32 pt-20 px-4 sm:px-6 lg:px-8",children:f.jsx("main",{className:"mt-10 mx-auto max-w-7xl sm:mt-12 md:mt-16 lg:mt-20 xl:mt-28",children:f.jsxs("div",{className:"sm:text-center lg:text-left",children:[f.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full border border-indigo-100 bg-indigo-50 text-primary text-xs font-bold uppercase tracking-wide mb-4",children:" Gesto de Eventos Acadmicos"}),f.jsxs("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl mb-6",children:[f.jsx("span",{className:"block",children:"Organize sua agenda"}),f.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600",children:"escolar com inteligncia"})]}),f.jsx("p",{className:"mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 leading-relaxed",children:"Nunca mais perca um workshop ou palestra. O EduEvent centraliza inscries, gerencia conflitos de horrio e mantm voc atualizado sobre todas as atividades do campus."}),f.jsxs("div",{className:"mt-8 sm:mt-10 sm:flex sm:justify-center lg:justify-start gap-4",children:[f.jsx("div",{className:"rounded-md shadow",children:f.jsx(pt,{to:"/login",className:"w-full flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-xl text-white bg-primary hover:bg-indigo-700 md:py-4 md:text-lg transition-all shadow-xl shadow-indigo-200",children:"Comear Agora"})}),f.jsx("div",{className:"mt-3 sm:mt-0",children:f.jsx("button",{onClick:n,className:"w-full flex items-center justify-center px-8 py-4 border border-gray-200 text-base font-bold rounded-xl text-gray-700 bg-white hover:bg-gray-50 md:py-4 md:text-lg transition-all",children:"Explorar Eventos"})})]})]})})})}),f.jsxs("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2",children:[f.jsx("img",{className:"h-56 w-full object-cover sm:h-72 md:h-96 lg:w-full lg:h-full",src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",alt:"Estudantes interagindo no campus"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/50 to-transparent lg:via-white/20"})]})]}),f.jsx("div",{className:"bg-indigo-900 py-12 border-y border-indigo-800",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"+1.5k"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Alunos Ativos"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"350+"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Eventos Realizados"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"100%"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Organizado"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-1",children:"24/7"}),f.jsx("div",{className:"text-indigo-200 text-sm font-medium uppercase",children:"Disponvel"})]})]})})}),f.jsx("div",{className:"py-24 bg-gray-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-base text-primary font-bold tracking-wide uppercase",children:"Recursos"}),f.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Tudo que voc precisa para gerenciar atividades"}),f.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 mx-auto",children:"Nossa plataforma foi desenhada para simplificar a vida acadmica, eliminando planilhas e confuso."})]}),f.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Gesto de Tempo Real"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"O sistema impede automaticamente inscries em eventos com horrios conflitantes. Nunca mais se preocupe com choque de agenda."})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-emerald-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrio Instantnea"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Garanta sua vaga em workshops e palestras com apenas um clique. Receba confirmao imediata e acompanhe seu status."})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-100",children:[f.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6",children:f.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Acesso Mobile"}),f.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Plataforma totalmente responsiva. Consulte seus eventos, locais e horrios diretamente do seu smartphone, onde estiver."})]})]})]})}),f.jsxs("div",{id:"eventos",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 w-full",children:[f.jsxs("div",{className:"flex justify-between items-end mb-12",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Prximos Eventos"}),f.jsx("p",{className:"mt-2 text-gray-500",children:"Confira o que est rolando no campus esta semana."})]}),f.jsxs(pt,{to:"/login",className:"hidden md:flex items-center font-bold text-primary hover:text-indigo-700 transition",children:["Ver todos os eventos ",f.jsx("span",{className:"ml-2",children:""})]})]}),r.length===0?f.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-3xl border border-dashed border-gray-300",children:f.jsx("p",{className:"text-gray-400 text-lg",children:"Nenhum evento pblico em destaque no momento."})}):f.jsx("div",{className:"grid gap-8 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:r.map(i=>{var p;const o=(p=i.sessions[0])!=null&&p.date?new Date(i.sessions[0].date):new Date,c=o.getDate(),d=o.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return f.jsxs("div",{className:"group flex flex-col bg-white rounded-2xl shadow-sm hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden hover:-translate-y-1",children:[f.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{className:"bg-indigo-50 text-primary rounded-lg p-2 text-center min-w-[60px]",children:[f.jsx("span",{className:"block text-xs font-bold",children:d}),f.jsx("span",{className:"block text-xl font-extrabold leading-none",children:c})]}),f.jsxs("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold",children:[i.sessions.length," Sesses"]})]}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:i.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-3 mb-4 flex-1",children:i.description}),f.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-auto pt-4 border-t border-gray-50",children:[f.jsxs("svg",{className:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.location]})]}),f.jsx("div",{className:"bg-gray-50 px-6 py-4",children:f.jsx(pt,{to:"/login",className:"block w-full text-center font-bold text-primary hover:text-indigo-800 transition",children:"Garantir Vaga "})})]},i.id)})}),f.jsx("div",{className:"mt-8 text-center md:hidden",children:f.jsx(pt,{to:"/login",className:"font-bold text-primary",children:"Ver todos os eventos "})})]}),f.jsx("div",{className:"bg-primary",children:f.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between",children:[f.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl mb-4 md:mb-0",children:[f.jsx("span",{className:"block",children:"Pronto para organizar sua agenda?"}),f.jsx("span",{className:"block text-indigo-200 text-2xl mt-1",children:"Crie sua conta gratuitamente hoje mesmo."})]}),f.jsx("div",{className:"flex space-x-3",children:f.jsx(pt,{to:"/login",className:"bg-white text-primary font-bold px-6 py-3 rounded-lg shadow hover:bg-indigo-50 transition",children:"Criar Conta"})})]})}),f.jsx("footer",{className:"bg-gray-900 text-white mt-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-2xl font-bold tracking-tight text-white",children:"EduEvent"}),f.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Facilitando a gesto de eventos acadmicos e conectando alunos ao conhecimento de forma organizada e eficiente."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Plataforma"}),f.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Eventos"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Cursos"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition",children:"Login Administrativo"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-300 tracking-wider uppercase mb-4",children:"Contato"}),f.jsxs("ul",{className:"space-y-3 text-gray-400 text-sm",children:[f.jsxs("li",{className:"flex items-center",children:[f.jsx("span",{className:"mr-2",children:""})," suporte@eduevent.com"]}),f.jsxs("li",{className:"flex items-center",children:[f.jsx("span",{className:"mr-2",children:""})," Campus Principal, Bloco A"]})]})]})]}),f.jsx("div",{className:"mt-12 border-t border-gray-800 pt-8 text-center text-sm text-gray-500",children:" 2024 EduEvent System. Todos os direitos reservados."})]})})]})},pD=()=>{const{id:r}=Yx(),{user:e}=Br(),n=Ui(),[i,o]=j.useState(null),[c,d]=j.useState([]),[p,g]=j.useState([]),[y,b]=j.useState(!0),[E,T]=j.useState(null),[k,z]=j.useState(null),[B,P]=j.useState(null),te=j.useCallback(async()=>{if(!(!r||!e)){b(ae=>ae&&!0);try{const ae=await De.getEventById(r);if(!ae){n("/dashboard");return}o(ae);const R=(await De.getAvailableEventsForUser(e)).filter(I=>I.parentId===r);d(R);const C=await De.getEnrollmentsForUser(e.uid);g(C)}catch(ae){console.error(ae)}finally{b(!1)}}},[r,e,n]);j.useEffect(()=>{te()},[te]),j.useEffect(()=>{if(E)if(i&&i.id===E.id)i!==E&&T(i);else{const ae=c.find(ue=>ue.id===E.id);ae&&ae!==E&&T(ae)}},[i,c,E]);const re=(ae,ue)=>p.some(R=>R.eventId===ae&&R.sessionId===ue),Z=j.useCallback(async ae=>{if(!(!e||!E)){z(null),P(null);try{const ue=await De.createEnrollment(e.uid,E.id,ae);if(z({type:"success",msg:"Inscrio realizada com sucesso!"}),g(R=>[...R,ue]),r){const R=await De.getEventById(r);R&&o(R);const I=(await De.getAvailableEventsForUser(e)).filter(V=>V.parentId===r);d(I)}setTimeout(()=>{T(null)},1500)}catch(ue){const R=ue.message||"";if(R.startsWith("CONFLICT|")){const[C,I,V,M]=R.split("|");P({name:I,time:`${V} - ${M}`})}else z({type:"error",msg:R||"Falha ao inscrever"})}}},[e,E,r]),fe=ae=>{z(null),P(null),T(ae)};return y?f.jsx("div",{className:"p-12 text-center text-gray-500 font-medium",children:"Carregando detalhes do evento..."}):i?f.jsxs("div",{className:"space-y-8 pb-12",children:[f.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:f.jsxs("ol",{className:"flex items-center space-x-2",children:[f.jsx("li",{children:f.jsx(pt,{to:"/dashboard",className:"text-gray-500 hover:text-primary font-medium transition",children:"Eventos"})}),f.jsx("li",{children:f.jsx("span",{className:"text-gray-300",children:"/"})}),f.jsx("li",{className:"text-gray-900 font-semibold","aria-current":"page",children:i.name})]})}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 relative",children:[f.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),f.jsx("div",{className:"p-8 md:p-10",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-xs font-bold uppercase tracking-wide mb-4 border border-indigo-100",children:"Evento Principal"}),f.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mb-4 leading-tight",children:i.name}),f.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-6 max-w-4xl",children:i.description}),f.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 text-sm font-medium",children:[f.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-1.5 rounded-lg",children:[f.jsx("span",{className:"mr-2 text-xl",children:""})," ",i.location]}),f.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-1.5 rounded-lg",children:[f.jsx("span",{className:"mr-2 text-xl",children:""})," ",i.sessions.length," Sesses Principais"]})]})]}),i.sessions.length>0&&f.jsx("div",{className:"flex-shrink-0",children:f.jsxs("button",{onClick:()=>fe(i),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao Geral",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Atividades & Sub-eventos"}),f.jsx("div",{className:"h-px bg-gray-200 flex-1"})]}),c.length===0?f.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[f.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),f.jsx("p",{className:"text-gray-500 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(ae=>{const ue=ae.sessions.length===1?ae.sessions[0]:null,R=ue?ue.capacity:0,C=ue?ue.filled:0,I=R>0?C/R*100:0,V=R>0&&C>=R;return f.jsxs("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col relative",children:[f.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 group-hover:bg-primary transition-colors"}),f.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary transition-colors",children:ae.name}),f.jsx("p",{className:"text-gray-500 text-sm line-clamp-3 mb-4 flex-1",children:ae.description}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mt-auto pt-4 border-t border-gray-50",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"w-6 text-center mr-2 text-gray-400",children:""}),f.jsx("span",{className:"font-medium",children:ae.location})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"w-6 text-center mr-2 text-gray-400",children:""}),f.jsx("span",{className:"font-medium",children:ae.sessions.length>1?`${ae.sessions.length} opes de horrio`:`${ln(ue==null?void 0:ue.date)}  ${ue==null?void 0:ue.startTime}`})]})]}),ue&&f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:f.jsx("span",{className:V?"text-red-600":"text-gray-500",children:V?"LOTADO":`${R-C} vagas`})}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:f.jsx("div",{className:`h-full rounded-full ${V?"bg-red-500":"bg-emerald-500"}`,style:{width:`${I}%`}})})]})]}),f.jsx("button",{onClick:()=>fe(ae),className:"w-full py-3 bg-gray-50 hover:bg-primary hover:text-white text-primary font-bold text-sm transition-colors border-t border-gray-100",children:ae.sessions.length>1?"Escolher Horrio":V?"Ver Detalhes":"Inscrever-se Agora"})]},ae.id)})}),f.jsx(hs,{isOpen:!!E,onClose:()=>T(null),title:E?E.name:"",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:f.jsx("p",{className:"text-gray-700 leading-relaxed",children:E==null?void 0:E.description})}),k&&f.jsxs("div",{className:`p-4 rounded-md border flex items-start ${k.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[f.jsx("span",{className:"mr-3 text-xl",children:k.type==="success"?"":""}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold",children:k.type==="success"?"Sucesso!":"Erro"}),f.jsx("p",{className:"text-sm",children:k.msg})]})]}),B&&f.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-md",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-bold text-amber-800",children:"Conflito de Horrio"}),f.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[f.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),f.jsxs("div",{className:"bg-white bg-opacity-50 p-2 rounded border border-amber-200",children:[f.jsx("p",{className:"font-semibold",children:B.name}),f.jsx("p",{className:"text-xs",children:B.time})]})]})]})]})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[f.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:E==null?void 0:E.sessions.map(ae=>{const ue=re(E.id,ae.id),R=ae.filled>=ae.capacity,C=ae.filled/ae.capacity*100;return f.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${ue?"border-green-500 bg-green-50 ring-1 ring-green-500":R?"border-gray-200 bg-gray-50 opacity-90":"border-gray-200 hover:border-primary hover:shadow-md bg-white"}`,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-bold text-gray-900 text-lg",children:ln(ae.date)}),ue&&f.jsx("span",{className:"bg-green-200 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),f.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-4",children:f.jsxs("span",{className:"flex items-center",children:[" ",ae.startTime," - ",ae.endTime]})}),f.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${R?"bg-red-500":C>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(C,100)}%`}})}),f.jsx("span",{className:`text-xs font-bold w-24 text-right ${R?"text-red-600":"text-gray-500"}`,children:R?"ESGOTADO":`${ae.capacity-ae.filled} vagas`})]})]}),f.jsx("div",{className:"flex items-center",children:ue?f.jsx("button",{disabled:!0,className:"w-full sm:w-auto bg-white border border-green-500 text-green-600 font-bold py-2 px-4 rounded-lg opacity-100",children:"Inscrito"}):f.jsx("button",{onClick:()=>Z(ae.id),disabled:R,className:`w-full sm:w-auto px-6 py-2.5 rounded-lg font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all ${R?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-indigo-700 hover:shadow-md"}`,children:R?"Lotado":"Inscrever"})})]})},ae.id)})})]})]})})]}):f.jsx("div",{className:"p-12 text-center text-red-500 font-bold",children:"Evento no encontrado."})},Nr=({children:r,roleRequired:e})=>{const{user:n,loading:i}=Br();return i?f.jsx("div",{className:"h-screen flex items-center justify-center",children:"Carregando..."}):n?!n.isOnboarded&&window.location.hash!=="#/complete-profile"?f.jsx(Td,{to:"/complete-profile"}):e&&n.role!==e?f.jsx(Td,{to:"/dashboard"}):f.jsx(f.Fragment,{children:r}):f.jsx(Td,{to:"/login"})},gD=()=>{const{user:r}=Br();return f.jsxs(rS,{children:[f.jsx(us,{path:"/",element:r?f.jsx(Td,{to:"/dashboard"}):f.jsx(mD,{})}),f.jsx(us,{path:"/login",element:f.jsx(tD,{})}),f.jsx(us,{path:"/complete-profile",element:f.jsx(Nr,{children:f.jsx(nD,{})})}),f.jsx(us,{path:"/dashboard",element:f.jsx(Nr,{children:f.jsx(xi,{children:f.jsx(rD,{})})})}),f.jsx(us,{path:"/event/:id",element:f.jsx(Nr,{children:f.jsx(xi,{children:f.jsx(pD,{})})})}),f.jsx(us,{path:"/my-enrollments",element:f.jsx(Nr,{children:f.jsx(xi,{children:f.jsx(fD,{})})})}),f.jsx(us,{path:"/admin/events",element:f.jsx(Nr,{roleRequired:xt.ADMIN,children:f.jsx(xi,{children:f.jsx(aD,{})})})}),f.jsx(us,{path:"/admin/events/:id/enrollments",element:f.jsx(Nr,{roleRequired:xt.ADMIN,children:f.jsx(xi,{children:f.jsx(dD,{})})})}),f.jsx(us,{path:"/admin/courses",element:f.jsx(Nr,{roleRequired:xt.ADMIN,children:f.jsx(xi,{children:f.jsx(uD,{})})})}),f.jsx(us,{path:"/admin/users",element:f.jsx(Nr,{roleRequired:xt.ADMIN,children:f.jsx(xi,{children:f.jsx(cD,{})})})}),f.jsx(us,{path:"/admin/dev",element:f.jsx(Nr,{roleRequired:xt.ADMIN,children:f.jsx(xi,{children:f.jsx(hD,{})})})})]})};function yD(){return f.jsx(eD,{children:f.jsx(NS,{children:f.jsx(gD,{})})})}const Aw=document.getElementById("root");if(!Aw)throw new Error("Could not find root element to mount to");const vD=f1.createRoot(Aw);vD.render(f.jsx(Cc.StrictMode,{children:f.jsx(yD,{})}));
