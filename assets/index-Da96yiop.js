(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var TM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dg={exports:{}},wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function ZS(){if(J_)return wc;J_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var p in a)p!=="key"&&(l[p]=a[p])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:l}}return wc.Fragment=e,wc.jsx=t,wc.jsxs=t,wc}var W_;function eA(){return W_||(W_=1,dg.exports=ZS()),dg.exports}var g=eA(),hg={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function tA(){if(Z_)return ke;Z_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function F(O,J,ce){this.props=O,this.context=J,this.refs=k,this.updater=ce||D}F.prototype.isReactComponent={},F.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},F.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function K(){}K.prototype=F.prototype;function q(O,J,ce){this.props=O,this.context=J,this.refs=k,this.updater=ce||D}var oe=q.prototype=new K;oe.constructor=q,M(oe,F.prototype),oe.isPureReactComponent=!0;var ae=Array.isArray;function fe(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(O,J,ce){var me=ce.ref;return{$$typeof:r,type:O,key:J,ref:me!==void 0?me:null,props:ce}}function U(O,J){return C(O.type,J,O.props)}function L(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function j(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return J[ce]})}var N=/\/+/g;function be(O,J){return typeof O=="object"&&O!==null&&O.key!=null?j(""+O.key):J.toString(36)}function Ne(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(fe,fe):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function W(O,J,ce,me,ye){var Te=typeof O;(Te==="undefined"||Te==="boolean")&&(O=null);var Le=!1;if(O===null)Le=!0;else switch(Te){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(O.$$typeof){case r:case e:Le=!0;break;case v:return Le=O._init,W(Le(O._payload),J,ce,me,ye)}}if(Le)return ye=ye(O),Le=me===""?"."+be(O,0):me,ae(ye)?(ce="",Le!=null&&(ce=Le.replace(N,"$&/")+"/"),W(ye,J,ce,"",function(zi){return zi})):ye!=null&&(L(ye)&&(ye=U(ye,ce+(ye.key==null||O&&O.key===ye.key?"":(""+ye.key).replace(N,"$&/")+"/")+Le)),J.push(ye)),1;Le=0;var ct=me===""?".":me+":";if(ae(O))for(var vt=0;vt<O.length;vt++)me=O[vt],Te=ct+be(me,vt),Le+=W(me,J,ce,Te,ye);else if(vt=T(O),typeof vt=="function")for(O=vt.call(O),vt=0;!(me=O.next()).done;)me=me.value,Te=ct+be(me,vt++),Le+=W(me,J,ce,Te,ye);else if(Te==="object"){if(typeof O.then=="function")return W(Ne(O),J,ce,me,ye);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ue(O,J,ce){if(O==null)return O;var me=[],ye=0;return W(O,me,"","",function(Te){return J.call(ce,Te,ye++)}),me}function le(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var _e=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Re={map:ue,forEach:function(O,J,ce){ue(O,function(){J.apply(this,arguments)},ce)},count:function(O){var J=0;return ue(O,function(){J++}),J},toArray:function(O){return ue(O,function(J){return J})||[]},only:function(O){if(!L(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ke.Activity=_,ke.Children=Re,ke.Component=F,ke.Fragment=t,ke.Profiler=a,ke.PureComponent=q,ke.StrictMode=i,ke.Suspense=f,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ke.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},ke.cache=function(O){return function(){return O.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(O,J,ce){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var me=M({},O.props),ye=O.key;if(J!=null)for(Te in J.key!==void 0&&(ye=""+J.key),J)!I.call(J,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&J.ref===void 0||(me[Te]=J[Te]);var Te=arguments.length-2;if(Te===1)me.children=ce;else if(1<Te){for(var Le=Array(Te),ct=0;ct<Te;ct++)Le[ct]=arguments[ct+2];me.children=Le}return C(O.type,ye,me)},ke.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},ke.createElement=function(O,J,ce){var me,ye={},Te=null;if(J!=null)for(me in J.key!==void 0&&(Te=""+J.key),J)I.call(J,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=J[me]);var Le=arguments.length-2;if(Le===1)ye.children=ce;else if(1<Le){for(var ct=Array(Le),vt=0;vt<Le;vt++)ct[vt]=arguments[vt+2];ye.children=ct}if(O&&O.defaultProps)for(me in Le=O.defaultProps,Le)ye[me]===void 0&&(ye[me]=Le[me]);return C(O,Te,ye)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(O){return{$$typeof:p,render:O}},ke.isValidElement=L,ke.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:le}},ke.memo=function(O,J){return{$$typeof:m,type:O,compare:J===void 0?null:J}},ke.startTransition=function(O){var J=R.T,ce={};R.T=ce;try{var me=O(),ye=R.S;ye!==null&&ye(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(fe,_e)}catch(Te){_e(Te)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),R.T=J}},ke.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ke.use=function(O){return R.H.use(O)},ke.useActionState=function(O,J,ce){return R.H.useActionState(O,J,ce)},ke.useCallback=function(O,J){return R.H.useCallback(O,J)},ke.useContext=function(O){return R.H.useContext(O)},ke.useDebugValue=function(){},ke.useDeferredValue=function(O,J){return R.H.useDeferredValue(O,J)},ke.useEffect=function(O,J){return R.H.useEffect(O,J)},ke.useEffectEvent=function(O){return R.H.useEffectEvent(O)},ke.useId=function(){return R.H.useId()},ke.useImperativeHandle=function(O,J,ce){return R.H.useImperativeHandle(O,J,ce)},ke.useInsertionEffect=function(O,J){return R.H.useInsertionEffect(O,J)},ke.useLayoutEffect=function(O,J){return R.H.useLayoutEffect(O,J)},ke.useMemo=function(O,J){return R.H.useMemo(O,J)},ke.useOptimistic=function(O,J){return R.H.useOptimistic(O,J)},ke.useReducer=function(O,J,ce){return R.H.useReducer(O,J,ce)},ke.useRef=function(O){return R.H.useRef(O)},ke.useState=function(O){return R.H.useState(O)},ke.useSyncExternalStore=function(O,J,ce){return R.H.useSyncExternalStore(O,J,ce)},ke.useTransition=function(){return R.H.useTransition()},ke.version="19.2.0",ke}var eE;function hp(){return eE||(eE=1,hg.exports=tA()),hg.exports}var V=hp();const rr=rw(V);var fg={exports:{}},xc={},mg={exports:{}},gg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function nA(){return tE||(tE=1,(function(r){function e(W,ue){var le=W.length;W.push(ue);e:for(;0<le;){var _e=le-1>>>1,Re=W[_e];if(0<a(Re,ue))W[_e]=ue,W[le]=Re,le=_e;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ue=W[0],le=W.pop();if(le!==ue){W[0]=le;e:for(var _e=0,Re=W.length,O=Re>>>1;_e<O;){var J=2*(_e+1)-1,ce=W[J],me=J+1,ye=W[me];if(0>a(ce,le))me<Re&&0>a(ye,ce)?(W[_e]=ye,W[me]=le,_e=me):(W[_e]=ce,W[J]=le,_e=J);else if(me<Re&&0>a(ye,le))W[_e]=ye,W[me]=le,_e=me;else break e}}return ue}function a(W,ue){var le=W.sortIndex-ue.sortIndex;return le!==0?le:W.id-ue.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var f=[],m=[],v=1,_=null,b=3,T=!1,D=!1,M=!1,k=!1,F=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function oe(W){for(var ue=t(m);ue!==null;){if(ue.callback===null)i(m);else if(ue.startTime<=W)i(m),ue.sortIndex=ue.expirationTime,e(f,ue);else break;ue=t(m)}}function ae(W){if(M=!1,oe(W),!D)if(t(f)!==null)D=!0,fe||(fe=!0,j());else{var ue=t(m);ue!==null&&Ne(ae,ue.startTime-W)}}var fe=!1,R=-1,I=5,C=-1;function U(){return k?!0:!(r.unstable_now()-C<I)}function L(){if(k=!1,fe){var W=r.unstable_now();C=W;var ue=!0;try{e:{D=!1,M&&(M=!1,K(R),R=-1),T=!0;var le=b;try{t:{for(oe(W),_=t(f);_!==null&&!(_.expirationTime>W&&U());){var _e=_.callback;if(typeof _e=="function"){_.callback=null,b=_.priorityLevel;var Re=_e(_.expirationTime<=W);if(W=r.unstable_now(),typeof Re=="function"){_.callback=Re,oe(W),ue=!0;break t}_===t(f)&&i(f),oe(W)}else i(f);_=t(f)}if(_!==null)ue=!0;else{var O=t(m);O!==null&&Ne(ae,O.startTime-W),ue=!1}}break e}finally{_=null,b=le,T=!1}ue=void 0}}finally{ue?j():fe=!1}}}var j;if(typeof q=="function")j=function(){q(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,be=N.port2;N.port1.onmessage=L,j=function(){be.postMessage(null)}}else j=function(){F(L,0)};function Ne(W,ue){R=F(function(){W(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(W){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var le=b;b=ue;try{return W()}finally{b=le}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var le=b;b=W;try{return ue()}finally{b=le}},r.unstable_scheduleCallback=function(W,ue,le){var _e=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?_e+le:_e):le=_e,W){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=le+Re,W={id:v++,callback:ue,priorityLevel:W,startTime:le,expirationTime:Re,sortIndex:-1},le>_e?(W.sortIndex=le,e(m,W),t(f)===null&&W===t(m)&&(M?(K(R),R=-1):M=!0,Ne(ae,le-_e))):(W.sortIndex=Re,e(f,W),D||T||(D=!0,fe||(fe=!0,j()))),W},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(W){var ue=b;return function(){var le=b;b=ue;try{return W.apply(this,arguments)}finally{b=le}}}})(gg)),gg}var nE;function rA(){return nE||(nE=1,mg.exports=nA()),mg.exports}var pg={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function sA(){if(rE)return dn;rE=1;var r=hp();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:f,containerInfo:m,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(f,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(f,m,null,v)},dn.flushSync=function(f){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=m,i.p=v,i.d.f()}},dn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},dn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},dn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:T}):v==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},dn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);i.d.L(f,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dn.preloadModule=function(f,m){if(typeof f=="string")if(m){var v=p(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},dn.requestFormReset=function(f){i.d.r(f)},dn.unstable_batchedUpdates=function(f,m){return f(m)},dn.useFormState=function(f,m,v){return u.H.useFormState(f,m,v)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var sE;function iA(){if(sE)return pg.exports;sE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),pg.exports=sA(),pg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function aA(){if(iE)return xc;iE=1;var r=rA(),e=hp(),t=iA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(i(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,c=s;;){var h=o.return;if(h===null)break;var y=h.alternate;if(y===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===o)return f(h),n;if(y===c)return f(h),s;y=y.sibling}throw Error(i(188))}if(o.return!==c.return)o=h,c=y;else{for(var w=!1,S=h.child;S;){if(S===o){w=!0,o=h,c=y;break}if(S===c){w=!0,c=h,o=y;break}S=S.sibling}if(!w){for(S=y.child;S;){if(S===o){w=!0,o=y,c=h;break}if(S===c){w=!0,c=y,o=h;break}S=S.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),q=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function be(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case F:return"Profiler";case k:return"StrictMode";case ae:return"Suspense";case fe:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case q:return n.displayName||"Context";case K:return(n._context.displayName||"Context")+".Consumer";case oe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:be(n.type)||"Memo";case I:s=n._payload,n=n._init;try{return be(n(s))}catch{}}return null}var Ne=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},_e=[],Re=-1;function O(n){return{current:n}}function J(n){0>Re||(n.current=_e[Re],_e[Re]=null,Re--)}function ce(n,s){Re++,_e[Re]=n.current,n.current=s}var me=O(null),ye=O(null),Te=O(null),Le=O(null);function ct(n,s){switch(ce(Te,s),ce(ye,n),ce(me,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?E_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=E_(s),n=b_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(me),ce(me,n)}function vt(){J(me),J(ye),J(Te)}function zi(n){n.memoizedState!==null&&ce(Le,n);var s=me.current,o=b_(s,n.type);s!==o&&(ce(ye,n),ce(me,o))}function Fa(n){ye.current===n&&(J(me),J(ye)),Le.current===n&&(J(Le),vc._currentValue=le)}var Ha,Ga;function Ir(n){if(Ha===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ha=s&&s[1]||"",Ga=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ha+n+Ga}var vl=!1;function Bi(n,s){if(!n||vl)return"";vl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var Q=X}Reflect.construct(n,[],se)}else{try{se.call()}catch(X){Q=X}n.call(se.prototype)}}else{try{throw Error()}catch(X){Q=X}(se=n())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),w=y[0],S=y[1];if(w&&S){var P=w.split(`
`),$=S.split(`
`);for(h=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(c===P.length||h===$.length)for(c=P.length-1,h=$.length-1;1<=c&&0<=h&&P[c]!==$[h];)h--;for(;1<=c&&0<=h;c--,h--)if(P[c]!==$[h]){if(c!==1||h!==1)do if(c--,h--,0>h||P[c]!==$[h]){var ee=`
`+P[c].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=c&&0<=h);break}}}finally{vl=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ir(o):""}function _l(n,s){switch(n.tag){case 26:case 27:case 5:return Ir(n.type);case 16:return Ir("Lazy");case 13:return n.child!==s&&s!==null?Ir("Suspense Fallback"):Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 15:return Bi(n.type,!1);case 11:return Bi(n.type.render,!1);case 1:return Bi(n.type,!0);case 31:return Ir("Activity");default:return""}}function El(n){try{var s="",o=null;do s+=_l(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Dt=Object.prototype.hasOwnProperty,Gt=r.unstable_scheduleCallback,Us=r.unstable_cancelCallback,ff=r.unstable_shouldYield,du=r.unstable_requestPaint,pn=r.unstable_now,qi=r.unstable_getCurrentPriorityLevel,bl=r.unstable_ImmediatePriority,wl=r.unstable_UserBlockingPriority,zs=r.unstable_NormalPriority,mf=r.unstable_LowPriority,hu=r.unstable_IdlePriority,fu=r.log,mu=r.unstable_setDisableYieldValue,or=null,tn=null;function Fn(n){if(typeof fu=="function"&&mu(n),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(or,n)}catch{}}var It=Math.clz32?Math.clz32:pu,gu=Math.log,$a=Math.LN2;function pu(n){return n>>>=0,n===0?32:31-(gu(n)/$a|0)|0}var Nr=256,Fi=262144,Ot=4194304;function Cr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rr(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var h=0,y=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~y,c!==0?h=Cr(c):(w&=S,w!==0?h=Cr(w):o||(o=S&~n,o!==0&&(h=Cr(o))))):(S=c&~y,S!==0?h=Cr(S):w!==0?h=Cr(w):o||(o=c&~n,o!==0&&(h=Cr(o)))),h===0?0:s!==0&&s!==h&&(s&y)===0&&(y=h&-h,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:h}function lr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function gf(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yu(){var n=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),n}function kr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Hi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pf(n,s,o,c,h,y){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,P=n.expirationTimes,$=n.hiddenUpdates;for(o=w&~o;0<o;){var ee=31-It(o),se=1<<ee;S[ee]=0,P[ee]=-1;var Q=$[ee];if(Q!==null)for($[ee]=null,ee=0;ee<Q.length;ee++){var X=Q[ee];X!==null&&(X.lane&=-536870913)}o&=~se}c!==0&&Gi(n,c,0),y!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=y&~(w&~s))}function Gi(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-It(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function xl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-It(o),h=1<<c;h&s|n[c]&s&&(n[c]|=s),o&=~h}}function Tl(n,s){var o=s&-s;return o=(o&42)!==0?1:$i(o),(o&(n.suspendedLanes|s))!==0?0:o}function $i(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function as(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function vu(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:H_(n.type))}function cr(n,s){var o=ue.p;try{return ue.p=n,s()}finally{ue.p=o}}var ur=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ur,Yt="__reactProps$"+ur,Dr="__reactContainer$"+ur,Ka="__reactEvents$"+ur,yf="__reactListeners$"+ur,_u="__reactHandles$"+ur,Eu="__reactResources$"+ur,Or="__reactMarker$"+ur;function Qa(n){delete n[Mt],delete n[Yt],delete n[Ka],delete n[yf],delete n[_u]}function Mr(n){var s=n[Mt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Dr]||o[Mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=N_(n);n!==null;){if(o=n[Mt])return o;n=N_(n)}return s}n=o,o=n.parentNode}return null}function Hn(n){if(n=n[Mt]||n[Dr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Rn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function jr(n){var s=n[Eu];return s||(s=n[Eu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(n){n[Or]=!0}var Sl=new Set,Al={};function Vr(n,s){Lr(n,s),Lr(n+"Capture",s)}function Lr(n,s){for(Al[n]=s,n=0;n<s.length;n++)Sl.add(s[n])}var Il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nl={},Cl={};function bu(n){return Dt.call(Cl,n)?!0:Dt.call(Nl,n)?!1:Il.test(n)?Cl[n]=!0:(Nl[n]=!0,!1)}function Ya(n,s,o){if(bu(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function kn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Vt(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function Xt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bs(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rl(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,y=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function et(n){if(!n._valueTracker){var s=Bs(n)?"checked":"value";n._valueTracker=Rl(n,s,""+n[s])}}function Ki(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Bs(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function Pr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Qi=/[\n"\\]/g;function bn(n){return n.replace(Qi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xa(n,s,o,c,h,y,w,S){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),s!=null?w==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Xt(s)):n.value!==""+Xt(s)&&(n.value=""+Xt(s)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),s!=null?kl(n,w,Xt(s)):o!=null?kl(n,w,Xt(o)):c!=null&&n.removeAttribute("value"),h==null&&y!=null&&(n.defaultChecked=!!y),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Xt(S):n.removeAttribute("name")}function wu(n,s,o,c,h,y,w,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){et(n);return}o=o!=null?""+Xt(o):"",s=s!=null?""+Xt(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),et(n)}function kl(n,s,o){s==="number"&&Pr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function qs(n,s,o,c){if(n=n.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<n.length;o++)h=s.hasOwnProperty("$"+n[o].value),n[o].selected!==h&&(n[o].selected=h),h&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Xt(o),s=null,h=0;h<n.length;h++){if(n[h].value===o){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function xu(n,s,o){if(s!=null&&(s=""+Xt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Xt(o):""}function Fs(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(Ne(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Xt(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),et(n)}function wn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dl(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||Tu.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ol(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&o[h]!==c&&Dl(n,h,c)}else for(var y in s)s.hasOwnProperty(y)&&Dl(n,y,s[y])}function Ja(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(n){return Hs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function dr(){}var Ml=null;function Gn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gs=null,Ur=null;function Yi(n){var s=Hn(n);if(s&&(n=s.stateNode)){var o=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Xa(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+bn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var h=c[Yt]||null;if(!h)throw Error(i(90));Xa(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Ki(c)}break e;case"textarea":xu(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&qs(n,!!o.multiple,s,!1)}}}var Za=!1;function $s(n,s,o){if(Za)return n(s,o);Za=!0;try{var c=n(s);return c}finally{if(Za=!1,(Gs!==null||Ur!==null)&&(vd(),Gs&&(s=Gs,n=Ur,Ur=Gs=null,Yi(s),n)))for(s=0;s<n.length;s++)Yi(n[s])}}function hr(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Yt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xi=!1;if($n)try{var st={};Object.defineProperty(st,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Xi=!1}var zr=null,jl=null,Ji=null;function Vl(){if(Ji)return Ji;var n,s=jl,o=s.length,c,h="value"in zr?zr.value:zr.textContent,y=h.length;for(n=0;n<o&&s[n]===h[n];n++);var w=o-n;for(c=1;c<=w&&s[o-c]===h[y-c];c++);return Ji=h.slice(n,1<c?1-c:void 0)}function Wi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function os(){return!0}function fr(){return!1}function nn(n){function s(o,c,h,y,w){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?os:fr,this.isPropagationStopped=fr,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),s}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Br=nn(ls),Ks=_({},ls,{view:0,detail:0}),Ll=nn(Ks),Qs,eo,qr,to=_({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qr&&(qr&&n.type==="mousemove"?(Qs=n.screenX-qr.screenX,eo=n.screenY-qr.screenY):eo=Qs=0,qr=n),Qs)},movementY:function(n){return"movementY"in n?n.movementY:eo}}),Pl=nn(to),Zi=_({},to,{dataTransfer:0}),Au=nn(Zi),Iu=_({},Ks,{relatedTarget:0}),ea=nn(Iu),Ul=_({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=nn(Ul),no=_({},ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cu=nn(no),Ru=_({},ls,{data:0}),Fr=nn(Ru),ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ou[n])?!!s[n]:!1}function Ys(){return Mu}var yn=_({},Ks,{key:function(n){if(n.key){var s=ku[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Wi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Du[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(n){return n.type==="keypress"?Wi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ju=nn(yn),Vu=_({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cs=nn(Vu),d=_({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),E=nn(d),x=_({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=nn(x),H=_({},to,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=nn(H),he=_({},ls,{newState:0,oldState:0}),De=nn(he),Nt=[9,13,27,32],Je=$n&&"CompositionEvent"in window,_t=null;$n&&"documentMode"in document&&(_t=document.documentMode);var Kn=$n&&"TextEvent"in window&&!_t,Hr=$n&&(!Je||_t&&8<_t&&11>=_t),mr=" ",gr=!1;function ta(n,s){switch(n){case"keyup":return Nt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ro(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var so=!1;function x1(n,s){switch(n){case"compositionend":return ro(s);case"keypress":return s.which!==32?null:(gr=!0,mr);case"textInput":return n=s.data,n===mr&&gr?null:n;default:return null}}function T1(n,s){if(so)return n==="compositionend"||!Je&&ta(n,s)?(n=Vl(),Ji=jl=zr=null,so=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Hr&&s.locale!=="ko"?null:s.data;default:return null}}var S1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!S1[n.type]:s==="textarea"}function Dy(n,s,o,c){Gs?Ur?Ur.push(c):Ur=[c]:Gs=c,s=Sd(s,"onChange"),0<s.length&&(o=new Br("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var zl=null,Bl=null;function A1(n){m_(n,0)}function Lu(n){var s=Rn(n);if(Ki(s))return n}function Oy(n,s){if(n==="change")return s}var My=!1;if($n){var vf;if($n){var _f="oninput"in document;if(!_f){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),_f=typeof jy.oninput=="function"}vf=_f}else vf=!1;My=vf&&(!document.documentMode||9<document.documentMode)}function Vy(){zl&&(zl.detachEvent("onpropertychange",Ly),Bl=zl=null)}function Ly(n){if(n.propertyName==="value"&&Lu(Bl)){var s=[];Dy(s,Bl,n,Gn(n)),$s(A1,s)}}function I1(n,s,o){n==="focusin"?(Vy(),zl=s,Bl=o,zl.attachEvent("onpropertychange",Ly)):n==="focusout"&&Vy()}function N1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lu(Bl)}function C1(n,s){if(n==="click")return Lu(s)}function R1(n,s){if(n==="input"||n==="change")return Lu(s)}function k1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Dn=typeof Object.is=="function"?Object.is:k1;function ql(n,s){if(Dn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Dt.call(s,h)||!Dn(n[h],s[h]))return!1}return!0}function Py(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uy(n,s){var o=Py(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Py(o)}}function zy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?zy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function By(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Pr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Pr(n.document)}return s}function Ef(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var D1=$n&&"documentMode"in document&&11>=document.documentMode,io=null,bf=null,Fl=null,wf=!1;function qy(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;wf||io==null||io!==Pr(c)||(c=io,"selectionStart"in c&&Ef(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Fl&&ql(Fl,c)||(Fl=c,c=Sd(bf,"onSelect"),0<c.length&&(s=new Br("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=io)))}function na(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var ao={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},xf={},Fy={};$n&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ra(n){if(xf[n])return xf[n];if(!ao[n])return n;var s=ao[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Fy)return xf[n]=s[o];return n}var Hy=ra("animationend"),Gy=ra("animationiteration"),$y=ra("animationstart"),O1=ra("transitionrun"),M1=ra("transitionstart"),j1=ra("transitioncancel"),Ky=ra("transitionend"),Qy=new Map,Tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tf.push("scrollEnd");function pr(n,s){Qy.set(n,s),Vr(s,[n])}var Pu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Qn=[],oo=0,Sf=0;function Uu(){for(var n=oo,s=Sf=oo=0;s<n;){var o=Qn[s];Qn[s++]=null;var c=Qn[s];Qn[s++]=null;var h=Qn[s];Qn[s++]=null;var y=Qn[s];if(Qn[s++]=null,c!==null&&h!==null){var w=c.pending;w===null?h.next=h:(h.next=w.next,w.next=h),c.pending=h}y!==0&&Yy(o,h,y)}}function zu(n,s,o,c){Qn[oo++]=n,Qn[oo++]=s,Qn[oo++]=o,Qn[oo++]=c,Sf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Af(n,s,o,c){return zu(n,s,o,c),Bu(n)}function sa(n,s){return zu(n,null,null,s),Bu(n)}function Yy(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var h=!1,y=n.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(h=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,h&&s!==null&&(h=31-It(o),n=y.hiddenUpdates,c=n[h],c===null?n[h]=[s]:c.push(s),s.lane=o|536870912),y):null}function Bu(n){if(50<dc)throw dc=0,jm=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var lo={};function V1(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(n,s,o,c){return new V1(n,s,o,c)}function If(n){return n=n.prototype,!(!n||!n.isReactComponent)}function us(n,s){var o=n.alternate;return o===null?(o=On(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Xy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function qu(n,s,o,c,h,y){var w=0;if(c=n,typeof n=="function")If(n)&&(w=1);else if(typeof n=="string")w=BS(n,o,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=On(31,o,s,h),n.elementType=C,n.lanes=y,n;case M:return ia(o.children,h,y,s);case k:w=8,h|=24;break;case F:return n=On(12,o,s,h|2),n.elementType=F,n.lanes=y,n;case ae:return n=On(13,o,s,h),n.elementType=ae,n.lanes=y,n;case fe:return n=On(19,o,s,h),n.elementType=fe,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:w=10;break e;case K:w=9;break e;case oe:w=11;break e;case R:w=14;break e;case I:w=16,c=null;break e}w=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=On(w,o,s,h),s.elementType=n,s.type=c,s.lanes=y,s}function ia(n,s,o,c){return n=On(7,n,c,s),n.lanes=o,n}function Nf(n,s,o){return n=On(6,n,null,s),n.lanes=o,n}function Jy(n){var s=On(18,null,null,0);return s.stateNode=n,s}function Cf(n,s,o){return s=On(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Wy=new WeakMap;function Yn(n,s){if(typeof n=="object"&&n!==null){var o=Wy.get(n);return o!==void 0?o:(s={value:n,source:s,stack:El(s)},Wy.set(n,s),s)}return{value:n,source:s,stack:El(s)}}var co=[],uo=0,Fu=null,Hl=0,Xn=[],Jn=0,Xs=null,Gr=1,$r="";function ds(n,s){co[uo++]=Hl,co[uo++]=Fu,Fu=n,Hl=s}function Zy(n,s,o){Xn[Jn++]=Gr,Xn[Jn++]=$r,Xn[Jn++]=Xs,Xs=n;var c=Gr;n=$r;var h=32-It(c)-1;c&=~(1<<h),o+=1;var y=32-It(s)+h;if(30<y){var w=h-h%5;y=(c&(1<<w)-1).toString(32),c>>=w,h-=w,Gr=1<<32-It(s)+h|o<<h|c,$r=y+n}else Gr=1<<y|o<<h|c,$r=n}function Rf(n){n.return!==null&&(ds(n,1),Zy(n,1,0))}function kf(n){for(;n===Fu;)Fu=co[--uo],co[uo]=null,Hl=co[--uo],co[uo]=null;for(;n===Xs;)Xs=Xn[--Jn],Xn[Jn]=null,$r=Xn[--Jn],Xn[Jn]=null,Gr=Xn[--Jn],Xn[Jn]=null}function e0(n,s){Xn[Jn++]=Gr,Xn[Jn++]=$r,Xn[Jn++]=Xs,Gr=s.id,$r=s.overflow,Xs=n}var rn=null,dt=null,He=!1,Js=null,Wn=!1,Df=Error(i(519));function Ws(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Yn(s,n)),Df}function t0(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Mt]=n,s[Yt]=c,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<fc.length;o++)Ve(fc[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),wu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),Fs(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||v_(s.textContent,o)?(c.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),c.onScroll!=null&&Ve("scroll",s),c.onScrollEnd!=null&&Ve("scrollend",s),c.onClick!=null&&(s.onclick=dr),s=!0):s=!1,s||Ws(n,!0)}function n0(n){for(rn=n.return;rn;)switch(rn.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:rn=rn.return}}function ho(n){if(n!==rn)return!1;if(!He)return n0(n),He=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Xm(n.type,n.memoizedProps)),o=!o),o&&dt&&Ws(n),n0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));dt=I_(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));dt=I_(n)}else s===27?(s=dt,hi(n.type)?(n=tg,tg=null,dt=n):dt=s):dt=rn?er(n.stateNode.nextSibling):null;return!0}function aa(){dt=rn=null,He=!1}function Of(){var n=Js;return n!==null&&(An===null?An=n:An.push.apply(An,n),Js=null),n}function Gl(n){Js===null?Js=[n]:Js.push(n)}var Mf=O(null),oa=null,hs=null;function Zs(n,s,o){ce(Mf,s._currentValue),s._currentValue=o}function fs(n){n._currentValue=Mf.current,J(Mf)}function jf(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function Vf(n,s,o,c){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var y=h.dependencies;if(y!==null){var w=h.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=h;for(var P=0;P<s.length;P++)if(S.context===s[P]){y.lanes|=o,S=y.alternate,S!==null&&(S.lanes|=o),jf(y.return,o,n),c||(w=null);break e}y=S.next}}else if(h.tag===18){if(w=h.return,w===null)throw Error(i(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),jf(w,o,n),w=null}else w=h.child;if(w!==null)w.return=h;else for(w=h;w!==null;){if(w===n){w=null;break}if(h=w.sibling,h!==null){h.return=w.return,w=h;break}w=w.return}h=w}}function fo(n,s,o,c){n=null;for(var h=s,y=!1;h!==null;){if(!y){if((h.flags&524288)!==0)y=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var w=h.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var S=h.type;Dn(h.pendingProps.value,w.value)||(n!==null?n.push(S):n=[S])}}else if(h===Le.current){if(w=h.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(vc):n=[vc])}h=h.return}n!==null&&Vf(s,n,o,c),s.flags|=262144}function Hu(n){for(n=n.firstContext;n!==null;){if(!Dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function la(n){oa=n,hs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function sn(n){return r0(oa,n)}function Gu(n,s){return oa===null&&la(n),r0(n,s)}function r0(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},hs===null){if(n===null)throw Error(i(308));hs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else hs=hs.next=s;return o}var L1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},P1=r.unstable_scheduleCallback,U1=r.unstable_NormalPriority,Lt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new L1,data:new Map,refCount:0}}function $l(n){n.refCount--,n.refCount===0&&P1(U1,function(){n.controller.abort()})}var Kl=null,Pf=0,mo=0,go=null;function z1(n,s){if(Kl===null){var o=Kl=[];Pf=0,mo=Bm(),go={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Pf++,s.then(s0,s0),s}function s0(){if(--Pf===0&&Kl!==null){go!==null&&(go.status="fulfilled");var n=Kl;Kl=null,mo=0,go=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function B1(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var i0=W.S;W.S=function(n,s){qv=pn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&z1(n,s),i0!==null&&i0(n,s)};var ca=O(null);function Uf(){var n=ca.current;return n!==null?n:ut.pooledCache}function $u(n,s){s===null?ce(ca,ca.current):ce(ca,s.pool)}function a0(){var n=Uf();return n===null?null:{parent:Lt._currentValue,pool:n}}var po=Error(i(460)),zf=Error(i(474)),Ku=Error(i(542)),Qu={then:function(){}};function o0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function l0(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(dr,dr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,u0(n),n;default:if(typeof s.status=="string")s.then(dr,dr);else{if(n=ut,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,u0(n),n}throw da=s,po}}function ua(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(da=o,po):o}}var da=null;function c0(){if(da===null)throw Error(i(459));var n=da;return da=null,n}function u0(n){if(n===po||n===Ku)throw Error(i(483))}var yo=null,Ql=0;function Yu(n){var s=Ql;return Ql+=1,yo===null&&(yo=[]),l0(yo,n,s)}function Yl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Xu(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function d0(n){function s(B,z){if(n){var G=B.deletions;G===null?(B.deletions=[z],B.flags|=16):G.push(z)}}function o(B,z){if(!n)return null;for(;z!==null;)s(B,z),z=z.sibling;return null}function c(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function h(B,z){return B=us(B,z),B.index=0,B.sibling=null,B}function y(B,z,G){return B.index=G,n?(G=B.alternate,G!==null?(G=G.index,G<z?(B.flags|=67108866,z):G):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function w(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function S(B,z,G,ne){return z===null||z.tag!==6?(z=Nf(G,B.mode,ne),z.return=B,z):(z=h(z,G),z.return=B,z)}function P(B,z,G,ne){var we=G.type;return we===M?ee(B,z,G.props.children,ne,G.key):z!==null&&(z.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&ua(we)===z.type)?(z=h(z,G.props),Yl(z,G),z.return=B,z):(z=qu(G.type,G.key,G.props,null,B.mode,ne),Yl(z,G),z.return=B,z)}function $(B,z,G,ne){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=Cf(G,B.mode,ne),z.return=B,z):(z=h(z,G.children||[]),z.return=B,z)}function ee(B,z,G,ne,we){return z===null||z.tag!==7?(z=ia(G,B.mode,ne,we),z.return=B,z):(z=h(z,G),z.return=B,z)}function se(B,z,G){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Nf(""+z,B.mode,G),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return G=qu(z.type,z.key,z.props,null,B.mode,G),Yl(G,z),G.return=B,G;case D:return z=Cf(z,B.mode,G),z.return=B,z;case I:return z=ua(z),se(B,z,G)}if(Ne(z)||j(z))return z=ia(z,B.mode,G,null),z.return=B,z;if(typeof z.then=="function")return se(B,Yu(z),G);if(z.$$typeof===q)return se(B,Gu(B,z),G);Xu(B,z)}return null}function Q(B,z,G,ne){var we=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return we!==null?null:S(B,z,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return G.key===we?P(B,z,G,ne):null;case D:return G.key===we?$(B,z,G,ne):null;case I:return G=ua(G),Q(B,z,G,ne)}if(Ne(G)||j(G))return we!==null?null:ee(B,z,G,ne,null);if(typeof G.then=="function")return Q(B,z,Yu(G),ne);if(G.$$typeof===q)return Q(B,z,Gu(B,G),ne);Xu(B,G)}return null}function X(B,z,G,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(G)||null,S(z,B,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return B=B.get(ne.key===null?G:ne.key)||null,P(z,B,ne,we);case D:return B=B.get(ne.key===null?G:ne.key)||null,$(z,B,ne,we);case I:return ne=ua(ne),X(B,z,G,ne,we)}if(Ne(ne)||j(ne))return B=B.get(G)||null,ee(z,B,ne,we,null);if(typeof ne.then=="function")return X(B,z,G,Yu(ne),we);if(ne.$$typeof===q)return X(B,z,G,Gu(z,ne),we);Xu(z,ne)}return null}function pe(B,z,G,ne){for(var we=null,Ye=null,ve=z,Me=z=0,Ue=null;ve!==null&&Me<G.length;Me++){ve.index>Me?(Ue=ve,ve=null):Ue=ve.sibling;var Xe=Q(B,ve,G[Me],ne);if(Xe===null){ve===null&&(ve=Ue);break}n&&ve&&Xe.alternate===null&&s(B,ve),z=y(Xe,z,Me),Ye===null?we=Xe:Ye.sibling=Xe,Ye=Xe,ve=Ue}if(Me===G.length)return o(B,ve),He&&ds(B,Me),we;if(ve===null){for(;Me<G.length;Me++)ve=se(B,G[Me],ne),ve!==null&&(z=y(ve,z,Me),Ye===null?we=ve:Ye.sibling=ve,Ye=ve);return He&&ds(B,Me),we}for(ve=c(ve);Me<G.length;Me++)Ue=X(ve,B,Me,G[Me],ne),Ue!==null&&(n&&Ue.alternate!==null&&ve.delete(Ue.key===null?Me:Ue.key),z=y(Ue,z,Me),Ye===null?we=Ue:Ye.sibling=Ue,Ye=Ue);return n&&ve.forEach(function(yi){return s(B,yi)}),He&&ds(B,Me),we}function Se(B,z,G,ne){if(G==null)throw Error(i(151));for(var we=null,Ye=null,ve=z,Me=z=0,Ue=null,Xe=G.next();ve!==null&&!Xe.done;Me++,Xe=G.next()){ve.index>Me?(Ue=ve,ve=null):Ue=ve.sibling;var yi=Q(B,ve,Xe.value,ne);if(yi===null){ve===null&&(ve=Ue);break}n&&ve&&yi.alternate===null&&s(B,ve),z=y(yi,z,Me),Ye===null?we=yi:Ye.sibling=yi,Ye=yi,ve=Ue}if(Xe.done)return o(B,ve),He&&ds(B,Me),we;if(ve===null){for(;!Xe.done;Me++,Xe=G.next())Xe=se(B,Xe.value,ne),Xe!==null&&(z=y(Xe,z,Me),Ye===null?we=Xe:Ye.sibling=Xe,Ye=Xe);return He&&ds(B,Me),we}for(ve=c(ve);!Xe.done;Me++,Xe=G.next())Xe=X(ve,B,Me,Xe.value,ne),Xe!==null&&(n&&Xe.alternate!==null&&ve.delete(Xe.key===null?Me:Xe.key),z=y(Xe,z,Me),Ye===null?we=Xe:Ye.sibling=Xe,Ye=Xe);return n&&ve.forEach(function(WS){return s(B,WS)}),He&&ds(B,Me),we}function ot(B,z,G,ne){if(typeof G=="object"&&G!==null&&G.type===M&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case T:e:{for(var we=G.key;z!==null;){if(z.key===we){if(we=G.type,we===M){if(z.tag===7){o(B,z.sibling),ne=h(z,G.props.children),ne.return=B,B=ne;break e}}else if(z.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&ua(we)===z.type){o(B,z.sibling),ne=h(z,G.props),Yl(ne,G),ne.return=B,B=ne;break e}o(B,z);break}else s(B,z);z=z.sibling}G.type===M?(ne=ia(G.props.children,B.mode,ne,G.key),ne.return=B,B=ne):(ne=qu(G.type,G.key,G.props,null,B.mode,ne),Yl(ne,G),ne.return=B,B=ne)}return w(B);case D:e:{for(we=G.key;z!==null;){if(z.key===we)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){o(B,z.sibling),ne=h(z,G.children||[]),ne.return=B,B=ne;break e}else{o(B,z);break}else s(B,z);z=z.sibling}ne=Cf(G,B.mode,ne),ne.return=B,B=ne}return w(B);case I:return G=ua(G),ot(B,z,G,ne)}if(Ne(G))return pe(B,z,G,ne);if(j(G)){if(we=j(G),typeof we!="function")throw Error(i(150));return G=we.call(G),Se(B,z,G,ne)}if(typeof G.then=="function")return ot(B,z,Yu(G),ne);if(G.$$typeof===q)return ot(B,z,Gu(B,G),ne);Xu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,z!==null&&z.tag===6?(o(B,z.sibling),ne=h(z,G),ne.return=B,B=ne):(o(B,z),ne=Nf(G,B.mode,ne),ne.return=B,B=ne),w(B)):o(B,z)}return function(B,z,G,ne){try{Ql=0;var we=ot(B,z,G,ne);return yo=null,we}catch(ve){if(ve===po||ve===Ku)throw ve;var Ye=On(29,ve,null,B.mode);return Ye.lanes=ne,Ye.return=B,Ye}finally{}}}var ha=d0(!0),h0=d0(!1),ei=!1;function Bf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ti(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ni(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Bu(n),Yy(n,null,o),s}return zu(n,c,s,o),Bu(n)}function Xl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,xl(n,o)}}function Ff(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?h=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?h=y=s:y=y.next=s}else h=y=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Hf=!1;function Jl(){if(Hf){var n=go;if(n!==null)throw n}}function Wl(n,s,o,c){Hf=!1;var h=n.updateQueue;ei=!1;var y=h.firstBaseUpdate,w=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var P=S,$=P.next;P.next=null,w===null?y=$:w.next=$,w=P;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==w&&(S===null?ee.firstBaseUpdate=$:S.next=$,ee.lastBaseUpdate=P))}if(y!==null){var se=h.baseState;w=0,ee=$=P=null,S=y;do{var Q=S.lane&-536870913,X=Q!==S.lane;if(X?(Pe&Q)===Q:(c&Q)===Q){Q!==0&&Q===mo&&(Hf=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var pe=n,Se=S;Q=s;var ot=o;switch(Se.tag){case 1:if(pe=Se.payload,typeof pe=="function"){se=pe.call(ot,se,Q);break e}se=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Se.payload,Q=typeof pe=="function"?pe.call(ot,se,Q):pe,Q==null)break e;se=_({},se,Q);break e;case 2:ei=!0}}Q=S.callback,Q!==null&&(n.flags|=64,X&&(n.flags|=8192),X=h.callbacks,X===null?h.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?($=ee=X,P=se):ee=ee.next=X,w|=Q;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;X=S,S=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);ee===null&&(P=se),h.baseState=P,h.firstBaseUpdate=$,h.lastBaseUpdate=ee,y===null&&(h.shared.lanes=0),oi|=w,n.lanes=w,n.memoizedState=se}}function f0(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function m0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)f0(o[n],s)}var vo=O(null),Ju=O(0);function g0(n,s){n=ws,ce(Ju,n),ce(vo,s),ws=n|s.baseLanes}function Gf(){ce(Ju,ws),ce(vo,vo.current)}function $f(){ws=Ju.current,J(vo),J(Ju)}var Mn=O(null),Zn=null;function ri(n){var s=n.alternate;ce(Ct,Ct.current&1),ce(Mn,n),Zn===null&&(s===null||vo.current!==null||s.memoizedState!==null)&&(Zn=n)}function Kf(n){ce(Ct,Ct.current),ce(Mn,n),Zn===null&&(Zn=n)}function p0(n){n.tag===22?(ce(Ct,Ct.current),ce(Mn,n),Zn===null&&(Zn=n)):si()}function si(){ce(Ct,Ct.current),ce(Mn,Mn.current)}function jn(n){J(Mn),Zn===n&&(Zn=null),J(Ct)}var Ct=O(0);function Wu(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Zm(o)||eg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ms=0,Oe=null,it=null,Pt=null,Zu=!1,_o=!1,fa=!1,ed=0,Zl=0,Eo=null,q1=0;function St(){throw Error(i(321))}function Qf(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Dn(n[o],s[o]))return!1;return!0}function Yf(n,s,o,c,h,y){return ms=y,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=n===null||n.memoizedState===null?Z0:um,fa=!1,y=o(c,h),fa=!1,_o&&(y=v0(s,o,c,h)),y0(n),y}function y0(n){W.H=nc;var s=it!==null&&it.next!==null;if(ms=0,Pt=it=Oe=null,Zu=!1,Zl=0,Eo=null,s)throw Error(i(300));n===null||Ut||(n=n.dependencies,n!==null&&Hu(n)&&(Ut=!0))}function v0(n,s,o,c){Oe=n;var h=0;do{if(_o&&(Eo=null),Zl=0,_o=!1,25<=h)throw Error(i(301));if(h+=1,Pt=it=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}W.H=ev,y=s(o,c)}while(_o);return y}function F1(){var n=W.H,s=n.useState()[0];return s=typeof s.then=="function"?ec(s):s,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(Oe.flags|=1024),s}function Xf(){var n=ed!==0;return ed=0,n}function Jf(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Wf(n){if(Zu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Zu=!1}ms=0,Pt=it=Oe=null,_o=!1,Zl=ed=0,Eo=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Oe.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Rt(){if(it===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var s=Pt===null?Oe.memoizedState:Pt.next;if(s!==null)Pt=s,it=n;else{if(n===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Pt===null?Oe.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(n){var s=Zl;return Zl+=1,Eo===null&&(Eo=[]),n=l0(Eo,n,s),s=Oe,(Pt===null?s.memoizedState:Pt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?Z0:um),n}function nd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ec(n);if(n.$$typeof===q)return sn(n)}throw Error(i(438,String(n)))}function Zf(n){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=td(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=U;return s.index++,o}function gs(n,s){return typeof s=="function"?s(n):s}function rd(n){var s=Rt();return em(s,it,n)}function em(n,s,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var h=n.baseQueue,y=c.pending;if(y!==null){if(h!==null){var w=h.next;h.next=y.next,y.next=w}s.baseQueue=h=y,c.pending=null}if(y=n.baseState,h===null)n.memoizedState=y;else{s=h.next;var S=w=null,P=null,$=s,ee=!1;do{var se=$.lane&-536870913;if(se!==$.lane?(Pe&se)===se:(ms&se)===se){var Q=$.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),se===mo&&(ee=!0);else if((ms&Q)===Q){$=$.next,Q===mo&&(ee=!0);continue}else se={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(S=P=se,w=y):P=P.next=se,Oe.lanes|=Q,oi|=Q;se=$.action,fa&&o(y,se),y=$.hasEagerState?$.eagerState:o(y,se)}else Q={lane:se,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(S=P=Q,w=y):P=P.next=Q,Oe.lanes|=se,oi|=se;$=$.next}while($!==null&&$!==s);if(P===null?w=y:P.next=S,!Dn(y,n.memoizedState)&&(Ut=!0,ee&&(o=go,o!==null)))throw o;n.memoizedState=y,n.baseState=w,n.baseQueue=P,c.lastRenderedState=y}return h===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function tm(n){var s=Rt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,h=o.pending,y=s.memoizedState;if(h!==null){o.pending=null;var w=h=h.next;do y=n(y,w.action),w=w.next;while(w!==h);Dn(y,s.memoizedState)||(Ut=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,c]}function _0(n,s,o){var c=Oe,h=Rt(),y=He;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Dn((it||h).memoizedState,o);if(w&&(h.memoizedState=o,Ut=!0),h=h.queue,sm(w0.bind(null,c,h,n),[n]),h.getSnapshot!==s||w||Pt!==null&&Pt.memoizedState.tag&1){if(c.flags|=2048,bo(9,{destroy:void 0},b0.bind(null,c,h,o,s),null),ut===null)throw Error(i(349));y||(ms&127)!==0||E0(c,s,o)}return o}function E0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=td(),Oe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function b0(n,s,o,c){s.value=o,s.getSnapshot=c,x0(s)&&T0(n)}function w0(n,s,o){return o(function(){x0(s)&&T0(n)})}function x0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Dn(n,o)}catch{return!0}}function T0(n){var s=sa(n,2);s!==null&&In(s,n,2)}function nm(n){var s=vn();if(typeof n=="function"){var o=n;if(n=o(),fa){Fn(!0);try{o()}finally{Fn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:n},s}function S0(n,s,o,c){return n.baseState=o,em(n,it,typeof c=="function"?c:gs)}function H1(n,s,o,c,h){if(ad(n))throw Error(i(485));if(n=s.action,n!==null){var y={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};W.T!==null?o(!0):y.isTransition=!1,c(y),o=s.pending,o===null?(y.next=s.pending=y,A0(s,y)):(y.next=o.next,s.pending=o.next=y)}}function A0(n,s){var o=s.action,c=s.payload,h=n.state;if(s.isTransition){var y=W.T,w={};W.T=w;try{var S=o(h,c),P=W.S;P!==null&&P(w,S),I0(n,s,S)}catch($){rm(n,s,$)}finally{y!==null&&w.types!==null&&(y.types=w.types),W.T=y}}else try{y=o(h,c),I0(n,s,y)}catch($){rm(n,s,$)}}function I0(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){N0(n,s,c)},function(c){return rm(n,s,c)}):N0(n,s,o)}function N0(n,s,o){s.status="fulfilled",s.value=o,C0(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,A0(n,o)))}function rm(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,C0(s),s=s.next;while(s!==c)}n.action=null}function C0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function R0(n,s){return s}function k0(n,s){if(He){var o=ut.formState;if(o!==null){e:{var c=Oe;if(He){if(dt){t:{for(var h=dt,y=Wn;h.nodeType!==8;){if(!y){h=null;break t}if(h=er(h.nextSibling),h===null){h=null;break t}}y=h.data,h=y==="F!"||y==="F"?h:null}if(h){dt=er(h.nextSibling),c=h.data==="F!";break e}}Ws(c)}c=!1}c&&(s=o[0])}}return o=vn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:s},o.queue=c,o=X0.bind(null,Oe,c),c.dispatch=o,c=nm(!1),y=cm.bind(null,Oe,!1,c.queue),c=vn(),h={state:s,dispatch:null,action:n,pending:null},c.queue=h,o=H1.bind(null,Oe,h,y,o),h.dispatch=o,c.memoizedState=n,[s,o,!1]}function D0(n){var s=Rt();return O0(s,it,n)}function O0(n,s,o){if(s=em(n,s,R0)[0],n=rd(gs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ec(s)}catch(w){throw w===po?Ku:w}else c=s;s=Rt();var h=s.queue,y=h.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,bo(9,{destroy:void 0},G1.bind(null,h,o),null)),[c,y,n]}function G1(n,s){n.action=s}function M0(n){var s=Rt(),o=it;if(o!==null)return O0(s,o,n);Rt(),s=s.memoizedState,o=Rt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function bo(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=td(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function j0(){return Rt().memoizedState}function sd(n,s,o,c){var h=vn();Oe.flags|=n,h.memoizedState=bo(1|s,{destroy:void 0},o,c===void 0?null:c)}function id(n,s,o,c){var h=Rt();c=c===void 0?null:c;var y=h.memoizedState.inst;it!==null&&c!==null&&Qf(c,it.memoizedState.deps)?h.memoizedState=bo(s,y,o,c):(Oe.flags|=n,h.memoizedState=bo(1|s,y,o,c))}function V0(n,s){sd(8390656,8,n,s)}function sm(n,s){id(2048,8,n,s)}function $1(n){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=td(),Oe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function L0(n){var s=Rt().memoizedState;return $1({ref:s,nextImpl:n}),function(){if((We&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function P0(n,s){return id(4,2,n,s)}function U0(n,s){return id(4,4,n,s)}function z0(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function B0(n,s,o){o=o!=null?o.concat([n]):null,id(4,4,z0.bind(null,s,n),o)}function im(){}function q0(n,s){var o=Rt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Qf(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function F0(n,s){var o=Rt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Qf(s,c[1]))return c[0];if(c=n(),fa){Fn(!0);try{n()}finally{Fn(!1)}}return o.memoizedState=[c,s],c}function am(n,s,o){return o===void 0||(ms&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=Hv(),Oe.lanes|=n,oi|=n,o)}function H0(n,s,o,c){return Dn(o,s)?o:vo.current!==null?(n=am(n,o,c),Dn(n,s)||(Ut=!0),n):(ms&42)===0||(ms&1073741824)!==0&&(Pe&261930)===0?(Ut=!0,n.memoizedState=o):(n=Hv(),Oe.lanes|=n,oi|=n,s)}function G0(n,s,o,c,h){var y=ue.p;ue.p=y!==0&&8>y?y:8;var w=W.T,S={};W.T=S,cm(n,!1,s,o);try{var P=h(),$=W.S;if($!==null&&$(S,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ee=B1(P,c);tc(n,s,ee,Pn(n))}else tc(n,s,c,Pn(n))}catch(se){tc(n,s,{then:function(){},status:"rejected",reason:se},Pn())}finally{ue.p=y,w!==null&&S.types!==null&&(w.types=S.types),W.T=w}}function K1(){}function om(n,s,o,c){if(n.tag!==5)throw Error(i(476));var h=$0(n).queue;G0(n,h,s,le,o===null?K1:function(){return K0(n),o(c)})}function $0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:le},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function K0(n){var s=$0(n);s.next===null&&(s=n.alternate.memoizedState),tc(n,s.next.queue,{},Pn())}function lm(){return sn(vc)}function Q0(){return Rt().memoizedState}function Y0(){return Rt().memoizedState}function Q1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Pn();n=ti(o);var c=ni(s,n,o);c!==null&&(In(c,s,o),Xl(c,s,o)),s={cache:Lf()},n.payload=s;return}s=s.return}}function Y1(n,s,o){var c=Pn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ad(n)?J0(s,o):(o=Af(n,s,o,c),o!==null&&(In(o,n,c),W0(o,s,c)))}function X0(n,s,o){var c=Pn();tc(n,s,o,c)}function tc(n,s,o,c){var h={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ad(n))J0(s,h);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,S=y(w,o);if(h.hasEagerState=!0,h.eagerState=S,Dn(S,w))return zu(n,s,h,0),ut===null&&Uu(),!1}catch{}finally{}if(o=Af(n,s,h,c),o!==null)return In(o,n,c),W0(o,s,c),!0}return!1}function cm(n,s,o,c){if(c={lane:2,revertLane:Bm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ad(n)){if(s)throw Error(i(479))}else s=Af(n,o,c,2),s!==null&&In(s,n,2)}function ad(n){var s=n.alternate;return n===Oe||s!==null&&s===Oe}function J0(n,s){_o=Zu=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function W0(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,xl(n,o)}}var nc={readContext:sn,use:nd,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};nc.useEffectEvent=St;var Z0={readContext:sn,use:nd,useCallback:function(n,s){return vn().memoizedState=[n,s===void 0?null:s],n},useContext:sn,useEffect:V0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,sd(4194308,4,z0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return sd(4194308,4,n,s)},useInsertionEffect:function(n,s){sd(4,2,n,s)},useMemo:function(n,s){var o=vn();s=s===void 0?null:s;var c=n();if(fa){Fn(!0);try{n()}finally{Fn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=vn();if(o!==void 0){var h=o(s);if(fa){Fn(!0);try{o(s)}finally{Fn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},c.queue=n,n=n.dispatch=Y1.bind(null,Oe,n),[c.memoizedState,n]},useRef:function(n){var s=vn();return n={current:n},s.memoizedState=n},useState:function(n){n=nm(n);var s=n.queue,o=X0.bind(null,Oe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:im,useDeferredValue:function(n,s){var o=vn();return am(o,n,s)},useTransition:function(){var n=nm(!1);return n=G0.bind(null,Oe,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Oe,h=vn();if(He){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ut===null)throw Error(i(349));(Pe&127)!==0||E0(c,s,o)}h.memoizedState=o;var y={value:o,getSnapshot:s};return h.queue=y,V0(w0.bind(null,c,y,n),[n]),c.flags|=2048,bo(9,{destroy:void 0},b0.bind(null,c,y,o,s),null),o},useId:function(){var n=vn(),s=ut.identifierPrefix;if(He){var o=$r,c=Gr;o=(c&~(1<<32-It(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=ed++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=q1++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:lm,useFormState:k0,useActionState:k0,useOptimistic:function(n){var s=vn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cm.bind(null,Oe,!0,o),o.dispatch=s,[n,s]},useMemoCache:Zf,useCacheRefresh:function(){return vn().memoizedState=Q1.bind(null,Oe)},useEffectEvent:function(n){var s=vn(),o={impl:n};return s.memoizedState=o,function(){if((We&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},um={readContext:sn,use:nd,useCallback:q0,useContext:sn,useEffect:sm,useImperativeHandle:B0,useInsertionEffect:P0,useLayoutEffect:U0,useMemo:F0,useReducer:rd,useRef:j0,useState:function(){return rd(gs)},useDebugValue:im,useDeferredValue:function(n,s){var o=Rt();return H0(o,it.memoizedState,n,s)},useTransition:function(){var n=rd(gs)[0],s=Rt().memoizedState;return[typeof n=="boolean"?n:ec(n),s]},useSyncExternalStore:_0,useId:Q0,useHostTransitionStatus:lm,useFormState:D0,useActionState:D0,useOptimistic:function(n,s){var o=Rt();return S0(o,it,n,s)},useMemoCache:Zf,useCacheRefresh:Y0};um.useEffectEvent=L0;var ev={readContext:sn,use:nd,useCallback:q0,useContext:sn,useEffect:sm,useImperativeHandle:B0,useInsertionEffect:P0,useLayoutEffect:U0,useMemo:F0,useReducer:tm,useRef:j0,useState:function(){return tm(gs)},useDebugValue:im,useDeferredValue:function(n,s){var o=Rt();return it===null?am(o,n,s):H0(o,it.memoizedState,n,s)},useTransition:function(){var n=tm(gs)[0],s=Rt().memoizedState;return[typeof n=="boolean"?n:ec(n),s]},useSyncExternalStore:_0,useId:Q0,useHostTransitionStatus:lm,useFormState:M0,useActionState:M0,useOptimistic:function(n,s){var o=Rt();return it!==null?S0(o,it,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:Y0};ev.useEffectEvent=L0;function dm(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:_({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var hm={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=Pn(),h=ti(c);h.payload=s,o!=null&&(h.callback=o),s=ni(n,h,c),s!==null&&(In(s,n,c),Xl(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=Pn(),h=ti(c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=ni(n,h,c),s!==null&&(In(s,n,c),Xl(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Pn(),c=ti(o);c.tag=2,s!=null&&(c.callback=s),s=ni(n,c,o),s!==null&&(In(s,n,o),Xl(s,n,o))}};function tv(n,s,o,c,h,y,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,w):s.prototype&&s.prototype.isPureReactComponent?!ql(o,c)||!ql(h,y):!0}function nv(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&hm.enqueueReplaceState(s,s.state,null)}function ma(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=_({},o));for(var h in n)o[h]===void 0&&(o[h]=n[h])}return o}function rv(n){Pu(n)}function sv(n){console.error(n)}function iv(n){Pu(n)}function od(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function av(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function fm(n,s,o){return o=ti(o),o.tag=3,o.payload={element:null},o.callback=function(){od(n,s)},o}function ov(n){return n=ti(n),n.tag=3,n}function lv(n,s,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var y=c.value;n.payload=function(){return h(y)},n.callback=function(){av(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){av(s,o,c),typeof h!="function"&&(li===null?li=new Set([this]):li.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function X1(n,s,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&fo(s,o,h,!0),o=Mn.current,o!==null){switch(o.tag){case 31:case 13:return Zn===null?_d():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Qu?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Pm(n,c,h)),!1;case 22:return o.flags|=65536,c===Qu?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Pm(n,c,h)),!1}throw Error(i(435,o.tag))}return Pm(n,c,h),_d(),!1}if(He)return s=Mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==Df&&(n=Error(i(422),{cause:c}),Gl(Yn(n,o)))):(c!==Df&&(s=Error(i(423),{cause:c}),Gl(Yn(s,o))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,c=Yn(c,o),h=fm(n.stateNode,c,h),Ff(n,h),At!==4&&(At=2)),!1;var y=Error(i(520),{cause:c});if(y=Yn(y,o),uc===null?uc=[y]:uc.push(y),At!==4&&(At=2),s===null)return!0;c=Yn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=h&-h,o.lanes|=n,n=fm(o.stateNode,c,n),Ff(o,n),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(li===null||!li.has(y))))return o.flags|=65536,h&=-h,o.lanes|=h,h=ov(h),lv(h,n,o,c),Ff(o,h),!1}o=o.return}while(o!==null);return!1}var mm=Error(i(461)),Ut=!1;function an(n,s,o,c){s.child=n===null?h0(s,null,o,c):ha(s,n.child,o,c)}function cv(n,s,o,c,h){o=o.render;var y=s.ref;if("ref"in c){var w={};for(var S in c)S!=="ref"&&(w[S]=c[S])}else w=c;return la(s),c=Yf(n,s,o,w,y,h),S=Xf(),n!==null&&!Ut?(Jf(n,s,h),ps(n,s,h)):(He&&S&&Rf(s),s.flags|=1,an(n,s,c,h),s.child)}function uv(n,s,o,c,h){if(n===null){var y=o.type;return typeof y=="function"&&!If(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,dv(n,s,y,c,h)):(n=qu(o.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!wm(n,h)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:ql,o(w,c)&&n.ref===s.ref)return ps(n,s,h)}return s.flags|=1,n=us(y,c),n.ref=s.ref,n.return=s,s.child=n}function dv(n,s,o,c,h){if(n!==null){var y=n.memoizedProps;if(ql(y,c)&&n.ref===s.ref)if(Ut=!1,s.pendingProps=c=y,wm(n,h))(n.flags&131072)!==0&&(Ut=!0);else return s.lanes=n.lanes,ps(n,s,h)}return gm(n,s,o,c,h)}function hv(n,s,o,c){var h=c.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,n!==null){for(c=s.child=n.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~y}else c=0,s.child=null;return fv(n,s,y,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&$u(s,y!==null?y.cachePool:null),y!==null?g0(s,y):Gf(),p0(s);else return c=s.lanes=536870912,fv(n,s,y!==null?y.baseLanes|o:o,o,c)}else y!==null?($u(s,y.cachePool),g0(s,y),si(),s.memoizedState=null):(n!==null&&$u(s,null),Gf(),si());return an(n,s,h,o),s.child}function rc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fv(n,s,o,c,h){var y=Uf();return y=y===null?null:{parent:Lt._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},n!==null&&$u(s,null),Gf(),p0(s),n!==null&&fo(n,s,c,!0),s.childLanes=h,null}function ld(n,s){return s=ud({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function mv(n,s,o){return ha(s,n.child,null,o),n=ld(s,s.pendingProps),n.flags|=2,jn(s),s.memoizedState=null,n}function J1(n,s,o){var c=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(He){if(c.mode==="hidden")return n=ld(s,c),s.lanes=536870912,rc(null,n);if(Kf(s),(n=dt)?(n=A_(n,Wn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Xs!==null?{id:Gr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},o=Jy(n),o.return=s,s.child=o,rn=s,dt=null)):n=null,n===null)throw Ws(s);return s.lanes=536870912,null}return ld(s,c)}var y=n.memoizedState;if(y!==null){var w=y.dehydrated;if(Kf(s),h)if(s.flags&256)s.flags&=-257,s=mv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ut||fo(n,s,o,!1),h=(o&n.childLanes)!==0,Ut||h){if(c=ut,c!==null&&(w=Tl(c,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,sa(n,w),In(c,n,w),mm;_d(),s=mv(n,s,o)}else n=y.treeContext,dt=er(w.nextSibling),rn=s,He=!0,Js=null,Wn=!1,n!==null&&e0(s,n),s=ld(s,c),s.flags|=4096;return s}return n=us(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function cd(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function gm(n,s,o,c,h){return la(s),o=Yf(n,s,o,c,void 0,h),c=Xf(),n!==null&&!Ut?(Jf(n,s,h),ps(n,s,h)):(He&&c&&Rf(s),s.flags|=1,an(n,s,o,h),s.child)}function gv(n,s,o,c,h,y){return la(s),s.updateQueue=null,o=v0(s,c,o,h),y0(n),c=Xf(),n!==null&&!Ut?(Jf(n,s,y),ps(n,s,y)):(He&&c&&Rf(s),s.flags|=1,an(n,s,o,y),s.child)}function pv(n,s,o,c,h){if(la(s),s.stateNode===null){var y=lo,w=o.contextType;typeof w=="object"&&w!==null&&(y=sn(w)),y=new o(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=hm,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},Bf(s),w=o.contextType,y.context=typeof w=="object"&&w!==null?sn(w):lo,y.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(dm(s,o,w,c),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&hm.enqueueReplaceState(y,y.state,null),Wl(s,c,y,h),Jl(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){y=s.stateNode;var S=s.memoizedProps,P=ma(o,S);y.props=P;var $=y.context,ee=o.contextType;w=lo,typeof ee=="object"&&ee!==null&&(w=sn(ee));var se=o.getDerivedStateFromProps;ee=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||$!==w)&&nv(s,y,c,w),ei=!1;var Q=s.memoizedState;y.state=Q,Wl(s,c,y,h),Jl(),$=s.memoizedState,S||Q!==$||ei?(typeof se=="function"&&(dm(s,o,se,c),$=s.memoizedState),(P=ei||tv(s,o,P,c,Q,$,w))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),y.props=c,y.state=$,y.context=w,c=P):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,qf(n,s),w=s.memoizedProps,ee=ma(o,w),y.props=ee,se=s.pendingProps,Q=y.context,$=o.contextType,P=lo,typeof $=="object"&&$!==null&&(P=sn($)),S=o.getDerivedStateFromProps,($=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==se||Q!==P)&&nv(s,y,c,P),ei=!1,Q=s.memoizedState,y.state=Q,Wl(s,c,y,h),Jl();var X=s.memoizedState;w!==se||Q!==X||ei||n!==null&&n.dependencies!==null&&Hu(n.dependencies)?(typeof S=="function"&&(dm(s,o,S,c),X=s.memoizedState),(ee=ei||tv(s,o,ee,c,Q,X,P)||n!==null&&n.dependencies!==null&&Hu(n.dependencies))?($||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,X,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,X,P)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),y.props=c,y.state=X,y.context=P,c=ee):(typeof y.componentDidUpdate!="function"||w===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),c=!1)}return y=c,cd(n,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&c?(s.child=ha(s,n.child,null,h),s.child=ha(s,null,o,h)):an(n,s,o,h),s.memoizedState=y.state,n=s.child):n=ps(n,s,h),n}function yv(n,s,o,c){return aa(),s.flags|=256,an(n,s,o,c),s.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ym(n){return{baseLanes:n,cachePool:a0()}}function vm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Ln),n}function vv(n,s,o){var c=s.pendingProps,h=!1,y=(s.flags&128)!==0,w;if((w=y)||(w=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),w&&(h=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,n===null){if(He){if(h?ri(s):si(),(n=dt)?(n=A_(n,Wn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Xs!==null?{id:Gr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},o=Jy(n),o.return=s,s.child=o,rn=s,dt=null)):n=null,n===null)throw Ws(s);return eg(n)?s.lanes=32:s.lanes=536870912,null}var S=c.children;return c=c.fallback,h?(si(),h=s.mode,S=ud({mode:"hidden",children:S},h),c=ia(c,h,o,null),S.return=s,c.return=s,S.sibling=c,s.child=S,c=s.child,c.memoizedState=ym(o),c.childLanes=vm(n,w,o),s.memoizedState=pm,rc(null,c)):(ri(s),_m(s,S))}var P=n.memoizedState;if(P!==null&&(S=P.dehydrated,S!==null)){if(y)s.flags&256?(ri(s),s.flags&=-257,s=Em(n,s,o)):s.memoizedState!==null?(si(),s.child=n.child,s.flags|=128,s=null):(si(),S=c.fallback,h=s.mode,c=ud({mode:"visible",children:c.children},h),S=ia(S,h,o,null),S.flags|=2,c.return=s,S.return=s,c.sibling=S,s.child=c,ha(s,n.child,null,o),c=s.child,c.memoizedState=ym(o),c.childLanes=vm(n,w,o),s.memoizedState=pm,s=rc(null,c));else if(ri(s),eg(S)){if(w=S.nextSibling&&S.nextSibling.dataset,w)var $=w.dgst;w=$,c=Error(i(419)),c.stack="",c.digest=w,Gl({value:c,source:null,stack:null}),s=Em(n,s,o)}else if(Ut||fo(n,s,o,!1),w=(o&n.childLanes)!==0,Ut||w){if(w=ut,w!==null&&(c=Tl(w,o),c!==0&&c!==P.retryLane))throw P.retryLane=c,sa(n,c),In(w,n,c),mm;Zm(S)||_d(),s=Em(n,s,o)}else Zm(S)?(s.flags|=192,s.child=n.child,s=null):(n=P.treeContext,dt=er(S.nextSibling),rn=s,He=!0,Js=null,Wn=!1,n!==null&&e0(s,n),s=_m(s,c.children),s.flags|=4096);return s}return h?(si(),S=c.fallback,h=s.mode,P=n.child,$=P.sibling,c=us(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,$!==null?S=us($,S):(S=ia(S,h,o,null),S.flags|=2),S.return=s,c.return=s,c.sibling=S,s.child=c,rc(null,c),c=s.child,S=n.child.memoizedState,S===null?S=ym(o):(h=S.cachePool,h!==null?(P=Lt._currentValue,h=h.parent!==P?{parent:P,pool:P}:h):h=a0(),S={baseLanes:S.baseLanes|o,cachePool:h}),c.memoizedState=S,c.childLanes=vm(n,w,o),s.memoizedState=pm,rc(n.child,c)):(ri(s),o=n.child,n=o.sibling,o=us(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(w=s.deletions,w===null?(s.deletions=[n],s.flags|=16):w.push(n)),s.child=o,s.memoizedState=null,o)}function _m(n,s){return s=ud({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ud(n,s){return n=On(22,n,null,s),n.lanes=0,n}function Em(n,s,o){return ha(s,n.child,null,o),n=_m(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function _v(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),jf(n.return,s,o)}function bm(n,s,o,c,h,y){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h,treeForkCount:y}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=h,w.treeForkCount=y)}function Ev(n,s,o){var c=s.pendingProps,h=c.revealOrder,y=c.tail;c=c.children;var w=Ct.current,S=(w&2)!==0;if(S?(w=w&1|2,s.flags|=128):w&=1,ce(Ct,w),an(n,s,c,o),c=He?Hl:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_v(n,o,s);else if(n.tag===19)_v(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(o=s.child,h=null;o!==null;)n=o.alternate,n!==null&&Wu(n)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),bm(s,!1,h,o,y,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Wu(n)===null){s.child=h;break}n=h.sibling,h.sibling=o,o=h,h=n}bm(s,!0,o,null,y,c);break;case"together":bm(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function ps(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),oi|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(fo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=us(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=us(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function wm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Hu(n)))}function W1(n,s,o){switch(s.tag){case 3:ct(s,s.stateNode.containerInfo),Zs(s,Lt,n.memoizedState.cache),aa();break;case 27:case 5:zi(s);break;case 4:ct(s,s.stateNode.containerInfo);break;case 10:Zs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Kf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ri(s),s.flags|=128,null):(o&s.child.childLanes)!==0?vv(n,s,o):(ri(s),n=ps(n,s,o),n!==null?n.sibling:null);ri(s);break;case 19:var h=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(fo(n,s,o,!1),c=(o&s.childLanes)!==0),h){if(c)return Ev(n,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ce(Ct,Ct.current),c)break;return null;case 22:return s.lanes=0,hv(n,s,o,s.pendingProps);case 24:Zs(s,Lt,n.memoizedState.cache)}return ps(n,s,o)}function bv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ut=!0;else{if(!wm(n,o)&&(s.flags&128)===0)return Ut=!1,W1(n,s,o);Ut=(n.flags&131072)!==0}else Ut=!1,He&&(s.flags&1048576)!==0&&Zy(s,Hl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=ua(s.elementType),s.type=n,typeof n=="function")If(n)?(c=ma(n,c),s.tag=1,s=pv(null,s,n,c,o)):(s.tag=0,s=gm(null,s,n,c,o));else{if(n!=null){var h=n.$$typeof;if(h===oe){s.tag=11,s=cv(null,s,n,c,o);break e}else if(h===R){s.tag=14,s=uv(null,s,n,c,o);break e}}throw s=be(n)||n,Error(i(306,s,""))}}return s;case 0:return gm(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,h=ma(c,s.pendingProps),pv(n,s,c,h,o);case 3:e:{if(ct(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var y=s.memoizedState;h=y.element,qf(n,s),Wl(s,c,null,o);var w=s.memoizedState;if(c=w.cache,Zs(s,Lt,c),c!==y.cache&&Vf(s,[Lt],o,!0),Jl(),c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=yv(n,s,c,o);break e}else if(c!==h){h=Yn(Error(i(424)),s),Gl(h),s=yv(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dt=er(n.firstChild),rn=s,He=!0,Js=null,Wn=!0,o=h0(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(aa(),c===h){s=ps(n,s,o);break e}an(n,s,c,o)}s=s.child}return s;case 26:return cd(n,s),n===null?(o=D_(s.type,null,s.pendingProps,null))?s.memoizedState=o:He||(o=s.type,n=s.pendingProps,c=Ad(Te.current).createElement(o),c[Mt]=s,c[Yt]=n,on(c,o,n),jt(c),s.stateNode=c):s.memoizedState=D_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return zi(s),n===null&&He&&(c=s.stateNode=C_(s.type,s.pendingProps,Te.current),rn=s,Wn=!0,h=dt,hi(s.type)?(tg=h,dt=er(c.firstChild)):dt=h),an(n,s,s.pendingProps.children,o),cd(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&He&&((h=c=dt)&&(c=NS(c,s.type,s.pendingProps,Wn),c!==null?(s.stateNode=c,rn=s,dt=er(c.firstChild),Wn=!1,h=!0):h=!1),h||Ws(s)),zi(s),h=s.type,y=s.pendingProps,w=n!==null?n.memoizedProps:null,c=y.children,Xm(h,y)?c=null:w!==null&&Xm(h,w)&&(s.flags|=32),s.memoizedState!==null&&(h=Yf(n,s,F1,null,null,o),vc._currentValue=h),cd(n,s),an(n,s,c,o),s.child;case 6:return n===null&&He&&((n=o=dt)&&(o=CS(o,s.pendingProps,Wn),o!==null?(s.stateNode=o,rn=s,dt=null,n=!0):n=!1),n||Ws(s)),null;case 13:return vv(n,s,o);case 4:return ct(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ha(s,null,c,o):an(n,s,c,o),s.child;case 11:return cv(n,s,s.type,s.pendingProps,o);case 7:return an(n,s,s.pendingProps,o),s.child;case 8:return an(n,s,s.pendingProps.children,o),s.child;case 12:return an(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Zs(s,s.type,c.value),an(n,s,c.children,o),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,la(s),h=sn(h),c=c(h),s.flags|=1,an(n,s,c,o),s.child;case 14:return uv(n,s,s.type,s.pendingProps,o);case 15:return dv(n,s,s.type,s.pendingProps,o);case 19:return Ev(n,s,o);case 31:return J1(n,s,o);case 22:return hv(n,s,o,s.pendingProps);case 24:return la(s),c=sn(Lt),n===null?(h=Uf(),h===null&&(h=ut,y=Lf(),h.pooledCache=y,y.refCount++,y!==null&&(h.pooledCacheLanes|=o),h=y),s.memoizedState={parent:c,cache:h},Bf(s),Zs(s,Lt,h)):((n.lanes&o)!==0&&(qf(n,s),Wl(s,null,null,o),Jl()),h=n.memoizedState,y=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Zs(s,Lt,c)):(c=y.cache,Zs(s,Lt,c),c!==h.cache&&Vf(s,[Lt],o,!0))),an(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ys(n){n.flags|=4}function xm(n,s,o,c,h){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(Qv())n.flags|=8192;else throw da=Qu,zf}else n.flags&=-16777217}function wv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!L_(s))if(Qv())n.flags|=8192;else throw da=Qu,zf}function dd(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?yu():536870912,n.lanes|=s,So|=s)}function sc(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function Z1(n,s,o){var c=s.pendingProps;switch(kf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),fs(Lt),vt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ho(s)?ys(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Of())),ht(s),null;case 26:var h=s.type,y=s.memoizedState;return n===null?(ys(s),y!==null?(ht(s),wv(s,y)):(ht(s),xm(s,h,null,c,o))):y?y!==n.memoizedState?(ys(s),ht(s),wv(s,y)):(ht(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&ys(s),ht(s),xm(s,h,n,c,o)),null;case 27:if(Fa(s),o=Te.current,h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ys(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ht(s),null}n=me.current,ho(s)?t0(s):(n=C_(h,c,o),s.stateNode=n,ys(s))}return ht(s),null;case 5:if(Fa(s),h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ys(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ht(s),null}if(y=me.current,ho(s))t0(s);else{var w=Ad(Te.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?w.createElement(h,{is:c.is}):w.createElement(h)}}y[Mt]=s,y[Yt]=c;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=y;e:switch(on(y,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ys(s)}}return ht(s),xm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&ys(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=Te.current,ho(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,h=rn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}n[Mt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||v_(n.nodeValue,o)),n||Ws(s,!0)}else n=Ad(n).createTextNode(c),n[Mt]=s,s.stateNode=n}return ht(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=ho(s),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Mt]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),n=!1}else o=Of(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(jn(s),s):(jn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ht(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=ho(s),c!==null&&c.dehydrated!==null){if(n===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Mt]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),h=!1}else h=Of(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(jn(s),s):(jn(s),null)}return jn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),dd(s,s.updateQueue),ht(s),null);case 4:return vt(),n===null&&Gm(s.stateNode.containerInfo),ht(s),null;case 10:return fs(s.type),ht(s),null;case 19:if(J(Ct),c=s.memoizedState,c===null)return ht(s),null;if(h=(s.flags&128)!==0,y=c.rendering,y===null)if(h)sc(c,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Wu(n),y!==null){for(s.flags|=128,sc(c,!1),n=y.updateQueue,s.updateQueue=n,dd(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Xy(o,n),o=o.sibling;return ce(Ct,Ct.current&1|2),He&&ds(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&pn()>pd&&(s.flags|=128,h=!0,sc(c,!1),s.lanes=4194304)}else{if(!h)if(n=Wu(y),n!==null){if(s.flags|=128,h=!0,n=n.updateQueue,s.updateQueue=n,dd(s,n),sc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!He)return ht(s),null}else 2*pn()-c.renderingStartTime>pd&&o!==536870912&&(s.flags|=128,h=!0,sc(c,!1),s.lanes=4194304);c.isBackwards?(y.sibling=s.child,s.child=y):(n=c.last,n!==null?n.sibling=y:s.child=y,c.last=y)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pn(),n.sibling=null,o=Ct.current,ce(Ct,h?o&1|2:o&1),He&&ds(s,c.treeForkCount),n):(ht(s),null);case 22:case 23:return jn(s),$f(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),o=s.updateQueue,o!==null&&dd(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&J(ca),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),fs(Lt),ht(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function eS(n,s){switch(kf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return fs(Lt),vt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Fa(s),null;case 31:if(s.memoizedState!==null){if(jn(s),s.alternate===null)throw Error(i(340));aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(jn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return J(Ct),null;case 4:return vt(),null;case 10:return fs(s.type),null;case 22:case 23:return jn(s),$f(),n!==null&&J(ca),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return fs(Lt),null;case 25:return null;default:return null}}function xv(n,s){switch(kf(s),s.tag){case 3:fs(Lt),vt();break;case 26:case 27:case 5:Fa(s);break;case 4:vt();break;case 31:s.memoizedState!==null&&jn(s);break;case 13:jn(s);break;case 19:J(Ct);break;case 10:fs(s.type);break;case 22:case 23:jn(s),$f(),n!==null&&J(ca);break;case 24:fs(Lt)}}function ic(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&n)===n){c=void 0;var y=o.create,w=o.inst;c=y(),w.destroy=c}o=o.next}while(o!==h)}}catch(S){nt(s,s.return,S)}}function ii(n,s,o){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var y=h.next;c=y;do{if((c.tag&n)===n){var w=c.inst,S=w.destroy;if(S!==void 0){w.destroy=void 0,h=s;var P=o,$=S;try{$()}catch(ee){nt(h,P,ee)}}}c=c.next}while(c!==y)}}catch(ee){nt(s,s.return,ee)}}function Tv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{m0(s,o)}catch(c){nt(n,n.return,c)}}}function Sv(n,s,o){o.props=ma(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){nt(n,s,c)}}function ac(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(h){nt(n,s,h)}}function Kr(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){nt(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){nt(n,s,h)}else o.current=null}function Av(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){nt(n,n.return,h)}}function Tm(n,s,o){try{var c=n.stateNode;wS(c,n.type,o,s),c[Yt]=s}catch(h){nt(n,n.return,h)}}function Iv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&hi(n.type)||n.tag===4}function Sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Iv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&hi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Am(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=dr));else if(c!==4&&(c===27&&hi(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Am(n,s,o),n=n.sibling;n!==null;)Am(n,s,o),n=n.sibling}function hd(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&hi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(hd(n,s,o),n=n.sibling;n!==null;)hd(n,s,o),n=n.sibling}function Nv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);on(s,c,o),s[Mt]=n,s[Yt]=o}catch(y){nt(n,n.return,y)}}var vs=!1,zt=!1,Im=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function tS(n,s){if(n=n.containerInfo,Qm=Od,n=By(n),Ef(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,S=-1,P=-1,$=0,ee=0,se=n,Q=null;t:for(;;){for(var X;se!==o||h!==0&&se.nodeType!==3||(S=w+h),se!==y||c!==0&&se.nodeType!==3||(P=w+c),se.nodeType===3&&(w+=se.nodeValue.length),(X=se.firstChild)!==null;)Q=se,se=X;for(;;){if(se===n)break t;if(Q===o&&++$===h&&(S=w),Q===y&&++ee===c&&(P=w),(X=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=X}o=S===-1||P===-1?null:{start:S,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ym={focusedElem:n,selectionRange:o},Od=!1,Jt=s;Jt!==null;)if(s=Jt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Jt=n;else for(;Jt!==null;){switch(s=Jt,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)h=n[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=s,h=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var pe=ma(o.type,h);n=c.getSnapshotBeforeUpdate(pe,y),c.__reactInternalSnapshotBeforeUpdate=n}catch(Se){nt(o,o.return,Se)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Wm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Jt=n;break}Jt=s.return}}function Rv(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Es(n,o),c&4&&ic(5,o);break;case 1:if(Es(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(w){nt(o,o.return,w)}else{var h=ma(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(w){nt(o,o.return,w)}}c&64&&Tv(o),c&512&&ac(o,o.return);break;case 3:if(Es(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{m0(n,s)}catch(w){nt(o,o.return,w)}}break;case 27:s===null&&c&4&&Nv(o);case 26:case 5:Es(n,o),s===null&&c&4&&Av(o),c&512&&ac(o,o.return);break;case 12:Es(n,o);break;case 31:Es(n,o),c&4&&Ov(n,o);break;case 13:Es(n,o),c&4&&Mv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=uS.bind(null,o),RS(n,o))));break;case 22:if(c=o.memoizedState!==null||vs,!c){s=s!==null&&s.memoizedState!==null||zt,h=vs;var y=zt;vs=c,(zt=s)&&!y?bs(n,o,(o.subtreeFlags&8772)!==0):Es(n,o),vs=h,zt=y}break;case 30:break;default:Es(n,o)}}function kv(n){var s=n.alternate;s!==null&&(n.alternate=null,kv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Qa(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Et=null,xn=!1;function _s(n,s,o){for(o=o.child;o!==null;)Dv(n,s,o),o=o.sibling}function Dv(n,s,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(or,o)}catch{}switch(o.tag){case 26:zt||Kr(o,s),_s(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:zt||Kr(o,s);var c=Et,h=xn;hi(o.type)&&(Et=o.stateNode,xn=!1),_s(n,s,o),gc(o.stateNode),Et=c,xn=h;break;case 5:zt||Kr(o,s);case 6:if(c=Et,h=xn,Et=null,_s(n,s,o),Et=c,xn=h,Et!==null)if(xn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(o.stateNode)}catch(y){nt(o,s,y)}else try{Et.removeChild(o.stateNode)}catch(y){nt(o,s,y)}break;case 18:Et!==null&&(xn?(n=Et,T_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Oo(n)):T_(Et,o.stateNode));break;case 4:c=Et,h=xn,Et=o.stateNode.containerInfo,xn=!0,_s(n,s,o),Et=c,xn=h;break;case 0:case 11:case 14:case 15:ii(2,o,s),zt||ii(4,o,s),_s(n,s,o);break;case 1:zt||(Kr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Sv(o,s,c)),_s(n,s,o);break;case 21:_s(n,s,o);break;case 22:zt=(c=zt)||o.memoizedState!==null,_s(n,s,o),zt=c;break;default:_s(n,s,o)}}function Ov(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Oo(n)}catch(o){nt(s,s.return,o)}}}function Mv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Oo(n)}catch(o){nt(s,s.return,o)}}function nS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Cv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Cv),s;default:throw Error(i(435,n.tag))}}function fd(n,s){var o=nS(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var h=dS.bind(null,n,c);c.then(h,h)}})}function Tn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],y=n,w=s,S=w;e:for(;S!==null;){switch(S.tag){case 27:if(hi(S.type)){Et=S.stateNode,xn=!1;break e}break;case 5:Et=S.stateNode,xn=!1;break e;case 3:case 4:Et=S.stateNode.containerInfo,xn=!0;break e}S=S.return}if(Et===null)throw Error(i(160));Dv(y,w,h),Et=null,xn=!1,y=h.alternate,y!==null&&(y.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)jv(s,n),s=s.sibling}var yr=null;function jv(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Tn(s,n),Sn(n),c&4&&(ii(3,n,n.return),ic(3,n),ii(5,n,n.return));break;case 1:Tn(s,n),Sn(n),c&512&&(zt||o===null||Kr(o,o.return)),c&64&&vs&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=yr;if(Tn(s,n),Sn(n),c&512&&(zt||o===null||Kr(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":y=h.getElementsByTagName("title")[0],(!y||y[Or]||y[Mt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=h.createElement(c),h.head.insertBefore(y,h.querySelector("head > title"))),on(y,c,o),y[Mt]=n,jt(y),c=y;break e;case"link":var w=j_("link","href",h).get(c+(o.href||""));if(w){for(var S=0;S<w.length;S++)if(y=w[S],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(S,1);break t}}y=h.createElement(c),on(y,c,o),h.head.appendChild(y);break;case"meta":if(w=j_("meta","content",h).get(c+(o.content||""))){for(S=0;S<w.length;S++)if(y=w[S],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(S,1);break t}}y=h.createElement(c),on(y,c,o),h.head.appendChild(y);break;default:throw Error(i(468,c))}y[Mt]=n,jt(y),c=y}n.stateNode=c}else V_(h,n.type,n.stateNode);else n.stateNode=M_(h,c,n.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?V_(h,n.type,n.stateNode):M_(h,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Tm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Tn(s,n),Sn(n),c&512&&(zt||o===null||Kr(o,o.return)),o!==null&&c&4&&Tm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Tn(s,n),Sn(n),c&512&&(zt||o===null||Kr(o,o.return)),n.flags&32){h=n.stateNode;try{wn(h,"")}catch(pe){nt(n,n.return,pe)}}c&4&&n.stateNode!=null&&(h=n.memoizedProps,Tm(n,h,o!==null?o.memoizedProps:h)),c&1024&&(Im=!0);break;case 6:if(Tn(s,n),Sn(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(pe){nt(n,n.return,pe)}}break;case 3:if(Cd=null,h=yr,yr=Id(s.containerInfo),Tn(s,n),yr=h,Sn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Oo(s.containerInfo)}catch(pe){nt(n,n.return,pe)}Im&&(Im=!1,Vv(n));break;case 4:c=yr,yr=Id(n.stateNode.containerInfo),Tn(s,n),Sn(n),yr=c;break;case 12:Tn(s,n),Sn(n);break;case 31:Tn(s,n),Sn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,fd(n,c)));break;case 13:Tn(s,n),Sn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(gd=pn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,fd(n,c)));break;case 22:h=n.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,$=vs,ee=zt;if(vs=$||h,zt=ee||P,Tn(s,n),zt=ee,vs=$,Sn(n),c&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||P||vs||zt||ga(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){P=o=s;try{if(y=P.stateNode,h)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{S=P.stateNode;var se=P.memoizedProps.style,Q=se!=null&&se.hasOwnProperty("display")?se.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(pe){nt(P,P.return,pe)}}}else if(s.tag===6){if(o===null){P=s;try{P.stateNode.nodeValue=h?"":P.memoizedProps}catch(pe){nt(P,P.return,pe)}}}else if(s.tag===18){if(o===null){P=s;try{var X=P.stateNode;h?S_(X,!0):S_(P.stateNode,!1)}catch(pe){nt(P,P.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,fd(n,o))));break;case 19:Tn(s,n),Sn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,fd(n,c)));break;case 30:break;case 21:break;default:Tn(s,n),Sn(n)}}function Sn(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(Iv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var h=o.stateNode,y=Sm(n);hd(n,y,h);break;case 5:var w=o.stateNode;o.flags&32&&(wn(w,""),o.flags&=-33);var S=Sm(n);hd(n,S,w);break;case 3:case 4:var P=o.stateNode.containerInfo,$=Sm(n);Am(n,$,P);break;default:throw Error(i(161))}}catch(ee){nt(n,n.return,ee)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Vv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Vv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Es(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Rv(n,s.alternate,s),s=s.sibling}function ga(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ii(4,s,s.return),ga(s);break;case 1:Kr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Sv(s,s.return,o),ga(s);break;case 27:gc(s.stateNode);case 26:case 5:Kr(s,s.return),ga(s);break;case 22:s.memoizedState===null&&ga(s);break;case 30:ga(s);break;default:ga(s)}n=n.sibling}}function bs(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=n,y=s,w=y.flags;switch(y.tag){case 0:case 11:case 15:bs(h,y,o),ic(4,y);break;case 1:if(bs(h,y,o),c=y,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){nt(c,c.return,$)}if(c=y,h=c.updateQueue,h!==null){var S=c.stateNode;try{var P=h.shared.hiddenCallbacks;if(P!==null)for(h.shared.hiddenCallbacks=null,h=0;h<P.length;h++)f0(P[h],S)}catch($){nt(c,c.return,$)}}o&&w&64&&Tv(y),ac(y,y.return);break;case 27:Nv(y);case 26:case 5:bs(h,y,o),o&&c===null&&w&4&&Av(y),ac(y,y.return);break;case 12:bs(h,y,o);break;case 31:bs(h,y,o),o&&w&4&&Ov(h,y);break;case 13:bs(h,y,o),o&&w&4&&Mv(h,y);break;case 22:y.memoizedState===null&&bs(h,y,o),ac(y,y.return);break;case 30:break;default:bs(h,y,o)}s=s.sibling}}function Nm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&$l(o))}function Cm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$l(n))}function vr(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lv(n,s,o,c),s=s.sibling}function Lv(n,s,o,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:vr(n,s,o,c),h&2048&&ic(9,s);break;case 1:vr(n,s,o,c);break;case 3:vr(n,s,o,c),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$l(n)));break;case 12:if(h&2048){vr(n,s,o,c),n=s.stateNode;try{var y=s.memoizedProps,w=y.id,S=y.onPostCommit;typeof S=="function"&&S(w,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){nt(s,s.return,P)}}else vr(n,s,o,c);break;case 31:vr(n,s,o,c);break;case 13:vr(n,s,o,c);break;case 23:break;case 22:y=s.stateNode,w=s.alternate,s.memoizedState!==null?y._visibility&2?vr(n,s,o,c):oc(n,s):y._visibility&2?vr(n,s,o,c):(y._visibility|=2,wo(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Nm(w,s);break;case 24:vr(n,s,o,c),h&2048&&Cm(s.alternate,s);break;default:vr(n,s,o,c)}}function wo(n,s,o,c,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,w=s,S=o,P=c,$=w.flags;switch(w.tag){case 0:case 11:case 15:wo(y,w,S,P,h),ic(8,w);break;case 23:break;case 22:var ee=w.stateNode;w.memoizedState!==null?ee._visibility&2?wo(y,w,S,P,h):oc(y,w):(ee._visibility|=2,wo(y,w,S,P,h)),h&&$&2048&&Nm(w.alternate,w);break;case 24:wo(y,w,S,P,h),h&&$&2048&&Cm(w.alternate,w);break;default:wo(y,w,S,P,h)}s=s.sibling}}function oc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,h=c.flags;switch(c.tag){case 22:oc(o,c),h&2048&&Nm(c.alternate,c);break;case 24:oc(o,c),h&2048&&Cm(c.alternate,c);break;default:oc(o,c)}s=s.sibling}}var lc=8192;function xo(n,s,o){if(n.subtreeFlags&lc)for(n=n.child;n!==null;)Pv(n,s,o),n=n.sibling}function Pv(n,s,o){switch(n.tag){case 26:xo(n,s,o),n.flags&lc&&n.memoizedState!==null&&qS(o,yr,n.memoizedState,n.memoizedProps);break;case 5:xo(n,s,o);break;case 3:case 4:var c=yr;yr=Id(n.stateNode.containerInfo),xo(n,s,o),yr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=lc,lc=16777216,xo(n,s,o),lc=c):xo(n,s,o));break;default:xo(n,s,o)}}function Uv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function cc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Jt=c,Bv(c,n)}Uv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zv(n),n=n.sibling}function zv(n){switch(n.tag){case 0:case 11:case 15:cc(n),n.flags&2048&&ii(9,n,n.return);break;case 3:cc(n);break;case 12:cc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,md(n)):cc(n);break;default:cc(n)}}function md(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Jt=c,Bv(c,n)}Uv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ii(8,s,s.return),md(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,md(s));break;default:md(s)}n=n.sibling}}function Bv(n,s){for(;Jt!==null;){var o=Jt;switch(o.tag){case 0:case 11:case 15:ii(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$l(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Jt=c;else e:for(o=n;Jt!==null;){c=Jt;var h=c.sibling,y=c.return;if(kv(c),c===o){Jt=null;break e}if(h!==null){h.return=y,Jt=h;break e}Jt=y}}}var rS={getCacheForType:function(n){var s=sn(Lt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return sn(Lt).controller.signal}},sS=typeof WeakMap=="function"?WeakMap:Map,We=0,ut=null,je=null,Pe=0,tt=0,Vn=null,ai=!1,To=!1,Rm=!1,ws=0,At=0,oi=0,pa=0,km=0,Ln=0,So=0,uc=null,An=null,Dm=!1,gd=0,qv=0,pd=1/0,yd=null,li=null,$t=0,ci=null,Ao=null,xs=0,Om=0,Mm=null,Fv=null,dc=0,jm=null;function Pn(){return(We&2)!==0&&Pe!==0?Pe&-Pe:W.T!==null?Bm():vu()}function Hv(){if(Ln===0)if((Pe&536870912)===0||He){var n=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),Ln=n}else Ln=536870912;return n=Mn.current,n!==null&&(n.flags|=32),Ln}function In(n,s,o){(n===ut&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(Io(n,0),ui(n,Pe,Ln,!1)),Hi(n,o),((We&2)===0||n!==ut)&&(n===ut&&((We&2)===0&&(pa|=o),At===4&&ui(n,Pe,Ln,!1)),Qr(n))}function Gv(n,s,o){if((We&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||lr(n,s),h=c?oS(n,s):Lm(n,s,!0),y=c;do{if(h===0){To&&!c&&ui(n,s,0,!1);break}else{if(o=n.current.alternate,y&&!iS(o)){h=Lm(n,s,!1),y=!1;continue}if(h===2){if(y=s,n.errorRecoveryDisabledLanes&y)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var S=n;h=uc;var P=S.current.memoizedState.isDehydrated;if(P&&(Io(S,w).flags|=256),w=Lm(S,w,!1),w!==2){if(Rm&&!P){S.errorRecoveryDisabledLanes|=y,pa|=y,h=4;break e}y=An,An=h,y!==null&&(An===null?An=y:An.push.apply(An,y))}h=w}if(y=!1,h!==2)continue}}if(h===1){Io(n,0),ui(n,s,0,!0);break}e:{switch(c=n,y=h,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ui(c,s,Ln,!ai);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=gd+300-pn(),10<h)){if(ui(c,s,Ln,!ai),Rr(c,0,!0)!==0)break e;xs=s,c.timeoutHandle=w_($v.bind(null,c,o,An,yd,Dm,s,Ln,pa,So,ai,y,"Throttled",-0,0),h);break e}$v(c,o,An,yd,Dm,s,Ln,pa,So,ai,y,null,-0,0)}}break}while(!0);Qr(n)}function $v(n,s,o,c,h,y,w,S,P,$,ee,se,Q,X){if(n.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dr},Pv(s,y,se);var pe=(y&62914560)===y?gd-pn():(y&4194048)===y?qv-pn():0;if(pe=FS(se,pe),pe!==null){xs=y,n.cancelPendingCommit=pe(e_.bind(null,n,s,y,o,c,h,w,S,P,ee,se,null,Q,X)),ui(n,y,w,!$);return}}e_(n,s,y,o,c,h,w,S,P)}function iS(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],y=h.getSnapshot;h=h.value;try{if(!Dn(y(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ui(n,s,o,c){s&=~km,s&=~pa,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var h=s;0<h;){var y=31-It(h),w=1<<y;c[y]=-1,h&=~w}o!==0&&Gi(n,o,s)}function vd(){return(We&6)===0?(hc(0),!1):!0}function Vm(){if(je!==null){if(tt===0)var n=je.return;else n=je,hs=oa=null,Wf(n),yo=null,Ql=0,n=je;for(;n!==null;)xv(n.alternate,n),n=n.return;je=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,SS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),xs=0,Vm(),ut=n,je=o=us(n.current,null),Pe=s,tt=0,Vn=null,ai=!1,To=lr(n,s),Rm=!1,So=Ln=km=pa=oi=At=0,An=uc=null,Dm=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var h=31-It(c),y=1<<h;s|=n[h],c&=~y}return ws=s,Uu(),o}function Kv(n,s){Oe=null,W.H=nc,s===po||s===Ku?(s=c0(),tt=3):s===zf?(s=c0(),tt=4):tt=s===mm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vn=s,je===null&&(At=1,od(n,Yn(s,n.current)))}function Qv(){var n=Mn.current;return n===null?!0:(Pe&4194048)===Pe?Zn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===Zn:!1}function Yv(){var n=W.H;return W.H=nc,n===null?nc:n}function Xv(){var n=W.A;return W.A=rS,n}function _d(){At=4,ai||(Pe&4194048)!==Pe&&Mn.current!==null||(To=!0),(oi&134217727)===0&&(pa&134217727)===0||ut===null||ui(ut,Pe,Ln,!1)}function Lm(n,s,o){var c=We;We|=2;var h=Yv(),y=Xv();(ut!==n||Pe!==s)&&(yd=null,Io(n,s)),s=!1;var w=At;e:do try{if(tt!==0&&je!==null){var S=je,P=Vn;switch(tt){case 8:Vm(),w=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(s=!0);var $=tt;if(tt=0,Vn=null,No(n,S,P,$),o&&To){w=0;break e}break;default:$=tt,tt=0,Vn=null,No(n,S,P,$)}}aS(),w=At;break}catch(ee){Kv(n,ee)}while(!0);return s&&n.shellSuspendCounter++,hs=oa=null,We=c,W.H=h,W.A=y,je===null&&(ut=null,Pe=0,Uu()),w}function aS(){for(;je!==null;)Jv(je)}function oS(n,s){var o=We;We|=2;var c=Yv(),h=Xv();ut!==n||Pe!==s?(yd=null,pd=pn()+500,Io(n,s)):To=lr(n,s);e:do try{if(tt!==0&&je!==null){s=je;var y=Vn;t:switch(tt){case 1:tt=0,Vn=null,No(n,s,y,1);break;case 2:case 9:if(o0(y)){tt=0,Vn=null,Wv(s);break}s=function(){tt!==2&&tt!==9||ut!==n||(tt=7),Qr(n)},y.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:o0(y)?(tt=0,Vn=null,Wv(s)):(tt=0,Vn=null,No(n,s,y,7));break;case 5:var w=null;switch(je.tag){case 26:w=je.memoizedState;case 5:case 27:var S=je;if(w?L_(w):S.stateNode.complete){tt=0,Vn=null;var P=S.sibling;if(P!==null)je=P;else{var $=S.return;$!==null?(je=$,Ed($)):je=null}break t}}tt=0,Vn=null,No(n,s,y,5);break;case 6:tt=0,Vn=null,No(n,s,y,6);break;case 8:Vm(),At=6;break e;default:throw Error(i(462))}}lS();break}catch(ee){Kv(n,ee)}while(!0);return hs=oa=null,W.H=c,W.A=h,We=o,je!==null?0:(ut=null,Pe=0,Uu(),At)}function lS(){for(;je!==null&&!ff();)Jv(je)}function Jv(n){var s=bv(n.alternate,n,ws);n.memoizedProps=n.pendingProps,s===null?Ed(n):je=s}function Wv(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=gv(o,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=gv(o,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Wf(s);default:xv(o,s),s=je=Xy(s,ws),s=bv(o,s,ws)}n.memoizedProps=n.pendingProps,s===null?Ed(n):je=s}function No(n,s,o,c){hs=oa=null,Wf(s),yo=null,Ql=0;var h=s.return;try{if(X1(n,h,s,o,Pe)){At=1,od(n,Yn(o,n.current)),je=null;return}}catch(y){if(h!==null)throw je=h,y;At=1,od(n,Yn(o,n.current)),je=null;return}s.flags&32768?(He||c===1?n=!0:To||(Pe&536870912)!==0?n=!1:(ai=n=!0,(c===2||c===9||c===3||c===6)&&(c=Mn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zv(s,n)):Ed(s)}function Ed(n){var s=n;do{if((s.flags&32768)!==0){Zv(s,ai);return}n=s.return;var o=Z1(s.alternate,s,ws);if(o!==null){je=o;return}if(s=s.sibling,s!==null){je=s;return}je=s=n}while(s!==null);At===0&&(At=5)}function Zv(n,s){do{var o=eS(n.alternate,n);if(o!==null){o.flags&=32767,je=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){je=n;return}je=n=o}while(n!==null);At=6,je=null}function e_(n,s,o,c,h,y,w,S,P){n.cancelPendingCommit=null;do bd();while($t!==0);if((We&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Sf,pf(n,o,y,w,S,P),n===ut&&(je=ut=null,Pe=0),Ao=s,ci=n,xs=o,Om=y,Mm=h,Fv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,hS(zs,function(){return i_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,h=ue.p,ue.p=2,w=We,We|=4;try{tS(n,s,o)}finally{We=w,ue.p=h,W.T=c}}$t=1,t_(),n_(),r_()}}function t_(){if($t===1){$t=0;var n=ci,s=Ao,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var c=ue.p;ue.p=2;var h=We;We|=4;try{jv(s,n);var y=Ym,w=By(n.containerInfo),S=y.focusedElem,P=y.selectionRange;if(w!==S&&S&&S.ownerDocument&&zy(S.ownerDocument.documentElement,S)){if(P!==null&&Ef(S)){var $=P.start,ee=P.end;if(ee===void 0&&(ee=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(ee,S.value.length);else{var se=S.ownerDocument||document,Q=se&&se.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),pe=S.textContent.length,Se=Math.min(P.start,pe),ot=P.end===void 0?Se:Math.min(P.end,pe);!X.extend&&Se>ot&&(w=ot,ot=Se,Se=w);var B=Uy(S,Se),z=Uy(S,ot);if(B&&z&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==z.node||X.focusOffset!==z.offset)){var G=se.createRange();G.setStart(B.node,B.offset),X.removeAllRanges(),Se>ot?(X.addRange(G),X.extend(z.node,z.offset)):(G.setEnd(z.node,z.offset),X.addRange(G))}}}}for(se=[],X=S;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<se.length;S++){var ne=se[S];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Od=!!Qm,Ym=Qm=null}finally{We=h,ue.p=c,W.T=o}}n.current=s,$t=2}}function n_(){if($t===2){$t=0;var n=ci,s=Ao,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var c=ue.p;ue.p=2;var h=We;We|=4;try{Rv(n,s.alternate,s)}finally{We=h,ue.p=c,W.T=o}}$t=3}}function r_(){if($t===4||$t===3){$t=0,du();var n=ci,s=Ao,o=xs,c=Fv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$t=5:($t=0,Ao=ci=null,s_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(li=null),as(o),s=s.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(or,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=W.T,h=ue.p,ue.p=2,W.T=null;try{for(var y=n.onRecoverableError,w=0;w<c.length;w++){var S=c[w];y(S.value,{componentStack:S.stack})}}finally{W.T=s,ue.p=h}}(xs&3)!==0&&bd(),Qr(n),h=n.pendingLanes,(o&261930)!==0&&(h&42)!==0?n===jm?dc++:(dc=0,jm=n):dc=0,hc(0)}}function s_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,$l(s)))}function bd(){return t_(),n_(),r_(),i_()}function i_(){if($t!==5)return!1;var n=ci,s=Om;Om=0;var o=as(xs),c=W.T,h=ue.p;try{ue.p=32>o?32:o,W.T=null,o=Mm,Mm=null;var y=ci,w=xs;if($t=0,Ao=ci=null,xs=0,(We&6)!==0)throw Error(i(331));var S=We;if(We|=4,zv(y.current),Lv(y,y.current,w,o),We=S,hc(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(or,y)}catch{}return!0}finally{ue.p=h,W.T=c,s_(n,s)}}function a_(n,s,o){s=Yn(o,s),s=fm(n.stateNode,s,2),n=ni(n,s,2),n!==null&&(Hi(n,2),Qr(n))}function nt(n,s,o){if(n.tag===3)a_(n,n,o);else for(;s!==null;){if(s.tag===3){a_(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){n=Yn(o,n),o=ov(2),c=ni(s,o,2),c!==null&&(lv(o,c,s,n),Hi(c,2),Qr(c));break}}s=s.return}}function Pm(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new sS;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(Rm=!0,h.add(o),n=cS.bind(null,n,s,o),s.then(n,n))}function cS(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ut===n&&(Pe&o)===o&&(At===4||At===3&&(Pe&62914560)===Pe&&300>pn()-gd?(We&2)===0&&Io(n,0):km|=o,So===Pe&&(So=0)),Qr(n)}function o_(n,s){s===0&&(s=yu()),n=sa(n,s),n!==null&&(Hi(n,s),Qr(n))}function uS(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),o_(n,o)}function dS(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),o_(n,o)}function hS(n,s){return Gt(n,s)}var wd=null,Co=null,Um=!1,xd=!1,zm=!1,di=0;function Qr(n){n!==Co&&n.next===null&&(Co===null?wd=Co=n:Co=Co.next=n),xd=!0,Um||(Um=!0,mS())}function hc(n,s){if(!zm&&xd){zm=!0;do for(var o=!1,c=wd;c!==null;){if(n!==0){var h=c.pendingLanes;if(h===0)var y=0;else{var w=c.suspendedLanes,S=c.pingedLanes;y=(1<<31-It(42|n)+1)-1,y&=h&~(w&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,d_(c,y))}else y=Pe,y=Rr(c,c===ut?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||lr(c,y)||(o=!0,d_(c,y));c=c.next}while(o);zm=!1}}function fS(){l_()}function l_(){xd=Um=!1;var n=0;di!==0&&TS()&&(n=di);for(var s=pn(),o=null,c=wd;c!==null;){var h=c.next,y=c_(c,s);y===0?(c.next=null,o===null?wd=h:o.next=h,h===null&&(Co=o)):(o=c,(n!==0||(y&3)!==0)&&(xd=!0)),c=h}$t!==0&&$t!==5||hc(n),di!==0&&(di=0)}function c_(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var w=31-It(y),S=1<<w,P=h[w];P===-1?((S&o)===0||(S&c)!==0)&&(h[w]=gf(S,s)):P<=s&&(n.expiredLanes|=S),y&=~S}if(s=ut,o=Pe,o=Rr(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Us(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||lr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Us(c),as(o)){case 2:case 8:o=wl;break;case 32:o=zs;break;case 268435456:o=hu;break;default:o=zs}return c=u_.bind(null,n),o=Gt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Us(c),n.callbackPriority=2,n.callbackNode=null,2}function u_(n,s){if($t!==0&&$t!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(bd()&&n.callbackNode!==o)return null;var c=Pe;return c=Rr(n,n===ut?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Gv(n,c,s),c_(n,pn()),n.callbackNode!=null&&n.callbackNode===o?u_.bind(null,n):null)}function d_(n,s){if(bd())return null;Gv(n,s,!0)}function mS(){AS(function(){(We&6)!==0?Gt(bl,fS):l_()})}function Bm(){if(di===0){var n=mo;n===0&&(n=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),di=n}return di}function h_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wa(""+n)}function f_(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function gS(n,s,o,c,h){if(s==="submit"&&o&&o.stateNode===h){var y=h_((h[Yt]||null).action),w=c.submitter;w&&(s=(s=w[Yt]||null)?h_(s.formAction):w.getAttribute("formAction"),s!==null&&(y=s,w=null));var S=new Br("action","action",null,c,h);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(di!==0){var P=w?f_(h,w):new FormData(h);om(o,{pending:!0,data:P,method:h.method,action:y},null,P)}}else typeof y=="function"&&(S.preventDefault(),P=w?f_(h,w):new FormData(h),om(o,{pending:!0,data:P,method:h.method,action:y},y,P))},currentTarget:h}]})}}for(var qm=0;qm<Tf.length;qm++){var Fm=Tf[qm],pS=Fm.toLowerCase(),yS=Fm[0].toUpperCase()+Fm.slice(1);pr(pS,"on"+yS)}pr(Hy,"onAnimationEnd"),pr(Gy,"onAnimationIteration"),pr($y,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(O1,"onTransitionRun"),pr(M1,"onTransitionStart"),pr(j1,"onTransitionCancel"),pr(Ky,"onTransitionEnd"),Lr("onMouseEnter",["mouseout","mouseover"]),Lr("onMouseLeave",["mouseout","mouseover"]),Lr("onPointerEnter",["pointerout","pointerover"]),Lr("onPointerLeave",["pointerout","pointerover"]),Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fc));function m_(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],h=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var w=c.length-1;0<=w;w--){var S=c[w],P=S.instance,$=S.currentTarget;if(S=S.listener,P!==y&&h.isPropagationStopped())break e;y=S,h.currentTarget=$;try{y(h)}catch(ee){Pu(ee)}h.currentTarget=null,y=P}else for(w=0;w<c.length;w++){if(S=c[w],P=S.instance,$=S.currentTarget,S=S.listener,P!==y&&h.isPropagationStopped())break e;y=S,h.currentTarget=$;try{y(h)}catch(ee){Pu(ee)}h.currentTarget=null,y=P}}}}function Ve(n,s){var o=s[Ka];o===void 0&&(o=s[Ka]=new Set);var c=n+"__bubble";o.has(c)||(g_(s,n,2,!1),o.add(c))}function Hm(n,s,o){var c=0;s&&(c|=4),g_(o,n,c,s)}var Td="_reactListening"+Math.random().toString(36).slice(2);function Gm(n){if(!n[Td]){n[Td]=!0,Sl.forEach(function(o){o!=="selectionchange"&&(vS.has(o)||Hm(o,!1,n),Hm(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Td]||(s[Td]=!0,Hm("selectionchange",!1,s))}}function g_(n,s,o,c){switch(H_(s)){case 2:var h=$S;break;case 8:h=KS;break;default:h=ag}o=h.bind(null,s,o,n),h=void 0,!Xi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,o,{capture:!0,passive:h}):n.addEventListener(s,o,!0):h!==void 0?n.addEventListener(s,o,{passive:h}):n.addEventListener(s,o,!1)}function $m(n,s,o,c,h){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var S=c.stateNode.containerInfo;if(S===h)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&w.stateNode.containerInfo===h)return;w=w.return}for(;S!==null;){if(w=Mr(S),w===null)return;if(P=w.tag,P===5||P===6||P===26||P===27){c=y=w;continue e}S=S.parentNode}}c=c.return}$s(function(){var $=y,ee=Gn(o),se=[];e:{var Q=Qy.get(n);if(Q!==void 0){var X=Br,pe=n;switch(n){case"keypress":if(Wi(o)===0)break e;case"keydown":case"keyup":X=ju;break;case"focusin":pe="focus",X=ea;break;case"focusout":pe="blur",X=ea;break;case"beforeblur":case"afterblur":X=ea;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E;break;case Hy:case Gy:case $y:X=Nu;break;case Ky:X=A;break;case"scroll":case"scrollend":X=Ll;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=cs;break;case"toggle":case"beforetoggle":X=De}var Se=(s&4)!==0,ot=!Se&&(n==="scroll"||n==="scrollend"),B=Se?Q!==null?Q+"Capture":null:Q;Se=[];for(var z=$,G;z!==null;){var ne=z;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||B===null||(ne=hr(z,B),ne!=null&&Se.push(mc(z,ne,G))),ot)break;z=z.return}0<Se.length&&(Q=new X(Q,pe,null,o,ee),se.push({event:Q,listeners:Se}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",Q&&o!==Ml&&(pe=o.relatedTarget||o.fromElement)&&(Mr(pe)||pe[Dr]))break e;if((X||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(pe=o.relatedTarget||o.toElement,X=$,pe=pe?Mr(pe):null,pe!==null&&(ot=l(pe),Se=pe.tag,pe!==ot||Se!==5&&Se!==27&&Se!==6)&&(pe=null)):(X=null,pe=$),X!==pe)){if(Se=Pl,ne="onMouseLeave",B="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&(Se=cs,ne="onPointerLeave",B="onPointerEnter",z="pointer"),ot=X==null?Q:Rn(X),G=pe==null?Q:Rn(pe),Q=new Se(ne,z+"leave",X,o,ee),Q.target=ot,Q.relatedTarget=G,ne=null,Mr(ee)===$&&(Se=new Se(B,z+"enter",pe,o,ee),Se.target=G,Se.relatedTarget=ot,ne=Se),ot=ne,X&&pe)t:{for(Se=_S,B=X,z=pe,G=0,ne=B;ne;ne=Se(ne))G++;ne=0;for(var we=z;we;we=Se(we))ne++;for(;0<G-ne;)B=Se(B),G--;for(;0<ne-G;)z=Se(z),ne--;for(;G--;){if(B===z||z!==null&&B===z.alternate){Se=B;break t}B=Se(B),z=Se(z)}Se=null}else Se=null;X!==null&&p_(se,Q,X,Se,!1),pe!==null&&ot!==null&&p_(se,ot,pe,Se,!0)}}e:{if(Q=$?Rn($):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var Ye=Oy;else if(ky(Q))if(My)Ye=R1;else{Ye=N1;var ve=I1}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&Ja($.elementType)&&(Ye=Oy):Ye=C1;if(Ye&&(Ye=Ye(n,$))){Dy(se,Ye,o,ee);break e}ve&&ve(n,Q,$),n==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&kl(Q,"number",Q.value)}switch(ve=$?Rn($):window,n){case"focusin":(ky(ve)||ve.contentEditable==="true")&&(io=ve,bf=$,Fl=null);break;case"focusout":Fl=bf=io=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,qy(se,o,ee);break;case"selectionchange":if(D1)break;case"keydown":case"keyup":qy(se,o,ee)}var Me;if(Je)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else so?ta(n,o)&&(Ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&(Hr&&o.locale!=="ko"&&(so||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&so&&(Me=Vl()):(zr=ee,jl="value"in zr?zr.value:zr.textContent,so=!0)),ve=Sd($,Ue),0<ve.length&&(Ue=new Fr(Ue,n,null,o,ee),se.push({event:Ue,listeners:ve}),Me?Ue.data=Me:(Me=ro(o),Me!==null&&(Ue.data=Me)))),(Me=Kn?x1(n,o):T1(n,o))&&(Ue=Sd($,"onBeforeInput"),0<Ue.length&&(ve=new Fr("onBeforeInput","beforeinput",null,o,ee),se.push({event:ve,listeners:Ue}),ve.data=Me)),gS(se,n,$,o,ee)}m_(se,s)})}function mc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Sd(n,s){for(var o=s+"Capture",c=[];n!==null;){var h=n,y=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||y===null||(h=hr(n,o),h!=null&&c.unshift(mc(n,h,y)),h=hr(n,s),h!=null&&c.push(mc(n,h,y))),n.tag===3)return c;n=n.return}return[]}function _S(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function p_(n,s,o,c,h){for(var y=s._reactName,w=[];o!==null&&o!==c;){var S=o,P=S.alternate,$=S.stateNode;if(S=S.tag,P!==null&&P===c)break;S!==5&&S!==26&&S!==27||$===null||(P=$,h?($=hr(o,y),$!=null&&w.unshift(mc(o,$,P))):h||($=hr(o,y),$!=null&&w.push(mc(o,$,P)))),o=o.return}w.length!==0&&n.push({event:s,listeners:w})}var ES=/\r\n?/g,bS=/\u0000|\uFFFD/g;function y_(n){return(typeof n=="string"?n:""+n).replace(ES,`
`).replace(bS,"")}function v_(n,s){return s=y_(s),y_(n)===s}function at(n,s,o,c,h,y){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||wn(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&wn(n,""+c);break;case"className":kn(n,"class",c);break;case"tabIndex":kn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(n,o,c);break;case"style":Ol(n,c,y);break;case"data":if(s!=="object"){kn(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Wa(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&at(n,s,"name",h.name,h,null),at(n,s,"formEncType",h.formEncType,h,null),at(n,s,"formMethod",h.formMethod,h,null),at(n,s,"formTarget",h.formTarget,h,null)):(at(n,s,"encType",h.encType,h,null),at(n,s,"method",h.method,h,null),at(n,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Wa(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=dr);break;case"onScroll":c!=null&&Ve("scroll",n);break;case"onScrollEnd":c!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Wa(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),Ya(n,"popover",c);break;case"xlinkActuate":Vt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Vt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Vt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Vt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Vt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Vt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ya(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Su.get(o)||o,Ya(n,o,c))}}function Km(n,s,o,c,h,y){switch(o){case"style":Ol(n,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?wn(n,c):(typeof c=="number"||typeof c=="bigint")&&wn(n,""+c);break;case"onScroll":c!=null&&Ve("scroll",n);break;case"onScrollEnd":c!=null&&Ve("scrollend",n);break;case"onClick":c!=null&&(n.onclick=dr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Al.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),y=n[Yt]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(s,y,h),typeof c=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,h);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Ya(n,o,c)}}}function on(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var c=!1,h=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,y,w,o,null)}}h&&at(n,s,"srcSet",o.srcSet,o,null),c&&at(n,s,"src",o.src,o,null);return;case"input":Ve("invalid",n);var S=y=w=h=null,P=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var ee=o[c];if(ee!=null)switch(c){case"name":h=ee;break;case"type":w=ee;break;case"checked":P=ee;break;case"defaultChecked":$=ee;break;case"value":y=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:at(n,s,c,ee,o,null)}}wu(n,y,S,P,$,w,h,!1);return;case"select":Ve("invalid",n),c=w=y=null;for(h in o)if(o.hasOwnProperty(h)&&(S=o[h],S!=null))switch(h){case"value":y=S;break;case"defaultValue":w=S;break;case"multiple":c=S;default:at(n,s,h,S,o,null)}s=y,o=w,n.multiple=!!c,s!=null?qs(n,!!c,s,!1):o!=null&&qs(n,!!c,o,!0);return;case"textarea":Ve("invalid",n),y=h=c=null;for(w in o)if(o.hasOwnProperty(w)&&(S=o[w],S!=null))switch(w){case"value":c=S;break;case"defaultValue":h=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:at(n,s,w,S,o,null)}Fs(n,c,h,y);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(c=o[P],c!=null))switch(P){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(n,s,P,c,o,null)}return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(c=0;c<fc.length;c++)Ve(fc[c],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,$,c,o,null)}return;default:if(Ja(s)){for(ee in o)o.hasOwnProperty(ee)&&(c=o[ee],c!==void 0&&Km(n,s,ee,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&at(n,s,S,c,o,null))}function wS(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,y=null,w=null,S=null,P=null,$=null,ee=null;for(X in o){var se=o[X];if(o.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":P=se;default:c.hasOwnProperty(X)||at(n,s,X,null,c,se)}}for(var Q in c){var X=c[Q];if(se=o[Q],c.hasOwnProperty(Q)&&(X!=null||se!=null))switch(Q){case"type":y=X;break;case"name":h=X;break;case"checked":$=X;break;case"defaultChecked":ee=X;break;case"value":w=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==se&&at(n,s,Q,X,c,se)}}Xa(n,w,S,P,$,ee,y,h);return;case"select":X=w=S=Q=null;for(y in o)if(P=o[y],o.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":X=P;default:c.hasOwnProperty(y)||at(n,s,y,null,c,P)}for(h in c)if(y=c[h],P=o[h],c.hasOwnProperty(h)&&(y!=null||P!=null))switch(h){case"value":Q=y;break;case"defaultValue":S=y;break;case"multiple":w=y;default:y!==P&&at(n,s,h,y,c,P)}s=S,o=w,c=X,Q!=null?qs(n,!!o,Q,!1):!!c!=!!o&&(s!=null?qs(n,!!o,s,!0):qs(n,!!o,o?[]:"",!1));return;case"textarea":X=Q=null;for(S in o)if(h=o[S],o.hasOwnProperty(S)&&h!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:at(n,s,S,null,c,h)}for(w in c)if(h=c[w],y=o[w],c.hasOwnProperty(w)&&(h!=null||y!=null))switch(w){case"value":Q=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==y&&at(n,s,w,h,c,y)}xu(n,Q,X);return;case"option":for(var pe in o)if(Q=o[pe],o.hasOwnProperty(pe)&&Q!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":n.selected=!1;break;default:at(n,s,pe,null,c,Q)}for(P in c)if(Q=c[P],X=o[P],c.hasOwnProperty(P)&&Q!==X&&(Q!=null||X!=null))switch(P){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:at(n,s,P,Q,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)Q=o[Se],o.hasOwnProperty(Se)&&Q!=null&&!c.hasOwnProperty(Se)&&at(n,s,Se,null,c,Q);for($ in c)if(Q=c[$],X=o[$],c.hasOwnProperty($)&&Q!==X&&(Q!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:at(n,s,$,Q,c,X)}return;default:if(Ja(s)){for(var ot in o)Q=o[ot],o.hasOwnProperty(ot)&&Q!==void 0&&!c.hasOwnProperty(ot)&&Km(n,s,ot,void 0,c,Q);for(ee in c)Q=c[ee],X=o[ee],!c.hasOwnProperty(ee)||Q===X||Q===void 0&&X===void 0||Km(n,s,ee,Q,c,X);return}}for(var B in o)Q=o[B],o.hasOwnProperty(B)&&Q!=null&&!c.hasOwnProperty(B)&&at(n,s,B,null,c,Q);for(se in c)Q=c[se],X=o[se],!c.hasOwnProperty(se)||Q===X||Q==null&&X==null||at(n,s,se,Q,c,X)}function __(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var h=o[c],y=h.transferSize,w=h.initiatorType,S=h.duration;if(y&&S&&__(w)){for(w=0,S=h.responseEnd,c+=1;c<o.length;c++){var P=o[c],$=P.startTime;if($>S)break;var ee=P.transferSize,se=P.initiatorType;ee&&__(se)&&(P=P.responseEnd,w+=ee*(P<S?1:(S-$)/(P-$)))}if(--c,s+=8*(y+w)/(h.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qm=null,Ym=null;function Ad(n){return n.nodeType===9?n:n.ownerDocument}function E_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Xm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jm=null;function TS(){var n=window.event;return n&&n.type==="popstate"?n===Jm?!1:(Jm=n,!0):(Jm=null,!1)}var w_=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(n){return x_.resolve(null).then(n).catch(IS)}:w_;function IS(n){setTimeout(function(){throw n})}function hi(n){return n==="head"}function T_(n,s){var o=s,c=0;do{var h=o.nextSibling;if(n.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(h),Oo(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")gc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,gc(o);for(var y=o.firstChild;y;){var w=y.nextSibling,S=y.nodeName;y[Or]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&gc(n.ownerDocument.body);o=h}while(o);Oo(s)}function S_(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Wm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wm(o),Qa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function NS(n,s,o,c){for(;n.nodeType===1;){var h=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Or])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=er(n.nextSibling),n===null)break}return null}function CS(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=er(n.nextSibling),n===null))return null;return n}function A_(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=er(n.nextSibling),n===null))return null;return n}function Zm(n){return n.data==="$?"||n.data==="$~"}function eg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function RS(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function er(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var tg=null;function I_(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return er(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function N_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function C_(n,s,o){switch(s=Ad(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function gc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Qa(n)}var tr=new Map,R_=new Set;function Id(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ts=ue.d;ue.d={f:kS,r:DS,D:OS,C:MS,L:jS,m:VS,X:PS,S:LS,M:US};function kS(){var n=Ts.f(),s=vd();return n||s}function DS(n){var s=Hn(n);s!==null&&s.tag===5&&s.type==="form"?K0(s):Ts.r(n)}var Ro=typeof document>"u"?null:document;function k_(n,s,o){var c=Ro;if(c&&typeof s=="string"&&s){var h=bn(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),R_.has(h)||(R_.add(h),n={rel:n,crossOrigin:o,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),on(s,"link",n),jt(s),c.head.appendChild(s)))}}function OS(n){Ts.D(n),k_("dns-prefetch",n,null)}function MS(n,s){Ts.C(n,s),k_("preconnect",n,s)}function jS(n,s,o){Ts.L(n,s,o);var c=Ro;if(c&&n&&s){var h='link[rel="preload"][as="'+bn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+bn(o.imageSizes)+'"]')):h+='[href="'+bn(n)+'"]';var y=h;switch(s){case"style":y=ko(n);break;case"script":y=Do(n)}tr.has(y)||(n=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),tr.set(y,n),c.querySelector(h)!==null||s==="style"&&c.querySelector(pc(y))||s==="script"&&c.querySelector(yc(y))||(s=c.createElement("link"),on(s,"link",n),jt(s),c.head.appendChild(s)))}}function VS(n,s){Ts.m(n,s);var o=Ro;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+bn(c)+'"][href="'+bn(n)+'"]',y=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Do(n)}if(!tr.has(y)&&(n=_({rel:"modulepreload",href:n},s),tr.set(y,n),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yc(y)))return}c=o.createElement("link"),on(c,"link",n),jt(c),o.head.appendChild(c)}}}function LS(n,s,o){Ts.S(n,s,o);var c=Ro;if(c&&n){var h=jr(c).hoistableStyles,y=ko(n);s=s||"default";var w=h.get(y);if(!w){var S={loading:0,preload:null};if(w=c.querySelector(pc(y)))S.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},o),(o=tr.get(y))&&ng(n,o);var P=w=c.createElement("link");jt(P),on(P,"link",n),P._p=new Promise(function($,ee){P.onload=$,P.onerror=ee}),P.addEventListener("load",function(){S.loading|=1}),P.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Nd(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:S},h.set(y,w)}}}function PS(n,s){Ts.X(n,s);var o=Ro;if(o&&n){var c=jr(o).hoistableScripts,h=Do(n),y=c.get(h);y||(y=o.querySelector(yc(h)),y||(n=_({src:n,async:!0},s),(s=tr.get(h))&&rg(n,s),y=o.createElement("script"),jt(y),on(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(h,y))}}function US(n,s){Ts.M(n,s);var o=Ro;if(o&&n){var c=jr(o).hoistableScripts,h=Do(n),y=c.get(h);y||(y=o.querySelector(yc(h)),y||(n=_({src:n,async:!0,type:"module"},s),(s=tr.get(h))&&rg(n,s),y=o.createElement("script"),jt(y),on(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(h,y))}}function D_(n,s,o,c){var h=(h=Te.current)?Id(h):null;if(!h)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ko(o.href),o=jr(h).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ko(o.href);var y=jr(h).hoistableStyles,w=y.get(n);if(w||(h=h.ownerDocument||h,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,w),(y=h.querySelector(pc(n)))&&!y._p&&(w.instance=y,w.state.loading=5),tr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},tr.set(n,o),y||zS(h,n,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Do(o),o=jr(h).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ko(n){return'href="'+bn(n)+'"'}function pc(n){return'link[rel="stylesheet"]['+n+"]"}function O_(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function zS(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),on(s,"link",o),jt(s),n.head.appendChild(s))}function Do(n){return'[src="'+bn(n)+'"]'}function yc(n){return"script[async]"+n}function M_(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+bn(o.href)+'"]');if(c)return s.instance=c,jt(c),c;var h=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),jt(c),on(c,"style",h),Nd(c,o.precedence,n),s.instance=c;case"stylesheet":h=ko(o.href);var y=n.querySelector(pc(h));if(y)return s.state.loading|=4,s.instance=y,jt(y),y;c=O_(o),(h=tr.get(h))&&ng(c,h),y=(n.ownerDocument||n).createElement("link"),jt(y);var w=y;return w._p=new Promise(function(S,P){w.onload=S,w.onerror=P}),on(y,"link",c),s.state.loading|=4,Nd(y,o.precedence,n),s.instance=y;case"script":return y=Do(o.src),(h=n.querySelector(yc(y)))?(s.instance=h,jt(h),h):(c=o,(h=tr.get(y))&&(c=_({},o),rg(c,h)),n=n.ownerDocument||n,h=n.createElement("script"),jt(h),on(h,"link",c),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Nd(c,o.precedence,n));return s.instance}function Nd(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,y=h,w=0;w<c.length;w++){var S=c[w];if(S.dataset.precedence===s)y=S;else if(y!==h)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function ng(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function rg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Cd=null;function j_(n,s,o){if(Cd===null){var c=new Map,h=Cd=new Map;h.set(o,c)}else h=Cd,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),h=0;h<o.length;h++){var y=o[h];if(!(y[Or]||y[Mt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(s)||"";w=n+w;var S=c.get(w);S?S.push(y):c.set(w,[y])}}return c}function V_(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function BS(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function L_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function qS(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=ko(c.href),y=s.querySelector(pc(h));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Rd.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=y,jt(y);return}y=s.ownerDocument||s,c=O_(c),(h=tr.get(h))&&ng(c,h),y=y.createElement("link"),jt(y);var w=y;w._p=new Promise(function(S,P){w.onload=S,w.onerror=P}),on(y,"link",c),o.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Rd.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var sg=0;function FS(n,s){return n.stylesheets&&n.count===0&&Dd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Dd(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&sg===0&&(sg=62500*xS());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Dd(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>sg?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function Rd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var kd=null;function Dd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,kd=new Map,s.forEach(HS,n),kd=null,Rd.call(n))}function HS(n,s){if(!(s.state.loading&4)){var o=kd.get(n);if(o)var c=o.get(null);else{o=new Map,kd.set(n,o);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<h.length;y++){var w=h[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}h=s.instance,w=h.getAttribute("data-precedence"),y=o.get(w)||c,y===c&&o.set(null,h),o.set(w,h),this.count++,c=Rd.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),y?y.parentNode.insertBefore(h,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var vc={$$typeof:q,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function GS(n,s,o,c,h,y,w,S,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.hiddenUpdates=kr(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function P_(n,s,o,c,h,y,w,S,P,$,ee,se){return n=new GS(n,s,o,w,P,$,ee,se,S),s=1,y===!0&&(s|=24),y=On(3,null,null,s),n.current=y,y.stateNode=n,s=Lf(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:s},Bf(y),n}function U_(n){return n?(n=lo,n):lo}function z_(n,s,o,c,h,y){h=U_(h),c.context===null?c.context=h:c.pendingContext=h,c=ti(s),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=ni(n,c,s),o!==null&&(In(o,n,s),Xl(o,n,s))}function B_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function ig(n,s){B_(n,s),(n=n.alternate)&&B_(n,s)}function q_(n){if(n.tag===13||n.tag===31){var s=sa(n,67108864);s!==null&&In(s,n,67108864),ig(n,67108864)}}function F_(n){if(n.tag===13||n.tag===31){var s=Pn();s=$i(s);var o=sa(n,s);o!==null&&In(o,n,s),ig(n,s)}}var Od=!0;function $S(n,s,o,c){var h=W.T;W.T=null;var y=ue.p;try{ue.p=2,ag(n,s,o,c)}finally{ue.p=y,W.T=h}}function KS(n,s,o,c){var h=W.T;W.T=null;var y=ue.p;try{ue.p=8,ag(n,s,o,c)}finally{ue.p=y,W.T=h}}function ag(n,s,o,c){if(Od){var h=og(c);if(h===null)$m(n,s,c,Md,o),G_(n,c);else if(YS(h,n,s,o,c))c.stopPropagation();else if(G_(n,c),s&4&&-1<QS.indexOf(n)){for(;h!==null;){var y=Hn(h);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Cr(y.pendingLanes);if(w!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;w;){var P=1<<31-It(w);S.entanglements[1]|=P,w&=~P}Qr(y),(We&6)===0&&(pd=pn()+500,hc(0))}}break;case 31:case 13:S=sa(y,2),S!==null&&In(S,y,2),vd(),ig(y,2)}if(y=og(c),y===null&&$m(n,s,c,Md,o),y===h)break;h=y}h!==null&&c.stopPropagation()}else $m(n,s,c,null,o)}}function og(n){return n=Gn(n),lg(n)}var Md=null;function lg(n){if(Md=null,n=Mr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=p(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Md=n,null}function H_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qi()){case bl:return 2;case wl:return 8;case zs:case mf:return 32;case hu:return 268435456;default:return 32}default:return 32}}var cg=!1,fi=null,mi=null,gi=null,_c=new Map,Ec=new Map,pi=[],QS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G_(n,s){switch(n){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":_c.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(s.pointerId)}}function bc(n,s,o,c,h,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[h]},s!==null&&(s=Hn(s),s!==null&&q_(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function YS(n,s,o,c,h){switch(s){case"focusin":return fi=bc(fi,n,s,o,c,h),!0;case"dragenter":return mi=bc(mi,n,s,o,c,h),!0;case"mouseover":return gi=bc(gi,n,s,o,c,h),!0;case"pointerover":var y=h.pointerId;return _c.set(y,bc(_c.get(y)||null,n,s,o,c,h)),!0;case"gotpointercapture":return y=h.pointerId,Ec.set(y,bc(Ec.get(y)||null,n,s,o,c,h)),!0}return!1}function $_(n){var s=Mr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,cr(n.priority,function(){F_(o)});return}}else if(s===31){if(s=p(o),s!==null){n.blockedOn=s,cr(n.priority,function(){F_(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=og(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Ml=c,o.target.dispatchEvent(c),Ml=null}else return s=Hn(o),s!==null&&q_(s),n.blockedOn=o,!1;s.shift()}return!0}function K_(n,s,o){jd(n)&&o.delete(s)}function XS(){cg=!1,fi!==null&&jd(fi)&&(fi=null),mi!==null&&jd(mi)&&(mi=null),gi!==null&&jd(gi)&&(gi=null),_c.forEach(K_),Ec.forEach(K_)}function Vd(n,s){n.blockedOn===s&&(n.blockedOn=null,cg||(cg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,XS)))}var Ld=null;function Q_(n){Ld!==n&&(Ld=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ld===n&&(Ld=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],h=n[s+2];if(typeof c!="function"){if(lg(c||o)===null)continue;break}var y=Hn(o);y!==null&&(n.splice(s,3),s-=3,om(y,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function Oo(n){function s(P){return Vd(P,n)}fi!==null&&Vd(fi,n),mi!==null&&Vd(mi,n),gi!==null&&Vd(gi,n),_c.forEach(s),Ec.forEach(s);for(var o=0;o<pi.length;o++){var c=pi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<pi.length&&(o=pi[0],o.blockedOn===null);)$_(o),o.blockedOn===null&&pi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],y=o[c+1],w=h[Yt]||null;if(typeof y=="function")w||Q_(o);else if(w){var S=null;if(y&&y.hasAttribute("formAction")){if(h=y,w=y[Yt]||null)S=w.formAction;else if(lg(h)!==null)continue}else S=w.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Q_(o)}}}function Y_(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return h=w})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function ug(n){this._internalRoot=n}Pd.prototype.render=ug.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Pn();z_(o,c,n,s,null,null)},Pd.prototype.unmount=ug.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;z_(n.current,2,null,n,null,null),vd(),s[Dr]=null}};function Pd(n){this._internalRoot=n}Pd.prototype.unstable_scheduleHydration=function(n){if(n){var s=vu();n={blockedOn:null,target:n,priority:s};for(var o=0;o<pi.length&&s!==0&&s<pi[o].priority;o++);pi.splice(o,0,n),o===0&&$_(n)}};var X_=e.version;if(X_!=="19.2.0")throw Error(i(527,X_,"19.2.0"));ue.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=m(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var JS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{or=Ud.inject(JS),tn=Ud}catch{}}return xc.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,c="",h=rv,y=sv,w=iv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=P_(n,1,!1,null,null,o,c,null,h,y,w,Y_),n[Dr]=s.current,Gm(n),new ug(s)},xc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var c=!1,h="",y=rv,w=sv,S=iv,P=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),s=P_(n,1,!0,s,o??null,c,h,P,y,w,S,Y_),s.context=U_(null),o=s.current,c=Pn(),c=$i(c),h=ti(c),h.callback=null,ni(o,h,c),o=c,s.current.lanes=o,Hi(s,o),Qr(s),n[Dr]=s.current,Gm(n),new Pd(s)},xc.version="19.2.0",xc}var aE;function oA(){if(aE)return fg.exports;aE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fg.exports=aA(),fg.exports}var lA=oA();const cA=rw(lA),uA="modulepreload",dA=function(r){return"/EduEvent/"+r},oE={},il=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let u=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),f=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));a=u(t.map(m=>{if(m=dA(m),m in oE)return;oE[m]=!0;const v=m.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":uA,v||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),v)return new Promise((T,D)=>{b.addEventListener("load",T),b.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return a.then(u=>{for(const p of u||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lE="popstate";function hA(r={}){function e(a,l){let{pathname:u="/",search:p="",hash:f=""}=Da(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Lg("",{pathname:u,search:p,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),p="";if(u&&u.getAttribute("href")){let f=a.location.href,m=f.indexOf("#");p=m===-1?f:f.slice(0,m)}return p+"#"+(typeof l=="string"?l:Lc(l))}function i(a,l){qn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return mA(e,t,i,r)}function wt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function qn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fA(){return Math.random().toString(36).substring(2,10)}function cE(r,e){return{usr:r.state,key:r.key,idx:e}}function Lg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Da(e):e,state:t,key:e&&e.key||i||fA()}}function Lc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Da(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function mA(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,p="POP",f=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function _(){p="POP";let k=v(),F=k==null?null:k-m;m=k,f&&f({action:p,location:M.location,delta:F})}function b(k,F){p="PUSH";let K=Lg(M.location,k,F);t&&t(K,k),m=v()+1;let q=cE(K,m),oe=M.createHref(K);try{u.pushState(q,"",oe)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;a.location.assign(oe)}l&&f&&f({action:p,location:M.location,delta:1})}function T(k,F){p="REPLACE";let K=Lg(M.location,k,F);t&&t(K,k),m=v();let q=cE(K,m),oe=M.createHref(K);u.replaceState(q,"",oe),l&&f&&f({action:p,location:M.location,delta:0})}function D(k){return gA(k)}let M={get action(){return p},get location(){return r(a,u)},listen(k){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(lE,_),f=k,()=>{a.removeEventListener(lE,_),f=null}},createHref(k){return e(a,k)},createURL:D,encodeLocation(k){let F=D(k);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:b,replace:T,go(k){return u.go(k)}};return M}function gA(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),wt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Lc(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function sw(r,e,t="/"){return pA(r,e,t,!1)}function pA(r,e,t,i){let a=typeof e=="string"?Da(e):e,l=Ds(a.pathname||"/",t);if(l==null)return null;let u=iw(r);yA(u);let p=null;for(let f=0;p==null&&f<u.length;++f){let m=NA(l);p=AA(u[f],m,i)}return p}function iw(r,e=[],t=[],i="",a=!1){let l=(u,p,f=a,m)=>{let v={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&f)return;wt(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let _=Rs([i,v.relativePath]),b=t.concat(v);u.children&&u.children.length>0&&(wt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),iw(u.children,e,b,_,f)),!(u.path==null&&!u.index)&&e.push({path:_,score:TA(_,u.index),routesMeta:b})};return r.forEach((u,p)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))l(u,p);else for(let m of aw(u.path))l(u,p,!0,m)}),e}function aw(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=aw(i.join("/")),p=[];return p.push(...u.map(f=>f===""?l:[l,f].join("/"))),a&&p.push(...u),p.map(f=>r.startsWith("/")&&f===""?"/":f)}function yA(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:SA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var vA=/^:[\w-]+$/,_A=3,EA=2,bA=1,wA=10,xA=-2,uE=r=>r==="*";function TA(r,e){let t=r.split("/"),i=t.length;return t.some(uE)&&(i+=xA),e&&(i+=EA),t.filter(a=>!uE(a)).reduce((a,l)=>a+(vA.test(l)?_A:l===""?bA:wA),i)}function SA(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function AA(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",u=[];for(let p=0;p<i.length;++p){let f=i[p],m=p===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",_=oh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),b=f.route;if(!_&&m&&t&&!i[i.length-1].route.index&&(_=oh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!_)return null;Object.assign(a,_.params),u.push({params:a,pathname:Rs([l,_.pathname]),pathnameBase:OA(Rs([l,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(l=Rs([l,_.pathnameBase]))}return u}function oh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=IA(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:i.reduce((m,{paramName:v,isOptional:_},b)=>{if(v==="*"){let D=p[b]||"";u=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const T=p[b];return _&&!T?m[v]=void 0:m[v]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:r}}function IA(r,e=!1,t=!0){qn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,f)=>(i.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function NA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ds(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var CA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RA=r=>CA.test(r);function kA(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?Da(r):r,l;if(t)if(RA(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),qn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?l=dE(t.substring(1),"/"):l=dE(t,e)}else l=e;return{pathname:l,search:MA(i),hash:jA(a)}}function dE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function yg(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fp(r){let e=DA(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function mp(r,e,t,i=!1){let a;typeof r=="string"?a=Da(r):(a={...r},wt(!a.pathname||!a.pathname.includes("?"),yg("?","pathname","search",a)),wt(!a.pathname||!a.pathname.includes("#"),yg("#","pathname","hash",a)),wt(!a.search||!a.search.includes("#"),yg("#","search","hash",a)));let l=r===""||a.pathname==="",u=l?"/":a.pathname,p;if(u==null)p=t;else{let _=e.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),_-=1;a.pathname=b.join("/")}p=_>=0?e[_]:"/"}let f=kA(a,p),m=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Rs=r=>r.join("/").replace(/\/\/+/g,"/"),OA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),MA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function VA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ow=["POST","PUT","PATCH","DELETE"];new Set(ow);var LA=["GET",...ow];new Set(LA);var al=V.createContext(null);al.displayName="DataRouter";var Mh=V.createContext(null);Mh.displayName="DataRouterState";V.createContext(!1);var lw=V.createContext({isTransitioning:!1});lw.displayName="ViewTransition";var PA=V.createContext(new Map);PA.displayName="Fetchers";var UA=V.createContext(null);UA.displayName="Await";var Sr=V.createContext(null);Sr.displayName="Navigation";var Xc=V.createContext(null);Xc.displayName="Location";var Ar=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var gp=V.createContext(null);gp.displayName="RouteError";function zA(r,{relative:e}={}){wt(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(Sr),{hash:a,pathname:l,search:u}=Jc(r,{relative:e}),p=l;return t!=="/"&&(p=l==="/"?t:Rs([t,l])),i.createHref({pathname:p,search:u,hash:a})}function ol(){return V.useContext(Xc)!=null}function ar(){return wt(ol(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Xc).location}var cw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uw(r){V.useContext(Sr).static||V.useLayoutEffect(r)}function Oa(){let{isDataRoute:r}=V.useContext(Ar);return r?ZA():BA()}function BA(){wt(ol(),"useNavigate() may be used only in the context of a <Router> component.");let r=V.useContext(al),{basename:e,navigator:t}=V.useContext(Sr),{matches:i}=V.useContext(Ar),{pathname:a}=ar(),l=JSON.stringify(fp(i)),u=V.useRef(!1);return uw(()=>{u.current=!0}),V.useCallback((f,m={})=>{if(qn(u.current,cw),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=mp(f,JSON.parse(l),a,m.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Rs([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,l,a,r])}V.createContext(null);function dw(){let{matches:r}=V.useContext(Ar),e=r[r.length-1];return e?e.params:{}}function Jc(r,{relative:e}={}){let{matches:t}=V.useContext(Ar),{pathname:i}=ar(),a=JSON.stringify(fp(t));return V.useMemo(()=>mp(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function qA(r,e){return hw(r,e)}function hw(r,e,t,i,a){var K;wt(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=V.useContext(Sr),{matches:u}=V.useContext(Ar),p=u[u.length-1],f=p?p.params:{},m=p?p.pathname:"/",v=p?p.pathnameBase:"/",_=p&&p.route;{let q=_&&_.path||"";fw(m,!_||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let b=ar(),T;if(e){let q=typeof e=="string"?Da(e):e;wt(v==="/"||((K=q.pathname)==null?void 0:K.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${q.pathname}" was given in the \`location\` prop.`),T=q}else T=b;let D=T.pathname||"/",M=D;if(v!=="/"){let q=v.replace(/^\//,"").split("/");M="/"+D.replace(/^\//,"").split("/").slice(q.length).join("/")}let k=sw(r,{pathname:M});qn(_||k!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),qn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=KA(k&&k.map(q=>Object.assign({},q,{params:Object.assign({},f,q.params),pathname:Rs([v,l.encodeLocation?l.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:Rs([v,l.encodeLocation?l.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),u,t,i,a);return e&&F?V.createElement(Xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},F):F}function FA(){let r=WA(),e=VA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,u)}var HA=V.createElement(FA,null),GA=class extends V.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?V.createElement(Ar.Provider,{value:this.props.routeContext},V.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $A({routeContext:r,match:e,children:t}){let i=V.useContext(al);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ar.Provider,{value:r},t)}function KA(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,u=t==null?void 0:t.errors;if(u!=null){let v=l.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);wt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let p=!1,f=-1;if(t)for(let v=0;v<l.length;v++){let _=l[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=v),_.route.id){let{loaderData:b,errors:T}=t,D=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!T||T[_.route.id]===void 0);if(_.route.lazy||D){p=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let m=t&&i?(v,_)=>{var b,T;i(v,{location:t.location,params:((T=(b=t.matches)==null?void 0:b[0])==null?void 0:T.params)??{},errorInfo:_})}:void 0;return l.reduceRight((v,_,b)=>{let T,D=!1,M=null,k=null;t&&(T=u&&_.route.id?u[_.route.id]:void 0,M=_.route.errorElement||HA,p&&(f<0&&b===0?(fw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,k=null):f===b&&(D=!0,k=_.route.hydrateFallbackElement||null)));let F=e.concat(l.slice(0,b+1)),K=()=>{let q;return T?q=M:D?q=k:_.route.Component?q=V.createElement(_.route.Component,null):_.route.element?q=_.route.element:q=v,V.createElement($A,{match:_,routeContext:{outlet:v,matches:F,isDataRoute:t!=null},children:q})};return t&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?V.createElement(GA,{location:t.location,revalidation:t.revalidation,component:M,error:T,children:K(),routeContext:{outlet:null,matches:F,isDataRoute:!0},onError:m}):K()},null)}function pp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(r){let e=V.useContext(al);return wt(e,pp(r)),e}function YA(r){let e=V.useContext(Mh);return wt(e,pp(r)),e}function XA(r){let e=V.useContext(Ar);return wt(e,pp(r)),e}function yp(r){let e=XA(r),t=e.matches[e.matches.length-1];return wt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function JA(){return yp("useRouteId")}function WA(){var i;let r=V.useContext(gp),e=YA("useRouteError"),t=yp("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function ZA(){let{router:r}=QA("useNavigate"),e=yp("useNavigate"),t=V.useRef(!1);return uw(()=>{t.current=!0}),V.useCallback(async(a,l={})=>{qn(t.current,cw),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var hE={};function fw(r,e,t){!e&&!hE[r]&&(hE[r]=!0,qn(!1,t))}V.memo(e2);function e2({routes:r,future:e,state:t,unstable_onError:i}){return hw(r,void 0,t,i,e)}function Qd({to:r,replace:e,state:t,relative:i}){wt(ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=V.useContext(Sr);qn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(Ar),{pathname:u}=ar(),p=Oa(),f=mp(r,fp(l),u,i==="path"),m=JSON.stringify(f);return V.useEffect(()=>{p(JSON.parse(m),{replace:e,state:t,relative:i})},[p,m,i,e,t]),null}function Nn(r){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function t2({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){wt(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),p=V.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Da(t));let{pathname:f="/",search:m="",hash:v="",state:_=null,key:b="default"}=t,T=V.useMemo(()=>{let D=Ds(f,u);return D==null?null:{location:{pathname:D,search:m,hash:v,state:_,key:b},navigationType:i}},[u,f,m,v,_,b,i]);return qn(T!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:V.createElement(Sr.Provider,{value:p},V.createElement(Xc.Provider,{children:e,value:T}))}function n2({children:r,location:e}){return qA(Pg(r),e)}function Pg(r,e=[]){let t=[];return V.Children.forEach(r,(i,a)=>{if(!V.isValidElement(i))return;let l=[...e,a];if(i.type===V.Fragment){t.push.apply(t,Pg(i.props.children,l));return}wt(i.type===Nn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Pg(i.props.children,l)),t.push(u)}),t}var Yd="get",Xd="application/x-www-form-urlencoded";function jh(r){return r!=null&&typeof r.tagName=="string"}function r2(r){return jh(r)&&r.tagName.toLowerCase()==="button"}function s2(r){return jh(r)&&r.tagName.toLowerCase()==="form"}function i2(r){return jh(r)&&r.tagName.toLowerCase()==="input"}function a2(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function o2(r,e){return r.button===0&&(!e||e==="_self")&&!a2(r)}var zd=null;function l2(){if(zd===null)try{new FormData(document.createElement("form"),0),zd=!1}catch{zd=!0}return zd}var c2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vg(r){return r!=null&&!c2.has(r)?(qn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xd}"`),null):r}function u2(r,e){let t,i,a,l,u;if(s2(r)){let p=r.getAttribute("action");i=p?Ds(p,e):null,t=r.getAttribute("method")||Yd,a=vg(r.getAttribute("enctype"))||Xd,l=new FormData(r)}else if(r2(r)||i2(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||p.getAttribute("action");if(i=f?Ds(f,e):null,t=r.getAttribute("formmethod")||p.getAttribute("method")||Yd,a=vg(r.getAttribute("formenctype"))||vg(p.getAttribute("enctype"))||Xd,l=new FormData(p,r),!l2()){let{name:m,type:v,value:_}=r;if(v==="image"){let b=m?`${m}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else m&&l.append(m,_)}}else{if(jh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yd,i=null,a=Xd,u=r}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function d2(r,e,t){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ds(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function h2(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function f2(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function m2(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await h2(l,t);return u.links?u.links():[]}return[]}));return v2(i.flat(1).filter(f2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function fE(r,e,t,i,a,l){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,p=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,m)=>u(f,m)||p(f,m)):l==="data"?e.filter((f,m)=>{var _;let v=i.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||p(f,m))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function g2(r,e,{includeHydrateFallback:t}={}){return p2(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function p2(r){return[...new Set(r)]}function y2(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function v2(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(y2(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function mw(){let r=V.useContext(al);return vp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function _2(){let r=V.useContext(Mh);return vp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var _p=V.createContext(void 0);_p.displayName="FrameworkContext";function gw(){let r=V.useContext(_p);return vp(r,"You must render this element inside a <HydratedRouter> element"),r}function E2(r,e){let t=V.useContext(_p),[i,a]=V.useState(!1),[l,u]=V.useState(!1),{onFocus:p,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:_}=e,b=V.useRef(null);V.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let M=F=>{F.forEach(K=>{u(K.isIntersecting)})},k=new IntersectionObserver(M,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[r]),V.useEffect(()=>{if(i){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[i]);let T=()=>{a(!0)},D=()=>{a(!1),u(!1)};return t?r!=="intent"?[l,b,{}]:[l,b,{onFocus:Tc(p,T),onBlur:Tc(f,D),onMouseEnter:Tc(m,T),onMouseLeave:Tc(v,D),onTouchStart:Tc(_,T)}]:[!1,b,{}]}function Tc(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function b2({page:r,...e}){let{router:t}=mw(),i=V.useMemo(()=>sw(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?V.createElement(x2,{page:r,matches:i,...e}):null}function w2(r){let{manifest:e,routeModules:t}=gw(),[i,a]=V.useState([]);return V.useEffect(()=>{let l=!1;return m2(r,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[r,e,t]),i}function x2({page:r,matches:e,...t}){let i=ar(),{manifest:a,routeModules:l}=gw(),{basename:u}=mw(),{loaderData:p,matches:f}=_2(),m=V.useMemo(()=>fE(r,e,f,a,i,"data"),[r,e,f,a,i]),v=V.useMemo(()=>fE(r,e,f,a,i,"assets"),[r,e,f,a,i]),_=V.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let D=new Set,M=!1;if(e.forEach(F=>{var q;let K=a.routes[F.route.id];!K||!K.hasLoader||(!m.some(oe=>oe.route.id===F.route.id)&&F.route.id in p&&((q=l[F.route.id])!=null&&q.shouldRevalidate)||K.hasClientLoader?M=!0:D.add(F.route.id))}),D.size===0)return[];let k=d2(r,u,"data");return M&&D.size>0&&k.searchParams.set("_routes",e.filter(F=>D.has(F.route.id)).map(F=>F.route.id).join(",")),[k.pathname+k.search]},[u,p,i,a,m,e,r,l]),b=V.useMemo(()=>g2(v,a),[v,a]),T=w2(v);return V.createElement(V.Fragment,null,_.map(D=>V.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),b.map(D=>V.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),T.map(({key:D,link:M})=>V.createElement("link",{key:D,nonce:t.nonce,...M})))}function T2(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pw&&(window.__reactRouterVersion="7.9.6")}catch{}function S2({basename:r,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=hA({window:t,v5Compat:!0}));let a=i.current,[l,u]=V.useState({action:a.action,location:a.location}),p=V.useCallback(f=>{V.startTransition(()=>u(f))},[u]);return V.useLayoutEffect(()=>a.listen(p),[a,p]),V.createElement(t2,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:a})}var yw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:p,target:f,to:m,preventScrollReset:v,viewTransition:_,...b},T){let{basename:D}=V.useContext(Sr),M=typeof m=="string"&&yw.test(m),k,F=!1;if(typeof m=="string"&&M&&(k=m,pw))try{let C=new URL(window.location.href),U=m.startsWith("//")?new URL(C.protocol+m):new URL(m),L=Ds(U.pathname,D);U.origin===C.origin&&L!=null?m=L+U.search+U.hash:F=!0}catch{qn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=zA(m,{relative:a}),[q,oe,ae]=E2(i,b),fe=C2(m,{replace:u,state:p,target:f,preventScrollReset:v,relative:a,viewTransition:_});function R(C){e&&e(C),C.defaultPrevented||fe(C)}let I=V.createElement("a",{...b,...ae,href:k||K,onClick:F||l?e:R,ref:T2(T,oe),target:f,"data-discover":!M&&t==="render"?"true":void 0});return q&&!M?V.createElement(V.Fragment,null,I,V.createElement(b2,{page:K})):I});lt.displayName="Link";var A2=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:p,children:f,...m},v){let _=Jc(u,{relative:m.relative}),b=ar(),T=V.useContext(Mh),{navigator:D,basename:M}=V.useContext(Sr),k=T!=null&&M2(_)&&p===!0,F=D.encodeLocation?D.encodeLocation(_).pathname:_.pathname,K=b.pathname,q=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(K=K.toLowerCase(),q=q?q.toLowerCase():null,F=F.toLowerCase()),q&&M&&(q=Ds(q,M)||q);const oe=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let ae=K===F||!a&&K.startsWith(F)&&K.charAt(oe)==="/",fe=q!=null&&(q===F||!a&&q.startsWith(F)&&q.charAt(F.length)==="/"),R={isActive:ae,isPending:fe,isTransitioning:k},I=ae?e:void 0,C;typeof i=="function"?C=i(R):C=[i,ae?"active":null,fe?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(R):l;return V.createElement(lt,{...m,"aria-current":I,className:C,ref:v,style:U,to:u,viewTransition:p},typeof f=="function"?f(R):f)});A2.displayName="NavLink";var I2=V.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=Yd,action:p,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:_,...b},T)=>{let D=D2(),M=O2(p,{relative:m}),k=u.toLowerCase()==="get"?"get":"post",F=typeof p=="string"&&yw.test(p),K=q=>{if(f&&f(q),q.defaultPrevented)return;q.preventDefault();let oe=q.nativeEvent.submitter,ae=(oe==null?void 0:oe.getAttribute("formmethod"))||u;D(oe||q.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:a,state:l,relative:m,preventScrollReset:v,viewTransition:_})};return V.createElement("form",{ref:T,method:k,action:M,onSubmit:i?f:K,...b,"data-discover":!F&&r==="render"?"true":void 0})});I2.displayName="Form";function N2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vw(r){let e=V.useContext(al);return wt(e,N2(r)),e}function C2(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let p=Oa(),f=ar(),m=Jc(r,{relative:l});return V.useCallback(v=>{if(o2(v,e)){v.preventDefault();let _=t!==void 0?t:Lc(f)===Lc(m);p(r,{replace:_,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[f,p,m,t,i,e,r,a,l,u])}var R2=0,k2=()=>`__${String(++R2)}__`;function D2(){let{router:r}=vw("useSubmit"),{basename:e}=V.useContext(Sr),t=JA();return V.useCallback(async(i,a={})=>{let{action:l,method:u,encType:p,formData:f,body:m}=u2(i,e);if(a.navigate===!1){let v=a.fetcherKey||k2();await r.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||u,formEncType:a.encType||p,flushSync:a.flushSync})}else await r.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||u,formEncType:a.encType||p,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function O2(r,{relative:e}={}){let{basename:t}=V.useContext(Sr),i=V.useContext(Ar);wt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Jc(r||".",{relative:e})},u=ar();if(r==null){l.search=u.search;let p=new URLSearchParams(l.search),f=p.getAll("index");if(f.some(v=>v==="")){p.delete("index"),f.filter(_=>_).forEach(_=>p.append("index",_));let v=p.toString();l.search=v?`?${v}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Rs([t,l.pathname])),Lc(l)}function M2(r,{relative:e}={}){let t=V.useContext(lw);wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=vw("useViewTransitionState"),a=Jc(r,{relative:e});if(!t.isTransitioning)return!1;let l=Ds(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Ds(t.nextLocation.pathname,i)||t.nextLocation.pathname;return oh(a.pathname,u)!=null||oh(a.pathname,l)!=null}var Kt=(r=>(r.ADMIN="admin",r.USER="user",r))(Kt||{}),Zt=(r=>(r.CONFIRMED="confirmed",r.CANCELED="canceled",r.WAITLIST="waitlist",r))(Zt||{});const br=r=>{if(!r)return"";if(r.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,t,i]=r.split("-");return`${i}/${t}/${e}`}try{const e=new Date(r);return isNaN(e.getTime())?r:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return r}},mE=r=>{if(!r)return"";try{let e;if(r.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,i,a]=r.split("-").map(Number);e=new Date(t,i-1,a)}else e=new Date(r);return isNaN(e.getTime())?r:new Intl.DateTimeFormat("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"}).format(e)}catch{return r}},wi=r=>{if(!r)return 0;const[e,t]=r.split(":").map(Number);return e*60+t},_g={},j2=r=>r&&r.apiKey&&r.projectId&&r.appId,gE={apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.appspot.com",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML",vapidKey:(_g==null?void 0:_g.VITE_FIREBASE_VAPID_KEY)||""},xa={useFirebase:j2(gE),firebase:gE},V2=()=>{};var pE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},L2=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],p=r[t++],f=((a&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=r[t++],u=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,p=u?r[a+1]:0,f=a+2<r.length,m=f?r[a+2]:0,v=l>>2,_=(l&3)<<4|p>>4;let b=(p&15)<<2|m>>6,T=m&63;f||(T=64,u||(b=64)),i.push(t[v],t[_],t[b],t[T])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(_w(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):L2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],p=a<r.length?t[r.charAt(a)]:0;++a;const m=a<r.length?t[r.charAt(a)]:64;++a;const _=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||p==null||m==null||_==null)throw new P2;const b=l<<2|p>>4;if(i.push(b),m!==64){const T=p<<4&240|m>>2;if(i.push(T),_!==64){const D=m<<6&192|_;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class P2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U2=function(r){const e=_w(r);return Ew.encodeByteArray(e,!0)},lh=function(r){return U2(r).replace(/\./g,"")},bw=function(r){try{return Ew.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=()=>z2().__FIREBASE_DEFAULTS__,q2=()=>{if(typeof process>"u"||typeof pE>"u")return;const r=pE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},F2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&bw(r[1]);return e&&JSON.parse(e)},Vh=()=>{try{return V2()||B2()||q2()||F2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ww=r=>{var e,t;return(t=(e=Vh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},H2=r=>{const e=ww(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},xw=()=>{var r;return(r=Vh())==null?void 0:r.config},Tw=r=>{var e;return(e=Vh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sw(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[lh(JSON.stringify(t)),lh(JSON.stringify(u)),""].join(".")}const kc={};function K2(){const r={prod:[],emulator:[]};for(const e of Object.keys(kc))kc[e]?r.emulator.push(e):r.prod.push(e);return r}function Q2(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let yE=!1;function Aw(r,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||kc[r]===e||kc[r]||yE)return;kc[r]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=K2().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,T){b.setAttribute("width","24"),b.setAttribute("id",T),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{yE=!0,u()},b}function v(b,T){b.setAttribute("id",T),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=Q2(i),T=t("text"),D=document.getElementById(T)||document.createElement("span"),M=t("learnmore"),k=document.getElementById(M)||document.createElement("a"),F=t("preprendIcon"),K=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const q=b.element;p(q),v(k,M);const oe=m();f(K,F),q.append(K,D,k,oe),document.body.appendChild(q)}l?(D.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function X2(){var e;const r=(e=Vh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Z2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eI(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tI(){return!X2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Iw(){try{return typeof indexedDB=="object"}catch{return!1}}function Nw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function nI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="FirebaseError";class ss extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rI,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ma.prototype.create)}}class Ma{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?sI(l,i):"Error",p=`${this.serviceName}: ${u} (${a}).`;return new ss(a,p,i)}}function sI(r,e){return r.replace(iI,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const iI=/\{\$([^}]+)}/g;function aI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Os(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],u=e[a];if(vE(l)&&vE(u)){if(!Os(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function vE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Sc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ac(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oI(r,e){const t=new lI(r,e);return t.subscribe.bind(t)}class lI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");cI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Eg),a.error===void 0&&(a.error=Eg),a.complete===void 0&&(a.complete=Eg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r){return r&&r._delegate?r._delegate:r}class wr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new G2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hI(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dI(r){return r===ya?void 0:r}function hI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const mI={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},gI=ze.INFO,pI={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},yI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=pI[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=gI,this._logHandler=yI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const vI=(r,e)=>e.some(t=>r instanceof t);let _E,EE;function _I(){return _E||(_E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EI(){return EE||(EE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cw=new WeakMap,Ug=new WeakMap,Rw=new WeakMap,bg=new WeakMap,bp=new WeakMap;function bI(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(ks(r.result)),a()},u=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Cw.set(t,r)}).catch(()=>{}),bp.set(e,r),e}function wI(r){if(Ug.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Ug.set(r,e)}let zg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ug.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Rw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ks(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function xI(r){zg=r(zg)}function TI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(wg(this),e,...t);return Rw.set(i,e.sort?e.sort():[e]),ks(i)}:EI().includes(r)?function(...e){return r.apply(wg(this),e),ks(Cw.get(this))}:function(...e){return ks(r.apply(wg(this),e))}}function SI(r){return typeof r=="function"?TI(r):(r instanceof IDBTransaction&&wI(r),vI(r,_I())?new Proxy(r,zg):r)}function ks(r){if(r instanceof IDBRequest)return bI(r);if(bg.has(r))return bg.get(r);const e=SI(r);return e!==r&&(bg.set(r,e),bp.set(e,r)),e}const wg=r=>bp.get(r);function Lh(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),p=ks(u);return i&&u.addEventListener("upgradeneeded",f=>{i(ks(u.result),f.oldVersion,f.newVersion,ks(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),p.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}function xg(r,{blocked:e}={}){const t=indexedDB.deleteDatabase(r);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),ks(t).then(()=>{})}const AI=["get","getKey","getAll","getAllKeys","count"],II=["put","add","delete","clear"],Tg=new Map;function bE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=II.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||AI.includes(t)))return;const l=async function(u,...p){const f=this.transaction(u,a?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(p.shift())),(await Promise.all([m[t](...p),a&&f.done]))[0]};return Tg.set(e,l),l}xI(r=>({...r,get:(e,t,i)=>bE(e,t)||r.get(e,t,i),has:(e,t)=>!!bE(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function CI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bg="@firebase/app",wE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Ep("@firebase/app"),RI="@firebase/app-compat",kI="@firebase/analytics-compat",DI="@firebase/analytics",OI="@firebase/app-check-compat",MI="@firebase/app-check",jI="@firebase/auth",VI="@firebase/auth-compat",LI="@firebase/database",PI="@firebase/data-connect",UI="@firebase/database-compat",zI="@firebase/functions",BI="@firebase/functions-compat",qI="@firebase/installations",FI="@firebase/installations-compat",HI="@firebase/messaging",GI="@firebase/messaging-compat",$I="@firebase/performance",KI="@firebase/performance-compat",QI="@firebase/remote-config",YI="@firebase/remote-config-compat",XI="@firebase/storage",JI="@firebase/storage-compat",WI="@firebase/firestore",ZI="@firebase/ai",eN="@firebase/firestore-compat",tN="firebase",nN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="[DEFAULT]",rN={[Bg]:"fire-core",[RI]:"fire-core-compat",[DI]:"fire-analytics",[kI]:"fire-analytics-compat",[MI]:"fire-app-check",[OI]:"fire-app-check-compat",[jI]:"fire-auth",[VI]:"fire-auth-compat",[LI]:"fire-rtdb",[PI]:"fire-data-connect",[UI]:"fire-rtdb-compat",[zI]:"fire-fn",[BI]:"fire-fn-compat",[qI]:"fire-iid",[FI]:"fire-iid-compat",[HI]:"fire-fcm",[GI]:"fire-fcm-compat",[$I]:"fire-perf",[KI]:"fire-perf-compat",[QI]:"fire-rc",[YI]:"fire-rc-compat",[XI]:"fire-gcs",[JI]:"fire-gcs-compat",[WI]:"fire-fst",[eN]:"fire-fst-compat",[ZI]:"fire-vertex","fire-js":"fire-js",[tN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,sN=new Map,Fg=new Map;function xE(r,e){try{r.container.addComponent(e)}catch(t){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ns(r){const e=r.name;if(Fg.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Fg.set(e,r);for(const t of ch.values())xE(t,r);for(const t of sN.values())xE(t,r);return!0}function cl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function nr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Ma("app","Firebase",iN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=nN;function kw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:qg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Si.create("bad-app-name",{appName:String(a)});if(t||(t=xw()),!t)throw Si.create("no-options");const l=ch.get(a);if(l){if(Os(t,l.options)&&Os(i,l.config))return l;throw Si.create("duplicate-app",{appName:a})}const u=new fI(a);for(const f of Fg.values())u.addComponent(f);const p=new aN(t,i,u);return ch.set(a,p),p}function wp(r=qg){const e=ch.get(r);if(!e&&r===qg&&xw())return kw();if(!e)throw Si.create("no-app",{appName:r});return e}function sr(r,e,t){let i=rN[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(u.join(" "));return}ns(new wr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebase-heartbeat-database",lN=1,Pc="firebase-heartbeat-store";let Sg=null;function Dw(){return Sg||(Sg=Lh(oN,lN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Pc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Si.create("idb-open",{originalErrorMessage:r.message})})),Sg}async function cN(r){try{const t=(await Dw()).transaction(Pc),i=await t.objectStore(Pc).get(Ow(r));return await t.done,i}catch(e){if(e instanceof ss)Ms.warn(e.message);else{const t=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(t.message)}}}async function TE(r,e){try{const i=(await Dw()).transaction(Pc,"readwrite");await i.objectStore(Pc).put(e,Ow(r)),await i.done}catch(t){if(t instanceof ss)Ms.warn(t.message);else{const i=Si.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ms.warn(i.message)}}}function Ow(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=1024,dN=30;class hN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=SE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>dN){const u=gN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ms.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=SE(),{heartbeatsToSend:i,unsentEntries:a}=fN(this._heartbeatsCache.heartbeats),l=lh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ms.warn(t),""}}}function SE(){return new Date().toISOString().substring(0,10)}function fN(r,e=uN){const t=[];let i=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),AE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),AE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Iw()?Nw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return TE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return TE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function AE(r){return lh(JSON.stringify({version:2,heartbeats:r})).length}function gN(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r){ns(new wr("platform-logger",e=>new NI(e),"PRIVATE")),ns(new wr("heartbeat",e=>new hN(e),"PRIVATE")),sr(Bg,wE,r),sr(Bg,wE,"esm2020"),sr("fire-js","")}pN("");var yN="firebase",vN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(yN,vN,"app");function Mw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _N=Mw,jw=new Ma("auth","Firebase",Mw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Ep("@firebase/auth");function EN(r,...e){uh.logLevel<=ze.WARN&&uh.warn(`Auth (${ul}): ${r}`,...e)}function Jd(r,...e){uh.logLevel<=ze.ERROR&&uh.error(`Auth (${ul}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(r,...e){throw Tp(r,...e)}function Er(r,...e){return Tp(r,...e)}function xp(r,e,t){const i={..._N(),[e]:t};return new Ma("auth","Firebase",i).create(e,{appName:r.name})}function Ai(r){return xp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bN(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ir(r,"argument-error"),xp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return jw.create(r,...e)}function Ie(r,e,...t){if(!r)throw Tp(e,...t)}function Ns(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Jd(e),new Error(e)}function js(r,e){r||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function wN(){return IE()==="http:"||IE()==="https:"}function IE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||W2()||"connection"in navigator)?navigator.onLine:!0}function TN(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,js(t>e,"Short delay should be less than long delay!"),this.isMobile=Y2()||Z2()}get(){return xN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(r,e){js(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IN=new Zc(3e4,6e4);function ja(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Li(r,e,t,i,a={}){return Lw(r,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const p=Wc({key:r.config.apiKey,...u}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const m={method:e,headers:f,...l};return J2()||(m.referrerPolicy="no-referrer"),r.emulatorConfig&&ll(r.emulatorConfig.host)&&(m.credentials="include"),Vw.fetch()(await Pw(r,r.config.apiHost,t,p),m)})}async function Lw(r,e,t){r._canInitEmulator=!1;const i={...SN,...e};try{const a=new CN(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Bd(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[f,m]=p.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(r,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Bd(r,"email-already-in-use",u);if(f==="USER_DISABLED")throw Bd(r,"user-disabled",u);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xp(r,v,m);ir(r,v)}}catch(a){if(a instanceof ss)throw a;ir(r,"network-request-failed",{message:String(a)})}}async function Ph(r,e,t,i,a={}){const l=await Li(r,e,t,i,a);return"mfaPendingCredential"in l&&ir(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Pw(r,e,t,i){const a=`${e}${t}?${i}`,l=r,u=l.config.emulator?Sp(r.config,a):`${r.config.apiScheme}://${a}`;return AN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function NN(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Er(this.auth,"network-request-failed")),IN.get())})}}function Bd(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Er(r,e,i);return a.customData._tokenResponse=t,a}function NE(r){return r!==void 0&&r.enterprise!==void 0}class RN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kN(r,e){return Li(r,"GET","/v2/recaptchaConfig",ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r,e){return Li(r,"POST","/v1/accounts:delete",e)}async function dh(r,e){return Li(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ON(r,e=!1){const t=yt(r),i=await t.getIdToken(e),a=Ap(i);Ie(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Dc(Ag(a.auth_time)),issuedAtTime:Dc(Ag(a.iat)),expirationTime:Dc(Ag(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ag(r){return Number(r)*1e3}function Ap(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const a=bw(t);return a?JSON.parse(a):(Jd("Failed to decode base64 JWT payload"),null)}catch(a){return Jd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function CE(r){const e=Ap(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ss&&MN(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function MN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(r){var _;const e=r.auth,t=await r.getIdToken(),i=await Uc(r,dh(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?Uw(a.providerUserInfo):[],u=LN(r.providerData,l),p=r.isAnonymous,f=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),m=p?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Gg(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(r,v)}async function VN(r){const e=yt(r);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LN(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Uw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(r,e){const t=await Lw(r,{},async()=>{const i=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await Pw(r,a,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:p,body:i};return r.emulatorConfig&&ll(r.emulatorConfig.host)&&(f.credentials="include"),Vw.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UN(r,e){return Li(r,"POST","/v2/accounts:revokeToken",ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=CE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await PN(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new zo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ie(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ie(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class _r{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new jN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ON(this,e)}reload(){return VN(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await hh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await Uc(this,DN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:T,providerData:D,stsTokenManager:M}=t;Ie(_&&M,e,"internal-error");const k=zo.fromJSON(this.name,M);Ie(typeof _=="string",e,"internal-error"),vi(i,e.name),vi(a,e.name),Ie(typeof b=="boolean",e,"internal-error"),Ie(typeof T=="boolean",e,"internal-error"),vi(l,e.name),vi(u,e.name),vi(p,e.name),vi(f,e.name),vi(m,e.name),vi(v,e.name);const F=new _r({uid:_,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:T,photoURL:u,phoneNumber:l,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:v});return D&&Array.isArray(D)&&(F.providerData=D.map(K=>({...K}))),f&&(F._redirectEventId=f),F}static async _fromIdTokenResponse(e,t,i=!1){const a=new zo;a.updateFromServerResponse(t);const l=new _r({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await hh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ie(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Uw(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),p=new zo;p.updateFromIdToken(i);const f=new _r({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Gg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new Map;function Cs(r){js(r instanceof Function,"Expected a class definition");let e=RE.get(r);return e?(js(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,RE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zw.type="NONE";const kE=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(r,e,t){return`firebase:${r}:${e}:${t}`}class Bo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Wd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Wd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dh(this.auth,{idToken:e}).catch(()=>{});return t?_r._fromGetAccountInfoResponse(this.auth,t,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Bo(Cs(kE),e,i);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Cs(kE);const u=Wd(i,e.config.apiKey,e.name);let p=null;for(const m of t)try{const v=await m._get(u);if(v){let _;if(typeof v=="string"){const b=await dh(e,{idToken:v}).catch(()=>{});if(!b)break;_=await _r._fromGetAccountInfoResponse(e,b,v)}else _=_r._fromJSON(e,v);m!==l&&(p=_),l=m;break}}catch{}const f=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Bo(l,e,i):(l=f[0],p&&await l._set(u,p.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new Bo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($w(e))return"Blackberry";if(Kw(e))return"Webos";if(qw(e))return"Safari";if((e.includes("chrome/")||Fw(e))&&!e.includes("edge/"))return"Chrome";if(Gw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Bw(r=gn()){return/firefox\//i.test(r)}function qw(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fw(r=gn()){return/crios\//i.test(r)}function Hw(r=gn()){return/iemobile/i.test(r)}function Gw(r=gn()){return/android/i.test(r)}function $w(r=gn()){return/blackberry/i.test(r)}function Kw(r=gn()){return/webos/i.test(r)}function Ip(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function zN(r=gn()){var e;return Ip(r)&&!!((e=window.navigator)!=null&&e.standalone)}function BN(){return eI()&&document.documentMode===10}function Qw(r=gn()){return Ip(r)||Gw(r)||Kw(r)||$w(r)||/windows phone/i.test(r)||Hw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(r,e=[]){let t;switch(r){case"Browser":t=DE(gn());break;case"Worker":t=`${DE(gn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ul}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,p)=>{try{const f=e(l);u(f)}catch(f){p(f)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(r,e={}){return Li(r,"GET","/v2/passwordPolicy",ja(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=6;class GN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OE(this),this.idTokenSubscription=new OE(this),this.beforeStateQueue=new qN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dh(this,{idToken:e}),i=await _r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,p=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===p)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Ai(this));const t=e?yt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FN(this),t=new GN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ma("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await UN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cs(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,a);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&EN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Va(r){return yt(r)}class OE{constructor(e){this.auth=e,this.observer=null,this.addObserver=oI(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KN(r){Uh=r}function Xw(r){return Uh.loadJS(r)}function QN(){return Uh.recaptchaEnterpriseScript}function YN(){return Uh.gapiScript}function XN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class JN{constructor(){this.enterprise=new WN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class WN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ZN="recaptcha-enterprise",Jw="NO_RECAPTCHA";class eC{constructor(e){this.type=ZN,this.auth=Va(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,p)=>{kN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const m=new RN(f);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(f=>{p(f)})})}function a(l,u,p){const f=window.grecaptcha;NE(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(Jw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JN().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(p=>{if(!t&&NE(window.grecaptcha))a(p,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=QN();f.length!==0&&(f+=p),Xw(f).then(()=>{a(p,l,u)}).catch(m=>{u(m)})}}).catch(p=>{u(p)})})}}async function ME(r,e,t,i=!1,a=!1){const l=new eC(r);let u;if(a)u=Jw;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const f=p.phoneEnrollmentInfo.phoneNumber,m=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const f=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function jE(r,e,t,i,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ME(r,e,t,t==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await ME(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r,e){const t=cl(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Os(l,e??{}))return a;ir(a,"already-initialized")}return t.initialize({options:e})}function nC(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Cs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rC(r,e,t){const i=Va(r);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Ww(e),{host:u,port:p}=sC(e),f=p===null?"":`:${p}`,m={url:`${l}//${u}${f}/`},v=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Os(m,i.config.emulator)&&Os(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ll(u)?(Sw(`${l}//${u}${f}`),Aw("Auth",!0)):iC()}function Ww(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function sC(r){const e=Ww(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:VE(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:VE(u)}}}function VE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function iC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,t){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}async function aC(r,e){return Li(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(r,e){return Ph(r,"POST","/v1/accounts:signInWithPassword",ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(r,e){return Ph(r,"POST","/v1/accounts:signInWithEmailLink",ja(r,e))}async function cC(r,e){return Ph(r,"POST","/v1/accounts:signInWithEmailLink",ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Np{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new zc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new zc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jE(e,t,"signInWithPassword",oC);case"emailLink":return lC(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jE(e,i,"signUpPassword",aC);case"emailLink":return cC(e,{idToken:t,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r,e){return Ph(r,"POST","/v1/accounts:signInWithIdp",ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="http://localhost";class Aa extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new Aa(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:uC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hC(r){const e=Sc(Ac(r)).link,t=e?Sc(Ac(e)).deep_link_id:null,i=Sc(Ac(r)).deep_link_id;return(i?Sc(Ac(i)).link:null)||i||t||e||r}class Cp{constructor(e){const t=Sc(Ac(e)),i=t.apiKey??null,a=t.oobCode??null,l=dC(t.mode??null);Ie(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=hC(e);try{return new Cp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.providerId=dl.PROVIDER_ID}static credential(e,t){return zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Cp.parseLink(t);return Ie(i,"argument-error"),zc._fromEmailAndCode(e,i.code,i.tenantId)}}dl.PROVIDER_ID="password";dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends eu{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Aa._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Is.credential(t,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends eu{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends eu{constructor(){super("twitter.com")}static credential(e,t){return Aa._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return bi.credential(t,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await _r._fromIdTokenResponse(e,i,a),u=LE(i);return new Ko({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=LE(i);return new Ko({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function LE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends ss{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new fh(e,t,i,a)}}function Zw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(r,l,e,i):l})}async function fC(r,e,t=!1){const i=await Uc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ko._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e,t=!1){const{auth:i}=r;if(nr(i.app))return Promise.reject(Ai(i));const a="reauthenticate";try{const l=await Uc(r,Zw(i,a,e,r),t);Ie(l.idToken,i,"internal-error");const u=Ap(l.idToken);Ie(u,i,"internal-error");const{sub:p}=u;return Ie(r.uid===p,i,"user-mismatch"),Ko._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ir(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(r,e,t=!1){if(nr(r.app))return Promise.reject(Ai(r));const i="signIn",a=await Zw(r,i,e),l=await Ko._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function gC(r,e){return ex(Va(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(r){const e=Va(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function yC(r,e,t){return nr(r.app)?Promise.reject(Ai(r)):gC(yt(r),dl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pC(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(r,e){return yt(r).setPersistence(e)}function vC(r,e,t,i){return yt(r).onIdTokenChanged(e,t,i)}function _C(r,e,t){return yt(r).beforeAuthStateChanged(e,t)}function EC(r,e,t,i){return yt(r).onAuthStateChanged(e,t,i)}function bC(r){return yt(r).signOut()}const mh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=1e3,xC=10;class nx extends tx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);BN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,xC):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nx.type="LOCAL";const TC=nx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends tx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rx.type="SESSION";const gh=rx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new zh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const p=Array.from(u).map(async m=>m(t.origin,l)),f=await SC(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((p,f)=>{const m=kp("",20);a.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(_){const b=_;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(b.data.response);break;default:clearTimeout(v),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function IC(r){Jr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function NC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function RC(){return sx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebaseLocalStorageDb",kC=1,ph="firebaseLocalStorage",ax="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bh(r,e){return r.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function DC(){const r=indexedDB.deleteDatabase(ix);return new tu(r).toPromise()}function $g(){const r=indexedDB.open(ix,kC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(ph,{keyPath:ax})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(ph)?e(i):(i.close(),await DC(),e(await $g()))})})}async function UE(r,e,t){const i=Bh(r,!0).put({[ax]:e,value:t});return new tu(i).toPromise()}async function OC(r,e){const t=Bh(r,!1).get(e),i=await new tu(t).toPromise();return i===void 0?null:i.value}function zE(r,e){const t=Bh(r,!0).delete(e);return new tu(t).toPromise()}const MC=800,jC=3;class ox{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>jC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(RC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await NC(),!this.activeServiceWorker)return;this.sender=new AC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await UE(e,mh,"1"),await zE(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>UE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>OC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Bh(a,!1).getAll();return new tu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ox.type="LOCAL";const VC=ox;new Zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(r,e){return e?Cs(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LC(r){return ex(r.auth,new Dp(r),r.bypassAuthState)}function PC(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),mC(t,new Dp(r),r.bypassAuthState)}async function UC(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),fC(t,new Dp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LC;case"linkViaPopup":case"linkViaRedirect":return UC;case"reauthViaPopup":case"reauthViaRedirect":return PC;default:ir(this.auth,"internal-error")}}resolve(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Zc(2e3,1e4);async function BC(r,e,t){if(nr(r.app))return Promise.reject(Er(r,"operation-not-supported-in-this-environment"));const i=Va(r);bN(r,e,Rp);const a=lx(i,t);return new va(i,"signInViaPopup",e,a).executeNotNull()}class va extends cx{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){js(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zC.get())};e()}}va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="pendingRedirect",Zd=new Map;class FC extends cx{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const i=await HC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HC(r,e){const t=KC(e),i=$C(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function GC(r,e){Zd.set(r._key(),e)}function $C(r){return Cs(r._redirectPersistence)}function KC(r){return Wd(qC,r.config.apiKey,r.name)}async function QC(r,e,t=!1){if(nr(r.app))return Promise.reject(Ai(r));const i=Va(r),a=lx(i,e),u=await new FC(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=600*1e3;class XC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!ux(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YC&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(e))}saveEventToCache(e){this.cachedEventUids.add(BE(e)),this.lastProcessedEventTime=Date.now()}}function BE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ux({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ux(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(r,e={}){return Li(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eR=/^https?/;async function tR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await WC(r);for(const t of e)try{if(nR(t))return}catch{}ir(r,"unauthorized-domain")}function nR(r){const e=Hg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!eR.test(t))return!1;if(ZC.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new Zc(3e4,6e4);function qE(){const r=Jr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function sR(r){return new Promise((e,t)=>{var a,l,u;function i(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),t(Er(r,"network-request-failed"))},timeout:rR.get()})}if((l=(a=Jr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Jr().gapi)!=null&&u.load)i();else{const p=XN("iframefcb");return Jr()[p]=()=>{gapi.load?i():t(Er(r,"network-request-failed"))},Xw(`${YN()}?onload=${p}`).catch(f=>t(f))}}).catch(e=>{throw eh=null,e})}let eh=null;function iR(r){return eh=eh||sR(r),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Zc(5e3,15e3),oR="__/auth/iframe",lR="emulator/auth/iframe",cR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dR(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Sp(e,lR):`https://${r.config.authDomain}/${oR}`,i={apiKey:e.apiKey,appName:r.name,v:ul},a=uR.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Wc(i).slice(1)}`}async function hR(r){const e=await iR(r),t=Jr().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:dR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cR,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Er(r,"network-request-failed"),p=Jr().setTimeout(()=>{l(u)},aR.get());function f(){Jr().clearTimeout(p),a(i)}i.ping(f).then(f,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mR=500,gR=600,pR="_blank",yR="http://localhost";class FE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vR(r,e,t,i=mR,a=gR){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const f={...fR,width:i.toString(),height:a.toString(),top:l,left:u},m=gn().toLowerCase();t&&(p=Fw(m)?pR:t),Bw(m)&&(e=e||yR,f.scrollbars="yes");const v=Object.entries(f).reduce((b,[T,D])=>`${b}${T}=${D},`,"");if(zN(m)&&p!=="_self")return _R(e||"",p),new FE(null);const _=window.open(e||"",p,v);Ie(_,r,"popup-blocked");try{_.focus()}catch{}return new FE(_)}function _R(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="__/auth/handler",bR="emulator/auth/handler",wR=encodeURIComponent("fac");async function HE(r,e,t,i,a,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ul,eventId:a};if(e instanceof Rp){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",aI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof eu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const v of Object.keys(p))p[v]===void 0&&delete p[v];const f=await r._getAppCheckToken(),m=f?`#${wR}=${encodeURIComponent(f)}`:"";return`${xR(r)}?${Wc(p).slice(1)}${m}`}function xR({config:r}){return r.emulator?Sp(r,bR):`https://${r.authDomain}/${ER}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="webStorageSupport";class TR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gh,this._completeRedirectFn=QC,this._overrideRedirectResult=GC}async _openPopup(e,t,i,a){var u;js((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await HE(e,t,i,Hg(),a);return vR(e,l,kp())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await HE(e,t,i,Hg(),a);return IC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(js(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await hR(e),i=new XC(e);return t.register("authEvent",a=>(Ie(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ig,{type:Ig},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[Ig];l!==void 0&&t(!!l),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qw()||qw()||Ip()}}const SR=TR;var GE="@firebase/auth",$E="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NR(r){ns(new wr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yw(r)},m=new $N(i,a,l,f);return nC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ns(new wr("auth-internal",e=>{const t=Va(e.getProvider("auth").getImmediate());return(i=>new AR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(GE,$E,IR(r)),sr(GE,$E,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=300,RR=Tw("authIdTokenMaxAge")||CR;let KE=null;const kR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>RR)return;const a=t==null?void 0:t.token;KE!==a&&(KE=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function DR(r=wp()){const e=cl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=tC(r,{popupRedirectResolver:SR,persistence:[VC,TC,gh]}),i=Tw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=kR(l.toString());_C(t,u,()=>u(t.currentUser)),vC(t,p=>u(p))}}const a=ww("auth");return a&&rC(t,`http://${a}`),t}function OR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}KN({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Er("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",OR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NR("Browser");var QE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ii,dx;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function C(){}C.prototype=I.prototype,R.F=I.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(U,L,j){for(var N=Array(arguments.length-2),be=2;be<arguments.length;be++)N[be-2]=arguments[be];return I.prototype[L].apply(U,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,I,C){C||(C=0);const U=Array(16);if(typeof I=="string")for(var L=0;L<16;++L)U[L]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(L=0;L<16;++L)U[L]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=R.g[0],C=R.g[1],L=R.g[2];let j=R.g[3],N;N=I+(j^C&(L^j))+U[0]+3614090360&4294967295,I=C+(N<<7&4294967295|N>>>25),N=j+(L^I&(C^L))+U[1]+3905402710&4294967295,j=I+(N<<12&4294967295|N>>>20),N=L+(C^j&(I^C))+U[2]+606105819&4294967295,L=j+(N<<17&4294967295|N>>>15),N=C+(I^L&(j^I))+U[3]+3250441966&4294967295,C=L+(N<<22&4294967295|N>>>10),N=I+(j^C&(L^j))+U[4]+4118548399&4294967295,I=C+(N<<7&4294967295|N>>>25),N=j+(L^I&(C^L))+U[5]+1200080426&4294967295,j=I+(N<<12&4294967295|N>>>20),N=L+(C^j&(I^C))+U[6]+2821735955&4294967295,L=j+(N<<17&4294967295|N>>>15),N=C+(I^L&(j^I))+U[7]+4249261313&4294967295,C=L+(N<<22&4294967295|N>>>10),N=I+(j^C&(L^j))+U[8]+1770035416&4294967295,I=C+(N<<7&4294967295|N>>>25),N=j+(L^I&(C^L))+U[9]+2336552879&4294967295,j=I+(N<<12&4294967295|N>>>20),N=L+(C^j&(I^C))+U[10]+4294925233&4294967295,L=j+(N<<17&4294967295|N>>>15),N=C+(I^L&(j^I))+U[11]+2304563134&4294967295,C=L+(N<<22&4294967295|N>>>10),N=I+(j^C&(L^j))+U[12]+1804603682&4294967295,I=C+(N<<7&4294967295|N>>>25),N=j+(L^I&(C^L))+U[13]+4254626195&4294967295,j=I+(N<<12&4294967295|N>>>20),N=L+(C^j&(I^C))+U[14]+2792965006&4294967295,L=j+(N<<17&4294967295|N>>>15),N=C+(I^L&(j^I))+U[15]+1236535329&4294967295,C=L+(N<<22&4294967295|N>>>10),N=I+(L^j&(C^L))+U[1]+4129170786&4294967295,I=C+(N<<5&4294967295|N>>>27),N=j+(C^L&(I^C))+U[6]+3225465664&4294967295,j=I+(N<<9&4294967295|N>>>23),N=L+(I^C&(j^I))+U[11]+643717713&4294967295,L=j+(N<<14&4294967295|N>>>18),N=C+(j^I&(L^j))+U[0]+3921069994&4294967295,C=L+(N<<20&4294967295|N>>>12),N=I+(L^j&(C^L))+U[5]+3593408605&4294967295,I=C+(N<<5&4294967295|N>>>27),N=j+(C^L&(I^C))+U[10]+38016083&4294967295,j=I+(N<<9&4294967295|N>>>23),N=L+(I^C&(j^I))+U[15]+3634488961&4294967295,L=j+(N<<14&4294967295|N>>>18),N=C+(j^I&(L^j))+U[4]+3889429448&4294967295,C=L+(N<<20&4294967295|N>>>12),N=I+(L^j&(C^L))+U[9]+568446438&4294967295,I=C+(N<<5&4294967295|N>>>27),N=j+(C^L&(I^C))+U[14]+3275163606&4294967295,j=I+(N<<9&4294967295|N>>>23),N=L+(I^C&(j^I))+U[3]+4107603335&4294967295,L=j+(N<<14&4294967295|N>>>18),N=C+(j^I&(L^j))+U[8]+1163531501&4294967295,C=L+(N<<20&4294967295|N>>>12),N=I+(L^j&(C^L))+U[13]+2850285829&4294967295,I=C+(N<<5&4294967295|N>>>27),N=j+(C^L&(I^C))+U[2]+4243563512&4294967295,j=I+(N<<9&4294967295|N>>>23),N=L+(I^C&(j^I))+U[7]+1735328473&4294967295,L=j+(N<<14&4294967295|N>>>18),N=C+(j^I&(L^j))+U[12]+2368359562&4294967295,C=L+(N<<20&4294967295|N>>>12),N=I+(C^L^j)+U[5]+4294588738&4294967295,I=C+(N<<4&4294967295|N>>>28),N=j+(I^C^L)+U[8]+2272392833&4294967295,j=I+(N<<11&4294967295|N>>>21),N=L+(j^I^C)+U[11]+1839030562&4294967295,L=j+(N<<16&4294967295|N>>>16),N=C+(L^j^I)+U[14]+4259657740&4294967295,C=L+(N<<23&4294967295|N>>>9),N=I+(C^L^j)+U[1]+2763975236&4294967295,I=C+(N<<4&4294967295|N>>>28),N=j+(I^C^L)+U[4]+1272893353&4294967295,j=I+(N<<11&4294967295|N>>>21),N=L+(j^I^C)+U[7]+4139469664&4294967295,L=j+(N<<16&4294967295|N>>>16),N=C+(L^j^I)+U[10]+3200236656&4294967295,C=L+(N<<23&4294967295|N>>>9),N=I+(C^L^j)+U[13]+681279174&4294967295,I=C+(N<<4&4294967295|N>>>28),N=j+(I^C^L)+U[0]+3936430074&4294967295,j=I+(N<<11&4294967295|N>>>21),N=L+(j^I^C)+U[3]+3572445317&4294967295,L=j+(N<<16&4294967295|N>>>16),N=C+(L^j^I)+U[6]+76029189&4294967295,C=L+(N<<23&4294967295|N>>>9),N=I+(C^L^j)+U[9]+3654602809&4294967295,I=C+(N<<4&4294967295|N>>>28),N=j+(I^C^L)+U[12]+3873151461&4294967295,j=I+(N<<11&4294967295|N>>>21),N=L+(j^I^C)+U[15]+530742520&4294967295,L=j+(N<<16&4294967295|N>>>16),N=C+(L^j^I)+U[2]+3299628645&4294967295,C=L+(N<<23&4294967295|N>>>9),N=I+(L^(C|~j))+U[0]+4096336452&4294967295,I=C+(N<<6&4294967295|N>>>26),N=j+(C^(I|~L))+U[7]+1126891415&4294967295,j=I+(N<<10&4294967295|N>>>22),N=L+(I^(j|~C))+U[14]+2878612391&4294967295,L=j+(N<<15&4294967295|N>>>17),N=C+(j^(L|~I))+U[5]+4237533241&4294967295,C=L+(N<<21&4294967295|N>>>11),N=I+(L^(C|~j))+U[12]+1700485571&4294967295,I=C+(N<<6&4294967295|N>>>26),N=j+(C^(I|~L))+U[3]+2399980690&4294967295,j=I+(N<<10&4294967295|N>>>22),N=L+(I^(j|~C))+U[10]+4293915773&4294967295,L=j+(N<<15&4294967295|N>>>17),N=C+(j^(L|~I))+U[1]+2240044497&4294967295,C=L+(N<<21&4294967295|N>>>11),N=I+(L^(C|~j))+U[8]+1873313359&4294967295,I=C+(N<<6&4294967295|N>>>26),N=j+(C^(I|~L))+U[15]+4264355552&4294967295,j=I+(N<<10&4294967295|N>>>22),N=L+(I^(j|~C))+U[6]+2734768916&4294967295,L=j+(N<<15&4294967295|N>>>17),N=C+(j^(L|~I))+U[13]+1309151649&4294967295,C=L+(N<<21&4294967295|N>>>11),N=I+(L^(C|~j))+U[4]+4149444226&4294967295,I=C+(N<<6&4294967295|N>>>26),N=j+(C^(I|~L))+U[11]+3174756917&4294967295,j=I+(N<<10&4294967295|N>>>22),N=L+(I^(j|~C))+U[2]+718787259&4294967295,L=j+(N<<15&4294967295|N>>>17),N=C+(j^(L|~I))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(L+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+j&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const C=I-this.blockSize,U=this.C;let L=this.h,j=0;for(;j<I;){if(L==0)for(;j<=C;)a(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<I;)if(U[L++]=R.charCodeAt(j++),L==this.blockSize){a(this,U),L=0;break}}else for(;j<I;)if(U[L++]=R[j++],L==this.blockSize){a(this,U),L=0;break}}this.h=L,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,C=0;C<4;++C)for(let U=0;U<32;U+=8)R[I++]=this.g[C]>>>U&255;return R};function l(R,I){var C=p;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=I(R)}function u(R,I){this.h=I;const C=[];let U=!0;for(let L=R.length-1;L>=0;L--){const j=R[L]|0;U&&j==I||(C[L]=j,U=!1)}this.g=C}var p={};function f(R){return-128<=R&&R<128?l(R,function(I){return new u([I|0],I<0?-1:0)}):new u([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return _;if(R<0)return k(m(-R));const I=[];let C=1;for(let U=0;R>=C;U++)I[U]=R/C|0,C*=4294967296;return new u(I,0)}function v(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return k(v(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=m(Math.pow(I,8));let U=_;for(let j=0;j<R.length;j+=8){var L=Math.min(8,R.length-j);const N=parseInt(R.substring(j,j+L),I);L<8?(L=m(Math.pow(I,L)),U=U.j(L).add(m(N))):(U=U.j(C),U=U.add(m(N)))}return U}var _=f(0),b=f(1),T=f(16777216);r=u.prototype,r.m=function(){if(M(this))return-k(this).m();let R=0,I=1;for(let C=0;C<this.g.length;C++){const U=this.i(C);R+=(U>=0?U:4294967296+U)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D(this))return"0";if(M(this))return"-"+k(this).toString(R);const I=m(Math.pow(R,6));var C=this;let U="";for(;;){const L=oe(C,I).g;C=F(C,L.j(I));let j=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=L,D(C))return j+U;for(;j.length<6;)j="0"+j;U=j+U}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function D(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function M(R){return R.h==-1}r.l=function(R){return R=F(this,R),M(R)?-1:D(R)?0:1};function k(R){const I=R.g.length,C=[];for(let U=0;U<I;U++)C[U]=~R.g[U];return new u(C,~R.h).add(b)}r.abs=function(){return M(this)?k(this):this},r.add=function(R){const I=Math.max(this.g.length,R.g.length),C=[];let U=0;for(let L=0;L<=I;L++){let j=U+(this.i(L)&65535)+(R.i(L)&65535),N=(j>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);U=N>>>16,j&=65535,N&=65535,C[L]=N<<16|j}return new u(C,C[C.length-1]&-2147483648?-1:0)};function F(R,I){return R.add(k(I))}r.j=function(R){if(D(this)||D(R))return _;if(M(this))return M(R)?k(this).j(k(R)):k(k(this).j(R));if(M(R))return k(this.j(k(R)));if(this.l(T)<0&&R.l(T)<0)return m(this.m()*R.m());const I=this.g.length+R.g.length,C=[];for(var U=0;U<2*I;U++)C[U]=0;for(U=0;U<this.g.length;U++)for(let L=0;L<R.g.length;L++){const j=this.i(U)>>>16,N=this.i(U)&65535,be=R.i(L)>>>16,Ne=R.i(L)&65535;C[2*U+2*L]+=N*Ne,K(C,2*U+2*L),C[2*U+2*L+1]+=j*Ne,K(C,2*U+2*L+1),C[2*U+2*L+1]+=N*be,K(C,2*U+2*L+1),C[2*U+2*L+2]+=j*be,K(C,2*U+2*L+2)}for(R=0;R<I;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=I;R<2*I;R++)C[R]=0;return new u(C,0)};function K(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function q(R,I){this.g=R,this.h=I}function oe(R,I){if(D(I))throw Error("division by zero");if(D(R))return new q(_,_);if(M(R))return I=oe(k(R),I),new q(k(I.g),k(I.h));if(M(I))return I=oe(R,k(I)),new q(k(I.g),I.h);if(R.g.length>30){if(M(R)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var C=b,U=I;U.l(R)<=0;)C=ae(C),U=ae(U);var L=fe(C,1),j=fe(U,1);for(U=fe(U,2),C=fe(C,2);!D(U);){var N=j.add(U);N.l(R)<=0&&(L=L.add(C),j=N),U=fe(U,1),C=fe(C,1)}return I=F(R,L.j(I)),new q(L,I)}for(L=_;R.l(I)>=0;){for(C=Math.max(1,Math.floor(R.m()/I.m())),U=Math.ceil(Math.log(C)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),j=m(C),N=j.j(I);M(N)||N.l(R)>0;)C-=U,j=m(C),N=j.j(I);D(j)&&(j=b),L=L.add(j),R=F(R,N)}return new q(L,R)}r.B=function(R){return oe(this,R).h},r.and=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let U=0;U<I;U++)C[U]=this.i(U)&R.i(U);return new u(C,this.h&R.h)},r.or=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let U=0;U<I;U++)C[U]=this.i(U)|R.i(U);return new u(C,this.h|R.h)},r.xor=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let U=0;U<I;U++)C[U]=this.i(U)^R.i(U);return new u(C,this.h^R.h)};function ae(R){const I=R.g.length+1,C=[];for(let U=0;U<I;U++)C[U]=R.i(U)<<1|R.i(U-1)>>>31;return new u(C,R.h)}function fe(R,I){const C=I>>5;I%=32;const U=R.g.length-C,L=[];for(let j=0;j<U;j++)L[j]=I>0?R.i(j+C)>>>I|R.i(j+C+1)<<32-I:R.i(j+C);return new u(L,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,dx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ii=u}).apply(typeof QE<"u"?QE:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hx,Ic,fx,th,Kg,mx,gx,px;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var E=0;E<d.length;++E){var x=d[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function a(d,E){if(E)e:{var x=i;d=d.split(".");for(var A=0;A<d.length-1;A++){var H=d[A];if(!(H in x))break e;x=x[H]}d=d[d.length-1],A=x[d],E=E(A),E!=A&&E!=null&&e(x,d,{configurable:!0,writable:!0,value:E})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(E){var x=[],A;for(A in E)Object.prototype.hasOwnProperty.call(E,A)&&x.push([A,E[A]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function p(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function f(d,E,x){return d.call.apply(d.bind,arguments)}function m(d,E,x){return m=f,m.apply(null,arguments)}function v(d,E){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function _(d,E){function x(){}x.prototype=E.prototype,d.Z=E.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(A,H,Y){for(var he=Array(arguments.length-2),De=2;De<arguments.length;De++)he[De-2]=arguments[De];return E.prototype[H].apply(A,he)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){const E=d.length;if(E>0){const x=Array(E);for(let A=0;A<E;A++)x[A]=d[A];return x}return[]}function D(d,E){for(let A=1;A<arguments.length;A++){const H=arguments[A];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=d.length||0;const Y=H.length||0;d.length=x+Y;for(let he=0;he<Y;he++)d[x+he]=H[he]}else d.push(H)}}class M{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(d){u.setTimeout(()=>{throw d},0)}function F(){var d=R;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class K{constructor(){this.h=this.g=null}add(E,x){const A=q.get();A.set(E,x),this.h?this.h.next=A:this.g=A,this.h=A}}var q=new M(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,fe=!1,R=new K,I=()=>{const d=Promise.resolve(void 0);ae=()=>{d.then(C)}};function C(){for(var d;d=F();){try{d.h.call(d.g)}catch(x){k(x)}var E=q;E.j(d),E.h<100&&(E.h++,d.next=E.g,E.g=d)}fe=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,E),u.removeEventListener("test",x,E)}catch{}return d})();function N(d){return/^[\s\xa0]*$/.test(d)}function be(d,E){L.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,E)}_(be,L),be.prototype.init=function(d,E){const x=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget,E||(x=="mouseover"?E=d.fromElement:x=="mouseout"&&(E=d.toElement)),this.relatedTarget=E,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),W=0;function ue(d,E,x,A,H){this.listener=d,this.proxy=null,this.src=E,this.type=x,this.capture=!!A,this.ha=H,this.key=++W,this.da=this.fa=!1}function le(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function _e(d,E,x){for(const A in d)E.call(x,d[A],A,d)}function Re(d,E){for(const x in d)E.call(void 0,d[x],x,d)}function O(d){const E={};for(const x in d)E[x]=d[x];return E}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(d,E){let x,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(x in A)d[x]=A[x];for(let Y=0;Y<J.length;Y++)x=J[Y],Object.prototype.hasOwnProperty.call(A,x)&&(d[x]=A[x])}}function me(d){this.src=d,this.g={},this.h=0}me.prototype.add=function(d,E,x,A,H){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const he=Te(d,E,A,H);return he>-1?(E=d[he],x||(E.fa=!1)):(E=new ue(E,this.src,Y,!!A,H),E.fa=x,d.push(E)),E};function ye(d,E){const x=E.type;if(x in d.g){var A=d.g[x],H=Array.prototype.indexOf.call(A,E,void 0),Y;(Y=H>=0)&&Array.prototype.splice.call(A,H,1),Y&&(le(E),d.g[x].length==0&&(delete d.g[x],d.h--))}}function Te(d,E,x,A){for(let H=0;H<d.length;++H){const Y=d[H];if(!Y.da&&Y.listener==E&&Y.capture==!!x&&Y.ha==A)return H}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),ct={};function vt(d,E,x,A,H){if(Array.isArray(E)){for(let Y=0;Y<E.length;Y++)vt(d,E[Y],x,A,H);return null}return x=El(x),d&&d[Ne]?d.J(E,x,p(A)?!!A.capture:!1,H):zi(d,E,x,!1,A,H)}function zi(d,E,x,A,H,Y){if(!E)throw Error("Invalid event type");const he=p(H)?!!H.capture:!!H;let De=Bi(d);if(De||(d[Le]=De=new me(d)),x=De.add(E,x,A,he,Y),x.proxy)return x;if(A=Fa(),x.proxy=A,A.src=d,A.listener=x,d.addEventListener)j||(H=he),H===void 0&&(H=!1),d.addEventListener(E.toString(),A,H);else if(d.attachEvent)d.attachEvent(Ir(E.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Fa(){function d(x){return E.call(d.src,d.listener,x)}const E=vl;return d}function Ha(d,E,x,A,H){if(Array.isArray(E))for(var Y=0;Y<E.length;Y++)Ha(d,E[Y],x,A,H);else A=p(A)?!!A.capture:!!A,x=El(x),d&&d[Ne]?(d=d.i,Y=String(E).toString(),Y in d.g&&(E=d.g[Y],x=Te(E,x,A,H),x>-1&&(le(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete d.g[Y],d.h--)))):d&&(d=Bi(d))&&(E=d.g[E.toString()],d=-1,E&&(d=Te(E,x,A,H)),(x=d>-1?E[d]:null)&&Ga(x))}function Ga(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[Ne])ye(E.i,d);else{var x=d.type,A=d.proxy;E.removeEventListener?E.removeEventListener(x,A,d.capture):E.detachEvent?E.detachEvent(Ir(x),A):E.addListener&&E.removeListener&&E.removeListener(A),(x=Bi(E))?(ye(x,d),x.h==0&&(x.src=null,E[Le]=null)):le(d)}}}function Ir(d){return d in ct?ct[d]:ct[d]="on"+d}function vl(d,E){if(d.da)d=!0;else{E=new be(E,this);const x=d.listener,A=d.ha||d.src;d.fa&&Ga(d),d=x.call(A,E)}return d}function Bi(d){return d=d[Le],d instanceof me?d:null}var _l="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(d){return typeof d=="function"?d:(d[_l]||(d[_l]=function(E){return d.handleEvent(E)}),d[_l])}function Dt(){U.call(this),this.i=new me(this),this.M=this,this.G=null}_(Dt,U),Dt.prototype[Ne]=!0,Dt.prototype.removeEventListener=function(d,E,x,A){Ha(this,d,E,x,A)};function Gt(d,E){var x,A=d.G;if(A)for(x=[];A;A=A.G)x.push(A);if(d=d.M,A=E.type||E,typeof E=="string")E=new L(E,d);else if(E instanceof L)E.target=E.target||d;else{var H=E;E=new L(A,d),ce(E,H)}H=!0;let Y,he;if(x)for(he=x.length-1;he>=0;he--)Y=E.g=x[he],H=Us(Y,A,!0,E)&&H;if(Y=E.g=d,H=Us(Y,A,!0,E)&&H,H=Us(Y,A,!1,E)&&H,x)for(he=0;he<x.length;he++)Y=E.g=x[he],H=Us(Y,A,!1,E)&&H}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var d=this.i;for(const E in d.g){const x=d.g[E];for(let A=0;A<x.length;A++)le(x[A]);delete d.g[E],d.h--}}this.G=null},Dt.prototype.J=function(d,E,x,A){return this.i.add(String(d),E,!1,x,A)},Dt.prototype.K=function(d,E,x,A){return this.i.add(String(d),E,!0,x,A)};function Us(d,E,x,A){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let Y=0;Y<E.length;++Y){const he=E[Y];if(he&&!he.da&&he.capture==x){const De=he.listener,Nt=he.ha||he.src;he.fa&&ye(d.i,he),H=De.call(Nt,A)!==!1&&H}}return H&&!A.defaultPrevented}function ff(d,E){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(d,E||0)}function du(d){d.g=ff(()=>{d.g=null,d.i&&(d.i=!1,du(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class pn extends U{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:du(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(d){U.call(this),this.h=d,this.g={}}_(qi,U);var bl=[];function wl(d){_e(d.g,function(E,x){this.g.hasOwnProperty(x)&&Ga(E)},d),d.g={}}qi.prototype.N=function(){qi.Z.N.call(this),wl(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=u.JSON.stringify,mf=u.JSON.parse,hu=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function fu(){}function mu(){}var or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){L.call(this,"d")}_(tn,L);function Fn(){L.call(this,"c")}_(Fn,L);var It={},gu=null;function $a(){return gu=gu||new Dt}It.Ia="serverreachability";function pu(d){L.call(this,It.Ia,d)}_(pu,L);function Nr(d){const E=$a();Gt(E,new pu(E))}It.STAT_EVENT="statevent";function Fi(d,E){L.call(this,It.STAT_EVENT,d),this.stat=E}_(Fi,L);function Ot(d){const E=$a();Gt(E,new Fi(E,d))}It.Ja="timingevent";function Cr(d,E){L.call(this,It.Ja,d),this.size=E}_(Cr,L);function Rr(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},E)}function lr(){this.g=!0}lr.prototype.ua=function(){this.g=!1};function gf(d,E,x,A,H,Y){d.info(function(){if(d.g)if(Y){var he="",De=Y.split("&");for(let Je=0;Je<De.length;Je++){var Nt=De[Je].split("=");if(Nt.length>1){const _t=Nt[0];Nt=Nt[1];const Kn=_t.split("_");he=Kn.length>=2&&Kn[1]=="type"?he+(_t+"="+Nt+"&"):he+(_t+"=redacted&")}}}else he=null;else he=Y;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+E+`
`+x+`
`+he})}function yu(d,E,x,A,H,Y,he){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+E+`
`+x+`
`+Y+" "+he})}function kr(d,E,x,A){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+pf(d,x)+(A?" "+A:"")})}function Hi(d,E){d.info(function(){return"TIMEOUT: "+E})}lr.prototype.info=function(){};function pf(d,E){if(!d.g)return E;if(!E)return null;try{const Y=JSON.parse(E);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var x=Y[d];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let he=1;he<A.length;he++)A[he]=""}}}}return zs(Y)}catch{return E}}var Gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tl;function $i(){}_($i,fu),$i.prototype.g=function(){return new XMLHttpRequest},Tl=new $i;function as(d){return encodeURIComponent(String(d))}function vu(d){var E=1;d=d.split(":");const x=[];for(;E>0&&d.length;)x.push(d.shift()),E--;return d.length&&x.push(d.join(":")),x}function cr(d,E,x,A){this.j=d,this.i=E,this.l=x,this.S=A||1,this.V=new qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var Mt={},Yt={};function Dr(d,E,x){d.M=1,d.A=Ki(Vt(E)),d.u=x,d.R=!0,Ka(d,null)}function Ka(d,E){d.F=Date.now(),Or(d),d.B=Vt(d.A);var x=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),Ja(x.i,"t",A),d.C=0,x=d.j.L,d.h=new ur,d.g=Ou(d.j,x?E:null,!d.u),d.P>0&&(d.O=new pn(m(d.Y,d,d.g),d.P)),E=d.V,x=d.g,A=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(bl[0]=H.toString()),H=bl);for(let Y=0;Y<H.length;Y++){const he=vt(x,H[Y],A||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=d.J?O(d.J):{},d.u?(d.v||(d.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,E)):(d.v="GET",d.g.ea(d.B,d.v,null,E)),Nr(),gf(d.i,d.v,d.B,d.l,d.S,d.u)}cr.prototype.ba=function(d){d=d.target;const E=this.O;E&&fr(d)==3?E.j():this.Y(d)},cr.prototype.Y=function(d){try{if(d==this.g)e:{const De=fr(this.g),Nt=this.g.ya(),Je=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||De!=4||Nt==7||(Nt==8||Je<=0?Nr(3):Nr(2)),Mr(this);var E=this.g.ca();this.X=E;var x=yf(this);if(this.o=E==200,yu(this.i,this.v,this.B,this.l,this.S,De,E),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var Y=A;break t}}Y=null}if(d=Y)kr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,d);else{this.o=!1,this.m=3,Ot(12),Rn(this),Hn(this);break e}}if(this.R){d=!0;let _t;for(;!this.K&&this.C<x.length;)if(_t=Eu(this,x),_t==Yt){De==4&&(this.m=4,Ot(14),d=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Mt){this.m=4,Ot(15),kr(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else kr(this.i,this.l,_t,null),jr(this,_t);if(_u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||x.length!=0||this.h.h||(this.m=1,Ot(16),d=!1),this.o=this.o&&d,!d)kr(this.i,this.l,x,"[Invalid Chunked Response]"),Rn(this),Hn(this);else if(x.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ul(he),he.P=!0,Ot(11))}}else kr(this.i,this.l,x,null),jr(this,x);De==4&&Rn(this),this.o&&!this.K&&(De==4?Cu(this.j,this):(this.o=!1,Or(this)))}else ls(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Rn(this),Hn(this)}}}catch{}finally{}};function yf(d){if(!_u(d))return d.g.la();const E=nn(d.g);if(E==="")return"";let x="";const A=E.length,H=fr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Rn(d),Hn(d),"";d.h.i=new u.TextDecoder}for(let Y=0;Y<A;Y++)d.h.h=!0,x+=d.h.i.decode(E[Y],{stream:!(H&&Y==A-1)});return E.length=0,d.h.g+=x,d.C=0,d.h.g}function _u(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Eu(d,E){var x=d.C,A=E.indexOf(`
`,x);return A==-1?Yt:(x=Number(E.substring(x,A)),isNaN(x)?Mt:(A+=1,A+x>E.length?Yt:(E=E.slice(A,A+x),d.C=A+x,E)))}cr.prototype.cancel=function(){this.K=!0,Rn(this)};function Or(d){d.T=Date.now()+d.H,Qa(d,d.H)}function Qa(d,E){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Rr(m(d.aa,d),E)}function Mr(d){d.D&&(u.clearTimeout(d.D),d.D=null)}cr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Hi(this.i,this.B),this.M!=2&&(Nr(),Ot(17)),Rn(this),this.m=2,Hn(this)):Qa(this,this.T-d)};function Hn(d){d.j.I==0||d.K||Cu(d.j,d)}function Rn(d){Mr(d);var E=d.O;E&&typeof E.dispose=="function"&&E.dispose(),d.O=null,wl(d.V),d.g&&(E=d.g,d.g=null,E.abort(),E.dispose())}function jr(d,E){try{var x=d.j;if(x.I!=0&&(x.g==d||Lr(x.h,d))){if(!d.L&&Lr(x.h,d)&&x.I==3){try{var A=x.Ba.g.parse(E)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)no(x),Qs(x);else break e;ea(x),Ot(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Rr(m(x.Va,x),6e3));Vr(x.h)<=1&&x.ta&&(x.ta=void 0)}else Fr(x,11)}else if((d.L||x.g==d)&&no(x),!N(E))for(H=x.Ba.g.parse(E),E=0;E<H.length;E++){let Je=H[E];const _t=Je[0];if(!(_t<=x.K))if(x.K=_t,Je=Je[1],x.I==2)if(Je[0]=="c"){x.M=Je[1],x.ba=Je[2];const Kn=Je[3];Kn!=null&&(x.ka=Kn,x.j.info("VER="+x.ka));const Hr=Je[4];Hr!=null&&(x.za=Hr,x.j.info("SVER="+x.za));const mr=Je[5];mr!=null&&typeof mr=="number"&&mr>0&&(A=1.5*mr,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const gr=d.g;if(gr){const ta=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var Y=A.h;Y.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Il(Y,Y.h),Y.h=null))}if(A.G){const ro=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;ro&&(A.wa=ro,et(A.J,A.G,ro))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var he=d;if(A.na=Du(A,A.L?A.ba:null,A.W),he.L){Nl(A.h,he);var De=he,Nt=A.O;Nt&&(De.H=Nt),De.D&&(Mr(De),Or(De)),A.g=he}else Iu(A);x.i.length>0&&qr(x)}else Je[0]!="stop"&&Je[0]!="close"||Fr(x,7);else x.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Fr(x,7):Ll(x):Je[0]!="noop"&&x.l&&x.l.qa(Je),x.A=0)}}Nr(4)}catch{}}var jt=class{constructor(d,E){this.g=d,this.map=E}};function Sl(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Al(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Vr(d){return d.h?1:d.g?d.g.size:0}function Lr(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function Il(d,E){d.g?d.g.add(E):d.h=E}function Nl(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}Sl.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Cl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const x of d.g.values())E=E.concat(x.G);return E}return T(d.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(d,E){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const A=d[x].indexOf("=");let H,Y=null;A>=0?(H=d[x].substring(0,A),Y=d[x].substring(A+1)):H=d[x],E(H,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function kn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;d instanceof kn?(this.l=d.l,Xt(this,d.j),this.o=d.o,this.g=d.g,Bs(this,d.u),this.h=d.h,Rl(this,Su(d.i)),this.m=d.m):d&&(E=String(d).match(bu))?(this.l=!1,Xt(this,E[1]||"",!0),this.o=Pr(E[2]||""),this.g=Pr(E[3]||"",!0),Bs(this,E[4]),this.h=Pr(E[5]||"",!0),Rl(this,E[6]||"",!0),this.m=Pr(E[7]||"")):(this.l=!1,this.i=new Fs(null,this.l))}kn.prototype.toString=function(){const d=[];var E=this.j;E&&d.push(Qi(E,Xa,!0),":");var x=this.g;return(x||E=="file")&&(d.push("//"),(E=this.o)&&d.push(Qi(E,Xa,!0),"@"),d.push(as(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Qi(x,x.charAt(0)=="/"?kl:wu,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Qi(x,xu)),d.join("")},kn.prototype.resolve=function(d){const E=Vt(this);let x=!!d.j;x?Xt(E,d.j):x=!!d.o,x?E.o=d.o:x=!!d.g,x?E.g=d.g:x=d.u!=null;var A=d.h;if(x)Bs(E,d.u);else if(x=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=E.h.lastIndexOf("/");H!=-1&&(A=E.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const Y=[];for(let he=0;he<H.length;){const De=H[he++];De=="."?A&&he==H.length&&Y.push(""):De==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&he==H.length&&Y.push("")):(Y.push(De),A=!0)}A=Y.join("/")}else A=H}return x?E.h=A:x=d.i.toString()!=="",x?Rl(E,Su(d.i)):x=!!d.m,x&&(E.m=d.m),E};function Vt(d){return new kn(d)}function Xt(d,E,x){d.j=x?Pr(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Bs(d,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);d.u=E}else d.u=null}function Rl(d,E,x){E instanceof Fs?(d.i=E,Wa(d.i,d.l)):(x||(E=Qi(E,qs)),d.i=new Fs(E,d.l))}function et(d,E,x){d.i.set(E,x)}function Ki(d){return et(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Pr(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qi(d,E,x){return typeof d=="string"?(d=encodeURI(d).replace(E,bn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xa=/[#\/\?@]/g,wu=/[#\?:]/g,kl=/[#\?]/g,qs=/[#\?@]/g,xu=/#/g;function Fs(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function wn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ya(d.i,function(E,x){d.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}r=Fs.prototype,r.add=function(d,E){wn(this),this.i=null,d=Hs(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(E),this.h+=1,this};function Tu(d,E){wn(d),E=Hs(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function Dl(d,E){return wn(d),E=Hs(d,E),d.g.has(E)}r.forEach=function(d,E){wn(this),this.g.forEach(function(x,A){x.forEach(function(H){d.call(E,H,A,this)},this)},this)};function Ol(d,E){wn(d);let x=[];if(typeof E=="string")Dl(d,E)&&(x=x.concat(d.g.get(Hs(d,E))));else for(d=Array.from(d.g.values()),E=0;E<d.length;E++)x=x.concat(d[E]);return x}r.set=function(d,E){return wn(this),this.i=null,d=Hs(this,d),Dl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},r.get=function(d,E){return d?(d=Ol(this,d),d.length>0?String(d[0]):E):E};function Ja(d,E,x){Tu(d,E),x.length>0&&(d.i=null,d.g.set(Hs(d,E),T(x)),d.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(let A=0;A<E.length;A++){var x=E[A];const H=as(x);x=Ol(this,x);for(let Y=0;Y<x.length;Y++){let he=H;x[Y]!==""&&(he+="="+as(x[Y])),d.push(he)}}return this.i=d.join("&")};function Su(d){const E=new Fs;return E.i=d.i,d.g&&(E.g=new Map(d.g),E.h=d.h),E}function Hs(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function Wa(d,E){E&&!d.j&&(wn(d),d.i=null,d.g.forEach(function(x,A){const H=A.toLowerCase();A!=H&&(Tu(this,A),Ja(this,H,x))},d)),d.j=E}function dr(d,E){const x=new lr;if(u.Image){const A=new Image;A.onload=v(Gn,x,"TestLoadImage: loaded",!0,E,A),A.onerror=v(Gn,x,"TestLoadImage: error",!1,E,A),A.onabort=v(Gn,x,"TestLoadImage: abort",!1,E,A),A.ontimeout=v(Gn,x,"TestLoadImage: timeout",!1,E,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else E(!1)}function Ml(d,E){const x=new lr,A=new AbortController,H=setTimeout(()=>{A.abort(),Gn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:A.signal}).then(Y=>{clearTimeout(H),Y.ok?Gn(x,"TestPingServer: ok",!0,E):Gn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Gn(x,"TestPingServer: error",!1,E)})}function Gn(d,E,x,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(x)}catch{}}function Gs(){this.g=new hu}function Ur(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Ur,fu),Ur.prototype.g=function(){return new Yi(this.i,this.h)};function Yi(d,E){Dt.call(this),this.H=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Yi,Dt),r=Yi.prototype,r.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=E,this.readyState=1,hr(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(E.body=d),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Za(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Za(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?$s(this):hr(this),this.readyState==3&&Za(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,$s(this))},r.Na=function(d){this.g&&(this.response=d,$s(this))},r.ga=function(){this.g&&$s(this)};function $s(d){d.readyState=4,d.l=null,d.j=null,d.B=null,hr(d)}r.setRequestHeader=function(d,E){this.A.append(d,E)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=E.next();return d.join(`\r
`)};function hr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function $n(d){let E="";return _e(d,function(x,A){E+=A,E+=":",E+=x,E+=`\r
`}),E}function Xi(d,E,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=$n(x),typeof d=="string"?x!=null&&as(x):et(d,E,x))}function st(d){Dt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(st,Dt);var zr=/^https?$/i,jl=["POST","PUT"];r=st.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,E,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tl.g(),this.g.onreadystatechange=b(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(Y){Ji(this,Y);return}if(d=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)x.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())x.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(jl,E,void 0)>=0)||A||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of x)this.g.setRequestHeader(Y,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){Ji(this,Y)}};function Ji(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.o=5,Vl(d),os(d)}function Vl(d){d.A||(d.A=!0,Gt(d,"complete"),Gt(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Gt(this,"complete"),Gt(this,"abort"),os(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),st.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Wi(this):this.Xa())},r.Xa=function(){Wi(this)};function Wi(d){if(d.h&&typeof l<"u"){if(d.v&&fr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Gt(d,"readystatechange"),fr(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var A;if(A=Y===0){let he=String(d.D).match(bu)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),A=!zr.test(he?he.toLowerCase():"")}x=A}if(x)Gt(d,"complete"),Gt(d,"success");else{d.o=6;try{var H=fr(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",Vl(d)}}finally{os(d)}}}}function os(d,E){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,E||Gt(d,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function fr(d){return d.g?d.g.readyState:0}r.ca=function(){try{return fr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),mf(E)}};function nn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(d){const E={};d=(d.g&&fr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(N(d[A]))continue;var x=vu(d[A]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Y=E[H]||[];E[H]=Y,Y.push(x)}Re(E,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(d,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||E}function Ks(d){this.za=0,this.i=[],this.j=new lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Br("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Br("baseRetryDelayMs",5e3,d),this.Za=Br("retryDelaySeedMs",1e4,d),this.Ta=Br("forwardChannelMaxRetries",2,d),this.va=Br("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Sl(d&&d.concurrentRequestLimit),this.Ba=new Gs,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ks.prototype,r.ka=8,r.I=1,r.connect=function(d,E,x,A){Ot(0),this.W=d,this.H=E||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=Du(this,null,this.W),qr(this)};function Ll(d){if(eo(d),d.I==3){var E=d.V++,x=Vt(d.J);if(et(x,"SID",d.M),et(x,"RID",E),et(x,"TYPE","terminate"),Zi(d,x),E=new cr(d,d.j,E),E.M=2,E.A=Ki(Vt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=E.A,x=!0),x||(E.g=Ou(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Or(E)}ku(d)}function Qs(d){d.g&&(Ul(d),d.g.cancel(),d.g=null)}function eo(d){Qs(d),d.v&&(u.clearTimeout(d.v),d.v=null),no(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function qr(d){if(!Al(d.h)&&!d.m){d.m=!0;var E=d.Ea;ae||I(),fe||(ae(),fe=!0),R.add(E,d),d.D=0}}function to(d,E){return Vr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=E.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Rr(m(d.Ea,d,E),Ru(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new cr(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=O(Y),ce(Y,this.U)):Y=this.U),this.u!==null||this.R||(H.J=Y,Y=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(E+=A,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=Au(this,H,E),x=Vt(this.J),et(x,"RID",d),et(x,"CVER",22),this.G&&et(x,"X-HTTP-Session-Id",this.G),Zi(this,x),Y&&(this.R?E="headers="+as($n(Y))+"&"+E:this.u&&Xi(x,this.u,Y)),Il(this.h,H),this.Ra&&et(x,"TYPE","init"),this.S?(et(x,"$req",E),et(x,"SID","null"),H.U=!0,Dr(H,x,null)):Dr(H,x,E),this.I=2}}else this.I==3&&(d?Pl(this,d):this.i.length==0||Al(this.h)||Pl(this))};function Pl(d,E){var x;E?x=E.l:x=d.V++;const A=Vt(d.J);et(A,"SID",d.M),et(A,"RID",x),et(A,"AID",d.K),Zi(d,A),d.u&&d.o&&Xi(A,d.u,d.o),x=new cr(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),E&&(d.i=E.G.concat(d.i)),E=Au(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Il(d.h,x),Dr(x,A,E)}function Zi(d,E){d.H&&_e(d.H,function(x,A){et(E,A,x)}),d.l&&_e({},function(x,A){et(E,A,x)})}function Au(d,E,x){x=Math.min(d.i.length,x);const A=d.l?m(d.l.Ka,d.l,d):null;e:{var H=d.i;let De=-1;for(;;){const Nt=["count="+x];De==-1?x>0?(De=H[0].g,Nt.push("ofs="+De)):De=0:Nt.push("ofs="+De);let Je=!0;for(let _t=0;_t<x;_t++){var Y=H[_t].g;const Kn=H[_t].map;if(Y-=De,Y<0)De=Math.max(0,H[_t].g-100),Je=!1;else try{Y="req"+Y+"_"||"";try{var he=Kn instanceof Map?Kn:Object.entries(Kn);for(const[Hr,mr]of he){let gr=mr;p(mr)&&(gr=zs(mr)),Nt.push(Y+Hr+"="+encodeURIComponent(gr))}}catch(Hr){throw Nt.push(Y+"type="+encodeURIComponent("_badmap")),Hr}}catch{A&&A(Kn)}}if(Je){he=Nt.join("&");break e}}he=void 0}return d=d.i.splice(0,x),E.G=d,he}function Iu(d){if(!d.g&&!d.v){d.Y=1;var E=d.Da;ae||I(),fe||(ae(),fe=!0),R.add(E,d),d.A=0}}function ea(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Rr(m(d.Da,d),Ru(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Rr(m(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Qs(this),Nu(this))};function Ul(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function Nu(d){d.g=new cr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var E=Vt(d.na);et(E,"RID","rpc"),et(E,"SID",d.M),et(E,"AID",d.K),et(E,"CI",d.F?"0":"1"),!d.F&&d.ia&&et(E,"TO",d.ia),et(E,"TYPE","xmlhttp"),Zi(d,E),d.u&&d.o&&Xi(E,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Ki(Vt(E)),x.u=null,x.R=!0,Ka(x,d)}r.Va=function(){this.C!=null&&(this.C=null,Qs(this),ea(this),Ot(19))};function no(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Cu(d,E){var x=null;if(d.g==E){no(d),Ul(d),d.g=null;var A=2}else if(Lr(d.h,E))x=E.G,Nl(d.h,E),A=1;else return;if(d.I!=0){if(E.o)if(A==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var H=d.D;A=$a(),Gt(A,new Cr(A,x)),qr(d)}else Iu(d);else if(H=E.m,H==3||H==0&&E.X>0||!(A==1&&to(d,E)||A==2&&ea(d)))switch(x&&x.length>0&&(E=d.h,E.i=E.i.concat(x)),H){case 1:Fr(d,5);break;case 4:Fr(d,10);break;case 3:Fr(d,6);break;default:Fr(d,2)}}}function Ru(d,E){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*E}function Fr(d,E){if(d.j.info("Error code "+E),E==2){var x=m(d.bb,d),A=d.Ua;const H=!A;A=new kn(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xt(A,"https"),Ki(A),H?dr(A.toString(),x):Ml(A.toString(),x)}else Ot(2);d.I=0,d.l&&d.l.pa(E),ku(d),eo(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function ku(d){if(d.I=0,d.ja=[],d.l){const E=Cl(d.h);(E.length!=0||d.i.length!=0)&&(D(d.ja,E),D(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function Du(d,E,x){var A=x instanceof kn?Vt(x):new kn(x);if(A.g!="")E&&(A.g=E+"."+A.g),Bs(A,A.u);else{var H=u.location;A=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const Y=new kn(null);A&&Xt(Y,A),E&&(Y.g=E),H&&Bs(Y,H),x&&(Y.h=x),A=Y}return x=d.G,E=d.wa,x&&E&&et(A,x,E),et(A,"VER",d.ka),Zi(d,A),A}function Ou(d,E,x){if(E&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Aa&&!d.ma?new st(new Ur({ab:x})):new st(d.ma),E.Fa(d.L),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}r=Mu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ys(){}Ys.prototype.g=function(d,E){return new yn(d,E)};function yn(d,E){Dt.call(this),this.g=new Ks(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(d?d["X-WebChannel-Client-Profile"]=E.sa:d={"X-WebChannel-Client-Profile":E.sa}),this.g.U=d,(d=E&&E.Qb)&&!N(d)&&(this.g.u=d),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!N(E)&&(this.g.G=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new cs(this)}_(yn,Dt),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Ll(this.g)},yn.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=zs(d),d=x);E.i.push(new jt(E.Ya++,d)),E.I==3&&qr(E)},yn.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,yn.Z.N.call(this)};function ju(d){tn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const x in E){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}_(ju,tn);function Vu(){Fn.call(this),this.status=1}_(Vu,Fn);function cs(d){this.g=d}_(cs,Mu),cs.prototype.ra=function(){Gt(this.g,"a")},cs.prototype.qa=function(d){Gt(this.g,new ju(d))},cs.prototype.pa=function(d){Gt(this.g,new Vu)},cs.prototype.oa=function(){Gt(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,px=function(){return new Ys},gx=function(){return $a()},mx=It,Kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,th=Gi,xl.COMPLETE="complete",fx=xl,mu.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,Ic=mu,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,hx=st}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const YE="@firebase/firestore",XE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new Ep("@firebase/firestore");function jo(){return Ia.logLevel}function ge(r,...e){if(Ia.logLevel<=ze.DEBUG){const t=e.map(Op);Ia.debug(`Firestore (${hl}): ${r}`,...t)}}function Vs(r,...e){if(Ia.logLevel<=ze.ERROR){const t=e.map(Op);Ia.error(`Firestore (${hl}): ${r}`,...t)}}function Qo(r,...e){if(Ia.logLevel<=ze.WARN){const t=e.map(Op);Ia.warn(`Firestore (${hl}): ${r}`,...t)}}function Op(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,yx(r,i,t)}function yx(r,e,t){let i=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vs(i),new Error(i)}function Qe(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||yx(e,a,i)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class jR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VR{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await a(this.currentUser)}))},p=f=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>p(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?p(f):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new vx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class LR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new LR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new JE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=zR(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function qe(r,e){return r<e?-1:r>e?1:0}function Qg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Ng(a)===Ng(l)?qe(a,l):Ng(a)?1:-1}return qe(r.length,e.length)}const BR=55296,qR=57343;function Ng(r){const e=r.charCodeAt(0);return e>=BR&&e<=qR}function Yo(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="__name__";class Xr{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Xr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return qe(e.length,t.length)}static compareSegments(e,t){const i=Xr.isNumericId(e),a=Xr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Xr.extractNumericId(e).compare(Xr.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ii.fromString(e.substring(4,e.length-2))}}class rt extends Xr{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Xr{construct(e,t,i){return new cn(e,t,i)}static isValidIdentifier(e){return FR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yg}static keyField(){return new cn([Yg])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else p==="`"?(u=!u,a++):p!=="."||u?(i+=p,a++):(l(),a++)}if(l(),u)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(rt.fromString(e))}static fromName(e){return new Ee(rt.fromString(e).popFirst(5))}static empty(){return new Ee(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(r,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function HR(r,e,t,i){if(e===!0&&i===!0)throw new de(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function WE(r){if(!Ee.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ZE(r){if(Ee.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Ex(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function qh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe(12329,{type:typeof r})}function mn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(r);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function GR(r,e){if(e<=0)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(r,e){const t={typeString:r};return e&&(t.value=e),t}function nu(r,e){if(!Ex(r))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const u=r[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=-62135596800,tb=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*tb);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eb)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tb}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nu(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ht("string",pt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new pt(0,0))}static max(){return new Ae(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=-1;function $R(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new ki(a,Ee.empty(),e)}function KR(r){return new ki(r.readTime,r.key,Bc)}class ki{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ki(Ae.min(),Ee.empty(),Bc)}static max(){return new ki(Ae.max(),Ee.empty(),Bc)}}function QR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==YR)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let a=0,l=0,u=!1;e.forEach((p=>{++a,p.next((()=>{++l,u&&l===a&&t()}),(f=>i(f)))})),u=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((a=>a?ie.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,a)=>{const l=e.length,u=new Array(l);let p=0;for(let f=0;f<l;f++){const m=f;t(e[m]).next((v=>{u[m]=v,++p,p===l&&i(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new ie(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function JR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=-1;function ru(r){return r==null}function yh(r){return r===0&&1/r==-1/0}function WR(r){return typeof r=="number"&&Number.isInteger(r)&&!yh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="";function ZR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=nb(e)),e=ek(r.get(t),e);return nb(e)}function ek(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case bx:t+="";break;default:t+=l}}return t}function nb(r){return r+bx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Pi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function wx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}}class Fd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??ln.RED,this.left=a??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new ln(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return ln.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sb(this.data.getIterator())}getIteratorFrom(e){return new sb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class sb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new zn([])}unionWith(e){let t=new Qt(cn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xx("Invalid base64 string: "+l):l}})(e);return new un(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const tk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const t=tk.exec(r);if(Qe(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(r.seconds),nanos:kt(r.nanos)}}function kt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oi(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="server_timestamp",Sx="__type__",Ax="__previous_value__",Ix="__local_write_time__";function Hh(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Sx])==null?void 0:i.stringValue)===Tx}function Gh(r){const e=r.mapValue.fields[Ax];return Hh(e)?Gh(e):e}function qc(r){const e=Di(r.mapValue.fields[Ix].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t,i,a,l,u,p,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const vh="(default)";class Fc{constructor(e,t){this.projectId=e,this.database=t||vh}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="__type__",rk="__max__",Hd={mapValue:{}},Cx="__vector__",_h="value";function Mi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hh(r)?4:ik(r)?9007199254740991:sk(r)?10:11:xe(28295,{value:r})}function rs(r,e){if(r===e)return!0;const t=Mi(r);if(t!==Mi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return qc(r).isEqual(qc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Di(a.timestampValue),p=Di(l.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Oi(a.bytesValue).isEqual(Oi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return kt(a.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(a.geoPointValue.longitude)===kt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return kt(a.integerValue)===kt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=kt(a.doubleValue),p=kt(l.doubleValue);return u===p?yh(u)===yh(p):isNaN(u)&&isNaN(p)}return!1})(r,e);case 9:return Yo(r.arrayValue.values||[],e.arrayValue.values||[],rs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},p=l.mapValue.fields||{};if(rb(u)!==rb(p))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(p[f]===void 0||!rs(u[f],p[f])))return!1;return!0})(r,e);default:return xe(52216,{left:r})}}function Hc(r,e){return(r.values||[]).find((t=>rs(t,e)))!==void 0}function Xo(r,e){if(r===e)return 0;const t=Mi(r),i=Mi(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(l,u){const p=kt(l.integerValue||l.doubleValue),f=kt(u.integerValue||u.doubleValue);return p<f?-1:p>f?1:p===f?0:isNaN(p)?isNaN(f)?0:-1:1})(r,e);case 3:return ib(r.timestampValue,e.timestampValue);case 4:return ib(qc(r),qc(e));case 5:return Qg(r.stringValue,e.stringValue);case 6:return(function(l,u){const p=Oi(l),f=Oi(u);return p.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(l,u){const p=l.split("/"),f=u.split("/");for(let m=0;m<p.length&&m<f.length;m++){const v=qe(p[m],f[m]);if(v!==0)return v}return qe(p.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,u){const p=qe(kt(l.latitude),kt(u.latitude));return p!==0?p:qe(kt(l.longitude),kt(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ab(r.arrayValue,e.arrayValue);case 10:return(function(l,u){var b,T,D,M;const p=l.fields||{},f=u.fields||{},m=(b=p[_h])==null?void 0:b.arrayValue,v=(T=f[_h])==null?void 0:T.arrayValue,_=qe(((D=m==null?void 0:m.values)==null?void 0:D.length)||0,((M=v==null?void 0:v.values)==null?void 0:M.length)||0);return _!==0?_:ab(m,v)})(r.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Hd.mapValue&&u===Hd.mapValue)return 0;if(l===Hd.mapValue)return 1;if(u===Hd.mapValue)return-1;const p=l.fields||{},f=Object.keys(p),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let _=0;_<f.length&&_<v.length;++_){const b=Qg(f[_],v[_]);if(b!==0)return b;const T=Xo(p[f[_]],m[v[_]]);if(T!==0)return T}return qe(f.length,v.length)})(r.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function ib(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const t=Di(r),i=Di(e),a=qe(t.seconds,i.seconds);return a!==0?a:qe(t.nanos,i.nanos)}function ab(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Xo(t[a],i[a]);if(l)return l}return qe(t.length,i.length)}function Jo(r){return Xg(r)}function Xg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Di(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Oi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Xg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${Xg(t.fields[u])}`;return a+"}"})(r.mapValue):xe(61005,{value:r})}function nh(r){switch(Mi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gh(r);return e?16+nh(e):16;case 5:return 2*r.stringValue.length;case 6:return Oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+nh(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Pi(i.fields,((l,u)=>{a+=l.length+nh(u)})),a})(r.mapValue);default:throw xe(13486,{value:r})}}function Eh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Jg(r){return!!r&&"integerValue"in r}function Vp(r){return!!r&&"arrayValue"in r}function ob(r){return!!r&&"nullValue"in r}function lb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rh(r){return!!r&&"mapValue"in r}function sk(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Nx])==null?void 0:i.stringValue)===Cx}function Oc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Pi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Oc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oc(r.arrayValue.values[t]);return e}return{...r}}function ik(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===rk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(t)}setAll(e){let t=cn.emptyPath(),i={},a=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const f=this.getFieldsMap(t);this.applyChanges(f,i,a),i={},a=[],t=p.popLast()}u?i[p.lastSegment()]=Oc(u):a.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];rh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Pi(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new _n(Oc(this.value))}}function Rx(r){const e=[];return Pi(r.fields,((t,i)=>{const a=new cn([t]);if(rh(i)){const l=Rx(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,i,a,l,u,p){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Ae.min(),Ae.min(),Ae.min(),_n.empty(),0)}static newFoundDocument(e,t,i,a){return new en(e,1,t,Ae.min(),i,a,0)}static newNoDocument(e,t){return new en(e,2,t,Ae.min(),Ae.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,Ae.min(),Ae.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){this.position=e,this.inclusive=t}}function cb(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Xo(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function ub(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!rs(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function ak(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{}class qt extends kx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lk(e,t,i):t==="array-contains"?new dk(e,i):t==="in"?new hk(e,i):t==="not-in"?new fk(e,i):t==="array-contains-any"?new mk(e,i):new qt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ck(e,i):new uk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xo(t,this.value)):t!==null&&Mi(this.value)===Mi(t)&&this.matchesComparison(Xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends kx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xr(e,t)}matches(e){return Dx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dx(r){return r.op==="and"}function Ox(r){return ok(r)&&Dx(r)}function ok(r){for(const e of r.filters)if(e instanceof xr)return!1;return!0}function Wg(r){if(r instanceof qt)return r.field.canonicalString()+r.op.toString()+Jo(r.value);if(Ox(r))return r.filters.map((e=>Wg(e))).join(",");{const e=r.filters.map((t=>Wg(t))).join(",");return`${r.op}(${e})`}}function Mx(r,e){return r instanceof qt?(function(i,a){return a instanceof qt&&i.op===a.op&&i.field.isEqual(a.field)&&rs(i.value,a.value)})(r,e):r instanceof xr?(function(i,a){return a instanceof xr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,p)=>l&&Mx(u,a.filters[p])),!0):!1})(r,e):void xe(19439)}function jx(r){return r instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Jo(t.value)}`})(r):r instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(jx).join(" ,")+"}"})(r):"Filter"}class lk extends qt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class ck extends qt{constructor(e,t){super(e,"in",t),this.keys=Vx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uk extends qt{constructor(e,t){super(e,"not-in",t),this.keys=Vx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vx(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class dk extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Hc(t.arrayValue,this.value)}}class hk extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class fk extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class mk extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Hc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,t=null,i=[],a=[],l=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=p,this.Te=null}}function db(r,e=null,t=[],i=[],a=null,l=null,u=null){return new gk(r,e,t,i,a,l,u)}function Lp(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Wg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),ru(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Jo(i))).join(",")),e.Te=t}return e.Te}function Pp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ak(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Mx(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ub(r.startAt,e.startAt)&&ub(r.endAt,e.endAt)}function Zg(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t=null,i=[],a=[],l=null,u="F",p=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=p,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pk(r,e,t,i,a,l,u,p){return new La(r,e,t,i,a,l,u,p)}function $h(r){return new La(r)}function hb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Up(r){return r.collectionGroup!==null}function Fo(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Qt(cn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(p=p.add(m.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Gc(l,i))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new Gc(cn.keyField(),i))}return e.Ie}function Zr(r){const e=Ce(r);return e.Ee||(e.Ee=yk(e,Fo(r))),e.Ee}function yk(r,e){if(r.limitType==="F")return db(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Gc(a.field,l)}));const t=r.endAt?new Wo(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Wo(r.startAt.position,r.startAt.inclusive):null;return db(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function ep(r,e){const t=r.filters.concat([e]);return new La(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function bh(r,e,t){return new La(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Kh(r,e){return Pp(Zr(r),Zr(e))&&r.limitType===e.limitType}function Lx(r){return`${Lp(Zr(r))}|lt:${r.limitType}`}function Vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>jx(a))).join(", ")}]`),ru(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Jo(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Jo(a))).join(",")),`Target(${i})`})(Zr(r))}; limitType=${r.limitType})`}function Qh(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of Fo(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(u,p,f){const m=cb(u,p,f);return u.inclusive?m<=0:m<0})(i.startAt,Fo(i),a)||i.endAt&&!(function(u,p,f){const m=cb(u,p,f);return u.inclusive?m>=0:m>0})(i.endAt,Fo(i),a))})(r,e)}function vk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Px(r){return(e,t)=>{let i=!1;for(const a of Fo(r)){const l=_k(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function _k(r,e,t){const i=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,u,p){const f=u.data.field(l),m=p.data.field(l);return f!==null&&m!==null?Xo(f,m):xe(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return wx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Tt(Ee.comparator);function Ls(){return Ek}const Ux=new Tt(Ee.comparator);function Nc(...r){let e=Ux;for(const t of r)e=e.insert(t.key,t);return e}function zx(r){let e=Ux;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function _a(){return Mc()}function Bx(){return Mc()}function Mc(){return new Pa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const bk=new Tt(Ee.comparator),wk=new Qt(Ee.comparator);function Fe(...r){let e=wk;for(const t of r)e=e.add(t);return e}const xk=new Qt(qe);function Tk(){return xk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function qx(r){return{integerValue:""+r}}function Sk(r,e){return WR(e)?qx(e):zp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function Ak(r,e,t){return r instanceof wh?(function(a,l){const u={fields:{[Sx]:{stringValue:Tx},[Ix]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Hh(l)&&(l=Gh(l)),l&&(u.fields[Ax]=l),{mapValue:u}})(t,e):r instanceof Zo?Hx(r,e):r instanceof el?Gx(r,e):(function(a,l){const u=Fx(a,l),p=fb(u)+fb(a.Ae);return Jg(u)&&Jg(a.Ae)?qx(p):zp(a.serializer,p)})(r,e)}function Ik(r,e,t){return r instanceof Zo?Hx(r,e):r instanceof el?Gx(r,e):t}function Fx(r,e){return r instanceof xh?(function(i){return Jg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class wh extends Yh{}class Zo extends Yh{constructor(e){super(),this.elements=e}}function Hx(r,e){const t=$x(e);for(const i of r.elements)t.some((a=>rs(a,i)))||t.push(i);return{arrayValue:{values:t}}}class el extends Yh{constructor(e){super(),this.elements=e}}function Gx(r,e){let t=$x(e);for(const i of r.elements)t=t.filter((a=>!rs(a,i)));return{arrayValue:{values:t}}}class xh extends Yh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function fb(r){return kt(r.integerValue||r.doubleValue)}function $x(r){return Vp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this.field=e,this.transform=t}}function Nk(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Zo&&a instanceof Zo||i instanceof el&&a instanceof el?Yo(i.elements,a.elements,rs):i instanceof xh&&a instanceof xh?rs(i.Ae,a.Ae):i instanceof wh&&a instanceof wh})(r.transform,e.transform)}class Ck{constructor(e,t){this.version=e,this.transformResults=t}}class Ft{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xh{}function Qx(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new iu(r.key,Ft.none()):new su(r.key,r.data,Ft.none());{const t=r.data,i=_n.empty();let a=new Qt(cn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ui(r.key,i,new zn(a.toArray()),Ft.none())}}function Rk(r,e,t){r instanceof su?(function(a,l,u){const p=a.value.clone(),f=gb(a.fieldTransforms,l,u.transformResults);p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Ui?(function(a,l,u){if(!sh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const p=gb(a.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(Yx(a)),f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(r,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function jc(r,e,t,i){return r instanceof su?(function(l,u,p,f){if(!sh(l.precondition,u))return p;const m=l.value.clone(),v=pb(l.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ui?(function(l,u,p,f){if(!sh(l.precondition,u))return p;const m=pb(l.fieldTransforms,f,u),v=u.data;return v.setAll(Yx(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(r,e,t,i):(function(l,u,p){return sh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(r,e,t)}function kk(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=Fx(i.transform,a||null);l!=null&&(t===null&&(t=_n.empty()),t.set(i.field,l))}return t||null}function mb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Yo(i,a,((l,u)=>Nk(l,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class su extends Xh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ui extends Xh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Yx(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function gb(r,e,t){const i=new Map;Qe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,p=e.data.field(l.field);i.set(l.field,Ik(u,p,t[a]))}return i}function pb(r,e,t){const i=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);i.set(a.field,Ak(l,u,e))}return i}class iu extends Xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xx extends Xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Rk(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=jc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=jc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Bx();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let p=this.applyToLocalView(u,l.mutatedFields);p=t.has(a.key)?null:p;const f=Qx(u,p);f!==null&&i.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((t,i)=>mb(t,i)))&&Yo(this.baseMutations,e.baseMutations,((t,i)=>mb(t,i)))}}class Bp{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return bk})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new Bp(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,$e;function Jx(r){switch(r){case Z.OK:return xe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return xe(15467,{code:r})}}function Wx(r){if(r===void 0)return Vs("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Bt.OK:return Z.OK;case Bt.CANCELLED:return Z.CANCELLED;case Bt.UNKNOWN:return Z.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Z.INTERNAL;case Bt.UNAVAILABLE:return Z.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Z.NOT_FOUND;case Bt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Bt.ABORTED:return Z.ABORTED;case Bt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Bt.DATA_LOSS:return Z.DATA_LOSS;default:return xe(39323,{code:r})}}($e=Bt||(Bt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new Ii([4294967295,4294967295],0);function yb(r){const e=jk().encode(r),t=new dx;return t.update(e),new Uint8Array(t.digest())}function vb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ii([t,i],0),new Ii([a,l],0)]}class qp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Cc(`Invalid padding: ${t}`);if(i<0)throw new Cc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ii.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ii.fromNumber(i)));return a.compare(Vk)===1&&(a=new Ii([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yb(e),[i,a]=vb(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new qp(l,a,t);return i.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=yb(e),[i,a]=vb(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Jh(Ae.min(),a,new Tt(qe),Ls(),Fe())}}class au{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new au(i,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class Zx{constructor(e,t){this.targetId=e,this.Ce=t}}class eT{constructor(e,t,i=un.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class _b{constructor(){this.ve=0,this.Fe=Eb(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),i=Fe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:xe(38017,{changeType:l})}})),new au(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Eb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Lk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ls(),this.Je=Gd(),this.He=Gd(),this.Ye=new Tt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Zg(l))if(i===0){const u=new Ee(l.path);this.et(t,u,en.newNoDocument(u,Ae.min()))}else Qe(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const p=this.ut(e),f=p?this.ct(p,e,u):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,p;try{u=Oi(i).toUint8Array()}catch(f){if(f instanceof xx)return Qo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{p=new qp(u,a,l)}catch(f){return Qo(f instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const p=this.ot(u);if(p){if(l.current&&Zg(p.target)){const f=new Ee(p.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,en.newNoDocument(f,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Fe();this.He.forEach(((l,u)=>{let p=!0;u.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Jh(e,t,this.Ye,this.je,i);return this.je=Ls(),this.Je=Gd(),this.He=Gd(),this.Ye=new Tt(qe),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _b,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _b),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gd(){return new Tt(Ee.comparator)}function Eb(){return new Tt(Ee.comparator)}const Pk={asc:"ASCENDING",desc:"DESCENDING"},Uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zk={and:"AND",or:"OR"};class Bk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tp(r,e){return r.useProto3Json||ru(e)?e:{value:e}}function Th(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function qk(r,e){return Th(r,e.toTimestamp())}function Bn(r){return Qe(!!r,49232),Ae.fromTimestamp((function(t){const i=Di(t);return new pt(i.seconds,i.nanos)})(r))}function Fp(r,e){return np(r,e).canonicalString()}function np(r,e){const t=(function(a){return new rt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function nT(r){const e=rt.fromString(r);return Qe(lT(e),10190,{key:e.toString()}),e}function Sh(r,e){return Fp(r.databaseId,e.path)}function Vc(r,e){const t=nT(e);if(t.get(1)!==r.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(sT(t))}function rT(r,e){return Fp(r.databaseId,e)}function Fk(r){const e=nT(r);return e.length===4?rt.emptyPath():sT(e)}function rp(r){return new rt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function sT(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function bb(r,e,t){return{name:Sh(r,e),fields:t.value.mapValue.fields}}function Hk(r,e){return"found"in e?(function(i,a){Qe(!!a.found,43571),a.found.name,a.found.updateTime;const l=Vc(i,a.found.name),u=Bn(a.found.updateTime),p=a.found.createTime?Bn(a.found.createTime):Ae.min(),f=new _n({mapValue:{fields:a.found.fields}});return en.newFoundDocument(l,u,p,f)})(r,e):"missing"in e?(function(i,a){Qe(!!a.missing,3894),Qe(!!a.readTime,22933);const l=Vc(i,a.missing),u=Bn(a.readTime);return en.newNoDocument(l,u)})(r,e):xe(7234,{result:e})}function Gk(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:xe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),un.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),un.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(m){const v=m.code===void 0?Z.UNKNOWN:Wx(m.code);return new de(v,m.message||"")})(u);t=new eT(i,a,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Vc(r,i.document.name),l=Bn(i.document.updateTime),u=i.document.createTime?Bn(i.document.createTime):Ae.min(),p=new _n({mapValue:{fields:i.document.fields}}),f=en.newFoundDocument(a,l,u,p),m=i.targetIds||[],v=i.removedTargetIds||[];t=new ih(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Vc(r,i.document),l=i.readTime?Bn(i.readTime):Ae.min(),u=en.newNoDocument(a,l),p=i.removedTargetIds||[];t=new ih([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Vc(r,i.document),l=i.removedTargetIds||[];t=new ih([],l,a,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new Mk(a,l),p=i.targetId;t=new Zx(p,u)}}return t}function iT(r,e){let t;if(e instanceof su)t={update:bb(r,e.key,e.value)};else if(e instanceof iu)t={delete:Sh(r,e.key)};else if(e instanceof Ui)t={update:bb(r,e.key,e.data),updateMask:e4(e.fieldMask)};else{if(!(e instanceof Xx))return xe(16599,{Vt:e.type});t={verify:Sh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const p=u.transform;if(p instanceof wh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Zo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof el)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof xh)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw xe(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:qk(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(r,e.precondition)),t}function $k(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map((t=>(function(a,l){let u=a.updateTime?Bn(a.updateTime):Bn(l);return u.isEqual(Ae.min())&&(u=Bn(l)),new Ck(u,a.transformResults||[])})(t,e)))):[]}function Kk(r,e){return{documents:[rT(r,e.path)]}}function Qk(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rT(r,a);const l=(function(m){if(m.length!==0)return oT(xr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(b){return{field:Lo(b.field),direction:Jk(b.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=tp(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:a}}function Yk(r){let e=Fk(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Qe(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const b=aT(_);return b instanceof xr&&Ox(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((b=>(function(D){return new Gc(Po(D.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(b)))})(t.orderBy));let p=null;t.limit&&(p=(function(_){let b;return b=typeof _=="object"?_.value:_,ru(b)?null:b})(t.limit));let f=null;t.startAt&&(f=(function(_){const b=!!_.before,T=_.values||[];return new Wo(T,b)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const b=!_.before,T=_.values||[];return new Wo(T,b)})(t.endAt)),pk(e,a,u,l,p,"F",f,m)}function Xk(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aT(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Po(t.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Po(t.unaryFilter.field);return qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return qt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Po(t.unaryFilter.field);return qt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return qt.create(Po(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map((i=>aT(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(r):xe(30097,{filter:r})}function Jk(r){return Pk[r]}function Wk(r){return Uk[r]}function Zk(r){return zk[r]}function Lo(r){return{fieldPath:r.canonicalString()}}function Po(r){return cn.fromServerFormat(r.fieldPath)}function oT(r){return r instanceof qt?(function(t){if(t.op==="=="){if(lb(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NAN"}};if(ob(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lb(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NAN"}};if(ob(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(t.field),op:Wk(t.op),value:t.value}}})(r):r instanceof xr?(function(t){const i=t.getFilters().map((a=>oT(a)));return i.length===1?i[0]:{compositeFilter:{op:Zk(t.op),filters:i}}})(r):xe(54877,{filter:r})}function e4(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,i,a,l=Ae.min(),u=Ae.min(),p=un.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=f}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.yt=e}}function n4(r){const e=Yk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.Cn=new s4}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ki.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class s4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Qt(rt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Qt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cT=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(cT,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="LruGarbageCollector",i4=1048576;function Tb([r,e],[t,i]){const a=qe(r,t);return a===0?qe(e,i):a}class a4{constructor(e){this.Ir=e,this.buffer=new Qt(Tb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Tb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(xb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?ge(xb,"Ignoring IndexedDB error during garbage collection: ",t):await fl(t)}await this.Vr(3e5)}))}}class l4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Fh.ce);const i=new a4(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(wb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,p,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(i=_,p=Date.now(),this.removeTargets(e,i,t)))).next((_=>(l=_,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(m=Date.now(),jo()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(p-u)+`ms
	Removed ${l} targets in `+(f-p)+`ms
	Removed ${_} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function c4(r,e){return new l4(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.changes=new Pa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&jc(i.mutation,a,zn.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Fe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Fe()){const a=_a();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=Nc();return l.forEach(((p,f)=>{u=u.insert(p,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=_a();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Fe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,i,a){let l=Ls();const u=Mc(),p=(function(){return Mc()})();return t.forEach(((f,m)=>{const v=i.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof Ui)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),jc(v.mutation,m,v.mutation.getFieldMask(),pt.now())):u.set(m.key,zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>p.set(m,new d4(v,u.get(m)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=Mc();let a=new Tt(((u,p)=>u-p)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let v=i.get(f)||zn.empty();v=p.applyToLocalView(m,v),i.set(f,v);const _=(a.get(p.batchId)||Fe()).add(f);a=a.insert(p.batchId,_)}))})).next((()=>{const u=[],p=a.getReverseIterator();for(;p.hasNext();){const f=p.getNext(),m=f.key,v=f.value,_=Bx();v.forEach((b=>{if(!l.has(b)){const T=Qx(t.get(b),i.get(b));T!==null&&_.set(b,T),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ie.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Up(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ie.resolve(_a());let p=Bc,f=l;return u.next((m=>ie.forEach(m,((v,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{f=f.insert(v,b)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,f,m,Fe()))).next((v=>({batchId:p,changes:zx(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let a=Nc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=Nc();return this.indexManager.getCollectionParents(e,l).next((p=>ie.forEach(p,(f=>{const m=(function(_,b){return new La(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next((v=>{v.forEach(((_,b)=>{u=u.insert(_,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,en.newInvalidDocument(v)))}));let p=Nc();return u.forEach(((f,m)=>{const v=l.get(f);v!==void 0&&jc(v.mutation,m,zn.empty(),pt.now()),Qh(t,m)&&(p=p.insert(f,m))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Bn(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:n4(a.bundledQuery),readTime:Bn(a.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.overlays=new Tt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_a();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const a=_a(),l=t.length+1,u=new Ee(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const f=p.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Tt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=l.get(m.largestBatchId);v===null&&(v=_a(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const p=_a(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>p.set(m,v))),!(p.size()>=a)););return ie.resolve(p)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Ok(t,i));let l=this.qr.get(t);l===void 0&&(l=Fe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.Qr=new Qt(Wt.$r),this.Ur=new Qt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Wt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Wt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new rt([])),i=new Wt(t,e),a=new Wt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new rt([])),i=new Wt(t,e),a=new Wt(t,e+1);let l=Fe();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Wt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Wt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(Wt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Dk(l,t,i,a);this.mutationQueue.push(u);for(const p of a)this.Zr=this.Zr.add(new Wt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?jp:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Wt(t,0),a=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const p=this.Xr(u.Yr);l.push(p)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qt(qe);return t.forEach((a=>{const l=new Wt(a,0),u=new Wt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(p=>{i=i.add(p.Yr)}))})),ie.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Wt(new Ee(l),0);let p=new Qt(qe);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(p=p.add(f.Yr)),!0)}),u),ie.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ie.forEach(t.mutations,(a=>{const l=new Wt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Wt(t,0),a=this.Zr.firstAfterOrEqual(i);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let i=Ls();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():en.newInvalidDocument(a))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Ls();const u=t.path,p=new Ee(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(p);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||QR(KR(v),i)<=0||(a.has(v.key)||Qh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,i,a){xe(9500)}ii(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new v4(this)}getSize(e){return ie.resolve(this.size)}}class v4 extends u4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.persistence=e,this.si=new Pa((t=>Lp(t)),Pp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Hp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Fh(0),this.li=!1,this.li=!0,this.hi=new g4,this.referenceDelegate=e(this),this.Pi=new _4(this),this.indexManager=new r4,this.remoteDocumentCache=(function(a){return new y4(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new t4(t),this.Ii=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new m4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new p4(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const a=new E4(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class E4 extends XR{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Ri=new Hp,this.Vi=null}static mi(e){return new Gp(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(i=>{const a=Ee.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ah{constructor(e,t){this.persistence=e,this.pi=new Pa((i=>ZR(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=c4(this,t)}static mi(e,t){return new Ah(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((p=>{p||(i++,l.removeEntry(u,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nh(e.data.value)),t}br(e,t,i){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ie.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Fe(),a=Fe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new $p(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tI()?8:JR(gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new b4;return this.Ss(e,t,u).next((p=>{if(l.result=p,this.Vs)return this.bs(e,t,u,p.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(jo()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(jo()<=ze.DEBUG&&ge("QueryEngine","Query:",Vo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(jo()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(t))):ie.resolve())}ys(e,t){if(hb(t))return ie.resolve(null);let i=Zr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=bh(t,null,"F"),i=Zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Fe(...l);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,i).next((f=>{const m=this.Ds(t,p);return this.Cs(t,m,u,f.readTime)?this.ys(e,bh(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,i,a){return hb(t)||a.isEqual(Ae.min())?ie.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?ie.resolve(null):(jo()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Vo(t)),this.vs(e,u,t,$R(a,Bc)).next((p=>p)))}))}Ds(e,t){let i=new Qt(Px(e));return t.forEach(((a,l)=>{Qh(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return jo()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.ps.getDocumentsMatchingQuery(e,t,ki.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LocalStore",x4=3e8;class T4{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Tt(qe),this.xs=new Pa((l=>Lp(l)),Pp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function S4(r,e,t,i){return new T4(r,e,t,i)}async function dT(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],p=[];let f=Fe();for(const m of a){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of l){p.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:p})))}))}))}function A4(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,f,m,v){const _=m.batch,b=_.keys();let T=ie.resolve();return b.forEach((D=>{T=T.next((()=>v.getEntry(f,D))).next((M=>{const k=m.docVersions.get(D);Qe(k!==null,48541),M.version.compareTo(k)<0&&(_.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),v.addEntry(M)))}))})),T.next((()=>p.mutationQueue.removeMutationBatch(f,_)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let f=Fe();for(let m=0;m<p.mutationResults.length;++m)p.mutationResults[m].transformResults.length>0&&(f=f.add(p.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function hT(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function I4(r,e){const t=Ce(r),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const p=[];e.targetChanges.forEach(((v,_)=>{const b=a.get(_);if(!b)return;p.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let T=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(un.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):v.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(v.resumeToken,i)),a=a.insert(_,T),(function(M,k,F){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=x4?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(b,T,v)&&p.push(t.Pi.updateTargetData(l,T))}));let f=Ls(),m=Fe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),p.push(N4(l,u,e.documentUpdates).next((v=>{f=v.ks,m=v.qs}))),!i.isEqual(Ae.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(v)}return ie.waitFor(p).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,m))).next((()=>f))})).then((l=>(t.Ms=a,l)))}function N4(r,e,t){let i=Fe(),a=Fe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let u=Ls();return t.forEach(((p,f)=>{const m=l.get(p);f.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(p)),f.isNoDocument()&&f.version.isEqual(Ae.min())?(e.removeEntry(p,f.readTime),u=u.insert(p,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(p,f)):ge(Kp,"Ignoring outdated watch update for ",p,". Current version:",m.version," Watch version:",f.version)})),{ks:u,qs:a}}))}function C4(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=jp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function R4(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,ie.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new xi(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function sp(r,e,t){const i=Ce(r),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!ml(u))throw u;ge(Kp,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Sb(r,e,t){const i=Ce(r);let a=Ae.min(),l=Fe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const _=Ce(f),b=_.xs.get(v);return b!==void 0?ie.resolve(_.Ms.get(b)):_.Pi.getTargetData(m,v)})(i,u,Zr(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,p.targetId).next((f=>{l=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Ae.min(),t?l:Fe()))).next((p=>(k4(i,vk(e),p),{documents:p,Qs:l})))))}function k4(r,e,t){let i=r.Os.get(e)||Ae.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Ab{constructor(){this.activeTargetIds=Tk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D4{constructor(){this.Mo=new Ab,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ab,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="ConnectivityMonitor";class Nb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(Ib,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(Ib,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function ip(){return $d===null?$d=(function(){return 268435456+Math.round(2147483648*Math.random())})():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="RestConnection",M4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===vh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=ip(),p=this.zo(e,t.toUriEncodedString());ge(Cg,`Sending RPC '${e}' ${u}:`,p,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,a,l);const{host:m}=new URL(p),v=ll(m);return this.Jo(e,p,f,i,v).then((_=>(ge(Cg,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Qo(Cg,`RPC '${e}' ${u} failed with error: `,_,"url: ",p,"request:",i),_}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=M4[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class L4 extends j4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=ip();return new Promise(((p,f)=>{const m=new hx;m.setWithCredentials(!0),m.listenOnce(fx.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case th.NO_ERROR:const _=m.getResponseJson();ge(hn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),p(_);break;case th.TIMEOUT:ge(hn,`RPC '${e}' ${u} timed out`),f(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const b=m.getStatus();if(ge(hn,`RPC '${e}' ${u} failed with status:`,b,"response text:",m.getResponseText()),b>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const D=T==null?void 0:T.error;if(D&&D.status&&D.message){const M=(function(F){const K=F.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(K)>=0?K:Z.UNKNOWN})(D.status);f(new de(M,D.message))}else f(new de(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new de(Z.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ge(hn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);ge(hn,`RPC '${e}' ${u} sending request:`,a),m.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=ip(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=px(),p=gx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=l.join("");ge(hn,`Creating RPC '${e}' stream ${a}: ${v}`,f);const _=u.createWebChannel(v,f);this.I_(_);let b=!1,T=!1;const D=new V4({Yo:k=>{T?ge(hn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(b||(ge(hn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),b=!0),ge(hn,`RPC '${e}' stream ${a} sending:`,k),_.send(k))},Zo:()=>_.close()}),M=(k,F,K)=>{k.listen(F,(q=>{try{K(q)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return M(_,Ic.EventType.OPEN,(()=>{T||(ge(hn,`RPC '${e}' stream ${a} transport opened.`),D.o_())})),M(_,Ic.EventType.CLOSE,(()=>{T||(T=!0,ge(hn,`RPC '${e}' stream ${a} transport closed`),D.a_(),this.E_(_))})),M(_,Ic.EventType.ERROR,(k=>{T||(T=!0,Qo(hn,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),D.a_(new de(Z.UNAVAILABLE,"The operation could not be completed")))})),M(_,Ic.EventType.MESSAGE,(k=>{var F;if(!T){const K=k.data[0];Qe(!!K,16349);const q=K,oe=(q==null?void 0:q.error)||((F=q[0])==null?void 0:F.error);if(oe){ge(hn,`RPC '${e}' stream ${a} received error:`,oe);const ae=oe.status;let fe=(function(C){const U=Bt[C];if(U!==void 0)return Wx(U)})(ae),R=oe.message;fe===void 0&&(fe=Z.INTERNAL,R="Unknown error status: "+ae+" with message "+oe.message),T=!0,D.a_(new de(fe,R)),_.close()}else ge(hn,`RPC '${e}' stream ${a} received:`,K),D.u_(K)}})),M(p,mx.STAT_EVENT,(k=>{k.stat===Kg.PROXY?ge(hn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===Kg.NOPROXY&&ge(hn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Rg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(r){return new Bk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="PersistentStream";class fT{constructor(e,t,i,a,l,u,p,f){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Vs(t.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new de(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(Cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(Cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class P4 extends fT{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Gk(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?Bn(u.readTime):Ae.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=rp(this.serializer),t.addTarget=(function(l,u){let p;const f=u.target;if(p=Zg(f)?{documents:Kk(l,f)}:{query:Qk(l,f).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=tT(l,u.resumeToken);const m=tp(l,u.expectedCount);m!==null&&(p.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ae.min())>0){p.readTime=Th(l,u.snapshotVersion.toTimestamp());const m=tp(l,u.expectedCount);m!==null&&(p.expectedCount=m)}return p})(this.serializer,e);const i=Xk(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=rp(this.serializer),t.removeTarget=e,this.q_(t)}}class U4 extends fT{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$k(e.writeResults,e.commitTime),i=Bn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=rp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>iT(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{}class B4 extends z4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,np(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(Z.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,np(t,i),a,u,p,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(Z.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class q4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vs(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class F4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Ua(this)&&(ge(Na,"Restarting streams for network reachability change."),await(async function(f){const m=Ce(f);m.Ea.add(4),await ou(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Zh(m)})(this))}))})),this.Ra=new q4(i,a)}}async function Zh(r){if(Ua(r))for(const e of r.da)await e(!0)}async function ou(r){for(const e of r.da)await e(!1)}function mT(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Wp(t)?Jp(t):gl(t).O_()&&Xp(t,e))}function Yp(r,e){const t=Ce(r),i=gl(t);t.Ia.delete(e),i.O_()&&gT(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ua(t)&&t.Ra.set("Unknown"))}function Xp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gl(r).Y_(e)}function gT(r,e){r.Va.Ue(e),gl(r).Z_(e)}function Jp(r){r.Va=new Lk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),gl(r).start(),r.Ra.ua()}function Wp(r){return Ua(r)&&!gl(r).x_()&&r.Ia.size>0}function Ua(r){return Ce(r).Ea.size===0}function pT(r){r.Va=void 0}async function H4(r){r.Ra.set("Online")}async function G4(r){r.Ia.forEach(((e,t)=>{Xp(r,e)}))}async function $4(r,e){pT(r),Wp(r)?(r.Ra.ha(e),Jp(r)):r.Ra.set("Unknown")}async function K4(r,e,t){if(r.Ra.set("Online"),e instanceof eT&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const p of l.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,u),a.Ia.delete(p),a.Va.removeTarget(p))})(r,e)}catch(i){ge(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ih(r,i)}else if(e instanceof ih?r.Va.Ze(e):e instanceof Zx?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ae.min()))try{const i=await hT(r.localStore);t.compareTo(i)>=0&&await(function(l,u){const p=l.Va.Tt(u);return p.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(f.resumeToken,u))}})),p.targetMismatches.forEach(((f,m)=>{const v=l.Ia.get(f);if(!v)return;l.Ia.set(f,v.withResumeToken(un.EMPTY_BYTE_STRING,v.snapshotVersion)),gT(l,f);const _=new xi(v.target,f,m,v.sequenceNumber);Xp(l,_)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ge(Na,"Failed to raise snapshot:",i),await Ih(r,i)}}async function Ih(r,e,t){if(!ml(e))throw e;r.Ea.add(1),await ou(r),r.Ra.set("Offline"),t||(t=()=>hT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(Na,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Zh(r)}))}function yT(r,e){return e().catch((t=>Ih(r,t,e)))}async function ef(r){const e=Ce(r),t=ji(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jp;for(;Q4(e);)try{const a=await C4(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,Y4(e,a)}catch(a){await Ih(e,a)}vT(e)&&_T(e)}function Q4(r){return Ua(r)&&r.Ta.length<10}function Y4(r,e){r.Ta.push(e);const t=ji(r);t.O_()&&t.X_&&t.ea(e.mutations)}function vT(r){return Ua(r)&&!ji(r).x_()&&r.Ta.length>0}function _T(r){ji(r).start()}async function X4(r){ji(r).ra()}async function J4(r){const e=ji(r);for(const t of r.Ta)e.ea(t.mutations)}async function W4(r,e,t){const i=r.Ta.shift(),a=Bp.from(i,e,t);await yT(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await ef(r)}async function Z4(r,e){e&&ji(r).X_&&await(async function(i,a){if((function(u){return Jx(u)&&u!==Z.ABORTED})(a.code)){const l=i.Ta.shift();ji(i).B_(),await yT(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await ef(i)}})(r,e),vT(r)&&_T(r)}async function Rb(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),ge(Na,"RemoteStore received new credentials");const i=Ua(t);t.Ea.add(3),await ou(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Zh(t)}async function eD(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Zh(t)):e||(t.Ea.add(2),await ou(t),t.Ra.set("Unknown"))}function gl(r){return r.ma||(r.ma=(function(t,i,a){const l=Ce(t);return l.sa(),new P4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:H4.bind(null,r),t_:G4.bind(null,r),r_:$4.bind(null,r),H_:K4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Wp(r)?Jp(r):r.Ra.set("Unknown")):(await r.ma.stop(),pT(r))}))),r.ma}function ji(r){return r.fa||(r.fa=(function(t,i,a){const l=Ce(t);return l.sa(),new U4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:X4.bind(null,r),r_:Z4.bind(null,r),ta:J4.bind(null,r),na:W4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ef(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(Na,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,p=new Zp(e,t,u,a,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ey(r,e){if(Vs("AsyncQueue",`${e}: ${r}`),ml(r))return new de(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Nc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.ga=new Tt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class nl{constructor(e,t,i,a,l,u,p,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new nl(e,t,Ho.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nD{constructor(){this.queries=Db(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ce(t),l=a.queries;a.queries=Db(),l.forEach(((u,p)=>{for(const f of p.Sa)f.onError(i)}))})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function Db(){return new Pa((r=>Lx(r)),Kh)}async function ty(r,e){const t=Ce(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new tD,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const p=ey(u,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(p)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ry(t)}async function ny(r,e){const t=Ce(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function rD(r,e){const t=Ce(r);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const p of u.Sa)p.Fa(a)&&(i=!0);u.wa=a}}i&&ry(t)}function sD(r,e,t){const i=Ce(r),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function ry(r){r.Ca.forEach((e=>{e.next()}))}var ap,Ob;(Ob=ap||(ap={})).Ma="default",Ob.Cache="cache";class sy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new nl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.key=e}}class bT{constructor(e){this.key=e}}class iD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=Px(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new kb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,p=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const b=a.get(v),T=Qh(this.query,_)?_:null,D=!!b&&this.mutatedKeys.has(b.key),M=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;b&&T?b.data.isEqual(T.data)?D!==M&&(i.track({type:3,doc:T}),k=!0):this.su(b,T)||(i.track({type:2,doc:T}),k=!0,(f&&this.eu(T,f)>0||m&&this.eu(T,m)<0)&&(p=!0)):!b&&T?(i.track({type:0,doc:T}),k=!0):b&&!T&&(i.track({type:1,doc:b}),k=!0,(f||m)&&(p=!0)),k&&(T?(u=u.add(T),l=M?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(T,D){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:k})}};return M(T)-M(D)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(i),a=a??!1;const p=t&&!a?this._u():[],f=this.Xa.size===0&&this.current&&!a?1:0,m=f!==this.Za;return this.Za=f,u.length!==0||m?{snapshot:new nl(this.query,e.tu,l,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new bT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new ET(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iy="SyncEngine";class aD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class oD{constructor(e){this.key=e,this.hu=!1}}class lD{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Pa((p=>Lx(p)),Kh),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Ee.comparator),this.Au=new Map,this.Ru=new Hp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cD(r,e,t=!0){const i=IT(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await wT(i,e,t,!0),a}async function uD(r,e){const t=IT(r);await wT(t,e,!0,!1)}async function wT(r,e,t,i){const a=await R4(r.localStore,Zr(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await dD(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&mT(r.remoteStore,a),p}async function dD(r,e,t,i,a){r.pu=(_,b,T)=>(async function(M,k,F,K){let q=k.view.ru(F);q.Cs&&(q=await Sb(M.localStore,k.query,!1).then((({documents:R})=>k.view.ru(R,q))));const oe=K&&K.targetChanges.get(k.targetId),ae=K&&K.targetMismatches.get(k.targetId)!=null,fe=k.view.applyChanges(q,M.isPrimaryClient,oe,ae);return jb(M,k.targetId,fe.au),fe.snapshot})(r,_,b,T);const l=await Sb(r.localStore,e,!0),u=new iD(e,l.Qs),p=u.ru(l.documents),f=au.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),m=u.applyChanges(p,r.isPrimaryClient,f);jb(r,t,m.au);const v=new aD(e,t,u);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),m.snapshot}async function hD(r,e,t){const i=Ce(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!Kh(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await sp(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Yp(i.remoteStore,a.targetId),op(i,a.targetId)})).catch(fl)):(op(i,a.targetId),await sp(i.localStore,a.targetId,!0))}async function fD(r,e){const t=Ce(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Yp(t.remoteStore,i.targetId))}async function mD(r,e,t){const i=bD(r);try{const a=await(function(u,p){const f=Ce(u),m=pt.now(),v=p.reduce(((T,D)=>T.add(D.key)),Fe());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let D=Ls(),M=Fe();return f.Ns.getEntries(T,v).next((k=>{D=k,D.forEach(((F,K)=>{K.isValidDocument()||(M=M.add(F))}))})).next((()=>f.localDocuments.getOverlayedDocuments(T,D))).next((k=>{_=k;const F=[];for(const K of p){const q=kk(K,_.get(K.key).overlayedDocument);q!=null&&F.push(new Ui(K.key,q,Rx(q.value.mapValue),Ft.exists(!0)))}return f.mutationQueue.addMutationBatch(T,m,F,p)})).next((k=>{b=k;const F=k.applyToLocalDocumentSet(_,M);return f.documentOverlayCache.saveOverlays(T,k.batchId,F)}))})).then((()=>({batchId:b.batchId,changes:zx(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,p,f){let m=u.Vu[u.currentUser.toKey()];m||(m=new Tt(qe)),m=m.insert(p,f),u.Vu[u.currentUser.toKey()]=m})(i,a.batchId,t),await lu(i,a.changes),await ef(i.remoteStore)}catch(a){const l=ey(a,"Failed to persist write");t.reject(l)}}async function xT(r,e){const t=Ce(r);try{const i=await I4(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Qe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Qe(u.hu,14607):a.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await lu(t,i,e)}catch(i){await fl(i)}}function Mb(r,e,t){const i=Ce(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const p=u.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(u,p){const f=Ce(u);f.onlineState=p;let m=!1;f.queries.forEach(((v,_)=>{for(const b of _.Sa)b.va(p)&&(m=!0)})),m&&ry(f)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gD(r,e,t){const i=Ce(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Tt(Ee.comparator);u=u.insert(l,en.newNoDocument(l,Ae.min()));const p=Fe().add(l),f=new Jh(Ae.min(),new Map,new Tt(qe),u,p);await xT(i,f),i.du=i.du.remove(l),i.Au.delete(e),ay(i)}else await sp(i.localStore,e,!1).then((()=>op(i,e,t))).catch(fl)}async function pD(r,e){const t=Ce(r),i=e.batch.batchId;try{const a=await A4(t.localStore,e);ST(t,i,null),TT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await lu(t,a)}catch(a){await fl(a)}}async function yD(r,e,t){const i=Ce(r);try{const a=await(function(u,p){const f=Ce(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,p).next((_=>(Qe(_!==null,37113),v=_.keys(),f.mutationQueue.removeMutationBatch(m,_)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,p))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);ST(i,e,t),TT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await lu(i,a)}catch(a){await fl(a)}}function TT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ST(r,e,t){const i=Ce(r);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function op(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||AT(r,i)}))}function AT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Yp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ay(r))}function jb(r,e,t){for(const i of t)i instanceof ET?(r.Ru.addReference(i.key,e),vD(r,i)):i instanceof bT?(ge(iy,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||AT(r,i.key)):xe(19791,{wu:i})}function vD(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ge(iy,"New document in limbo: "+t),r.Eu.add(i),ay(r))}function ay(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(rt.fromString(e)),i=r.fu.next();r.Au.set(i,new oD(t)),r.du=r.du.insert(t,i),mT(r.remoteStore,new xi(Zr($h(t.path)),i,"TargetPurposeLimboResolution",Fh.ce))}}async function lu(r,e,t){const i=Ce(r),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,f)=>{u.push(i.pu(f,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(m){a.push(m);const _=$p.As(f.targetId,m);l.push(_)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(f,m){const v=Ce(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ie.forEach(m,(b=>ie.forEach(b.Es,(T=>v.persistence.referenceDelegate.addReference(_,b.targetId,T))).next((()=>ie.forEach(b.ds,(T=>v.persistence.referenceDelegate.removeReference(_,b.targetId,T)))))))))}catch(_){if(!ml(_))throw _;ge(Kp,"Failed to update sequence numbers: "+_)}for(const _ of m){const b=_.targetId;if(!_.fromCache){const T=v.Ms.get(b),D=T.snapshotVersion,M=T.withLastLimboFreeSnapshotVersion(D);v.Ms=v.Ms.insert(b,M)}}})(i.localStore,l))}async function _D(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){ge(iy,"User change. New user:",e.toKey());const i=await dT(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((p=>{p.forEach((f=>{f.reject(new de(Z.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lu(t,i.Ls)}}function ED(r,e){const t=Ce(r),i=t.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let a=Fe();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const p=t.Tu.get(u);a=a.unionWith(p.view.nu)}return a}}function IT(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=xT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gD.bind(null,e),e.Pu.H_=rD.bind(null,e.eventManager),e.Pu.yu=sD.bind(null,e.eventManager),e}function bD(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yD.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return S4(this.persistence,new w4,e.initialUser,this.serializer)}Cu(e){return new uT(Gp.mi,this.serializer)}Du(e){return new D4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class wD extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Ah,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new o4(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new uT((i=>Ah.mi(i,t)),this.serializer)}}class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Mb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_D.bind(null,this.syncEngine),await eD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nD})()}createDatastore(e){const t=Wh(e.databaseInfo.databaseId),i=(function(l){return new L4(l)})(e.databaseInfo);return(function(l,u,p,f){return new B4(l,u,p,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,p){return new F4(i,a,l,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Mb(this.syncEngine,t,0)),(function(){return Nb.v()?new Nb:new O4})())}createSyncEngine(e,t){return(function(a,l,u,p,f,m,v){const _=new lD(a,l,u,p,f,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ce(a);ge(Na,"RemoteStore shutting down."),l.Ea.add(5),await ou(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=Ce(a),p={documents:l.map((_=>Sh(u.serializer,_)))},f=await u.Ho("BatchGetDocuments",u.serializer.databaseId,rt.emptyPath(),p,l.length),m=new Map;f.forEach((_=>{const b=Hk(u.serializer,_);m.set(b.key.toString(),b)}));const v=[];return l.forEach((_=>{const b=m.get(_.toString());Qe(!!b,55234,{key:_}),v.push(b)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new iu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const a=Ee.fromPath(i);this.mutations.push(new Xx(a,this.precondition(a)))})),await(async function(i,a){const l=Ce(i),u={writes:a.map((p=>iT(l.serializer,p)))};await l.Go("Commit",l.serializer.databaseId,rt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe(50498,{Gu:e.constructor.name});t=Ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new de(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?Ft.exists(!1):Ft.updateTime(t):Ft.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new de(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ft.updateTime(t)}return Ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.zu=i.maxAttempts,this.M_=new Qp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new xD(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.Yu(a)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Jx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class SD{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=Mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ge(Vi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge(Vi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ey(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function kg(r,e){r.asyncQueue.verifyOperationInProgress(),ge(Vi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await dT(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Vb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await AD(r);ge(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Rb(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>Rb(e.remoteStore,a))),r._onlineComponents=e}async function AD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(Vi,"Using user provided OfflineComponentProvider");try{await kg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Qo("Error using user provided cache. Falling back to memory cache: "+t),await kg(r,new Nh)}}else ge(Vi,"Using default OfflineComponentProvider"),await kg(r,new wD(void 0));return r._offlineComponents}async function ly(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(Vi,"Using user provided OnlineComponentProvider"),await Vb(r,r._uninitializedComponentsProvider._online)):(ge(Vi,"Using default OnlineComponentProvider"),await Vb(r,new lp))),r._onlineComponents}function ID(r){return ly(r).then((e=>e.syncEngine))}function ND(r){return ly(r).then((e=>e.datastore))}async function Ch(r){const e=await ly(r),t=e.eventManager;return t.onListen=cD.bind(null,e.syncEngine),t.onUnlisten=hD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fD.bind(null,e.syncEngine),t}function CD(r,e,t={}){const i=new Wr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,f,m){const v=new oy({next:b=>{v.Nu(),u.enqueueAndForget((()=>ny(l,_)));const T=b.docs.has(p);!T&&b.fromCache?m.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&b.fromCache&&f&&f.source==="server"?m.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),_=new sy($h(p.path),v,{includeMetadataChanges:!0,qa:!0});return ty(l,_)})(await Ch(r),r.asyncQueue,e,t,i))),i.promise}function RD(r,e,t={}){const i=new Wr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,f,m){const v=new oy({next:b=>{v.Nu(),u.enqueueAndForget((()=>ny(l,_))),b.fromCache&&f.source==="server"?m.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),_=new sy(p,v,{includeMetadataChanges:!0,qa:!0});return ty(l,_)})(await Ch(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="firestore.googleapis.com",Pb=!0;class Ub{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CT,this.ssl=Pb}else this.host=e.host,this.ssl=e.ssl??Pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i4)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ub(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new MR;switch(i.type){case"firstParty":return new PR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Lb.get(t);i&&(ge("ComponentProvider","Removing Datastore"),Lb.delete(t),i.terminate())})(this),Promise.resolve()}}function kD(r,e,t,i={}){var m;r=mn(r,tf);const a=ll(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;a&&(Sw(`https://${p}`),Aw("Firestore",!0)),l.host!==CT&&l.host!==p&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:p,ssl:a,emulatorOptions:i};if(!Os(f,u)&&(r._setSettings(f),i.mockUserToken)){let v,_;if(typeof i.mockUserToken=="string")v=i.mockUserToken,_=fn.MOCK_USER;else{v=$2(i.mockUserToken,(m=r._app)==null?void 0:m.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(b)}r._authCredentials=new jR(new vx(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(nu(t,xt._jsonSchema))return new xt(e,i||null,new Ee(rt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Ht("string",xt._jsonSchemaVersion),referencePath:Ht("string")};class Ni extends is{constructor(e,t,i){super(e,t,$h(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ee(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function Ze(r,e,...t){if(r=yt(r),_x("collection","path",e),r instanceof tf){const i=rt.fromString(e,...t);return ZE(i),new Ni(r,null,i)}{if(!(r instanceof xt||r instanceof Ni))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rt.fromString(e,...t));return ZE(i),new Ni(r.firestore,null,i)}}function Be(r,e,...t){if(r=yt(r),arguments.length===1&&(e=Mp.newId()),_x("doc","path",e),r instanceof tf){const i=rt.fromString(e,...t);return WE(i),new xt(r,null,new Ee(i))}{if(!(r instanceof xt||r instanceof Ni))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rt.fromString(e,...t));return WE(i),new xt(r.firestore,r instanceof Ni?r.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="AsyncQueue";class Bb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qp(this,"async_queue_retry"),this._c=()=>{const i=Rg();i&&ge(zb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Rg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Wr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;ge(zb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vs("INTERNAL UNHANDLED ERROR: ",qb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Zp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&xe(47125,{Pc:qb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Tr extends tf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Bb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bb(e),this._firestoreClient=void 0,await e}}}function DD(r,e){const t=typeof r=="object"?r:wp(),i=typeof r=="string"?r:vh,a=cl(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=H2("firestore");l&&kD(a,...l)}return a}function pl(r){if(r._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||OD(r),r._firestoreClient}function OD(r){var i,a,l;const e=r._freezeSettings(),t=(function(p,f,m,v){return new nk(p,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,NT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new SD(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(p){const f=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(f),_online:f}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(un.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Un(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nu(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Ht("string",Un._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function MD(){return new za(Yg)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(nu(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Ht("string",es._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nu(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ts(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:Ht("string",ts._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=/^__.*__$/;class VD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class RT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:r})}}class nf{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kT(this.Ac)&&jD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Wh(e)}Cc(e,t,i,a=!1){return new nf({Ac:e,methodName:t,Dc:i,path:cn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ba(r){const e=r._freezeSettings(),t=Wh(r._databaseId);return new LD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function rf(r,e,t,i,a,l={}){const u=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);fy("Data must be an object, but it was:",u,i);const p=MT(i,u);let f,m;if(l.merge)f=new zn(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const b=cp(e,_,t);if(!u.contains(b))throw new de(Z.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);VT(v,b)||v.push(b)}f=new zn(v),m=u.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,m=u.fieldTransforms;return new VD(new _n(p),f,m)}class sf extends cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}function DT(r,e,t){return new nf({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cy extends cu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=DT(this,e,!0),i=this.vc.map((l=>qa(l,t))),a=new Zo(i);return new Kx(e.path,a)}isEqual(e){return e instanceof cy&&Os(this.vc,e.vc)}}class uy extends cu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=DT(this,e,!0),i=this.vc.map((l=>qa(l,t))),a=new el(i);return new Kx(e.path,a)}isEqual(e){return e instanceof uy&&Os(this.vc,e.vc)}}function dy(r,e,t,i){const a=r.Cc(1,e,t);fy("Data must be an object, but it was:",a,i);const l=[],u=_n.empty();Pi(i,((f,m)=>{const v=my(e,f,t);m=yt(m);const _=a.yc(v);if(m instanceof sf)l.push(v);else{const b=qa(m,_);b!=null&&(l.push(v),u.set(v,b))}}));const p=new zn(l);return new RT(u,p,a.fieldTransforms)}function hy(r,e,t,i,a,l){const u=r.Cc(1,e,t),p=[cp(e,i,t)],f=[a];if(l.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)p.push(cp(e,l[b])),f.push(l[b+1]);const m=[],v=_n.empty();for(let b=p.length-1;b>=0;--b)if(!VT(m,p[b])){const T=p[b];let D=f[b];D=yt(D);const M=u.yc(T);if(D instanceof sf)m.push(T);else{const k=qa(D,M);k!=null&&(m.push(T),v.set(T,k))}}const _=new zn(m);return new RT(v,_,u.fieldTransforms)}function OT(r,e,t,i=!1){return qa(t,r.Cc(i?4:3,e))}function qa(r,e){if(jT(r=yt(r)))return fy("Unsupported field value:",e,r),MT(r,e);if(r instanceof cu)return(function(i,a){if(!kT(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const p of i){let f=qa(p,a.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Sk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:Th(a.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Th(a.serializer,l)}}if(i instanceof es)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Un)return{bytesValue:tT(a.serializer,i._byteString)};if(i instanceof xt){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fp(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof ts)return(function(u,p){return{mapValue:{fields:{[Nx]:{stringValue:Cx},[_h]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw p.Sc("VectorValues must only contain numeric values.");return zp(p.serializer,m)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${qh(i)}`)})(r,e)}function MT(r,e){const t={};return wx(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(r,((i,a)=>{const l=qa(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function jT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof es||r instanceof Un||r instanceof xt||r instanceof cu||r instanceof ts)}function fy(r,e,t){if(!jT(t)||!Ex(t)){const i=qh(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function cp(r,e,t){if((e=yt(e))instanceof za)return e._internalPath;if(typeof e=="string")return my(r,e);throw Rh("Field path arguments must be of type string or ",r,!1,void 0,t)}const PD=new RegExp("[~\\*/\\[\\]]");function my(r,e,t){if(e.search(PD)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new za(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Rh(r,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${i}`),u&&(f+=` in document ${a}`),f+=")"),new de(Z.INVALID_ARGUMENT,p+r+f)}function VT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(af("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UD extends $c{data(){return super.data()}}function af(r,e){return typeof e=="string"?my(r,e):e instanceof za?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gy{}class of extends gy{}function mt(r,e,...t){let i=[];e instanceof gy&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((f=>f instanceof py)).length,p=l.filter((f=>f instanceof lf)).length;if(u>1||u>0&&p>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class lf extends of{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lf(e,t,i)}_apply(e){const t=this._parse(e);return UT(e._query,t),new is(e.firestore,e.converter,ep(e._query,t))}_parse(e){const t=Ba(e.firestore);return(function(l,u,p,f,m,v,_){let b;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Gb(_,v);const D=[];for(const M of _)D.push(Hb(f,l,M));b={arrayValue:{values:D}}}else b=Hb(f,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Gb(_,v),b=OT(p,u,_,v==="in"||v==="not-in");return qt.create(m,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ke(r,e,t){const i=e,a=af("where",r);return lf._create(a,i,t)}class py extends gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new py(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const p=l.getFlattenedFilters();for(const f of p)UT(u,f),u=ep(u,f)})(e._query,t),new is(e.firestore,e.converter,ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yy extends of{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yy(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gc(l,u)})(e._query,this._field,this._direction);return new is(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new La(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Go(r,e="asc"){const t=e,i=af("orderBy",r);return yy._create(i,t)}class vy extends of{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new vy(e,t,i)}_apply(e){return new is(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}}function Ea(r){return GR("limit",r),vy._create("limit",r,"F")}class _y extends of{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new _y(e,t,i)}_apply(e){const t=zD(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,(function(a,l){return new La(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function PT(...r){return _y._create("startAfter",r,!1)}function zD(r,e,t,i){if(t[0]=yt(t[0]),t[0]instanceof $c)return(function(l,u,p,f,m){if(!f)throw new de(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const v=[];for(const _ of Fo(l))if(_.field.isKeyField())v.push(Eh(u,f.key));else{const b=f.data.field(_.field);if(Hh(b))throw new de(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const T=_.field.canonicalString();throw new de(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}v.push(b)}return new Wo(v,m)})(r._query,r.firestore._databaseId,e,t[0]._document,i);{const a=Ba(r.firestore);return(function(u,p,f,m,v,_){const b=u.explicitOrderBy;if(v.length>b.length)throw new de(Z.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let D=0;D<v.length;D++){const M=v[D];if(b[D].field.isKeyField()){if(typeof M!="string")throw new de(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof M}`);if(!Up(u)&&M.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${M}' contains a slash.`);const k=u.path.child(rt.fromString(M));if(!Ee.isDocumentKey(k))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const F=new Ee(k);T.push(Eh(p,F))}else{const k=OT(f,m,M);T.push(k)}}return new Wo(T,_)})(r._query,r.firestore._databaseId,a,e,t,i)}}function Hb(r,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Up(e)&&t.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(rt.fromString(t));if(!Ee.isDocumentKey(i))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Eh(r,new Ee(i))}if(t instanceof xt)return Eh(r,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function Gb(r,e){if(!Array.isArray(r)||r.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UT(r,e){const t=(function(a,l){for(const u of a)for(const p of u.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zT{convertValue(e,t="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Pi(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[_h].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>kt(u.doubleValue)));return new ts(t)}convertGeoPoint(e){return new es(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Gh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const t=Di(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);Qe(lT(i),9688,{name:e});const a=new Fc(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return a.isEqual(t)||Vs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class BD extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}class Uo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ci extends $c{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(af("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ci._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ci._jsonSchema={type:Ht("string",Ci._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class ah extends Ci{data(e={}){return super.data(e)}}class Ta{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Uo(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ah(this._firestore,this._userDataWriter,i.key,i,new Uo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((p=>{const f=new ah(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Uo(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const f=new ah(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Uo(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,v=-1;return p.type!==0&&(m=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),v=u.indexOf(p.doc.key)),{type:qD(p.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(r){r=mn(r,xt);const e=mn(r.firestore,Tr);return CD(pl(e),r._key).then((t=>qT(e,r,t)))}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:Ht("string",Ta._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class uf extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function gt(r){r=mn(r,is);const e=mn(r.firestore,Tr),t=pl(e),i=new uf(e);return LT(r._query),RD(t,r._query).then((a=>new Ta(e,i,r,a)))}function BT(r,e,t){r=mn(r,xt);const i=mn(r.firestore,Tr),a=cf(r.converter,e,t);return uu(i,[rf(Ba(i),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Ft.none())])}function sl(r,e,t,...i){r=mn(r,xt);const a=mn(r.firestore,Tr),l=Ba(a);let u;return u=typeof(e=yt(e))=="string"||e instanceof za?hy(l,"updateDoc",r._key,e,t,i):dy(l,"updateDoc",r._key,e),uu(a,[u.toMutation(r._key,Ft.exists(!0))])}function FD(r){return uu(mn(r.firestore,Tr),[new iu(r._key,Ft.none())])}function up(r,e){const t=mn(r.firestore,Tr),i=Be(r),a=cf(r.converter,e);return uu(t,[rf(Ba(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,Ft.exists(!1))]).then((()=>i))}function HD(r,...e){var f,m,v;r=yt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Fb(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Fb(e[i])){const _=e[i];e[i]=(f=_.next)==null?void 0:f.bind(_),e[i+1]=(m=_.error)==null?void 0:m.bind(_),e[i+2]=(v=_.complete)==null?void 0:v.bind(_)}let l,u,p;if(r instanceof xt)u=mn(r.firestore,Tr),p=$h(r._key.path),l={next:_=>{e[i]&&e[i](qT(u,r,_))},error:e[i+1],complete:e[i+2]};else{const _=mn(r,is);u=mn(_.firestore,Tr),p=_._query;const b=new uf(u);l={next:T=>{e[i]&&e[i](new Ta(u,b,_,T))},error:e[i+1],complete:e[i+2]},LT(r._query)}return(function(b,T,D,M){const k=new oy(M),F=new sy(T,k,D);return b.asyncQueue.enqueueAndForget((async()=>ty(await Ch(b),F))),()=>{k.Nu(),b.asyncQueue.enqueueAndForget((async()=>ny(await Ch(b),F)))}})(pl(u),p,a,l)}function uu(r,e){return(function(i,a){const l=new Wr;return i.asyncQueue.enqueueAndForget((async()=>mD(await ID(i),a,l))),l.promise})(pl(r),e)}function qT(r,e,t){const i=t.docs.get(e._key),a=new uf(r);return new Ci(r,a,e._key,i,new Uo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ba(e)}set(e,t,i){this._verifyNotCommitted();const a=Ti(e,this._firestore),l=cf(a.converter,t,i),u=rf(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(u.toMutation(a._key,Ft.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Ti(e,this._firestore);let u;return u=typeof(t=yt(t))=="string"||t instanceof za?hy(this._dataReader,"WriteBatch.update",l._key,t,i,a):dy(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ti(e,this._firestore);return this._mutations=this._mutations.concat(new iu(t._key,Ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ti(r,e){if((r=yt(r)).firestore!==e)throw new de(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ba(e)}get(e){const t=Ti(e,this._firestore),i=new BD(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return xe(24041);const l=a[0];if(l.isFoundDocument())return new $c(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new $c(this._firestore,i,t._key,null,t.converter);throw xe(18433,{doc:l})}))}set(e,t,i){const a=Ti(e,this._firestore),l=cf(a.converter,t,i),u=rf(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,u),this}update(e,t,i,...a){const l=Ti(e,this._firestore);let u;return u=typeof(t=yt(t))=="string"||t instanceof za?hy(this._dataReader,"Transaction.update",l._key,t,i,a):dy(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Ti(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD extends KD{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ti(e,this._firestore),i=new uf(this._firestore);return super.get(e).then((a=>new Ci(this._firestore,i,t._key,a._document,new Uo(!1,!1),t.converter)))}}function $o(r,e,t){r=mn(r,Tr);const i={...GD,...t};return(function(l){if(l.maxAttempts<1)throw new de(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,u,p){const f=new Wr;return l.asyncQueue.enqueueAndForget((async()=>{const m=await ND(l);new TD(l.asyncQueue,m,p,u,f).ju()})),f.promise})(pl(r),(a=>e(new QD(r,a))),i)}function FT(...r){return new cy("arrayUnion",r)}function Ey(...r){return new uy("arrayRemove",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(r){return pl(r=mn(r,Tr)),new $D(r,(e=>uu(r,e)))}(function(e,t=!0){(function(a){hl=a})(ul),ns(new wr("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),p=new Tr(new VR(i.getProvider("auth-internal")),new UR(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(m.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),sr(YE,XE,e),sr(YE,XE,"esm2020")})();const HT="@firebase/installations",by="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=1e4,$T=`w:${by}`,KT="FIS_v2",YD="https://firebaseinstallations.googleapis.com/v1",XD=3600*1e3,JD="installations",WD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ca=new Ma(JD,WD,ZD);function QT(r){return r instanceof ss&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT({projectId:r}){return`${YD}/projects/${r}/installations`}function XT(r){return{token:r.token,requestStatus:2,expiresIn:t3(r.expiresIn),creationTime:Date.now()}}async function JT(r,e){const i=(await e.json()).error;return Ca.create("request-failed",{requestName:r,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function WT({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function e3(r,{refreshToken:e}){const t=WT(r);return t.append("Authorization",n3(e)),t}async function ZT(r){const e=await r();return e.status>=500&&e.status<600?r():e}function t3(r){return Number(r.replace("s","000"))}function n3(r){return`${KT} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const i=YT(r),a=WT(r),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={fid:t,authVersion:KT,appId:r.appId,sdkVersion:$T},p={method:"POST",headers:a,body:JSON.stringify(u)},f=await ZT(()=>fetch(i,p));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:XT(m.authToken)}}else throw await JT("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=/^[cdef][\w-]{21}$/,dp="";function a3(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=o3(r);return i3.test(t)?t:dp}catch{return dp}}function o3(r){return s3(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new Map;function n1(r,e){const t=df(r);r1(t,e),l3(t,e)}function r1(r,e){const t=t1.get(r);if(t)for(const i of t)i(e)}function l3(r,e){const t=c3();t&&t.postMessage({key:r,fid:e}),u3()}let ba=null;function c3(){return!ba&&"BroadcastChannel"in self&&(ba=new BroadcastChannel("[Firebase] FID Change"),ba.onmessage=r=>{r1(r.data.key,r.data.fid)}),ba}function u3(){t1.size===0&&ba&&(ba.close(),ba=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="firebase-installations-database",h3=1,Ra="firebase-installations-store";let Dg=null;function wy(){return Dg||(Dg=Lh(d3,h3,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Ra)}}})),Dg}async function kh(r,e){const t=df(r),a=(await wy()).transaction(Ra,"readwrite"),l=a.objectStore(Ra),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&n1(r,e.fid),e}async function s1(r){const e=df(r),i=(await wy()).transaction(Ra,"readwrite");await i.objectStore(Ra).delete(e),await i.done}async function hf(r,e){const t=df(r),a=(await wy()).transaction(Ra,"readwrite"),l=a.objectStore(Ra),u=await l.get(t),p=e(u);return p===void 0?await l.delete(t):await l.put(p,t),await a.done,p&&(!u||u.fid!==p.fid)&&n1(r,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xy(r){let e;const t=await hf(r.appConfig,i=>{const a=f3(i),l=m3(r,a);return e=l.registrationPromise,l.installationEntry});return t.fid===dp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function f3(r){const e=r||{fid:a3(),registrationStatus:0};return i1(e)}function m3(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ca.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=g3(r,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:p3(r)}:{installationEntry:e}}async function g3(r,e){try{const t=await r3(r,e);return kh(r.appConfig,t)}catch(t){throw QT(t)&&t.customData.serverCode===409?await s1(r.appConfig):await kh(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function p3(r){let e=await $b(r.appConfig);for(;e.registrationStatus===1;)await e1(100),e=await $b(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await xy(r);return i||t}return e}function $b(r){return hf(r,e=>{if(!e)throw Ca.create("installation-not-found");return i1(e)})}function i1(r){return y3(r)?{fid:r.fid,registrationStatus:0}:r}function y3(r){return r.registrationStatus===1&&r.registrationTime+GT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v3({appConfig:r,heartbeatServiceProvider:e},t){const i=_3(r,t),a=e3(r,t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={installation:{sdkVersion:$T,appId:r.appId}},p={method:"POST",headers:a,body:JSON.stringify(u)},f=await ZT(()=>fetch(i,p));if(f.ok){const m=await f.json();return XT(m)}else throw await JT("Generate Auth Token",f)}function _3(r,{fid:e}){return`${YT(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(r,e=!1){let t;const i=await hf(r.appConfig,l=>{if(!a1(l))throw Ca.create("not-registered");const u=l.authToken;if(!e&&w3(u))return l;if(u.requestStatus===1)return t=E3(r,e),l;{if(!navigator.onLine)throw Ca.create("app-offline");const p=T3(l);return t=b3(r,p),p}});return t?await t:i.authToken}async function E3(r,e){let t=await Kb(r.appConfig);for(;t.authToken.requestStatus===1;)await e1(100),t=await Kb(r.appConfig);const i=t.authToken;return i.requestStatus===0?Ty(r,e):i}function Kb(r){return hf(r,e=>{if(!a1(e))throw Ca.create("not-registered");const t=e.authToken;return S3(t)?{...e,authToken:{requestStatus:0}}:e})}async function b3(r,e){try{const t=await v3(r,e),i={...e,authToken:t};return await kh(r.appConfig,i),t}catch(t){if(QT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await s1(r.appConfig);else{const i={...e,authToken:{requestStatus:0}};await kh(r.appConfig,i)}throw t}}function a1(r){return r!==void 0&&r.registrationStatus===2}function w3(r){return r.requestStatus===2&&!x3(r)}function x3(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+XD}function T3(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function S3(r){return r.requestStatus===1&&r.requestTime+GT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(r){const e=r,{installationEntry:t,registrationPromise:i}=await xy(e);return i?i.catch(console.error):Ty(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(r,e=!1){const t=r;return await N3(t),(await Ty(t,e)).token}async function N3(r){const{registrationPromise:e}=await xy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(r){if(!r||!r.options)throw Og("App Configuration");if(!r.name)throw Og("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Og(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Og(r){return Ca.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="installations",R3="installations-internal",k3=r=>{const e=r.getProvider("app").getImmediate(),t=C3(e),i=cl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},D3=r=>{const e=r.getProvider("app").getImmediate(),t=cl(e,o1).getImmediate();return{getId:()=>A3(t),getToken:a=>I3(t,a)}};function O3(){ns(new wr(o1,k3,"PUBLIC")),ns(new wr(R3,D3,"PRIVATE"))}O3();sr(HT,by);sr(HT,by,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="/firebase-messaging-sw.js",j3="/firebase-cloud-messaging-push-scope",l1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",V3="https://fcmregistrations.googleapis.com/v1",c1="google.c.a.c_id",L3="google.c.a.c_l",P3="google.c.a.ts",U3="google.c.a.e",Qb=1e4;var Yb;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Yb||(Yb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Qc;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(Qc||(Qc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function z3(r){const e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),a=new Uint8Array(i.length);for(let l=0;l<i.length;++l)a[l]=i.charCodeAt(l);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="fcm_token_details_db",B3=5,Xb="fcm_token_object_Store";async function q3(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(Mg))return null;let e=null;return(await Lh(Mg,B3,{upgrade:async(i,a,l,u)=>{if(a<2||!i.objectStoreNames.contains(Xb))return;const p=u.objectStore(Xb),f=await p.index("fcmSenderId").get(r);if(await p.clear(),!!f){if(a===2){const m=f;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:m.createTime??Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:As(m.vapidKey)}}}else if(a===3){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:As(m.auth),p256dh:As(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:As(m.vapidKey)}}}else if(a===4){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:As(m.auth),p256dh:As(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:As(m.vapidKey)}}}}}})).close(),await xg(Mg),await xg("fcm_vapid_details_db"),await xg("undefined"),F3(e)?e:null}function F3(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="firebase-messaging-database",G3=1,Yc="firebase-messaging-store";let jg=null;function u1(){return jg||(jg=Lh(H3,G3,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Yc)}}})),jg}async function $3(r){const e=d1(r),i=await(await u1()).transaction(Yc).objectStore(Yc).get(e);if(i)return i;{const a=await q3(r.appConfig.senderId);if(a)return await Sy(r,a),a}}async function Sy(r,e){const t=d1(r),a=(await u1()).transaction(Yc,"readwrite");return await a.objectStore(Yc).put(e,t),await a.done,e}function d1({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},En=new Ma("messaging","Messaging",K3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(r,e){const t=await Iy(r),i=h1(e),a={method:"POST",headers:t,body:JSON.stringify(i)};let l;try{l=await(await fetch(Ay(r.appConfig),a)).json()}catch(u){throw En.create("token-subscribe-failed",{errorInfo:u==null?void 0:u.toString()})}if(l.error){const u=l.error.message;throw En.create("token-subscribe-failed",{errorInfo:u})}if(!l.token)throw En.create("token-subscribe-no-token");return l.token}async function Y3(r,e){const t=await Iy(r),i=h1(e.subscriptionOptions),a={method:"PATCH",headers:t,body:JSON.stringify(i)};let l;try{l=await(await fetch(`${Ay(r.appConfig)}/${e.token}`,a)).json()}catch(u){throw En.create("token-update-failed",{errorInfo:u==null?void 0:u.toString()})}if(l.error){const u=l.error.message;throw En.create("token-update-failed",{errorInfo:u})}if(!l.token)throw En.create("token-update-no-token");return l.token}async function X3(r,e){const i={method:"DELETE",headers:await Iy(r)};try{const l=await(await fetch(`${Ay(r.appConfig)}/${e}`,i)).json();if(l.error){const u=l.error.message;throw En.create("token-unsubscribe-failed",{errorInfo:u})}}catch(a){throw En.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function Ay({projectId:r}){return`${V3}/projects/${r}/registrations`}async function Iy({appConfig:r,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function h1({p256dh:r,auth:e,endpoint:t,vapidKey:i}){const a={web:{endpoint:t,auth:e,p256dh:r}};return i!==l1&&(a.web.applicationPubKey=i),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=10080*60*1e3;async function W3(r){const e=await eO(r.swRegistration,r.vapidKey),t={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:As(e.getKey("auth")),p256dh:As(e.getKey("p256dh"))},i=await $3(r.firebaseDependencies);if(i){if(tO(i.subscriptionOptions,t))return Date.now()>=i.createTime+J3?Z3(r,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await X3(r.firebaseDependencies,i.token)}catch(a){console.warn(a)}return Jb(r.firebaseDependencies,t)}else return Jb(r.firebaseDependencies,t)}async function Z3(r,e){try{const t=await Y3(r.firebaseDependencies,e),i={...e,token:t,createTime:Date.now()};return await Sy(r.firebaseDependencies,i),t}catch(t){throw t}}async function Jb(r,e){const i={token:await Q3(r,e),createTime:Date.now(),subscriptionOptions:e};return await Sy(r,i),i.token}async function eO(r,e){const t=await r.pushManager.getSubscription();return t||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:z3(e)})}function tO(r,e){const t=e.vapidKey===r.vapidKey,i=e.endpoint===r.endpoint,a=e.auth===r.auth,l=e.p256dh===r.p256dh;return t&&i&&a&&l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return nO(e,r),rO(e,r),sO(e,r),e}function nO(r,e){if(!e.notification)return;r.notification={};const t=e.notification.title;t&&(r.notification.title=t);const i=e.notification.body;i&&(r.notification.body=i);const a=e.notification.image;a&&(r.notification.image=a);const l=e.notification.icon;l&&(r.notification.icon=l)}function rO(r,e){e.data&&(r.data=e.data)}function sO(r,e){var a,l,u,p;if(!e.fcmOptions&&!((a=e.notification)!=null&&a.click_action))return;r.fcmOptions={};const t=((l=e.fcmOptions)==null?void 0:l.link)??((u=e.notification)==null?void 0:u.click_action);t&&(r.fcmOptions.link=t);const i=(p=e.fcmOptions)==null?void 0:p.analytics_label;i&&(r.fcmOptions.analyticsLabel=i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(r){return typeof r=="object"&&!!r&&c1 in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(r){if(!r||!r.options)throw Vg("App Configuration Object");if(!r.name)throw Vg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=r;for(const i of e)if(!t[i])throw Vg(i);return{appName:r.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Vg(r){return En.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=aO(e);this.firebaseDependencies={app:e,appConfig:a,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(r){try{r.swRegistration=await navigator.serviceWorker.register(M3,{scope:j3}),r.swRegistration.update().catch(()=>{}),await cO(r.swRegistration)}catch(e){throw En.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function cO(r){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${Qb} ms`)),Qb),a=r.installing||r.waiting;r.active?(clearTimeout(i),e()):a?a.onstatechange=l=>{var u;((u=l.target)==null?void 0:u.state)==="activated"&&(a.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(r,e){if(!e&&!r.swRegistration&&await lO(r),!(!e&&r.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");r.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=l1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(r,e){if(!navigator)throw En.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw En.create("permission-blocked");return await dO(r,e==null?void 0:e.vapidKey),await uO(r,e==null?void 0:e.serviceWorkerRegistration),W3(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(r,e,t){const i=mO(e);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[c1],message_name:t[L3],message_time:t[P3],message_device_time:Math.floor(Date.now()/1e3)})}function mO(r){switch(r){case Qc.NOTIFICATION_CLICKED:return"notification_open";case Qc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(r,e){const t=e.data;if(!t.isFirebaseMessaging)return;r.onMessageHandler&&t.messageType===Qc.PUSH_RECEIVED&&(typeof r.onMessageHandler=="function"?r.onMessageHandler(Wb(t)):r.onMessageHandler.next(Wb(t)));const i=t.data;iO(i)&&i[U3]==="1"&&await fO(r,t.messageType,i)}const Zb="@firebase/messaging",ew="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=r=>{const e=new oO(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>gO(e,t)),e},yO=r=>{const e=r.getProvider("messaging").getImmediate();return{getToken:i=>hO(e,i)}};function vO(){ns(new wr("messaging",pO,"PUBLIC")),ns(new wr("messaging-internal",yO,"PRIVATE")),sr(Zb,ew),sr(Zb,ew,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(){try{await Nw()}catch{return!1}return typeof window<"u"&&Iw()&&nI()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(r=wp()){return _O().then(e=>{if(!e)throw En.create("unsupported-browser")},e=>{throw En.create("indexed-db-unsupported")}),cl(yt(r),"messaging").getImmediate()}vO();const Mo=xa.firebase;let Kd,bt,re,bO;const wO=r=>r&&r.apiKey&&r.projectId&&r.appId,xO=async()=>{try{if(xa.useFirebase&&wO(Mo)){if(Kd=kw(Mo),bt=DR(Kd),re=DD(Kd),typeof window<"u"&&"serviceWorker"in navigator)try{const r=`/firebase-messaging-sw.js?apiKey=${Mo.apiKey}&projectId=${Mo.projectId}&messagingSenderId=${Mo.messagingSenderId}&appId=${Mo.appId}`,e=await navigator.serviceWorker.register(r);bO=EO(Kd),console.log("Firebase Messaging initialized with SW.")}catch(r){console.warn("Failed to initialize Firebase Messaging or SW:",r)}console.log("Firebase initialized successfully.")}else xa.useFirebase?console.warn("Firebase `useFirebase` is true, but config keys are missing. Please check your .env.local file. Skipping Firebase Init."):console.log("`useFirebase` is false. Skipping Firebase Init.")}catch(r){console.error("Error initializing Firebase:",r)}};xO();class TO{mapAuthError(e){switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos.";case"auth/email-already-in-use":return"Este e-mail j est em uso.";case"auth/weak-password":return"A senha  muito fraca.";case"auth/invalid-email":return"E-mail invlido.";case"auth/popup-closed-by-user":return"Login cancelado.";default:return"Erro na autenticao. Tente novamente."}}async login(e,t){if(!bt)throw new Error("Servio de autenticao no inicializado.");if(!t)throw new Error("A senha  obrigatria.");try{await PE(bt,gh);const i=await yC(bt,e,t);return this._fetchUserProfile(i.user)}catch(i){throw console.error("Erro no Login Firebase:",i),new Error(this.mapAuthError(i.code))}}async loginWithGoogle(){if(!bt)throw new Error("Servio de autenticao no inicializado.");try{await PE(bt,gh);const e=new Is;await BC(bt,e)}catch(e){throw console.error("Erro ao iniciar Login com Google:",e),new Error(this.mapAuthError(e.code))}}async logout(){bt&&await bC(bt)}async _fetchUserProfile(e){if(!re)throw new Error("Banco de dados no inicializado.");const t=Be(re,"users",e.uid);let i;try{i=await rl(t)}catch(a){if(a.code==="permission-denied")return{uid:e.uid,email:e.email||"",role:Kt.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(i.exists()){const a=i.data();return{uid:e.uid,email:e.email||"",name:a.name||e.displayName,role:a.role||Kt.USER,rm:a.rm,courseId:a.courseId,classId:a.classId,isOnboarded:a.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:Kt.USER,isOnboarded:!1}}onAuthStateChanged(e){return bt?EC(bt,async t=>{if(t)try{const i=await this._fetchUserProfile(t);e(i)}catch{e({uid:t.uid,email:t.email||"",role:Kt.USER,isOnboarded:!1})}else e(null)}):(e(null),()=>{})}async updateUserProfile(e,t){if(!re)throw new Error("Banco de dados no inicializado.");if(t.rm)try{const l=Ze(re,"users"),u=mt(l,Ke("rm","==",t.rm));if((await gt(u)).docs.find(m=>m.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(l){if(l.code!=="permission-denied")throw l}const i=Be(re,"users",e),a={...t,updatedAt:new Date().toISOString()};return t.name&&t.rm&&(a.isOnboarded=!0),await BT(i,a,{merge:!0}),{...t,uid:e,email:"",role:Kt.USER,isOnboarded:!0}}async getUserProfile(e){if(!re)throw new Error("Servio no inicializado.");try{const t=Be(re,"users",e),i=await rl(t);if(i.exists()){const a=i.data();return{uid:e,email:a.email||"",name:a.name||"Usurio",role:a.role||Kt.USER,rm:a.rm,courseId:a.courseId,classId:a.classId,isOnboarded:a.isOnboarded}}}catch{console.warn(`Could not fetch profile for ${e}`)}return bt&&bt.currentUser&&bt.currentUser.uid===e?this._fetchUserProfile(bt.currentUser):null}}class Ny{async getEvents(e){if(!re)return{data:[],nextCursor:void 0};const{limit:t,cursor:i,filters:a}=e,{searchTerm:l,visibility:u,course:p}=a,f=l?50:t;try{const m=[Go("createdAt","desc")];u&&m.push(Ke("visibility","==",u)),p&&u==="course"&&m.push(Ke("allowedCourses","array-contains",p)),i&&m.push(PT(i)),m.push(Ea(f));const v=mt(Ze(re,"events"),...m),_=await gt(v),D=_.docs.map(k=>({id:k.id,...k.data()})).filter(k=>{const F=l?k.name.toLowerCase().includes(l.toLowerCase())||k.description.toLowerCase().includes(l.toLowerCase()):!0;let K=!0;return u==="class"&&p&&(K=k.allowedClasses&&k.allowedClasses.length>0),F&&K}).slice(0,t),M=_.docs.length===f?_.docs[_.docs.length-1]:void 0;return{data:D,nextCursor:M}}catch(m){return console.error("Erro ao buscar eventos:",m),{data:[],nextCursor:void 0}}}async getEventById(e){if(!re)return;const t=Be(re,"events",e),i=await rl(t);return i.exists()?{id:i.id,...i.data()}:void 0}async getEventsByIds(e){if(!re||e.length===0)return[];const t=30,i=[];for(let a=0;a<e.length;a+=t){const l=e.slice(a,a+t),u=mt(Ze(re,"events"),Ke(MD(),"in",l)),p=await gt(u);i.push(...p.docs.map(f=>({id:f.id,...f.data()})))}return i}async getEventsByParentId(e){if(!re)return[];const t=mt(Ze(re,"events"),Ke("parentId","==",e));return(await gt(t)).docs.map(a=>({id:a.id,...a.data()}))}async getAvailableEventsForUser(e){if(!re)return[];const t=50;try{const i=mt(Ze(re,"events"),Ke("visibility","==","public"),Go("createdAt","desc"),Ea(t));let a=null;e.courseId&&(a=mt(Ze(re,"events"),Ke("visibility","==","course"),Ke("allowedCourses","array-contains",e.courseId),Ea(t)));const l=[gt(i)];a&&l.push(gt(a));const u=await Promise.all(l);let p=[];return u.forEach(m=>{m.docs.forEach(v=>p.push({id:v.id,...v.data()}))}),Array.from(new Map(p.map(m=>[m.id,m])).values()).sort((m,v)=>v.createdAt.localeCompare(m.createdAt))}catch(i){return console.error("Erro ao buscar eventos do usurio:",i),[]}}async getPublicEvents(){if(!re)return[];const e=mt(Ze(re,"events"),Ke("visibility","==","public"),Go("createdAt","desc"),Ea(10));return(await gt(e)).docs.map(i=>({id:i.id,...i.data()}))}async createEvent(e){if(!re)return;const{id:t,...i}=e;await BT(Be(re,"events",t),JSON.parse(JSON.stringify(i)))}async updateEvent(e){if(!re)return;const{id:t,...i}=e;await sl(Be(re,"events",t),JSON.parse(JSON.stringify(i)))}async deleteEvent(e){if(!re)return;const t=Kc(re),i=[e],a=mt(Ze(re,"events"),Ke("parentId","==",e));(await gt(a)).forEach(f=>i.push(f.id));const u=[],p=[];for(let f=0;f<i.length;f+=10)p.push(i.slice(f,f+10));for(const f of p){const m=mt(Ze(re,"enrollments"),Ke("eventId","in",f));(await gt(m)).forEach(T=>u.push(T.ref));const _=mt(Ze(re,"teams"),Ke("eventId","in",f));(await gt(_)).forEach(T=>t.delete(T.ref))}i.forEach(f=>t.delete(Be(re,"events",f))),u.forEach(f=>t.delete(f)),await t.commit()}}class Cy{async getNotifications(e){if(!re)return[];const t=mt(Ze(re,"notifications"),Ke("userId","==",e),Go("createdAt","desc"),Ea(20));return(await gt(t)).docs.map(a=>({id:a.id,...a.data()}))}subscribeToNotifications(e,t){if(!re)return()=>{};const i=mt(Ze(re,"notifications"),Ke("userId","==",e),Go("createdAt","desc"),Ea(20));return HD(i,l=>{const u=l.docs.map(p=>({id:p.id,...p.data()}));t(u)})}async markNotificationAsRead(e){re&&await sl(Be(re,"notifications",e),{read:!0})}async markAllNotificationsAsRead(e){if(!re)return;const t=mt(Ze(re,"notifications"),Ke("userId","==",e),Ke("read","==",!1)),i=await gt(t),a=Kc(re);i.forEach(l=>a.update(l.ref,{read:!0})),await a.commit()}async createNotification(e){re&&await up(Ze(re,"notifications"),e)}async saveDeviceToken(e,t){if(!re)return;const i=Be(re,"users",e);await sl(i,{pushTokens:FT(t)})}}class f1{constructor(){this.notificationService=new Cy,this.eventService=new Ny}async getEnrollmentsForUser(e){if(!re)return[];try{const t=mt(Ze(re,"enrollments"),Ke("userId","==",e));return(await gt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.status!==Zt.CANCELED)}catch(t){return console.error(t),[]}}async getUserEnrollmentsDetails(e){if(!re)return[];try{const t=mt(Ze(re,"enrollments"),Ke("userId","==",e),Ke("status","==",Zt.CONFIRMED)),a=(await gt(t)).docs.map(f=>({id:f.id,...f.data()}));if(a.length===0)return[];const l=Array.from(new Set(a.map(f=>f.eventId))),u=await this.eventService.getEventsByIds(l),p=new Map(u.map(f=>[f.id,f]));return a.map(f=>{const m=p.get(f.eventId);if(!m)return null;const v=m.sessions.find(_=>_.id===f.sessionId);return v?{enrollmentId:f.id,eventName:m.name,eventLocation:m.location,sessionDate:v.date,sessionTime:`${v.startTime} - ${v.endTime}`,enrolledAt:f.enrolledAt}:null}).filter(Boolean)}catch{return[]}}async getEnrichedEnrollments(e){if(!re)return[];const t=mt(Ze(re,"enrollments"),Ke("eventId","==",e),Ke("status","==",Zt.CONFIRMED)),a=(await gt(t)).docs.map(m=>({id:m.id,...m.data()})),l=a.map(m=>rl(Be(re,"users",m.userId))),p=(await Promise.all(l)).map(m=>m.exists()?{uid:m.id,...m.data()}:null),f=await this.eventService.getEventById(e);return a.map((m,v)=>{const _=p[v],b=f==null?void 0:f.sessions.find(T=>T.id===m.sessionId);return{id:m.id,user:{uid:(_==null?void 0:_.uid)||m.userId,name:(_==null?void 0:_.name)||"Desconhecido",email:(_==null?void 0:_.email)||"",rm:(_==null?void 0:_.rm)||"",courseId:_==null?void 0:_.courseId,classId:_==null?void 0:_.classId},session:{id:b==null?void 0:b.id,date:b==null?void 0:b.date,startTime:b==null?void 0:b.startTime,endTime:b==null?void 0:b.endTime},status:m.status,enrolledAt:m.enrolledAt,teamId:m.teamId,attended:m.attended}})}async getEnrollmentDetailsForEvent(e){return(await this.getEnrichedEnrollments(e)).map(i=>({Nome:i.user.name,Email:i.user.email,RM:i.user.rm,SessaoData:br(i.session.date),SessaoHora:`${i.session.startTime}`,Status:i.status,DataInscricao:new Date(i.enrolledAt).toLocaleString("pt-BR"),Presenca:i.attended?"Sim":"No"}))}async validateTimeConflict(e,t,i){if(!re)return;const a=await this.eventService.getEventById(t);if(!a)throw new Error("Evento no encontrado");const l=a.sessions.find(f=>f.id===i);if(!l)throw new Error("Sesso no encontrada");const u=await this.getEnrollmentsForUser(e),p=[...new Set(u.map(f=>f.eventId))];if(p.length>0){const f=await this.eventService.getEventsByIds(p);for(const m of u){if(m.eventId===t&&m.sessionId===i)continue;const v=f.find(b=>b.id===m.eventId),_=v==null?void 0:v.sessions.find(b=>b.id===m.sessionId);if(v&&_&&_.date===l.date){const b=wi(l.startTime),T=wi(l.endTime),D=wi(_.startTime),M=wi(_.endTime);if(b<M&&D<T)throw new Error(`CONFLICT|${v.name}|${_.startTime}|${_.endTime}`)}}}}async createEnrollment(e,t,i,a=!1){if(!re)throw new Error("DB not init");const l=mt(Ze(re,"enrollments"),Ke("userId","==",e),Ke("eventId","==",t),Ke("status","==",Zt.CONFIRMED));if(!(await gt(l)).empty)throw new Error("Voc j est inscrito neste evento");await this.validateTimeConflict(e,t,i);const p=`enr_${Date.now()}_${e}`,f={id:p,userId:e,eventId:t,sessionId:i,status:Zt.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1};return await $o(re,async m=>{const v=Be(re,"events",t),_=await m.get(v);if(!_.exists())throw new Error("Evento no encontrado");const b=_.data(),T=b.sessions.findIndex(M=>M.id===i);if(T===-1)throw new Error("Sesso no encontrada");if(!a){if(b.sessions[T].filled>=b.sessions[T].capacity)throw new Error("A sesso est lotada");const M=[...b.sessions];M[T].filled+=1,m.update(v,{sessions:M})}const D=Be(re,"enrollments",p);m.set(D,f)}),f}async cancelEnrollment(e){if(!re||!bt||!bt.currentUser)return;const t=bt.currentUser.uid;let i=null,a="um evento";await $o(re,async l=>{const u=Be(re,"enrollments",e),p=await l.get(u);if(!p.exists())throw new Error("Inscrio no encontrada");i=p.data();let f=!0;if(i.teamId){const _=Be(re,"teams",i.teamId),b=await l.get(_);b.exists()&&(b.data().captainId===i.userId?(l.delete(_),f=!0):(l.update(_,{members:Ey(i.userId)}),f=!1))}const m=Be(re,"events",i.eventId),v=await l.get(m);if(v.exists()){const _=v.data();if(a=_.name,f){const b=_.sessions.findIndex(T=>T.id===i.sessionId);if(b!==-1){const T=[..._.sessions];T[b].filled=Math.max(0,T[b].filled-1),l.update(m,{sessions:T})}}}l.delete(u)}),i&&i.userId!==t&&this.notificationService.createNotification({userId:i.userId,title:"Inscrio Cancelada ",message:`Sua inscrio no evento "${a}" foi cancelada pela administrao.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}async markAttendance(e){if(!re)throw new Error("Database not initialized");return await $o(re,async t=>{const i=Be(re,"enrollments",e),a=await t.get(i);if(!a.exists())throw new Error("Inscrio invlida ou no encontrada.");const l=a.data();if(l.attended)throw new Error("Check-in j realizado anteriormente.");const u=await t.get(Be(re,"users",l.userId)),p=await t.get(Be(re,"events",l.eventId));t.update(i,{attended:!0,checkInAt:new Date().toISOString()});const f=u.exists()?u.data():null,m=p.exists()?p.data():null;return{userName:(f==null?void 0:f.name)||"Aluno Desconhecido",eventName:(m==null?void 0:m.name)||"Evento"}})}}class SO{constructor(){this.notificationService=new Cy,this.enrollmentService=new f1}async getTeamsForEvent(e){if(!re)return[];const t=mt(Ze(re,"teams"),Ke("eventId","==",e));return(await gt(t)).docs.map(a=>({id:a.id,...a.data()}))}async createTeam(e,t,i){if(!re)throw new Error("DB not init");await this.enrollmentService.validateTimeConflict(i.uid,e,t);const a=Math.random().toString(36).substring(2,6).toUpperCase(),l=`Equipe #${Math.floor(Math.random()*1e3)}`,u=`team_${Date.now()}`,p={id:u,eventId:e,sessionId:t,name:l,code:a,captainId:i.uid,members:[i.uid],createdAt:new Date().toISOString()};return await $o(re,async f=>{const m=Be(re,"events",e),v=await f.get(m);if(!v.exists())throw new Error("Evento no encontrado.");const _=`${i.uid}_${e}`,b=Be(re,"enrollments",_),T=await f.get(b);if(T.exists()&&T.data().status===Zt.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");const D=v.data(),M=D.sessions.findIndex(K=>K.id===t);if(M===-1)throw new Error("Sesso invlida.");if(D.sessions[M].filled>=D.sessions[M].capacity)throw new Error("A sesso est lotada (limite de equipes atingido).");const k=[...D.sessions];k[M]={...k[M],filled:k[M].filled+1},f.update(m,{sessions:k}),f.set(b,{userId:i.uid,eventId:e,sessionId:t,teamId:u,status:Zt.CONFIRMED,enrolledAt:new Date().toISOString()});const F=Be(re,"teams",u);f.set(F,p)}),p}async joinTeam(e,t,i){if(!re)throw new Error("DB not init");const a=Be(re,"teams",e),l=await rl(a);if(!l.exists())throw new Error("Equipe no encontrada.");const u=l.data();await this.enrollmentService.validateTimeConflict(t.uid,u.eventId,u.sessionId),await $o(re,async p=>{const f=await p.get(a);if(!f.exists())throw new Error("Equipe no encontrada.");const m=f.data();if(m.code!==i)throw new Error("Cdigo da equipe invlido.");if(m.members.includes(t.uid))throw new Error("Voc j faz parte desta equipe.");const v=`${t.uid}_${m.eventId}`,_=Be(re,"enrollments",v),b=await p.get(_);if(b.exists()&&b.data().status===Zt.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");p.set(_,{userId:t.uid,eventId:m.eventId,sessionId:m.sessionId,teamId:e,status:Zt.CONFIRMED,enrolledAt:new Date().toISOString()}),p.update(a,{members:FT(t.uid)})}),rl(a).then(p=>{if(p.exists()){const f=p.data();f.captainId!==t.uid&&this.notificationService.createNotification({userId:f.captainId,title:"Novo membro na equipe! ",message:`${t.name||"Um usurio"} entrou na sua equipe ${f.name}.`,type:"success",createdAt:new Date().toISOString(),read:!1,link:`/event/${f.eventId}`})}})}async leaveTeam(e,t,i){if(!re)return;const a=Be(re,"teams",e);let l=null,u=!1,p=!1;if(await $o(re,async f=>{const m=await f.get(a);if(!m.exists())throw new Error("Equipe no encontrada.");l=m.data();const v=Be(re,"events",l.eventId),_=await f.get(v);if(l.captainId===t){u=!0;for(const b of l.members){const T=`${b}_${l.eventId}`,D=Be(re,"enrollments",T);f.delete(D)}if(_.exists()){const b=_.data(),T=b.sessions.findIndex(D=>D.id===l.sessionId);if(T!==-1){const D=[...b.sessions];D[T].filled=Math.max(0,D[T].filled-1),f.update(v,{sessions:D})}}f.delete(a)}else{i&&i!==t&&(p=!0),f.update(a,{members:Ey(t)});const b=`${t}_${l.eventId}`,T=Be(re,"enrollments",b);f.delete(T)}}),l){const f=l.name;u?l.members.filter(v=>v!==(l==null?void 0:l.captainId)).forEach(v=>{this.notificationService.createNotification({userId:v,title:"Equipe Desfeita ",message:`A equipe "${f}" foi desfeita pelo capito.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}):p?this.notificationService.createNotification({userId:t,title:"Removido da Equipe ",message:`Voc foi removido da equipe "${f}".`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"}):l.captainId!==t&&this.notificationService.createNotification({userId:l.captainId,title:"Membro Saiu ",message:`Um membro saiu da sua equipe "${f}".`,type:"info",read:!1,createdAt:new Date().toISOString(),link:`/event/${l.eventId}`})}}}class AO{constructor(){this.eventService=new Ny}async getUsers(e){if(!re)return{data:[],nextCursor:void 0};const{limit:t,cursor:i,filters:a}=e,{searchTerm:l,role:u,courseId:p,classId:f}=a,m=l?50:t;try{const v=[];u&&v.push(Ke("role","==",u)),p&&v.push(Ke("courseId","==",p)),f&&v.push(Ke("classId","==",f)),v.push(Go("name")),i&&v.push(PT(i)),v.push(Ea(m));const _=mt(Ze(re,"users"),...v),b=await gt(_);let T=b.docs.map(M=>({uid:M.id,...M.data()}));if(l){const M=l.toLowerCase();T=T.filter(k=>{var F,K;return((F=k.name)==null?void 0:F.toLowerCase().includes(M))||k.email.toLowerCase().includes(M)||((K=k.rm)==null?void 0:K.includes(M))})}const D=b.docs[b.docs.length-1];return{data:T,nextCursor:b.docs.length===m?D:void 0}}catch(v){return console.error("Erro ao buscar usurios:",v),{data:[],nextCursor:void 0}}}async deleteUser(e){if(!re)return;const t=mt(Ze(re,"enrollments"),Ke("userId","==",e)),a=(await gt(t)).docs.map(b=>({id:b.id,...b.data()})),l=Array.from(new Set(a.map(b=>b.eventId))),u=await this.eventService.getEventsByIds(l),p=new Map(u.map(b=>[b.id,b])),f=Kc(re),m=new Map;a.forEach(b=>{if(b.status===Zt.CONFIRMED){const T=m.get(b.eventId)||p.get(b.eventId);if(T){const D=T.sessions.findIndex(M=>M.id===b.sessionId);if(D!==-1&&T.sessions[D].filled>0){const M=[...T.sessions];M[D]={...M[D],filled:Math.max(0,M[D].filled-1)},T.sessions=M,m.set(T.id,T)}}}f.delete(Be(re,"enrollments",b.id))});const v=mt(Ze(re,"teams"),Ke("members","array-contains",e));(await gt(v)).forEach(b=>{b.data().captainId===e?f.delete(b.ref):f.update(b.ref,{members:Ey(e)})}),m.forEach(b=>{f.update(Be(re,"events",b.id),{sessions:b.sessions})}),f.delete(Be(re,"users",e)),await f.commit()}async updateUserRole(e,t){re&&await sl(Be(re,"users",e),{role:t})}}class IO{async getCourses(){return re?(await gt(Ze(re,"courses"))).docs.map(t=>({id:t.id,...t.data()})):[]}async addCourse(e){if(!re)throw new Error("DB not init");return{id:(await up(Ze(re,"courses"),{name:e})).id,name:e}}async updateCourse(e,t){re&&await sl(Be(re,"courses",e),{name:t})}async deleteCourse(e){if(!re)return;const t=Kc(re);t.delete(Be(re,"courses",e));const i=mt(Ze(re,"classes"),Ke("courseId","==",e));(await gt(i)).forEach(p=>t.delete(p.ref));const l=mt(Ze(re,"users"),Ke("courseId","==",e));(await gt(l)).forEach(p=>t.update(p.ref,{courseId:"",classId:""})),await t.commit()}async getClasses(e){if(!re)return[];let t=e?mt(Ze(re,"classes"),Ke("courseId","==",e)):Ze(re,"classes");return(await gt(t)).docs.map(a=>({id:a.id,...a.data()}))}async addClass(e,t){if(!re)throw new Error("DB not init");return{id:(await up(Ze(re,"classes"),{courseId:e,name:t})).id,courseId:e,name:t}}async updateClass(e,t){re&&await sl(Be(re,"classes",e),{name:t})}async deleteClass(e){if(!re)return;const t=Kc(re);await FD(Be(re,"classes",e));const i=mt(Ze(re,"users"),Ke("classId","==",e));(await gt(i)).forEach(l=>t.update(l.ref,{classId:""})),await t.commit()}}class NO{constructor(){this.authService=new TO,this.eventService=new Ny,this.teamService=new SO,this.enrollmentService=new f1,this.adminService=new AO,this.notificationService=new Cy,this.metadataService=new IO}login(e,t){return this.authService.login(e,t)}loginWithGoogle(){return this.authService.loginWithGoogle()}logout(){return this.authService.logout()}onAuthStateChanged(e){return this.authService.onAuthStateChanged(e)}updateUserProfile(e,t){return this.authService.updateUserProfile(e,t)}getUserProfile(e){return this.authService.getUserProfile(e)}getUsers(e){return this.adminService.getUsers(e)}deleteUser(e){return this.adminService.deleteUser(e)}updateUserRole(e,t){return this.adminService.updateUserRole(e,t)}getCourses(){return this.metadataService.getCourses()}addCourse(e){return this.metadataService.addCourse(e)}updateCourse(e,t){return this.metadataService.updateCourse(e,t)}deleteCourse(e){return this.metadataService.deleteCourse(e)}getClasses(e){return this.metadataService.getClasses(e)}addClass(e,t){return this.metadataService.addClass(e,t)}updateClass(e,t){return this.metadataService.updateClass(e,t)}deleteClass(e){return this.metadataService.deleteClass(e)}getEvents(e){return this.eventService.getEvents(e)}getEventById(e){return this.eventService.getEventById(e)}getEventsByIds(e){return this.eventService.getEventsByIds(e)}getAvailableEventsForUser(e){return this.eventService.getAvailableEventsForUser(e)}getPublicEvents(){return this.eventService.getPublicEvents()}getEventsByParentId(e){return this.eventService.getEventsByParentId(e)}createEvent(e){return this.eventService.createEvent(e)}updateEvent(e){return this.eventService.updateEvent(e)}deleteEvent(e){return this.eventService.deleteEvent(e)}getTeamsForEvent(e){return this.teamService.getTeamsForEvent(e)}createTeam(e,t,i){return this.teamService.createTeam(e,t,i)}joinTeam(e,t,i){return this.teamService.joinTeam(e,t,i)}leaveTeam(e,t){var i;return this.teamService.leaveTeam(e,t,(i=bt==null?void 0:bt.currentUser)==null?void 0:i.uid)}kickMember(e,t){var i;return this.teamService.leaveTeam(e,t,(i=bt==null?void 0:bt.currentUser)==null?void 0:i.uid)}getEnrollmentsForUser(e){return this.enrollmentService.getEnrollmentsForUser(e)}getUserEnrollmentsDetails(e){return this.enrollmentService.getUserEnrollmentsDetails(e)}getEnrichedEnrollments(e){return this.enrollmentService.getEnrichedEnrollments(e)}getEnrollmentDetailsForEvent(e){return this.enrollmentService.getEnrollmentDetailsForEvent(e)}createEnrollment(e,t,i,a){return this.enrollmentService.createEnrollment(e,t,i,a)}cancelEnrollment(e){return this.enrollmentService.cancelEnrollment(e)}markAttendance(e){return this.enrollmentService.markAttendance(e)}getNotifications(e){return this.notificationService.getNotifications(e)}subscribeToNotifications(e,t){return this.notificationService.subscribeToNotifications(e,t)}markNotificationAsRead(e){return this.notificationService.markNotificationAsRead(e)}markAllNotificationsAsRead(e){return this.notificationService.markAllNotificationsAsRead(e)}createNotification(e){return this.notificationService.createNotification(e)}saveDeviceToken(e,t){return this.notificationService.saveDeviceToken(e,t)}async resetAndSeedData(){console.log("Reset not supported in Firebase.")}async exportData(){return"{}"}async importData(e){}}const CO=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Design Digital"},{id:"c3",name:"Administrao"}],RO=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DD-2024-A"},{id:"t4",courseId:"c3",name:"ADM-2024-A"}],te={USERS:"eduevent_users",EVENTS:"eduevent_events",ENROLLMENTS:"eduevent_enrollments",TEAMS:"eduevent_teams",NOTIFICATIONS:"eduevent_notifications",CURRENT_USER:"eduevent_current_user",COURSES:"eduevent_courses",CLASSES:"eduevent_classes"},ft=r=>new Promise(e=>setTimeout(e,r));class kO{constructor(){this.authListeners=[],localStorage.getItem(te.COURSES)||localStorage.setItem(te.COURSES,JSON.stringify(CO)),localStorage.getItem(te.CLASSES)||localStorage.setItem(te.CLASSES,JSON.stringify(RO))}notifyAuthListeners(e){this.authListeners.forEach(t=>t(e))}async login(e,t){await ft(500);let a=this.getItems(te.USERS).find(l=>l.email===e);return a||(a={uid:`user_${Date.now()}`,email:e,role:e.includes("admin")?Kt.ADMIN:Kt.USER,isOnboarded:!1},this.saveItem(te.USERS,a)),localStorage.setItem(te.CURRENT_USER,JSON.stringify(a)),this.notifyAuthListeners(a),a}async loginWithGoogle(){await ft(800);const e="google.mock@example.com";let i=this.getItems(te.USERS).find(a=>a.email===e);i||(i={uid:`user_google_${Date.now()}`,email:e,name:"Google Mock User",role:Kt.USER,isOnboarded:!1},this.saveItem(te.USERS,i)),localStorage.setItem(te.CURRENT_USER,JSON.stringify(i)),this.notifyAuthListeners(i)}async logout(){localStorage.removeItem(te.CURRENT_USER),this.notifyAuthListeners(null)}onAuthStateChanged(e){this.authListeners.push(e);const t=localStorage.getItem(te.CURRENT_USER),i=t?JSON.parse(t):null;return e(i),()=>{this.authListeners=this.authListeners.filter(a=>a!==e)}}async updateUserProfile(e,t){await ft(600);const i=this.getItems(te.USERS),a=i.findIndex(f=>f.uid===e);if(a===-1)throw new Error("Usurio no encontrado");if(t.rm&&i.some(m=>m.rm===t.rm&&m.uid!==e))throw new Error("Este RM j est cadastrado para outro usurio.");const l={...i[a],...t,isOnboarded:!0};i[a]=l,localStorage.setItem(te.USERS,JSON.stringify(i));const u=localStorage.getItem(te.CURRENT_USER),p=u?JSON.parse(u):null;return p&&p.uid===e&&(localStorage.setItem(te.CURRENT_USER,JSON.stringify(l)),this.notifyAuthListeners(l)),l}async getUserProfile(e){return await ft(100),this.getItems(te.USERS).find(a=>a.uid===e)||null}async getUsers(e){await ft(500);const t=this.getItems(te.USERS),{searchTerm:i,role:a,courseId:l,classId:u}=e.filters,p=t.filter(_=>{var k,F;const b=i?((k=_.name)==null?void 0:k.toLowerCase().includes(i.toLowerCase()))||_.email.toLowerCase().includes(i.toLowerCase())||((F=_.rm)==null?void 0:F.includes(i)):!0,T=a?_.role===a:!0,D=l?_.courseId===l:!0,M=u?_.classId===u:!0;return b&&T&&D&&M}),f=e.cursor||0,m=p.slice(f,f+e.limit),v=f+m.length;return{data:m,nextCursor:v<p.length?v:void 0}}async deleteUser(e){await ft(500);let t=this.getItems(te.USERS);t=t.filter(i=>i.uid!==e),localStorage.setItem(te.USERS,JSON.stringify(t))}async updateUserRole(e,t){await ft(300);const i=this.getItems(te.USERS),a=i.findIndex(l=>l.uid===e);a!==-1&&(i[a].role=t,localStorage.setItem(te.USERS,JSON.stringify(i)))}async getCourses(){return this.getItems(te.COURSES)}async addCourse(e){const t=this.getItems(te.COURSES),i={id:`c_${Date.now()}`,name:e};return t.push(i),localStorage.setItem(te.COURSES,JSON.stringify(t)),i}async updateCourse(e,t){const i=this.getItems(te.COURSES),a=i.findIndex(l=>l.id===e);a!==-1&&(i[a].name=t,localStorage.setItem(te.COURSES,JSON.stringify(i)))}async deleteCourse(e){let t=this.getItems(te.COURSES);t=t.filter(a=>a.id!==e),localStorage.setItem(te.COURSES,JSON.stringify(t));let i=this.getItems(te.CLASSES);i=i.filter(a=>a.courseId!==e),localStorage.setItem(te.CLASSES,JSON.stringify(i))}async getClasses(e){const t=this.getItems(te.CLASSES);return e?t.filter(i=>i.courseId===e):t}async addClass(e,t){const i=this.getItems(te.CLASSES),a={id:`t_${Date.now()}`,courseId:e,name:t};return i.push(a),localStorage.setItem(te.CLASSES,JSON.stringify(i)),a}async updateClass(e,t){const i=this.getItems(te.CLASSES),a=i.findIndex(l=>l.id===e);a!==-1&&(i[a].name=t,localStorage.setItem(te.CLASSES,JSON.stringify(i)))}async deleteClass(e){let t=this.getItems(te.CLASSES);t=t.filter(i=>i.id!==e),localStorage.setItem(te.CLASSES,JSON.stringify(t))}async getEvents(e){await ft(400);const t=this.getItems(te.EVENTS),{searchTerm:i,visibility:a,course:l}=e.filters,u=this.getItems(te.CLASSES),p=t.filter(_=>{var M,k;const b=i?_.name.toLowerCase().includes(i.toLowerCase())||_.description.toLowerCase().includes(i.toLowerCase()):!0,T=a?_.visibility===a:!0;let D=!0;return l&&(_.visibility==="public"?D=!1:_.visibility==="course"?D=((M=_.allowedCourses)==null?void 0:M.includes(l))||!1:_.visibility==="class"&&(D=((k=_.allowedClasses)==null?void 0:k.some(F=>{const K=u.find(q=>q.id===F);return(K==null?void 0:K.courseId)===l}))||!1)),b&&T&&D}),f=e.cursor||0,m=p.slice(f,f+e.limit),v=f+m.length;return{data:m,nextCursor:v<p.length?v:void 0}}async getEventById(e){return await ft(200),this.getItems(te.EVENTS).find(i=>i.id===e)}async getEventsByIds(e){return await ft(200),this.getItems(te.EVENTS).filter(i=>e.includes(i.id))}async getEventsByParentId(e){return await ft(200),this.getItems(te.EVENTS).filter(i=>i.parentId===e)}async getAvailableEventsForUser(e){return await ft(400),this.getItems(te.EVENTS).filter(i=>{var a,l;return i.visibility==="public"?!0:i.visibility==="course"?e.courseId?(a=i.allowedCourses)==null?void 0:a.includes(e.courseId):!1:i.visibility==="class"&&e.classId?(l=i.allowedClasses)==null?void 0:l.includes(e.classId):!1})}async getPublicEvents(){return await ft(400),this.getItems(te.EVENTS).filter(t=>t.visibility==="public")}async createEvent(e){await ft(600);const t=this.getItems(te.EVENTS);t.push(e),localStorage.setItem(te.EVENTS,JSON.stringify(t))}async updateEvent(e){await ft(500);const t=this.getItems(te.EVENTS),i=t.findIndex(a=>a.id===e.id);if(i!==-1)t[i]=e,localStorage.setItem(te.EVENTS,JSON.stringify(t));else throw new Error("Evento no encontrado para atualizao")}async deleteEvent(e){await ft(400);let t=this.getItems(te.EVENTS);const i=t.filter(u=>u.id===e||u.parentId===e).map(u=>u.id);t=t.filter(u=>!i.includes(u.id)),localStorage.setItem(te.EVENTS,JSON.stringify(t));let a=this.getItems(te.ENROLLMENTS);a=a.filter(u=>!i.includes(u.eventId)),localStorage.setItem(te.ENROLLMENTS,JSON.stringify(a));let l=this.getItems(te.TEAMS);l=l.filter(u=>!i.includes(u.eventId)),localStorage.setItem(te.TEAMS,JSON.stringify(l))}async getTeamsForEvent(e){return await ft(300),this.getItems(te.TEAMS).filter(i=>i.eventId===e)}async createTeam(e,t,i){await ft(500);const a=this.getItems(te.EVENTS),l=a.findIndex(M=>M.id===e);if(l===-1)throw new Error("Evento no encontrado.");const u=a[l].sessions.findIndex(M=>M.id===t);if(u===-1)throw new Error("Sesso no encontrada.");const p=a[l].sessions[u];if(p.filled>=p.capacity)throw new Error("A sesso est lotada.");const f=this.getItems(te.TEAMS),m=`team_${Date.now()}`,v=Math.random().toString(36).substring(2,6).toUpperCase(),_=`Equipe #${Math.floor(Math.random()*1e3)}`,b={id:m,eventId:e,sessionId:t,name:_,code:v,captainId:i.uid,members:[i.uid],createdAt:new Date().toISOString()};await this.createEnrollment(i.uid,e,t,!0);const T=this.getItems(te.ENROLLMENTS),D=T.findIndex(M=>M.userId===i.uid&&M.eventId===e);return D!==-1&&(T[D].teamId=m,localStorage.setItem(te.ENROLLMENTS,JSON.stringify(T))),a[l].sessions[u].filled+=1,localStorage.setItem(te.EVENTS,JSON.stringify(a)),f.push(b),localStorage.setItem(te.TEAMS,JSON.stringify(f)),b}async joinTeam(e,t,i){await ft(500);const a=this.getItems(te.TEAMS),l=a.findIndex(f=>f.id===e);if(l===-1)throw new Error("Equipe no encontrada.");if(a[l].code!==i)throw new Error("Cdigo de equipe invlido.");if(a[l].members.includes(t.uid))throw new Error("Voc j faz parte desta equipe.");await this.createEnrollment(t.uid,a[l].eventId,a[l].sessionId,!0);const u=this.getItems(te.ENROLLMENTS),p=u.findIndex(f=>f.userId===t.uid&&f.eventId===a[l].eventId);p!==-1&&(u[p].teamId=e,localStorage.setItem(te.ENROLLMENTS,JSON.stringify(u))),a[l].members.push(t.uid),localStorage.setItem(te.TEAMS,JSON.stringify(a)),await this.createNotification({userId:a[l].captainId,title:"Novo membro na equipe! ",message:`${t.name||"Um usurio"} entrou na sua equipe ${a[l].name}.`,type:"success",createdAt:new Date().toISOString(),read:!1,link:`/event/${a[l].eventId}`})}async leaveTeam(e,t){var _;await ft(500);const i=this.getItems(te.TEAMS),a=i.findIndex(b=>b.id===e);if(a===-1)throw new Error("Equipe no encontrada.");const l=i[a],u=this.getItems(te.EVENTS),p=u.findIndex(b=>b.id===l.eventId),f=localStorage.getItem(te.CURRENT_USER),m=f?JSON.parse(f):null,v=m==null?void 0:m.uid;if(l.captainId===t){for(const b of l.members){const D=this.getItems(te.ENROLLMENTS).find(M=>M.userId===b&&M.eventId===l.eventId);D&&await this.cancelEnrollment(D.id),b!==t&&await this.createNotification({userId:b,title:"Equipe Desfeita ",message:`A equipe "${l.name}" foi desfeita pelo capito. Sua inscrio foi cancelada.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}if(i.splice(a,1),p!==-1){const b=u[p].sessions.findIndex(T=>T.id===l.sessionId);b!==-1&&(u[p].sessions[b].filled=Math.max(0,u[p].sessions[b].filled-1),localStorage.setItem(te.EVENTS,JSON.stringify(u)))}}else{l.members=l.members.filter(k=>k!==t);const T=this.getItems(te.ENROLLMENTS).find(k=>k.userId===t&&k.eventId===l.eventId);T&&await this.cancelEnrollment(T.id);const M=((_=this.getItems(te.USERS).find(k=>k.uid===t))==null?void 0:_.name)||"Um membro";v!==t?await this.createNotification({userId:t,title:"Removido da Equipe ",message:`Voc foi removido da equipe "${l.name}" pelo capito.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"}):await this.createNotification({userId:l.captainId,title:"Membro Saiu ",message:`${M} saiu da sua equipe "${l.name}".`,type:"info",read:!1,createdAt:new Date().toISOString(),link:`/event/${l.eventId}`})}localStorage.setItem(te.TEAMS,JSON.stringify(i))}async kickMember(e,t){return this.leaveTeam(e,t)}async getEnrollmentsForUser(e){return await ft(300),this.getItems(te.ENROLLMENTS).filter(i=>i.userId===e&&i.status!==Zt.CANCELED)}async getUserEnrollmentsDetails(e){const t=this.getItems(te.ENROLLMENTS).filter(a=>a.userId===e&&a.status===Zt.CONFIRMED),i=this.getItems(te.EVENTS);return t.map(a=>{const l=i.find(p=>p.id===a.eventId),u=l==null?void 0:l.sessions.find(p=>p.id===a.sessionId);return!l||!u?null:{enrollmentId:a.id,eventName:l.name,eventLocation:l.location,sessionDate:u.date,sessionTime:`${u.startTime} - ${u.endTime}`,enrolledAt:a.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(e){const t=this.getItems(te.ENROLLMENTS).filter(l=>l.eventId===e&&l.status===Zt.CONFIRMED),i=this.getItems(te.USERS),a=this.getItems(te.EVENTS).find(l=>l.id===e);return t.map(l=>{const u=i.find(f=>f.uid===l.userId),p=a==null?void 0:a.sessions.find(f=>f.id===l.sessionId);return{id:l.id,user:{uid:u==null?void 0:u.uid,name:(u==null?void 0:u.name)||"Desconhecido",email:(u==null?void 0:u.email)||"",rm:(u==null?void 0:u.rm)||"",courseId:u==null?void 0:u.courseId,classId:u==null?void 0:u.classId},session:{id:p==null?void 0:p.id,date:p==null?void 0:p.date,startTime:p==null?void 0:p.startTime,endTime:p==null?void 0:p.endTime},status:l.status,enrolledAt:l.enrolledAt,teamId:l.teamId,attended:l.attended}})}async getEnrollmentDetailsForEvent(e){const t=this.getItems(te.ENROLLMENTS).filter(l=>l.eventId===e&&l.status===Zt.CONFIRMED),i=this.getItems(te.USERS),a=this.getItems(te.EVENTS).find(l=>l.id===e);return t.map(l=>{const u=i.find(f=>f.uid===l.userId),p=a==null?void 0:a.sessions.find(f=>f.id===l.sessionId);return{Nome:(u==null?void 0:u.name)||"Desconhecido",Email:(u==null?void 0:u.email)||"",RM:(u==null?void 0:u.rm)||"",SessaoData:br(p==null?void 0:p.date),SessaoHora:(p==null?void 0:p.startTime)||"",Status:l.status,DataInscricao:new Date(l.enrolledAt).toLocaleString("pt-BR"),Presenca:l.attended?"Sim":"No"}})}async createEnrollment(e,t,i,a=!1){await ft(800);const l=this.getItems(te.EVENTS),u=l.findIndex(T=>T.id===t);if(u===-1)throw new Error("Evento no encontrado");const p=l[u].sessions.findIndex(T=>T.id===i);if(p===-1)throw new Error("Sesso no encontrada");const f=l[u].sessions[p];if(!a&&f.filled>=f.capacity)throw new Error("A sesso est lotada");const m=this.getItems(te.ENROLLMENTS);if(m.find(T=>T.userId===e&&T.eventId===t&&T.status===Zt.CONFIRMED))throw new Error("Voc j est inscrito neste evento");const _=m.filter(T=>T.userId===e&&T.status===Zt.CONFIRMED);for(const T of _){const D=l.find(k=>k.id===T.eventId),M=D==null?void 0:D.sessions.find(k=>k.id===T.sessionId);if(D&&M&&M.date===f.date){const k=wi(f.startTime),F=wi(f.endTime),K=wi(M.startTime),q=wi(M.endTime);if(k<q&&K<F)throw new Error(`CONFLICT|${D.name}|${M.startTime}|${M.endTime}`)}}const b={id:`enr_${Date.now()}`,userId:e,eventId:t,sessionId:i,status:Zt.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1};return m.push(b),localStorage.setItem(te.ENROLLMENTS,JSON.stringify(m)),a||(l[u].sessions[p].filled+=1,localStorage.setItem(te.EVENTS,JSON.stringify(l))),b}async cancelEnrollment(e){await ft(500);const t=localStorage.getItem(te.CURRENT_USER),i=t?JSON.parse(t):null,a=i==null?void 0:i.uid,l=this.getItems(te.ENROLLMENTS),u=l.findIndex(m=>m.id===e);if(u===-1)throw new Error("Inscrio no encontrada");const p=l[u];let f=!0;if(p.teamId){const m=this.getItems(te.TEAMS),v=m.findIndex(_=>_.id===p.teamId);if(v!==-1){const _=m[v];_.members=_.members.filter(b=>b!==p.userId),_.captainId===p.userId?(m.splice(v,1),f=!0):f=!1,localStorage.setItem(te.TEAMS,JSON.stringify(m))}}if(f){const m=this.getItems(te.EVENTS),v=m.findIndex(_=>_.id===p.eventId);if(v!==-1){const _=m[v].sessions.findIndex(b=>b.id===p.sessionId);_!==-1&&(m[v].sessions[_].filled=Math.max(0,m[v].sessions[_].filled-1),localStorage.setItem(te.EVENTS,JSON.stringify(m)))}}l.splice(u,1),localStorage.setItem(te.ENROLLMENTS,JSON.stringify(l)),a&&p.userId!==a&&await this.createNotification({userId:p.userId,title:"Inscrio Cancelada ",message:"Sua inscrio foi cancelada pela administrao.",type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}async markAttendance(e){await ft(300);const t=this.getItems(te.ENROLLMENTS),i=this.getItems(te.USERS),a=this.getItems(te.EVENTS),l=t.findIndex(m=>m.id===e);if(l===-1)throw new Error("Inscrio invlida ou no encontrada.");const u=t[l];if(u.attended)throw new Error("Check-in j realizado anteriormente.");u.attended=!0,u.checkInAt=new Date().toISOString(),t[l]=u,localStorage.setItem(te.ENROLLMENTS,JSON.stringify(t));const p=i.find(m=>m.uid===u.userId),f=a.find(m=>m.id===u.eventId);return{userName:(p==null?void 0:p.name)||"Aluno Desconhecido",eventName:(f==null?void 0:f.name)||"Evento"}}async getNotifications(e){return this.getItems(te.NOTIFICATIONS).filter(i=>i.userId===e).sort((i,a)=>a.createdAt.localeCompare(i.createdAt))}subscribeToNotifications(e,t){t(this.getItems(te.NOTIFICATIONS).filter(a=>a.userId===e).sort((a,l)=>l.createdAt.localeCompare(a.createdAt)));const i=setInterval(()=>{const a=this.getItems(te.NOTIFICATIONS).filter(l=>l.userId===e).sort((l,u)=>u.createdAt.localeCompare(l.createdAt));t(a)},3e3);return()=>clearInterval(i)}async markNotificationAsRead(e){const t=this.getItems(te.NOTIFICATIONS),i=t.findIndex(a=>a.id===e);i!==-1&&(t[i].read=!0,localStorage.setItem(te.NOTIFICATIONS,JSON.stringify(t)))}async markAllNotificationsAsRead(e){const t=this.getItems(te.NOTIFICATIONS);t.forEach(i=>{i.userId===e&&(i.read=!0)}),localStorage.setItem(te.NOTIFICATIONS,JSON.stringify(t))}async createNotification(e){const t=this.getItems(te.NOTIFICATIONS),i={...e,id:`notif_${Date.now()}`};t.push(i),localStorage.setItem(te.NOTIFICATIONS,JSON.stringify(t))}async saveDeviceToken(e,t){console.log(`[Mock] Saving device token for user ${e}: ${t}`)}async resetAndSeedData(){localStorage.clear(),await ft(500);const e=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Direito"},{id:"c3",name:"Medicina"}];localStorage.setItem(te.COURSES,JSON.stringify(e));const t=[{id:"t1",courseId:"c1",name:"CC-2024-A"}];localStorage.setItem(te.CLASSES,JSON.stringify(t));const i=[{uid:"u_admin",email:"admin@school.com",name:"Admin",role:Kt.ADMIN,isOnboarded:!0}];localStorage.setItem(te.USERS,JSON.stringify(i))}async exportData(){const e={};return[te.USERS,te.EVENTS,te.ENROLLMENTS,te.COURSES,te.CLASSES,te.TEAMS,te.NOTIFICATIONS].forEach(i=>{e[i]=this.getItems(i)}),JSON.stringify(e,null,2)}async importData(e){try{const t=JSON.parse(e);localStorage.clear();const i={users:te.USERS,events:te.EVENTS,enrollments:te.ENROLLMENTS,courses:te.COURSES,classes:te.CLASSES,teams:te.TEAMS,notifications:te.NOTIFICATIONS,[te.TEAMS]:te.TEAMS};Object.keys(t).forEach(a=>{const l=i[a]||a;if(Array.isArray(t[a])){const u=t[a].map(p=>{const{_id:f,...m}=p;return m});localStorage.setItem(l,JSON.stringify(u))}})}catch{throw new Error("Formato de JSON invlido.")}}getItems(e){const t=localStorage.getItem(e);return t?JSON.parse(t):[]}saveItem(e,t){const i=this.getItems(e);i.push(t),localStorage.setItem(e,JSON.stringify(i))}}const DO=()=>xa.useFirebase?new NO:new kO,Ge=DO(),m1=V.createContext(void 0),OO=({children:r})=>{const[e,t]=V.useState(null),[i,a]=V.useState(!0);V.useEffect(()=>{const m=Ge.onAuthStateChanged(v=>{t(v),a(!1)});return()=>m()},[]);const l=async(m,v)=>{a(!0);try{await Ge.login(m,v)}catch(_){throw console.error(_),a(!1),_}},u=async()=>{a(!0);try{await Ge.loginWithGoogle()}catch(m){throw console.error(m),a(!1),m}},p=async()=>{a(!0),await Ge.logout()},f=async()=>{if(e){a(!0);try{const m=await Ge.getUserProfile(e.uid);t(m)}catch(m){console.error("Falha ao atualizar o perfil",m)}finally{a(!1)}}};return g.jsx(m1.Provider,{value:{user:e,loading:i,login:l,loginWithGoogle:u,logout:p,refreshProfile:f},children:r})},Ps=()=>{const r=V.useContext(m1);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},g1=V.createContext(void 0),MO=({children:r})=>{const[e,t]=V.useState([]),i=V.useCallback(l=>{t(u=>u.filter(p=>p.id!==l))},[]),a=V.useCallback((l,u)=>{const p=Math.random().toString(36).substr(2,9);t(f=>[...f,{id:p,type:l,message:u}]),setTimeout(()=>{i(p)},4e3)},[i]);return g.jsxs(g1.Provider,{value:{addToast:a,removeToast:i},children:[r,g.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(l=>g.jsxs("div",{className:`pointer-events-auto transform transition-all duration-300 ease-in-out translate-y-0 opacity-100 min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border-l-4 flex items-start justify-between bg-white dark:bg-darkcard dark:border-gray-600
              ${l.type==="success"?"border-green-500":""}
              ${l.type==="error"?"border-red-500":""}
              ${l.type==="warning"?"border-amber-500":""}
              ${l.type==="info"?"border-blue-500":""}
            `,children:[g.jsxs("div",{className:"flex items-center",children:[g.jsxs("span",{className:"text-xl mr-3",children:[l.type==="success"&&"",l.type==="error"&&"",l.type==="warning"&&"",l.type==="info"&&""]}),g.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:l.message})]}),g.jsx("button",{onClick:()=>i(l.id),className:"ml-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 focus:outline-none",children:""})]},l.id))})]})},yl=()=>{const r=V.useContext(g1);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},p1=V.createContext(void 0),jO=({children:r})=>{const[e,t]=V.useState(()=>{const a=localStorage.getItem("eduevent_theme");return a==="dark"||a==="light"?a:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});V.useEffect(()=>{const a=window.document.documentElement;e==="dark"?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("eduevent_theme",e)},[e]);const i=()=>{t(a=>a==="light"?"dark":"light")};return g.jsx(p1.Provider,{value:{theme:e,toggleTheme:i},children:r})},VO=()=>{const r=V.useContext(p1);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},LO=()=>{const{user:r}=Ps(),[e,t]=V.useState([]),[i,a]=V.useState(0),[l,u]=V.useState(!1),[p,f]=V.useState(!0),[m,v]=V.useState(typeof Notification<"u"?Notification.permission:"denied"),_=V.useCallback(async()=>{if(!(typeof Notification>"u"))try{const M=await Notification.requestPermission();v(M),M==="granted"&&new Notification("EduEvent",{body:"Notificaes ativadas com sucesso!",icon:"https://cdn-icons-png.flaticon.com/512/2995/2995458.png"})}catch(M){console.error("Error requesting notification permission:",M)}},[]);V.useEffect(()=>{if(!r)return;const M=Ge.subscribeToNotifications(r.uid,k=>{if(k.length>0&&e.length>0){const F=k[0],K=e[0];F.id!==K.id&&!F.read&&Notification.permission==="granted"&&new Notification(F.title,{body:F.message,icon:"https://cdn-icons-png.flaticon.com/512/2995/2995458.png"})}t(k),a(k.filter(F=>!F.read).length),f(!1)});return()=>M()},[r]);const b=V.useCallback(async()=>{if(!r)return;const M=localStorage.getItem(`last_event_check_${r.uid}`),F=new Date().toISOString().split("T")[0];if(M!==F)try{const K=await Ge.getEnrollmentsForUser(r.uid);if(K.length===0)return;const q=[...new Set(K.map(R=>R.eventId))],oe=await Ge.getEventsByIds(q),ae=new Date;ae.setDate(ae.getDate()+1);const fe=ae.toISOString().split("T")[0];for(const R of K){const I=oe.find(U=>U.id===R.eventId);if(!I)continue;const C=I.sessions.find(U=>U.id===R.sessionId);if(C&&(C.date===F||C.date===fe)){const U=C.date===F,L=U?"Evento Hoje! ":"Evento Amanh! ",j=`No esquea: "${I.name}" acontece ${U?"hoje":"amanh"} s ${C.startTime}.`;e.some(be=>be.type==="reminder"&&be.message===j)||await Ge.createNotification({userId:r.uid,title:L,message:j,type:"reminder",read:!1,createdAt:new Date().toISOString(),link:`/event/${I.id}`})}}localStorage.setItem(`last_event_check_${r.uid}`,F)}catch(K){console.error("Error checking upcoming events",K)}},[r,e]);return V.useEffect(()=>{b()},[b]),{notifications:e,unreadCount:i,isOpen:l,setIsOpen:u,markAsRead:async M=>{t(k=>k.map(F=>F.id===M?{...F,read:!0}:F)),a(k=>Math.max(0,k-1)),await Ge.markNotificationAsRead(M)},markAllAsRead:async()=>{r&&(t(M=>M.map(k=>({...k,read:!0}))),a(0),await Ge.markAllNotificationsAsRead(r.uid))},loading:p,permission:m,requestPermission:_}},tw=()=>{const{notifications:r,unreadCount:e,isOpen:t,setIsOpen:i,markAsRead:a,markAllAsRead:l,permission:u,requestPermission:p}=LO(),f=V.useRef(null);V.useEffect(()=>{const v=_=>{f.current&&!f.current.contains(_.target)&&i(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[i]);const m=v=>{switch(v){case"success":return"";case"warning":return"";case"reminder":return"";default:return""}};return g.jsxs("div",{className:"relative",ref:f,children:[g.jsxs("button",{onClick:()=>i(!t),className:"relative p-2 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none",children:[g.jsx("span",{className:"sr-only",children:"Notificaes"}),g.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e>0&&g.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2.5 w-2.5 rounded-full ring-2 ring-white dark:ring-gray-800 bg-red-500 animate-pulse"})]}),t&&g.jsxs("div",{className:"fixed left-4 right-4 top-16 mt-2 sm:absolute sm:inset-auto sm:right-0 sm:w-80 origin-top-right rounded-md shadow-lg bg-white dark:bg-darkcard ring-1 ring-black ring-opacity-5 focus:outline-none z-[100] overflow-hidden border border-gray-100 dark:border-gray-700",children:[g.jsxs("div",{className:"py-2 px-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800",children:[g.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"Notificaes"}),e>0&&g.jsx("button",{onClick:l,className:"text-xs text-primary hover:text-indigo-600 dark:text-indigo-400",children:"Marcar todas como lidas"})]}),u==="default"&&g.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-100 dark:border-indigo-800/30",children:[g.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mb-2",children:"Receba alertas sobre eventos e mudanas na sua equipe."}),g.jsx("button",{onClick:p,className:"w-full py-1.5 px-3 bg-white dark:bg-indigo-700 border border-indigo-200 dark:border-indigo-600 rounded text-xs font-bold text-indigo-600 dark:text-white hover:bg-indigo-50 dark:hover:bg-indigo-600 transition-colors shadow-sm",children:"Ativar notificaes no desktop "})]}),g.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?g.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma notificao."}):g.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:r.map(v=>g.jsx("li",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${v.read?"":"bg-indigo-50/50 dark:bg-indigo-900/10"}`,onClick:()=>a(v.id),children:g.jsxs("div",{className:"flex gap-3",children:[g.jsx("div",{className:"flex-shrink-0 text-xl pt-1",children:m(v.type)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:`text-sm font-medium break-words ${v.read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:v.title}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 break-words",children:v.message}),g.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[g.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(v.createdAt).toLocaleDateString()}),v.link&&g.jsx(lt,{to:v.link,className:"text-xs text-primary font-bold hover:underline",onClick:()=>i(!1),children:"Ver Detalhes"})]})]}),!v.read&&g.jsx("div",{className:"flex-shrink-0 self-center",children:g.jsx("span",{className:"block h-2 w-2 rounded-full bg-primary"})})]})},v.id))})})]})]})},Ss=({children:r})=>{const{user:e,logout:t}=Ps(),{theme:i,toggleTheme:a}=VO(),l=Oa(),u=ar(),[p,f]=V.useState(!1),m=async()=>{await t(),l("/")},v=b=>u.pathname===b?"bg-indigo-50 border-primary text-primary dark:bg-indigo-900/50 dark:text-indigo-200":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200",_=b=>u.pathname===b?"border-primary text-gray-900 dark:text-white dark:border-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200";return e?g.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-darkbg transition-colors duration-200",children:[g.jsxs("nav",{className:"bg-white dark:bg-darkcard shadow-sm sticky top-0 z-50 transition-colors duration-200",children:[g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between h-16",children:[g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0 flex items-center",children:g.jsx(lt,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight dark:text-indigo-400",children:"EduEvent"})}),g.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[g.jsx(lt,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/dashboard")}`,children:"Eventos"}),g.jsx(lt,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===Kt.ADMIN&&g.jsxs(g.Fragment,{children:[g.jsx(lt,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/admin/events")}`,children:"Admin Eventos"}),g.jsx(lt,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/admin/courses")}`,children:"Admin Cursos"}),g.jsx(lt,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${_("/admin/users")}`,children:"Admin Usurios"}),g.jsx(lt,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 dark:text-amber-400 ${_("/admin/dev")}`,children:"Desenvolvimento"})]})]})]}),g.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[g.jsx(tw,{}),g.jsx("button",{onClick:a,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",title:i==="dark"?"Mudar para modo claro":"Mudar para modo escuro",children:i==="dark"?g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),g.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[g.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:e.name||e.email}),g.jsx("button",{onClick:m,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none transition-colors",children:"Sair"})]})]}),g.jsxs("div",{className:"-mr-2 flex items-center sm:hidden gap-2",children:[g.jsx(tw,{}),g.jsx("button",{onClick:a,className:"p-3 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",children:i==="dark"?g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),g.jsxs("button",{onClick:()=>f(!p),type:"button",className:"bg-white dark:bg-gray-800 inline-flex items-center justify-center p-3 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[g.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),p?g.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):g.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]})]})}),p&&g.jsxs("div",{className:"sm:hidden border-t border-gray-200 dark:border-gray-700",id:"mobile-menu",children:[g.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[g.jsx(lt,{to:"/dashboard",onClick:()=>f(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${v("/dashboard")}`,children:"Eventos"}),g.jsx(lt,{to:"/my-enrollments",onClick:()=>f(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${v("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===Kt.ADMIN&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-4 pb-2",children:g.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),g.jsx(lt,{to:"/admin/events",onClick:()=>f(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${v("/admin/events")}`,children:"Gerenciar Eventos"}),g.jsx(lt,{to:"/admin/courses",onClick:()=>f(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${v("/admin/courses")}`,children:"Gerenciar Cursos"}),g.jsx(lt,{to:"/admin/users",onClick:()=>f(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${v("/admin/users")}`,children:"Gerenciar Usurios"}),g.jsx(lt,{to:"/admin/dev",onClick:()=>f(!1),className:"block pl-3 pr-4 py-3 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-700 dark:text-amber-500",children:"Desenvolvimento"})]})]}),g.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200 dark:border-gray-700",children:[g.jsxs("div",{className:"flex items-center px-4",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-200 font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:e.name||"Usurio"}),g.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e.email})]})]}),g.jsx("div",{className:"mt-3 space-y-1",children:g.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-3 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700",children:"Sair do Sistema"})})]})]})]}),g.jsx("main",{className:"flex-1 py-6",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r})})]}):g.jsx(g.Fragment,{children:r})},Ri=({children:r,isLoading:e=!1,variant:t="primary",className:i="",disabled:a,...l})=>{const u="relative inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",p={primary:"border-transparent text-white bg-primary hover:bg-indigo-700 focus:ring-primary",secondary:"border-transparent text-white bg-secondary hover:bg-emerald-700 focus:ring-secondary",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500",outline:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary"};return g.jsxs("button",{disabled:e||a,className:`${u} ${p[t]} ${i}`,...l,children:[g.jsx("span",{className:e?"invisible":"",children:r}),e&&g.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:g.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})},Dh=r=>{const e=(r==null?void 0:r.code)||"",t=(r==null?void 0:r.message)||"";if(typeof t=="string"&&t.startsWith("CONFLICT|")){const i=t.split("|");return i.length>=4?`Conflito de horrio! Voc j possui o evento "${i[1]}" agendado entre ${i[2]} e ${i[3]}.`:"Conflito de horrio com outro evento j agendado."}if(t==="A sesso est lotada"||t.includes("capacidade mxima"))return"Que pena! Esta sesso acabou de lotar.";if(t.includes("j est inscrito"))return"Voc j garantiu sua vaga neste evento!";if(t.includes("Evento no encontrado"))return"O evento que voc procura no est mais disponvel.";switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos. Verifique e tente novamente.";case"auth/email-already-in-use":return"Este e-mail j est sendo usado por outra conta.";case"auth/weak-password":return"Sua senha  muito fraca. Escolha uma senha mais forte.";case"auth/invalid-email":return"O formato do e-mail  invlido.";case"auth/user-disabled":return"Esta conta foi desativada. Contate o administrador.";case"auth/too-many-requests":return"Muitas tentativas consecutivas. Aguarde alguns instantes.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/popup-closed-by-user":return"O login foi cancelado.";case"permission-denied":return"Voc no tem permisso para realizar esta ao.";default:return t||"Ocorreu um erro inesperado. Tente novamente mais tarde."}},wa=({label:r,error:e,helperText:t,as:i="input",className:a="",children:l,id:u,...p})=>{const f=u||p.name||Math.random().toString(36).substr(2,9),m=`${f}-error`,v=`${f}-helper`,_=`
    appearance-none 
    block 
    w-full 
    px-4 
    py-3 
    text-base 
    rounded-lg 
    border 
    bg-white dark:bg-gray-800 
    text-gray-900 dark:text-white 
    placeholder-gray-400 
    focus:outline-none 
    focus:ring-2 
    focus:ring-offset-0
    transition-shadow 
    duration-200
  `,b=e?"border-red-300 focus:border-red-500 focus:ring-red-200 dark:border-red-800 dark:focus:ring-red-900/30":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-indigo-100 dark:focus:ring-indigo-900/30",T=[e?m:void 0,t?v:void 0].filter(Boolean).join(" ")||void 0;return g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:f,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 ml-1",children:r}),g.jsx("div",{className:"relative",children:i==="select"?g.jsx("select",{id:f,className:`${_} ${b} ${a} pr-10`,"aria-invalid":!!e,"aria-describedby":T,...p,children:l}):g.jsx("input",{id:f,className:`${_} ${b} ${a}`,"aria-invalid":!!e,"aria-describedby":T,...p})}),e?g.jsxs("p",{id:m,className:"mt-1.5 text-sm text-red-600 dark:text-red-400 flex items-center animate-fade-in ml-1",role:"alert",children:[g.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]}):t?g.jsx("p",{id:v,className:"mt-1.5 text-sm text-gray-500 dark:text-gray-400 ml-1",children:t}):null]})},PO=()=>{var k,F;const[r,e]=V.useState(""),[t,i]=V.useState(""),{user:a,loading:l,login:u,loginWithGoogle:p}=Ps(),f=Oa(),m=ar(),{addToast:v}=yl(),[_,b]=V.useState(!1),T=(F=(k=m.state)==null?void 0:k.from)!=null&&F.pathname?m.state.from.pathname+(m.state.from.search||""):"/dashboard";V.useEffect(()=>{!l&&a&&f(T,{replace:!0})},[a,l,f,T]);const D=async K=>{K.preventDefault(),b(!0);try{await u(r,t),v("success","Login realizado com sucesso!")}catch(q){const oe=Dh(q);v("error",oe)}finally{b(!1)}},M=async()=>{b(!0);try{await p(),v("success","Autenticado com Google!")}catch(K){const q=Dh(K);v("error",q),b(!1)}};return l||!l&&a?g.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-primary font-medium",children:"Verificando sesso..."}):g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[g.jsx("div",{className:"flex justify-start",children:g.jsxs(lt,{to:"/",className:"flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors font-medium p-2 -ml-2 rounded-lg active:bg-gray-100 dark:active:bg-gray-800",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-4xl font-bold text-primary dark:text-indigo-400",children:"EduEvent"}),g.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Acesse sua conta"}),g.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:xa.useFirebase?"Gerencie suas inscries e eventos em um s lugar.":"Ambiente de Demonstrao (Mock)"})]}),g.jsxs("form",{className:"mt-8 space-y-2",onSubmit:D,children:[g.jsx(wa,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,label:"E-mail",placeholder:"seu@email.com",value:r,onChange:K=>e(K.target.value),inputMode:"email"}),g.jsx(wa,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:xa.useFirebase,label:"Senha",placeholder:"",value:t,onChange:K=>i(K.target.value),enterKeyHint:"go"}),g.jsx("div",{className:"pt-4",children:g.jsx(Ri,{type:"submit",isLoading:_,className:"w-full h-12 text-base shadow-lg shadow-indigo-200 dark:shadow-none",children:"Acessar Plataforma"})}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-2 bg-gray-50 dark:bg-darkbg text-gray-500 dark:text-gray-400",children:"Ou entre rapidamente com"})})]}),g.jsxs("button",{type:"button",onClick:M,disabled:_,className:"w-full h-12 flex items-center justify-center px-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70 transition-colors active:scale-[0.98]",children:[g.jsxs("svg",{className:"h-5 w-5 mr-3","aria-hidden":"true",viewBox:"0 0 24 24",children:[g.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),g.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),g.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),g.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),!xa.useFirebase&&g.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 p-4 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[g.jsx("p",{className:"font-bold mb-2",children:"Ambiente de Teste (Mock):"}),g.jsxs("ul",{className:"space-y-2",children:[g.jsx("li",{onClick:()=>e("student@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" student@school.com"}),g.jsx("li",{onClick:()=>e("admin@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" admin@school.com"})]})]})]})})},UO=()=>{const{user:r,refreshProfile:e}=Ps(),t=Oa(),{addToast:i}=yl(),[a,l]=V.useState([]),[u,p]=V.useState([]),[f,m]=V.useState(!1),[v,_]=V.useState({name:(r==null?void 0:r.name)||"",rm:"",courseId:"",classId:""});V.useEffect(()=>{if(r!=null&&r.isOnboarded){t("/dashboard");return}Ge.getCourses().then(l)},[r,t]),V.useEffect(()=>{v.courseId&&(Ge.getClasses(v.courseId).then(p),_(T=>({...T,classId:""})))},[v.courseId]);const b=async T=>{if(T.preventDefault(),!!r){m(!0);try{const D={...v,email:r.email,role:r.role};await Ge.updateUserProfile(r.uid,D),await e(),i("success","Perfil completado com sucesso! Bem-vindo."),t("/dashboard")}catch(D){const M=Dh(D);i("error",M)}finally{m(!1)}}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Complete seu perfil"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Precisamos de mais alguns detalhes antes de comear."})]}),g.jsxs("form",{className:"mt-8 space-y-4",onSubmit:b,children:[g.jsx(wa,{id:"name",name:"name",type:"text",required:!0,label:"Nome Completo",placeholder:"Ex: Joo da Silva",value:v.name,onChange:T=>_({...v,name:T.target.value}),autoComplete:"name"}),g.jsx(wa,{id:"rm",name:"rm",type:"text",required:!0,label:"Registro de Matrcula (RM)",placeholder:"Ex: 12345",value:v.rm,onChange:T=>_({...v,rm:T.target.value}),inputMode:"numeric"}),g.jsxs(wa,{as:"select",label:"Curso",required:!0,value:v.courseId,onChange:T=>_({...v,courseId:T.target.value}),children:[g.jsx("option",{value:"",children:"Selecione o Curso"}),a.map(T=>g.jsx("option",{value:T.id,children:T.name},T.id))]}),g.jsxs(wa,{as:"select",label:"Turma",required:!0,disabled:!v.courseId,value:v.classId,onChange:T=>_({...v,classId:T.target.value}),className:"disabled:opacity-50",children:[g.jsx("option",{value:"",children:"Selecione a Turma"}),u.map(T=>g.jsx("option",{value:T.id,children:T.name},T.id))]}),g.jsx("div",{className:"pt-4",children:g.jsx(Ri,{type:"submit",isLoading:f,className:"w-full h-12 text-base shadow-lg",children:"Concluir Cadastro"})})]})]})})},zO=(r,e={})=>{const[t,i]=V.useState(null),[a,l]=V.useState(null),u=e.minSwipeDistance||50;return{onTouchStart:v=>{l(null),i({x:v.targetTouches[0].clientX,y:v.targetTouches[0].clientY})},onTouchMove:v=>{l({x:v.targetTouches[0].clientX,y:v.targetTouches[0].clientY})},onTouchEnd:()=>{if(!t||!a)return;const v=t.x-a.x,_=t.y-a.y;if(Math.abs(v)>Math.abs(_)){if(Math.abs(v)<u)return;v>0?r.onSwipeLeft&&r.onSwipeLeft():r.onSwipeRight&&r.onSwipeRight()}else{if(Math.abs(_)<u)return;_>0?r.onSwipeUp&&r.onSwipeUp():r.onSwipeDown&&r.onSwipeDown()}}}},Sa=({isOpen:r,onClose:e,title:t,children:i})=>{const a=V.useRef(null),l=V.useRef(null),u=zO({onSwipeDown:e});return V.useEffect(()=>(r?(l.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{a.current&&a.current.focus()},50)):(document.body.style.overflow="unset",l.current&&l.current.focus()),()=>{document.body.style.overflow="unset"}),[r]),V.useEffect(()=>{const p=f=>{f.key==="Escape"&&e()};return r&&window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}},[r,e]),r?g.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[g.jsx("div",{className:"fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-80 transition-opacity animate-fade-in","aria-hidden":"true",onClick:e}),g.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),g.jsxs("div",{ref:a,tabIndex:-1,className:`
              inline-block align-bottom bg-white dark:bg-darkcard 
              rounded-t-2xl sm:rounded-lg 
              text-left overflow-hidden shadow-xl 
              transform transition-all 
              w-full sm:my-8 sm:align-middle sm:max-w-lg 
              animate-slide-in outline-none
              relative
            `,...u,children:[g.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1",onClick:e,children:g.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),g.jsx("div",{className:"bg-white dark:bg-darkcard px-4 pt-2 pb-4 sm:p-6 sm:pb-4",children:g.jsx("div",{className:"sm:flex sm:items-start",children:g.jsxs("div",{className:"mt-2 text-center sm:mt-0 sm:text-left w-full",children:[g.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:t}),g.jsx("div",{className:"mt-4 text-gray-600 dark:text-gray-300",children:i})]})})}),g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-4 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-100 dark:border-gray-700",children:g.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm sm:py-2 transition-colors active:scale-[0.98]",onClick:e,children:"Fechar"})})]})]})}):null},BO=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:i})=>{const a=Math.ceil(e/t);if(a<=1)return null;const l=()=>{const u=[];if(a<=7)for(let p=1;p<=a;p++)u.push(p);else r<=4?u.push(1,2,3,4,5,"...",a):r>=a-3?u.push(1,"...",a-4,a-3,a-2,a-1,a):u.push(1,"...",r-1,r,r+1,"...",a);return u};return g.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[g.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[g.jsx("button",{onClick:()=>i(Math.max(1,r-1)),disabled:r===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),g.jsx("button",{onClick:()=>i(Math.min(a,r+1)),disabled:r===a,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),g.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[g.jsx("div",{children:g.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",g.jsx("span",{className:"font-medium",children:(r-1)*t+1})," a ",g.jsx("span",{className:"font-medium",children:Math.min(r*t,e)})," de ",g.jsx("span",{className:"font-medium",children:e})," resultados"]})}),g.jsx("div",{children:g.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[g.jsxs("button",{onClick:()=>i(Math.max(1,r-1)),disabled:r===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[g.jsx("span",{className:"sr-only",children:"Anterior"}),g.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),l().map((u,p)=>typeof u=="number"?g.jsx("button",{onClick:()=>i(u),"aria-current":r===u?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${r===u?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:u},p):g.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},p)),g.jsxs("button",{onClick:()=>i(Math.min(a,r+1)),disabled:r===a,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[g.jsx("span",{className:"sr-only",children:"Prximo"}),g.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},y1=(r,e)=>{const[t,i]=V.useState(null),[a,l]=V.useState(!1),{addToast:u}=yl(),p=V.useCallback(()=>{i(null)},[]),f=V.useCallback(async(v,_)=>{if(r){p(),l(!0);try{await Ge.createEnrollment(r.uid,v.id,_),u("success",`Inscrio confirmada em ${v.name}!`),setTimeout(()=>e(),500)}catch(b){const T=b.message||"";if(T.startsWith("CONFLICT|")){const[D,M,k,F]=T.split("|");i({name:M,time:`${k} - ${F}`}),u("warning","Conflito de horrio detectado.")}else{const D=Dh(b);u("error",D)}}finally{l(!1)}}},[r,e,p,u]),m=V.useCallback(async v=>{if(r){l(!0);try{await Ge.cancelEnrollment(v),u("success","Inscrio cancelada com sucesso."),setTimeout(()=>e(),500)}catch(_){u("error","Erro ao cancelar inscrio."),console.error(_)}finally{l(!1)}}},[r,e,u]);return{handleEnroll:f,handleCancel:m,isProcessing:a,isEnrolling:a,conflictData:t,clearState:p}};function qO(r,e=300){const[t,i]=V.useState(r);return V.useEffect(()=>{const a=setTimeout(()=>{i(r)},e);return()=>{clearTimeout(a)}},[r,e]),t}const FO=()=>g.jsx("li",{className:"px-6 py-4 animate-pulse",children:g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/5"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/5"})]}),g.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})}),HO=()=>g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col h-full animate-pulse",children:[g.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-1/3"})]}),g.jsx("div",{className:"h-5 bg-gray-200 rounded w-4/5 mb-2"}),g.jsxs("div",{className:"space-y-2 flex-1",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),g.jsxs("div",{className:"mt-4 space-y-2",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),g.jsx("div",{className:"mt-4",children:g.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})})]}),g.jsx("div",{className:"w-full h-12 bg-gray-100 border-t border-gray-200"})]}),AM=()=>g.jsxs("tr",{className:"animate-pulse",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),g.jsxs("div",{className:"ml-4 space-y-2",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-y-2",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:g.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 inline-block"})})]}),IM=()=>g.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3 animate-pulse",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]}),g.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-b border-gray-100 py-2",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),g.jsx("div",{className:"flex justify-end pt-1",children:g.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"})})]}),v1=({icon:r,title:e,description:t,action:i})=>g.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center bg-white dark:bg-darkcard rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[g.jsx("div",{className:"text-5xl text-gray-300 dark:text-gray-600 mb-4 transition-colors duration-200",children:r||""}),g.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:e}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mb-6",children:t}),i&&g.jsx("button",{onClick:i.onClick,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:i.label})]}),Ry=({isOpen:r,onClose:e,onConfirm:t,title:i,message:a,confirmText:l="Confirmar",cancelText:u="Cancelar",isProcessing:p=!1,variant:f="danger"})=>g.jsx(Sa,{isOpen:r,onClose:()=>!p&&e(),title:i,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"text-gray-700",children:a}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{onClick:e,disabled:p,className:"px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 text-gray-800 text-sm font-medium disabled:opacity-50",children:u}),g.jsx(Ri,{onClick:t,isLoading:p,variant:f,children:l})]})]})}),GO=({isOpen:r,onClose:e})=>{const[t,i]=V.useState(0),[a,l]=V.useState(!1);if(!r)return null;const u=[{title:"Bem-vindo ao EduEvent! ",description:"Sua nova central para descobrir, gerenciar e participar dos melhores eventos acadmicos e escolares da sua instituio.",color:"bg-indigo-500",image:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-indigo-600 dark:text-indigo-400",children:[g.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),g.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})},{title:"Explore Eventos Incrveis ",description:"Navegue pelo Dashboard para encontrar eventos. Use os filtros inteligentes para buscar por data, nome ou ver apenas o que  relevante para seu curso.",color:"bg-emerald-500",image:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-emerald-600 dark:text-emerald-400",children:[g.jsx("circle",{cx:"11",cy:"11",r:"8"}),g.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),g.jsx("path",{d:"M11 8v6M8 11h6"})]})},{title:"Inscrio em 1 Clique ",description:"Gostou de um evento? Clique em 'Garantir Vaga' ou 'Inscrever'. O sistema verifica conflitos de horrio automaticamente para voc.",color:"bg-amber-500",image:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-amber-600 dark:text-amber-400",children:[g.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),g.jsx("polyline",{points:"14 2 14 8 20 8"}),g.jsx("path",{d:"M9 15l2 2 4-4"})]})},{title:"Sua Agenda Organizada ",description:"Acesse 'Minhas Inscries' para ver todos os seus compromissos confirmados. Voc pode cancelar inscries se mudar de ideia.",color:"bg-purple-500",image:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-purple-600 dark:text-purple-400",children:[g.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),g.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),g.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),g.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),g.jsx("path",{d:"M8 14h.01"}),g.jsx("path",{d:"M12 14h.01"}),g.jsx("path",{d:"M16 14h.01"}),g.jsx("path",{d:"M8 18h.01"}),g.jsx("path",{d:"M12 18h.01"}),g.jsx("path",{d:"M16 18h.01"})]})},{title:"Tudo Pronto! ",description:"Voc j sabe o bsico. Agora  com voc! Explore, aprenda e aproveite ao mximo os eventos da sua escola.",color:"bg-primary",image:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-primary dark:text-indigo-400",children:[g.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),g.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),g.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),g.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]})}],p=()=>{t<u.length-1?(l(!0),setTimeout(()=>{i(v=>v+1),l(!1)},300)):e()},f=()=>{e()},m=u[t];return g.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[g.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity",onClick:f}),g.jsxs("div",{className:"relative bg-white dark:bg-darkcard w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col min-h-[500px] animate-fade-in border border-gray-100 dark:border-gray-700",children:[g.jsx("div",{className:`h-2 w-full ${m.color} transition-colors duration-500`}),g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[g.jsx("div",{className:`mb-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-full transition-all duration-300 transform ${a?"opacity-0 scale-90 translate-x-4":"opacity-100 scale-100 translate-x-0"}`,children:m.image}),g.jsxs("div",{className:`transition-all duration-300 ${a?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:m.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:m.description})]})]}),g.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700",children:[g.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:u.map((v,_)=>g.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${_===t?`w-6 ${m.color}`:"w-2 bg-gray-300 dark:bg-gray-600"}`},_))}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 font-medium text-sm px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Pular Tutorial"}),g.jsxs("button",{onClick:p,className:`px-6 py-2.5 rounded-xl text-white font-bold shadow-lg shadow-indigo-500/20 transform transition active:scale-95 flex items-center ${m.color} hover:brightness-110`,children:[t===u.length-1?"Comear Agora":"Prximo",t<u.length-1&&g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})},$O=rr.memo(({event:r,hasChildren:e,onAction:t})=>{const i=!e&&r.sessions.length===1?r.sessions[0]:null,a=i?i.capacity:0,l=i?i.filled:0,u=a>0?l/a*100:0,p=a>0&&l>=a;let f="bg-indigo-500",m="Pblico";return r.visibility==="course"&&(f="bg-emerald-500",m="Meu Curso"),r.visibility==="class"&&(f="bg-purple-500",m="Minha Turma"),g.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col h-full relative animate-fade-in hover:-translate-y-1",children:[g.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${f} opacity-80`}),g.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{className:"flex gap-2 flex-wrap",children:[g.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${f} bg-opacity-10 dark:bg-opacity-20 text-gray-700 dark:text-gray-200`,children:m}),r.isTeamEvent&&g.jsxs("span",{className:"text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Equipe"]})]}),e?g.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full font-medium border border-gray-200 dark:border-gray-600",children:"Evento Principal"}):p&&i?g.jsxs("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[g.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Esgotado"]}):g.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[g.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Aberto"]})]}),g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:r.name}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:r.description}),g.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),g.jsx("span",{className:"font-medium",children:r.location})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsx("span",{className:"font-medium",children:e?"Ver programao completa":r.sessions.length>1?`${r.sessions.length} horrios disponveis`:`${br(i==null?void 0:i.date)}  ${i==null?void 0:i.startTime}`})]})]}),!e&&i&&g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[g.jsx("span",{className:p?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:p?"Sem vagas":r.isTeamEvent?`${a-l} equipes restantes`:`${a-l} vagas restantes`}),g.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:[Math.round(u),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${p?"bg-red-500":u>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${u}%`}})})]})]}),g.jsxs("button",{onClick:()=>t(r),className:"w-full py-3 text-sm font-bold text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors border-t border-indigo-100 dark:border-gray-700 flex justify-center items-center",children:[e||r.isTeamEvent?"Ver Detalhes":"Ver Detalhes e Inscrever",g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),KO=()=>{const{user:r}=Ps(),e=Oa(),[t,i]=V.useState([]),[a,l]=V.useState([]),[u,p]=V.useState(!0),[f,m]=V.useState(null),[v,_]=V.useState(null),[b,T]=V.useState(!1);V.useEffect(()=>{if(!localStorage.getItem("eduevent_tutorial_completed")){const J=setTimeout(()=>T(!0),1e3);return()=>clearTimeout(J)}},[]);const D=()=>{T(!1),localStorage.setItem("eduevent_tutorial_completed","true")},M=V.useCallback(async(O=!0)=>{if(!r)return;O&&p(!0);const[J,ce]=await Promise.all([Ge.getAvailableEventsForUser(r),Ge.getEnrollmentsForUser(r.uid)]);i(J),l(ce),O&&p(!1)},[r]),k=V.useCallback(()=>{M(!1),_(null)},[M]),{handleEnroll:F,handleCancel:K,isProcessing:q,conflictData:oe,clearState:ae}=y1(r,k),[fe,R]=V.useState(""),I=qO(fe,300),[C,U]=V.useState(""),[L,j]=V.useState(!1),[N,be]=V.useState(1),Ne=9;V.useEffect(()=>{M()},[M]),V.useEffect(()=>{if(f){const O=t.find(J=>J.id===f.id);O&&JSON.stringify(O)!==JSON.stringify(f)&&m(O)}},[t,f]);const W=V.useMemo(()=>{const O=new Set;return t.forEach(J=>{J.parentId&&O.add(J.parentId)}),O},[t]),ue=V.useMemo(()=>{const O=new Date().toISOString().split("T")[0];return t.filter(J=>{if(J.parentId)return!1;const ce=J.name.toLowerCase().includes(I.toLowerCase())||J.description.toLowerCase().includes(I.toLowerCase()),me=t.filter(ct=>ct.parentId===J.id),ye=[...J.sessions,...me.flatMap(ct=>ct.sessions)],Te=C?ye.some(ct=>ct.date===C):!0,Le=L||ye.some(ct=>ct.date>=O);return ce&&Te&&Le})},[t,I,C,L]);V.useEffect(()=>{be(1)},[I,C,L]);const le=V.useMemo(()=>{const O=(N-1)*Ne;return ue.slice(O,O+Ne)},[ue,N]),_e=(O,J)=>a.find(ce=>ce.eventId===O&&ce.sessionId===J),Re=V.useCallback(O=>{W.has(O.id)||O.isTeamEvent?e(`/event/${O.id}`):(ae(),m(O))},[W,e,ae]);return g.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[g.jsx(GO,{isOpen:b,onClose:D}),g.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Dashboard de Eventos"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),g.jsxs("div",{className:"bg-white dark:bg-darkcard p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col lg:flex-row gap-4 items-end transition-colors duration-200",children:[g.jsxs("div",{className:"flex-1 w-full",children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),g.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:fe,onChange:O=>R(O.target.value)})]})]}),g.jsxs("div",{className:"w-full lg:w-48",children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Data Especfica"}),g.jsx("input",{type:"date",className:"w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:C,onChange:O=>U(O.target.value)})]}),g.jsx("div",{className:"w-full lg:w-auto pb-2",children:g.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[g.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:L,onChange:O=>j(O.target.checked),style:{right:L?"0":"auto",left:L?"auto":"0",borderColor:L?"#4F46E5":"#E5E7EB"}}),g.jsx("label",{htmlFor:"toggle",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${L?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`})]}),g.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mostrar Passados"})]})})]}),u?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((O,J)=>g.jsx(HO,{},J))}):ue.length===0?g.jsx(v1,{title:"Nenhum evento encontrado",description:t.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":L?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'.",action:!L&&t.length>0?{label:"Ver histrico de eventos",onClick:()=>j(!0)}:void 0}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:le.map(O=>g.jsx($O,{event:O,hasChildren:W.has(O.id),onAction:Re},O.id))}),g.jsx(BO,{currentPage:N,totalItems:ue.length,itemsPerPage:Ne,onPageChange:be})]}),g.jsx(Sa,{isOpen:!!f,onClose:()=>m(null),title:f?f.name:"",children:g.jsxs("div",{className:"space-y-6",children:[g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:g.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:f==null?void 0:f.description})}),oe&&g.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md animate-slide-in",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),g.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[g.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),g.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[g.jsx("p",{className:"font-semibold",children:oe.name}),g.jsx("p",{className:"text-xs",children:oe.time})]})]})]})]})}),g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[g.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),g.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:f==null?void 0:f.sessions.map(O=>{const J=_e(f.id,O.id),ce=!!J,me=O.filled>=O.capacity,ye=O.filled/O.capacity*100,Te=O.date<new Date().toISOString().split("T")[0];return g.jsx("div",{className:`relative border rounded-lg p-4 transition-all duration-200 
                                ${ce?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":me||Te?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-70":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:br(O.date)}),ce&&g.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),Te&&!ce&&g.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),g.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:g.jsxs("span",{className:"flex items-center",children:[" ",O.startTime," - ",O.endTime]})}),g.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[g.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full ${me?"bg-red-500":ye>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(ye,100)}%`}})}),g.jsx("span",{className:`text-xs font-bold w-24 text-right ${me?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:me?"ESGOTADO":f.isTeamEvent?`${O.capacity-O.filled} equipes`:`${O.capacity-O.filled} vagas`})]})]}),g.jsx("div",{className:"flex items-center",children:ce?g.jsx("button",{onClick:()=>J&&_(J.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):g.jsx(Ri,{onClick:()=>f&&F(f,O.id),isLoading:q,disabled:me||Te,className:`w-full sm:w-auto ${me||Te?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed hover:bg-gray-300":""}`,children:Te?"Encerrado":me?"Lotado":"Garantir Vaga"})})]})},O.id)})})]})]})}),g.jsx(Ry,{isOpen:!!v,onClose:()=>_(null),onConfirm:()=>v&&K(v),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:q})]})},QO=()=>{const[r,e]=V.useState([]),[t,i]=V.useState([]),[a,l]=V.useState(!0);return V.useEffect(()=>{(async()=>{l(!0);const p=await Ge.getPublicEvents(),f=p.filter(v=>v.hasDedicatedPage).slice(0,3),m=p.filter(v=>!v.hasDedicatedPage).slice(0,8);e(f),i(m),l(!1)})()},[]),g.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg flex flex-col font-sans transition-colors duration-300",children:[g.jsx("nav",{className:"bg-white/80 dark:bg-darkcard/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700 sticky top-0 z-50 transition-colors",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between h-20 items-center",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-lg",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsx("span",{className:"text-gray-900 dark:text-white font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),g.jsx("div",{className:"flex items-center space-x-4",children:g.jsx(lt,{to:"/login",className:"text-gray-500 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 font-medium px-3 py-2 transition-colors",children:"Acessar Painel"})})]})})}),g.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16",children:[r.length>0&&g.jsxs("section",{className:"animate-fade-in",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Eventos em Destaque"}),g.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Confira as pginas exclusivas dos nossos principais eventos."})]}),g.jsx("div",{className:"grid gap-8 lg:grid-cols-2",children:r.map(u=>{var p,f,m,v,_;return g.jsxs(lt,{to:`/special/${u.id}`,className:"group relative bg-white dark:bg-darkcard rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col min-h-[300px] border border-gray-100 dark:border-gray-700",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent dark:from-primary/20 opacity-50"}),((m=(f=(p=u.dedicatedPageConfig)==null?void 0:p.gallery)==null?void 0:f[0])==null?void 0:m.url)&&g.jsxs("div",{className:"h-48 w-full overflow-hidden relative",children:[g.jsx("img",{src:u.dedicatedPageConfig.gallery[0].url,alt:u.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),g.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),g.jsxs("div",{className:"p-8 relative z-10 flex flex-col flex-1",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 uppercase tracking-wide",children:" Especial"}),g.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:br((v=u.sessions[0])==null?void 0:v.date)})]}),g.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:u.name}),g.jsx("p",{className:"text-gray-600 dark:text-gray-300 line-clamp-2 mb-6",children:((_=u.dedicatedPageConfig)==null?void 0:_.presentationText)||u.description}),g.jsxs("div",{className:"mt-auto flex items-center font-bold text-primary dark:text-indigo-400 group-hover:translate-x-1 transition-transform",children:["Ver Pgina Exclusiva ",g.jsx("span",{className:"ml-2",children:""})]})]})]},u.id)})})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"mb-6 flex items-end justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda Pblica"}),g.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Prximas atividades abertas  comunidade."})]}),g.jsx(lt,{to:"/login",className:"hidden sm:block text-primary dark:text-indigo-400 hover:text-indigo-600 font-medium text-sm",children:"Ver todos no painel "})]}),a?g.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(u=>g.jsx("div",{className:"bg-white dark:bg-darkcard h-40 rounded-xl animate-pulse"},u))}):t.length===0?g.jsx("div",{className:"text-center py-16 bg-white dark:bg-darkcard rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:g.jsx("p",{className:"text-gray-400",children:"Nenhum outro evento pblico agendado no momento."})}):g.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(u=>{var v,_;const p=(v=u.sessions[0])!=null&&v.date?new Date(u.sessions[0].date):new Date,f=p.getDate(),m=p.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return g.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-md transition-shadow p-5 border border-gray-100 dark:border-gray-700 flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg p-2 text-center min-w-[50px]",children:[g.jsx("span",{className:"block text-xs font-bold",children:m}),g.jsx("span",{className:"block text-lg font-extrabold leading-none",children:f})]}),g.jsx(lt,{to:"/login",className:"bg-primary/10 text-primary hover:bg-primary hover:text-white dark:text-indigo-400 dark:hover:bg-indigo-600 dark:hover:text-white px-3 py-1 rounded-full text-xs font-bold transition-colors",children:"Inscrever"})]}),g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:u.name}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:u.description}),g.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center",children:[g.jsxs("span",{className:"mr-2",children:[" ",u.location]}),g.jsxs("span",{children:[" ",(_=u.sessions[0])==null?void 0:_.startTime]})]})]},u.id)})})]})]}),g.jsx("footer",{className:"bg-white dark:bg-darkcard border-t border-gray-200 dark:border-gray-700 mt-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center",children:[g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 2024 EduEvent. Todos os direitos reservados."}),g.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[g.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Contato"}),g.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Privacidade"}),g.jsx(lt,{to:"/login",className:"text-gray-400 hover:text-primary",children:"rea do Aluno"})]})]})})]})},YO=()=>{var D,M,k,F,K,q,oe;const{id:r}=dw(),[e,t]=V.useState(null),[i,a]=V.useState([]),[l,u]=V.useState(!0),[p,f]=V.useState("about");V.useEffect(()=>{(async()=>{if(r)try{const[fe,R]=await Promise.all([Ge.getEventById(r),Ge.getEventsByParentId(r)]);t(fe||null),a(R)}catch(fe){console.error("Failed to load dedicated page data",fe)}finally{u(!1)}})()},[r]);const m=V.useMemo(()=>{var U,L;if(!e)return[];const ae=((U=e.dedicatedPageConfig)==null?void 0:U.schedule)||[],fe=[];i.forEach(j=>{j.sessions.forEach(N=>{fe.push({id:`sub_${j.id}_${N.id}`,time:N.startTime,title:j.name,description:`${j.description||""}  Local: ${j.location||"No informado"}`,dateLabel:mE(N.date),rawDate:N.date})})});const R=((L=e.sessions[0])==null?void 0:L.date)||"";return[...ae.map(j=>{const N=j.date||R;return{...j,rawDate:N,dateLabel:N?mE(N):"Data a definir"}}),...fe].sort((j,N)=>{const be=j.rawDate||"9999-99-99",Ne=N.rawDate||"9999-99-99";return be!==Ne?be.localeCompare(Ne):j.time.localeCompare(N.time)})},[e,i]),v=V.useMemo(()=>{const ae=new Map;return m.forEach(fe=>{var C;const R=fe.rawDate||"unknown",I=fe.dateLabel||"Data a definir";ae.has(R)||ae.set(R,{label:I,items:[]}),(C=ae.get(R))==null||C.items.push(fe)}),Array.from(ae.values())},[m]);if(l)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-gray-500",children:"Carregando evento..."});if(!e||!e.hasDedicatedPage)return g.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-darkbg px-4 text-center",children:[g.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:"Pgina no encontrada"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Este evento no possui uma pgina dedicada ou no existe."}),g.jsx(lt,{to:"/",className:"text-primary hover:underline",children:"Voltar para Home"})]});const _=e.dedicatedPageConfig||{gallery:[]},b=_.themeColor||"#4F46E5",T={"--theme-color":b};return g.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg text-gray-900 dark:text-gray-100 font-sans selection:bg-opacity-30 selection:bg-[var(--theme-color)]",style:T,children:[g.jsxs("header",{className:"relative bg-darkbg text-white overflow-hidden min-h-[55vh] flex flex-col justify-end pb-12",children:[((M=(D=_.gallery)==null?void 0:D[0])==null?void 0:M.url)&&g.jsxs("div",{className:"absolute inset-0 z-0",children:[g.jsx("img",{src:_.gallery[0].url,alt:"Background",className:"w-full h-full object-cover opacity-40 blur-sm scale-105 transform origin-center animate-fade-in"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-darkbg via-darkbg/60 to-transparent"})]}),g.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 w-full animate-slide-in",children:[g.jsxs(lt,{to:"/",className:"inline-flex items-center mb-8 text-white/70 hover:text-white transition-colors text-sm font-medium group",children:[g.jsx("span",{className:"mr-2 group-hover:-translate-x-1 transition-transform",children:""})," Voltar para Eventos"]}),g.jsx("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6",children:g.jsxs("div",{className:"max-w-4xl",children:[g.jsx("span",{className:"inline-block py-1 px-3 rounded text-[10px] font-bold tracking-widest mb-4 uppercase text-white bg-[var(--theme-color)] shadow-lg shadow-[var(--theme-color)]/20",children:"Evento em Destaque"}),g.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-4 leading-tight text-white drop-shadow-sm",children:e.name}),g.jsx("p",{className:"text-lg md:text-xl text-white/80 font-light max-w-2xl leading-relaxed",children:e.description})]})})]})]}),g.jsx("div",{className:"sticky top-0 z-40 bg-white/90 dark:bg-darkcard/90 backdrop-blur-md shadow-sm border-b border-gray-200 dark:border-gray-700",children:g.jsx("div",{className:"max-w-7xl mx-auto px-6",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsx("nav",{className:"flex space-x-1 h-full overflow-x-auto no-scrollbar",children:["about","schedule","gallery"].map(ae=>g.jsxs("button",{onClick:()=>f(ae),className:`relative px-5 inline-flex items-center h-full text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap
                                        ${p===ae?"text-[var(--theme-color)]":"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[ae==="about"&&"Viso Geral",ae==="schedule"&&"Cronograma",ae==="gallery"&&"Galeria",p===ae&&g.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--theme-color)] shadow-[0_0_10px_var(--theme-color)]"})]},ae))}),g.jsx("div",{className:"hidden md:flex items-center pl-6 border-l border-gray-200 dark:border-gray-700",children:g.jsx(lt,{to:"/login",className:"inline-flex items-center justify-center px-6 py-2 rounded-full font-bold text-white text-sm shadow-lg transform transition hover:-translate-y-0.5 active:translate-y-0 hover:shadow-xl",style:{backgroundColor:b},children:"Garantir Vaga"})})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in min-h-[40vh]",children:[p==="about"&&g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[g.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[g.jsxs("section",{children:[g.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Sobre o Evento"}),g.jsx("div",{className:"prose dark:prose-invert prose-lg max-w-none text-gray-600 dark:text-gray-300 leading-relaxed",children:g.jsx("p",{className:"whitespace-pre-line",children:_.presentationText||"Junte-se a ns para uma experincia inesquecvel. Este evento foi cuidadosamente planejado para oferecer o melhor contedo e oportunidades de networking."})})]}),i.length>0&&g.jsxs("section",{className:"pt-8 border-t border-gray-100 dark:border-gray-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Destaques da Programao"}),g.jsx("button",{onClick:()=>f("schedule"),className:"text-sm font-bold text-[var(--theme-color)] hover:underline hidden sm:block",children:"Ver tudo "})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(ae=>g.jsxs("div",{className:"group relative bg-white dark:bg-darkcard rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-xl hover:border-transparent transition-all duration-300 flex flex-col justify-between overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--theme-color)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsx("span",{className:"inline-block px-2 py-1 rounded bg-gray-50 dark:bg-gray-800 text-[10px] font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Atividade"}),g.jsx("span",{className:"text-[var(--theme-color)] opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300",children:""})]}),g.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 leading-tight group-hover:text-[var(--theme-color)] transition-colors",children:ae.name}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 mb-4 leading-relaxed",children:ae.description})]}),g.jsxs("div",{className:"pt-4 border-t border-gray-50 dark:border-gray-800 flex items-center justify-between text-xs font-medium text-gray-400 dark:text-gray-500",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),ae.sessions.length>0?ae.sessions[0].startTime:"TBA"]}),g.jsxs("div",{className:"flex items-center",children:[g.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),ae.location]})]})]},ae.id))})]})]}),g.jsx("div",{className:"lg:col-span-4 space-y-8",children:g.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-8 sticky top-24",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:"Informaes do Evento"}),g.jsxs("ul",{className:"space-y-6",children:[g.jsxs("li",{className:"flex items-start",children:[g.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),g.jsxs("div",{children:[g.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Data Principal"}),g.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:br((k=e.sessions[0])==null?void 0:k.date)})]})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),g.jsxs("div",{children:[g.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Horrio"}),g.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[(F=e.sessions[0])==null?void 0:F.startTime," s ",(K=e.sessions[0])==null?void 0:K.endTime]})]})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),g.jsxs("div",{children:[g.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Localizao"}),g.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:e.location})]})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),g.jsxs("div",{children:[g.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Capacidade"}),g.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[e.sessions.reduce((ae,fe)=>ae+fe.capacity,0)," vagas totais"]})]})]})]}),g.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:g.jsx(lt,{to:"/login",className:"w-full flex items-center justify-center px-4 py-3 rounded-xl font-bold text-white shadow-lg transition transform hover:scale-[1.02]",style:{backgroundColor:b},children:"Inscrever-se"})})]})})]}),p==="schedule"&&g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Cronograma Completo"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Acompanhe todos os horrios e atividades."})]}),v.length===0?g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:g.jsx("p",{className:"text-gray-500",children:"Programao detalhada em breve."})}):g.jsx("div",{className:"space-y-16",children:v.map((ae,fe)=>{const{label:R,items:I}=ae,C=R.includes(",")?R.split(","):[R,""];return g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"sticky top-20 z-20 bg-gray-50/95 dark:bg-darkbg/95 backdrop-blur-sm py-4 mb-8 border-b border-gray-200 dark:border-gray-700 flex items-center",children:C[1]?g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"px-3 py-1 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm font-bold shadow-sm mr-3 uppercase",children:[C[0]," "]}),g.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[C[1]," "]})]}):g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:R})}),g.jsx("div",{className:"relative border-l-2 border-gray-200 dark:border-gray-800 ml-4 md:ml-6 space-y-12 pb-4",children:I.map((U,L)=>g.jsxs("div",{className:"relative pl-8 md:pl-12 group",children:[g.jsx("div",{className:"absolute -left-[9px] top-1.5 h-[18px] w-[18px] rounded-full border-4 border-white dark:border-darkbg shadow-sm transition-transform group-hover:scale-125",style:{backgroundColor:b}}),g.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2 md:gap-8 mb-2",children:[g.jsx("div",{className:"flex-shrink-0 w-20 pt-1",children:g.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:U.time})}),g.jsxs("div",{className:"flex-1 bg-white dark:bg-darkcard p-5 rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm group-hover:shadow-md transition-shadow",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 group-hover:text-[var(--theme-color)] transition-colors",children:U.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:U.description})]})]})]},L))})]},fe)})})]}),p==="gallery"&&g.jsxs("div",{children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Galeria de Fotos"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Momentos marcantes."})]}),((q=_.gallery)==null?void 0:q.length)===0?g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:g.jsx("p",{className:"text-gray-500",children:"Imagens indisponveis no momento."})}):g.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6",children:(oe=_.gallery)==null?void 0:oe.map((ae,fe)=>g.jsxs("div",{className:"break-inside-avoid group relative rounded-2xl overflow-hidden shadow-md cursor-zoom-in",children:[g.jsx("img",{src:ae.url,alt:ae.caption||`Imagem ${fe+1}`,className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6",children:ae.caption&&g.jsx("p",{className:"text-white font-medium transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:ae.caption})})]},fe))})]})]}),g.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50 animate-bounce-slow",children:g.jsx(lt,{to:"/login",className:"flex items-center justify-center w-14 h-14 rounded-full text-white shadow-xl shadow-indigo-900/20 hover:scale-110 transition-transform",style:{backgroundColor:b},children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]})},XO=r=>{const[e,t]=V.useState([]),[i,a]=V.useState(null),[l,u]=V.useState(!1),[p,f]=V.useState({}),[m,v]=V.useState({}),{addToast:_}=yl(),b=V.useCallback(async K=>{const q=[...new Set(K)],oe={};return await Promise.all(q.map(async ae=>{if(r&&r.uid===ae){oe[ae]=r;return}try{const fe=await Ge.getUserProfile(ae);fe&&(oe[ae]=fe)}catch{console.error("Error fetching profile",ae)}})),oe},[r]),T=V.useCallback(async K=>{if(r){u(!0);try{const[q,oe]=await Promise.all([Ge.getTeamsForEvent(K),Ge.getEnrollmentsForUser(r.uid)]);t(q);const ae=q.map(I=>I.captainId),fe=await b(ae);f(I=>({...I,...fe}));const R=oe.find(I=>I.eventId===K);if(R&&R.teamId){const I=q.find(C=>C.id===R.teamId);if(a(I||null),I){const C=await b(I.members);v(U=>({...U,...C}))}}else a(null)}catch(q){console.error(q)}finally{u(!1)}}},[r,b]);return{teams:e,myTeam:i,loading:l,captainProfiles:p,memberProfiles:m,loadTeams:T,createTeam:async(K,q)=>{if(!r)return null;u(!0);try{const oe=await Ge.createTeam(K.id,q,r);return await T(K.id),oe}catch(oe){return _("error",oe.message),null}finally{u(!1)}},joinTeam:async(K,q)=>{if(!r)return!1;u(!0);try{return await Ge.joinTeam(K.id,r,q),await T(K.eventId),!0}catch(oe){return _("error",oe.message),!1}finally{u(!1)}},leaveTeam:async()=>{if(!(!r||!i)){u(!0);try{await Ge.leaveTeam(i.id,r.uid),await T(i.eventId)}catch(K){_("error",K.message)}finally{u(!1)}}},kickMember:async K=>{if(i){u(!0);try{await Ge.kickMember(i.id,K),await T(i.eventId)}catch(q){_("error",q.message)}finally{u(!1)}}}}},JO=({event:r,user:e,onStatusChange:t,initialCode:i})=>{var ue;const{teams:a,myTeam:l,loading:u,captainProfiles:p,memberProfiles:f,loadTeams:m,createTeam:v,joinTeam:_,leaveTeam:b,kickMember:T}=XO(e),[D,M]=V.useState("join"),{addToast:k}=yl(),[F,K]=V.useState(null),[q,oe]=V.useState(null),[ae,fe]=V.useState(null),[R,I]=V.useState(""),[C,U]=V.useState(!1);V.useEffect(()=>{m(r.id)},[r.id,m]),V.useEffect(()=>{if(i&&!l&&a.length>0){const le=a.find(_e=>_e.code===i.toUpperCase());le&&(M("join"),I(i.toUpperCase()),oe(le))}},[i,a,l]);const L=async le=>{const _e=await v(r,le);_e&&(K(_e),k("success","Equipe criada com sucesso!"),t())},j=()=>{if(q){if(R.toUpperCase()!==q.code){k("error","Cdigo incorreto.");return}fe(q),oe(null)}},N=async()=>{if(!ae)return;await _(ae,ae.code)&&(k("success","Voc entrou na equipe!"),fe(null),t())},be=async()=>{await b(),k("success","Voc saiu da equipe."),t()},Ne=async le=>{try{await navigator.clipboard.writeText(le),k("success","Copiado!")}catch{try{const Re=document.createElement("textarea");Re.value=le,Re.style.position="fixed",document.body.appendChild(Re),Re.focus(),Re.select(),document.execCommand("copy"),document.body.removeChild(Re),k("success","Copiado!")}catch{k("error","Erro ao copiar.")}}},W=async()=>{if(!l||C)return;U(!0);const _e=`${window.location.href.split("?")[0]}?teamCode=${l.code}`,Re=`Venha fazer parte da equipe "${l.name}" no evento ${r.name}! Use o cdigo: ${l.code}`,O={title:`Entre na equipe ${l.name}`,text:Re,url:_e};try{if(navigator.share&&navigator.canShare&&navigator.canShare(O))await navigator.share(O);else throw new Error("Web Share API not supported")}catch{const ce=`${Re}
Link: ${_e}`;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(ce),k("success","Link copiado para a rea de transferncia!");else throw new Error("Clipboard API unavailable")}catch{try{const ye=document.createElement("textarea");ye.value=ce,ye.style.position="fixed",ye.style.left="-9999px",ye.style.top="0",document.body.appendChild(ye),ye.focus(),ye.select();const Te=document.execCommand("copy");if(document.body.removeChild(ye),!Te)throw new Error("Legacy copy failed");k("success","Link copiado para a rea de transferncia!")}catch{k("error","No foi possvel compartilhar. Copie o cdigo manualmente.")}}}finally{setTimeout(()=>U(!1),1e3)}};return l?g.jsxs("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg overflow-hidden animate-fade-in",children:[g.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-6 text-white relative",children:[g.jsx("div",{className:"absolute top-4 right-4 bg-white/20 backdrop-blur rounded-full px-3 py-1 text-xs font-bold uppercase tracking-wider",children:"Minha Equipe"}),g.jsx("h3",{className:"text-2xl md:text-3xl font-extrabold mb-1 pr-24 md:pr-0",children:l.name}),g.jsx("div",{className:"flex items-center gap-2 opacity-90 text-sm",children:g.jsxs("span",{children:["Capito: ",l.captainId===e.uid?"Voc":((ue=p[l.captainId])==null?void 0:ue.name)||"Desconhecido"]})})]}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[g.jsxs("div",{className:"w-full md:w-auto",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Cdigo de Acesso"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-800 px-3 py-1 rounded border border-gray-200 dark:border-gray-700",children:[g.jsx("code",{className:"text-2xl font-mono font-bold text-primary dark:text-indigo-400 tracking-wide select-all",children:l.code}),g.jsx("button",{onClick:()=>Ne(l.code),className:"p-1.5 text-gray-500 hover:text-indigo-600 transition-colors",title:"Copiar",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),g.jsxs("button",{onClick:W,disabled:C,className:`flex items-center gap-2 px-3 py-1.5 bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-md text-sm font-bold transition-colors ${C?"opacity-50 cursor-wait":"hover:bg-indigo-200 dark:hover:bg-indigo-900/60"}`,children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),C?"...":"Compartilhar"]})]})]}),g.jsxs("div",{className:"w-full md:w-auto text-left md:text-right",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Membros"}),g.jsx("span",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:l.members.length})]})]}),g.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4",children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm",children:"Integrantes"}),g.jsx("ul",{className:"space-y-2 mb-6",children:l.members.map(le=>{var _e,Re;return g.jsxs("li",{className:"flex justify-between items-center text-sm p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-300 font-bold text-xs",children:(((_e=f[le])==null?void 0:_e.name)||"U").charAt(0)}),g.jsxs("span",{className:`text-gray-700 dark:text-gray-300 ${le===e.uid?"font-bold":""}`,children:[le===e.uid?"Voc":((Re=f[le])==null?void 0:Re.name)||"Carregando...",le===l.captainId&&" "]})]}),l.captainId===e.uid&&le!==e.uid&&g.jsx("button",{onClick:()=>T(le),className:"text-red-500 hover:text-red-700 text-xs font-bold px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20",children:"Remover"})]},le)})}),g.jsx(Ri,{onClick:be,isLoading:u,variant:"danger",className:"w-full",children:l.captainId===e.uid?"Desfazer Equipe e Sair":"Sair da Equipe"})]})]})]}):g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-gray-800 rounded-lg mb-6",children:[g.jsx("button",{onClick:()=>M("join"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${D==="join"?"bg-white dark:bg-darkcard text-primary shadow-sm":"text-gray-500 dark:text-gray-400"}`,children:"Entrar em Equipe"}),g.jsx("button",{onClick:()=>M("create"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${D==="create"?"bg-white dark:bg-darkcard text-primary shadow-sm":"text-gray-500 dark:text-gray-400"}`,children:"Criar Nova Equipe"})]}),D==="join"&&g.jsx("div",{className:"space-y-4",children:g.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[300px] overflow-y-auto pr-1",children:a.length===0?g.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[g.jsx("span",{className:"text-2xl block mb-2",children:""}),g.jsxs("p",{children:["Nenhuma equipe criada ainda.",g.jsx("br",{}),"Seja o primeiro a criar!"]})]}):a.map(le=>{var _e;return g.jsxs("div",{className:"group bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center hover:shadow-md transition-all gap-4",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-lg",children:""}),g.jsxs("div",{className:"min-w-0",children:[g.jsx("span",{className:"font-bold text-gray-900 dark:text-white block truncate",children:le.name}),g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[g.jsxs("span",{children:["Capito: ",((_e=p[le.captainId])==null?void 0:_e.name)||"..."]}),g.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),g.jsxs("span",{className:"text-primary dark:text-indigo-400 font-bold",children:[le.members.length," membros"]})]})]})]}),g.jsx("button",{onClick:()=>{I(""),oe(le)},className:"w-full sm:w-auto px-4 py-2 bg-gray-50 dark:bg-gray-800 text-primary dark:text-indigo-400 font-bold text-sm rounded-lg hover:bg-primary hover:text-white transition-colors",children:"Entrar"})]},le.id)})})}),D==="create"&&g.jsxs("div",{className:"space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Escolha um horrio para registrar sua equipe:"}),g.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-1",children:r.sessions.map(le=>{const _e=le.filled>=le.capacity;return g.jsxs("div",{className:`p-4 border rounded-xl flex flex-col sm:flex-row justify-between items-start sm:items-center transition-all ${_e?"bg-gray-50 opacity-60":"bg-white dark:bg-darkcard hover:border-primary/50"}`,children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[g.jsx("span",{children:br(le.date)}),g.jsx("span",{className:"text-xs text-gray-400",children:"|"}),g.jsxs("span",{children:[le.startTime," - ",le.endTime]})]}),g.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:_e?"Esgotado":`${le.capacity-le.filled} slots disponveis`})]}),g.jsx(Ri,{onClick:()=>L(le.id),isLoading:u,disabled:_e,className:`w-full sm:w-auto mt-3 sm:mt-0 ${_e?"bg-gray-300":"bg-primary"}`,children:_e?"Lotado":"Criar Aqui"})]},le.id)})})]}),g.jsx(Sa,{isOpen:!!F,onClose:()=>K(null),title:"Equipe Criada!",children:F&&g.jsxs("div",{className:"space-y-5 text-center",children:[g.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-900",children:[g.jsx("span",{className:"text-3xl block mb-2",children:""}),g.jsx("h3",{className:"font-bold text-green-800 dark:text-green-300",children:"Sucesso!"}),g.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["Sua equipe ",g.jsx("strong",{children:F.name})," est ativa."]})]}),g.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Cdigo de Acesso"}),g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx("code",{className:"text-3xl font-mono font-bold text-primary dark:text-indigo-400",children:F.code}),g.jsx("button",{onClick:()=>Ne(F.code),className:"p-2 bg-white dark:bg-gray-700 rounded-full shadow-sm hover:text-primary",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),g.jsx("button",{onClick:()=>K(null),className:"w-full bg-primary text-white font-bold py-3 rounded-lg",children:"Continuar"})]})}),g.jsx(Sa,{isOpen:!!q,onClose:()=>oe(null),title:"Cdigo de Acesso",children:g.jsxs("div",{className:"space-y-4 pt-2",children:[g.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Digite o cdigo da equipe ",g.jsx("strong",{children:q==null?void 0:q.name}),"."]}),g.jsx(wa,{label:"Cdigo",value:R,onChange:le=>I(le.target.value.toUpperCase()),className:"text-center font-mono text-xl uppercase",autoFocus:!0}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>oe(null),className:"px-4 py-2 text-gray-500",children:"Cancelar"}),g.jsx("button",{onClick:j,className:"px-6 py-2 bg-primary text-white rounded font-bold",children:"Verificar"})]})]})}),g.jsx(Sa,{isOpen:!!ae,onClose:()=>fe(null),title:"Confirmar Entrada",children:g.jsxs("div",{className:"space-y-4 text-center",children:[g.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Deseja entrar na equipe ",g.jsx("strong",{children:ae==null?void 0:ae.name}),"?"]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>fe(null),className:"flex-1 py-3 border rounded-lg text-gray-600",children:"Cancelar"}),g.jsx(Ri,{onClick:N,isLoading:u,className:"flex-1 py-3 bg-green-600 text-white rounded-lg",children:"Confirmar"})]})]})})]})},WO=()=>{const{id:r}=dw(),{user:e}=Ps(),t=Oa(),i=ar(),[a,l]=V.useState(null),[u,p]=V.useState([]),[f,m]=V.useState([]),[v,_]=V.useState(!0),[b,T]=V.useState(null),[D,M]=V.useState(null),[k,F]=V.useState(null),K=V.useCallback(async(j=!0)=>{if(!(!r||!e)){j&&_(!0);try{const[N,be,Ne]=await Promise.all([Ge.getEventById(r),Ge.getEventsByParentId(r),Ge.getEnrollmentsForUser(e.uid)]);if(!N){t("/dashboard");return}l(N),p(be),m(Ne)}catch(N){console.error(N)}finally{j&&_(!1)}}},[r,e,t]),q=V.useCallback(()=>{K(!1),F(null)},[K]),{handleEnroll:oe,handleCancel:ae,isProcessing:fe,conflictData:R,clearState:I}=y1(e,q);V.useEffect(()=>{K()},[K]),V.useEffect(()=>{if(b){const N=[a,...u].filter(Boolean).find(be=>be.id===b.id);N&&JSON.stringify(N)!==JSON.stringify(b)&&T(N)}},[a,u,b]),V.useEffect(()=>{if(!v&&a){const j=new URLSearchParams(i.search),N=j.get("teamCode");if(N){let be=a.isTeamEvent?a:u.find(Ne=>Ne.isTeamEvent);be&&(M(N),T(be),j.delete("teamCode"),t({pathname:i.pathname,search:j.toString()},{replace:!0}))}}},[v,a,u,i.search,t]);const C=j=>{I(),T(j)},U=()=>{T(null),M(null)},L=(j,N)=>f.find(be=>be.eventId===j&&be.sessionId===N);return v?g.jsx("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400 font-medium",children:"Carregando detalhes do evento..."}):a?g.jsxs("div",{className:"space-y-8 pb-12",children:[g.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:g.jsxs("ol",{className:"flex items-center space-x-2",children:[g.jsx("li",{children:g.jsx(lt,{to:"/dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-indigo-400 font-medium transition",children:"Eventos"})}),g.jsx("li",{children:g.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"/"})}),g.jsx("li",{className:"text-gray-900 dark:text-white font-semibold","aria-current":"page",children:a.name})]})}),g.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),g.jsx("div",{className:"p-8 md:p-10",children:g.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex gap-2 mb-4",children:[g.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-xs font-bold uppercase tracking-wide border border-indigo-100 dark:border-indigo-900/50",children:"Evento Principal"}),a.isTeamEvent&&g.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-xs font-bold uppercase tracking-wide border border-purple-100 dark:border-purple-900/50",children:" Evento por Equipe"})]}),g.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight",children:a.name}),g.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-4xl",children:a.description}),g.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 dark:text-gray-400 text-sm font-medium",children:[g.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[g.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.location]}),g.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[g.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.sessions.length," Sesses Principais"]})]})]}),a.sessions.length>0&&g.jsx("div",{className:"flex-shrink-0",children:g.jsxs("button",{onClick:()=>C(a),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao",g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7 7"})})]})})]})})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Atividades & Sub-eventos"}),g.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"})]}),u.length===0?g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-12 text-center",children:[g.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(j=>{const N=j.sessions.length===1?j.sessions[0]:null,be=N?N.capacity:0,Ne=N?N.filled:0,W=be>0?Ne/be*100:0,ue=be>0&&Ne>=be,le=j.sessions.some(_e=>L(j.id,_e.id));return g.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col relative",children:[g.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 dark:bg-gray-700 group-hover:bg-primary transition-colors"}),g.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:j.name}),j.isTeamEvent&&g.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full font-bold",children:"EQUIPE"})]}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-1",children:j.description}),g.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto pt-4 border-t border-gray-50 dark:border-gray-700",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),g.jsx("span",{className:"font-medium",children:j.location})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),g.jsx("span",{className:"font-medium",children:j.sessions.length>1?`${j.sessions.length} opes de horrio`:`${br(N==null?void 0:N.date)}  ${N==null?void 0:N.startTime}`})]})]}),N&&g.jsxs("div",{className:"mt-4",children:[g.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:g.jsx("span",{className:ue?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:ue?"LOTADO":j.isTeamEvent?`${be-Ne} equipes restantes`:`${be-Ne} vagas`})}),g.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5",children:g.jsx("div",{className:`h-full rounded-full ${ue?"bg-red-500":"bg-emerald-500"}`,style:{width:`${W}%`}})})]})]}),g.jsx("button",{onClick:()=>C(j),className:`w-full py-3 font-bold text-sm transition-colors border-t border-gray-100 dark:border-gray-700 ${le?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"bg-gray-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white text-primary dark:text-indigo-300"}`,children:le?"Gerenciar Inscrio":"Inscrever-se Agora"})]},j.id)})}),g.jsx(Sa,{isOpen:!!b,onClose:U,title:b?b.name:"",children:g.jsxs("div",{className:"space-y-6",children:[g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:g.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:b==null?void 0:b.description})}),R&&g.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),g.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[g.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),g.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[g.jsx("p",{className:"font-semibold",children:R.name}),g.jsx("p",{className:"text-xs",children:R.time})]})]})]})]})}),b!=null&&b.isTeamEvent&&e?g.jsx(JO,{event:b,user:e,onStatusChange:()=>K(!1),initialCode:D}):g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[g.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),g.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:b==null?void 0:b.sessions.map(j=>{const N=L(b.id,j.id),be=!!N,Ne=j.filled>=j.capacity,W=j.filled/j.capacity*100;return g.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${be?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":Ne?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-90":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:br(j.date)}),be&&g.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),g.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:g.jsxs("span",{className:"flex items-center",children:[" ",j.startTime," - ",j.endTime]})}),g.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[g.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full ${Ne?"bg-red-500":W>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(W,100)}%`}})}),g.jsx("span",{className:`text-xs font-bold w-24 text-right ${Ne?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:Ne?"ESGOTADO":b.isTeamEvent?`${j.capacity-j.filled} equipes`:`${j.capacity-j.filled} vagas`})]})]}),g.jsx("div",{className:"flex items-center",children:be?g.jsx("button",{onClick:()=>N&&F(N.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 dark:border-red-900 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):g.jsx(Ri,{onClick:()=>b&&oe(b,j.id),isLoading:fe,disabled:Ne,className:`w-full sm:w-auto ${Ne?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":""}`,children:Ne?"Lotado":"Inscrever"})})]})},j.id)})})]})]})}),g.jsx(Ry,{isOpen:!!k,onClose:()=>F(null),onConfirm:()=>k&&ae(k),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:fe})]}):g.jsx("div",{className:"p-12 text-center text-red-500 dark:text-red-400 font-bold",children:"Evento no encontrado."})};var ZO=Object.defineProperty,Oh=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,E1=Object.prototype.propertyIsEnumerable,nw=(r,e,t)=>e in r?ZO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,eM=(r,e)=>{for(var t in e||(e={}))_1.call(e,t)&&nw(r,t,e[t]);if(Oh)for(var t of Oh(e))E1.call(e,t)&&nw(r,t,e[t]);return r},tM=(r,e)=>{var t={};for(var i in r)_1.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&Oh)for(var i of Oh(r))e.indexOf(i)<0&&E1.call(r,i)&&(t[i]=r[i]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ka;(r=>{const e=class{constructor(f,m,v,_){if(this.version=f,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],f<e.MIN_VERSION||f>e.MAX_VERSION)throw new RangeError("Version value out of range");if(_<-1||_>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let b=[];for(let D=0;D<this.size;D++)b.push(!1);for(let D=0;D<this.size;D++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(v);if(this.drawCodewords(T),_==-1){let D=1e9;for(let M=0;M<8;M++){this.applyMask(M),this.drawFormatBits(M);const k=this.getPenaltyScore();k<D&&(_=M,D=k),this.applyMask(M)}}l(0<=_&&_<=7),this.mask=_,this.applyMask(_),this.drawFormatBits(_),this.isFunction=[]}static encodeText(f,m){const v=r.QrSegment.makeSegments(f);return e.encodeSegments(v,m)}static encodeBinary(f,m){const v=r.QrSegment.makeBytes(f);return e.encodeSegments([v],m)}static encodeSegments(f,m,v=1,_=40,b=-1,T=!0){if(!(e.MIN_VERSION<=v&&v<=_&&_<=e.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let D,M;for(D=v;;D++){const q=e.getNumDataCodewords(D,m)*8,oe=p.getTotalBits(f,D);if(oe<=q){M=oe;break}if(D>=_)throw new RangeError("Data too long")}for(const q of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])T&&M<=e.getNumDataCodewords(D,q)*8&&(m=q);let k=[];for(const q of f){i(q.mode.modeBits,4,k),i(q.numChars,q.mode.numCharCountBits(D),k);for(const oe of q.getData())k.push(oe)}l(k.length==M);const F=e.getNumDataCodewords(D,m)*8;l(k.length<=F),i(0,Math.min(4,F-k.length),k),i(0,(8-k.length%8)%8,k),l(k.length%8==0);for(let q=236;k.length<F;q^=253)i(q,8,k);let K=[];for(;K.length*8<k.length;)K.push(0);return k.forEach((q,oe)=>K[oe>>>3]|=q<<7-(oe&7)),new e(D,m,K,b)}getModule(f,m){return 0<=f&&f<this.size&&0<=m&&m<this.size&&this.modules[m][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),m=f.length;for(let v=0;v<m;v++)for(let _=0;_<m;_++)v==0&&_==0||v==0&&_==m-1||v==m-1&&_==0||this.drawAlignmentPattern(f[v],f[_]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const m=this.errorCorrectionLevel.formatBits<<3|f;let v=m;for(let b=0;b<10;b++)v=v<<1^(v>>>9)*1335;const _=(m<<10|v)^21522;l(_>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,a(_,b));this.setFunctionModule(8,7,a(_,6)),this.setFunctionModule(8,8,a(_,7)),this.setFunctionModule(7,8,a(_,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,a(_,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,a(_,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,a(_,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let v=0;v<12;v++)f=f<<1^(f>>>11)*7973;const m=this.version<<12|f;l(m>>>18==0);for(let v=0;v<18;v++){const _=a(m,v),b=this.size-11+v%3,T=Math.floor(v/3);this.setFunctionModule(b,T,_),this.setFunctionModule(T,b,_)}}drawFinderPattern(f,m){for(let v=-4;v<=4;v++)for(let _=-4;_<=4;_++){const b=Math.max(Math.abs(_),Math.abs(v)),T=f+_,D=m+v;0<=T&&T<this.size&&0<=D&&D<this.size&&this.setFunctionModule(T,D,b!=2&&b!=4)}}drawAlignmentPattern(f,m){for(let v=-2;v<=2;v++)for(let _=-2;_<=2;_++)this.setFunctionModule(f+_,m+v,Math.max(Math.abs(_),Math.abs(v))!=1)}setFunctionModule(f,m,v){this.modules[m][f]=v,this.isFunction[m][f]=!0}addEccAndInterleave(f){const m=this.version,v=this.errorCorrectionLevel;if(f.length!=e.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const _=e.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],b=e.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],T=Math.floor(e.getNumRawDataModules(m)/8),D=_-T%_,M=Math.floor(T/_);let k=[];const F=e.reedSolomonComputeDivisor(b);for(let q=0,oe=0;q<_;q++){let ae=f.slice(oe,oe+M-b+(q<D?0:1));oe+=ae.length;const fe=e.reedSolomonComputeRemainder(ae,F);q<D&&ae.push(0),k.push(ae.concat(fe))}let K=[];for(let q=0;q<k[0].length;q++)k.forEach((oe,ae)=>{(q!=M-b||ae>=D)&&K.push(oe[q])});return l(K.length==T),K}drawCodewords(f){if(f.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let _=0;_<this.size;_++)for(let b=0;b<2;b++){const T=v-b,M=(v+1&2)==0?this.size-1-_:_;!this.isFunction[M][T]&&m<f.length*8&&(this.modules[M][T]=a(f[m>>>3],7-(m&7)),m++)}}l(m==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let _;switch(f){case 0:_=(v+m)%2==0;break;case 1:_=m%2==0;break;case 2:_=v%3==0;break;case 3:_=(v+m)%3==0;break;case 4:_=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:_=v*m%2+v*m%3==0;break;case 6:_=(v*m%2+v*m%3)%2==0;break;case 7:_=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&_&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let f=0;for(let b=0;b<this.size;b++){let T=!1,D=0,M=[0,0,0,0,0,0,0];for(let k=0;k<this.size;k++)this.modules[b][k]==T?(D++,D==5?f+=e.PENALTY_N1:D>5&&f++):(this.finderPenaltyAddHistory(D,M),T||(f+=this.finderPenaltyCountPatterns(M)*e.PENALTY_N3),T=this.modules[b][k],D=1);f+=this.finderPenaltyTerminateAndCount(T,D,M)*e.PENALTY_N3}for(let b=0;b<this.size;b++){let T=!1,D=0,M=[0,0,0,0,0,0,0];for(let k=0;k<this.size;k++)this.modules[k][b]==T?(D++,D==5?f+=e.PENALTY_N1:D>5&&f++):(this.finderPenaltyAddHistory(D,M),T||(f+=this.finderPenaltyCountPatterns(M)*e.PENALTY_N3),T=this.modules[k][b],D=1);f+=this.finderPenaltyTerminateAndCount(T,D,M)*e.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let T=0;T<this.size-1;T++){const D=this.modules[b][T];D==this.modules[b][T+1]&&D==this.modules[b+1][T]&&D==this.modules[b+1][T+1]&&(f+=e.PENALTY_N2)}let m=0;for(const b of this.modules)m=b.reduce((T,D)=>T+(D?1:0),m);const v=this.size*this.size,_=Math.ceil(Math.abs(m*20-v*10)/v)-1;return l(0<=_&&_<=9),f+=_*e.PENALTY_N4,l(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let v=[6];for(let _=this.size-7;v.length<f;_-=m)v.splice(1,0,_);return v}}static getNumRawDataModules(f){if(f<e.MIN_VERSION||f>e.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*f+128)*f+64;if(f>=2){const v=Math.floor(f/7)+2;m-=(25*v-10)*v-55,f>=7&&(m-=36)}return l(208<=m&&m<=29648),m}static getNumDataCodewords(f,m){return Math.floor(e.getNumRawDataModules(f)/8)-e.ECC_CODEWORDS_PER_BLOCK[m.ordinal][f]*e.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let m=[];for(let _=0;_<f-1;_++)m.push(0);m.push(1);let v=1;for(let _=0;_<f;_++){for(let b=0;b<m.length;b++)m[b]=e.reedSolomonMultiply(m[b],v),b+1<m.length&&(m[b]^=m[b+1]);v=e.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(f,m){let v=m.map(_=>0);for(const _ of f){const b=_^v.shift();v.push(0),m.forEach((T,D)=>v[D]^=e.reedSolomonMultiply(T,b))}return v}static reedSolomonMultiply(f,m){if(f>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let _=7;_>=0;_--)v=v<<1^(v>>>7)*285,v^=(m>>>_&1)*f;return l(v>>>8==0),v}finderPenaltyCountPatterns(f){const m=f[1];l(m<=this.size*3);const v=m>0&&f[2]==m&&f[3]==m*3&&f[4]==m&&f[5]==m;return(v&&f[0]>=m*4&&f[6]>=m?1:0)+(v&&f[6]>=m*4&&f[0]>=m?1:0)}finderPenaltyTerminateAndCount(f,m,v){return f&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(f,m){m[0]==0&&(f+=this.size),m.pop(),m.unshift(f)}};let t=e;t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=t;function i(f,m,v){if(m<0||m>31||f>>>m)throw new RangeError("Value out of range");for(let _=m-1;_>=0;_--)v.push(f>>>_&1)}function a(f,m){return(f>>>m&1)!=0}function l(f){if(!f)throw new Error("Assertion error")}const u=class{constructor(f,m,v){if(this.mode=f,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(f){let m=[];for(const v of f)i(v,8,m);return new u(u.Mode.BYTE,f.length,m)}static makeNumeric(f){if(!u.isNumeric(f))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<f.length;){const _=Math.min(f.length-v,3);i(parseInt(f.substr(v,_),10),_*3+1,m),v+=_}return new u(u.Mode.NUMERIC,f.length,m)}static makeAlphanumeric(f){if(!u.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=f.length;v+=2){let _=u.ALPHANUMERIC_CHARSET.indexOf(f.charAt(v))*45;_+=u.ALPHANUMERIC_CHARSET.indexOf(f.charAt(v+1)),i(_,11,m)}return v<f.length&&i(u.ALPHANUMERIC_CHARSET.indexOf(f.charAt(v)),6,m),new u(u.Mode.ALPHANUMERIC,f.length,m)}static makeSegments(f){return f==""?[]:u.isNumeric(f)?[u.makeNumeric(f)]:u.isAlphanumeric(f)?[u.makeAlphanumeric(f)]:[u.makeBytes(u.toUtf8ByteArray(f))]}static makeEci(f){let m=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)i(f,8,m);else if(f<16384)i(2,2,m),i(f,14,m);else if(f<1e6)i(6,3,m),i(f,21,m);else throw new RangeError("ECI assignment value out of range");return new u(u.Mode.ECI,0,m)}static isNumeric(f){return u.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return u.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,m){let v=0;for(const _ of f){const b=_.mode.numCharCountBits(m);if(_.numChars>=1<<b)return 1/0;v+=4+b+_.bitData.length}return v}static toUtf8ByteArray(f){f=encodeURI(f);let m=[];for(let v=0;v<f.length;v++)f.charAt(v)!="%"?m.push(f.charCodeAt(v)):(m.push(parseInt(f.substr(v+1,2),16)),v+=2);return m}};let p=u;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.QrSegment=p})(ka||(ka={}));(r=>{(e=>{const t=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let i=t;i.LOW=new t(0,1),i.MEDIUM=new t(1,0),i.QUARTILE=new t(2,3),i.HIGH=new t(3,2),e.Ecc=i})(r.QrCode||(r.QrCode={}))})(ka||(ka={}));(r=>{(e=>{const t=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let i=t;i.NUMERIC=new t(1,[10,12,14]),i.ALPHANUMERIC=new t(2,[9,11,13]),i.BYTE=new t(4,[8,16,16]),i.KANJI=new t(8,[8,10,12]),i.ECI=new t(7,[0,0,0]),e.Mode=i})(r.QrSegment||(r.QrSegment={}))})(ka||(ka={}));var Rc=ka;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var nM={L:Rc.QrCode.Ecc.LOW,M:Rc.QrCode.Ecc.MEDIUM,Q:Rc.QrCode.Ecc.QUARTILE,H:Rc.QrCode.Ecc.HIGH},rM=128,sM="L",iM="#FFFFFF",aM="#000000",oM=!1,b1=4,lM=.1;function cM(r,e=0){const t=[];return r.forEach(function(i,a){let l=null;i.forEach(function(u,p){if(!u&&l!==null){t.push(`M${l+e} ${a+e}h${p-l}v1H${l+e}z`),l=null;return}if(p===i.length-1){if(!u)return;l===null?t.push(`M${p+e},${a+e} h1v1H${p+e}z`):t.push(`M${l+e},${a+e} h${p+1-l}v1H${l+e}z`);return}u&&l===null&&(l=p)})}),t.join("")}function uM(r,e){return r.slice().map((t,i)=>i<e.y||i>=e.y+e.h?t:t.map((a,l)=>l<e.x||l>=e.x+e.w?a:!1))}function dM(r,e,t,i){if(i==null)return null;const a=t?b1:0,l=r.length+a*2,u=Math.floor(e*lM),p=l/e,f=(i.width||u)*p,m=(i.height||u)*p,v=i.x==null?r.length/2-f/2:i.x*p,_=i.y==null?r.length/2-m/2:i.y*p;let b=null;if(i.excavate){let T=Math.floor(v),D=Math.floor(_),M=Math.ceil(f+v-T),k=Math.ceil(m+_-D);b={x:T,y:D,w:M,h:k}}return{x:v,y:_,h:m,w:f,excavation:b}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function hM(r){const e=r,{value:t,size:i=rM,level:a=sM,bgColor:l=iM,fgColor:u=aM,includeMargin:p=oM,imageSettings:f}=e,m=tM(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let v=Rc.QrCode.encodeText(t,nM[a]).getModules();const _=p?b1:0,b=v.length+_*2,T=dM(v,i,p,f);let D=null;f!=null&&T!=null&&(T.excavation!=null&&(v=uM(v,T.excavation)),D=rr.createElement("image",{xlinkHref:f.src,height:T.h,width:T.w,x:T.x+_,y:T.y+_,preserveAspectRatio:"none"}));const M=cM(v,_);return rr.createElement("svg",eM({height:i,width:i,viewBox:`0 0 ${b} ${b}`},m),rr.createElement("path",{fill:l,d:`M0,0 h${b}v${b}H0z`,shapeRendering:"crispEdges"}),rr.createElement("path",{fill:u,d:M,shapeRendering:"crispEdges"}),D)}const fM=()=>{const{user:r}=Ps(),{addToast:e}=yl(),[t,i]=V.useState([]),[a,l]=V.useState(null),[u,p]=V.useState(!0),[f,m]=V.useState(!1),[v,_]=V.useState(null),b=async()=>{if(r){p(!0);try{const k=await Ge.getEnrollmentsForUser(r.uid);if(k.length===0){i([]),p(!1);return}const F=[...new Set(k.map(R=>R.eventId))],K=await Ge.getEventsByIds(F),q=new Map(K.map(R=>[R.id,R])),oe=K.filter(R=>R.isTeamEvent),ae=new Map;await Promise.all(oe.map(async R=>{try{(await Ge.getTeamsForEvent(R.id)).forEach(C=>ae.set(C.id,C))}catch(I){console.error(`Error loading teams for event ${R.id}`,I)}}));const fe=k.map(R=>{const I=q.get(R.eventId);if(!I)return null;const C=I.sessions.find(L=>L.id===R.sessionId);if(!C)return null;const U=R.teamId?ae.get(R.teamId):void 0;return{enrollment:R,event:I,session:C,team:U}}).filter(Boolean);i(fe)}catch(k){console.error("Failed to load enrollments data:",k),e("error","Falha ao carregar inscries."),i([])}finally{p(!1)}}};V.useEffect(()=>{b()},[r]);const T=async()=>{if(a){m(!0);try{await Ge.cancelEnrollment(a),e("success","Inscrio cancelada com sucesso.")}catch(k){console.error(k),e("error","Erro ao cancelar inscrio.")}finally{l(null),m(!1),b()}}},D=async k=>{try{await navigator.clipboard.writeText(k),e("success","Cdigo copiado!")}catch{}},M=new Date().toISOString().split("T")[0];return g.jsxs("div",{className:"space-y-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Minha Agenda"}),u?g.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:g.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Array.from({length:3}).map((k,F)=>g.jsx(FO,{},F))})}):t.length===0?g.jsx(v1,{title:"Agenda Vazia",description:"Voc ainda no se inscreveu em nenhum evento."}):g.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:g.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(({enrollment:k,event:F,session:K,team:q})=>{const oe=K.date<M,ae=k.attended;return g.jsxs("li",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 gap-4 transition-colors",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[F.isTeamEvent&&g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 uppercase tracking-wide border border-indigo-200 dark:border-indigo-800",children:" Equipe"}),ae&&g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 uppercase tracking-wide border border-green-200 dark:border-green-800",children:" Presena Confirmada"}),g.jsx("h3",{className:"text-lg font-medium text-primary dark:text-indigo-400",children:F.name})]}),g.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[g.jsxs("span",{children:[" ",br(K.date)]}),g.jsxs("span",{children:[" ",K.startTime," - ",K.endTime]}),g.jsxs("span",{children:[" ",F.location]})]}),q&&g.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/10 rounded-lg border border-indigo-100 dark:border-indigo-800/30 w-full sm:w-fit",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-lg flex-shrink-0",children:""}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Sua Equipe"}),g.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:q.name})]})]}),g.jsxs("div",{className:"flex items-center gap-2 pl-0 sm:pl-3 border-t sm:border-t-0 sm:border-l border-indigo-200 dark:border-indigo-700 pt-2 sm:pt-0 w-full sm:w-auto",children:[g.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mr-2 sm:mr-0",children:"Cdigo:"}),g.jsxs("button",{onClick:()=>D(q.code),className:"text-xs font-mono font-bold text-indigo-600 dark:text-indigo-300 hover:underline flex items-center gap-1",title:"Copiar Cdigo",children:[q.code," "]})]})]}),oe&&g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 mt-2",children:"Evento Finalizado"})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center flex-shrink-0",children:[g.jsxs("button",{onClick:()=>_({enrollment:k,event:F,session:K}),className:"w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-bold text-white bg-gray-800 hover:bg-black dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm flex items-center justify-center gap-2",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Ticket"]}),g.jsx("button",{onClick:()=>l(k.id),disabled:oe||ae,className:`w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-medium
                                            ${oe||ae?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 cursor-not-allowed":"text-red-600 dark:text-red-400 hover:text-white hover:bg-red-600 dark:hover:bg-red-500 border-red-200 dark:border-red-900/30"}`,children:oe?"Concludo":ae?"Presena Confirmada":F.isTeamEvent?"Sair da Equipe":"Cancelar Inscrio"})]})]},k.id)})})}),g.jsx(Ry,{isOpen:!!a,onClose:()=>l(null),onConfirm:T,title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio neste evento? Se for um evento de equipe, voc sair do grupo e a vaga poder ser perdida.",confirmText:"Sim, Cancelar",cancelText:"Manter Inscrio",isProcessing:f}),g.jsx(Sa,{isOpen:!!v,onClose:()=>_(null),title:"Seu Ticket de Acesso",children:v&&g.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center",children:[g.jsx("div",{className:"bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-6",children:g.jsx(hM,{value:v.enrollment.id,size:200,level:"H",includeMargin:!0})}),g.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:v.event.name}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium mb-4 text-sm uppercase tracking-wide",children:v.enrollment.attended?" Check-in Realizado":"Aguardando Check-in"}),g.jsxs("div",{className:"w-full bg-gray-50 dark:bg-gray-800 rounded-lg p-4 text-sm space-y-2 border border-gray-100 dark:border-gray-700",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Data"}),g.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-200",children:br(v.session.date)})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Horrio"}),g.jsxs("span",{className:"font-bold text-gray-900 dark:text-gray-200",children:[v.session.startTime," - ",v.session.endTime]})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Local"}),g.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-200",children:v.event.location})]}),g.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[g.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Aluno"}),g.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-200",children:r==null?void 0:r.name})]})]}),g.jsx("p",{className:"mt-6 text-xs text-gray-400",children:"Apresente este cdigo QR na entrada do evento para confirmar sua presena."})]})})]})},mM=rr.lazy(()=>il(()=>import("./AdminEvents-BLisGeI2.js"),[]).then(r=>({default:r.AdminEvents}))),gM=rr.lazy(()=>il(()=>import("./AdminUsers-DZjGr4vy.js"),[]).then(r=>({default:r.AdminUsers}))),pM=rr.lazy(()=>il(()=>import("./AdminCourses-DgZU-4Nd.js"),[]).then(r=>({default:r.AdminCourses}))),yM=rr.lazy(()=>il(()=>import("./AdminEventEnrollments-CbSCCLr8.js"),[]).then(r=>({default:r.AdminEventEnrollments}))),vM=rr.lazy(()=>il(()=>import("./DevTools-CFNvcDlk.js"),[]).then(r=>({default:r.DevTools}))),_M=rr.lazy(()=>il(()=>import("./AdminScanner-wFxsywNG.js"),[]).then(r=>({default:r.AdminScanner}))),EM=()=>g.jsx("div",{className:"h-full w-full flex items-center justify-center p-10 min-h-[50vh]",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),Yr=({children:r,roleRequired:e})=>{const{user:t,loading:i}=Ps(),a=ar();return i?g.jsx("div",{className:"h-screen flex items-center justify-center text-primary font-medium dark:bg-darkbg dark:text-gray-200",children:"Carregando EduEvent..."}):t?!t.isOnboarded&&window.location.hash!=="#/complete-profile"?g.jsx(Qd,{to:"/complete-profile"}):e&&t.role!==e?g.jsx(Qd,{to:"/dashboard"}):g.jsx(g.Fragment,{children:r}):g.jsx(Qd,{to:"/login",state:{from:a},replace:!0})},bM=()=>{const{user:r}=Ps();return g.jsx(V.Suspense,{fallback:g.jsx(EM,{}),children:g.jsxs(n2,{children:[g.jsx(Nn,{path:"/",element:r?g.jsx(Qd,{to:"/dashboard"}):g.jsx(QO,{})}),g.jsx(Nn,{path:"/special/:id",element:g.jsx(YO,{})}),g.jsx(Nn,{path:"/login",element:g.jsx(PO,{})}),g.jsx(Nn,{path:"/complete-profile",element:g.jsx(Yr,{children:g.jsx(UO,{})})}),g.jsx(Nn,{path:"/dashboard",element:g.jsx(Yr,{children:g.jsx(Ss,{children:g.jsx(KO,{})})})}),g.jsx(Nn,{path:"/event/:id",element:g.jsx(Yr,{children:g.jsx(Ss,{children:g.jsx(WO,{})})})}),g.jsx(Nn,{path:"/my-enrollments",element:g.jsx(Yr,{children:g.jsx(Ss,{children:g.jsx(fM,{})})})}),g.jsx(Nn,{path:"/admin/events",element:g.jsx(Yr,{roleRequired:Kt.ADMIN,children:g.jsx(Ss,{children:g.jsx(mM,{})})})}),g.jsx(Nn,{path:"/admin/events/:id/enrollments",element:g.jsx(Yr,{roleRequired:Kt.ADMIN,children:g.jsx(Ss,{children:g.jsx(yM,{})})})}),g.jsx(Nn,{path:"/admin/courses",element:g.jsx(Yr,{roleRequired:Kt.ADMIN,children:g.jsx(Ss,{children:g.jsx(pM,{})})})}),g.jsx(Nn,{path:"/admin/users",element:g.jsx(Yr,{roleRequired:Kt.ADMIN,children:g.jsx(Ss,{children:g.jsx(gM,{})})})}),g.jsx(Nn,{path:"/admin/dev",element:g.jsx(Yr,{roleRequired:Kt.ADMIN,children:g.jsx(Ss,{children:g.jsx(vM,{})})})}),g.jsx(Nn,{path:"/admin/scanner",element:g.jsx(Yr,{roleRequired:Kt.ADMIN,children:g.jsx(Ss,{children:g.jsx(_M,{})})})})]})})};function wM(){return g.jsx(OO,{children:g.jsx(jO,{children:g.jsx(MO,{children:g.jsx(S2,{children:g.jsx(bM,{})})})})})}const w1=document.getElementById("root");if(!w1)throw new Error("Could not find root element to mount to");const xM=cA.createRoot(w1);xM.render(g.jsx(rr.StrictMode,{children:g.jsx(wM,{})}));export{Ry as C,v1 as E,Ri as L,Sa as M,rr as R,FO as S,Kt as U,qO as a,lt as b,AM as c,IM as d,dw as e,br as f,Dh as g,TM as h,rw as i,g as j,V as r,Ge as s,yl as u};
