import{r as o,R as ee,j as e,u as re}from"./react-vendor-D244Vx8q.js";import{u as U,a as ae,s as A,f as z,b as te,M as X,L as J,S as se,E as de,C as oe}from"./index-BJYSapP8.js";import"./vendor-kkeqS5Xn.js";import"./qr-utils-B8AONaXL.js";import"./firebase-CUKyr0uK.js";const ne=10,le=()=>{const[d,c]=o.useState([]),[S,D]=o.useState(!1),[p,b]=o.useState(!1),{addToast:j}=U(),[g,f]=o.useState(1),[N,h]=o.useState([void 0]),[T,w]=o.useState(!0),[i,r]=o.useState(""),m=ae(i,300),[y,P]=o.useState({searchTerm:"",visibility:"",course:""}),C=o.useCallback(async(n,v)=>{D(!0);try{const M=N[n-1],{data:B,nextCursor:L}=await A.getEvents({limit:ne,cursor:M,filters:v});c(B),w(!!L),L&&N.length<=n&&h(q=>{const O=[...q];return O[n]=L,O})}catch(M){console.error("Error fetching events",M),j("error","Erro ao carregar eventos.")}finally{D(!1)}},[N,j]);return o.useEffect(()=>{P(n=>({...n,searchTerm:m}))},[m]),o.useEffect(()=>{h([void 0]),f(1),C(1,y)},[y]),{events:d,loading:S,processing:p,currentPage:g,hasNextPage:T,localSearchTerm:i,filters:y,setLocalSearchTerm:r,setFilters:P,handleNextPage:()=>{if(!T)return;const n=g+1;f(n),C(n,y)},handlePrevPage:()=>{if(g===1)return;const n=g-1;f(n),C(n,y)},deleteEvent:async n=>{b(!0);try{await A.deleteEvent(n),j("success","Evento removido!"),C(g,y)}catch(v){console.error(v),j("error","Erro ao excluir evento.")}finally{b(!1)}},toggleEventLock:async n=>{b(!0);try{const v=!n.registrationLocked,M={...n,registrationLocked:v};await A.updateEvent(M),j(v?"warning":"success",`Inscri√ß√µes ${v?"BLOQUEADAS":"LIBERADAS"} para "${n.name}".`),c(B=>B.map(L=>L.id===n.id?M:L))}catch(v){console.error(v),j("error","Erro ao alterar status de bloqueio.")}finally{b(!1)}},refreshEvents:()=>{C(g,y)}}},Z=ee.memo(({evt:d,isNested:c,onOpenSubEvent:S,onManageEnrollments:D,onEdit:p,onDelete:b,onConfigPage:j,onToggleLock:g})=>{const f=!c&&!!d.parentId,N=!d.parentId,h=d.sessions.reduce((k,x)=>k+x.capacity,0),T=d.sessions.reduce((k,x)=>k+x.filled,0),w=h>0?T/h*100:0,i=h>0&&T>=h;let r="bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",m="P√∫blico";d.visibility==="course"&&(r="bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300",m="Curso"),d.visibility==="class"&&(r="bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",m="Turma");const y="relative transition-all duration-200 border-b border-gray-100 dark:border-gray-700 last:border-0",P="bg-gray-50/80 hover:bg-gray-100 dark:bg-gray-800/40 dark:hover:bg-gray-800",I=f?"bg-yellow-50/50 hover:bg-yellow-100/50 dark:bg-yellow-900/10 dark:hover:bg-yellow-900/20":"bg-white hover:bg-gray-50 dark:bg-darkcard dark:hover:bg-gray-800/60";return e.jsxs("li",{className:`${y} ${c?P:I} ${d.registrationLocked?"border-l-4 border-l-red-500 bg-red-50/20":""}`,children:[c&&e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-12 flex justify-center",children:[e.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 h-full absolute left-6 -top-1/2"}),e.jsx("div",{className:"absolute top-1/2 left-6 w-4 h-px bg-gray-300 dark:bg-gray-600"})]}),e.jsxs("div",{className:`px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between ${c?"pl-14":""}`,children:[e.jsxs("div",{className:"mb-4 sm:mb-0 flex-1 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.registrationLocked&&e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider bg-red-500 px-2 py-0.5 rounded shadow-sm animate-pulse",children:"üîí Bloqueado"}),c&&e.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:"Sub"}),f&&e.jsx("span",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider bg-amber-100 dark:bg-amber-900/40 px-1.5 py-0.5 rounded flex items-center",title:"Este √© um sub-evento cujo evento principal n√£o est√° sendo exibido nesta lista (talvez esteja em outra p√°gina).",children:"‚Ü≥ Sub-evento"}),d.isTeamEvent&&e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider bg-indigo-500 px-1.5 py-0.5 rounded shadow-sm",children:"Equipe"}),e.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${N?"text-lg":"text-base"}`,children:d.name}),d.hasDedicatedPage&&!c&&e.jsx("a",{href:`#/special/${d.id}`,target:"_blank",rel:"noreferrer",className:"text-[10px] font-bold bg-amber-100 text-amber-700 hover:bg-amber-200 dark:bg-amber-900/40 dark:text-amber-300 px-1.5 py-0.5 rounded border border-amber-200 dark:border-amber-700 ml-2 flex items-center gap-1",title:"Ver P√°gina Dedicada","aria-label":`Ver p√°gina dedicada do evento ${d.name}`,children:"‚≠ê PAGE ‚Üó"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 flex flex-wrap gap-3 items-center",children:[e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${r}`,children:m}),e.jsxs("span",{className:"flex items-center text-gray-400 dark:text-gray-500",title:"Sess√µes cadastradas",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.sessions.length," sess√µes"]})]}),e.jsxs("div",{className:"mt-3 w-full max-w-[200px]",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 dark:text-gray-400 mb-1 uppercase font-bold tracking-wide",children:[e.jsx("span",{children:d.isTeamEvent?"Equipes":"Ocupa√ß√£o"}),e.jsxs("span",{className:i?"text-red-600 dark:text-red-400":"",children:[T,"/",h]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${i?"bg-red-500":w>80?"bg-amber-400":"bg-primary"}`,style:{width:`${Math.min(w,100)}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-80 hover:opacity-100",children:[!c&&!f&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(d),className:`p-2 rounded-md transition border ${d.hasDedicatedPage?"bg-amber-50 text-amber-600 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800":"text-gray-400 border-transparent hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:"Configurar P√°gina Dedicada","aria-label":`Configurar p√°gina dedicada para ${d.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),e.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"})]}),e.jsx("button",{onClick:()=>g(d),className:`p-2 rounded-md transition ${d.registrationLocked?"text-red-600 bg-red-50 dark:bg-red-900/30 dark:text-red-400 border border-red-200 dark:border-red-800":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:d.registrationLocked?"Desbloquear Inscri√ß√µes":"Bloquear Inscri√ß√µes","aria-label":d.registrationLocked?"Desbloquear":"Bloquear",children:d.registrationLocked?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 00-2-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 00-2-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})}),N&&e.jsx("button",{onClick:()=>S(d),className:"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-2 rounded-md transition",title:"Adicionar Sub-evento vinculado","aria-label":`Adicionar sub-evento a ${d.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>D(d),className:"text-gray-500 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 p-2 rounded-md transition",title:"Gerenciar Inscritos e Exportar","aria-label":`Gerenciar inscritos de ${d.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx("button",{onClick:()=>p(d),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 p-2 rounded-md transition",title:"Editar Evento","aria-label":`Editar evento ${d.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002 2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>b(d),className:"text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 p-2 rounded-md transition",title:"Excluir Evento","aria-label":`Excluir evento ${d.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})}),ie=({onGenerate:d,dateLimits:c,isTeamEvent:S})=>{const{addToast:D}=U(),b=`${new Date().getFullYear()+2}-12-31`,j=50,[g,f]=o.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),[N,h]=o.useState(null),T=i=>{f(r=>({...r,daysOfWeek:r.daysOfWeek.includes(i)?r.daysOfWeek.filter(m=>m!==i):[...r.daysOfWeek,i]}))},w=()=>{h(null);const{startDate:i,endDate:r,startTime:m,endTime:y,capacity:P,daysOfWeek:C}=g;if(!i||!r||!m||!y||!C.length){h("Preencha todos os campos.");return}if(c&&(i<c.min||r>c.max)){h(`O intervalo deve estar entre ${z(c.min)} e ${z(c.max)}.`);return}if(r>b){h(`A gera√ß√£o √© limitada at√© ${z(b)}.`);return}if(m>=y){h("O hor√°rio de t√©rmino deve ser ap√≥s o hor√°rio de in√≠cio.");return}const I=new Date(`${i}T12:00:00Z`),u=new Date(`${r}T12:00:00Z`);if(I>u){h("A data de in√≠cio deve ser anterior √† de fim.");return}const k=[],x=new Date(I);let l=0;for(;x<=u&&(l++,!(l>1e3));)C.includes(x.getUTCDay())&&k.push({id:`sess_${x.getTime()}_${k.length}`,date:x.toISOString().split("T")[0],startTime:m,endTime:y,capacity:P,filled:0}),x.setDate(x.getDate()+1);if(k.length>j){h("Limite de seguran√ßa excedido. Tente um intervalo menor.");return}if(!k.length){h("Nenhuma data encontrada no intervalo para os dias selecionados.");return}d(k),D("success",`${k.length} sess√µes geradas.`),h(null)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"De"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.startDate,min:c==null?void 0:c.min,max:b,onChange:i=>f({...g,startDate:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"At√©"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.endDate,min:c==null?void 0:c.min,max:b,onChange:i=>f({...g,endDate:i.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.startTime,onChange:i=>f({...g,startTime:i.target.value})}),e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.endTime,onChange:i=>f({...g,endTime:i.target.value})}),e.jsx("input",{type:"number",placeholder:S?"Qtd Equipes":"Cap.",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.capacity,onChange:i=>f({...g,capacity:parseInt(i.target.value)})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map((i,r)=>e.jsx("button",{type:"button",onClick:()=>T(r),className:`text-xs w-8 h-8 rounded-full border flex items-center justify-center transition 
                            ${g.daysOfWeek.includes(r)?"bg-primary text-white border-primary":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600"}`,children:i.charAt(0)},i))}),e.jsx("button",{type:"button",onClick:w,className:"w-full bg-primary text-white py-2 rounded text-sm hover:bg-indigo-700 transition-colors font-medium",children:"Gerar Sess√µes"}),N&&e.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded",children:N})]})},ce=({isOpen:d,onClose:c,initialData:S,isTeamEventMode:D=!1,parentEvent:p,onSaveSuccess:b})=>{var V,W,_,H;const{user:j}=te(),{addToast:g}=U(),[f,N]=o.useState(!1),[h,T]=o.useState([]),[w,i]=o.useState([]),[r,m]=o.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0,isTeamEvent:!1}),[y,P]=o.useState("details"),[C,I]=o.useState("manual"),[u,k]=o.useState({date:"",startTime:"",endTime:"",capacity:30}),[x,l]=o.useState(null),[n,v]=o.useState(null);o.useEffect(()=>{(async()=>{const[s,a]=await Promise.all([A.getCourses(),A.getClasses()]);T(s),i(a)})()},[]),o.useEffect(()=>{var t;if(d)if(P("details"),I("manual"),k({date:"",startTime:"",endTime:"",capacity:30}),v(null),m(S||{name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:p?p.id:void 0,isTeamEvent:D}),p&&((t=p.sessions)!=null&&t.length)){const s=p.sessions.map(a=>a.date).sort();l({min:s[0],max:s[s.length-1]})}else l(null)},[d,S,D,p]);const M=t=>{const s=t.target.value;m(a=>({...a,visibility:s,allowedCourses:s==="public"||s==="class"?[]:a.allowedCourses,allowedClasses:s==="public"||s==="course"?[]:a.allowedClasses}))},B=t=>m(s=>{var a;return{...s,allowedCourses:(a=s.allowedCourses)!=null&&a.includes(t)?s.allowedCourses.filter(E=>E!==t):[...s.allowedCourses||[],t]}}),L=t=>m(s=>{var a;return{...s,allowedClasses:(a=s.allowedClasses)!=null&&a.includes(t)?s.allowedClasses.filter(E=>E!==t):[...s.allowedClasses||[],t]}}),q=()=>{if(!u.date||!u.startTime||!u.endTime)return;if(x&&(u.date<x.min||u.date>x.max)){v(`A data deve estar entre ${z(x.min)} e ${z(x.max)}.`);return}if(u.startTime>=u.endTime){v("O hor√°rio de t√©rmino deve ser ap√≥s o hor√°rio de in√≠cio.");return}const t={id:`sess_${Date.now()}`,date:u.date,startTime:u.startTime,endTime:u.endTime,capacity:u.capacity||30,filled:0};m(s=>({...s,sessions:[...s.sessions||[],t]})),k({date:"",startTime:"",endTime:"",capacity:30}),v(null)},O=t=>{m(s=>({...s,sessions:[...s.sessions||[],...t]}))},F=t=>{m(s=>{var a;return{...s,sessions:(a=s.sessions)==null?void 0:a.filter((E,G)=>G!==t)}})},Q=async t=>{var s,a;if(t.preventDefault(),!r.name||!((s=r.sessions)!=null&&s.length)){v("Nome e ao menos uma sess√£o s√£o obrigat√≥rios."),r.name&&!((a=r.sessions)!=null&&a.length)&&P("sessions");return}N(!0);try{r.id?(await A.updateEvent(r),g("success","Evento atualizado!")):(await A.createEvent({...r,id:`evt_${Date.now()}`,createdAt:new Date().toISOString(),createdBy:(j==null?void 0:j.uid)||""}),g("success","Evento criado!")),b(),c()}catch(E){console.error(E),g("error","Erro ao salvar evento.")}finally{N(!1)}},R=r.id?r.isTeamEvent?"Editar Evento por Equipe":"Editar Evento":p?"Adicionar Sub-evento":r.isTeamEvent?"Criar Novo Evento por Equipe":"Criar Novo Evento";return e.jsx(X,{isOpen:d,onClose:c,title:R,children:e.jsxs("form",{onSubmit:Q,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 mb-4 overflow-x-auto",children:[e.jsx("button",{type:"button",onClick:()=>P("details"),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${y==="details"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"1. Detalhes"}),e.jsxs("button",{type:"button",onClick:()=>P("sessions"),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${y==="sessions"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:["2. Sess√µes (",((V=r.sessions)==null?void 0:V.length)||0,")"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4",children:[y==="details"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[r.isTeamEvent&&e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-800 dark:text-indigo-300 p-3 rounded-md text-sm mb-4 border border-indigo-200 dark:border-indigo-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:"üë•"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Modo Evento por Equipe:"}),e.jsx("br",{}),"Neste modo, os usu√°rios se inscrevem em grupos. O sistema gerenciar√° c√≥digos de acesso e membros."]})]}),p&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 p-3 rounded-md text-sm mb-4",children:["Vinculado ao evento pai: ",e.jsx("strong",{children:p.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome do Evento *"}),e.jsx("input",{type:"text",required:!0,placeholder:"Ex: Feira de Ci√™ncias",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:r.name,onChange:t=>m({...r,name:t.target.value})})]}),e.jsxs("div",{className:p?"opacity-50 pointer-events-none":"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibilidade"}),e.jsxs("select",{value:r.visibility,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",disabled:!!p,children:[e.jsx("option",{value:"public",children:"P√∫blico (Todos podem ver)"}),e.jsx("option",{value:"course",children:"Restrito a Cursos"}),e.jsx("option",{value:"class",children:"Restrito a Turmas"})]}),r.visibility==="course"&&e.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione os cursos permitidos:"}),h.map(t=>{var s;return e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",id:`c_${t.id}`,checked:(s=r.allowedCourses)==null?void 0:s.includes(t.id),onChange:()=>B(t.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),e.jsx("label",{htmlFor:`c_${t.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:t.name})]},t.id)})]}),r.visibility==="class"&&e.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione as turmas permitidas:"}),h.map(t=>e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-xs text-gray-900 dark:text-gray-200 block mb-1",children:t.name}),e.jsx("div",{className:"pl-2",children:w.filter(s=>s.courseId===t.id).map(s=>{var a;return e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",id:`cl_${s.id}`,checked:(a=r.allowedClasses)==null?void 0:a.includes(s.id),onChange:()=>L(s.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),e.jsx("label",{htmlFor:`cl_${s.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:s.name})]},s.id)})})]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Local"}),e.jsx("input",{type:"text",placeholder:"Ex: Audit√≥rio Principal",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:r.location,onChange:t=>m({...r,location:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descri√ß√£o"}),e.jsx("textarea",{placeholder:"Detalhes do evento...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",rows:3,value:r.description,onChange:t=>m({...r,description:t.target.value})})]})]}),y==="sessions"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 p-3 text-sm text-amber-800 dark:text-amber-300",children:["üìÖ ",e.jsx("strong",{children:"Restri√ß√£o de Data:"})," Este sub-evento deve ocorrer entre ",z(x.min)," e ",z(x.max),"."]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("button",{type:"button",onClick:()=>I("manual"),className:`flex-1 py-2 text-sm font-medium ${C==="manual"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Adicionar Manual"}),e.jsx("button",{type:"button",onClick:()=>I("recurring"),className:`flex-1 py-2 text-sm font-medium ${C==="recurring"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Gerar Recorr√™ncia"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:[C==="manual"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Data"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:u.date,min:x==null?void 0:x.min,max:x==null?void 0:x.max,onChange:t=>k({...u,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"In√≠cio"}),e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:u.startTime,onChange:t=>k({...u,startTime:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fim"}),e.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:u.endTime,onChange:t=>k({...u,endTime:t.target.value})})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.isTeamEvent?"N¬∫ de Equipes":"Vagas"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:u.capacity,onChange:t=>k({...u,capacity:parseInt(t.target.value)})})]}),e.jsx("button",{type:"button",onClick:q,className:"bg-white dark:bg-gray-700 border border-primary dark:border-indigo-500 text-primary dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-gray-600 px-4 py-1.5 rounded text-sm font-medium h-[34px]",children:"+ Adicionar"})]}),n&&e.jsx("div",{className:"sm:col-span-2 mt-2 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded",children:n})]}),C==="recurring"&&e.jsx(ie,{onGenerate:O,dateLimits:x,isTeamEvent:r.isTeamEvent})]})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex justify-between items-center",children:["Sess√µes Geradas",e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:((W=r.sessions)==null?void 0:W.length)||0})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md max-h-48 overflow-y-auto bg-white dark:bg-gray-800 divide-y divide-gray-100 dark:divide-gray-700",children:[((_=r.sessions)==null?void 0:_.length)===0&&e.jsx("p",{className:"text-sm text-gray-400 text-center py-6 italic",children:"Nenhuma sess√£o adicionada ainda."}),(H=r.sessions)==null?void 0:H.slice().sort((t,s)=>t.date.localeCompare(s.date)).map((t,s)=>e.jsxs("div",{className:"p-2.5 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/50 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:z(t.date)}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.startTime," - ",t.endTime," ‚Ä¢ ",t.capacity," ",r.isTeamEvent?"equipes":"vagas"]})]}),e.jsx("button",{type:"button",onClick:()=>F(s),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400 p-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},s))]})]})]})]}),e.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),e.jsx(J,{type:"submit",isLoading:f,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar Evento"})]})]})})},ge=({isOpen:d,onClose:c,eventId:S,eventName:D,initialHasPage:p,initialConfig:b,onSaveSuccess:j})=>{const{addToast:g}=U(),[f,N]=o.useState(!1),[h,T]=o.useState(p),[w,i]=o.useState({schedule:[],gallery:[],themeColor:"#4F46E5",presentationText:""}),[r,m]=o.useState({time:"",title:"",description:""}),[y,P]=o.useState("");o.useEffect(()=>{d&&(T(p),i({schedule:(b==null?void 0:b.schedule)||[],gallery:(b==null?void 0:b.gallery)||[],themeColor:(b==null?void 0:b.themeColor)||"#4F46E5",presentationText:(b==null?void 0:b.presentationText)||""}))},[d,p,b]);const C=async l=>{l.preventDefault(),N(!0);try{const n=await A.getEventById(S);if(n){const v={...n,hasDedicatedPage:h,dedicatedPageConfig:w};await A.updateEvent(v),g("success","Configura√ß√£o da p√°gina salva!"),j(),c()}}catch(n){console.error(n),g("error","Erro ao salvar configura√ß√£o.")}finally{N(!1)}},I=()=>{if(!r.time||!r.title)return;const l={id:`sch_${Date.now()}`,...r};i(n=>({...n,schedule:[...n.schedule,l]})),m({time:"",title:"",description:""})},u=l=>{i(n=>({...n,schedule:n.schedule.filter(v=>v.id!==l)}))},k=()=>{if(!y)return;const l={id:`img_${Date.now()}`,url:y};i(n=>({...n,gallery:[...n.gallery,l]})),P("")},x=l=>{i(n=>({...n,gallery:n.gallery.filter(v=>v.id!==l)}))};return e.jsx(X,{isOpen:d,onClose:c,title:`P√°gina Dedicada: ${D}`,children:e.jsxs("form",{onSubmit:C,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4 space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-200 dark:border-amber-900/30",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-amber-900 dark:text-amber-400",children:"Habilitar P√°gina Dedicada"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-500",children:"Cria uma landing page exclusiva e p√∫blica para este evento."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h,onChange:l=>T(l.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto de Apresenta√ß√£o (Hero)"}),e.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",rows:4,placeholder:"Uma descri√ß√£o detalhada e convidativa sobre o evento...",value:w.presentationText,onChange:l=>i({...w,presentationText:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cor do Tema"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",className:"h-10 w-20 p-0 border-0 rounded cursor-pointer",value:w.themeColor,onChange:l=>i({...w,themeColor:l.target.value})}),e.jsx("span",{className:"text-sm text-gray-500 uppercase",children:w.themeColor})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Cronograma Personalizado (Itens Extras)"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-md mb-3 space-y-2 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{type:"time",className:"border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:r.time,onChange:l=>m({...r,time:l.target.value})}),e.jsx("input",{type:"text",placeholder:"T√≠tulo",className:"col-span-2 border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:r.title,onChange:l=>m({...r,title:l.target.value})})]}),e.jsx("input",{type:"text",placeholder:"Descri√ß√£o (opcional)",className:"w-full border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:r.description,onChange:l=>m({...r,description:l.target.value})}),e.jsx("button",{type:"button",onClick:I,className:"w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 text-xs font-bold py-1.5 rounded hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Adicionar Item"})]}),e.jsx("ul",{className:"space-y-2",children:w.schedule.map(l=>e.jsxs("li",{className:"flex justify-between items-center text-sm bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-2 rounded shadow-sm",children:[e.jsxs("div",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("span",{className:"font-bold mr-2 text-primary dark:text-indigo-400",children:l.time}),l.title]}),e.jsx("button",{type:"button",onClick:()=>u(l.id),className:"text-red-500 hover:text-red-700 px-2",children:"√ó"})]},l.id))})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Galeria de Imagens"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Insira URLs de imagens para o destaque e galeria."}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"url",placeholder:"https://...",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:y,onChange:l=>P(l.target.value)}),e.jsx("button",{type:"button",onClick:k,className:"bg-primary text-white px-3 py-1 rounded text-xs font-bold hover:bg-indigo-700 transition-colors",children:"Adicionar"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.gallery.map(l=>e.jsxs("div",{className:"relative group aspect-square bg-gray-100 dark:bg-gray-800 rounded-md overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("img",{src:l.url,alt:"Gallery",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>x(l.id),className:"absolute top-1 right-1 bg-red-500/80 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"√ó"})]},l.id))})]})]})]}),e.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),e.jsx(J,{type:"submit",isLoading:f,className:"px-6 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar P√°gina"})]})]})})},ye=()=>{const d=re(),{events:c,loading:S,processing:D,currentPage:p,hasNextPage:b,localSearchTerm:j,filters:g,setLocalSearchTerm:f,setFilters:N,handleNextPage:h,handlePrevPage:T,deleteEvent:w,toggleEventLock:i,refreshEvents:r}=le(),[m,y]=o.useState([]),[P,C]=o.useState([]),[I,u]=o.useState(!1),[k,x]=o.useState(!1),[l,n]=o.useState(null),[v,M]=o.useState(void 0),[B,L]=o.useState(!1),[q,O]=o.useState(null),[F,Q]=o.useState(null);o.useEffect(()=>{(async()=>{const[E,G]=await Promise.all([A.getCourses(),A.getClasses()]);y(E),C(G)})()},[]);const R=o.useMemo(()=>{const a=[],E={},G=new Set(c.map($=>$.id));return c.forEach($=>{$.parentId&&G.has($.parentId)?(E[$.parentId]||(E[$.parentId]=[]),E[$.parentId].push($)):a.push($)}),a.sort(($,Y)=>(Y.createdAt||"").localeCompare($.createdAt||"")),Object.values(E).forEach($=>$.sort((Y,K)=>(Y.createdAt||"").localeCompare(K.createdAt||""))),{roots:a,childrenMap:E}},[c]),V=(a=!1)=>{n(null),M(void 0),L(a),u(!0)},W=o.useCallback(a=>{n(null),M(a),L(!!a.isTeamEvent),u(!0)},[]),_=o.useCallback(a=>{n(a),M(void 0),u(!0)},[]),H=o.useCallback(a=>{Q({id:a.id,name:a.name,hasPage:a.hasDedicatedPage||!1,config:a.dedicatedPageConfig}),x(!0)},[]),t=o.useCallback(a=>O(a.id),[]),s=o.useCallback(a=>d(`/admin/events/${a.id}/enrollments`),[d]);return e.jsxs("div",{className:"container mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gerenciamento de Eventos"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Crie, edite e gerencie eventos e suas sess√µes."})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[e.jsxs("div",{className:"w-full xl:w-64 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full pl-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary sm:text-sm",value:j,onChange:a=>f(a.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[e.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary py-2 text-sm",value:g.visibility,onChange:a=>N({...g,visibility:a.target.value}),children:[e.jsx("option",{value:"",children:"Todas Visibilidades"}),e.jsx("option",{value:"public",children:"P√∫blico"}),e.jsx("option",{value:"course",children:"Por Curso"}),e.jsx("option",{value:"class",children:"Por Turma"})]}),e.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary py-2 text-sm",value:g.course,onChange:a=>N({...g,course:a.target.value}),children:[e.jsx("option",{value:"",children:"Todos os Cursos"}),m.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[e.jsx("button",{onClick:()=>V(!1),className:"flex-1 bg-primary text-white px-4 py-2 rounded-md font-bold whitespace-nowrap hover:bg-indigo-700 shadow-sm transition text-sm",children:"+ Evento"}),e.jsxs("button",{onClick:()=>V(!0),className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-md font-bold whitespace-nowrap hover:bg-indigo-800 shadow-sm transition flex items-center justify-center gap-2 border border-indigo-400/50 text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"+ Equipe"]})]})]})]}),S?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,E)=>e.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm rounded-lg p-0 overflow-hidden border border-gray-100 dark:border-gray-700",children:e.jsx(se,{})},E))}):c.length===0?e.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 sm:rounded-lg p-8",children:e.jsx(de,{title:"Nenhum evento encontrado",description:"Tente ajustar os filtros ou crie um novo evento."})}):e.jsx("div",{className:"space-y-4",children:R.roots.map(a=>{const E=R.childrenMap[a.id]||[];return e.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden transition-shadow hover:shadow-md",children:e.jsxs("ul",{children:[e.jsx(Z,{evt:a,onOpenSubEvent:W,onManageEnrollments:s,onEdit:_,onDelete:t,onConfigPage:H,onToggleLock:i}),E.map(G=>e.jsx(Z,{evt:G,isNested:!0,onOpenSubEvent:W,onManageEnrollments:s,onEdit:_,onDelete:t,onConfigPage:H,onToggleLock:i},G.id))]})},a.id)})}),c.length>0&&e.jsx("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-lg px-4 py-3 flex items-center justify-between sm:px-6 shadow-sm",children:e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["P√°gina ",e.jsx("span",{className:"font-medium",children:p})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:T,disabled:p===1||S,className:"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Anterior"}),e.jsx("button",{onClick:h,disabled:!b||S,className:"relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Pr√≥ximo"})]})})]})}),e.jsx(oe,{isOpen:!!q,onClose:()=>O(null),onConfirm:()=>q&&w(q).then(()=>O(null)),title:"Confirmar Exclus√£o",message:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Tem certeza que deseja excluir este evento?"}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-2 font-bold",children:"Sub-eventos vinculados tamb√©m ser√£o exclu√≠dos."})]}),isProcessing:D}),e.jsx(ce,{isOpen:I,onClose:()=>u(!1),initialData:l||void 0,isTeamEventMode:B,parentEvent:v,onSaveSuccess:r}),F&&e.jsx(ge,{isOpen:k,onClose:()=>x(!1),eventId:F.id,eventName:F.name,initialHasPage:F.hasPage,initialConfig:F.config,onSaveSuccess:r})]})};export{ye as AdminEvents};
