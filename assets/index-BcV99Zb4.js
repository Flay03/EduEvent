const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminEvents-vfjpbfJH.js","assets/react-vendor-D244Vx8q.js","assets/vendor-kkeqS5Xn.js","assets/qr-utils-B8AONaXL.js","assets/firebase-CUKyr0uK.js","assets/AdminUsers-BuyKUAw0.js","assets/AdminCourses-BoMKXyVV.js","assets/AdminEventEnrollments-DhseCByY.js","assets/xlsx-SQR8kOWN.js","assets/AdminScanner-DLRM8D8l.js","assets/AdminCertificateConfig-CVgO3KyD.js","assets/DevTools-gu1mwwNI.js"])))=>i.map(i=>d[i]);
import{r as v,j as e,L as P,u as ke,a as ze,R as re,b as at,c as Et,Q as St,H as Ct,d as It,e as K,N as Se,f as Tt}from"./react-vendor-D244Vx8q.js";import{E as At,f as ue}from"./vendor-kkeqS5Xn.js";import{i as Mt,g as Lt,a as Dt,b as Rt,c as _t,s as Xe,d as Ze,e as Ot,G as Ft,f as Ut,h as L,j as oe,k as $t,o as Pt,l as $,q,w as O,m as B,n as qe,p as ie,r as fe,t as zt,u as Ne,v as Fe,x as pe,y as Ue,z as qt,A as nt,B as Bt,C as it,D as he}from"./firebase-CUKyr0uK.js";import"./qr-utils-B8AONaXL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();var H=(o=>(o.ADMIN="admin",o.USER="user",o))(H||{}),J=(o=>(o.CONFIRMED="confirmed",o.CANCELED="canceled",o.WAITLIST="waitlist",o))(J||{});const X=o=>{if(!o)return"";if(o.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,s,r]=o.split("-");return`${r}/${s}/${t}`}try{const t=new Date(o);return isNaN(t.getTime())?o:new Intl.DateTimeFormat("pt-BR").format(t)}catch{return o}},et=o=>{if(!o)return"";try{let t;if(o.match(/^\d{4}-\d{2}-\d{2}$/)){const[s,r,a]=o.split("-").map(Number);t=new Date(s,r-1,a)}else t=new Date(o);return isNaN(t.getTime())?o:new Intl.DateTimeFormat("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"}).format(t)}catch{return o}},_e={},Vt=o=>o&&o.apiKey&&o.projectId&&o.appId,tt={apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.appspot.com",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML",vapidKey:(_e==null?void 0:_e.VITE_FIREBASE_VAPID_KEY)||""},se={useFirebase:Vt(tt),firebase:tt},Ce=se.firebase;let Ee,G,f,st;const ot=o=>o&&o.apiKey&&o.projectId&&o.appId,Wt=async()=>{if("serviceWorker"in navigator&&ot(Ce))try{const t=`/EduEvent/firebase-messaging-sw.js?${new URLSearchParams(Ce).toString()}`;return await navigator.serviceWorker.register(t,{scope:"/EduEvent/"})}catch(o){console.error("Service Worker registration failed:",o)}};try{se.useFirebase&&ot(Ce)?(Ee=Mt(Ce),G=Lt(Ee),f=Dt(Ee),typeof window<"u"&&Wt().then(o=>{try{st=Rt(Ee),o&&se.firebase.vapidKey&&_t(st,{vapidKey:se.firebase.vapidKey,serviceWorkerRegistration:o}).catch(t=>console.log("Push token flow needs user interaction.")),console.log("Firebase Messaging initialized.")}catch(t){console.warn("Failed to initialize Firebase Messaging:",t)}}),console.log("Firebase initialized successfully.")):se.useFirebase?console.warn("Firebase `useFirebase` is true, but config keys are missing. Please check your .env.local file. Skipping Firebase Init."):console.log("`useFirebase` is false. Skipping Firebase Init.")}catch(o){console.error("Error initializing Firebase:",o)}const Oe={backgroundType:"color",backgroundColor:"#FFFFFF",showBorder:!0,elements:[{id:"e1",type:"text",label:"Institution",content:"EDU EVENT SCHEDULER",x:148.5,y:30,fontSize:24,fontColor:"#1F2937",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e2",type:"text",label:"Title",content:"CERTIFICADO",x:148.5,y:60,fontSize:40,fontColor:"#4F46E5",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e3",type:"text",label:"Subtitle",content:"Certificamos que",x:148.5,y:80,fontSize:16,fontColor:"#6B7280",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e4",type:"variable",label:"Student Name",content:"{student_name}",x:148.5,y:100,fontSize:28,fontColor:"#111827",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e5",type:"text",label:"Context",content:"participou do evento",x:148.5,y:115,fontSize:16,fontColor:"#6B7280",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e6",type:"variable",label:"Event Name",content:"{event_name}",x:148.5,y:130,fontSize:22,fontColor:"#4F46E5",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e7",type:"text",label:"Date",content:"Realizado em {date}. Carga hor√°ria: {hours}h.",x:148.5,y:145,fontSize:14,fontColor:"#374151",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e8",type:"text",label:"Signer 1",content:`______________________
Diretor Acad√™mico`,x:74,y:170,fontSize:12,fontColor:"#000000",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e9",type:"text",label:"Signer 2",content:`______________________
Coordenador de Eventos`,x:222,y:170,fontSize:12,fontColor:"#000000",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e10",type:"text",label:"Footer",content:"C√≥digo de valida√ß√£o: {enrollment_id}",x:148.5,y:190,fontSize:10,fontColor:"#9CA3AF",fontFamily:"courier",fontWeight:"normal",align:"center"}]};class Gt{mapAuthError(t){switch(t){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos.";case"auth/email-already-in-use":return"Este e-mail j√° est√° em uso.";case"auth/weak-password":return"A senha √© muito fraca.";case"auth/invalid-email":return"E-mail inv√°lido.";case"auth/popup-closed-by-user":return"Login cancelado.";default:return"Erro na autentica√ß√£o. Tente novamente."}}async login(t,s){if(!G)throw new Error("Servi√ßo de autentica√ß√£o n√£o inicializado.");if(!s)throw new Error("A senha √© obrigat√≥ria.");try{await Xe(G,Ze);const r=await Ot(G,t,s);return this._fetchUserProfile(r.user)}catch(r){throw console.error("Erro no Login Firebase:",r),new Error(this.mapAuthError(r.code))}}async loginWithGoogle(){if(!G)throw new Error("Servi√ßo de autentica√ß√£o n√£o inicializado.");try{await Xe(G,Ze);const t=new Ft;await Ut(G,t)}catch(t){throw console.error("Erro ao iniciar Login com Google:",t),new Error(this.mapAuthError(t.code))}}async _fetchUserProfile(t){if(!f)throw new Error("Banco de dados n√£o inicializado.");const s=L(f,"users",t.uid);let r;try{r=await oe(s)}catch(a){if(console.error("Erro ao acessar Firestore:",a),a.code==="permission-denied")return{uid:t.uid,email:t.email||"",role:H.USER,isOnboarded:!1};throw new Error("Erro de conex√£o ao buscar perfil do usu√°rio.")}if(r.exists()){const a=r.data();return{uid:t.uid,email:t.email||"",name:a.name||t.displayName,role:a.role||H.USER,rm:a.rm,courseId:a.courseId,classId:a.classId,isOnboarded:a.isOnboarded||!1}}else return{uid:t.uid,email:t.email||"",name:t.displayName||"",role:H.USER,isOnboarded:!1}}async logout(){G&&await $t(G)}onAuthStateChanged(t){return G?Pt(G,async s=>{if(s)try{const r=await this._fetchUserProfile(s);t(r)}catch{t({uid:s.uid,email:s.email||"",role:H.USER,isOnboarded:!1})}else t(null)}):(console.warn("Firebase Auth not initialized correctly. Defaulting to logged out state."),t(null),()=>{})}async updateUserProfile(t,s){if(!f)throw new Error("Banco de dados n√£o inicializado.");if(s.rm)try{const n=$(f,"users"),i=q(n,O("rm","==",s.rm));if((await B(i)).docs.find(c=>c.id!==t))throw new Error("Este RM j√° est√° cadastrado para outro usu√°rio.")}catch(n){if(n.code!=="permission-denied")throw n}const r=L(f,"users",t),a={...s,updatedAt:new Date().toISOString()};s.name&&s.rm&&(a.isOnboarded=!0);try{await qe(r,a,{merge:!0})}catch{throw new Error("N√£o foi poss√≠vel salvar seus dados.")}return{...s,uid:t,email:"",role:H.USER,isOnboarded:!0}}async getUserProfile(t){if(!f)throw new Error("Servi√ßo n√£o inicializado.");try{const s=L(f,"users",t),r=await oe(s);if(r.exists()){const a=r.data();return{uid:t,email:a.email||"",name:a.name||"Usu√°rio",role:a.role||H.USER,rm:a.rm,courseId:a.courseId,classId:a.classId,isOnboarded:a.isOnboarded}}}catch{console.warn(`Could not fetch profile for ${t} from DB.`)}return G&&G.currentUser&&G.currentUser.uid===t?this._fetchUserProfile(G.currentUser):null}async getUsers(t){if(!f)return{data:[],nextCursor:void 0};const{limit:s,cursor:r,filters:a}=t,{searchTerm:n,role:i,courseId:d,classId:l}=a;try{const c=[ie("email"),fe(s)];i&&c.push(O("role","==",i)),d&&c.push(O("courseId","==",d)),l&&c.push(O("classId","==",l)),r&&c.push(zt(r));const m=q($(f,"users"),...c),x=await B(m);let g=x.docs.map(b=>({uid:b.id,...b.data()}));if(n){const b=n.toLowerCase();g=g.filter(p=>{var w,j;return((w=p.name)==null?void 0:w.toLowerCase().includes(b))||p.email.toLowerCase().includes(b)||((j=p.rm)==null?void 0:j.includes(b))})}const u=x.docs.length===s?x.docs[x.docs.length-1]:void 0;return{data:g,nextCursor:u}}catch(c){return console.error("Erro ao buscar usu√°rios:",c),c.code==="failed-precondition"&&console.warn("Falta √≠ndice composto. Crie no link do console."),{data:[],nextCursor:void 0}}}async deleteUser(t){if(!f)return;const s=Ne(f),r=q($(f,"enrollments"),O("userId","==",t)),n=(await B(r)).docs.map(g=>({id:g.id,...g.data()})),i=Array.from(new Set(n.map(g=>g.eventId))),l=await(async g=>{const u=[];for(let b=0;b<g.length;b+=30){const p=g.slice(b,b+30),w=q($(f,"events"),O(nt(),"in",p)),j=await B(w);u.push(...j.docs.map(A=>({id:A.id,...A.data()})))}return u})(i),c=new Map(l.map(g=>[g.id,g]));n.forEach(g=>{if(g.status===J.CONFIRMED){const u=c.get(g.eventId);if(u){const b=u.sessions.findIndex(p=>p.id===g.sessionId);if(b!==-1&&u.sessions[b].filled>0){const p=[...u.sessions];p[b]={...p[b],filled:Math.max(0,p[b].filled-1)},u.sessions=p,s.update(L(f,"events",u.id),{sessions:p})}}}s.delete(L(f,"enrollments",g.id))});const m=q($(f,"teams"),O("members","array-contains",t));(await B(m)).forEach(g=>{g.data().captainId===t?s.delete(g.ref):s.update(g.ref,{members:Fe(t)})}),s.delete(L(f,"users",t)),await s.commit()}async updateUserRole(t,s){f&&await pe(L(f,"users",t),{role:s})}}class Ht{async getCourses(){return f?(await B($(f,"courses"))).docs.map(s=>({id:s.id,...s.data()})):[]}async addCourse(t){if(!f)throw new Error("DB not init");return{id:(await Ue($(f,"courses"),{name:t})).id,name:t}}async updateCourse(t,s){f&&await pe(L(f,"courses",t),{name:s})}async deleteCourse(t){if(!f)return;const s=Ne(f);s.delete(L(f,"courses",t));const r=q($(f,"classes"),O("courseId","==",t));(await B(r)).forEach(d=>s.delete(d.ref));const n=q($(f,"users"),O("courseId","==",t));(await B(n)).forEach(d=>s.update(d.ref,{courseId:""})),await s.commit()}async getClasses(t){if(!f)return[];let s=t?q($(f,"classes"),O("courseId","==",t)):$(f,"classes");return(await B(s)).docs.map(a=>({id:a.id,...a.data()}))}async addClass(t,s){if(!f)throw new Error("DB not init");return{id:(await Ue($(f,"classes"),{courseId:t,name:s})).id,courseId:t,name:s}}async updateClass(t,s){f&&await pe(L(f,"classes",t),{name:s})}async deleteClass(t){if(!f)return;const s=Ne(f);await qt(L(f,"classes",t));const r=q($(f,"users"),O("classId","==",t));(await B(r)).forEach(n=>s.update(n.ref,{classId:""})),await s.commit()}async getEvents(t){if(!f)return{data:[],nextCursor:void 0};const{limit:s,cursor:r,filters:a}=t,{searchTerm:n,visibility:i,course:d}=a,l=50;try{const c=q($(f,"events"),ie("createdAt","desc"),fe(l)),x=(await B(c)).docs.map(j=>({id:j.id,...j.data()}));let g=[];i==="class"&&d&&(g=(await B($(f,"classes"))).docs.map(A=>({id:A.id,...A.data()})));const u=x.filter(j=>{var E,S;const A=n?j.name.toLowerCase().includes(n.toLowerCase())||j.description.toLowerCase().includes(n.toLowerCase()):!0,N=i?j.visibility===i:!0;let k=!0;return d&&(j.visibility==="public"?k=!1:j.visibility==="course"?k=((E=j.allowedCourses)==null?void 0:E.includes(d))||!1:j.visibility==="class"&&(g.length>0?k=((S=j.allowedClasses)==null?void 0:S.some(T=>{const C=g.find(M=>M.id===T);return(C==null?void 0:C.courseId)===d}))||!1:k=!1)),A&&N&&k}),b=typeof r=="number"?r:0,p=u.slice(b,b+s),w=b+p.length<u.length?b+p.length:void 0;return{data:p,nextCursor:w}}catch{return{data:[],nextCursor:void 0}}}async getEventById(t){if(!f)return;const s=L(f,"events",t),r=await oe(s);return r.exists()?{id:r.id,...r.data()}:void 0}async getEventsByIds(t){if(!f||t.length===0)return[];const s=30,r=[];for(let a=0;a<t.length;a+=s){const n=t.slice(a,a+s),i=q($(f,"events"),O(nt(),"in",n)),d=await B(i);r.push(...d.docs.map(l=>({id:l.id,...l.data()})))}return r}async getEventsByParentId(t){if(!f)return[];const s=q($(f,"events"),O("parentId","==",t));return(await B(s)).docs.map(a=>({id:a.id,...a.data()}))}async getAvailableEventsForUser(t){if(!f)return[];try{const s=$(f,"events"),r=fe(50),n=[q(s,O("visibility","==","public"),ie("createdAt","desc"),r)];if(t.courseId){const l=q(s,O("allowedCourses","array-contains",t.courseId),ie("createdAt","desc"),r);n.push(l)}if(t.classId){const l=q(s,O("allowedClasses","array-contains",t.classId),ie("createdAt","desc"),r);n.push(l)}const i=await Promise.all(n.map(l=>B(l).catch(c=>(console.warn("Query falhou (verifique √≠ndices):",c.message),{docs:[]})))),d=new Map;return i.forEach(l=>{l.docs.forEach(c=>{d.has(c.id)||d.set(c.id,{id:c.id,...c.data()})})}),Array.from(d.values()).sort((l,c)=>(c.createdAt||"").localeCompare(l.createdAt||""))}catch(s){return console.error("Erro cr√≠tico ao buscar eventos:",s),[]}}async getPublicEvents(){if(!f)return[];const t=q($(f,"events"),O("visibility","==","public"),ie("createdAt","desc"),fe(10));return(await B(t)).docs.map(r=>({id:r.id,...r.data()}))}async createEvent(t){if(!f)return;const{id:s,...r}=t;await qe(L(f,"events",s),JSON.parse(JSON.stringify(r)))}async updateEvent(t){if(!f)return;const{id:s,...r}=t;await pe(L(f,"events",s),JSON.parse(JSON.stringify(r)))}async deleteEvent(t){if(!f)return;const s=Ne(f),r=[t],a=q($(f,"events"),O("parentId","==",t));(await B(a)).forEach(l=>r.push(l.id));const i=[],d=[];for(let l=0;l<r.length;l+=10)d.push(r.slice(l,l+10));for(const l of d){const c=q($(f,"enrollments"),O("eventId","in",l));(await B(c)).forEach(u=>i.push(u.ref));const x=q($(f,"teams"),O("eventId","in",l));(await B(x)).forEach(u=>s.delete(u.ref))}r.forEach(l=>s.delete(L(f,"events",l))),i.forEach(l=>s.delete(l)),await s.commit()}}class Jt{constructor(t,s){this.notificationService=t,this.eventService=s}async getTeamsForEvent(t){if(!f)return[];const s=q($(f,"teams"),O("eventId","==",t));return(await B(s)).docs.map(a=>({id:a.id,...a.data()}))}async createTeam(t,s,r){if(!f)throw new Error("DB not init");const a=Math.random().toString(36).substring(2,6).toUpperCase(),n=`Equipe #${Math.floor(Math.random()*1e3)}`,i=`team_${Date.now()}`,d={id:i,eventId:t,sessionId:s,name:n,code:a,captainId:r.uid,members:[r.uid],createdAt:new Date().toISOString()};return await he(f,async l=>{const c=L(f,"events",t),m=await l.get(c);if(!m.exists())throw new Error("Evento n√£o encontrado.");const x=`${r.uid}_${t}`,g=L(f,"enrollments",x),u=await l.get(g);if(u.exists()&&u.data().status===J.CONFIRMED)throw new Error("Voc√™ j√° est√° inscrito neste evento.");const b=m.data(),p=b.sessions.findIndex(A=>A.id===s);if(p===-1)throw new Error("Sess√£o inv√°lida.");if(b.sessions[p].filled>=b.sessions[p].capacity)throw new Error("A sess√£o est√° lotada (limite de equipes atingido).");const w=[...b.sessions];w[p]={...w[p],filled:w[p].filled+1},l.update(c,{sessions:w}),l.set(g,{userId:r.uid,eventId:t,sessionId:s,teamId:i,status:J.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1});const j=L(f,"teams",i);l.set(j,d)}),d}async joinTeam(t,s,r){if(!f)throw new Error("DB not init");const a=L(f,"teams",t);await he(f,async n=>{const i=await n.get(a);if(!i.exists())throw new Error("Equipe n√£o encontrada.");const d=i.data();if(d.code!==r)throw new Error("C√≥digo da equipe inv√°lido.");if(d.members.includes(s.uid))throw new Error("Voc√™ j√° faz parte desta equipe.");const l=`${s.uid}_${d.eventId}`,c=L(f,"enrollments",l),m=await n.get(c);if(m.exists()&&m.data().status===J.CONFIRMED)throw new Error("Voc√™ j√° est√° inscrito neste evento.");n.set(c,{userId:s.uid,eventId:d.eventId,sessionId:d.sessionId,teamId:t,status:J.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1}),n.update(a,{members:it(s.uid)})});try{const n=await oe(a);if(n.exists()){const i=n.data();i.captainId!==s.uid&&await this.notificationService.createNotification({userId:i.captainId,title:"Novo membro na equipe! üõ°Ô∏è",message:`${s.name||"Um usu√°rio"} entrou na sua equipe ${i.name}.`,type:"success",createdAt:new Date().toISOString(),read:!1,link:`/event/${i.eventId}`})}}catch(n){console.error("Error creating notification",n)}}async leaveTeam(t,s){if(!f||!G||!G.currentUser)return;const r=G.currentUser.uid,a=L(f,"teams",t);let n=null,i=null,d=!1,l=!1;try{const c=await oe(L(f,"users",s));c.exists()&&(i=c.data())}catch{}if(await he(f,async c=>{const m=await c.get(a);if(!m.exists())throw new Error("Equipe n√£o encontrada.");n=m.data();const x=L(f,"events",n.eventId),g=await c.get(x);if(n.captainId===s){d=!0;for(const u of n.members){const b=`${u}_${n.eventId}`,p=L(f,"enrollments",b);c.delete(p)}if(g.exists()){const u=g.data(),b=u.sessions.findIndex(p=>p.id===n.sessionId);if(b!==-1){const p=[...u.sessions];p[b].filled=Math.max(0,p[b].filled-1),c.update(x,{sessions:p})}}c.delete(a)}else{r!==s&&(l=!0),c.update(a,{members:Fe(s)});const u=`${s}_${n.eventId}`,b=L(f,"enrollments",u);c.delete(b)}}),n){const c=n.name,m=(i==null?void 0:i.name)||"Um membro";if(d){const x=n.members.filter(g=>g!==(n==null?void 0:n.captainId));for(const g of x)await this.notificationService.createNotification({userId:g,title:"Equipe Desfeita ‚ö†Ô∏è",message:`A equipe "${c}" foi desfeita pelo capit√£o. Sua inscri√ß√£o foi cancelada.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}else l?await this.notificationService.createNotification({userId:s,title:"Removido da Equipe üö´",message:`Voc√™ foi removido da equipe "${c}" pelo capit√£o.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"}):n.captainId!==s&&await this.notificationService.createNotification({userId:n.captainId,title:"Membro Saiu üèÉ",message:`${m} saiu da sua equipe "${c}".`,type:"info",read:!1,createdAt:new Date().toISOString(),link:`/event/${n.eventId}`})}}async kickMember(t,s){return this.leaveTeam(t,s)}async getEnrollmentsForUser(t){if(!f)return[];try{const s=q($(f,"enrollments"),O("userId","==",t));return(await B(s)).docs.map(n=>({id:n.id,...n.data()})).filter(n=>n.status!==J.CANCELED)}catch(s){return console.error("Error fetching enrollments",s),[]}}async getUserEnrollmentsDetails(t){if(!f)return[];try{const s=q($(f,"enrollments"),O("userId","==",t),O("status","==",J.CONFIRMED)),a=(await B(s)).docs.map(l=>({id:l.id,...l.data()}));if(a.length===0)return[];const n=Array.from(new Set(a.map(l=>l.eventId))),i=await this.eventService.getEventsByIds(n),d=new Map(i.map(l=>[l.id,l]));return a.map(l=>{const c=d.get(l.eventId);if(!c)return null;const m=c.sessions.find(x=>x.id===l.sessionId);return m?{enrollmentId:l.id,eventName:c.name,eventLocation:c.location,sessionDate:m.date,sessionTime:`${m.startTime} - ${m.endTime}`,enrolledAt:l.enrolledAt}:null}).filter(Boolean)}catch{return[]}}async getEnrichedEnrollments(t){if(!f)return[];const s=q($(f,"enrollments"),O("eventId","==",t),O("status","==",J.CONFIRMED)),a=(await B(s)).docs.map(c=>({id:c.id,...c.data()}));if(a.length===0)return[];const n=a.map(c=>oe(L(f,"users",c.userId))),d=(await Promise.all(n)).map(c=>c.exists()?{uid:c.id,...c.data()}:null),l=await this.eventService.getEventById(t);return l?a.map((c,m)=>{const x=d[m],g=l.sessions.find(u=>u.id===c.sessionId);return{id:c.id,user:{uid:(x==null?void 0:x.uid)||c.userId,name:(x==null?void 0:x.name)||"Desconhecido",email:(x==null?void 0:x.email)||"",rm:(x==null?void 0:x.rm)||"",courseId:x==null?void 0:x.courseId,classId:x==null?void 0:x.classId},session:{id:g.id,date:g.date,startTime:g.startTime,endTime:g.endTime},status:c.status,enrolledAt:c.enrolledAt,teamId:c.teamId,attended:c.attended,checkInAt:c.checkInAt}}):[]}async getEnrollmentDetailsForEvent(t){return(await this.getEnrichedEnrollments(t)).map(r=>({Nome:r.user.name,Email:r.user.email,RM:r.user.rm,SessaoData:X(r.session.date),SessaoHora:`${r.session.startTime}`,Status:r.status,DataInscricao:new Date(r.enrolledAt).toLocaleString("pt-BR"),Presenca:r.attended?"Sim":"N√£o"}))}async createEnrollment(t,s,r,a=!1){if(!f)throw new Error("DB not init");const n=await oe(L(f,"events",s));if(!n.exists())throw new Error("Evento n√£o encontrado");const d=n.data().sessions.find(u=>u.id===r);if(!d)throw new Error("Sess√£o n√£o encontrada");const l=q($(f,"enrollments"),O("userId","==",t),O("status","==",J.CONFIRMED)),m=(await B(l)).docs.map(u=>u.data());if(m.some(u=>u.eventId===s))throw new Error("Voc√™ j√° est√° inscrito neste evento");if(m.length>0){const u=[...new Set(m.map(p=>p.eventId))],b=await this.eventService.getEventsByIds(u);for(const p of m){const w=b.find(A=>A.id===p.eventId),j=w==null?void 0:w.sessions.find(A=>A.id===p.sessionId);if(w&&j&&j.date===d.date&&d.startTime<j.endTime&&d.endTime>j.startTime)throw new Error(`CONFLICT|${w.name}|${j.startTime}|${j.endTime}`)}}const x=`enr_${Date.now()}_${t}`,g={id:x,userId:t,eventId:s,sessionId:r,status:J.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1};return await he(f,async u=>{const b=L(f,"events",s),p=await u.get(b);if(!p.exists())throw new Error("Evento n√£o encontrado");const w=p.data(),j=w.sessions.findIndex(N=>N.id===r);if(j===-1)throw new Error("Sess√£o n√£o encontrada");if(!a){if(w.sessions[j].filled>=w.sessions[j].capacity)throw new Error("A sess√£o est√° lotada");const N=[...w.sessions];N[j].filled+=1,u.update(b,{sessions:N})}const A=L(f,"enrollments",x);u.set(A,g)}),g}async cancelEnrollment(t){if(!f||!G||!G.currentUser)return;const s=G.currentUser.uid;let r=null,a="um evento";await he(f,async n=>{const i=L(f,"enrollments",t),d=await n.get(i);if(!d.exists())throw new Error("Inscri√ß√£o n√£o encontrada");r=d.data();const l=L(f,"events",r.eventId),c=await n.get(l);let m=null,x=null;r.teamId&&(m=L(f,"teams",r.teamId),x=await n.get(m));let g=!0;if(r.teamId&&x&&x.exists()&&(x.data().captainId===r.userId?(n.delete(m),g=!0):(n.update(m,{members:Fe(r.userId)}),g=!1)),c.exists()){const u=c.data();if(a=u.name,g){const b=u.sessions.findIndex(p=>p.id===r.sessionId);if(b!==-1){const p=[...u.sessions];p[b].filled=Math.max(0,p[b].filled-1),n.update(l,{sessions:p})}}}n.delete(i)}),r&&r.userId!==s&&await this.notificationService.createNotification({userId:r.userId,title:"Inscri√ß√£o Cancelada ‚ö†Ô∏è",message:`Sua inscri√ß√£o no evento "${a}" foi cancelada pela administra√ß√£o.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}async markAttendance(t){if(!f)throw new Error("DB not init");return await he(f,async s=>{const r=L(f,"enrollments",t),a=await s.get(r);if(!a.exists())return{success:!1,message:"Inscri√ß√£o n√£o encontrada."};const n=a.data(),i=await s.get(L(f,"users",n.userId)),d=await s.get(L(f,"events",n.eventId)),l=i.exists()?i.data().name:"Desconhecido",c=d.exists()?d.data().name:"Evento";return n.attended?{success:!1,message:"Check-in j√° realizado anteriormente.",alreadyAttended:!0,userName:l,eventName:c}:(s.update(r,{attended:!0,checkInAt:new Date().toISOString()}),{success:!0,message:"Check-in realizado com sucesso!",userName:l,eventName:c})})}}class Qt{async getNotifications(t){if(!f)return[];const s=q($(f,"notifications"),O("userId","==",t),ie("createdAt","desc"),fe(20));return(await B(s)).docs.map(a=>({id:a.id,...a.data()}))}subscribeToNotifications(t,s){if(!f)return()=>{};const r=q($(f,"notifications"),O("userId","==",t),ie("createdAt","desc"),fe(20));return Bt(r,n=>{const i=n.docs.map(d=>({id:d.id,...d.data()}));s(i)})}async markNotificationAsRead(t){f&&await pe(L(f,"notifications",t),{read:!0})}async markAllNotificationsAsRead(t){if(!f)return;const s=q($(f,"notifications"),O("userId","==",t),O("read","==",!1)),r=await B(s),a=Ne(f);r.forEach(n=>a.update(n.ref,{read:!0})),await a.commit()}async createNotification(t){f&&await Ue($(f,"notifications"),t)}async saveDeviceToken(t,s){if(!f)return;const r=L(f,"users",t);await pe(r,{pushTokens:it(s)})}}class Kt{async getCertificateConfig(){if(!f)return Oe;try{const t=L(f,"config","certificate"),s=await oe(t);if(s.exists())return{...Oe,...s.data()}}catch(t){console.warn("Erro ao buscar config certificado",t)}return Oe}async updateCertificateConfig(t){f&&await qe(L(f,"config","certificate"),t,{merge:!0})}}class Yt{async resetAndSeedData(){console.log("Reset not supported in Firebase from client.")}async exportData(){return"{}"}async importData(t){}}class Xt{constructor(){this.authService=new Gt,this.eventService=new Ht,this.notificationService=new Qt,this.enrollmentService=new Jt(this.notificationService,this.eventService),this.devService=new Yt,this.configService=new Kt}login(t,s){return this.authService.login(t,s)}loginWithGoogle(){return this.authService.loginWithGoogle()}logout(){return this.authService.logout()}onAuthStateChanged(t){return this.authService.onAuthStateChanged(t)}updateUserProfile(t,s){return this.authService.updateUserProfile(t,s)}getUserProfile(t){return this.authService.getUserProfile(t)}getUsers(t){return this.authService.getUsers(t)}deleteUser(t){return this.authService.deleteUser(t)}updateUserRole(t,s){return this.authService.updateUserRole(t,s)}getCourses(){return this.eventService.getCourses()}addCourse(t){return this.eventService.addCourse(t)}updateCourse(t,s){return this.eventService.updateCourse(t,s)}deleteCourse(t){return this.eventService.deleteCourse(t)}getClasses(t){return this.eventService.getClasses(t)}addClass(t,s){return this.eventService.addClass(t,s)}updateClass(t,s){return this.eventService.updateClass(t,s)}deleteClass(t){return this.eventService.deleteClass(t)}getEvents(t){return this.eventService.getEvents(t)}getEventById(t){return this.eventService.getEventById(t)}getEventsByIds(t){return this.eventService.getEventsByIds(t)}getAvailableEventsForUser(t){return this.eventService.getAvailableEventsForUser(t)}getPublicEvents(){return this.eventService.getPublicEvents()}getEventsByParentId(t){return this.eventService.getEventsByParentId(t)}createEvent(t){return this.eventService.createEvent(t)}updateEvent(t){return this.eventService.updateEvent(t)}deleteEvent(t){return this.eventService.deleteEvent(t)}getTeamsForEvent(t){return this.enrollmentService.getTeamsForEvent(t)}createTeam(t,s,r){return this.enrollmentService.createTeam(t,s,r)}joinTeam(t,s,r){return this.enrollmentService.joinTeam(t,s,r)}leaveTeam(t,s){return this.enrollmentService.leaveTeam(t,s)}kickMember(t,s){return this.enrollmentService.kickMember(t,s)}getEnrollmentsForUser(t){return this.enrollmentService.getEnrollmentsForUser(t)}getUserEnrollmentsDetails(t){return this.enrollmentService.getUserEnrollmentsDetails(t)}getEnrichedEnrollments(t){return this.enrollmentService.getEnrichedEnrollments(t)}getEnrollmentDetailsForEvent(t){return this.enrollmentService.getEnrollmentDetailsForEvent(t)}createEnrollment(t,s,r,a){return this.enrollmentService.createEnrollment(t,s,r,a)}cancelEnrollment(t){return this.enrollmentService.cancelEnrollment(t)}markAttendance(t){return this.enrollmentService.markAttendance(t)}getNotifications(t){return this.notificationService.getNotifications(t)}subscribeToNotifications(t,s){return this.notificationService.subscribeToNotifications(t,s)}markNotificationAsRead(t){return this.notificationService.markNotificationAsRead(t)}markAllNotificationsAsRead(t){return this.notificationService.markAllNotificationsAsRead(t)}createNotification(t){return this.notificationService.createNotification(t)}saveDeviceToken(t,s){return this.notificationService.saveDeviceToken(t,s)}getCertificateConfig(){return this.configService.getCertificateConfig()}updateCertificateConfig(t){return this.configService.updateCertificateConfig(t)}resetAndSeedData(){return this.devService.resetAndSeedData()}exportData(){return this.devService.exportData()}importData(t){return this.devService.importData(t)}}const Zt=[{id:"c1",name:"Ci√™ncia da Computa√ß√£o"},{id:"c2",name:"Design Digital"},{id:"c3",name:"Administra√ß√£o"}],es=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DD-2024-A"},{id:"t4",courseId:"c3",name:"ADM-2024-A"}],ts={backgroundType:"color",backgroundColor:"#FFFFFF",showBorder:!0,elements:[{id:"e1",type:"text",label:"Institution",content:"EDU EVENT SCHEDULER",x:148.5,y:30,fontSize:24,fontColor:"#1F2937",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e2",type:"text",label:"Title",content:"CERTIFICADO",x:148.5,y:60,fontSize:40,fontColor:"#4F46E5",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e3",type:"text",label:"Subtitle",content:"Certificamos que",x:148.5,y:80,fontSize:16,fontColor:"#6B7280",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e4",type:"variable",label:"Student Name",content:"{student_name}",x:148.5,y:100,fontSize:28,fontColor:"#111827",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e5",type:"text",label:"Context",content:"participou do evento",x:148.5,y:115,fontSize:16,fontColor:"#6B7280",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e6",type:"variable",label:"Event Name",content:"{event_name}",x:148.5,y:130,fontSize:22,fontColor:"#4F46E5",fontFamily:"helvetica",fontWeight:"bold",align:"center"},{id:"e7",type:"text",label:"Date",content:"Realizado em {date}. Carga hor√°ria: {hours}h.",x:148.5,y:145,fontSize:14,fontColor:"#374151",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e8",type:"text",label:"Signer 1",content:`______________________
Diretor Acad√™mico`,x:74,y:170,fontSize:12,fontColor:"#000000",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e9",type:"text",label:"Signer 2",content:`______________________
Coordenador de Eventos`,x:222,y:170,fontSize:12,fontColor:"#000000",fontFamily:"helvetica",fontWeight:"normal",align:"center"},{id:"e10",type:"text",label:"Footer",content:"C√≥digo de valida√ß√£o: {enrollment_id}",x:148.5,y:190,fontSize:10,fontColor:"#9CA3AF",fontFamily:"courier",fontWeight:"normal",align:"center"}]},h={USERS:"eduevent_users",EVENTS:"eduevent_events",ENROLLMENTS:"eduevent_enrollments",TEAMS:"eduevent_teams",NOTIFICATIONS:"eduevent_notifications",CURRENT_USER:"eduevent_current_user",COURSES:"eduevent_courses",CLASSES:"eduevent_classes",CERT_CONFIG:"eduevent_cert_config_v2"},V=o=>new Promise(t=>setTimeout(t,o));class ve{getItems(t){const s=localStorage.getItem(t);return s?JSON.parse(s):[]}saveItems(t,s){localStorage.setItem(t,JSON.stringify(s))}addItem(t,s){const r=this.getItems(t);r.push(s),this.saveItems(t,r)}}class $e extends ve{constructor(){super(...arguments),this.authListeners=[]}notifyAuthListeners(t){this.authListeners.forEach(s=>s(t))}async login(t,s){await V(500);let a=this.getItems(h.USERS).find(n=>n.email===t);return a||(a={uid:`user_${Date.now()}`,email:t,role:t.includes("admin")?H.ADMIN:H.USER,isOnboarded:!1},this.addItem(h.USERS,a)),localStorage.setItem(h.CURRENT_USER,JSON.stringify(a)),this.notifyAuthListeners(a),a}async loginWithGoogle(){await V(800);const t="google.mock@example.com";let r=this.getItems(h.USERS).find(a=>a.email===t);r||(r={uid:`user_google_${Date.now()}`,email:t,name:"Google Mock User",role:H.USER,isOnboarded:!1},this.addItem(h.USERS,r)),localStorage.setItem(h.CURRENT_USER,JSON.stringify(r)),this.notifyAuthListeners(r)}async logout(){localStorage.removeItem(h.CURRENT_USER),this.notifyAuthListeners(null)}onAuthStateChanged(t){this.authListeners.push(t);const s=localStorage.getItem(h.CURRENT_USER),r=s?JSON.parse(s):null;return t(r),()=>{this.authListeners=this.authListeners.filter(a=>a!==t)}}async updateUserProfile(t,s){await V(600);const r=this.getItems(h.USERS),a=r.findIndex(l=>l.uid===t);if(a===-1)throw new Error("Usu√°rio n√£o encontrado");if(s.rm&&r.some(c=>c.rm===s.rm&&c.uid!==t))throw new Error("Este RM j√° est√° cadastrado para outro usu√°rio.");const n={...r[a],...s,isOnboarded:!0};r[a]=n,this.saveItems(h.USERS,r);const i=localStorage.getItem(h.CURRENT_USER),d=i?JSON.parse(i):null;return d&&d.uid===t&&(localStorage.setItem(h.CURRENT_USER,JSON.stringify(n)),this.notifyAuthListeners(n)),n}async getUserProfile(t){return await V(100),this.getItems(h.USERS).find(a=>a.uid===t)||null}async getUsers(t){await V(500);const s=this.getItems(h.USERS),{searchTerm:r,role:a,courseId:n,classId:i}=t.filters,d=s.filter(x=>{var w,j;const g=r?((w=x.name)==null?void 0:w.toLowerCase().includes(r.toLowerCase()))||x.email.toLowerCase().includes(r.toLowerCase())||((j=x.rm)==null?void 0:j.includes(r)):!0,u=a?x.role===a:!0,b=n?x.courseId===n:!0,p=i?x.classId===i:!0;return g&&u&&b&&p}),l=t.cursor||0,c=d.slice(l,l+t.limit),m=l+c.length;return{data:c,nextCursor:m<d.length?m:void 0}}async deleteUser(t){await V(500);let s=this.getItems(h.USERS);s=s.filter(r=>r.uid!==t),this.saveItems(h.USERS,s)}async updateUserRole(t,s){await V(300);const r=this.getItems(h.USERS),a=r.findIndex(n=>n.uid===t);a!==-1&&(r[a].role=s,this.saveItems(h.USERS,r))}}class Pe extends ve{constructor(){super(),localStorage.getItem(h.COURSES)||localStorage.setItem(h.COURSES,JSON.stringify(Zt)),localStorage.getItem(h.CLASSES)||localStorage.setItem(h.CLASSES,JSON.stringify(es))}async getCourses(){return this.getItems(h.COURSES)}async addCourse(t){const s=this.getItems(h.COURSES),r={id:`c_${Date.now()}`,name:t};return s.push(r),this.saveItems(h.COURSES,s),r}async updateCourse(t,s){const r=this.getItems(h.COURSES),a=r.findIndex(n=>n.id===t);a!==-1&&(r[a].name=s,this.saveItems(h.COURSES,r))}async deleteCourse(t){let s=this.getItems(h.COURSES);s=s.filter(a=>a.id!==t),this.saveItems(h.COURSES,s);let r=this.getItems(h.CLASSES);r=r.filter(a=>a.courseId!==t),this.saveItems(h.CLASSES,r)}async getClasses(t){const s=this.getItems(h.CLASSES);return t?s.filter(r=>r.courseId===t):s}async addClass(t,s){const r=this.getItems(h.CLASSES),a={id:`t_${Date.now()}`,courseId:t,name:s};return r.push(a),this.saveItems(h.CLASSES,r),a}async updateClass(t,s){const r=this.getItems(h.CLASSES),a=r.findIndex(n=>n.id===t);a!==-1&&(r[a].name=s,this.saveItems(h.CLASSES,r))}async deleteClass(t){let s=this.getItems(h.CLASSES);s=s.filter(r=>r.id!==t),this.saveItems(h.CLASSES,s)}async getEvents(t){await V(400);const s=this.getItems(h.EVENTS),{searchTerm:r,visibility:a,course:n}=t.filters,i=this.getItems(h.CLASSES),d=s.filter(x=>{var p,w;const g=r?x.name.toLowerCase().includes(r.toLowerCase())||x.description.toLowerCase().includes(r.toLowerCase()):!0,u=a?x.visibility===a:!0;let b=!0;return n&&(x.visibility==="public"?b=!1:x.visibility==="course"?b=((p=x.allowedCourses)==null?void 0:p.includes(n))||!1:x.visibility==="class"&&(b=((w=x.allowedClasses)==null?void 0:w.some(j=>{const A=i.find(N=>N.id===j);return(A==null?void 0:A.courseId)===n}))||!1)),g&&u&&b}),l=t.cursor||0,c=d.slice(l,l+t.limit),m=l+c.length;return{data:c,nextCursor:m<d.length?m:void 0}}async getEventById(t){return await V(200),this.getItems(h.EVENTS).find(r=>r.id===t)}async getEventsByIds(t){return await V(200),this.getItems(h.EVENTS).filter(r=>t.includes(r.id))}async getEventsByParentId(t){return await V(200),this.getItems(h.EVENTS).filter(r=>r.parentId===t)}async getAvailableEventsForUser(t){return await V(400),this.getItems(h.EVENTS).filter(r=>{var a,n;return r.visibility==="public"?!0:r.visibility==="course"?t.courseId?(a=r.allowedCourses)==null?void 0:a.includes(t.courseId):!1:r.visibility==="class"&&t.classId?(n=r.allowedClasses)==null?void 0:n.includes(t.classId):!1})}async getPublicEvents(){return await V(400),this.getItems(h.EVENTS).filter(s=>s.visibility==="public")}async createEvent(t){await V(600),this.addItem(h.EVENTS,t)}async updateEvent(t){await V(500);const s=this.getItems(h.EVENTS),r=s.findIndex(a=>a.id===t.id);if(r!==-1)s[r]=t,this.saveItems(h.EVENTS,s);else throw new Error("Evento n√£o encontrado para atualiza√ß√£o")}async deleteEvent(t){await V(400);let s=this.getItems(h.EVENTS);const r=s.filter(i=>i.id===t||i.parentId===t).map(i=>i.id);s=s.filter(i=>!r.includes(i.id)),this.saveItems(h.EVENTS,s);let a=this.getItems(h.ENROLLMENTS);a=a.filter(i=>!r.includes(i.eventId)),this.saveItems(h.ENROLLMENTS,a);let n=this.getItems(h.TEAMS);n=n.filter(i=>!r.includes(i.eventId)),this.saveItems(h.TEAMS,n)}}class ss extends ve{constructor(t){super(),this.notificationService=t}async getTeamsForEvent(t){return await V(300),this.getItems(h.TEAMS).filter(r=>r.eventId===t)}async createTeam(t,s,r){await V(500);const a=this.getItems(h.EVENTS),n=a.findIndex(p=>p.id===t);if(n===-1)throw new Error("Evento n√£o encontrado.");const i=a[n].sessions.findIndex(p=>p.id===s);if(i===-1)throw new Error("Sess√£o n√£o encontrada.");const d=a[n].sessions[i];if(d.filled>=d.capacity)throw new Error("A sess√£o est√° lotada.");const l=this.getItems(h.TEAMS),c=`team_${Date.now()}`,m=Math.random().toString(36).substring(2,6).toUpperCase(),x=`Equipe #${Math.floor(Math.random()*1e3)}`,g={id:c,eventId:t,sessionId:s,name:x,code:m,captainId:r.uid,members:[r.uid],createdAt:new Date().toISOString()};await this.createEnrollment(r.uid,t,s,!0);const u=this.getItems(h.ENROLLMENTS),b=u.findIndex(p=>p.userId===r.uid&&p.eventId===t);return b!==-1&&(u[b].teamId=c,this.saveItems(h.ENROLLMENTS,u)),a[n].sessions[i].filled+=1,this.saveItems(h.EVENTS,a),l.push(g),this.saveItems(h.TEAMS,l),g}async joinTeam(t,s,r){await V(500);const a=this.getItems(h.TEAMS),n=a.findIndex(l=>l.id===t);if(n===-1)throw new Error("Equipe n√£o encontrada.");if(a[n].code!==r)throw new Error("C√≥digo de equipe inv√°lido.");if(a[n].members.includes(s.uid))throw new Error("Voc√™ j√° faz parte desta equipe.");await this.createEnrollment(s.uid,a[n].eventId,a[n].sessionId,!0);const i=this.getItems(h.ENROLLMENTS),d=i.findIndex(l=>l.userId===s.uid&&l.eventId===a[n].eventId);d!==-1&&(i[d].teamId=t,this.saveItems(h.ENROLLMENTS,i)),a[n].members.push(s.uid),this.saveItems(h.TEAMS,a),await this.notificationService.createNotification({userId:a[n].captainId,title:"Novo membro na equipe! üõ°Ô∏è",message:`${s.name||"Um usu√°rio"} entrou na sua equipe ${a[n].name}.`,type:"success",createdAt:new Date().toISOString(),read:!1,link:`/event/${a[n].eventId}`})}async leaveTeam(t,s){var x;await V(500);const r=this.getItems(h.TEAMS),a=r.findIndex(g=>g.id===t);if(a===-1)throw new Error("Equipe n√£o encontrada.");const n=r[a],i=this.getItems(h.EVENTS),d=i.findIndex(g=>g.id===n.eventId),l=localStorage.getItem(h.CURRENT_USER),c=l?JSON.parse(l):null,m=c==null?void 0:c.uid;if(n.captainId===s){for(const g of n.members){const b=this.getItems(h.ENROLLMENTS).find(p=>p.userId===g&&p.eventId===n.eventId);b&&await this.cancelEnrollment(b.id),g!==s&&await this.notificationService.createNotification({userId:g,title:"Equipe Desfeita ‚ö†Ô∏è",message:`A equipe "${n.name}" foi desfeita pelo capit√£o. Sua inscri√ß√£o foi cancelada.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}if(r.splice(a,1),d!==-1){const g=i[d].sessions.findIndex(u=>u.id===n.sessionId);g!==-1&&(i[d].sessions[g].filled=Math.max(0,i[d].sessions[g].filled-1),this.saveItems(h.EVENTS,i))}}else{n.members=n.members.filter(w=>w!==s);const u=this.getItems(h.ENROLLMENTS).find(w=>w.userId===s&&w.eventId===n.eventId);u&&await this.cancelEnrollment(u.id);const p=((x=this.getItems(h.USERS).find(w=>w.uid===s))==null?void 0:x.name)||"Um membro";m!==s?await this.notificationService.createNotification({userId:s,title:"Removido da Equipe üö´",message:`Voc√™ foi removido da equipe "${n.name}" pelo capit√£o.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"}):await this.notificationService.createNotification({userId:n.captainId,title:"Membro Saiu üèÉ",message:`${p} saiu da sua equipe "${n.name}".`,type:"info",read:!1,createdAt:new Date().toISOString(),link:`/event/${n.eventId}`})}this.saveItems(h.TEAMS,r)}async kickMember(t,s){return this.leaveTeam(t,s)}async getEnrollmentsForUser(t){return await V(300),this.getItems(h.ENROLLMENTS).filter(r=>r.userId===t&&r.status!==J.CANCELED)}async getUserEnrollmentsDetails(t){const s=this.getItems(h.ENROLLMENTS).filter(a=>a.userId===t&&a.status===J.CONFIRMED),r=this.getItems(h.EVENTS);return s.map(a=>{const n=r.find(d=>d.id===a.eventId),i=n==null?void 0:n.sessions.find(d=>d.id===a.sessionId);return!n||!i?null:{enrollmentId:a.id,eventName:n.name,eventLocation:n.location,sessionDate:i.date,sessionTime:`${i.startTime} - ${i.endTime}`,enrolledAt:a.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(t){const s=this.getItems(h.ENROLLMENTS).filter(n=>n.eventId===t&&n.status===J.CONFIRMED),r=this.getItems(h.USERS),a=this.getItems(h.EVENTS).find(n=>n.id===t);return s.map(n=>{const i=r.find(l=>l.uid===n.userId),d=a==null?void 0:a.sessions.find(l=>l.id===n.sessionId);return{id:n.id,user:{uid:i==null?void 0:i.uid,name:(i==null?void 0:i.name)||"Desconhecido",email:(i==null?void 0:i.email)||"",rm:(i==null?void 0:i.rm)||"",courseId:i==null?void 0:i.courseId,classId:i==null?void 0:i.classId},session:{id:d==null?void 0:d.id,date:d==null?void 0:d.date,startTime:d==null?void 0:d.startTime,endTime:d==null?void 0:d.endTime},status:n.status,enrolledAt:n.enrolledAt,teamId:n.teamId,attended:n.attended,checkInAt:n.checkInAt}})}async getEnrollmentDetailsForEvent(t){const s=this.getItems(h.ENROLLMENTS).filter(n=>n.eventId===t&&n.status===J.CONFIRMED),r=this.getItems(h.USERS),a=this.getItems(h.EVENTS).find(n=>n.id===t);return s.map(n=>{const i=r.find(l=>l.uid===n.userId),d=a==null?void 0:a.sessions.find(l=>l.id===n.sessionId);return{Nome:(i==null?void 0:i.name)||"Desconhecido",Email:(i==null?void 0:i.email)||"",RM:(i==null?void 0:i.rm)||"",SessaoData:X(d==null?void 0:d.date),SessaoHora:(d==null?void 0:d.startTime)||"",Status:n.status,DataInscricao:new Date(n.enrolledAt).toLocaleString("pt-BR"),Presenca:n.attended?"Sim":"N√£o"}})}async createEnrollment(t,s,r,a=!1){await V(800);const n=this.getItems(h.EVENTS),i=n.findIndex(u=>u.id===s);if(i===-1)throw new Error("Evento n√£o encontrado");const d=n[i].sessions.findIndex(u=>u.id===r);if(d===-1)throw new Error("Sess√£o n√£o encontrada");const l=n[i].sessions[d];if(!a&&l.filled>=l.capacity)throw new Error("A sess√£o est√° lotada");const c=this.getItems(h.ENROLLMENTS),m=c.filter(u=>u.userId===t&&u.status===J.CONFIRMED);if(m.find(u=>u.eventId===s))throw new Error("Voc√™ j√° est√° inscrito neste evento");for(const u of m){const b=n.find(w=>w.id===u.eventId),p=b==null?void 0:b.sessions.find(w=>w.id===u.sessionId);if(b&&p&&p.date===l.date&&l.startTime<p.endTime&&l.endTime>p.startTime)throw new Error(`CONFLICT|${b.name}|${p.startTime}|${p.endTime}`)}const g={id:`enr_${Date.now()}`,userId:t,eventId:s,sessionId:r,status:J.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1};return c.push(g),this.saveItems(h.ENROLLMENTS,c),a||(n[i].sessions[d].filled+=1,this.saveItems(h.EVENTS,n)),g}async cancelEnrollment(t){await V(500);const s=localStorage.getItem(h.CURRENT_USER),r=s?JSON.parse(s):null,a=r==null?void 0:r.uid,n=this.getItems(h.ENROLLMENTS),i=n.findIndex(c=>c.id===t);if(i===-1)throw new Error("Inscri√ß√£o n√£o encontrada");const d=n[i];let l=!0;if(d.teamId){const c=this.getItems(h.TEAMS),m=c.findIndex(x=>x.id===d.teamId);if(m!==-1){const x=c[m];x.members=x.members.filter(g=>g!==d.userId),x.captainId===d.userId?(c.splice(m,1),l=!0):l=!1,this.saveItems(h.TEAMS,c)}}if(l){const c=this.getItems(h.EVENTS),m=c.findIndex(x=>x.id===d.eventId);if(m!==-1){const x=c[m].sessions.findIndex(g=>g.id===d.sessionId);x!==-1&&(c[m].sessions[x].filled=Math.max(0,c[m].sessions[x].filled-1),this.saveItems(h.EVENTS,c))}}n.splice(i,1),this.saveItems(h.ENROLLMENTS,n),a&&d.userId!==a&&await this.notificationService.createNotification({userId:d.userId,title:"Inscri√ß√£o Cancelada ‚ö†Ô∏è",message:"Sua inscri√ß√£o foi cancelada pela administra√ß√£o.",type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}async markAttendance(t){await V(500);const s=this.getItems(h.ENROLLMENTS),r=s.findIndex(i=>i.id===t);if(r===-1)return{success:!1,message:"Inscri√ß√£o n√£o encontrada."};if(s[r].attended){const i=await new $e().getUserProfile(s[r].userId),d=await new Pe().getEventById(s[r].eventId);return{success:!1,message:"Check-in j√° realizado anteriormente.",alreadyAttended:!0,userName:(i==null?void 0:i.name)||"Desconhecido",eventName:(d==null?void 0:d.name)||"Evento"}}s[r].attended=!0,s[r].checkInAt=new Date().toISOString(),this.saveItems(h.ENROLLMENTS,s);const a=await new $e().getUserProfile(s[r].userId),n=await new Pe().getEventById(s[r].eventId);return{success:!0,message:"Check-in realizado com sucesso!",userName:a==null?void 0:a.name,eventName:n==null?void 0:n.name}}}class rs extends ve{async getNotifications(t){return this.getItems(h.NOTIFICATIONS).filter(r=>r.userId===t).sort((r,a)=>a.createdAt.localeCompare(r.createdAt))}subscribeToNotifications(t,s){s(this.getItems(h.NOTIFICATIONS).filter(a=>a.userId===t).sort((a,n)=>n.createdAt.localeCompare(a.createdAt)));const r=setInterval(()=>{const a=this.getItems(h.NOTIFICATIONS).filter(n=>n.userId===t).sort((n,i)=>i.createdAt.localeCompare(n.createdAt));s(a)},3e3);return()=>clearInterval(r)}async markNotificationAsRead(t){const s=this.getItems(h.NOTIFICATIONS),r=s.findIndex(a=>a.id===t);r!==-1&&(s[r].read=!0,this.saveItems(h.NOTIFICATIONS,s))}async markAllNotificationsAsRead(t){const s=this.getItems(h.NOTIFICATIONS);s.forEach(r=>{r.userId===t&&(r.read=!0)}),this.saveItems(h.NOTIFICATIONS,s)}async createNotification(t){const s=this.getItems(h.NOTIFICATIONS),r={...t,id:`notif_${Date.now()}`};s.push(r),this.saveItems(h.NOTIFICATIONS,s)}async saveDeviceToken(t,s){console.log(`[Mock] Saving device token for user ${t}: ${s}`)}}class as extends ve{async getCertificateConfig(){const t=localStorage.getItem(h.CERT_CONFIG);return t?JSON.parse(t):ts}async updateCertificateConfig(t){localStorage.setItem(h.CERT_CONFIG,JSON.stringify(t))}}class ns extends ve{async resetAndSeedData(){localStorage.clear(),await V(500);const t=[{id:"c1",name:"Ci√™ncia da Computa√ß√£o"},{id:"c2",name:"Direito"},{id:"c3",name:"Medicina"}];this.saveItems(h.COURSES,t);const s=[{id:"t1",courseId:"c1",name:"CC-2024-A"}];this.saveItems(h.CLASSES,s);const r=[{uid:"u_admin",email:"admin@school.com",name:"Admin",role:H.ADMIN,isOnboarded:!0}];this.saveItems(h.USERS,r)}async exportData(){const t={};return[h.USERS,h.EVENTS,h.ENROLLMENTS,h.COURSES,h.CLASSES,h.TEAMS,h.NOTIFICATIONS,h.CERT_CONFIG].forEach(r=>{t[r]=this.getItems(r)}),JSON.stringify(t,null,2)}async importData(t){try{const s=JSON.parse(t);localStorage.clear();const r={users:h.USERS,events:h.EVENTS,enrollments:h.ENROLLMENTS,courses:h.COURSES,classes:h.CLASSES,teams:h.TEAMS,notifications:h.NOTIFICATIONS,cert_config:h.CERT_CONFIG,[h.TEAMS]:h.TEAMS,[h.CERT_CONFIG]:h.CERT_CONFIG};Object.keys(s).forEach(a=>{const n=r[a]||a;if(Array.isArray(s[a])){const i=s[a].map(d=>{const{_id:l,...c}=d;return c});this.saveItems(n,i)}else n===h.CERT_CONFIG&&localStorage.setItem(n,JSON.stringify(s[a]))})}catch{throw new Error("Formato de JSON inv√°lido.")}}}class is{constructor(){this.authService=new $e,this.eventService=new Pe,this.notificationService=new rs,this.enrollmentService=new ss(this.notificationService),this.devService=new ns,this.configService=new as}login(t,s){return this.authService.login(t,s)}loginWithGoogle(){return this.authService.loginWithGoogle()}logout(){return this.authService.logout()}onAuthStateChanged(t){return this.authService.onAuthStateChanged(t)}updateUserProfile(t,s){return this.authService.updateUserProfile(t,s)}getUserProfile(t){return this.authService.getUserProfile(t)}getUsers(t){return this.authService.getUsers(t)}deleteUser(t){return this.authService.deleteUser(t)}updateUserRole(t,s){return this.authService.updateUserRole(t,s)}getCourses(){return this.eventService.getCourses()}addCourse(t){return this.eventService.addCourse(t)}updateCourse(t,s){return this.eventService.updateCourse(t,s)}deleteCourse(t){return this.eventService.deleteCourse(t)}getClasses(t){return this.eventService.getClasses(t)}addClass(t,s){return this.eventService.addClass(t,s)}updateClass(t,s){return this.eventService.updateClass(t,s)}deleteClass(t){return this.eventService.deleteClass(t)}getEvents(t){return this.eventService.getEvents(t)}getEventById(t){return this.eventService.getEventById(t)}getEventsByIds(t){return this.eventService.getEventsByIds(t)}getAvailableEventsForUser(t){return this.eventService.getAvailableEventsForUser(t)}getPublicEvents(){return this.eventService.getPublicEvents()}getEventsByParentId(t){return this.eventService.getEventsByParentId(t)}createEvent(t){return this.eventService.createEvent(t)}updateEvent(t){return this.eventService.updateEvent(t)}deleteEvent(t){return this.eventService.deleteEvent(t)}getTeamsForEvent(t){return this.enrollmentService.getTeamsForEvent(t)}createTeam(t,s,r){return this.enrollmentService.createTeam(t,s,r)}joinTeam(t,s,r){return this.enrollmentService.joinTeam(t,s,r)}leaveTeam(t,s){return this.enrollmentService.leaveTeam(t,s)}kickMember(t,s){return this.enrollmentService.kickMember(t,s)}getEnrollmentsForUser(t){return this.enrollmentService.getEnrollmentsForUser(t)}getUserEnrollmentsDetails(t){return this.enrollmentService.getUserEnrollmentsDetails(t)}getEnrichedEnrollments(t){return this.enrollmentService.getEnrichedEnrollments(t)}getEnrollmentDetailsForEvent(t){return this.enrollmentService.getEnrollmentDetailsForEvent(t)}createEnrollment(t,s,r,a){return this.enrollmentService.createEnrollment(t,s,r,a)}cancelEnrollment(t){return this.enrollmentService.cancelEnrollment(t)}markAttendance(t){return this.enrollmentService.markAttendance(t)}getNotifications(t){return this.notificationService.getNotifications(t)}subscribeToNotifications(t,s){return this.notificationService.subscribeToNotifications(t,s)}markNotificationAsRead(t){return this.notificationService.markNotificationAsRead(t)}markAllNotificationsAsRead(t){return this.notificationService.markAllNotificationsAsRead(t)}createNotification(t){return this.notificationService.createNotification(t)}saveDeviceToken(t,s){return this.notificationService.saveDeviceToken(t,s)}getCertificateConfig(){return this.configService.getCertificateConfig()}updateCertificateConfig(t){return this.configService.updateCertificateConfig(t)}resetAndSeedData(){return this.devService.resetAndSeedData()}exportData(){return this.devService.exportData()}importData(t){return this.devService.importData(t)}}const os=()=>se.useFirebase?new Xt:new is,R=os(),dt=v.createContext(void 0),ds=({children:o})=>{const[t,s]=v.useState(null),[r,a]=v.useState(!0);v.useEffect(()=>{const c=R.onAuthStateChanged(m=>{s(m),a(!1)});return()=>c()},[]);const n=async(c,m)=>{a(!0);try{await R.login(c,m)}catch(x){throw console.error(x),a(!1),x}},i=async()=>{a(!0);try{await R.loginWithGoogle()}catch(c){throw console.error(c),a(!1),c}},d=async()=>{a(!0),await R.logout()},l=async()=>{if(t){a(!0);try{const c=await R.getUserProfile(t.uid);s(c)}catch(c){console.error("Falha ao atualizar o perfil",c)}finally{a(!1)}}};return e.jsx(dt.Provider,{value:{user:t,loading:r,login:n,loginWithGoogle:i,logout:d,refreshProfile:l},children:o})},ae=()=>{const o=v.useContext(dt);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o},lt=v.createContext(void 0),ls=({children:o})=>{const[t,s]=v.useState([]),r=v.useCallback(n=>{s(i=>i.filter(d=>d.id!==n))},[]),a=v.useCallback((n,i)=>{const d=Math.random().toString(36).substr(2,9);s(l=>[...l,{id:d,type:n,message:i}]),setTimeout(()=>{r(d)},4e3)},[r]);return e.jsxs(lt.Provider,{value:{addToast:a,removeToast:r},children:[o,e.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>e.jsxs("div",{className:`pointer-events-auto transform transition-all duration-300 ease-in-out translate-y-0 opacity-100 min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border-l-4 flex items-start justify-between bg-white dark:bg-darkcard dark:border-gray-600
              ${n.type==="success"?"border-green-500":""}
              ${n.type==="error"?"border-red-500":""}
              ${n.type==="warning"?"border-amber-500":""}
              ${n.type==="info"?"border-blue-500":""}
            `,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xl mr-3",children:[n.type==="success"&&"‚úÖ",n.type==="error"&&"‚ùå",n.type==="warning"&&"‚ö†Ô∏è",n.type==="info"&&"‚ÑπÔ∏è"]}),e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:n.message})]}),e.jsx("button",{onClick:()=>r(n.id),className:"ml-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 focus:outline-none",children:"√ó"})]},n.id))})]})},ye=()=>{const o=v.useContext(lt);if(!o)throw new Error("useToast must be used within a ToastProvider");return o},ct=v.createContext(void 0),cs=({children:o})=>{const[t,s]=v.useState(()=>{const a=localStorage.getItem("eduevent_theme");return a==="dark"||a==="light"?a:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});v.useEffect(()=>{const a=window.document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("eduevent_theme",t)},[t]);const r=()=>{s(a=>a==="light"?"dark":"light")};return e.jsx(ct.Provider,{value:{theme:t,toggleTheme:r},children:o})},ms=()=>{const o=v.useContext(ct);if(!o)throw new Error("useTheme must be used within a ThemeProvider");return o},us=()=>{const{user:o}=ae(),[t,s]=v.useState([]),[r,a]=v.useState(0),[n,i]=v.useState(!1),[d,l]=v.useState(!0),[c,m]=v.useState(typeof Notification<"u"?Notification.permission:"denied"),x=v.useCallback(async()=>{if(!(typeof Notification>"u"))try{const p=await Notification.requestPermission();m(p),p==="granted"&&new Notification("EduEvent",{body:"Notifica√ß√µes ativadas com sucesso!",icon:"https://cdn-icons-png.flaticon.com/512/2995/2995458.png"})}catch(p){console.error("Error requesting notification permission:",p)}},[]);v.useEffect(()=>{if(!o)return;const p=R.subscribeToNotifications(o.uid,w=>{if(w.length>0&&t.length>0){const j=w[0],A=t[0];j.id!==A.id&&!j.read&&Notification.permission==="granted"&&new Notification(j.title,{body:j.message,icon:"https://cdn-icons-png.flaticon.com/512/2995/2995458.png"})}s(w),a(w.filter(j=>!j.read).length),l(!1)});return()=>p()},[o]);const g=v.useCallback(async()=>{if(!o)return;const p=localStorage.getItem(`last_event_check_${o.uid}`),j=new Date().toISOString().split("T")[0];if(p!==j)try{const A=await R.getEnrollmentsForUser(o.uid);if(A.length===0)return;const N=[...new Set(A.map(T=>T.eventId))],k=await R.getEventsByIds(N),E=new Date;E.setDate(E.getDate()+1);const S=E.toISOString().split("T")[0];for(const T of A){const C=k.find(F=>F.id===T.eventId);if(!C)continue;const M=C.sessions.find(F=>F.id===T.sessionId);if(M&&(M.date===j||M.date===S)){const F=M.date===j,D=F?"Evento Hoje! üìÖ":"Evento Amanh√£! ‚è≥",z=`N√£o esque√ßa: "${C.name}" acontece ${F?"hoje":"amanh√£"} √†s ${M.startTime}.`;t.some(ne=>ne.type==="reminder"&&ne.message===z)||await R.createNotification({userId:o.uid,title:D,message:z,type:"reminder",read:!1,createdAt:new Date().toISOString(),link:`/event/${C.id}`})}}localStorage.setItem(`last_event_check_${o.uid}`,j)}catch(A){console.error("Error checking upcoming events",A)}},[o,t]);return v.useEffect(()=>{g()},[g]),{notifications:t,unreadCount:r,isOpen:n,setIsOpen:i,markAsRead:async p=>{s(w=>w.map(j=>j.id===p?{...j,read:!0}:j)),a(w=>Math.max(0,w-1)),await R.markNotificationAsRead(p)},markAllAsRead:async()=>{o&&(s(p=>p.map(w=>({...w,read:!0}))),a(0),await R.markAllNotificationsAsRead(o.uid))},loading:d,permission:c,requestPermission:x}},rt=()=>{const{notifications:o,unreadCount:t,isOpen:s,setIsOpen:r,markAsRead:a,markAllAsRead:n,permission:i,requestPermission:d}=us(),l=v.useRef(null);v.useEffect(()=>{const m=x=>{l.current&&!l.current.contains(x.target)&&r(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[r]);const c=m=>{switch(m){case"success":return"‚úÖ";case"warning":return"‚ö†Ô∏è";case"reminder":return"‚è∞";default:return"‚ÑπÔ∏è"}};return e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{onClick:()=>r(!s),className:"relative p-2 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none",children:[e.jsx("span",{className:"sr-only",children:"Notifica√ß√µes"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),t>0&&e.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2.5 w-2.5 rounded-full ring-2 ring-white dark:ring-gray-800 bg-red-500 animate-pulse"})]}),s&&e.jsxs("div",{className:`
            fixed left-4 right-4 top-16 mt-2 z-[60]
            sm:absolute sm:right-0 sm:left-auto sm:top-full sm:w-80 sm:mt-2
            origin-top-right rounded-md shadow-lg bg-white dark:bg-darkcard 
            ring-1 ring-black ring-opacity-5 focus:outline-none 
            overflow-hidden border border-gray-100 dark:border-gray-700
        `,children:[e.jsxs("div",{className:"py-2 px-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"Notifica√ß√µes"}),t>0&&e.jsx("button",{onClick:n,className:"text-xs text-primary hover:text-indigo-600 dark:text-indigo-400",children:"Marcar todas como lidas"})]}),i==="default"&&e.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-100 dark:border-indigo-800/30",children:[e.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mb-2",children:"Receba alertas sobre eventos e mudan√ßas na sua equipe."}),e.jsx("button",{onClick:d,className:"w-full py-1.5 px-3 bg-white dark:bg-indigo-700 border border-indigo-200 dark:border-indigo-600 rounded text-xs font-bold text-indigo-600 dark:text-white hover:bg-indigo-50 dark:hover:bg-indigo-600 transition-colors shadow-sm",children:"Ativar notifica√ß√µes no desktop üîî"})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:o.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma notifica√ß√£o."}):e.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:o.map(m=>e.jsx("li",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${m.read?"":"bg-indigo-50/50 dark:bg-indigo-900/10"}`,onClick:()=>a(m.id),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 text-xl pt-1",children:c(m.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${m.read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:m.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m.message}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(m.createdAt).toLocaleDateString()}),m.link&&e.jsx(P,{to:m.link,className:"text-xs text-primary font-bold hover:underline",onClick:()=>r(!1),children:"Ver Detalhes"})]})]}),!m.read&&e.jsx("div",{className:"flex-shrink-0 self-center",children:e.jsx("span",{className:"block h-2 w-2 rounded-full bg-primary"})})]})},m.id))})})]})]})},te=({children:o})=>{const{user:t,logout:s}=ae(),{theme:r,toggleTheme:a}=ms(),n=ke(),i=ze(),[d,l]=v.useState(!1),c=async()=>{await s(),n("/")},m=u=>i.pathname===u?"bg-indigo-50 border-primary text-primary dark:bg-indigo-900/50 dark:text-indigo-200":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200",x=u=>i.pathname===u?"border-primary text-gray-900 dark:text-white dark:border-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200";if(!t)return e.jsx(e.Fragment,{children:o});const g="inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors h-full";return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-darkbg transition-colors duration-200",children:[e.jsxs("nav",{className:"bg-white dark:bg-darkcard shadow-sm sticky top-0 z-50 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsx(P,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight dark:text-indigo-400",children:"EduEvent"})}),e.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:gap-6",children:[e.jsx(P,{to:"/dashboard",className:`${g} ${x("/dashboard")}`,children:"Eventos"}),e.jsx(P,{to:"/my-enrollments",className:`${g} ${x("/my-enrollments")}`,children:"Minhas Inscri√ß√µes"}),t.role===H.ADMIN&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx(P,{to:"/admin/scanner",className:`${g} ${x("/admin/scanner")}`,children:"Scanner"}),e.jsx(P,{to:"/admin/events",className:`${g} ${x("/admin/events")}`,children:"Gerenciar Eventos"}),e.jsx(P,{to:"/admin/courses",className:`${g} ${x("/admin/courses")}`,children:"Gerenciar Cursos"}),e.jsx(P,{to:"/admin/users",className:`${g} ${x("/admin/users")}`,children:"Gerenciar Usu√°rios"}),e.jsx(P,{to:"/admin/certificate",className:`${g} ${x("/admin/certificate")}`,children:"Config. Certificados"}),e.jsx(P,{to:"/admin/dev",className:`${g} text-amber-600 dark:text-amber-400 ${x("/admin/dev")}`,children:"Dev"})]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[e.jsx(rt,{}),e.jsx("button",{onClick:a,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",title:r==="dark"?"Mudar para modo claro":"Mudar para modo escuro",children:r==="dark"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:t.name||t.email}),e.jsx("button",{onClick:c,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none transition-colors",children:"Sair"})]})]}),e.jsxs("div",{className:"-mr-2 flex items-center sm:hidden gap-2",children:[e.jsx(rt,{}),e.jsx("button",{onClick:a,className:"p-3 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",children:r==="dark"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsxs("button",{onClick:()=>l(!d),type:"button",className:"bg-white dark:bg-gray-800 inline-flex items-center justify-center p-3 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[e.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),d?e.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]})]})}),d&&e.jsxs("div",{className:"sm:hidden border-t border-gray-200 dark:border-gray-700",id:"mobile-menu",children:[e.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[e.jsx(P,{to:"/dashboard",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/dashboard")}`,children:"Eventos"}),e.jsx(P,{to:"/my-enrollments",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/my-enrollments")}`,children:"Minhas Inscri√ß√µes"}),t.role===H.ADMIN&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 pb-2",children:e.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administra√ß√£o"})}),e.jsx(P,{to:"/admin/scanner",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/admin/scanner")}`,children:"Scanner Check-in"}),e.jsx(P,{to:"/admin/events",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/admin/events")}`,children:"Gerenciar Eventos"}),e.jsx(P,{to:"/admin/courses",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/admin/courses")}`,children:"Gerenciar Cursos"}),e.jsx(P,{to:"/admin/users",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/admin/users")}`,children:"Gerenciar Usu√°rios"}),e.jsx(P,{to:"/admin/certificate",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${m("/admin/certificate")}`,children:"Config. Certificados"}),e.jsx(P,{to:"/admin/dev",onClick:()=>l(!1),className:"block pl-3 pr-4 py-3 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-700 dark:text-amber-500",children:"Dev"})]})]}),e.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center px-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-200 font-bold text-lg",children:t.name?t.name.charAt(0):t.email.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:t.name||"Usu√°rio"}),e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t.email})]})]}),e.jsx("div",{className:"mt-3 space-y-1",children:e.jsx("button",{onClick:c,className:"block w-full text-left px-4 py-3 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700",children:"Sair do Sistema"})})]})]})]}),e.jsx("main",{className:"flex-1 py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o})})]})},de=({children:o,isLoading:t=!1,variant:s="primary",className:r="",disabled:a,...n})=>{const i="relative inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",d={primary:"border-transparent text-white bg-primary hover:bg-indigo-700 focus:ring-primary",secondary:"border-transparent text-white bg-secondary hover:bg-emerald-700 focus:ring-secondary",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500",outline:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary"};return e.jsxs("button",{disabled:t||a,className:`${i} ${d[s]} ${r}`,...n,children:[e.jsx("span",{className:t?"invisible":"",children:o}),t&&e.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})},Ie=o=>{const t=(o==null?void 0:o.code)||"",s=(o==null?void 0:o.message)||"";if(typeof s=="string"&&s.startsWith("CONFLICT|")){const r=s.split("|");return r.length>=4?`Conflito de hor√°rio! Voc√™ j√° possui o evento "${r[1]}" agendado entre ${r[2]} e ${r[3]}.`:"Conflito de hor√°rio com outro evento j√° agendado."}if(s==="A sess√£o est√° lotada"||s.includes("capacidade m√°xima"))return"Que pena! Esta sess√£o acabou de lotar.";if(s.includes("j√° est√° inscrito"))return"Voc√™ j√° garantiu sua vaga neste evento!";if(s.includes("Evento n√£o encontrado"))return"O evento que voc√™ procura n√£o est√° mais dispon√≠vel.";switch(t){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos. Verifique e tente novamente.";case"auth/email-already-in-use":return"Este e-mail j√° est√° sendo usado por outra conta.";case"auth/weak-password":return"Sua senha √© muito fraca. Escolha uma senha mais forte.";case"auth/invalid-email":return"O formato do e-mail √© inv√°lido.";case"auth/user-disabled":return"Esta conta foi desativada. Contate o administrador.";case"auth/too-many-requests":return"Muitas tentativas consecutivas. Aguarde alguns instantes.";case"auth/network-request-failed":return"Erro de conex√£o. Verifique sua internet.";case"auth/popup-closed-by-user":return"O login foi cancelado.";case"permission-denied":return"Voc√™ n√£o tem permiss√£o para realizar esta a√ß√£o.";default:return s||"Ocorreu um erro inesperado. Tente novamente mais tarde."}},ce=({label:o,error:t,helperText:s,as:r="input",className:a="",children:n,id:i,...d})=>{const l=i||d.name||Math.random().toString(36).substr(2,9),c=`${l}-error`,m=`${l}-helper`,x=`
    appearance-none 
    block 
    w-full 
    px-4 
    py-3 
    text-base 
    rounded-lg 
    border 
    bg-white dark:bg-gray-800 
    text-gray-900 dark:text-white 
    placeholder-gray-400 
    focus:outline-none 
    focus:ring-2 
    focus:ring-offset-0
    transition-shadow 
    duration-200
  `,g=t?"border-red-300 focus:border-red-500 focus:ring-red-200 dark:border-red-800 dark:focus:ring-red-900/30":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-indigo-100 dark:focus:ring-indigo-900/30",u=[t?c:void 0,s?m:void 0].filter(Boolean).join(" ")||void 0;return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 ml-1",children:o}),e.jsx("div",{className:"relative",children:r==="select"?e.jsx("select",{id:l,className:`${x} ${g} ${a} pr-10`,"aria-invalid":!!t,"aria-describedby":u,...d,children:n}):e.jsx("input",{id:l,className:`${x} ${g} ${a}`,"aria-invalid":!!t,"aria-describedby":u,...d})}),t?e.jsxs("p",{id:c,className:"mt-1.5 text-sm text-red-600 dark:text-red-400 flex items-center animate-fade-in ml-1",role:"alert",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t]}):s?e.jsx("p",{id:m,className:"mt-1.5 text-sm text-gray-500 dark:text-gray-400 ml-1",children:s}):null]})},xs=()=>{var w,j;const[o,t]=v.useState(""),[s,r]=v.useState(""),{user:a,loading:n,login:i,loginWithGoogle:d}=ae(),l=ke(),c=ze(),{addToast:m}=ye(),[x,g]=v.useState(!1),u=(j=(w=c.state)==null?void 0:w.from)!=null&&j.pathname?c.state.from.pathname+(c.state.from.search||""):"/dashboard";v.useEffect(()=>{!n&&a&&l(u,{replace:!0})},[a,n,l,u]);const b=async A=>{A.preventDefault(),g(!0);try{await i(o,s),m("success","Login realizado com sucesso!")}catch(N){const k=Ie(N);m("error",k)}finally{g(!1)}},p=async()=>{g(!0);try{await d(),m("success","Autenticado com Google!")}catch(A){const N=Ie(A);m("error",N),g(!1)}};return n||!n&&a?e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-primary font-medium",children:"Verificando sess√£o..."}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[e.jsx("div",{className:"flex justify-start",children:e.jsxs(P,{to:"/",className:"flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors font-medium p-2 -ml-2 rounded-lg active:bg-gray-100 dark:active:bg-gray-800",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o in√≠cio"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-primary dark:text-indigo-400",children:"EduEvent"}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Acesse sua conta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:se.useFirebase?"Gerencie suas inscri√ß√µes e eventos em um s√≥ lugar.":"Ambiente de Demonstra√ß√£o (Mock)"})]}),e.jsxs("form",{className:"mt-8 space-y-2",onSubmit:b,children:[e.jsx(ce,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,label:"E-mail",placeholder:"seu@email.com",value:o,onChange:A=>t(A.target.value),inputMode:"email"}),e.jsx(ce,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:se.useFirebase,label:"Senha",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:s,onChange:A=>r(A.target.value),enterKeyHint:"go"}),e.jsx("div",{className:"pt-4",children:e.jsx(de,{type:"submit",isLoading:x,className:"w-full h-12 text-base shadow-lg shadow-indigo-200 dark:shadow-none",children:"Acessar Plataforma"})}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-50 dark:bg-darkbg text-gray-500 dark:text-gray-400",children:"Ou entre rapidamente com"})})]}),e.jsxs("button",{type:"button",onClick:p,disabled:x,className:"w-full h-12 flex items-center justify-center px-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70 transition-colors active:scale-[0.98]",children:[e.jsxs("svg",{className:"h-5 w-5 mr-3","aria-hidden":"true",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),!se.useFirebase&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 p-4 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[e.jsx("p",{className:"font-bold mb-2",children:"Ambiente de Teste (Mock):"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{onClick:()=>t("student@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:"üë§ student@school.com"}),e.jsx("li",{onClick:()=>t("admin@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:"üõ°Ô∏è admin@school.com"})]})]})]})})},gs=()=>{const{user:o,refreshProfile:t}=ae(),s=ke(),{addToast:r}=ye(),[a,n]=v.useState([]),[i,d]=v.useState([]),[l,c]=v.useState(!1),[m,x]=v.useState({name:(o==null?void 0:o.name)||"",rm:"",courseId:"",classId:""});v.useEffect(()=>{if(o!=null&&o.isOnboarded){s("/dashboard");return}R.getCourses().then(n)},[o,s]),v.useEffect(()=>{m.courseId&&(R.getClasses(m.courseId).then(d),x(u=>({...u,classId:""})))},[m.courseId]);const g=async u=>{if(u.preventDefault(),!!o){c(!0);try{const b={...m,email:o.email,role:o.role};await R.updateUserProfile(o.uid,b),await t(),r("success","Perfil completado com sucesso! Bem-vindo."),s("/dashboard")}catch(b){const p=Ie(b);r("error",p)}finally{c(!1)}}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Complete seu perfil"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Precisamos de mais alguns detalhes antes de come√ßar."})]}),e.jsxs("form",{className:"mt-8 space-y-4",onSubmit:g,children:[e.jsx(ce,{id:"name",name:"name",type:"text",required:!0,label:"Nome Completo",placeholder:"Ex: Jo√£o da Silva",value:m.name,onChange:u=>x({...m,name:u.target.value}),autoComplete:"name"}),e.jsx(ce,{id:"rm",name:"rm",type:"text",required:!0,label:"Registro de Matr√≠cula (RM)",placeholder:"Ex: 12345",value:m.rm,onChange:u=>x({...m,rm:u.target.value}),inputMode:"numeric"}),e.jsxs(ce,{as:"select",label:"Curso",required:!0,value:m.courseId,onChange:u=>x({...m,courseId:u.target.value}),children:[e.jsx("option",{value:"",children:"Selecione o Curso"}),a.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),e.jsxs(ce,{as:"select",label:"Turma",required:!0,disabled:!m.courseId,value:m.classId,onChange:u=>x({...m,classId:u.target.value}),className:"disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Selecione a Turma"}),i.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),e.jsx("div",{className:"pt-4",children:e.jsx(de,{type:"submit",isLoading:l,className:"w-full h-12 text-base shadow-lg",children:"Concluir Cadastro"})})]})]})})},hs=(o,t={})=>{const[s,r]=v.useState(null),[a,n]=v.useState(null),i=t.minSwipeDistance||50;return{onTouchStart:m=>{n(null),r({x:m.targetTouches[0].clientX,y:m.targetTouches[0].clientY})},onTouchMove:m=>{n({x:m.targetTouches[0].clientX,y:m.targetTouches[0].clientY})},onTouchEnd:()=>{if(!s||!a)return;const m=s.x-a.x,x=s.y-a.y;if(Math.abs(m)>Math.abs(x)){if(Math.abs(m)<i)return;m>0?o.onSwipeLeft&&o.onSwipeLeft():o.onSwipeRight&&o.onSwipeRight()}else{if(Math.abs(x)<i)return;x>0?o.onSwipeUp&&o.onSwipeUp():o.onSwipeDown&&o.onSwipeDown()}}}},me=({isOpen:o,onClose:t,title:s,children:r})=>{const a=v.useRef(null),n=v.useRef(null),i=hs({onSwipeDown:t});return v.useEffect(()=>(o?(n.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{a.current&&a.current.focus()},50)):(document.body.style.overflow="unset",n.current&&n.current.focus()),()=>{document.body.style.overflow="unset"}),[o]),v.useEffect(()=>{const d=l=>{l.key==="Escape"&&t()};return o&&window.addEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}},[o,t]),o?e.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-80 transition-opacity animate-fade-in","aria-hidden":"true",onClick:t}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"‚Äã"}),e.jsxs("div",{ref:a,tabIndex:-1,className:`
              inline-block align-bottom bg-white dark:bg-darkcard 
              rounded-t-2xl sm:rounded-lg 
              text-left overflow-hidden shadow-xl 
              transform transition-all 
              w-full sm:my-8 sm:align-middle sm:max-w-lg 
              animate-slide-in outline-none
              relative
            `,...i,children:[e.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1",onClick:t,children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e.jsx("div",{className:"bg-white dark:bg-darkcard px-4 pt-2 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-2 text-center sm:mt-0 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:s}),e.jsx("div",{className:"mt-4 text-gray-600 dark:text-gray-300",children:r})]})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-4 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-100 dark:border-gray-700",children:e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm sm:py-2 transition-colors active:scale-[0.98]",onClick:t,children:"Fechar"})})]})]})}):null},fs=({currentPage:o,totalItems:t,itemsPerPage:s,onPageChange:r})=>{const a=Math.ceil(t/s);if(a<=1)return null;const n=()=>{const i=[];if(a<=7)for(let d=1;d<=a;d++)i.push(d);else o<=4?i.push(1,2,3,4,5,"...",a):o>=a-3?i.push(1,"...",a-4,a-3,a-2,a-1,a):i.push(1,"...",o-1,o,o+1,"...",a);return i};return e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>r(Math.max(1,o-1)),disabled:o===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),e.jsx("button",{onClick:()=>r(Math.min(a,o+1)),disabled:o===a,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Pr√≥ximo"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:(o-1)*s+1})," a ",e.jsx("span",{className:"font-medium",children:Math.min(o*s,t)})," de ",e.jsx("span",{className:"font-medium",children:t})," resultados"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>r(Math.max(1,o-1)),disabled:o===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"Anterior"}),e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),n().map((i,d)=>typeof i=="number"?e.jsx("button",{onClick:()=>r(i),"aria-current":o===i?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${o===i?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:i},d):e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},d)),e.jsxs("button",{onClick:()=>r(Math.min(a,o+1)),disabled:o===a,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"Pr√≥ximo"}),e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},mt=(o,t)=>{const[s,r]=v.useState(null),[a,n]=v.useState(!1),{addToast:i}=ye(),d=v.useCallback(()=>{r(null)},[]),l=v.useCallback(async(m,x)=>{if(o){d(),n(!0);try{await R.createEnrollment(o.uid,m.id,x),i("success",`Inscri√ß√£o confirmada em ${m.name}!`),setTimeout(()=>t(),500)}catch(g){const u=g.message||"";if(u.startsWith("CONFLICT|")){const[b,p,w,j]=u.split("|");r({name:p,time:`${w} - ${j}`}),i("warning","Conflito de hor√°rio detectado.")}else{const b=Ie(g);i("error",b)}}finally{n(!1)}}},[o,t,d,i]),c=v.useCallback(async m=>{if(o){n(!0);try{await R.cancelEnrollment(m),i("success","Inscri√ß√£o cancelada com sucesso."),setTimeout(()=>t(),500)}catch(x){i("error","Erro ao cancelar inscri√ß√£o."),console.error(x)}finally{n(!1)}}},[o,t,i]);return{handleEnroll:l,handleCancel:c,isProcessing:a,isEnrolling:a,conflictData:s,clearState:d}};function ps(o,t=300){const[s,r]=v.useState(o);return v.useEffect(()=>{const a=setTimeout(()=>{r(o)},t);return()=>{clearTimeout(a)}},[o,t]),s}const vs=o=>{const[t,s]=v.useState([]),[r,a]=v.useState([]),[n,i]=v.useState(!0),[d,l]=v.useState(""),[c,m]=v.useState(""),[x,g]=v.useState(!1),[u,b]=v.useState(1),p=9,w=ps(d,300),j=v.useCallback(async(S=!0)=>{if(o){S&&i(!0);try{const[T,C]=await Promise.all([R.getAvailableEventsForUser(o),R.getEnrollmentsForUser(o.uid)]);s(T),a(C)}catch(T){console.error(T)}finally{S&&i(!1)}}},[o]);v.useEffect(()=>{j()},[j]);const A=v.useMemo(()=>{const S=new Set;return t.forEach(T=>{T.parentId&&S.add(T.parentId)}),S},[t]),N=v.useMemo(()=>{const S=new Date().toISOString().split("T")[0];return t.filter(T=>{if(T.parentId)return!1;const C=T.name.toLowerCase().includes(w.toLowerCase())||T.description.toLowerCase().includes(w.toLowerCase()),M=t.filter(U=>U.parentId===T.id),F=[...T.sessions,...M.flatMap(U=>U.sessions)],D=c?F.some(U=>U.date===c):!0,z=x||F.some(U=>U.date>=S);return C&&D&&z})},[t,w,c,x]);v.useEffect(()=>{b(1)},[w,c,x]);const k=v.useMemo(()=>{const S=(u-1)*p;return N.slice(S,S+p)},[N,u]),E=(S,T)=>r.find(C=>C.eventId===S&&C.sessionId===T);return{events:t,filteredEvents:N,paginatedEvents:k,parentIds:A,loading:n,filters:{searchTerm:d,setSearchTerm:l,filterDate:c,setFilterDate:m,showPastEvents:x,setShowPastEvents:g},pagination:{currentPage:u,setCurrentPage:b,totalItems:N.length,itemsPerPage:p},helpers:{getEnrollment:E},refresh:()=>j(!1)}},ys=()=>e.jsx("li",{className:"px-6 py-4 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/5"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/5"})]}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})}),bs=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col h-full animate-pulse",children:[e.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-1/3"})]}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-4/5 mb-2"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})})]}),e.jsx("div",{className:"w-full h-12 bg-gray-100 border-t border-gray-200"})]}),Hs=()=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 inline-block"})})]}),Js=()=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]}),e.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-b border-gray-100 py-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),e.jsx("div",{className:"flex justify-end pt-1",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"})})]}),ut=({icon:o,title:t,description:s,action:r})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center bg-white dark:bg-darkcard rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"text-5xl text-gray-300 dark:text-gray-600 mb-4 transition-colors duration-200",children:o||"üì≠"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mb-6",children:s}),r&&e.jsx("button",{onClick:r.onClick,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:r.label})]}),Be=({isOpen:o,onClose:t,onConfirm:s,title:r,message:a,confirmText:n="Confirmar",cancelText:i="Cancelar",isProcessing:d=!1,variant:l="danger"})=>e.jsx(me,{isOpen:o,onClose:()=>!d&&t(),title:r,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-gray-700",children:a}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:t,disabled:d,className:"px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 text-gray-800 text-sm font-medium disabled:opacity-50",children:i}),e.jsx(de,{onClick:s,isLoading:d,variant:l,children:n})]})]})}),ws=({isOpen:o,onClose:t})=>{const[s,r]=v.useState(0),[a,n]=v.useState(!1);if(!o)return null;const i=[{title:"Bem-vindo ao EduEvent! üéì",description:"Sua nova central para descobrir, gerenciar e participar dos melhores eventos acad√™micos e escolares da sua institui√ß√£o.",color:"bg-indigo-500",image:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-indigo-600 dark:text-indigo-400",children:[e.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),e.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})},{title:"Explore Eventos Incr√≠veis üåç",description:"Navegue pelo Dashboard para encontrar eventos. Use os filtros inteligentes para buscar por data, nome ou ver apenas o que √© relevante para seu curso.",color:"bg-emerald-500",image:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-emerald-600 dark:text-emerald-400",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),e.jsx("path",{d:"M11 8v6M8 11h6"})]})},{title:"Inscri√ß√£o em 1 Clique üëÜ",description:"Gostou de um evento? Clique em 'Garantir Vaga' ou 'Inscrever'. O sistema verifica conflitos de hor√°rio automaticamente para voc√™.",color:"bg-amber-500",image:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-amber-600 dark:text-amber-400",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M9 15l2 2 4-4"})]})},{title:"Sua Agenda Organizada üìÖ",description:"Acesse 'Minhas Inscri√ß√µes' para ver todos os seus compromissos confirmados. Voc√™ pode cancelar inscri√ß√µes se mudar de ideia.",color:"bg-purple-500",image:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-purple-600 dark:text-purple-400",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),e.jsx("path",{d:"M8 14h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 18h.01"}),e.jsx("path",{d:"M12 18h.01"}),e.jsx("path",{d:"M16 18h.01"})]})},{title:"Tudo Pronto! üöÄ",description:"Voc√™ j√° sabe o b√°sico. Agora √© com voc√™! Explore, aprenda e aproveite ao m√°ximo os eventos da sua escola.",color:"bg-primary",image:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-primary dark:text-indigo-400",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]})}],d=()=>{s<i.length-1?(n(!0),setTimeout(()=>{r(m=>m+1),n(!1)},300)):t()},l=()=>{t()},c=i[s];return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity",onClick:l}),e.jsxs("div",{className:"relative bg-white dark:bg-darkcard w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col min-h-[500px] animate-fade-in border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:`h-2 w-full ${c.color} transition-colors duration-500`}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:`mb-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-full transition-all duration-300 transform ${a?"opacity-0 scale-90 translate-x-4":"opacity-100 scale-100 translate-x-0"}`,children:c.image}),e.jsxs("div",{className:`transition-all duration-300 ${a?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:c.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:c.description})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:i.map((m,x)=>e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${x===s?`w-6 ${c.color}`:"w-2 bg-gray-300 dark:bg-gray-600"}`},x))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 font-medium text-sm px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Pular Tutorial"}),e.jsxs("button",{onClick:d,className:`px-6 py-2.5 rounded-xl text-white font-bold shadow-lg shadow-indigo-500/20 transform transition active:scale-95 flex items-center ${c.color} hover:brightness-110`,children:[s===i.length-1?"Come√ßar Agora":"Pr√≥ximo",s<i.length-1&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})},js=re.memo(({event:o,hasChildren:t,onAction:s})=>{const r=!t&&o.sessions.length===1?o.sessions[0]:null,a=r?r.capacity:0,n=r?r.filled:0,i=a>0?n/a*100:0,d=a>0&&n>=a;let l="bg-indigo-500",c="P√∫blico";return o.visibility==="course"&&(l="bg-emerald-500",c="Meu Curso"),o.visibility==="class"&&(l="bg-purple-500",c="Minha Turma"),e.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col h-full relative animate-fade-in hover:-translate-y-1",children:[e.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${l} opacity-80`}),e.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${l} bg-opacity-10 dark:bg-opacity-20 text-gray-700 dark:text-gray-200`,children:c}),o.isTeamEvent&&e.jsxs("span",{className:"text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 flex items-center gap-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Equipe"]})]}),t?e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full font-medium border border-gray-200 dark:border-gray-600",children:"Evento Principal"}):d&&r?e.jsxs("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Esgotado"]}):e.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Aberto"]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:o.name}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:o.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("span",{className:"font-medium",children:o.location})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:"font-medium",children:t?"Ver programa√ß√£o completa":o.sessions.length>1?`${o.sessions.length} hor√°rios dispon√≠veis`:`${X(r==null?void 0:r.date)} ‚Ä¢ ${r==null?void 0:r.startTime}`})]})]}),!t&&r&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[e.jsx("span",{className:d?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:d?"Sem vagas":o.isTeamEvent?`${a-n} equipes restantes`:`${a-n} vagas restantes`}),e.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:[Math.round(i),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${d?"bg-red-500":i>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${i}%`}})})]})]}),e.jsxs("button",{onClick:()=>s(o),className:"w-full py-3 text-sm font-bold text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors border-t border-indigo-100 dark:border-gray-700 flex justify-center items-center",children:[t||o.isTeamEvent?"Ver Detalhes":"Ver Detalhes e Inscrever",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),Ns=({searchTerm:o,onSearchChange:t,filterDate:s,onDateChange:r,showPastEvents:a,onTogglePast:n})=>e.jsxs("div",{className:"bg-white dark:bg-darkcard p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col lg:flex-row gap-4 items-end transition-colors duration-200",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",placeholder:"Nome, descri√ß√£o, local...",className:"pl-10 w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:o,onChange:i=>t(i.target.value)})]})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Data Espec√≠fica"}),e.jsx("input",{type:"date",className:"w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:s,onChange:i=>r(i.target.value)})]}),e.jsx("div",{className:"w-full lg:w-auto pb-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[e.jsx("input",{type:"checkbox",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:a,onChange:i=>n(i.target.checked),style:{right:a?"0":"auto",left:a?"auto":"0",borderColor:a?"#4F46E5":"#E5E7EB"}}),e.jsx("label",{className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${a?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mostrar Passados"})]})})]}),ks=()=>{const{user:o}=ae(),t=ke(),{events:s,paginatedEvents:r,parentIds:a,loading:n,filters:i,pagination:d,helpers:l,refresh:c}=vs(o),[m,x]=v.useState(null),[g,u]=v.useState(null),[b,p]=v.useState(!1);v.useEffect(()=>{if(!localStorage.getItem("eduevent_tutorial_completed")){const M=setTimeout(()=>p(!0),1e3);return()=>clearTimeout(M)}},[]);const w=()=>{p(!1),localStorage.setItem("eduevent_tutorial_completed","true")},j=v.useCallback(()=>{c(),u(null)},[c]),{handleEnroll:A,handleCancel:N,isProcessing:k,conflictData:E,clearState:S}=mt(o,j);v.useEffect(()=>{if(m){const C=s.find(M=>M.id===m.id);C&&JSON.stringify(C)!==JSON.stringify(m)&&x(C)}},[s,m]);const T=v.useCallback(C=>{a.has(C.id)||C.isTeamEvent?t(`/event/${C.id}`):(S(),x(C))},[a,t,S]);return e.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[e.jsx(ws,{isOpen:b,onClose:w}),e.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Dashboard de Eventos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Explore e inscreva-se nas atividades dispon√≠veis para seu perfil."})]})}),e.jsx(Ns,{searchTerm:i.searchTerm,onSearchChange:i.setSearchTerm,filterDate:i.filterDate,onDateChange:i.setFilterDate,showPastEvents:i.showPastEvents,onTogglePast:i.setShowPastEvents}),n?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((C,M)=>e.jsx(bs,{},M))}):r.length===0?e.jsx(ut,{title:"Nenhum evento encontrado",description:s.length===0?"N√£o h√° eventos dispon√≠veis para o seu curso ou turma no momento.":i.showPastEvents?"Nenhum evento corresponde aos filtros de busca.":"N√£o h√° eventos futuros correspondentes. Tente ativar 'Mostrar Passados'.",action:!i.showPastEvents&&s.length>0?{label:"Ver hist√≥rico de eventos",onClick:()=>i.setShowPastEvents(!0)}:void 0}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(C=>e.jsx(js,{event:C,hasChildren:a.has(C.id),onAction:T},C.id))}),e.jsx(fs,{currentPage:d.currentPage,totalItems:d.totalItems,itemsPerPage:d.itemsPerPage,onPageChange:d.setCurrentPage})]}),e.jsx(me,{isOpen:!!m,onClose:()=>x(null),title:m?m.name:"",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:m==null?void 0:m.description})}),E&&e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md animate-slide-in",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Hor√°rio"}),e.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[e.jsx("p",{className:"mb-2",children:"Voc√™ j√° possui compromisso neste hor√°rio:"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[e.jsx("p",{className:"font-semibold",children:E.name}),e.jsx("p",{className:"text-xs",children:E.time})]})]})]})]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sess√£o"]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:m==null?void 0:m.sessions.map(C=>{const M=l.getEnrollment(m.id,C.id),F=!!M,D=C.filled>=C.capacity,z=C.filled/C.capacity*100,U=C.date<new Date().toISOString().split("T")[0];return e.jsx("div",{className:`relative border rounded-lg p-4 transition-all duration-200 
                                ${F?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":D||U?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-70":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:X(C.date)}),F&&e.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),U&&!F&&e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center",children:["üïí ",C.startTime," - ",C.endTime]})}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${D?"bg-red-500":z>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(z,100)}%`}})}),e.jsx("span",{className:`text-xs font-bold w-24 text-right ${D?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:D?"ESGOTADO":m.isTeamEvent?`${C.capacity-C.filled} equipes`:`${C.capacity-C.filled} vagas`})]})]}),e.jsx("div",{className:"flex items-center",children:F?e.jsx("button",{onClick:()=>M&&u(M.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):e.jsx(de,{onClick:()=>m&&A(m,C.id),isLoading:k,disabled:D||U,className:`w-full sm:w-auto ${D||U?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed hover:bg-gray-300":""}`,children:U?"Encerrado":D?"Lotado":"Garantir Vaga"})})]})},C.id)})})]})]})}),e.jsx(Be,{isOpen:!!g,onClose:()=>u(null),onConfirm:()=>g&&N(g),title:"Cancelar Inscri√ß√£o",message:"Tem certeza que deseja cancelar sua inscri√ß√£o? A vaga ser√° liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:k})]})},Es=()=>{const[o,t]=v.useState([]),[s,r]=v.useState([]),[a,n]=v.useState(!0);return v.useEffect(()=>{(async()=>{n(!0);const d=await R.getPublicEvents(),l=d.filter(m=>m.hasDedicatedPage).slice(0,3),c=d.filter(m=>!m.hasDedicatedPage).slice(0,8);t(l),r(c),n(!1)})()},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg flex flex-col font-sans transition-colors duration-300",children:[e.jsx("nav",{className:"bg-white/80 dark:bg-darkcard/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700 sticky top-0 z-50 transition-colors",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-20 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:"text-gray-900 dark:text-white font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(P,{to:"/login",className:"text-gray-500 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 font-medium px-3 py-2 transition-colors",children:"Acessar Painel"})})]})})}),e.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16",children:[o.length>0&&e.jsxs("section",{className:"animate-fade-in",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Eventos em Destaque"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Confira as p√°ginas exclusivas dos nossos principais eventos."})]}),e.jsx("div",{className:"grid gap-8 lg:grid-cols-2",children:o.map(i=>{var d,l,c,m,x;return e.jsxs(P,{to:`/special/${i.id}`,className:"group relative bg-white dark:bg-darkcard rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col min-h-[300px] border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent dark:from-primary/20 opacity-50"}),((c=(l=(d=i.dedicatedPageConfig)==null?void 0:d.gallery)==null?void 0:l[0])==null?void 0:c.url)&&e.jsxs("div",{className:"h-48 w-full overflow-hidden relative",children:[e.jsx("img",{src:i.dedicatedPageConfig.gallery[0].url,alt:i.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),e.jsxs("div",{className:"p-8 relative z-10 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 uppercase tracking-wide",children:"‚≠ê Especial"}),e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:X((m=i.sessions[0])==null?void 0:m.date)})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:i.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 line-clamp-2 mb-6",children:((x=i.dedicatedPageConfig)==null?void 0:x.presentationText)||i.description}),e.jsxs("div",{className:"mt-auto flex items-center font-bold text-primary dark:text-indigo-400 group-hover:translate-x-1 transition-transform",children:["Ver P√°gina Exclusiva ",e.jsx("span",{className:"ml-2",children:"‚Üí"})]})]})]},i.id)})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex items-end justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda P√∫blica"}),e.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Pr√≥ximas atividades abertas √† comunidade."})]}),e.jsx(P,{to:"/login",className:"hidden sm:block text-primary dark:text-indigo-400 hover:text-indigo-600 font-medium text-sm",children:"Ver todos no painel ‚Üí"})]}),a?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(i=>e.jsx("div",{className:"bg-white dark:bg-darkcard h-40 rounded-xl animate-pulse"},i))}):s.length===0?e.jsx("div",{className:"text-center py-16 bg-white dark:bg-darkcard rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-400",children:"Nenhum outro evento p√∫blico agendado no momento."})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(i=>{var m,x;const d=(m=i.sessions[0])!=null&&m.date?new Date(i.sessions[0].date):new Date,l=d.getDate(),c=d.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return e.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-md transition-shadow p-5 border border-gray-100 dark:border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg p-2 text-center min-w-[50px]",children:[e.jsx("span",{className:"block text-xs font-bold",children:c}),e.jsx("span",{className:"block text-lg font-extrabold leading-none",children:l})]}),e.jsx(P,{to:"/login",className:"bg-primary/10 text-primary hover:bg-primary hover:text-white dark:text-indigo-400 dark:hover:bg-indigo-600 dark:hover:text-white px-3 py-1 rounded-full text-xs font-bold transition-colors",children:"Inscrever"})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:i.name}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:i.description}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center",children:[e.jsxs("span",{className:"mr-2",children:["üìç ",i.location]}),e.jsxs("span",{children:["üïí ",(x=i.sessions[0])==null?void 0:x.startTime]})]})]},i.id)})})]})]}),e.jsx("footer",{className:"bg-white dark:bg-darkcard border-t border-gray-200 dark:border-gray-700 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"¬© 2024 EduEvent. Todos os direitos reservados."}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Contato"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Privacidade"}),e.jsx(P,{to:"/login",className:"text-gray-400 hover:text-primary",children:"√Årea do Aluno"})]})]})})]})},Ss=()=>{var b,p,w,j,A,N,k;const{id:o}=at(),[t,s]=v.useState(null),[r,a]=v.useState([]),[n,i]=v.useState(!0),[d,l]=v.useState("about");v.useEffect(()=>{(async()=>{if(o)try{const[S,T]=await Promise.all([R.getEventById(o),R.getEventsByParentId(o)]);s(S||null),a(T)}catch(S){console.error("Failed to load dedicated page data",S)}finally{i(!1)}})()},[o]);const c=v.useMemo(()=>{var F,D;if(!t)return[];const E=((F=t.dedicatedPageConfig)==null?void 0:F.schedule)||[],S=[];r.forEach(z=>{z.sessions.forEach(U=>{S.push({id:`sub_${z.id}_${U.id}`,time:U.startTime,title:z.name,description:`${z.description||""} ‚Ä¢ Local: ${z.location||"N√£o informado"}`,dateLabel:et(U.date)})})});const T=(D=t.sessions[0])!=null&&D.date?et(t.sessions[0].date):"";return[...E.map(z=>({...z,dateLabel:z.id.startsWith("sub_")?void 0:T})),...S].sort((z,U)=>z.dateLabel!==U.dateLabel?(z.dateLabel||"").localeCompare(U.dateLabel||""):z.time.localeCompare(U.time))},[t,r]),m=v.useMemo(()=>{const E={};return c.forEach(S=>{const T=S.dateLabel||"Data a definir";E[T]||(E[T]=[]),E[T].push(S)}),E},[c]);if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-gray-500",children:"Carregando evento..."});if(!t||!t.hasDedicatedPage)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-darkbg px-4 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:"P√°gina n√£o encontrada"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Este evento n√£o possui uma p√°gina dedicada ou n√£o existe."}),e.jsx(P,{to:"/",className:"text-primary hover:underline",children:"Voltar para Home"})]});const x=t.dedicatedPageConfig||{gallery:[]},g=x.themeColor||"#4F46E5",u={"--theme-color":g};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg text-gray-900 dark:text-gray-100 font-sans selection:bg-opacity-30 selection:bg-[var(--theme-color)]",style:u,children:[e.jsxs("header",{className:"relative bg-darkbg text-white overflow-hidden min-h-[55vh] flex flex-col justify-end pb-12",children:[((p=(b=x.gallery)==null?void 0:b[0])==null?void 0:p.url)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:x.gallery[0].url,alt:"Background",className:"w-full h-full object-cover opacity-40 blur-sm scale-105 transform origin-center animate-fade-in"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-darkbg via-darkbg/60 to-transparent"})]}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 w-full animate-slide-in",children:[e.jsxs(P,{to:"/",className:"inline-flex items-center mb-8 text-white/70 hover:text-white transition-colors text-sm font-medium group",children:[e.jsx("span",{className:"mr-2 group-hover:-translate-x-1 transition-transform",children:"‚Üê"})," Voltar para Eventos"]}),e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("span",{className:"inline-block py-1 px-3 rounded text-[10px] font-bold tracking-widest mb-4 uppercase text-white bg-[var(--theme-color)] shadow-lg shadow-[var(--theme-color)]/20",children:"Evento em Destaque"}),e.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-4 leading-tight text-white drop-shadow-sm",children:t.name}),e.jsx("p",{className:"text-lg md:text-xl text-white/80 font-light max-w-2xl leading-relaxed",children:t.description})]})})]})]}),e.jsx("div",{className:"sticky top-0 z-40 bg-white/90 dark:bg-darkcard/90 backdrop-blur-md shadow-sm border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("nav",{className:"flex space-x-1 h-full overflow-x-auto no-scrollbar",children:["about","schedule","gallery"].map(E=>e.jsxs("button",{onClick:()=>l(E),className:`relative px-5 inline-flex items-center h-full text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap
                                        ${d===E?"text-[var(--theme-color)]":"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[E==="about"&&"Vis√£o Geral",E==="schedule"&&"Cronograma",E==="gallery"&&"Galeria",d===E&&e.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--theme-color)] shadow-[0_0_10px_var(--theme-color)]"})]},E))}),e.jsx("div",{className:"hidden md:flex items-center pl-6 border-l border-gray-200 dark:border-gray-700",children:e.jsx(P,{to:"/login",className:"inline-flex items-center justify-center px-6 py-2 rounded-full font-bold text-white text-sm shadow-lg transform transition hover:-translate-y-0.5 active:translate-y-0 hover:shadow-xl",style:{backgroundColor:g},children:"Garantir Vaga"})})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in min-h-[40vh]",children:[d==="about"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Sobre o Evento"}),e.jsx("div",{className:"prose dark:prose-invert prose-lg max-w-none text-gray-600 dark:text-gray-300 leading-relaxed",children:e.jsx("p",{className:"whitespace-pre-line",children:x.presentationText||"Junte-se a n√≥s para uma experi√™ncia inesquec√≠vel. Este evento foi cuidadosamente planejado para oferecer o melhor conte√∫do e oportunidades de networking."})})]}),r.length>0&&e.jsxs("section",{className:"pt-8 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Destaques da Programa√ß√£o"}),e.jsx("button",{onClick:()=>l("schedule"),className:"text-sm font-bold text-[var(--theme-color)] hover:underline hidden sm:block",children:"Ver tudo ‚Üí"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(E=>e.jsxs("div",{className:"group relative bg-white dark:bg-darkcard rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-xl hover:border-transparent transition-all duration-300 flex flex-col justify-between overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--theme-color)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("span",{className:"inline-block px-2 py-1 rounded bg-gray-50 dark:bg-gray-800 text-[10px] font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Atividade"}),e.jsx("span",{className:"text-[var(--theme-color)] opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300",children:"‚Üó"})]}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 leading-tight group-hover:text-[var(--theme-color)] transition-colors",children:E.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 mb-4 leading-relaxed",children:E.description})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-50 dark:border-gray-800 flex items-center justify-between text-xs font-medium text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.sessions.length>0?E.sessions[0].startTime:"TBA"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),E.location]})]})]},E.id))})]})]}),e.jsx("div",{className:"lg:col-span-4 space-y-8",children:e.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-8 sticky top-24",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:"Informa√ß√µes do Evento"}),e.jsxs("ul",{className:"space-y-6",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Data Principal"}),e.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:X((w=t.sessions[0])==null?void 0:w.date)})]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:"üïí"}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Hor√°rio"}),e.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[(j=t.sessions[0])==null?void 0:j.startTime," √†s ",(A=t.sessions[0])==null?void 0:A.endTime]})]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:"üìç"}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Localiza√ß√£o"}),e.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:t.location})]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:"üë•"}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Capacidade"}),e.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[t.sessions.reduce((E,S)=>E+S.capacity,0)," vagas totais"]})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:e.jsx(P,{to:"/login",className:"w-full flex items-center justify-center px-4 py-3 rounded-xl font-bold text-white shadow-lg transition transform hover:scale-[1.02]",style:{backgroundColor:g},children:"Inscrever-se"})})]})})]}),d==="schedule"&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Cronograma Completo"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Acompanhe todos os hor√°rios e atividades."})]}),Object.keys(m).length===0?e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-500",children:"Programa√ß√£o detalhada em breve."})}):e.jsx("div",{className:"space-y-16",children:Object.entries(m).map(([E,S])=>{const T=S;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"sticky top-20 z-20 bg-gray-50/95 dark:bg-darkbg/95 backdrop-blur-sm py-4 mb-8 border-b border-gray-200 dark:border-gray-700 flex items-center",children:[e.jsxs("span",{className:"px-3 py-1 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm font-bold shadow-sm mr-3",children:[E.split(",")[0]," "]}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[E.split(",")[1]," "]})]}),e.jsx("div",{className:"relative border-l-2 border-gray-200 dark:border-gray-800 ml-4 md:ml-6 space-y-12 pb-4",children:T.map((C,M)=>e.jsxs("div",{className:"relative pl-8 md:pl-12 group",children:[e.jsx("div",{className:"absolute -left-[9px] top-1.5 h-[18px] w-[18px] rounded-full border-4 border-white dark:border-darkbg shadow-sm transition-transform group-hover:scale-125",style:{backgroundColor:g}}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2 md:gap-8 mb-2",children:[e.jsx("div",{className:"flex-shrink-0 w-20 pt-1",children:e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:C.time})}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-darkcard p-5 rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm group-hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 group-hover:text-[var(--theme-color)] transition-colors",children:C.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:C.description})]})]})]},M))})]},E)})})]}),d==="gallery"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Galeria de Fotos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Momentos marcantes."})]}),((N=x.gallery)==null?void 0:N.length)===0?e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-500",children:"Imagens indispon√≠veis no momento."})}):e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6",children:(k=x.gallery)==null?void 0:k.map((E,S)=>e.jsxs("div",{className:"break-inside-avoid group relative rounded-2xl overflow-hidden shadow-md cursor-zoom-in",children:[e.jsx("img",{src:E.url,alt:E.caption||`Imagem ${S+1}`,className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6",children:E.caption&&e.jsx("p",{className:"text-white font-medium transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:E.caption})})]},S))})]})]}),e.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50 animate-bounce-slow",children:e.jsx(P,{to:"/login",className:"flex items-center justify-center w-14 h-14 rounded-full text-white shadow-xl shadow-indigo-900/20 hover:scale-110 transition-transform",style:{backgroundColor:g},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]})},Cs=(o,t)=>{const{addToast:s}=ye(),[r,a]=v.useState([]),[n,i]=v.useState(null),[d,l]=v.useState(!1),[c,m]=v.useState({}),[x,g]=v.useState({}),u=v.useRef(new Set),b=v.useCallback(async N=>{if(o){l(!0);try{const[k,E]=await Promise.all([R.getTeamsForEvent(N),R.getEnrollmentsForUser(o.uid)]);a(k),t&&t();const T=[...new Set(k.map(M=>M.captainId))].filter(M=>!u.current.has(M));if(T.length>0){const M={};await Promise.all(T.map(async F=>{try{const D=await R.getUserProfile(F);D&&(M[F]=D,u.current.add(F))}catch{console.error("Error fetching captain",F)}})),Object.keys(M).length>0&&m(F=>({...F,...M}))}const C=E.find(M=>M.eventId===N&&M.status===J.CONFIRMED);if(C&&C.teamId){const M=k.find(F=>F.id===C.teamId);i(M||null)}else i(null)}catch(k){console.error(k)}finally{l(!1)}}},[o,t]);return v.useEffect(()=>{(async()=>{if(n&&n.members.length>0){const k={},E=n.members.filter(S=>!u.current.has(S));await Promise.all(E.map(async S=>{if(o&&o.uid===S){k[S]=o,u.current.add(S);return}try{const T=await R.getUserProfile(S);T&&(k[S]=T,u.current.add(S))}catch{console.error("Error fetching member",S)}})),Object.keys(k).length>0&&g(S=>({...S,...k}))}})()},[n,o]),{teams:r,myTeam:n,loading:d,captainProfiles:c,memberProfiles:x,loadTeams:b,createTeam:async(N,k)=>{if(!o)return null;l(!0);try{const E=await R.createTeam(N,k,o);return await b(N),E}catch(E){throw E}finally{l(!1)}},joinTeam:async N=>{if(o){l(!0);try{await R.joinTeam(N.id,o,N.code),await b(N.eventId)}catch(k){throw k}finally{l(!1)}}},leaveTeam:async()=>{if(!(!o||!n)){l(!0);try{const N=n.eventId;await R.leaveTeam(n.id,o.uid),await b(N)}catch(N){throw N}finally{l(!1)}}},kickMember:async N=>{if(n){l(!0);try{await R.kickMember(n.id,N),await b(n.eventId)}catch(k){throw k}finally{l(!1)}}}}},Is=(o,t)=>{switch(t.type){case"CLOSE":return{type:"NONE"};case"OPEN_ENROLL":return{type:"ENROLL",data:t.payload};case"OPEN_TEAM_SUCCESS":return{type:"TEAM_SUCCESS",data:t.payload};case"OPEN_TEAM_INPUT":return{type:"TEAM_INPUT",data:t.payload};case"OPEN_TEAM_CONFIRM":return{type:"TEAM_CONFIRM",data:t.payload};default:return o}},Ts=()=>{var Je,Qe,Ke;const{id:o}=at(),[t,s]=Et(),r=t.get("join_code"),{user:a}=ae(),n=ke(),{addToast:i}=ye(),[d,l]=v.useState(null),[c,m]=v.useState([]),[x,g]=v.useState([]),[u,b]=v.useState([]),[p,w]=v.useState(!0),[j,A]=v.useState(null),[N,k]=v.useReducer(Is,{type:"NONE"}),[E,S]=v.useState(""),[T,C]=v.useState("join"),M=v.useCallback(async(y=!0)=>{if(!(!o||!a)){y&&w(!0);try{const[I,_,W,Z]=await Promise.all([R.getEventById(o),R.getEventsByParentId(o),R.getEnrollmentsForUser(a.uid),R.getClasses()]);if(!I){n("/dashboard");return}l(I),m(_),g(W),b(Z)}catch(I){console.error(I)}finally{y&&w(!1)}}},[o,a,n]),F=v.useCallback(()=>{M(!1),A(null)},[M]),{handleEnroll:D,handleCancel:z,isProcessing:U,conflictData:ne,clearState:Te}=mt(a,F),{teams:be,myTeam:Y,loading:Ae,captainProfiles:xe,memberProfiles:Ve,loadTeams:Me,createTeam:gt,joinTeam:ht,leaveTeam:ft,kickMember:pt}=Cs(a,F);v.useEffect(()=>{M()},[M]),v.useEffect(()=>{if(N.type==="ENROLL"&&N.data){const I=[d,...c].filter(Boolean).find(_=>_.id===N.data.id);I&&JSON.stringify(I)!==JSON.stringify(N.data)&&k({type:"OPEN_ENROLL",payload:I})}},[d,c,N.type,N.data]),v.useEffect(()=>{if(r&&d&&!p){let y;d.isTeamEvent?y=d:y=c.find(I=>I.isTeamEvent),y&&N.type==="NONE"&&(k({type:"OPEN_ENROLL",payload:y}),C("join"),Me(y.id))}},[r,d,c,p,Me,N.type]),v.useEffect(()=>{if(r&&be.length>0&&N.type==="ENROLL"){const y=be.find(I=>I.code===r);y&&(x.some(_=>_.eventId===y.eventId&&_.teamId===y.id)||(k({type:"OPEN_TEAM_CONFIRM",payload:y}),s(_=>{const W=new URLSearchParams(_);return W.delete("join_code"),W},{replace:!0})))}},[r,be,N.type,x,s]);const Le=y=>{var I;return y?((I=u.find(_=>_.id===y))==null?void 0:I.name)||"Desconhecida":"N/A"},we=async y=>{try{await navigator.clipboard.writeText(y),i("success","C√≥digo copiado!")}catch{i("error","Erro ao copiar.")}},We=async y=>{const I=window.location.href.split("#")[0],W=`${I.endsWith("/")?I:`${I}/`}#/event/${o}?join_code=${y.code}`;if(navigator.share)try{await navigator.share({title:`Junte-se √† minha equipe: ${y.name}`,text:`Use o c√≥digo ${y.code} ou clique no link para entrar:`,url:W})}catch(Z){Z.name!=="AbortError"&&(await we(W),i("success","Link copiado!"))}else await we(W),i("success","Link copiado!")},vt=async y=>{const I=N.type==="ENROLL"?N.data:null;if(I)try{const _=await gt(I.id,y);_&&(k({type:"OPEN_TEAM_SUCCESS",payload:_}),i("success","Equipe criada com sucesso!"))}catch(_){i("error",_.message)}},yt=async()=>{const y=N.type==="TEAM_CONFIRM"?N.data:null;if(y)try{await ht(y),i("success","Voc√™ entrou na equipe!"),k({type:"CLOSE"})}catch(I){i("error",I.message)}},bt=async()=>{try{await ft(),i("success","Voc√™ saiu da equipe.")}catch(y){i("error",y.message)}},wt=async y=>{try{await pt(y),i("success","Membro removido.")}catch(I){i("error",I.message)}},jt=y=>{S(""),k({type:"OPEN_TEAM_INPUT",payload:y})},Nt=()=>{const y=N.type==="TEAM_INPUT"?N.data:null;if(y){if(E.toUpperCase()!==y.code){i("error","C√≥digo incorreto.");return}k({type:"OPEN_TEAM_CONFIRM",payload:y})}},Ge=y=>{Te(),k({type:"OPEN_ENROLL",payload:y}),y.isTeamEvent&&(C("join"),Me(y.id))},He=(y,I)=>x.find(_=>_.eventId===y&&_.sessionId===I),le=()=>k({type:"CLOSE"});if(p)return e.jsx("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400 font-medium",children:"Carregando detalhes do evento..."});if(!d)return e.jsx("div",{className:"p-12 text-center text-red-500 dark:text-red-400 font-bold",children:"Evento n√£o encontrado."});const Q=N.type==="ENROLL"?N.data:null,je=N.type==="TEAM_SUCCESS"?N.data:null,De=N.type==="TEAM_INPUT"?N.data:null,ge=N.type==="TEAM_CONFIRM"?N.data:null;return e.jsxs("div",{className:"space-y-8 pb-12",children:[e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-2",children:[e.jsx("li",{children:e.jsx(P,{to:"/dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-indigo-400 font-medium transition",children:"Eventos"})}),e.jsx("li",{children:e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"/"})}),e.jsx("li",{className:"text-gray-900 dark:text-white font-semibold","aria-current":"page",children:d.name})]})}),e.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),e.jsx("div",{className:"p-8 md:p-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-xs font-bold uppercase tracking-wide border border-indigo-100 dark:border-indigo-900/50",children:"Evento Principal"}),d.isTeamEvent&&e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-xs font-bold uppercase tracking-wide border border-purple-100 dark:border-purple-900/50",children:"üèÜ Evento por Equipe"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight",children:d.name}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-4xl",children:d.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 dark:text-gray-400 text-sm font-medium",children:[e.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[e.jsx("span",{className:"mr-2 text-xl",children:"üìç"})," ",d.location]}),e.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[e.jsx("span",{className:"mr-2 text-xl",children:"üìÖ"})," ",d.sessions.length," Sess√µes Principais"]})]})]}),d.sessions.length>0&&e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("button",{onClick:()=>Ge(d),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programa√ß√£o",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7 7"})})]})})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Atividades & Sub-eventos"}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"})]}),c.length===0?e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"text-4xl mb-3 opacity-30",children:"üìÇ"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Nenhuma atividade espec√≠fica cadastrada para este evento ainda."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(y=>{const I=y.sessions.length===1?y.sessions[0]:null,_=I?I.capacity:0,W=I?I.filled:0,Z=_>0?W/_*100:0,Re=_>0&&W>=_,Ye=y.sessions.some(kt=>He(y.id,kt.id));return e.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 dark:bg-gray-700 group-hover:bg-primary transition-colors"}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:y.name}),y.isTeamEvent&&e.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full font-bold",children:"EQUIPE"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-1",children:y.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto pt-4 border-t border-gray-50 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:"üìç"}),e.jsx("span",{className:"font-medium",children:y.location})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:"üìÖ"}),e.jsx("span",{className:"font-medium",children:y.sessions.length>1?`${y.sessions.length} op√ß√µes de hor√°rio`:`${X(I==null?void 0:I.date)} ‚Ä¢ ${I==null?void 0:I.startTime}`})]})]}),I&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:e.jsx("span",{className:Re?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:Re?"LOTADO":y.isTeamEvent?`${_-W} equipes restantes`:`${_-W} vagas`})}),e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:`h-full rounded-full ${Re?"bg-red-500":"bg-emerald-500"}`,style:{width:`${Z}%`}})})]})]}),e.jsx("button",{onClick:()=>Ge(y),className:`w-full py-3 font-bold text-sm transition-colors border-t border-gray-100 dark:border-gray-700 ${Ye?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"bg-gray-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white text-primary dark:text-indigo-300"}`,children:Ye?"Gerenciar Inscri√ß√£o":"Inscrever-se Agora"})]},y.id)})}),e.jsx(me,{isOpen:N.type==="ENROLL",onClose:le,title:Q?Q.name:"",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:Q==null?void 0:Q.description})}),ne&&e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Hor√°rio"}),e.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[e.jsx("p",{className:"mb-2",children:"Voc√™ j√° possui compromisso neste hor√°rio:"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[e.jsx("p",{className:"font-semibold",children:ne.name}),e.jsx("p",{className:"text-xs",children:ne.time})]})]})]})]})}),Q!=null&&Q.isTeamEvent?e.jsx("div",{className:"animate-fade-in",children:Y?e.jsxs("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-6 text-white relative",children:[e.jsx("div",{className:"absolute top-4 right-4 bg-white/20 backdrop-blur rounded-full px-3 py-1 text-xs font-bold uppercase tracking-wider",children:"Minha Equipe"}),e.jsx("h3",{className:"text-2xl md:text-3xl font-extrabold mb-1 pr-24 md:pr-0",children:Y.name}),e.jsx("div",{className:"flex items-center gap-2 opacity-90 text-sm",children:e.jsxs("span",{children:["Capit√£o: ",Y.captainId===(a==null?void 0:a.uid)?"Voc√™":((Je=xe[Y.captainId])==null?void 0:Je.name)||"Desconhecido"]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"C√≥digo de Acesso"}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-800 px-3 py-1 rounded border border-gray-200 dark:border-gray-700",children:[e.jsx("code",{className:"text-2xl font-mono font-bold text-primary dark:text-indigo-400 tracking-wide select-all",children:Y.code}),e.jsx("button",{onClick:()=>we(Y.code),className:"p-1.5 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-300 transition-colors",title:"Copiar c√≥digo",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>We(Y),className:"p-1.5 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-300 transition-colors",title:"Compartilhar Link",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]}),e.jsxs("div",{className:"w-full md:w-auto text-left md:text-right",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Membros"}),e.jsx("span",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:Y.members.length})]})]}),e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm",children:"Integrantes"}),e.jsx("ul",{className:"space-y-2 mb-6",children:Y.members.map(y=>{var I,_,W,Z;return e.jsxs("li",{className:"flex justify-between items-center text-sm p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-300 font-bold text-xs",children:(((I=Ve[y])==null?void 0:I.name)||((_=xe[y])==null?void 0:_.name)||"U").charAt(0)}),e.jsxs("span",{className:`text-gray-700 dark:text-gray-300 ${y===(a==null?void 0:a.uid)?"font-bold":""}`,children:[y===(a==null?void 0:a.uid)?"Voc√™":((W=Ve[y])==null?void 0:W.name)||((Z=xe[y])==null?void 0:Z.name)||"Usu√°rio...",y===Y.captainId&&" üëë"]})]}),Y.captainId===(a==null?void 0:a.uid)&&y!==(a==null?void 0:a.uid)&&e.jsx("button",{onClick:()=>wt(y),className:"text-red-500 hover:text-red-700 text-xs font-bold px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20",children:"Remover"})]},y)})}),e.jsx(de,{onClick:bt,isLoading:Ae,variant:"danger",className:"w-full",children:Y.captainId===(a==null?void 0:a.uid)?"Desfazer Equipe e Sair":"Sair da Equipe"})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-gray-800 rounded-lg mb-6",children:[e.jsx("button",{onClick:()=>C("join"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${T==="join"?"bg-white dark:bg-darkcard text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Entrar em Equipe"}),e.jsx("button",{onClick:()=>C("create"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${T==="create"?"bg-white dark:bg-darkcard text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Criar Nova Equipe"})]}),T==="join"&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[300px] overflow-y-auto pr-1",children:be.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üõ°Ô∏è"}),e.jsxs("p",{children:["Nenhuma equipe criada ainda.",e.jsx("br",{}),"Seja o primeiro a criar!"]})]}):be.map(y=>{var I;return e.jsxs("div",{className:"group bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center hover:shadow-md hover:border-primary/30 transition-all cursor-default gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center text-lg flex-shrink-0",children:"üõ°Ô∏è"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white block truncate",children:y.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex-wrap",children:[e.jsxs("span",{children:["Capit√£o: ",((I=xe[y.captainId])==null?void 0:I.name)||"..."]}),e.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full hidden sm:block"}),e.jsxs("span",{className:"flex items-center text-primary dark:text-indigo-400 font-bold bg-primary/10 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded",children:[y.members.length," membros"]})]})]})]}),e.jsx("button",{onClick:()=>jt(y),className:"w-full sm:w-auto px-4 py-2 bg-gray-50 dark:bg-gray-800 text-primary dark:text-indigo-400 font-bold text-sm rounded-lg hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors",children:"Entrar"})]},y.id)})})}),T==="create"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Escolha um hor√°rio dispon√≠vel para registrar sua equipe:"}),e.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-1",children:Q.sessions.map(y=>{const I=y.filled>=y.capacity;return e.jsxs("div",{className:`p-4 border rounded-xl flex flex-col sm:flex-row justify-between items-start sm:items-center transition-all ${I?"bg-gray-50 border-gray-200 opacity-60":"bg-white dark:bg-darkcard border-gray-200 dark:border-gray-700 hover:border-primary/50 hover:shadow-sm"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{children:X(y.date)}),e.jsx("span",{className:"text-xs font-normal text-gray-400",children:"|"}),e.jsxs("span",{children:[y.startTime," - ",y.endTime]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:I?"Esgotado":`${y.capacity-y.filled} slots dispon√≠veis`})]}),e.jsx(de,{onClick:()=>vt(y.id),isLoading:Ae,disabled:I,className:`w-full sm:w-auto mt-3 sm:mt-0 ${I?"bg-gray-300 text-gray-500":"bg-primary"}`,variant:I?"outline":"primary",children:I?"Lotado":"Criar Aqui"})]},y.id)})})]})]})}):e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sess√£o"]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:Q==null?void 0:Q.sessions.map(y=>{const I=He(Q.id,y.id),_=!!I,W=y.filled>=y.capacity,Z=y.filled/y.capacity*100;return e.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${_?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":W?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-90":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:X(y.date)}),_&&e.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center",children:["üïí ",y.startTime," - ",y.endTime]})}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${W?"bg-red-500":Z>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(Z,100)}%`}})}),e.jsx("span",{className:`text-xs font-bold w-24 text-right ${W?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:W?"ESGOTADO":Q.isTeamEvent?`${y.capacity-y.filled} equipes`:`${y.capacity-y.filled} vagas`})]})]}),e.jsx("div",{className:"flex items-center",children:_?e.jsx("button",{onClick:()=>I&&A(I.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 dark:border-red-900 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):e.jsx(de,{onClick:()=>Q&&D(Q,y.id),isLoading:U,disabled:W,className:`w-full sm:w-auto ${W?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":""}`,children:W?"Lotado":"Inscrever"})})]})},y.id)})})]})]})}),e.jsx(me,{isOpen:N.type==="TEAM_SUCCESS",onClose:le,title:"Dados da Equipe Criada",children:je&&a&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-900/50 text-center",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"üéâ"}),e.jsx("h3",{className:"text-lg font-bold text-green-800 dark:text-green-300",children:"Equipe criada com sucesso!"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Compartilhe o c√≥digo abaixo com seus colegas."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"Nome da Equipe"}),e.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white font-medium",children:je.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"Capit√£o (Voc√™)"}),e.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white font-medium",children:a.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"RM"}),e.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white",children:a.rm||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"Turma"}),e.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white",children:Le(a.classId)})]})]}),e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded border border-indigo-200 dark:border-indigo-800 text-center",children:[e.jsx("label",{className:"block text-xs font-bold text-indigo-500 uppercase mb-1",children:"C√≥digo de Acesso"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("code",{className:"text-3xl font-mono font-bold text-indigo-700 dark:text-indigo-300 tracking-wider select-all",children:je.code}),e.jsx("button",{onClick:()=>we(je.code),className:"p-1.5 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-200 transition-colors",title:"Copiar c√≥digo",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("div",{className:"h-6 w-px bg-indigo-200 dark:bg-indigo-700 mx-1"}),e.jsx("button",{onClick:()=>We(je),className:"p-1.5 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-200 transition-colors",title:"Compartilhar Link",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]})]}),e.jsx("button",{onClick:le,className:"w-full bg-primary hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-md transition-colors",children:"Confirmar"})]})}),e.jsx(me,{isOpen:N.type==="TEAM_INPUT",onClose:le,title:"C√≥digo de Acesso",children:e.jsxs("div",{className:"space-y-6 pt-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Digite o c√≥digo fornecido pelo capit√£o da equipe ",e.jsx("strong",{children:De==null?void 0:De.name}),"."]}),e.jsx(ce,{label:"C√≥digo da Equipe",placeholder:"Ex: A1B2",value:E,onChange:y=>S(y.target.value.toUpperCase()),className:"text-center font-mono text-xl tracking-widest uppercase",autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:le,className:"px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Cancelar"}),e.jsx("button",{onClick:Nt,className:"px-6 py-2 bg-primary text-white rounded font-bold hover:bg-indigo-700",children:"Verificar"})]})]})}),e.jsx(me,{isOpen:N.type==="TEAM_CONFIRM",onClose:le,title:"Confirmar Entrada",children:ge&&a&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-900/30",children:[e.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2 border-b border-blue-200 dark:border-blue-800 pb-2",children:"Dados da Equipe"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Nome:"}),e.jsx("span",{className:"font-medium dark:text-gray-200",children:ge.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Capit√£o:"}),e.jsx("span",{className:"font-medium dark:text-gray-200",children:((Qe=xe[ge.captainId])==null?void 0:Qe.name)||"..."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Turma do Capit√£o:"}),e.jsx("span",{className:"font-medium dark:text-gray-200",children:Le((Ke=xe[ge.captainId])==null?void 0:Ke.classId)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-700 dark:text-gray-300 mb-2 border-b border-gray-200 dark:border-gray-600 pb-2",children:"Seus Dados (Entrando como Membro)"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Nome:"}),e.jsx("span",{className:"font-medium dark:text-white",children:a.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"RM:"}),e.jsx("span",{className:"font-medium dark:text-white",children:a.rm})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Turma:"}),e.jsx("span",{className:"font-medium dark:text-white",children:Le(a.classId)})]})]})]}),e.jsxs("div",{className:"text-center py-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"C√≥digo Verificado"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"font-mono font-bold text-xl text-green-600 dark:text-green-400",children:ge.code}),e.jsx("button",{onClick:()=>we(ge.code),className:"p-1 text-gray-500 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-400 transition-colors",title:"Copiar c√≥digo",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:le,className:"flex-1 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancelar"}),e.jsx(de,{onClick:yt,isLoading:Ae,className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow",children:"Confirmar Entrada"})]})]})}),e.jsx(Be,{isOpen:!!j,onClose:()=>A(null),onConfirm:()=>j&&z(j),title:"Cancelar Inscri√ß√£o",message:"Tem certeza que deseja cancelar sua inscri√ß√£o? A vaga ser√° liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:U})]})},As=async(o,t,s,r,a)=>{const n=a||await R.getCertificateConfig(),i=new At({orientation:"landscape",unit:"mm",format:"a4"}),d=i.internal.pageSize.getWidth(),l=i.internal.pageSize.getHeight();if(n.backgroundType==="image"&&n.backgroundImage)try{i.addImage(n.backgroundImage,"PNG",0,0,d,l)}catch(u){console.error("Failed to load background image",u),i.setFillColor(n.backgroundColor||"#FFFFFF"),i.rect(0,0,d,l,"F")}else i.setFillColor(n.backgroundColor||"#FFFFFF"),i.rect(0,0,d,l,"F");n.showBorder!==!1&&(i.setDrawColor(0,0,0),i.setLineWidth(1),i.rect(10,10,d-10*2,l-10*2),i.setLineWidth(.5),i.rect(12,12,d-10*2-4,l-10*2-4));const c=u=>{let b=u;const p={"{student_name}":o.name||"Aluno","{student_email}":o.email||"","{student_rm}":o.rm||"","{event_name}":t.name,"{date}":X(s.date),"{start_time}":s.startTime,"{end_time}":s.endTime,"{enrollment_id}":r,"{location}":t.location};if(b.includes("{hours}")){const w=s.startTime.split(":").map(Number),j=s.endTime.split(":").map(Number);let A=0;if(!isNaN(w[0])&&!isNaN(j[0])){const N=w[0]*60+(w[1]||0);A=(j[0]*60+(j[1]||0)-N)/60}A=Math.max(1,Math.round(A*10)/10),p["{hours}"]=A.toString()}return Object.keys(p).forEach(w=>{b=b.replace(new RegExp(w,"g"),p[w])}),b};n.elements.forEach(u=>{if(u.type==="text"||u.type==="variable"){const b=u.fontSize||12;i.setFontSize(b),i.setTextColor(u.fontColor||"#000000"),i.setFont(u.fontFamily||"helvetica",u.fontWeight||"normal");const p=c(u.content),w=u.align||"left";i.text(p,u.x,u.y,{align:w,maxWidth:d-20})}else if(u.type==="image"&&u.content&&u.width&&u.height)try{i.addImage(u.content,"PNG",u.x,u.y,u.width,u.height)}catch{console.error("Failed to render element image",u.label)}});const m=(o.name||"aluno").replace(/[^a-z0-9]/gi,"_").toLowerCase(),x=t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase().substring(0,20),g=`certificado_${m}_${x}.pdf`;i.save(g)},Ms=()=>{const{user:o}=ae(),{addToast:t}=ye(),[s,r]=v.useState([]),[a,n]=v.useState(null),[i,d]=v.useState(!0),[l,c]=v.useState(!1),[m,x]=v.useState(null),[g,u]=v.useState(null),b=async()=>{if(o){d(!0);try{const k=await R.getEnrollmentsForUser(o.uid);if(k.length===0){r([]),d(!1);return}const E=[...new Set(k.map(D=>D.eventId))],S=await R.getEventsByIds(E),T=new Map(S.map(D=>[D.id,D])),C=S.filter(D=>D.isTeamEvent),M=new Map;await Promise.all(C.map(async D=>{try{(await R.getTeamsForEvent(D.id)).forEach(U=>M.set(U.id,U))}catch(z){console.error(`Error loading teams for event ${D.id}`,z)}}));const F=k.map(D=>{const z=T.get(D.eventId);if(!z)return null;const U=z.sessions.find(Te=>Te.id===D.sessionId);if(!U)return null;const ne=D.teamId?M.get(D.teamId):void 0;return{enrollment:D,event:z,session:U,team:ne}}).filter(D=>D!==null);r(F)}catch(k){console.error("Failed to load enrollments data:",k),t("error","Falha ao carregar inscri√ß√µes."),r([])}finally{d(!1)}}};v.useEffect(()=>{b()},[o]);const p=async()=>{if(a){c(!0);try{await R.cancelEnrollment(a),t("success","Inscri√ß√£o cancelada com sucesso.")}catch(k){console.error(k),t("error","Erro ao cancelar inscri√ß√£o.")}finally{n(null),c(!1),b()}}},w=async k=>{try{await navigator.clipboard.writeText(k),t("success","C√≥digo copiado!")}catch{}},j=(k,E,S)=>{o&&u({enrollmentId:k.id,event:E,sessionDate:S.date,sessionTime:`${S.startTime} - ${S.endTime}`,user:o,attended:k.attended})},A=async(k,E,S)=>{if(o){x(k.id);try{await new Promise(T=>setTimeout(T,50)),await As(o,E,S,k.id),t("success","Certificado gerado com sucesso!")}catch(T){console.error(T),t("error","Erro ao gerar certificado.")}finally{x(null)}}},N=new Date().toISOString().split("T")[0];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Minha Agenda"}),i?e.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Array.from({length:3}).map((k,E)=>e.jsx(ys,{},E))})}):s.length===0?e.jsx(ut,{title:"Agenda Vazia",description:"Voc√™ ainda n√£o se inscreveu em nenhum evento."}):e.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(({enrollment:k,event:E,session:S,team:T})=>{const C=S.date<N,M=C&&k.attended;return e.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 gap-4 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.isTeamEvent&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 uppercase tracking-wide border border-indigo-200 dark:border-indigo-800",children:"üõ°Ô∏è Equipe"}),k.attended&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 uppercase tracking-wide border border-green-200 dark:border-green-800",children:"‚úÖ Presen√ßa"}),e.jsx("h3",{className:"text-lg font-medium text-primary dark:text-indigo-400",children:E.name})]}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("span",{children:["üìÖ ",X(S.date)]}),e.jsxs("span",{children:["‚è∞ ",S.startTime," - ",S.endTime]}),e.jsxs("span",{children:["üìç ",E.location]})]}),T&&e.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/10 rounded-lg border border-indigo-100 dark:border-indigo-800/30 w-full sm:w-fit",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-lg flex-shrink-0",children:"üõ°Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Sua Equipe"}),e.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:T.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pl-0 sm:pl-3 border-t sm:border-t-0 sm:border-l border-indigo-200 dark:border-indigo-700 pt-2 sm:pt-0 w-full sm:w-auto",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mr-2 sm:mr-0",children:"C√≥digo:"}),e.jsxs("button",{onClick:()=>w(T.code),className:"text-xs font-mono font-bold text-indigo-600 dark:text-indigo-300 hover:underline flex items-center gap-1",title:"Copiar C√≥digo",children:[T.code," üìã"]})]})]}),C&&!M&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 mt-2",children:"Evento Finalizado (Sem Presen√ßa)"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 flex-shrink-0",children:[M?e.jsx("button",{onClick:()=>A(k,E,S),disabled:m===k.id,className:"w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-bold bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/40 dark:text-amber-300 dark:border-amber-800 hover:bg-amber-200 dark:hover:bg-amber-900/60 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-wait",children:m===k.id?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Gerando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-base",children:"üèÖ"})," Baixar Certificado"]})}):e.jsxs("button",{onClick:()=>j(k,E,S),className:"w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-medium bg-white dark:bg-darkcard border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4h2v-4zM6 8v4M6 16v4m12-16H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2z"})}),"Ver Ticket"]}),!M&&e.jsx("button",{onClick:()=>n(k.id),disabled:C||k.attended,className:`w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-medium
                                                ${C||k.attended?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 cursor-not-allowed hidden sm:block":"text-red-600 dark:text-red-400 hover:text-white hover:bg-red-600 dark:hover:bg-red-500 border-red-200 dark:border-red-900/30"}`,children:C?"Conclu√≠do":k.attended?"Presen√ßa Confirmada":E.isTeamEvent?"Sair da Equipe":"Cancelar Inscri√ß√£o"})]})]},k.id)})})}),e.jsx(Be,{isOpen:!!a,onClose:()=>n(null),onConfirm:p,title:"Cancelar Inscri√ß√£o",message:"Tem certeza que deseja cancelar sua inscri√ß√£o neste evento? Se for um evento de equipe, voc√™ sair√° do grupo e a vaga poder√° ser perdida.",confirmText:"Sim, Cancelar",cancelText:"Manter Inscri√ß√£o",isProcessing:l}),e.jsx(me,{isOpen:!!g,onClose:()=>u(null),title:"Seu Ticket de Entrada",children:g&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 space-y-6",children:[e.jsx("div",{className:`p-4 bg-white rounded-xl shadow-lg border-2 ${g.attended?"border-green-500":"border-gray-900"}`,children:e.jsx(St,{value:g.enrollmentId,size:200})}),e.jsxs("div",{className:"text-center space-y-1",children:[g.attended?e.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-bold uppercase mb-2",children:"‚úÖ Check-in Realizado"}):e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Apresente este c√≥digo na entrada"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:g.event.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[X(g.sessionDate)," ‚Ä¢ ",g.sessionTime]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.event.location})]}),e.jsxs("div",{className:"w-full border-t border-gray-200 dark:border-gray-700 pt-4 text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.user.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["RM: ",g.user.rm||"-"]}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2 font-mono",children:g.enrollmentId})]})]})})]})},Ls=re.lazy(()=>ue(()=>import("./AdminEvents-vfjpbfJH.js"),__vite__mapDeps([0,1,2,3,4])).then(o=>({default:o.AdminEvents}))),Ds=re.lazy(()=>ue(()=>import("./AdminUsers-BuyKUAw0.js"),__vite__mapDeps([5,1,2,3,4])).then(o=>({default:o.AdminUsers}))),Rs=re.lazy(()=>ue(()=>import("./AdminCourses-BoMKXyVV.js"),__vite__mapDeps([6,1,2,3,4])).then(o=>({default:o.AdminCourses}))),_s=re.lazy(()=>ue(()=>import("./AdminEventEnrollments-DhseCByY.js"),__vite__mapDeps([7,1,2,3,8,4])).then(o=>({default:o.AdminEventEnrollments}))),Os=re.lazy(()=>ue(()=>import("./AdminScanner-DLRM8D8l.js"),__vite__mapDeps([9,1,2,3,4])).then(o=>({default:o.AdminScanner}))),Fs=re.lazy(()=>ue(()=>import("./AdminCertificateConfig-CVgO3KyD.js"),__vite__mapDeps([10,1,2,3,4])).then(o=>({default:o.AdminCertificateConfig}))),Us=re.lazy(()=>ue(()=>import("./DevTools-gu1mwwNI.js"),__vite__mapDeps([11,1,2,3,4])).then(o=>({default:o.DevTools}))),$s=()=>e.jsx("div",{className:"h-full w-full flex items-center justify-center p-10",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),ee=({children:o,roleRequired:t})=>{const{user:s,loading:r}=ae(),a=ze();return r?e.jsx("div",{className:"h-screen flex items-center justify-center text-primary font-medium dark:bg-darkbg dark:text-gray-200",children:"Carregando EduEvent..."}):s?!s.isOnboarded&&window.location.hash!=="#/complete-profile"?e.jsx(Se,{to:"/complete-profile"}):t&&s.role!==t?e.jsx(Se,{to:"/dashboard"}):e.jsx(e.Fragment,{children:o}):e.jsx(Se,{to:"/login",state:{from:a},replace:!0})},Ps=()=>{const{user:o}=ae();return e.jsx(v.Suspense,{fallback:e.jsx($s,{}),children:e.jsxs(It,{children:[e.jsx(K,{path:"/",element:o?e.jsx(Se,{to:"/dashboard"}):e.jsx(Es,{})}),e.jsx(K,{path:"/special/:id",element:e.jsx(Ss,{})}),e.jsx(K,{path:"/login",element:e.jsx(xs,{})}),e.jsx(K,{path:"/complete-profile",element:e.jsx(ee,{children:e.jsx(gs,{})})}),e.jsx(K,{path:"/dashboard",element:e.jsx(ee,{children:e.jsx(te,{children:e.jsx(ks,{})})})}),e.jsx(K,{path:"/event/:id",element:e.jsx(ee,{children:e.jsx(te,{children:e.jsx(Ts,{})})})}),e.jsx(K,{path:"/my-enrollments",element:e.jsx(ee,{children:e.jsx(te,{children:e.jsx(Ms,{})})})}),e.jsx(K,{path:"/admin/events",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(Ls,{})})})}),e.jsx(K,{path:"/admin/events/:id/enrollments",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(_s,{})})})}),e.jsx(K,{path:"/admin/courses",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(Rs,{})})})}),e.jsx(K,{path:"/admin/users",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(Ds,{})})})}),e.jsx(K,{path:"/admin/scanner",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(Os,{})})})}),e.jsx(K,{path:"/admin/certificate",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(Fs,{})})})}),e.jsx(K,{path:"/admin/dev",element:e.jsx(ee,{roleRequired:H.ADMIN,children:e.jsx(te,{children:e.jsx(Us,{})})})})]})})};function zs(){return e.jsx(ds,{children:e.jsx(cs,{children:e.jsx(ls,{children:e.jsx(Ct,{children:e.jsx(Ps,{})})})})})}const xt=document.getElementById("root");if(!xt)throw new Error("Could not find root element to mount to");const qs=Tt.createRoot(xt);qs.render(e.jsx(re.StrictMode,{children:e.jsx(zs,{})}));export{Be as C,ut as E,de as L,me as M,ys as S,H as U,ps as a,ae as b,Hs as c,Js as d,As as e,X as f,Ie as g,R as s,ye as u};
