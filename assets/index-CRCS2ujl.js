(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function l_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Bm={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function AT(){if(lx)return bc;lx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:c}}return bc.Fragment=e,bc.jsx=n,bc.jsxs=n,bc}var cx;function CT(){return cx||(cx=1,Bm.exports=AT()),Bm.exports}var u=CT(),qm={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function kT(){if(ux)return Le;ux=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function k(I){return I===null||typeof I!="object"?null:(I=T&&I[T]||I["@@iterator"],typeof I=="function"?I:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,z={};function B(I,W,ce){this.props=I,this.context=W,this.refs=z,this.updater=ce||V}B.prototype.isReactComponent={},B.prototype.setState=function(I,W){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,W,"setState")},B.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function q(){}q.prototype=B.prototype;function Y(I,W,ce){this.props=I,this.context=W,this.refs=z,this.updater=ce||V}var de=Y.prototype=new q;de.constructor=Y,U(de,B.prototype),de.isPureReactComponent=!0;var ie=Array.isArray;function ge(){}var j={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function A(I,W,ce){var fe=ce.ref;return{$$typeof:s,type:I,key:W,ref:fe!==void 0?fe:null,props:ce}}function M(I,W){return A(I.type,W,I.props)}function D(I){return typeof I=="object"&&I!==null&&I.$$typeof===s}function L(I){var W={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ce){return W[ce]})}var R=/\/+/g;function ze(I,W){return typeof I=="object"&&I!==null&&I.key!=null?L(""+I.key):W.toString(36)}function pe(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ge,ge):(I.status="pending",I.then(function(W){I.status==="pending"&&(I.status="fulfilled",I.value=W)},function(W){I.status==="pending"&&(I.status="rejected",I.reason=W)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function X(I,W,ce,fe,Te){var Ae=typeof I;(Ae==="undefined"||Ae==="boolean")&&(I=null);var Be=!1;if(I===null)Be=!0;else switch(Ae){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(I.$$typeof){case s:case e:Be=!0;break;case x:return Be=I._init,X(Be(I._payload),W,ce,fe,Te)}}if(Be)return Te=Te(I),Be=fe===""?"."+ze(I,0):fe,ie(Te)?(ce="",Be!=null&&(ce=Be.replace(R,"$&/")+"/"),X(Te,W,ce,"",function(St){return St})):Te!=null&&(D(Te)&&(Te=M(Te,ce+(Te.key==null||I&&I.key===Te.key?"":(""+Te.key).replace(R,"$&/")+"/")+Be)),W.push(Te)),1;Be=0;var tt=fe===""?".":fe+":";if(ie(I))for(var Re=0;Re<I.length;Re++)fe=I[Re],Ae=tt+ze(fe,Re),Be+=X(fe,W,ce,Ae,Te);else if(Re=k(I),typeof Re=="function")for(I=Re.call(I),Re=0;!(fe=I.next()).done;)fe=fe.value,Ae=tt+ze(fe,Re++),Be+=X(fe,W,ce,Ae,Te);else if(Ae==="object"){if(typeof I.then=="function")return X(pe(I),W,ce,fe,Te);throw W=String(I),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Be}function le(I,W,ce){if(I==null)return I;var fe=[],Te=0;return X(I,fe,"","",function(Ae){return W.call(ce,Ae,Te++)}),fe}function xe(I){if(I._status===-1){var W=I._result;W=W(),W.then(function(ce){(I._status===0||I._status===-1)&&(I._status=1,I._result=ce)},function(ce){(I._status===0||I._status===-1)&&(I._status=2,I._result=ce)}),I._status===-1&&(I._status=0,I._result=W)}if(I._status===1)return I._result.default;throw I._result}var Ee=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ke={map:le,forEach:function(I,W,ce){le(I,function(){W.apply(this,arguments)},ce)},count:function(I){var W=0;return le(I,function(){W++}),W},toArray:function(I){return le(I,function(W){return W})||[]},only:function(I){if(!D(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Le.Activity=b,Le.Children=ke,Le.Component=B,Le.Fragment=n,Le.Profiler=o,Le.PureComponent=Y,Le.StrictMode=a,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Le.__COMPILER_RUNTIME={__proto__:null,c:function(I){return j.H.useMemoCache(I)}},Le.cache=function(I){return function(){return I.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(I,W,ce){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var fe=U({},I.props),Te=I.key;if(W!=null)for(Ae in W.key!==void 0&&(Te=""+W.key),W)!N.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(fe[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)fe.children=ce;else if(1<Ae){for(var Be=Array(Ae),tt=0;tt<Ae;tt++)Be[tt]=arguments[tt+2];fe.children=Be}return A(I.type,Te,fe)},Le.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:c,_context:I},I},Le.createElement=function(I,W,ce){var fe,Te={},Ae=null;if(W!=null)for(fe in W.key!==void 0&&(Ae=""+W.key),W)N.call(W,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Te[fe]=W[fe]);var Be=arguments.length-2;if(Be===1)Te.children=ce;else if(1<Be){for(var tt=Array(Be),Re=0;Re<Be;Re++)tt[Re]=arguments[Re+2];Te.children=tt}if(I&&I.defaultProps)for(fe in Be=I.defaultProps,Be)Te[fe]===void 0&&(Te[fe]=Be[fe]);return A(I,Ae,Te)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(I){return{$$typeof:g,render:I}},Le.isValidElement=D,Le.lazy=function(I){return{$$typeof:x,_payload:{_status:-1,_result:I},_init:xe}},Le.memo=function(I,W){return{$$typeof:y,type:I,compare:W===void 0?null:W}},Le.startTransition=function(I){var W=j.T,ce={};j.T=ce;try{var fe=I(),Te=j.S;Te!==null&&Te(ce,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ge,Ee)}catch(Ae){Ee(Ae)}finally{W!==null&&ce.types!==null&&(W.types=ce.types),j.T=W}},Le.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Le.use=function(I){return j.H.use(I)},Le.useActionState=function(I,W,ce){return j.H.useActionState(I,W,ce)},Le.useCallback=function(I,W){return j.H.useCallback(I,W)},Le.useContext=function(I){return j.H.useContext(I)},Le.useDebugValue=function(){},Le.useDeferredValue=function(I,W){return j.H.useDeferredValue(I,W)},Le.useEffect=function(I,W){return j.H.useEffect(I,W)},Le.useEffectEvent=function(I){return j.H.useEffectEvent(I)},Le.useId=function(){return j.H.useId()},Le.useImperativeHandle=function(I,W,ce){return j.H.useImperativeHandle(I,W,ce)},Le.useInsertionEffect=function(I,W){return j.H.useInsertionEffect(I,W)},Le.useLayoutEffect=function(I,W){return j.H.useLayoutEffect(I,W)},Le.useMemo=function(I,W){return j.H.useMemo(I,W)},Le.useOptimistic=function(I,W){return j.H.useOptimistic(I,W)},Le.useReducer=function(I,W,ce){return j.H.useReducer(I,W,ce)},Le.useRef=function(I){return j.H.useRef(I)},Le.useState=function(I){return j.H.useState(I)},Le.useSyncExternalStore=function(I,W,ce){return j.H.useSyncExternalStore(I,W,ce)},Le.useTransition=function(){return j.H.useTransition()},Le.version="19.2.0",Le}var dx;function Og(){return dx||(dx=1,qm.exports=kT()),qm.exports}var C=Og();const Yc=l_(C);var Hm={exports:{}},_c={},Fm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function IT(){return hx||(hx=1,(function(s){function e(X,le){var xe=X.length;X.push(le);e:for(;0<xe;){var Ee=xe-1>>>1,ke=X[Ee];if(0<o(ke,le))X[Ee]=le,X[xe]=ke,xe=Ee;else break e}}function n(X){return X.length===0?null:X[0]}function a(X){if(X.length===0)return null;var le=X[0],xe=X.pop();if(xe!==le){X[0]=xe;e:for(var Ee=0,ke=X.length,I=ke>>>1;Ee<I;){var W=2*(Ee+1)-1,ce=X[W],fe=W+1,Te=X[fe];if(0>o(ce,xe))fe<ke&&0>o(Te,ce)?(X[Ee]=Te,X[fe]=xe,Ee=fe):(X[Ee]=ce,X[W]=xe,Ee=W);else if(fe<ke&&0>o(Te,xe))X[Ee]=Te,X[fe]=xe,Ee=fe;else break e}}return le}function o(X,le){var xe=X.sortIndex-le.sortIndex;return xe!==0?xe:X.id-le.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var p=[],y=[],x=1,b=null,T=3,k=!1,V=!1,U=!1,z=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function de(X){for(var le=n(y);le!==null;){if(le.callback===null)a(y);else if(le.startTime<=X)a(y),le.sortIndex=le.expirationTime,e(p,le);else break;le=n(y)}}function ie(X){if(U=!1,de(X),!V)if(n(p)!==null)V=!0,ge||(ge=!0,L());else{var le=n(y);le!==null&&pe(ie,le.startTime-X)}}var ge=!1,j=-1,N=5,A=-1;function M(){return z?!0:!(s.unstable_now()-A<N)}function D(){if(z=!1,ge){var X=s.unstable_now();A=X;var le=!0;try{e:{V=!1,U&&(U=!1,q(j),j=-1),k=!0;var xe=T;try{t:{for(de(X),b=n(p);b!==null&&!(b.expirationTime>X&&M());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,T=b.priorityLevel;var ke=Ee(b.expirationTime<=X);if(X=s.unstable_now(),typeof ke=="function"){b.callback=ke,de(X),le=!0;break t}b===n(p)&&a(p),de(X)}else a(p);b=n(p)}if(b!==null)le=!0;else{var I=n(y);I!==null&&pe(ie,I.startTime-X),le=!1}}break e}finally{b=null,T=xe,k=!1}le=void 0}}finally{le?L():ge=!1}}}var L;if(typeof Y=="function")L=function(){Y(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ze=R.port2;R.port1.onmessage=D,L=function(){ze.postMessage(null)}}else L=function(){B(D,0)};function pe(X,le){j=B(function(){X(s.unstable_now())},le)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(X){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var xe=T;T=le;try{return X()}finally{T=xe}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var xe=T;T=X;try{return le()}finally{T=xe}},s.unstable_scheduleCallback=function(X,le,xe){var Ee=s.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Ee+xe:Ee):xe=Ee,X){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=xe+ke,X={id:x++,callback:le,priorityLevel:X,startTime:xe,expirationTime:ke,sortIndex:-1},xe>Ee?(X.sortIndex=xe,e(y,X),n(p)===null&&X===n(y)&&(U?(q(j),j=-1):U=!0,pe(ie,xe-Ee))):(X.sortIndex=ke,e(p,X),V||k||(V=!0,ge||(ge=!0,L()))),X},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(X){var le=T;return function(){var xe=T;T=le;try{return X.apply(this,arguments)}finally{T=xe}}}})(Gm)),Gm}var fx;function RT(){return fx||(fx=1,Fm.exports=IT()),Fm.exports}var $m={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function jT(){if(mx)return Tn;mx=1;var s=Og();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:y,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Tn.createPortal=function(p,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,x)},Tn.flushSync=function(p){var y=d.T,x=a.p;try{if(d.T=null,a.p=2,p)return p()}finally{d.T=y,a.p=x,a.d.f()}},Tn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},Tn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Tn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var x=y.as,b=g(x,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:k}):x==="script"&&a.d.X(p,{crossOrigin:b,integrity:T,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Tn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=g(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},Tn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,b=g(x,y.crossOrigin);a.d.L(p,x,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Tn.preloadModule=function(p,y){if(typeof p=="string")if(y){var x=g(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},Tn.requestFormReset=function(p){a.d.r(p)},Tn.unstable_batchedUpdates=function(p,y){return p(y)},Tn.useFormState=function(p,y,x){return d.H.useFormState(p,y,x)},Tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Tn.version="19.2.0",Tn}var gx;function DT(){if(gx)return $m.exports;gx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),$m.exports=jT(),$m.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function OT(){if(px)return _c;px=1;var s=RT(),e=Og(),n=DT();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(a(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(a(188));return r!==t?null:t}for(var i=t,l=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return p(f),t;if(m===l)return p(f),r;m=m.sibling}throw Error(a(188))}if(i.return!==l.return)i=f,l=m;else{for(var _=!1,w=f.child;w;){if(w===i){_=!0,i=f,l=m;break}if(w===l){_=!0,l=f,i=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===i){_=!0,i=m,l=f;break}if(w===l){_=!0,l=m,i=f;break}w=w.sibling}if(!_)throw Error(a(189))}}if(i.alternate!==l)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case B:return"Profiler";case z:return"StrictMode";case ie:return"Suspense";case ge:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case Y:return t.displayName||"Context";case q:return(t._context.displayName||"Context")+".Consumer";case de:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return r=t.displayName||null,r!==null?r:ze(t.type)||"Memo";case N:r=t._payload,t=t._init;try{return ze(t(r))}catch{}}return null}var pe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Ee=[],ke=-1;function I(t){return{current:t}}function W(t){0>ke||(t.current=Ee[ke],Ee[ke]=null,ke--)}function ce(t,r){ke++,Ee[ke]=t.current,t.current=r}var fe=I(null),Te=I(null),Ae=I(null),Be=I(null);function tt(t,r){switch(ce(Ae,r),ce(Te,t),ce(fe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Rv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Rv(r),t=jv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(fe),ce(fe,t)}function Re(){W(fe),W(Te),W(Ae)}function St(t){t.memoizedState!==null&&ce(Be,t);var r=fe.current,i=jv(r,t.type);r!==i&&(ce(Te,t),ce(fe,i))}function st(t){Te.current===t&&(W(fe),W(Te)),Be.current===t&&(W(Be),pc._currentValue=xe)}var fn,dt;function Gt(t){if(fn===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);fn=r&&r[1]||"",dt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+t+dt}var Ut=!1;function mn(t,r){if(!t||Ut)return"";Ut=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var K=Z}Reflect.construct(t,[],re)}else{try{re.call()}catch(Z){K=Z}t.call(re.prototype)}}else{try{throw Error()}catch(Z){K=Z}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var O=_.split(`
`),Q=w.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===Q.length)for(l=O.length-1,f=Q.length-1;1<=l&&0<=f&&O[l]!==Q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==Q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==Q[f]){var ee=`
`+O[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=f);break}}}finally{Ut=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Gt(i):""}function ae(t,r){switch(t.tag){case 26:case 27:case 5:return Gt(t.type);case 16:return Gt("Lazy");case 13:return t.child!==r&&r!==null?Gt("Suspense Fallback"):Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return mn(t.type,!1);case 11:return mn(t.type.render,!1);case 1:return mn(t.type,!0);case 31:return Gt("Activity");default:return""}}function Ge(t){try{var r="",i=null;do r+=ae(t,i),i=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var We=Object.prototype.hasOwnProperty,bt=s.unstable_scheduleCallback,Sr=s.unstable_cancelCallback,Xs=s.unstable_shouldYield,oi=s.unstable_requestPaint,$t=s.unstable_now,fs=s.unstable_getCurrentPriorityLevel,Js=s.unstable_ImmediatePriority,li=s.unstable_UserBlockingPriority,Br=s.unstable_NormalPriority,Xi=s.unstable_LowPriority,Ws=s.unstable_IdlePriority,ms=s.log,Ji=s.unstable_setDisableYieldValue,Dn=null,Qt=null;function Cn(t){if(typeof ms=="function"&&Ji(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Dn,t)}catch{}}var kt=Math.clz32?Math.clz32:Zi,Wi=Math.log,Zs=Math.LN2;function Zi(t){return t>>>=0,t===0?32:31-(Wi(t)/Zs|0)|0}var ir=256,qr=262144,It=4194304;function or(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function lr(t,r,i){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?f=or(l):(_&=w,_!==0?f=or(_):i||(i=w&~t,i!==0&&(f=or(i))))):(w=l&~m,w!==0?f=or(w):_!==0?f=or(_):i||(i=l&~t,i!==0&&(f=or(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function qn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function _l(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eo(){var t=It;return It<<=1,(It&62914560)===0&&(It=4194304),t}function cr(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function gs(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function El(t,r,i,l,f,m){var _=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var w=t.entanglements,O=t.expirationTimes,Q=t.hiddenUpdates;for(i=_&~i;0<i;){var ee=31-kt(i),re=1<<ee;w[ee]=0,O[ee]=-1;var K=Q[ee];if(K!==null)for(Q[ee]=null,ee=0;ee<K.length;ee++){var Z=K[ee];Z!==null&&(Z.lane&=-536870913)}i&=~re}l!==0&&Hr(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~r))}function Hr(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-kt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|i&261930}function ea(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var l=31-kt(i),f=1<<l;f&r|t[l]&r&&(t[l]|=r),i&=~f}}function ta(t,r){var i=r&-r;return i=(i&42)!==0?1:Fr(i),(i&(t.suspendedLanes|r))!==0?0:i}function Fr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ur(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ci(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:tx(t.type))}function F(t,r){var i=le.p;try{return le.p=t,r()}finally{le.p=i}}var oe=Math.random().toString(36).slice(2),be="__reactFiber$"+oe,Ie="__reactProps$"+oe,Rt="__reactContainer$"+oe,Nr="__reactEvents$"+oe,to="__reactListeners$"+oe,ui="__reactHandles$"+oe,Ar="__reactResources$"+oe,gn="__reactMarker$"+oe;function ps(t){delete t[be],delete t[Ie],delete t[Nr],delete t[to],delete t[ui]}function Hn(t){var r=t[be];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Rt]||i[be]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Uv(t);t!==null;){if(i=t[be])return i;t=Uv(t)}return r}t=i,i=t.parentNode}return null}function dr(t){if(t=t[be]||t[Rt]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Fn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function Gr(t){var r=t[Ar];return r||(r=t[Ar]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Kt(t){t[gn]=!0}var wl=new Set,Tl={};function $r(t,r){Qr(t,r),Qr(t+"Capture",r)}function Qr(t,r){for(Tl[t]=r,t=0;t<r.length;t++)wl.add(r[t])}var Sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nl={},Al={};function fu(t){return We.call(Al,t)?!0:We.call(Nl,t)?!1:Sl.test(t)?Al[t]=!0:(Nl[t]=!0,!1)}function no(t,r,i){if(fu(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Gn(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function Yt(t,r,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+l)}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function na(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Cl(t,r,i){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){i=""+_,m.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(_){i=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function lt(t){if(!t._valueTracker){var r=na(t)?"checked":"value";t._valueTracker=Cl(t,r,""+t[r])}}function di(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),l="";return t&&(l=na(t)?t.checked?"true":"false":t.value),t=l,t!==i?(r.setValue(t),!0):!1}function Kr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hi=/[\n"\\]/g;function On(t){return t.replace(hi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ro(t,r,i,l,f,m,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+cn(r)):t.value!==""+cn(r)&&(t.value=""+cn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?kl(t,_,cn(r)):i!=null?kl(t,_,cn(i)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+cn(w):t.removeAttribute("name")}function mu(t,r,i,l,f,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){lt(t);return}i=i!=null?""+cn(i):"",r=r!=null?""+cn(r):i,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),lt(t)}function kl(t,r,i){r==="number"&&Kr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function ra(t,r,i,l){if(t=t.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=r.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&l&&(t[i].defaultSelected=!0)}else{for(i=""+cn(i),r=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function gu(t,r,i){if(r!=null&&(r=""+cn(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+cn(i):""}function sa(t,r,i,l){if(r==null){if(l!=null){if(i!=null)throw Error(a(92));if(pe(l)){if(1<l.length)throw Error(a(93));l=l[0]}i=l}i==null&&(i=""),r=i}i=cn(r),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l),lt(t)}function Mn(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var pu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(t,r,i){var l=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,i):typeof i!="number"||i===0||pu.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function Rl(t,r,i){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&i[f]!==l&&Il(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Il(t,m,r[m])}function so(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ao(t){return aa.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Cr(){}var jl=null;function hr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ia=null,Yr=null;function fi(t){var r=dr(t);if(r&&(t=r.stateNode)){var i=t[Ie]||null;e:switch(t=r.stateNode,r.type){case"input":if(ro(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+On(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var l=i[r];if(l!==t&&l.form===t.form){var f=l[Ie]||null;if(!f)throw Error(a(90));ro(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)l=i[r],l.form===t.form&&di(l)}break e;case"textarea":gu(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&ra(t,!!i.multiple,r,!1)}}}var io=!1;function oa(t,r,i){if(io)return t(r,i);io=!0;try{var l=t(r);return l}finally{if(io=!1,(ia!==null||Yr!==null)&&(ud(),ia&&(r=ia,t=Yr,Yr=ia=null,fi(r),t)))for(r=0;r<t.length;r++)fi(t[r])}}function kr(t,r){var i=t.stateNode;if(i===null)return null;var l=i[Ie]||null;if(l===null)return null;i=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(a(231,r,typeof i));return i}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mi=!1;if(fr)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){mi=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{mi=!1}var Xr=null,Dl=null,gi=null;function Ol(){if(gi)return gi;var t,r=Dl,i=r.length,l,f="value"in Xr?Xr.value:Xr.textContent,m=f.length;for(t=0;t<i&&r[t]===f[t];t++);var _=i-t;for(l=1;l<=_&&r[i-l]===f[m-l];l++);return gi=f.slice(t,1<l?1-l:void 0)}function pi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ys(){return!0}function Ir(){return!1}function pn(t){function r(i,l,f,m,_){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(i=t[w],this[w]=i?i(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ys:Ir,this.isPropagationStopped=Ir,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),r}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jr=pn(vs),la=b({},vs,{view:0,detail:0}),Ml=pn(la),ca,oo,Wr,lo=b({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wr&&(Wr&&t.type==="mousemove"?(ca=t.screenX-Wr.screenX,oo=t.screenY-Wr.screenY):oo=ca=0,Wr=t),ca)},movementY:function(t){return"movementY"in t?t.movementY:oo}}),Vl=pn(lo),yi=b({},lo,{dataTransfer:0}),vu=pn(yi),xu=b({},la,{relatedTarget:0}),vi=pn(xu),Ll=b({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),bu=pn(Ll),co=b({},vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_u=pn(co),Eu=b({},vs,{data:0}),Zr=pn(Eu),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Su[t])?!!r[t]:!1}function ua(){return Nu}var kn=b({},la,{key:function(t){if(t.key){var r=wu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=pi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(t){return t.type==="keypress"?pi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Au=pn(kn),Cu=b({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xs=pn(Cu),h=b({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),v=pn(h),E=b({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=pn(E),G=b({},lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=pn(G),me=b({},vs,{newState:0,oldState:0}),Pe=pn(me),zt=[9,13,27,32],at=fr&&"CompositionEvent"in window,Nt=null;fr&&"documentMode"in document&&(Nt=document.documentMode);var mr=fr&&"TextEvent"in window&&!Nt,es=fr&&(!at||Nt&&8<Nt&&11>=Nt),Rr=" ",jr=!1;function xi(t,r){switch(t){case"keyup":return zt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ho=!1;function Jw(t,r){switch(t){case"compositionend":return uo(r);case"keypress":return r.which!==32?null:(jr=!0,Rr);case"textInput":return t=r.data,t===Rr&&jr?null:t;default:return null}}function Ww(t,r){if(ho)return t==="compositionend"||!at&&xi(t,r)?(t=Ol(),gi=Dl=Xr=null,ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return es&&r.locale!=="ko"?null:r.data;default:return null}}var Zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Zw[t.type]:r==="textarea"}function Hp(t,r,i,l){ia?Yr?Yr.push(l):Yr=[l]:ia=l,r=yd(r,"onChange"),0<r.length&&(i=new Jr("onChange","change",null,i,l),t.push({event:i,listeners:r}))}var Pl=null,Ul=null;function e1(t){Sv(t,0)}function ku(t){var r=Fn(t);if(di(r))return t}function Fp(t,r){if(t==="change")return r}var Gp=!1;if(fr){var Qh;if(fr){var Kh="oninput"in document;if(!Kh){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Kh=typeof $p.oninput=="function"}Qh=Kh}else Qh=!1;Gp=Qh&&(!document.documentMode||9<document.documentMode)}function Qp(){Pl&&(Pl.detachEvent("onpropertychange",Kp),Ul=Pl=null)}function Kp(t){if(t.propertyName==="value"&&ku(Ul)){var r=[];Hp(r,Ul,t,hr(t)),oa(e1,r)}}function t1(t,r,i){t==="focusin"?(Qp(),Pl=r,Ul=i,Pl.attachEvent("onpropertychange",Kp)):t==="focusout"&&Qp()}function n1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(Ul)}function r1(t,r){if(t==="click")return ku(r)}function s1(t,r){if(t==="input"||t==="change")return ku(r)}function a1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var $n=typeof Object.is=="function"?Object.is:a1;function zl(t,r){if($n(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),l=Object.keys(r);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!We.call(r,f)||!$n(t[f],r[f]))return!1}return!0}function Yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xp(t,r){var i=Yp(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=r&&l>=r)return{node:i,offset:r-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Yp(i)}}function Jp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Jp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Wp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Kr(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=Kr(t.document)}return r}function Yh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var i1=fr&&"documentMode"in document&&11>=document.documentMode,fo=null,Xh=null,Bl=null,Jh=!1;function Zp(t,r,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Jh||fo==null||fo!==Kr(l)||(l=fo,"selectionStart"in l&&Yh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Bl&&zl(Bl,l)||(Bl=l,l=yd(Xh,"onSelect"),0<l.length&&(r=new Jr("onSelect","select",null,r,i),t.push({event:r,listeners:l}),r.target=fo)))}function bi(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var mo={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},Wh={},e0={};fr&&(e0=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function _i(t){if(Wh[t])return Wh[t];if(!mo[t])return t;var r=mo[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in e0)return Wh[t]=r[i];return t}var t0=_i("animationend"),n0=_i("animationiteration"),r0=_i("animationstart"),o1=_i("transitionrun"),l1=_i("transitionstart"),c1=_i("transitioncancel"),s0=_i("transitionend"),a0=new Map,Zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zh.push("scrollEnd");function Dr(t,r){a0.set(t,r),$r(r,[t])}var Iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},gr=[],go=0,ef=0;function Ru(){for(var t=go,r=ef=go=0;r<t;){var i=gr[r];gr[r++]=null;var l=gr[r];gr[r++]=null;var f=gr[r];gr[r++]=null;var m=gr[r];if(gr[r++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&i0(i,f,m)}}function ju(t,r,i,l){gr[go++]=t,gr[go++]=r,gr[go++]=i,gr[go++]=l,ef|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function tf(t,r,i,l){return ju(t,r,i,l),Du(t)}function Ei(t,r){return ju(t,null,null,r),Du(t)}function i0(t,r,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,l=m.alternate,l!==null&&(l.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-kt(i),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=i|536870912),m):null}function Du(t){if(50<cc)throw cc=0,dm=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var po={};function u1(t,r,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,r,i,l){return new u1(t,r,i,l)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bs(t,r){var i=t.alternate;return i===null?(i=Qn(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function o0(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Ou(t,r,i,l,f,m){var _=0;if(l=t,typeof t=="function")nf(t)&&(_=1);else if(typeof t=="string")_=gT(t,i,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Qn(31,i,r,f),t.elementType=A,t.lanes=m,t;case U:return wi(i.children,f,m,r);case z:_=8,f|=24;break;case B:return t=Qn(12,i,r,f|2),t.elementType=B,t.lanes=m,t;case ie:return t=Qn(13,i,r,f),t.elementType=ie,t.lanes=m,t;case ge:return t=Qn(19,i,r,f),t.elementType=ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:_=10;break e;case q:_=9;break e;case de:_=11;break e;case j:_=14;break e;case N:_=16,l=null;break e}_=29,i=Error(a(130,t===null?"null":typeof t,"")),l=null}return r=Qn(_,i,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function wi(t,r,i,l){return t=Qn(7,t,l,r),t.lanes=i,t}function rf(t,r,i){return t=Qn(6,t,null,r),t.lanes=i,t}function l0(t){var r=Qn(18,null,null,0);return r.stateNode=t,r}function sf(t,r,i){return r=Qn(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var c0=new WeakMap;function pr(t,r){if(typeof t=="object"&&t!==null){var i=c0.get(t);return i!==void 0?i:(r={value:t,source:r,stack:Ge(r)},c0.set(t,r),r)}return{value:t,source:r,stack:Ge(r)}}var yo=[],vo=0,Mu=null,ql=0,yr=[],vr=0,da=null,ts=1,ns="";function _s(t,r){yo[vo++]=ql,yo[vo++]=Mu,Mu=t,ql=r}function u0(t,r,i){yr[vr++]=ts,yr[vr++]=ns,yr[vr++]=da,da=t;var l=ts;t=ns;var f=32-kt(l)-1;l&=~(1<<f),i+=1;var m=32-kt(r)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,ts=1<<32-kt(r)+f|i<<f|l,ns=m+t}else ts=1<<m|i<<f|l,ns=t}function af(t){t.return!==null&&(_s(t,1),u0(t,1,0))}function of(t){for(;t===Mu;)Mu=yo[--vo],yo[vo]=null,ql=yo[--vo],yo[vo]=null;for(;t===da;)da=yr[--vr],yr[vr]=null,ns=yr[--vr],yr[vr]=null,ts=yr[--vr],yr[vr]=null}function d0(t,r){yr[vr++]=ts,yr[vr++]=ns,yr[vr++]=da,ts=r.id,ns=r.overflow,da=t}var yn=null,_t=null,Je=!1,ha=null,xr=!1,lf=Error(a(519));function fa(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(pr(r,t)),lf}function h0(t){var r=t.stateNode,i=t.type,l=t.memoizedProps;switch(r[be]=t,r[Ie]=l,i){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<dc.length;i++)Fe(dc[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),mu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),sa(r,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||l.suppressHydrationWarning===!0||kv(r.textContent,i)?(l.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),l.onScroll!=null&&Fe("scroll",r),l.onScrollEnd!=null&&Fe("scrollend",r),l.onClick!=null&&(r.onclick=Cr),r=!0):r=!1,r||fa(t,!0)}function f0(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 31:case 13:xr=!1;return;case 27:case 3:xr=!0;return;default:yn=yn.return}}function xo(t){if(t!==yn)return!1;if(!Je)return f0(t),Je=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Nm(t.type,t.memoizedProps)),i=!i),i&&_t&&fa(t),f0(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));_t=Pv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));_t=Pv(t)}else r===27?(r=_t,Aa(t.type)?(t=Rm,Rm=null,_t=t):_t=r):_t=yn?_r(t.stateNode.nextSibling):null;return!0}function Ti(){_t=yn=null,Je=!1}function cf(){var t=ha;return t!==null&&(Un===null?Un=t:Un.push.apply(Un,t),ha=null),t}function Hl(t){ha===null?ha=[t]:ha.push(t)}var uf=I(null),Si=null,Es=null;function ma(t,r,i){ce(uf,r._currentValue),r._currentValue=i}function ws(t){t._currentValue=uf.current,W(uf)}function df(t,r,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===i)break;t=t.return}}function hf(t,r,i,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var O=0;O<r.length;O++)if(w.context===r[O]){m.lanes|=i,w=m.alternate,w!==null&&(w.lanes|=i),df(m.return,i,t),l||(_=null);break e}m=w.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=i,m=_.alternate,m!==null&&(m.lanes|=i),df(_,i,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function bo(t,r,i,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var w=f.type;$n(f.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(f===Be.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(pc):t=[pc])}f=f.return}t!==null&&hf(r,t,i,l),r.flags|=262144}function Vu(t){for(t=t.firstContext;t!==null;){if(!$n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ni(t){Si=t,Es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return m0(Si,t)}function Lu(t,r){return Si===null&&Ni(t),m0(t,r)}function m0(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},Es===null){if(t===null)throw Error(a(308));Es=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Es=Es.next=r;return i}var d1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},h1=s.unstable_scheduleCallback,f1=s.unstable_NormalPriority,Xt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new d1,data:new Map,refCount:0}}function Fl(t){t.refCount--,t.refCount===0&&h1(f1,function(){t.controller.abort()})}var Gl=null,mf=0,_o=0,Eo=null;function m1(t,r){if(Gl===null){var i=Gl=[];mf=0,_o=ym(),Eo={status:"pending",value:void 0,then:function(l){i.push(l)}}}return mf++,r.then(g0,g0),r}function g0(){if(--mf===0&&Gl!==null){Eo!==null&&(Eo.status="fulfilled");var t=Gl;Gl=null,_o=0,Eo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function g1(t,r){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var p0=X.S;X.S=function(t,r){Zy=$t(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&m1(t,r),p0!==null&&p0(t,r)};var Ai=I(null);function gf(){var t=Ai.current;return t!==null?t:xt.pooledCache}function Pu(t,r){r===null?ce(Ai,Ai.current):ce(Ai,r.pool)}function y0(){var t=gf();return t===null?null:{parent:Xt._currentValue,pool:t}}var wo=Error(a(460)),pf=Error(a(474)),Uu=Error(a(542)),zu={then:function(){}};function v0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function x0(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(Cr,Cr),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,_0(t),t;default:if(typeof r.status=="string")r.then(Cr,Cr);else{if(t=xt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,_0(t),t}throw ki=r,wo}}function Ci(t){try{var r=t._init;return r(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ki=i,wo):i}}var ki=null;function b0(){if(ki===null)throw Error(a(459));var t=ki;return ki=null,t}function _0(t){if(t===wo||t===Uu)throw Error(a(483))}var To=null,$l=0;function Bu(t){var r=$l;return $l+=1,To===null&&(To=[]),x0(To,t,r)}function Ql(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function qu(t,r){throw r.$$typeof===T?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function E0(t){function r(H,P){if(t){var $=H.deletions;$===null?(H.deletions=[P],H.flags|=16):$.push(P)}}function i(H,P){if(!t)return null;for(;P!==null;)r(H,P),P=P.sibling;return null}function l(H){for(var P=new Map;H!==null;)H.key!==null?P.set(H.key,H):P.set(H.index,H),H=H.sibling;return P}function f(H,P){return H=bs(H,P),H.index=0,H.sibling=null,H}function m(H,P,$){return H.index=$,t?($=H.alternate,$!==null?($=$.index,$<P?(H.flags|=67108866,P):$):(H.flags|=67108866,P)):(H.flags|=1048576,P)}function _(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function w(H,P,$,ne){return P===null||P.tag!==6?(P=rf($,H.mode,ne),P.return=H,P):(P=f(P,$),P.return=H,P)}function O(H,P,$,ne){var Ne=$.type;return Ne===U?ee(H,P,$.props.children,ne,$.key):P!==null&&(P.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===N&&Ci(Ne)===P.type)?(P=f(P,$.props),Ql(P,$),P.return=H,P):(P=Ou($.type,$.key,$.props,null,H.mode,ne),Ql(P,$),P.return=H,P)}function Q(H,P,$,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=sf($,H.mode,ne),P.return=H,P):(P=f(P,$.children||[]),P.return=H,P)}function ee(H,P,$,ne,Ne){return P===null||P.tag!==7?(P=wi($,H.mode,ne,Ne),P.return=H,P):(P=f(P,$),P.return=H,P)}function re(H,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=rf(""+P,H.mode,$),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case k:return $=Ou(P.type,P.key,P.props,null,H.mode,$),Ql($,P),$.return=H,$;case V:return P=sf(P,H.mode,$),P.return=H,P;case N:return P=Ci(P),re(H,P,$)}if(pe(P)||L(P))return P=wi(P,H.mode,$,null),P.return=H,P;if(typeof P.then=="function")return re(H,Bu(P),$);if(P.$$typeof===Y)return re(H,Lu(H,P),$);qu(H,P)}return null}function K(H,P,$,ne){var Ne=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ne!==null?null:w(H,P,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case k:return $.key===Ne?O(H,P,$,ne):null;case V:return $.key===Ne?Q(H,P,$,ne):null;case N:return $=Ci($),K(H,P,$,ne)}if(pe($)||L($))return Ne!==null?null:ee(H,P,$,ne,null);if(typeof $.then=="function")return K(H,P,Bu($),ne);if($.$$typeof===Y)return K(H,P,Lu(H,$),ne);qu(H,$)}return null}function Z(H,P,$,ne,Ne){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return H=H.get($)||null,w(P,H,""+ne,Ne);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return H=H.get(ne.key===null?$:ne.key)||null,O(P,H,ne,Ne);case V:return H=H.get(ne.key===null?$:ne.key)||null,Q(P,H,ne,Ne);case N:return ne=Ci(ne),Z(H,P,$,ne,Ne)}if(pe(ne)||L(ne))return H=H.get($)||null,ee(P,H,ne,Ne,null);if(typeof ne.then=="function")return Z(H,P,$,Bu(ne),Ne);if(ne.$$typeof===Y)return Z(H,P,$,Lu(P,ne),Ne);qu(P,ne)}return null}function _e(H,P,$,ne){for(var Ne=null,nt=null,we=P,qe=P=0,Qe=null;we!==null&&qe<$.length;qe++){we.index>qe?(Qe=we,we=null):Qe=we.sibling;var rt=K(H,we,$[qe],ne);if(rt===null){we===null&&(we=Qe);break}t&&we&&rt.alternate===null&&r(H,we),P=m(rt,P,qe),nt===null?Ne=rt:nt.sibling=rt,nt=rt,we=Qe}if(qe===$.length)return i(H,we),Je&&_s(H,qe),Ne;if(we===null){for(;qe<$.length;qe++)we=re(H,$[qe],ne),we!==null&&(P=m(we,P,qe),nt===null?Ne=we:nt.sibling=we,nt=we);return Je&&_s(H,qe),Ne}for(we=l(we);qe<$.length;qe++)Qe=Z(we,H,qe,$[qe],ne),Qe!==null&&(t&&Qe.alternate!==null&&we.delete(Qe.key===null?qe:Qe.key),P=m(Qe,P,qe),nt===null?Ne=Qe:nt.sibling=Qe,nt=Qe);return t&&we.forEach(function(ja){return r(H,ja)}),Je&&_s(H,qe),Ne}function je(H,P,$,ne){if($==null)throw Error(a(151));for(var Ne=null,nt=null,we=P,qe=P=0,Qe=null,rt=$.next();we!==null&&!rt.done;qe++,rt=$.next()){we.index>qe?(Qe=we,we=null):Qe=we.sibling;var ja=K(H,we,rt.value,ne);if(ja===null){we===null&&(we=Qe);break}t&&we&&ja.alternate===null&&r(H,we),P=m(ja,P,qe),nt===null?Ne=ja:nt.sibling=ja,nt=ja,we=Qe}if(rt.done)return i(H,we),Je&&_s(H,qe),Ne;if(we===null){for(;!rt.done;qe++,rt=$.next())rt=re(H,rt.value,ne),rt!==null&&(P=m(rt,P,qe),nt===null?Ne=rt:nt.sibling=rt,nt=rt);return Je&&_s(H,qe),Ne}for(we=l(we);!rt.done;qe++,rt=$.next())rt=Z(we,H,qe,rt.value,ne),rt!==null&&(t&&rt.alternate!==null&&we.delete(rt.key===null?qe:rt.key),P=m(rt,P,qe),nt===null?Ne=rt:nt.sibling=rt,nt=rt);return t&&we.forEach(function(NT){return r(H,NT)}),Je&&_s(H,qe),Ne}function gt(H,P,$,ne){if(typeof $=="object"&&$!==null&&$.type===U&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case k:e:{for(var Ne=$.key;P!==null;){if(P.key===Ne){if(Ne=$.type,Ne===U){if(P.tag===7){i(H,P.sibling),ne=f(P,$.props.children),ne.return=H,H=ne;break e}}else if(P.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===N&&Ci(Ne)===P.type){i(H,P.sibling),ne=f(P,$.props),Ql(ne,$),ne.return=H,H=ne;break e}i(H,P);break}else r(H,P);P=P.sibling}$.type===U?(ne=wi($.props.children,H.mode,ne,$.key),ne.return=H,H=ne):(ne=Ou($.type,$.key,$.props,null,H.mode,ne),Ql(ne,$),ne.return=H,H=ne)}return _(H);case V:e:{for(Ne=$.key;P!==null;){if(P.key===Ne)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){i(H,P.sibling),ne=f(P,$.children||[]),ne.return=H,H=ne;break e}else{i(H,P);break}else r(H,P);P=P.sibling}ne=sf($,H.mode,ne),ne.return=H,H=ne}return _(H);case N:return $=Ci($),gt(H,P,$,ne)}if(pe($))return _e(H,P,$,ne);if(L($)){if(Ne=L($),typeof Ne!="function")throw Error(a(150));return $=Ne.call($),je(H,P,$,ne)}if(typeof $.then=="function")return gt(H,P,Bu($),ne);if($.$$typeof===Y)return gt(H,P,Lu(H,$),ne);qu(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(i(H,P.sibling),ne=f(P,$),ne.return=H,H=ne):(i(H,P),ne=rf($,H.mode,ne),ne.return=H,H=ne),_(H)):i(H,P)}return function(H,P,$,ne){try{$l=0;var Ne=gt(H,P,$,ne);return To=null,Ne}catch(we){if(we===wo||we===Uu)throw we;var nt=Qn(29,we,null,H.mode);return nt.lanes=ne,nt.return=H,nt}finally{}}}var Ii=E0(!0),w0=E0(!1),ga=!1;function yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function pa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ya(t,r,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Du(t),i0(t,null,i),r}return ju(t,l,r,i),Du(t)}function Kl(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,i|=l,r.lanes=i,ea(t,i)}}function xf(t,r){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var bf=!1;function Yl(){if(bf){var t=Eo;if(t!==null)throw t}}function Xl(t,r,i,l){bf=!1;var f=t.updateQueue;ga=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var O=w,Q=O.next;O.next=null,_===null?m=Q:_.next=Q,_=O;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==_&&(w===null?ee.firstBaseUpdate=Q:w.next=Q,ee.lastBaseUpdate=O))}if(m!==null){var re=f.baseState;_=0,ee=Q=O=null,w=m;do{var K=w.lane&-536870913,Z=K!==w.lane;if(Z?($e&K)===K:(l&K)===K){K!==0&&K===_o&&(bf=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var _e=t,je=w;K=r;var gt=i;switch(je.tag){case 1:if(_e=je.payload,typeof _e=="function"){re=_e.call(gt,re,K);break e}re=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=je.payload,K=typeof _e=="function"?_e.call(gt,re,K):_e,K==null)break e;re=b({},re,K);break e;case 2:ga=!0}}K=w.callback,K!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(Q=ee=Z,O=re):ee=ee.next=Z,_|=K;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ee===null&&(O=re),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=ee,m===null&&(f.shared.lanes=0),Ea|=_,t.lanes=_,t.memoizedState=re}}function T0(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function S0(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)T0(i[t],r)}var So=I(null),Hu=I(0);function N0(t,r){t=js,ce(Hu,t),ce(So,r),js=t|r.baseLanes}function _f(){ce(Hu,js),ce(So,So.current)}function Ef(){js=Hu.current,W(So),W(Hu)}var Kn=I(null),br=null;function va(t){var r=t.alternate;ce(Bt,Bt.current&1),ce(Kn,t),br===null&&(r===null||So.current!==null||r.memoizedState!==null)&&(br=t)}function wf(t){ce(Bt,Bt.current),ce(Kn,t),br===null&&(br=t)}function A0(t){t.tag===22?(ce(Bt,Bt.current),ce(Kn,t),br===null&&(br=t)):xa()}function xa(){ce(Bt,Bt.current),ce(Kn,Kn.current)}function Yn(t){W(Kn),br===t&&(br=null),W(Bt)}var Bt=I(0);function Fu(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||km(i)||Im(i)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ts=0,Ue=null,ft=null,Jt=null,Gu=!1,No=!1,Ri=!1,$u=0,Jl=0,Ao=null,p1=0;function Dt(){throw Error(a(321))}function Tf(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!$n(t[i],r[i]))return!1;return!0}function Sf(t,r,i,l,f,m){return Ts=m,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?uy:zf,Ri=!1,m=i(l,f),Ri=!1,No&&(m=k0(r,i,l,f)),C0(t),m}function C0(t){X.H=ec;var r=ft!==null&&ft.next!==null;if(Ts=0,Jt=ft=Ue=null,Gu=!1,Jl=0,Ao=null,r)throw Error(a(300));t===null||Wt||(t=t.dependencies,t!==null&&Vu(t)&&(Wt=!0))}function k0(t,r,i,l){Ue=t;var f=0;do{if(No&&(Ao=null),Jl=0,No=!1,25<=f)throw Error(a(301));if(f+=1,Jt=ft=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=dy,m=r(i,l)}while(No);return m}function y1(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?Wl(r):r,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&(Ue.flags|=1024),r}function Nf(){var t=$u!==0;return $u=0,t}function Af(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function Cf(t){if(Gu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Gu=!1}Ts=0,Jt=ft=Ue=null,No=!1,Jl=$u=0,Ao=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Ue.memoizedState=Jt=t:Jt=Jt.next=t,Jt}function qt(){if(ft===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=Jt===null?Ue.memoizedState:Jt.next;if(r!==null)Jt=r,ft=t;else{if(t===null)throw Ue.alternate===null?Error(a(467)):Error(a(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Jt===null?Ue.memoizedState=Jt=t:Jt=Jt.next=t}return Jt}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(t){var r=Jl;return Jl+=1,Ao===null&&(Ao=[]),t=x0(Ao,t,r),r=Ue,(Jt===null?r.memoizedState:Jt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?uy:zf),t}function Ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wl(t);if(t.$$typeof===Y)return vn(t)}throw Error(a(438,String(t)))}function kf(t){var r=null,i=Ue.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var l=Ue.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=Qu(),Ue.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),l=0;l<t;l++)i[l]=M;return r.index++,i}function Ss(t,r){return typeof r=="function"?r(t):r}function Yu(t){var r=qt();return If(r,ft,t)}function If(t,r,i){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=i;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var w=_=null,O=null,Q=r,ee=!1;do{var re=Q.lane&-536870913;if(re!==Q.lane?($e&re)===re:(Ts&re)===re){var K=Q.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),re===_o&&(ee=!0);else if((Ts&K)===K){Q=Q.next,K===_o&&(ee=!0);continue}else re={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(w=O=re,_=m):O=O.next=re,Ue.lanes|=K,Ea|=K;re=Q.action,Ri&&i(m,re),m=Q.hasEagerState?Q.eagerState:i(m,re)}else K={lane:re,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(w=O=K,_=m):O=O.next=K,Ue.lanes|=re,Ea|=re;Q=Q.next}while(Q!==null&&Q!==r);if(O===null?_=m:O.next=w,!$n(m,t.memoizedState)&&(Wt=!0,ee&&(i=Eo,i!==null)))throw i;t.memoizedState=m,t.baseState=_,t.baseQueue=O,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Rf(t){var r=qt(),i=r.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=t;var l=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);$n(m,r.memoizedState)||(Wt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,l]}function I0(t,r,i){var l=Ue,f=qt(),m=Je;if(m){if(i===void 0)throw Error(a(407));i=i()}else i=r();var _=!$n((ft||f).memoizedState,i);if(_&&(f.memoizedState=i,Wt=!0),f=f.queue,Of(D0.bind(null,l,f,t),[t]),f.getSnapshot!==r||_||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,Co(9,{destroy:void 0},j0.bind(null,l,f,i,r),null),xt===null)throw Error(a(349));m||(Ts&127)!==0||R0(l,r,i)}return i}function R0(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Ue.updateQueue,r===null?(r=Qu(),Ue.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function j0(t,r,i,l){r.value=i,r.getSnapshot=l,O0(r)&&M0(t)}function D0(t,r,i){return i(function(){O0(r)&&M0(t)})}function O0(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!$n(t,i)}catch{return!0}}function M0(t){var r=Ei(t,2);r!==null&&zn(r,t,2)}function jf(t){var r=In();if(typeof t=="function"){var i=t;if(t=i(),Ri){Cn(!0);try{i()}finally{Cn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:t},r}function V0(t,r,i,l){return t.baseState=i,If(t,ft,typeof l=="function"?l:Ss)}function v1(t,r,i,l,f){if(Wu(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};X.T!==null?i(!0):m.isTransition=!1,l(m),i=r.pending,i===null?(m.next=r.pending=m,L0(r,m)):(m.next=i.next,r.pending=i.next=m)}}function L0(t,r){var i=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=X.T,_={};X.T=_;try{var w=i(f,l),O=X.S;O!==null&&O(_,w),P0(t,r,w)}catch(Q){Df(t,r,Q)}finally{m!==null&&_.types!==null&&(m.types=_.types),X.T=m}}else try{m=i(f,l),P0(t,r,m)}catch(Q){Df(t,r,Q)}}function P0(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){U0(t,r,l)},function(l){return Df(t,r,l)}):U0(t,r,i)}function U0(t,r,i){r.status="fulfilled",r.value=i,z0(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,L0(t,i)))}function Df(t,r,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=i,z0(r),r=r.next;while(r!==l)}t.action=null}function z0(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function B0(t,r){return r}function q0(t,r){if(Je){var i=xt.formState;if(i!==null){e:{var l=Ue;if(Je){if(_t){t:{for(var f=_t,m=xr;f.nodeType!==8;){if(!m){f=null;break t}if(f=_r(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){_t=_r(f.nextSibling),l=f.data==="F!";break e}}fa(l)}l=!1}l&&(r=i[0])}}return i=In(),i.memoizedState=i.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B0,lastRenderedState:r},i.queue=l,i=oy.bind(null,Ue,l),l.dispatch=i,l=jf(!1),m=Uf.bind(null,Ue,!1,l.queue),l=In(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,i=v1.bind(null,Ue,f,m,i),f.dispatch=i,l.memoizedState=t,[r,i,!1]}function H0(t){var r=qt();return F0(r,ft,t)}function F0(t,r,i){if(r=If(t,r,B0)[0],t=Yu(Ss)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Wl(r)}catch(_){throw _===wo?Uu:_}else l=r;r=qt();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(Ue.flags|=2048,Co(9,{destroy:void 0},x1.bind(null,f,i),null)),[l,m,t]}function x1(t,r){t.action=r}function G0(t){var r=qt(),i=ft;if(i!==null)return F0(r,i,t);qt(),r=r.memoizedState,i=qt();var l=i.queue.dispatch;return i.memoizedState=t,[r,l,!1]}function Co(t,r,i,l){return t={tag:t,create:i,deps:l,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=Qu(),Ue.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,r.lastEffect=t),t}function $0(){return qt().memoizedState}function Xu(t,r,i,l){var f=In();Ue.flags|=t,f.memoizedState=Co(1|r,{destroy:void 0},i,l===void 0?null:l)}function Ju(t,r,i,l){var f=qt();l=l===void 0?null:l;var m=f.memoizedState.inst;ft!==null&&l!==null&&Tf(l,ft.memoizedState.deps)?f.memoizedState=Co(r,m,i,l):(Ue.flags|=t,f.memoizedState=Co(1|r,m,i,l))}function Q0(t,r){Xu(8390656,8,t,r)}function Of(t,r){Ju(2048,8,t,r)}function b1(t){Ue.flags|=4;var r=Ue.updateQueue;if(r===null)r=Qu(),Ue.updateQueue=r,r.events=[t];else{var i=r.events;i===null?r.events=[t]:i.push(t)}}function K0(t){var r=qt().memoizedState;return b1({ref:r,nextImpl:t}),function(){if((it&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Y0(t,r){return Ju(4,2,t,r)}function X0(t,r){return Ju(4,4,t,r)}function J0(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function W0(t,r,i){i=i!=null?i.concat([t]):null,Ju(4,4,J0.bind(null,r,t),i)}function Mf(){}function Z0(t,r){var i=qt();r=r===void 0?null:r;var l=i.memoizedState;return r!==null&&Tf(r,l[1])?l[0]:(i.memoizedState=[t,r],t)}function ey(t,r){var i=qt();r=r===void 0?null:r;var l=i.memoizedState;if(r!==null&&Tf(r,l[1]))return l[0];if(l=t(),Ri){Cn(!0);try{t()}finally{Cn(!1)}}return i.memoizedState=[l,r],l}function Vf(t,r,i){return i===void 0||(Ts&1073741824)!==0&&($e&261930)===0?t.memoizedState=r:(t.memoizedState=i,t=tv(),Ue.lanes|=t,Ea|=t,i)}function ty(t,r,i,l){return $n(i,r)?i:So.current!==null?(t=Vf(t,i,l),$n(t,r)||(Wt=!0),t):(Ts&42)===0||(Ts&1073741824)!==0&&($e&261930)===0?(Wt=!0,t.memoizedState=i):(t=tv(),Ue.lanes|=t,Ea|=t,r)}function ny(t,r,i,l,f){var m=le.p;le.p=m!==0&&8>m?m:8;var _=X.T,w={};X.T=w,Uf(t,!1,r,i);try{var O=f(),Q=X.S;if(Q!==null&&Q(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ee=g1(O,l);Zl(t,r,ee,Wn(t))}else Zl(t,r,l,Wn(t))}catch(re){Zl(t,r,{then:function(){},status:"rejected",reason:re},Wn())}finally{le.p=m,_!==null&&w.types!==null&&(_.types=w.types),X.T=_}}function _1(){}function Lf(t,r,i,l){if(t.tag!==5)throw Error(a(476));var f=ry(t).queue;ny(t,f,r,xe,i===null?_1:function(){return sy(t),i(l)})}function ry(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:xe},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function sy(t){var r=ry(t);r.next===null&&(r=t.alternate.memoizedState),Zl(t,r.next.queue,{},Wn())}function Pf(){return vn(pc)}function ay(){return qt().memoizedState}function iy(){return qt().memoizedState}function E1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=Wn();t=pa(i);var l=ya(r,t,i);l!==null&&(zn(l,r,i),Kl(l,r,i)),r={cache:ff()},t.payload=r;return}r=r.return}}function w1(t,r,i){var l=Wn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Wu(t)?ly(r,i):(i=tf(t,r,i,l),i!==null&&(zn(i,t,l),cy(i,r,l)))}function oy(t,r,i){var l=Wn();Zl(t,r,i,l)}function Zl(t,r,i,l){var f={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Wu(t))ly(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,w=m(_,i);if(f.hasEagerState=!0,f.eagerState=w,$n(w,_))return ju(t,r,f,0),xt===null&&Ru(),!1}catch{}finally{}if(i=tf(t,r,f,l),i!==null)return zn(i,t,l),cy(i,r,l),!0}return!1}function Uf(t,r,i,l){if(l={lane:2,revertLane:ym(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Wu(t)){if(r)throw Error(a(479))}else r=tf(t,i,l,2),r!==null&&zn(r,t,2)}function Wu(t){var r=t.alternate;return t===Ue||r!==null&&r===Ue}function ly(t,r){No=Gu=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function cy(t,r,i){if((i&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,i|=l,r.lanes=i,ea(t,i)}}var ec={readContext:vn,use:Ku,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};ec.useEffectEvent=Dt;var uy={readContext:vn,use:Ku,useCallback:function(t,r){return In().memoizedState=[t,r===void 0?null:r],t},useContext:vn,useEffect:Q0,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,Xu(4194308,4,J0.bind(null,r,t),i)},useLayoutEffect:function(t,r){return Xu(4194308,4,t,r)},useInsertionEffect:function(t,r){Xu(4,2,t,r)},useMemo:function(t,r){var i=In();r=r===void 0?null:r;var l=t();if(Ri){Cn(!0);try{t()}finally{Cn(!1)}}return i.memoizedState=[l,r],l},useReducer:function(t,r,i){var l=In();if(i!==void 0){var f=i(r);if(Ri){Cn(!0);try{i(r)}finally{Cn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=w1.bind(null,Ue,t),[l.memoizedState,t]},useRef:function(t){var r=In();return t={current:t},r.memoizedState=t},useState:function(t){t=jf(t);var r=t.queue,i=oy.bind(null,Ue,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:Mf,useDeferredValue:function(t,r){var i=In();return Vf(i,t,r)},useTransition:function(){var t=jf(!1);return t=ny.bind(null,Ue,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var l=Ue,f=In();if(Je){if(i===void 0)throw Error(a(407));i=i()}else{if(i=r(),xt===null)throw Error(a(349));($e&127)!==0||R0(l,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,Q0(D0.bind(null,l,m,t),[t]),l.flags|=2048,Co(9,{destroy:void 0},j0.bind(null,l,m,i,r),null),i},useId:function(){var t=In(),r=xt.identifierPrefix;if(Je){var i=ns,l=ts;i=(l&~(1<<32-kt(l)-1)).toString(32)+i,r="_"+r+"R_"+i,i=$u++,0<i&&(r+="H"+i.toString(32)),r+="_"}else i=p1++,r="_"+r+"r_"+i.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Pf,useFormState:q0,useActionState:q0,useOptimistic:function(t){var r=In();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=Uf.bind(null,Ue,!0,i),i.dispatch=r,[t,r]},useMemoCache:kf,useCacheRefresh:function(){return In().memoizedState=E1.bind(null,Ue)},useEffectEvent:function(t){var r=In(),i={impl:t};return r.memoizedState=i,function(){if((it&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},zf={readContext:vn,use:Ku,useCallback:Z0,useContext:vn,useEffect:Of,useImperativeHandle:W0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:ey,useReducer:Yu,useRef:$0,useState:function(){return Yu(Ss)},useDebugValue:Mf,useDeferredValue:function(t,r){var i=qt();return ty(i,ft.memoizedState,t,r)},useTransition:function(){var t=Yu(Ss)[0],r=qt().memoizedState;return[typeof t=="boolean"?t:Wl(t),r]},useSyncExternalStore:I0,useId:ay,useHostTransitionStatus:Pf,useFormState:H0,useActionState:H0,useOptimistic:function(t,r){var i=qt();return V0(i,ft,t,r)},useMemoCache:kf,useCacheRefresh:iy};zf.useEffectEvent=K0;var dy={readContext:vn,use:Ku,useCallback:Z0,useContext:vn,useEffect:Of,useImperativeHandle:W0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:ey,useReducer:Rf,useRef:$0,useState:function(){return Rf(Ss)},useDebugValue:Mf,useDeferredValue:function(t,r){var i=qt();return ft===null?Vf(i,t,r):ty(i,ft.memoizedState,t,r)},useTransition:function(){var t=Rf(Ss)[0],r=qt().memoizedState;return[typeof t=="boolean"?t:Wl(t),r]},useSyncExternalStore:I0,useId:ay,useHostTransitionStatus:Pf,useFormState:G0,useActionState:G0,useOptimistic:function(t,r){var i=qt();return ft!==null?V0(i,ft,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:kf,useCacheRefresh:iy};dy.useEffectEvent=K0;function Bf(t,r,i,l){r=t.memoizedState,i=i(l,r),i=i==null?r:b({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var qf={enqueueSetState:function(t,r,i){t=t._reactInternals;var l=Wn(),f=pa(l);f.payload=r,i!=null&&(f.callback=i),r=ya(t,f,l),r!==null&&(zn(r,t,l),Kl(r,t,l))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var l=Wn(),f=pa(l);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=ya(t,f,l),r!==null&&(zn(r,t,l),Kl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Wn(),l=pa(i);l.tag=2,r!=null&&(l.callback=r),r=ya(t,l,i),r!==null&&(zn(r,t,i),Kl(r,t,i))}};function hy(t,r,i,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):r.prototype&&r.prototype.isPureReactComponent?!zl(i,l)||!zl(f,m):!0}function fy(t,r,i,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,l),r.state!==t&&qf.enqueueReplaceState(r,r.state,null)}function ji(t,r){var i=r;if("ref"in r){i={};for(var l in r)l!=="ref"&&(i[l]=r[l])}if(t=t.defaultProps){i===r&&(i=b({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function my(t){Iu(t)}function gy(t){console.error(t)}function py(t){Iu(t)}function Zu(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function yy(t,r,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hf(t,r,i){return i=pa(i),i.tag=3,i.payload={element:null},i.callback=function(){Zu(t,r)},i}function vy(t){return t=pa(t),t.tag=3,t}function xy(t,r,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){yy(r,i,l)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){yy(r,i,l),typeof f!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function T1(t,r,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=i.alternate,r!==null&&bo(r,i,f,!0),i=Kn.current,i!==null){switch(i.tag){case 31:case 13:return br===null?dd():i.alternate===null&&Ot===0&&(Ot=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===zu?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([l]):r.add(l),mm(t,l,f)),!1;case 22:return i.flags|=65536,l===zu?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([l]):i.add(l)),mm(t,l,f)),!1}throw Error(a(435,i.tag))}return mm(t,l,f),dd(),!1}if(Je)return r=Kn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==lf&&(t=Error(a(422),{cause:l}),Hl(pr(t,i)))):(l!==lf&&(r=Error(a(423),{cause:l}),Hl(pr(r,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=pr(l,i),f=Hf(t.stateNode,l,f),xf(t,f),Ot!==4&&(Ot=2)),!1;var m=Error(a(520),{cause:l});if(m=pr(m,i),lc===null?lc=[m]:lc.push(m),Ot!==4&&(Ot=2),r===null)return!0;l=pr(l,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Hf(i.stateNode,l,t),xf(i,t),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(wa===null||!wa.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=vy(f),xy(f,t,i,l),xf(i,f),!1}i=i.return}while(i!==null);return!1}var Ff=Error(a(461)),Wt=!1;function xn(t,r,i,l){r.child=t===null?w0(r,null,i,l):Ii(r,t.child,i,l)}function by(t,r,i,l,f){i=i.render;var m=r.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return Ni(r),l=Sf(t,r,i,_,m,f),w=Nf(),t!==null&&!Wt?(Af(t,r,f),Ns(t,r,f)):(Je&&w&&af(r),r.flags|=1,xn(t,r,l,f),r.child)}function _y(t,r,i,l,f){if(t===null){var m=i.type;return typeof m=="function"&&!nf(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,Ey(t,r,m,l,f)):(t=Ou(i.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Wf(t,f)){var _=m.memoizedProps;if(i=i.compare,i=i!==null?i:zl,i(_,l)&&t.ref===r.ref)return Ns(t,r,f)}return r.flags|=1,t=bs(m,l),t.ref=r.ref,t.return=r,r.child=t}function Ey(t,r,i,l,f){if(t!==null){var m=t.memoizedProps;if(zl(m,l)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=l=m,Wf(t,f))(t.flags&131072)!==0&&(Wt=!0);else return r.lanes=t.lanes,Ns(t,r,f)}return Gf(t,r,i,l,f)}function wy(t,r,i,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return Ty(t,r,m,i,l)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pu(r,m!==null?m.cachePool:null),m!==null?N0(r,m):_f(),A0(r);else return l=r.lanes=536870912,Ty(t,r,m!==null?m.baseLanes|i:i,i,l)}else m!==null?(Pu(r,m.cachePool),N0(r,m),xa(),r.memoizedState=null):(t!==null&&Pu(r,null),_f(),xa());return xn(t,r,f,i),r.child}function tc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ty(t,r,i,l,f){var m=gf();return m=m===null?null:{parent:Xt._currentValue,pool:m},r.memoizedState={baseLanes:i,cachePool:m},t!==null&&Pu(r,null),_f(),A0(r),t!==null&&bo(t,r,l,!0),r.childLanes=f,null}function ed(t,r){return r=nd({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Sy(t,r,i){return Ii(r,t.child,null,i),t=ed(r,r.pendingProps),t.flags|=2,Yn(r),r.memoizedState=null,t}function S1(t,r,i){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Je){if(l.mode==="hidden")return t=ed(r,l),r.lanes=536870912,tc(null,t);if(wf(r),(t=_t)?(t=Lv(t,xr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:da!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},i=l0(t),i.return=r,r.child=i,yn=r,_t=null)):t=null,t===null)throw fa(r);return r.lanes=536870912,null}return ed(r,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(wf(r),f)if(r.flags&256)r.flags&=-257,r=Sy(t,r,i);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(Wt||bo(t,r,i,!1),f=(i&t.childLanes)!==0,Wt||f){if(l=xt,l!==null&&(_=ta(l,i),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ei(t,_),zn(l,t,_),Ff;dd(),r=Sy(t,r,i)}else t=m.treeContext,_t=_r(_.nextSibling),yn=r,Je=!0,ha=null,xr=!1,t!==null&&d0(r,t),r=ed(r,l),r.flags|=4096;return r}return t=bs(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function td(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Gf(t,r,i,l,f){return Ni(r),i=Sf(t,r,i,l,void 0,f),l=Nf(),t!==null&&!Wt?(Af(t,r,f),Ns(t,r,f)):(Je&&l&&af(r),r.flags|=1,xn(t,r,i,f),r.child)}function Ny(t,r,i,l,f,m){return Ni(r),r.updateQueue=null,i=k0(r,l,i,f),C0(t),l=Nf(),t!==null&&!Wt?(Af(t,r,m),Ns(t,r,m)):(Je&&l&&af(r),r.flags|=1,xn(t,r,i,m),r.child)}function Ay(t,r,i,l,f){if(Ni(r),r.stateNode===null){var m=po,_=i.contextType;typeof _=="object"&&_!==null&&(m=vn(_)),m=new i(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},yf(r),_=i.contextType,m.context=typeof _=="object"&&_!==null?vn(_):po,m.state=r.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(Bf(r,i,_,l),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&qf.enqueueReplaceState(m,m.state,null),Xl(r,l,m,f),Yl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var w=r.memoizedProps,O=ji(i,w);m.props=O;var Q=m.context,ee=i.contextType;_=po,typeof ee=="object"&&ee!==null&&(_=vn(ee));var re=i.getDerivedStateFromProps;ee=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,ee||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||Q!==_)&&fy(r,m,l,_),ga=!1;var K=r.memoizedState;m.state=K,Xl(r,l,m,f),Yl(),Q=r.memoizedState,w||K!==Q||ga?(typeof re=="function"&&(Bf(r,i,re,l),Q=r.memoizedState),(O=ga||hy(r,i,O,l,K,Q,_))?(ee||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Q),m.props=l,m.state=Q,m.context=_,l=O):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,vf(t,r),_=r.memoizedProps,ee=ji(i,_),m.props=ee,re=r.pendingProps,K=m.context,Q=i.contextType,O=po,typeof Q=="object"&&Q!==null&&(O=vn(Q)),w=i.getDerivedStateFromProps,(Q=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==re||K!==O)&&fy(r,m,l,O),ga=!1,K=r.memoizedState,m.state=K,Xl(r,l,m,f),Yl();var Z=r.memoizedState;_!==re||K!==Z||ga||t!==null&&t.dependencies!==null&&Vu(t.dependencies)?(typeof w=="function"&&(Bf(r,i,w,l),Z=r.memoizedState),(ee=ga||hy(r,i,ee,l,K,Z,O)||t!==null&&t.dependencies!==null&&Vu(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,O)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),m.props=l,m.state=Z,m.context=O,l=ee):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,td(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Ii(r,t.child,null,f),r.child=Ii(r,null,i,f)):xn(t,r,i,f),r.memoizedState=m.state,t=r.child):t=Ns(t,r,f),t}function Cy(t,r,i,l){return Ti(),r.flags|=256,xn(t,r,i,l),r.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qf(t){return{baseLanes:t,cachePool:y0()}}function Kf(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=Jn),t}function ky(t,r,i){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(Bt.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Je){if(f?va(r):xa(),(t=_t)?(t=Lv(t,xr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:da!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},i=l0(t),i.return=r,r.child=i,yn=r,_t=null)):t=null,t===null)throw fa(r);return Im(t)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(xa(),f=r.mode,w=nd({mode:"hidden",children:w},f),l=wi(l,f,i,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=Qf(i),l.childLanes=Kf(t,_,i),r.memoizedState=$f,tc(null,l)):(va(r),Yf(r,w))}var O=t.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(m)r.flags&256?(va(r),r.flags&=-257,r=Xf(t,r,i)):r.memoizedState!==null?(xa(),r.child=t.child,r.flags|=128,r=null):(xa(),w=l.fallback,f=r.mode,l=nd({mode:"visible",children:l.children},f),w=wi(w,f,i,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,Ii(r,t.child,null,i),l=r.child,l.memoizedState=Qf(i),l.childLanes=Kf(t,_,i),r.memoizedState=$f,r=tc(null,l));else if(va(r),Im(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var Q=_.dgst;_=Q,l=Error(a(419)),l.stack="",l.digest=_,Hl({value:l,source:null,stack:null}),r=Xf(t,r,i)}else if(Wt||bo(t,r,i,!1),_=(i&t.childLanes)!==0,Wt||_){if(_=xt,_!==null&&(l=ta(_,i),l!==0&&l!==O.retryLane))throw O.retryLane=l,Ei(t,l),zn(_,t,l),Ff;km(w)||dd(),r=Xf(t,r,i)}else km(w)?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,_t=_r(w.nextSibling),yn=r,Je=!0,ha=null,xr=!1,t!==null&&d0(r,t),r=Yf(r,l.children),r.flags|=4096);return r}return f?(xa(),w=l.fallback,f=r.mode,O=t.child,Q=O.sibling,l=bs(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,Q!==null?w=bs(Q,w):(w=wi(w,f,i,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,tc(null,l),l=r.child,w=t.child.memoizedState,w===null?w=Qf(i):(f=w.cachePool,f!==null?(O=Xt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=y0(),w={baseLanes:w.baseLanes|i,cachePool:f}),l.memoizedState=w,l.childLanes=Kf(t,_,i),r.memoizedState=$f,tc(t.child,l)):(va(r),i=t.child,t=i.sibling,i=bs(i,{mode:"visible",children:l.children}),i.return=r,i.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=i,r.memoizedState=null,i)}function Yf(t,r){return r=nd({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function nd(t,r){return t=Qn(22,t,null,r),t.lanes=0,t}function Xf(t,r,i){return Ii(r,t.child,null,i),t=Yf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Iy(t,r,i){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),df(t.return,r,i)}function Jf(t,r,i,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=i,_.tailMode=f,_.treeForkCount=m)}function Ry(t,r,i){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=Bt.current,w=(_&2)!==0;if(w?(_=_&1|2,r.flags|=128):_&=1,ce(Bt,_),xn(t,r,l,i),l=Je?ql:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iy(t,i,r);else if(t.tag===19)Iy(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=r.child,f=null;i!==null;)t=i.alternate,t!==null&&Fu(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Jf(r,!1,f,i,m,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Fu(t)===null){r.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Jf(r,!0,i,null,m,l);break;case"together":Jf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Ns(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Ea|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(bo(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,i=bs(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=bs(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Wf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Vu(t)))}function N1(t,r,i){switch(r.tag){case 3:tt(r,r.stateNode.containerInfo),ma(r,Xt,t.memoizedState.cache),Ti();break;case 27:case 5:St(r);break;case 4:tt(r,r.stateNode.containerInfo);break;case 10:ma(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,wf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(va(r),r.flags|=128,null):(i&r.child.childLanes)!==0?ky(t,r,i):(va(r),t=Ns(t,r,i),t!==null?t.sibling:null);va(r);break;case 19:var f=(t.flags&128)!==0;if(l=(i&r.childLanes)!==0,l||(bo(t,r,i,!1),l=(i&r.childLanes)!==0),f){if(l)return Ry(t,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Bt,Bt.current),l)break;return null;case 22:return r.lanes=0,wy(t,r,i,r.pendingProps);case 24:ma(r,Xt,t.memoizedState.cache)}return Ns(t,r,i)}function jy(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)Wt=!0;else{if(!Wf(t,i)&&(r.flags&128)===0)return Wt=!1,N1(t,r,i);Wt=(t.flags&131072)!==0}else Wt=!1,Je&&(r.flags&1048576)!==0&&u0(r,ql,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Ci(r.elementType),r.type=t,typeof t=="function")nf(t)?(l=ji(t,l),r.tag=1,r=Ay(null,r,t,l,i)):(r.tag=0,r=Gf(null,r,t,l,i));else{if(t!=null){var f=t.$$typeof;if(f===de){r.tag=11,r=by(null,r,t,l,i);break e}else if(f===j){r.tag=14,r=_y(null,r,t,l,i);break e}}throw r=ze(t)||t,Error(a(306,r,""))}}return r;case 0:return Gf(t,r,r.type,r.pendingProps,i);case 1:return l=r.type,f=ji(l,r.pendingProps),Ay(t,r,l,f,i);case 3:e:{if(tt(r,r.stateNode.containerInfo),t===null)throw Error(a(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,vf(t,r),Xl(r,l,null,i);var _=r.memoizedState;if(l=_.cache,ma(r,Xt,l),l!==m.cache&&hf(r,[Xt],i,!0),Yl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Cy(t,r,l,i);break e}else if(l!==f){f=pr(Error(a(424)),r),Hl(f),r=Cy(t,r,l,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=_r(t.firstChild),yn=r,Je=!0,ha=null,xr=!0,i=w0(r,null,l,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ti(),l===f){r=Ns(t,r,i);break e}xn(t,r,l,i)}r=r.child}return r;case 26:return td(t,r),t===null?(i=Hv(r.type,null,r.pendingProps,null))?r.memoizedState=i:Je||(i=r.type,t=r.pendingProps,l=vd(Ae.current).createElement(i),l[be]=r,l[Ie]=t,bn(l,i,t),Kt(l),r.stateNode=l):r.memoizedState=Hv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return St(r),t===null&&Je&&(l=r.stateNode=zv(r.type,r.pendingProps,Ae.current),yn=r,xr=!0,f=_t,Aa(r.type)?(Rm=f,_t=_r(l.firstChild)):_t=f),xn(t,r,r.pendingProps.children,i),td(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Je&&((f=l=_t)&&(l=nT(l,r.type,r.pendingProps,xr),l!==null?(r.stateNode=l,yn=r,_t=_r(l.firstChild),xr=!1,f=!0):f=!1),f||fa(r)),St(r),f=r.type,m=r.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Nm(f,m)?l=null:_!==null&&Nm(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Sf(t,r,y1,null,null,i),pc._currentValue=f),td(t,r),xn(t,r,l,i),r.child;case 6:return t===null&&Je&&((t=i=_t)&&(i=rT(i,r.pendingProps,xr),i!==null?(r.stateNode=i,yn=r,_t=null,t=!0):t=!1),t||fa(r)),null;case 13:return ky(t,r,i);case 4:return tt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ii(r,null,l,i):xn(t,r,l,i),r.child;case 11:return by(t,r,r.type,r.pendingProps,i);case 7:return xn(t,r,r.pendingProps,i),r.child;case 8:return xn(t,r,r.pendingProps.children,i),r.child;case 12:return xn(t,r,r.pendingProps.children,i),r.child;case 10:return l=r.pendingProps,ma(r,r.type,l.value),xn(t,r,l.children,i),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Ni(r),f=vn(f),l=l(f),r.flags|=1,xn(t,r,l,i),r.child;case 14:return _y(t,r,r.type,r.pendingProps,i);case 15:return Ey(t,r,r.type,r.pendingProps,i);case 19:return Ry(t,r,i);case 31:return S1(t,r,i);case 22:return wy(t,r,i,r.pendingProps);case 24:return Ni(r),l=vn(Xt),t===null?(f=gf(),f===null&&(f=xt,m=ff(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:l,cache:f},yf(r),ma(r,Xt,f)):((t.lanes&i)!==0&&(vf(t,r),Xl(r,null,null,i),Yl()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ma(r,Xt,l)):(l=m.cache,ma(r,Xt,l),l!==f.cache&&hf(r,[Xt],i,!0))),xn(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function As(t){t.flags|=4}function Zf(t,r,i,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(av())t.flags|=8192;else throw ki=zu,pf}else t.flags&=-16777217}function Dy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Kv(r))if(av())t.flags|=8192;else throw ki=zu,pf}function rd(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?eo():536870912,t.lanes|=r,jo|=r)}function nc(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Et(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(r)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=i,r}function A1(t,r,i){var l=r.pendingProps;switch(of(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Et(r),null;case 3:return i=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ws(Xt),Re(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(xo(r)?As(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,cf())),Et(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(As(r),m!==null?(Et(r),Dy(r,m)):(Et(r),Zf(r,f,null,l,i))):m?m!==t.memoizedState?(As(r),Et(r),Dy(r,m)):(Et(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&As(r),Et(r),Zf(r,f,t,l,i)),null;case 27:if(st(r),i=Ae.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&As(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return Et(r),null}t=fe.current,xo(r)?h0(r):(t=zv(f,l,i),r.stateNode=t,As(r))}return Et(r),null;case 5:if(st(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&As(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return Et(r),null}if(m=fe.current,xo(r))h0(r);else{var _=vd(Ae.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[be]=r,m[Ie]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch(bn(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&As(r)}}return Et(r),Zf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,i),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&As(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(a(166));if(t=Ae.current,xo(r)){if(t=r.stateNode,i=r.memoizedProps,l=null,f=yn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[be]=r,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||kv(t.nodeValue,i)),t||fa(r,!0)}else t=vd(t).createTextNode(l),t[be]=r,r.stateNode=t}return Et(r),null;case 31:if(i=r.memoizedState,t===null||t.memoizedState!==null){if(l=xo(r),i!==null){if(t===null){if(!l)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[be]=r}else Ti(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),t=!1}else i=cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return r.flags&256?(Yn(r),r):(Yn(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Et(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=xo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[be]=r}else Ti(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),f=!1}else f=cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Yn(r),r):(Yn(r),null)}return Yn(r),(r.flags&128)!==0?(r.lanes=i,r):(i=l!==null,t=t!==null&&t.memoizedState!==null,i&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),i!==t&&i&&(r.child.flags|=8192),rd(r,r.updateQueue),Et(r),null);case 4:return Re(),t===null&&_m(r.stateNode.containerInfo),Et(r),null;case 10:return ws(r.type),Et(r),null;case 19:if(W(Bt),l=r.memoizedState,l===null)return Et(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)nc(l,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Fu(t),m!==null){for(r.flags|=128,nc(l,!1),t=m.updateQueue,r.updateQueue=t,rd(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)o0(i,t),i=i.sibling;return ce(Bt,Bt.current&1|2),Je&&_s(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&$t()>ld&&(r.flags|=128,f=!0,nc(l,!1),r.lanes=4194304)}else{if(!f)if(t=Fu(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,rd(r,t),nc(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Je)return Et(r),null}else 2*$t()-l.renderingStartTime>ld&&i!==536870912&&(r.flags|=128,f=!0,nc(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=$t(),t.sibling=null,i=Bt.current,ce(Bt,f?i&1|2:i&1),Je&&_s(r,l.treeForkCount),t):(Et(r),null);case 22:case 23:return Yn(r),Ef(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(i&536870912)!==0&&(r.flags&128)===0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),i=r.updateQueue,i!==null&&rd(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==i&&(r.flags|=2048),t!==null&&W(Ai),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),ws(Xt),Et(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function C1(t,r){switch(of(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ws(Xt),Re(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return st(r),null;case 31:if(r.memoizedState!==null){if(Yn(r),r.alternate===null)throw Error(a(340));Ti()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Yn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ti()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return W(Bt),null;case 4:return Re(),null;case 10:return ws(r.type),null;case 22:case 23:return Yn(r),Ef(),t!==null&&W(Ai),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ws(Xt),null;case 25:return null;default:return null}}function Oy(t,r){switch(of(r),r.tag){case 3:ws(Xt),Re();break;case 26:case 27:case 5:st(r);break;case 4:Re();break;case 31:r.memoizedState!==null&&Yn(r);break;case 13:Yn(r);break;case 19:W(Bt);break;case 10:ws(r.type);break;case 22:case 23:Yn(r),Ef(),t!==null&&W(Ai);break;case 24:ws(Xt)}}function rc(t,r){try{var i=r.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&t)===t){l=void 0;var m=i.create,_=i.inst;l=m(),_.destroy=l}i=i.next}while(i!==f)}}catch(w){ut(r,r.return,w)}}function ba(t,r,i){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,f=r;var O=i,Q=w;try{Q()}catch(ee){ut(f,O,ee)}}}l=l.next}while(l!==m)}}catch(ee){ut(r,r.return,ee)}}function My(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{S0(r,i)}catch(l){ut(t,t.return,l)}}}function Vy(t,r,i){i.props=ji(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){ut(t,r,l)}}function sc(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof i=="function"?t.refCleanup=i(l):i.current=l}}catch(f){ut(t,r,f)}}function rs(t,r){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){ut(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){ut(t,r,f)}else i.current=null}function Ly(t){var r=t.type,i=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){ut(t,t.return,f)}}function em(t,r,i){try{var l=t.stateNode;X1(l,t.type,i,r),l[Ie]=r}catch(f){ut(t,t.return,f)}}function Py(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Aa(t.type)||t.tag===4}function tm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Py(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Aa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nm(t,r,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Cr));else if(l!==4&&(l===27&&Aa(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(nm(t,r,i),t=t.sibling;t!==null;)nm(t,r,i),t=t.sibling}function sd(t,r,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(l!==4&&(l===27&&Aa(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(sd(t,r,i),t=t.sibling;t!==null;)sd(t,r,i),t=t.sibling}function Uy(t){var r=t.stateNode,i=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);bn(r,l,i),r[be]=t,r[Ie]=i}catch(m){ut(t,t.return,m)}}var Cs=!1,Zt=!1,rm=!1,zy=typeof WeakSet=="function"?WeakSet:Set,un=null;function k1(t,r){if(t=t.containerInfo,Tm=Sd,t=Wp(t),Yh(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var _=0,w=-1,O=-1,Q=0,ee=0,re=t,K=null;t:for(;;){for(var Z;re!==i||f!==0&&re.nodeType!==3||(w=_+f),re!==m||l!==0&&re.nodeType!==3||(O=_+l),re.nodeType===3&&(_+=re.nodeValue.length),(Z=re.firstChild)!==null;)K=re,re=Z;for(;;){if(re===t)break t;if(K===i&&++Q===f&&(w=_),K===m&&++ee===l&&(O=_),(Z=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=Z}i=w===-1||O===-1?null:{start:w,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(Sm={focusedElem:t,selectionRange:i},Sd=!1,un=r;un!==null;)if(r=un,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,un=t;else for(;un!==null;){switch(r=un,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,l=i.stateNode;try{var _e=ji(i.type,f);t=l.getSnapshotBeforeUpdate(_e,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(je){ut(i,i.return,je)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)Cm(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,un=t;break}un=r.return}}function By(t,r,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Is(t,i),l&4&&rc(5,i);break;case 1:if(Is(t,i),l&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(_){ut(i,i.return,_)}else{var f=ji(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ut(i,i.return,_)}}l&64&&My(i),l&512&&sc(i,i.return);break;case 3:if(Is(t,i),l&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{S0(t,r)}catch(_){ut(i,i.return,_)}}break;case 27:r===null&&l&4&&Uy(i);case 26:case 5:Is(t,i),r===null&&l&4&&Ly(i),l&512&&sc(i,i.return);break;case 12:Is(t,i);break;case 31:Is(t,i),l&4&&Fy(t,i);break;case 13:Is(t,i),l&4&&Gy(t,i),l&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=P1.bind(null,i),sT(t,i))));break;case 22:if(l=i.memoizedState!==null||Cs,!l){r=r!==null&&r.memoizedState!==null||Zt,f=Cs;var m=Zt;Cs=l,(Zt=r)&&!m?Rs(t,i,(i.subtreeFlags&8772)!==0):Is(t,i),Cs=f,Zt=m}break;case 30:break;default:Is(t,i)}}function qy(t){var r=t.alternate;r!==null&&(t.alternate=null,qy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ps(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var At=null,Vn=!1;function ks(t,r,i){for(i=i.child;i!==null;)Hy(t,r,i),i=i.sibling}function Hy(t,r,i){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Dn,i)}catch{}switch(i.tag){case 26:Zt||rs(i,r),ks(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Zt||rs(i,r);var l=At,f=Vn;Aa(i.type)&&(At=i.stateNode,Vn=!1),ks(t,r,i),fc(i.stateNode),At=l,Vn=f;break;case 5:Zt||rs(i,r);case 6:if(l=At,f=Vn,At=null,ks(t,r,i),At=l,Vn=f,At!==null)if(Vn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(i.stateNode)}catch(m){ut(i,r,m)}else try{At.removeChild(i.stateNode)}catch(m){ut(i,r,m)}break;case 18:At!==null&&(Vn?(t=At,Mv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),zo(t)):Mv(At,i.stateNode));break;case 4:l=At,f=Vn,At=i.stateNode.containerInfo,Vn=!0,ks(t,r,i),At=l,Vn=f;break;case 0:case 11:case 14:case 15:ba(2,i,r),Zt||ba(4,i,r),ks(t,r,i);break;case 1:Zt||(rs(i,r),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Vy(i,r,l)),ks(t,r,i);break;case 21:ks(t,r,i);break;case 22:Zt=(l=Zt)||i.memoizedState!==null,ks(t,r,i),Zt=l;break;default:ks(t,r,i)}}function Fy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zo(t)}catch(i){ut(r,r.return,i)}}}function Gy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zo(t)}catch(i){ut(r,r.return,i)}}function I1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new zy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new zy),r;default:throw Error(a(435,t.tag))}}function ad(t,r){var i=I1(t);r.forEach(function(l){if(!i.has(l)){i.add(l);var f=U1.bind(null,t,l);l.then(f,f)}})}function Ln(t,r){var i=r.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],m=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(Aa(w.type)){At=w.stateNode,Vn=!1;break e}break;case 5:At=w.stateNode,Vn=!1;break e;case 3:case 4:At=w.stateNode.containerInfo,Vn=!0;break e}w=w.return}if(At===null)throw Error(a(160));Hy(m,_,f),At=null,Vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$y(r,t),r=r.sibling}var Or=null;function $y(t,r){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ln(r,t),Pn(t),l&4&&(ba(3,t,t.return),rc(3,t),ba(5,t,t.return));break;case 1:Ln(r,t),Pn(t),l&512&&(Zt||i===null||rs(i,i.return)),l&64&&Cs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=Or;if(Ln(r,t),Pn(t),l&512&&(Zt||i===null||rs(i,i.return)),l&4){var m=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){e:{l=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[gn]||m[be]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),bn(m,l,i),m[be]=t,Kt(m),l=m;break e;case"link":var _=$v("link","href",f).get(l+(i.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){_.splice(w,1);break t}}m=f.createElement(l),bn(m,l,i),f.head.appendChild(m);break;case"meta":if(_=$v("meta","content",f).get(l+(i.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){_.splice(w,1);break t}}m=f.createElement(l),bn(m,l,i),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[be]=t,Kt(m),l=m}t.stateNode=l}else Qv(f,t.type,t.stateNode);else t.stateNode=Gv(f,l,t.memoizedProps);else m!==l?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,l===null?Qv(f,t.type,t.stateNode):Gv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&em(t,t.memoizedProps,i.memoizedProps)}break;case 27:Ln(r,t),Pn(t),l&512&&(Zt||i===null||rs(i,i.return)),i!==null&&l&4&&em(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Ln(r,t),Pn(t),l&512&&(Zt||i===null||rs(i,i.return)),t.flags&32){f=t.stateNode;try{Mn(f,"")}catch(_e){ut(t,t.return,_e)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,em(t,f,i!==null?i.memoizedProps:f)),l&1024&&(rm=!0);break;case 6:if(Ln(r,t),Pn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(_e){ut(t,t.return,_e)}}break;case 3:if(_d=null,f=Or,Or=xd(r.containerInfo),Ln(r,t),Or=f,Pn(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{zo(r.containerInfo)}catch(_e){ut(t,t.return,_e)}rm&&(rm=!1,Qy(t));break;case 4:l=Or,Or=xd(t.stateNode.containerInfo),Ln(r,t),Pn(t),Or=l;break;case 12:Ln(r,t),Pn(t);break;case 31:Ln(r,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ad(t,l)));break;case 13:Ln(r,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(od=$t()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ad(t,l)));break;case 22:f=t.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,Q=Cs,ee=Zt;if(Cs=Q||f,Zt=ee||O,Ln(r,t),Zt=ee,Cs=Q,Pn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||O||Cs||Zt||Di(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){O=i=r;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=O.stateNode;var re=O.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(_e){ut(O,O.return,_e)}}}else if(r.tag===6){if(i===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(_e){ut(O,O.return,_e)}}}else if(r.tag===18){if(i===null){O=r;try{var Z=O.stateNode;f?Vv(Z,!0):Vv(O.stateNode,!1)}catch(_e){ut(O,O.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,ad(t,i))));break;case 19:Ln(r,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ad(t,l)));break;case 30:break;case 21:break;default:Ln(r,t),Pn(t)}}function Pn(t){var r=t.flags;if(r&2){try{for(var i,l=t.return;l!==null;){if(Py(l)){i=l;break}l=l.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,m=tm(t);sd(t,m,f);break;case 5:var _=i.stateNode;i.flags&32&&(Mn(_,""),i.flags&=-33);var w=tm(t);sd(t,w,_);break;case 3:case 4:var O=i.stateNode.containerInfo,Q=tm(t);nm(t,Q,O);break;default:throw Error(a(161))}}catch(ee){ut(t,t.return,ee)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Qy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Qy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Is(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)By(t,r.alternate,r),r=r.sibling}function Di(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ba(4,r,r.return),Di(r);break;case 1:rs(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&Vy(r,r.return,i),Di(r);break;case 27:fc(r.stateNode);case 26:case 5:rs(r,r.return),Di(r);break;case 22:r.memoizedState===null&&Di(r);break;case 30:Di(r);break;default:Di(r)}t=t.sibling}}function Rs(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:Rs(f,m,i),rc(4,m);break;case 1:if(Rs(f,m,i),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){ut(l,l.return,Q)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)T0(O[f],w)}catch(Q){ut(l,l.return,Q)}}i&&_&64&&My(m),sc(m,m.return);break;case 27:Uy(m);case 26:case 5:Rs(f,m,i),i&&l===null&&_&4&&Ly(m),sc(m,m.return);break;case 12:Rs(f,m,i);break;case 31:Rs(f,m,i),i&&_&4&&Fy(f,m);break;case 13:Rs(f,m,i),i&&_&4&&Gy(f,m);break;case 22:m.memoizedState===null&&Rs(f,m,i),sc(m,m.return);break;case 30:break;default:Rs(f,m,i)}r=r.sibling}}function sm(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Fl(i))}function am(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Fl(t))}function Mr(t,r,i,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ky(t,r,i,l),r=r.sibling}function Ky(t,r,i,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Mr(t,r,i,l),f&2048&&rc(9,r);break;case 1:Mr(t,r,i,l);break;case 3:Mr(t,r,i,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Fl(t)));break;case 12:if(f&2048){Mr(t,r,i,l),t=r.stateNode;try{var m=r.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){ut(r,r.return,O)}}else Mr(t,r,i,l);break;case 31:Mr(t,r,i,l);break;case 13:Mr(t,r,i,l);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?Mr(t,r,i,l):ac(t,r):m._visibility&2?Mr(t,r,i,l):(m._visibility|=2,ko(t,r,i,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&sm(_,r);break;case 24:Mr(t,r,i,l),f&2048&&am(r.alternate,r);break;default:Mr(t,r,i,l)}}function ko(t,r,i,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,_=r,w=i,O=l,Q=_.flags;switch(_.tag){case 0:case 11:case 15:ko(m,_,w,O,f),rc(8,_);break;case 23:break;case 22:var ee=_.stateNode;_.memoizedState!==null?ee._visibility&2?ko(m,_,w,O,f):ac(m,_):(ee._visibility|=2,ko(m,_,w,O,f)),f&&Q&2048&&sm(_.alternate,_);break;case 24:ko(m,_,w,O,f),f&&Q&2048&&am(_.alternate,_);break;default:ko(m,_,w,O,f)}r=r.sibling}}function ac(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,l=r,f=l.flags;switch(l.tag){case 22:ac(i,l),f&2048&&sm(l.alternate,l);break;case 24:ac(i,l),f&2048&&am(l.alternate,l);break;default:ac(i,l)}r=r.sibling}}var ic=8192;function Io(t,r,i){if(t.subtreeFlags&ic)for(t=t.child;t!==null;)Yy(t,r,i),t=t.sibling}function Yy(t,r,i){switch(t.tag){case 26:Io(t,r,i),t.flags&ic&&t.memoizedState!==null&&pT(i,Or,t.memoizedState,t.memoizedProps);break;case 5:Io(t,r,i);break;case 3:case 4:var l=Or;Or=xd(t.stateNode.containerInfo),Io(t,r,i),Or=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ic,ic=16777216,Io(t,r,i),ic=l):Io(t,r,i));break;default:Io(t,r,i)}}function Xy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function oc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];un=l,Wy(l,t)}Xy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jy(t),t=t.sibling}function Jy(t){switch(t.tag){case 0:case 11:case 15:oc(t),t.flags&2048&&ba(9,t,t.return);break;case 3:oc(t);break;case 12:oc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,id(t)):oc(t);break;default:oc(t)}}function id(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];un=l,Wy(l,t)}Xy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ba(8,r,r.return),id(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,id(r));break;default:id(r)}t=t.sibling}}function Wy(t,r){for(;un!==null;){var i=un;switch(i.tag){case 0:case 11:case 15:ba(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Fl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,un=l;else e:for(i=t;un!==null;){l=un;var f=l.sibling,m=l.return;if(qy(l),l===i){un=null;break e}if(f!==null){f.return=m,un=f;break e}un=m}}}var R1={getCacheForType:function(t){var r=vn(Xt),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i},cacheSignal:function(){return vn(Xt).controller.signal}},j1=typeof WeakMap=="function"?WeakMap:Map,it=0,xt=null,He=null,$e=0,ct=0,Xn=null,_a=!1,Ro=!1,im=!1,js=0,Ot=0,Ea=0,Oi=0,om=0,Jn=0,jo=0,lc=null,Un=null,lm=!1,od=0,Zy=0,ld=1/0,cd=null,wa=null,on=0,Ta=null,Do=null,Ds=0,cm=0,um=null,ev=null,cc=0,dm=null;function Wn(){return(it&2)!==0&&$e!==0?$e&-$e:X.T!==null?ym():ci()}function tv(){if(Jn===0)if(($e&536870912)===0||Je){var t=qr;qr<<=1,(qr&3932160)===0&&(qr=262144),Jn=t}else Jn=536870912;return t=Kn.current,t!==null&&(t.flags|=32),Jn}function zn(t,r,i){(t===xt&&(ct===2||ct===9)||t.cancelPendingCommit!==null)&&(Oo(t,0),Sa(t,$e,Jn,!1)),gs(t,i),((it&2)===0||t!==xt)&&(t===xt&&((it&2)===0&&(Oi|=i),Ot===4&&Sa(t,$e,Jn,!1)),ss(t))}function nv(t,r,i){if((it&6)!==0)throw Error(a(327));var l=!i&&(r&127)===0&&(r&t.expiredLanes)===0||qn(t,r),f=l?M1(t,r):fm(t,r,!0),m=l;do{if(f===0){Ro&&!l&&Sa(t,r,0,!1);break}else{if(i=t.current.alternate,m&&!D1(i)){f=fm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var w=t;f=lc;var O=w.current.memoizedState.isDehydrated;if(O&&(Oo(w,_).flags|=256),_=fm(w,_,!1),_!==2){if(im&&!O){w.errorRecoveryDisabledLanes|=m,Oi|=m,f=4;break e}m=Un,Un=f,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Oo(t,0),Sa(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Sa(l,r,Jn,!_a);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=od+300-$t(),10<f)){if(Sa(l,r,Jn,!_a),lr(l,0,!0)!==0)break e;Ds=r,l.timeoutHandle=Dv(rv.bind(null,l,i,Un,cd,lm,r,Jn,Oi,jo,_a,m,"Throttled",-0,0),f);break e}rv(l,i,Un,cd,lm,r,Jn,Oi,jo,_a,m,null,-0,0)}}break}while(!0);ss(t)}function rv(t,r,i,l,f,m,_,w,O,Q,ee,re,K,Z){if(t.timeoutHandle=-1,re=r.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cr},Yy(r,m,re);var _e=(m&62914560)===m?od-$t():(m&4194048)===m?Zy-$t():0;if(_e=yT(re,_e),_e!==null){Ds=m,t.cancelPendingCommit=_e(dv.bind(null,t,r,m,i,l,f,_,w,O,ee,re,null,K,Z)),Sa(t,m,_,!Q);return}}dv(t,r,m,i,l,f,_,w,O)}function D1(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],m=f.getSnapshot;f=f.value;try{if(!$n(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Sa(t,r,i,l){r&=~om,r&=~Oi,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-kt(f),_=1<<m;l[m]=-1,f&=~_}i!==0&&Hr(t,i,r)}function ud(){return(it&6)===0?(uc(0),!1):!0}function hm(){if(He!==null){if(ct===0)var t=He.return;else t=He,Es=Si=null,Cf(t),To=null,$l=0,t=He;for(;t!==null;)Oy(t.alternate,t),t=t.return;He=null}}function Oo(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,Z1(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Ds=0,hm(),xt=t,He=i=bs(t.current,null),$e=r,ct=0,Xn=null,_a=!1,Ro=qn(t,r),im=!1,jo=Jn=om=Oi=Ea=Ot=0,Un=lc=null,lm=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-kt(l),m=1<<f;r|=t[f],l&=~m}return js=r,Ru(),i}function sv(t,r){Ue=null,X.H=ec,r===wo||r===Uu?(r=b0(),ct=3):r===pf?(r=b0(),ct=4):ct=r===Ff?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Xn=r,He===null&&(Ot=1,Zu(t,pr(r,t.current)))}function av(){var t=Kn.current;return t===null?!0:($e&4194048)===$e?br===null:($e&62914560)===$e||($e&536870912)!==0?t===br:!1}function iv(){var t=X.H;return X.H=ec,t===null?ec:t}function ov(){var t=X.A;return X.A=R1,t}function dd(){Ot=4,_a||($e&4194048)!==$e&&Kn.current!==null||(Ro=!0),(Ea&134217727)===0&&(Oi&134217727)===0||xt===null||Sa(xt,$e,Jn,!1)}function fm(t,r,i){var l=it;it|=2;var f=iv(),m=ov();(xt!==t||$e!==r)&&(cd=null,Oo(t,r)),r=!1;var _=Ot;e:do try{if(ct!==0&&He!==null){var w=He,O=Xn;switch(ct){case 8:hm(),_=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(r=!0);var Q=ct;if(ct=0,Xn=null,Mo(t,w,O,Q),i&&Ro){_=0;break e}break;default:Q=ct,ct=0,Xn=null,Mo(t,w,O,Q)}}O1(),_=Ot;break}catch(ee){sv(t,ee)}while(!0);return r&&t.shellSuspendCounter++,Es=Si=null,it=l,X.H=f,X.A=m,He===null&&(xt=null,$e=0,Ru()),_}function O1(){for(;He!==null;)lv(He)}function M1(t,r){var i=it;it|=2;var l=iv(),f=ov();xt!==t||$e!==r?(cd=null,ld=$t()+500,Oo(t,r)):Ro=qn(t,r);e:do try{if(ct!==0&&He!==null){r=He;var m=Xn;t:switch(ct){case 1:ct=0,Xn=null,Mo(t,r,m,1);break;case 2:case 9:if(v0(m)){ct=0,Xn=null,cv(r);break}r=function(){ct!==2&&ct!==9||xt!==t||(ct=7),ss(t)},m.then(r,r);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:v0(m)?(ct=0,Xn=null,cv(r)):(ct=0,Xn=null,Mo(t,r,m,7));break;case 5:var _=null;switch(He.tag){case 26:_=He.memoizedState;case 5:case 27:var w=He;if(_?Kv(_):w.stateNode.complete){ct=0,Xn=null;var O=w.sibling;if(O!==null)He=O;else{var Q=w.return;Q!==null?(He=Q,hd(Q)):He=null}break t}}ct=0,Xn=null,Mo(t,r,m,5);break;case 6:ct=0,Xn=null,Mo(t,r,m,6);break;case 8:hm(),Ot=6;break e;default:throw Error(a(462))}}V1();break}catch(ee){sv(t,ee)}while(!0);return Es=Si=null,X.H=l,X.A=f,it=i,He!==null?0:(xt=null,$e=0,Ru(),Ot)}function V1(){for(;He!==null&&!Xs();)lv(He)}function lv(t){var r=jy(t.alternate,t,js);t.memoizedProps=t.pendingProps,r===null?hd(t):He=r}function cv(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=Ny(i,r,r.pendingProps,r.type,void 0,$e);break;case 11:r=Ny(i,r,r.pendingProps,r.type.render,r.ref,$e);break;case 5:Cf(r);default:Oy(i,r),r=He=o0(r,js),r=jy(i,r,js)}t.memoizedProps=t.pendingProps,r===null?hd(t):He=r}function Mo(t,r,i,l){Es=Si=null,Cf(r),To=null,$l=0;var f=r.return;try{if(T1(t,f,r,i,$e)){Ot=1,Zu(t,pr(i,t.current)),He=null;return}}catch(m){if(f!==null)throw He=f,m;Ot=1,Zu(t,pr(i,t.current)),He=null;return}r.flags&32768?(Je||l===1?t=!0:Ro||($e&536870912)!==0?t=!1:(_a=t=!0,(l===2||l===9||l===3||l===6)&&(l=Kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),uv(r,t)):hd(r)}function hd(t){var r=t;do{if((r.flags&32768)!==0){uv(r,_a);return}t=r.return;var i=A1(r.alternate,r,js);if(i!==null){He=i;return}if(r=r.sibling,r!==null){He=r;return}He=r=t}while(r!==null);Ot===0&&(Ot=5)}function uv(t,r){do{var i=C1(t.alternate,t);if(i!==null){i.flags&=32767,He=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){He=t;return}He=t=i}while(t!==null);Ot=6,He=null}function dv(t,r,i,l,f,m,_,w,O){t.cancelPendingCommit=null;do fd();while(on!==0);if((it&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=ef,El(t,i,m,_,w,O),t===xt&&(He=xt=null,$e=0),Do=r,Ta=t,Ds=i,cm=m,um=f,ev=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,z1(Br,function(){return pv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=le.p,le.p=2,_=it,it|=4;try{k1(t,r,i)}finally{it=_,le.p=f,X.T=l}}on=1,hv(),fv(),mv()}}function hv(){if(on===1){on=0;var t=Ta,r=Do,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var l=le.p;le.p=2;var f=it;it|=4;try{$y(r,t);var m=Sm,_=Wp(t.containerInfo),w=m.focusedElem,O=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&Jp(w.ownerDocument.documentElement,w)){if(O!==null&&Yh(w)){var Q=O.start,ee=O.end;if(ee===void 0&&(ee=Q),"selectionStart"in w)w.selectionStart=Q,w.selectionEnd=Math.min(ee,w.value.length);else{var re=w.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var Z=K.getSelection(),_e=w.textContent.length,je=Math.min(O.start,_e),gt=O.end===void 0?je:Math.min(O.end,_e);!Z.extend&&je>gt&&(_=gt,gt=je,je=_);var H=Xp(w,je),P=Xp(w,gt);if(H&&P&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var $=re.createRange();$.setStart(H.node,H.offset),Z.removeAllRanges(),je>gt?(Z.addRange($),Z.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),Z.addRange($))}}}}for(re=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var ne=re[w];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Sd=!!Tm,Sm=Tm=null}finally{it=f,le.p=l,X.T=i}}t.current=r,on=2}}function fv(){if(on===2){on=0;var t=Ta,r=Do,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var l=le.p;le.p=2;var f=it;it|=4;try{By(t,r.alternate,r)}finally{it=f,le.p=l,X.T=i}}on=3}}function mv(){if(on===4||on===3){on=0,oi();var t=Ta,r=Do,i=Ds,l=ev;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?on=5:(on=0,Do=Ta=null,gv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(wa=null),ur(i),r=r.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Dn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,f=le.p,le.p=2,X.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];m(w.value,{componentStack:w.stack})}}finally{X.T=r,le.p=f}}(Ds&3)!==0&&fd(),ss(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===dm?cc++:(cc=0,dm=t):cc=0,uc(0)}}function gv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Fl(r)))}function fd(){return hv(),fv(),mv(),pv()}function pv(){if(on!==5)return!1;var t=Ta,r=cm;cm=0;var i=ur(Ds),l=X.T,f=le.p;try{le.p=32>i?32:i,X.T=null,i=um,um=null;var m=Ta,_=Ds;if(on=0,Do=Ta=null,Ds=0,(it&6)!==0)throw Error(a(331));var w=it;if(it|=4,Jy(m.current),Ky(m,m.current,_,i),it=w,uc(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Dn,m)}catch{}return!0}finally{le.p=f,X.T=l,gv(t,r)}}function yv(t,r,i){r=pr(i,r),r=Hf(t.stateNode,r,2),t=ya(t,r,2),t!==null&&(gs(t,2),ss(t))}function ut(t,r,i){if(t.tag===3)yv(t,t,i);else for(;r!==null;){if(r.tag===3){yv(r,t,i);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wa===null||!wa.has(l))){t=pr(i,t),i=vy(2),l=ya(r,i,2),l!==null&&(xy(i,l,r,t),gs(l,2),ss(l));break}}r=r.return}}function mm(t,r,i){var l=t.pingCache;if(l===null){l=t.pingCache=new j1;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(i)||(im=!0,f.add(i),t=L1.bind(null,t,r,i),r.then(t,t))}function L1(t,r,i){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,xt===t&&($e&i)===i&&(Ot===4||Ot===3&&($e&62914560)===$e&&300>$t()-od?(it&2)===0&&Oo(t,0):om|=i,jo===$e&&(jo=0)),ss(t)}function vv(t,r){r===0&&(r=eo()),t=Ei(t,r),t!==null&&(gs(t,r),ss(t))}function P1(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),vv(t,i)}function U1(t,r){var i=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(r),vv(t,i)}function z1(t,r){return bt(t,r)}var md=null,Vo=null,gm=!1,gd=!1,pm=!1,Na=0;function ss(t){t!==Vo&&t.next===null&&(Vo===null?md=Vo=t:Vo=Vo.next=t),gd=!0,gm||(gm=!0,q1())}function uc(t,r){if(!pm&&gd){pm=!0;do for(var i=!1,l=md;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-kt(42|t)+1)-1,m&=f&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Ev(l,m))}else m=$e,m=lr(l,l===xt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||qn(l,m)||(i=!0,Ev(l,m));l=l.next}while(i);pm=!1}}function B1(){xv()}function xv(){gd=gm=!1;var t=0;Na!==0&&W1()&&(t=Na);for(var r=$t(),i=null,l=md;l!==null;){var f=l.next,m=bv(l,r);m===0?(l.next=null,i===null?md=f:i.next=f,f===null&&(Vo=i)):(i=l,(t!==0||(m&3)!==0)&&(gd=!0)),l=f}on!==0&&on!==5||uc(t),Na!==0&&(Na=0)}function bv(t,r){for(var i=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-kt(m),w=1<<_,O=f[_];O===-1?((w&i)===0||(w&l)!==0)&&(f[_]=_l(w,r)):O<=r&&(t.expiredLanes|=w),m&=~w}if(r=xt,i=$e,i=lr(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,i===0||t===r&&(ct===2||ct===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Sr(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||qn(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(l!==null&&Sr(l),ur(i)){case 2:case 8:i=li;break;case 32:i=Br;break;case 268435456:i=Ws;break;default:i=Br}return l=_v.bind(null,t),i=bt(i,l),t.callbackPriority=r,t.callbackNode=i,r}return l!==null&&l!==null&&Sr(l),t.callbackPriority=2,t.callbackNode=null,2}function _v(t,r){if(on!==0&&on!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(fd()&&t.callbackNode!==i)return null;var l=$e;return l=lr(t,t===xt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(nv(t,l,r),bv(t,$t()),t.callbackNode!=null&&t.callbackNode===i?_v.bind(null,t):null)}function Ev(t,r){if(fd())return null;nv(t,r,!0)}function q1(){eT(function(){(it&6)!==0?bt(Js,B1):xv()})}function ym(){if(Na===0){var t=_o;t===0&&(t=ir,ir<<=1,(ir&261888)===0&&(ir=256)),Na=t}return Na}function wv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ao(""+t)}function Tv(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function H1(t,r,i,l,f){if(r==="submit"&&i&&i.stateNode===f){var m=wv((f[Ie]||null).action),_=l.submitter;_&&(r=(r=_[Ie]||null)?wv(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var w=new Jr("action","action",null,l,f);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Na!==0){var O=_?Tv(f,_):new FormData(f);Lf(i,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(w.preventDefault(),O=_?Tv(f,_):new FormData(f),Lf(i,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var vm=0;vm<Zh.length;vm++){var xm=Zh[vm],F1=xm.toLowerCase(),G1=xm[0].toUpperCase()+xm.slice(1);Dr(F1,"on"+G1)}Dr(t0,"onAnimationEnd"),Dr(n0,"onAnimationIteration"),Dr(r0,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(o1,"onTransitionRun"),Dr(l1,"onTransitionStart"),Dr(c1,"onTransitionCancel"),Dr(s0,"onTransitionEnd"),Qr("onMouseEnter",["mouseout","mouseover"]),Qr("onMouseLeave",["mouseout","mouseover"]),Qr("onPointerEnter",["pointerout","pointerover"]),Qr("onPointerLeave",["pointerout","pointerover"]),$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$r("onBeforeInput",["compositionend","keypress","textInput","paste"]),$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function Sv(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var _=l.length-1;0<=_;_--){var w=l[_],O=w.instance,Q=w.currentTarget;if(w=w.listener,O!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=Q;try{m(f)}catch(ee){Iu(ee)}f.currentTarget=null,m=O}else for(_=0;_<l.length;_++){if(w=l[_],O=w.instance,Q=w.currentTarget,w=w.listener,O!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=Q;try{m(f)}catch(ee){Iu(ee)}f.currentTarget=null,m=O}}}}function Fe(t,r){var i=r[Nr];i===void 0&&(i=r[Nr]=new Set);var l=t+"__bubble";i.has(l)||(Nv(r,t,2,!1),i.add(l))}function bm(t,r,i){var l=0;r&&(l|=4),Nv(i,t,l,r)}var pd="_reactListening"+Math.random().toString(36).slice(2);function _m(t){if(!t[pd]){t[pd]=!0,wl.forEach(function(i){i!=="selectionchange"&&($1.has(i)||bm(i,!1,t),bm(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[pd]||(r[pd]=!0,bm("selectionchange",!1,r))}}function Nv(t,r,i,l){switch(tx(r)){case 2:var f=bT;break;case 8:f=_T;break;default:f=Vm}i=f.bind(null,r,i,t),f=void 0,!mi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,i,{capture:!0,passive:f}):t.addEventListener(r,i,!0):f!==void 0?t.addEventListener(r,i,{passive:f}):t.addEventListener(r,i,!1)}function Em(t,r,i,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;w!==null;){if(_=Hn(w),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=m=_;continue e}w=w.parentNode}}l=l.return}oa(function(){var Q=m,ee=hr(i),re=[];e:{var K=a0.get(t);if(K!==void 0){var Z=Jr,_e=t;switch(t){case"keypress":if(pi(i)===0)break e;case"keydown":case"keyup":Z=Au;break;case"focusin":_e="focus",Z=vi;break;case"focusout":_e="blur",Z=vi;break;case"beforeblur":case"afterblur":Z=vi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=v;break;case t0:case n0:case r0:Z=bu;break;case s0:Z=S;break;case"scroll":case"scrollend":Z=Ml;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=_u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=xs;break;case"toggle":case"beforetoggle":Z=Pe}var je=(r&4)!==0,gt=!je&&(t==="scroll"||t==="scrollend"),H=je?K!==null?K+"Capture":null:K;je=[];for(var P=Q,$;P!==null;){var ne=P;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||H===null||(ne=kr(P,H),ne!=null&&je.push(hc(P,ne,$))),gt)break;P=P.return}0<je.length&&(K=new Z(K,_e,null,i,ee),re.push({event:K,listeners:je}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",K&&i!==jl&&(_e=i.relatedTarget||i.fromElement)&&(Hn(_e)||_e[Rt]))break e;if((Z||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(_e=i.relatedTarget||i.toElement,Z=Q,_e=_e?Hn(_e):null,_e!==null&&(gt=c(_e),je=_e.tag,_e!==gt||je!==5&&je!==27&&je!==6)&&(_e=null)):(Z=null,_e=Q),Z!==_e)){if(je=Vl,ne="onMouseLeave",H="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(je=xs,ne="onPointerLeave",H="onPointerEnter",P="pointer"),gt=Z==null?K:Fn(Z),$=_e==null?K:Fn(_e),K=new je(ne,P+"leave",Z,i,ee),K.target=gt,K.relatedTarget=$,ne=null,Hn(ee)===Q&&(je=new je(H,P+"enter",_e,i,ee),je.target=$,je.relatedTarget=gt,ne=je),gt=ne,Z&&_e)t:{for(je=Q1,H=Z,P=_e,$=0,ne=H;ne;ne=je(ne))$++;ne=0;for(var Ne=P;Ne;Ne=je(Ne))ne++;for(;0<$-ne;)H=je(H),$--;for(;0<ne-$;)P=je(P),ne--;for(;$--;){if(H===P||P!==null&&H===P.alternate){je=H;break t}H=je(H),P=je(P)}je=null}else je=null;Z!==null&&Av(re,K,Z,je,!1),_e!==null&&gt!==null&&Av(re,gt,_e,je,!0)}}e:{if(K=Q?Fn(Q):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var nt=Fp;else if(qp(K))if(Gp)nt=s1;else{nt=n1;var we=t1}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Q&&so(Q.elementType)&&(nt=Fp):nt=r1;if(nt&&(nt=nt(t,Q))){Hp(re,nt,i,ee);break e}we&&we(t,K,Q),t==="focusout"&&Q&&K.type==="number"&&Q.memoizedProps.value!=null&&kl(K,"number",K.value)}switch(we=Q?Fn(Q):window,t){case"focusin":(qp(we)||we.contentEditable==="true")&&(fo=we,Xh=Q,Bl=null);break;case"focusout":Bl=Xh=fo=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,Zp(re,i,ee);break;case"selectionchange":if(i1)break;case"keydown":case"keyup":Zp(re,i,ee)}var qe;if(at)e:{switch(t){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else ho?xi(t,i)&&(Qe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Qe="onCompositionStart");Qe&&(es&&i.locale!=="ko"&&(ho||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&ho&&(qe=Ol()):(Xr=ee,Dl="value"in Xr?Xr.value:Xr.textContent,ho=!0)),we=yd(Q,Qe),0<we.length&&(Qe=new Zr(Qe,t,null,i,ee),re.push({event:Qe,listeners:we}),qe?Qe.data=qe:(qe=uo(i),qe!==null&&(Qe.data=qe)))),(qe=mr?Jw(t,i):Ww(t,i))&&(Qe=yd(Q,"onBeforeInput"),0<Qe.length&&(we=new Zr("onBeforeInput","beforeinput",null,i,ee),re.push({event:we,listeners:Qe}),we.data=qe)),H1(re,t,Q,i,ee)}Sv(re,r)})}function hc(t,r,i){return{instance:t,listener:r,currentTarget:i}}function yd(t,r){for(var i=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=kr(t,i),f!=null&&l.unshift(hc(t,f,m)),f=kr(t,r),f!=null&&l.push(hc(t,f,m))),t.tag===3)return l;t=t.return}return[]}function Q1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Av(t,r,i,l,f){for(var m=r._reactName,_=[];i!==null&&i!==l;){var w=i,O=w.alternate,Q=w.stateNode;if(w=w.tag,O!==null&&O===l)break;w!==5&&w!==26&&w!==27||Q===null||(O=Q,f?(Q=kr(i,m),Q!=null&&_.unshift(hc(i,Q,O))):f||(Q=kr(i,m),Q!=null&&_.push(hc(i,Q,O)))),i=i.return}_.length!==0&&t.push({event:r,listeners:_})}var K1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function Cv(t){return(typeof t=="string"?t:""+t).replace(K1,`
`).replace(Y1,"")}function kv(t,r){return r=Cv(r),Cv(t)===r}function mt(t,r,i,l,f,m){switch(i){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Mn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Mn(t,""+l);break;case"className":Gn(t,"class",l);break;case"tabIndex":Gn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(t,i,l);break;case"style":Rl(t,l,m);break;case"data":if(r!=="object"){Gn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=ao(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&mt(t,r,"name",f.name,f,null),mt(t,r,"formEncType",f.formEncType,f,null),mt(t,r,"formMethod",f.formMethod,f,null),mt(t,r,"formTarget",f.formTarget,f,null)):(mt(t,r,"encType",f.encType,f,null),mt(t,r,"method",f.method,f,null),mt(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=ao(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=Cr);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=ao(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),no(t,"popover",l);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":no(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=yu.get(i)||i,no(t,i,l))}}function wm(t,r,i,l,f,m){switch(i){case"style":Rl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"children":typeof l=="string"?Mn(t,l):(typeof l=="number"||typeof l=="bigint")&&Mn(t,""+l);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=t[Ie]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,l,f);break e}i in t?t[i]=l:l===!0?t.setAttribute(i,""):no(t,i,l)}}}function bn(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var l=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var _=i[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:mt(t,r,m,_,i,null)}}f&&mt(t,r,"srcSet",i.srcSet,i,null),l&&mt(t,r,"src",i.src,i,null);return;case"input":Fe("invalid",t);var w=m=_=f=null,O=null,Q=null;for(l in i)if(i.hasOwnProperty(l)){var ee=i[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":_=ee;break;case"checked":O=ee;break;case"defaultChecked":Q=ee;break;case"value":m=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,r));break;default:mt(t,r,l,ee,i,null)}}mu(t,m,w,O,Q,_,f,!1);return;case"select":Fe("invalid",t),l=_=m=null;for(f in i)if(i.hasOwnProperty(f)&&(w=i[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:mt(t,r,f,w,i,null)}r=m,i=_,t.multiple=!!l,r!=null?ra(t,!!l,r,!1):i!=null&&ra(t,!!l,i,!0);return;case"textarea":Fe("invalid",t),m=f=l=null;for(_ in i)if(i.hasOwnProperty(_)&&(w=i[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:mt(t,r,_,w,i,null)}sa(t,l,f,m);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(l=i[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:mt(t,r,O,l,i,null)}return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(l=0;l<dc.length;l++)Fe(dc[l],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in i)if(i.hasOwnProperty(Q)&&(l=i[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:mt(t,r,Q,l,i,null)}return;default:if(so(r)){for(ee in i)i.hasOwnProperty(ee)&&(l=i[ee],l!==void 0&&wm(t,r,ee,l,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(l=i[w],l!=null&&mt(t,r,w,l,i,null))}function X1(t,r,i,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,w=null,O=null,Q=null,ee=null;for(Z in i){var re=i[Z];if(i.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=re;default:l.hasOwnProperty(Z)||mt(t,r,Z,null,l,re)}}for(var K in l){var Z=l[K];if(re=i[K],l.hasOwnProperty(K)&&(Z!=null||re!=null))switch(K){case"type":m=Z;break;case"name":f=Z;break;case"checked":Q=Z;break;case"defaultChecked":ee=Z;break;case"value":_=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,r));break;default:Z!==re&&mt(t,r,K,Z,l,re)}}ro(t,_,w,O,Q,ee,m,f);return;case"select":Z=_=w=K=null;for(m in i)if(O=i[m],i.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Z=O;default:l.hasOwnProperty(m)||mt(t,r,m,null,l,O)}for(f in l)if(m=l[f],O=i[f],l.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":K=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==O&&mt(t,r,f,m,l,O)}r=w,i=_,l=Z,K!=null?ra(t,!!i,K,!1):!!l!=!!i&&(r!=null?ra(t,!!i,r,!0):ra(t,!!i,i?[]:"",!1));return;case"textarea":Z=K=null;for(w in i)if(f=i[w],i.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:mt(t,r,w,null,l,f)}for(_ in l)if(f=l[_],m=i[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":K=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&mt(t,r,_,f,l,m)}gu(t,K,Z);return;case"option":for(var _e in i)if(K=i[_e],i.hasOwnProperty(_e)&&K!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:mt(t,r,_e,null,l,K)}for(O in l)if(K=l[O],Z=i[O],l.hasOwnProperty(O)&&K!==Z&&(K!=null||Z!=null))switch(O){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:mt(t,r,O,K,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in i)K=i[je],i.hasOwnProperty(je)&&K!=null&&!l.hasOwnProperty(je)&&mt(t,r,je,null,l,K);for(Q in l)if(K=l[Q],Z=i[Q],l.hasOwnProperty(Q)&&K!==Z&&(K!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,r));break;default:mt(t,r,Q,K,l,Z)}return;default:if(so(r)){for(var gt in i)K=i[gt],i.hasOwnProperty(gt)&&K!==void 0&&!l.hasOwnProperty(gt)&&wm(t,r,gt,void 0,l,K);for(ee in l)K=l[ee],Z=i[ee],!l.hasOwnProperty(ee)||K===Z||K===void 0&&Z===void 0||wm(t,r,ee,K,l,Z);return}}for(var H in i)K=i[H],i.hasOwnProperty(H)&&K!=null&&!l.hasOwnProperty(H)&&mt(t,r,H,null,l,K);for(re in l)K=l[re],Z=i[re],!l.hasOwnProperty(re)||K===Z||K==null&&Z==null||mt(t,r,re,K,l,Z)}function Iv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var f=i[l],m=f.transferSize,_=f.initiatorType,w=f.duration;if(m&&w&&Iv(_)){for(_=0,w=f.responseEnd,l+=1;l<i.length;l++){var O=i[l],Q=O.startTime;if(Q>w)break;var ee=O.transferSize,re=O.initiatorType;ee&&Iv(re)&&(O=O.responseEnd,_+=ee*(O<w?1:(w-Q)/(O-Q)))}if(--l,r+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Tm=null,Sm=null;function vd(t){return t.nodeType===9?t:t.ownerDocument}function Rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Nm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Am=null;function W1(){var t=window.event;return t&&t.type==="popstate"?t===Am?!1:(Am=t,!0):(Am=null,!1)}var Dv=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,eT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(t){return Ov.resolve(null).then(t).catch(tT)}:Dv;function tT(t){setTimeout(function(){throw t})}function Aa(t){return t==="head"}function Mv(t,r){var i=r,l=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(l===0){t.removeChild(f),zo(r);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")fc(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,fc(i);for(var m=i.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[gn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=_}}else i==="body"&&fc(t.ownerDocument.body);i=f}while(i);zo(r)}function Vv(t,r){var i=t;t=0;do{var l=i.nextSibling;if(i.nodeType===1?r?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(r?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=l}while(i)}function Cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Cm(i),ps(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function nT(t,r,i,l){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[gn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=_r(t.nextSibling),t===null)break}return null}function rT(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=_r(t.nextSibling),t===null))return null;return t}function Lv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=_r(t.nextSibling),t===null))return null;return t}function km(t){return t.data==="$?"||t.data==="$~"}function Im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function sT(t,r){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||i.readyState!=="loading")r();else{var l=function(){r(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function _r(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Rm=null;function Pv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(r===0)return _r(t.nextSibling);r--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||r++}t=t.nextSibling}return null}function Uv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(r===0)return t;r--}else i!=="/$"&&i!=="/&"||r++}t=t.previousSibling}return null}function zv(t,r,i){switch(r=vd(i),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function fc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ps(t)}var Er=new Map,Bv=new Set;function xd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Os=le.d;le.d={f:aT,r:iT,D:oT,C:lT,L:cT,m:uT,X:hT,S:dT,M:fT};function aT(){var t=Os.f(),r=ud();return t||r}function iT(t){var r=dr(t);r!==null&&r.tag===5&&r.type==="form"?sy(r):Os.r(t)}var Lo=typeof document>"u"?null:document;function qv(t,r,i){var l=Lo;if(l&&typeof r=="string"&&r){var f=On(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Bv.has(f)||(Bv.add(f),t={rel:t,crossOrigin:i,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),bn(r,"link",t),Kt(r),l.head.appendChild(r)))}}function oT(t){Os.D(t),qv("dns-prefetch",t,null)}function lT(t,r){Os.C(t,r),qv("preconnect",t,r)}function cT(t,r,i){Os.L(t,r,i);var l=Lo;if(l&&t&&r){var f='link[rel="preload"][as="'+On(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+On(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+On(i.imageSizes)+'"]')):f+='[href="'+On(t)+'"]';var m=f;switch(r){case"style":m=Po(t);break;case"script":m=Uo(t)}Er.has(m)||(t=b({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),Er.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(mc(m))||r==="script"&&l.querySelector(gc(m))||(r=l.createElement("link"),bn(r,"link",t),Kt(r),l.head.appendChild(r)))}}function uT(t,r){Os.m(t,r);var i=Lo;if(i&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Uo(t)}if(!Er.has(m)&&(t=b({rel:"modulepreload",href:t},r),Er.set(m,t),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(gc(m)))return}l=i.createElement("link"),bn(l,"link",t),Kt(l),i.head.appendChild(l)}}}function dT(t,r,i){Os.S(t,r,i);var l=Lo;if(l&&t){var f=Gr(l).hoistableStyles,m=Po(t);r=r||"default";var _=f.get(m);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(mc(m)))w.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":r},i),(i=Er.get(m))&&jm(t,i);var O=_=l.createElement("link");Kt(O),bn(O,"link",t),O._p=new Promise(function(Q,ee){O.onload=Q,O.onerror=ee}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,bd(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:w},f.set(m,_)}}}function hT(t,r){Os.X(t,r);var i=Lo;if(i&&t){var l=Gr(i).hoistableScripts,f=Uo(t),m=l.get(f);m||(m=i.querySelector(gc(f)),m||(t=b({src:t,async:!0},r),(r=Er.get(f))&&Dm(t,r),m=i.createElement("script"),Kt(m),bn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function fT(t,r){Os.M(t,r);var i=Lo;if(i&&t){var l=Gr(i).hoistableScripts,f=Uo(t),m=l.get(f);m||(m=i.querySelector(gc(f)),m||(t=b({src:t,async:!0,type:"module"},r),(r=Er.get(f))&&Dm(t,r),m=i.createElement("script"),Kt(m),bn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Hv(t,r,i,l){var f=(f=Ae.current)?xd(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=Po(i.href),i=Gr(f).hoistableStyles,l=i.get(r),l||(l={type:"style",instance:null,count:0,state:null},i.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Po(i.href);var m=Gr(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(mc(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Er.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Er.set(t,i),m||mT(f,t,i,_.state))),r&&l===null)throw Error(a(528,""));return _}if(r&&l!==null)throw Error(a(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Uo(i),i=Gr(f).hoistableScripts,l=i.get(r),l||(l={type:"script",instance:null,count:0,state:null},i.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Po(t){return'href="'+On(t)+'"'}function mc(t){return'link[rel="stylesheet"]['+t+"]"}function Fv(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function mT(t,r,i,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),bn(r,"link",i),Kt(r),t.head.appendChild(r))}function Uo(t){return'[src="'+On(t)+'"]'}function gc(t){return"script[async]"+t}function Gv(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+On(i.href)+'"]');if(l)return r.instance=l,Kt(l),l;var f=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Kt(l),bn(l,"style",f),bd(l,i.precedence,t),r.instance=l;case"stylesheet":f=Po(i.href);var m=t.querySelector(mc(f));if(m)return r.state.loading|=4,r.instance=m,Kt(m),m;l=Fv(i),(f=Er.get(f))&&jm(l,f),m=(t.ownerDocument||t).createElement("link"),Kt(m);var _=m;return _._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),bn(m,"link",l),r.state.loading|=4,bd(m,i.precedence,t),r.instance=m;case"script":return m=Uo(i.src),(f=t.querySelector(gc(m)))?(r.instance=f,Kt(f),f):(l=i,(f=Er.get(m))&&(l=b({},i),Dm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Kt(f),bn(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,bd(l,i.precedence,t));return r.instance}function bd(t,r,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===r)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function jm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Dm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var _d=null;function $v(t,r,i){if(_d===null){var l=new Map,f=_d=new Map;f.set(i,l)}else f=_d,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[gn]||m[be]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=t+_;var w=l.get(_);w?w.push(m):l.set(_,[m])}}return l}function Qv(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function gT(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Kv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function pT(t,r,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Po(l.href),m=r.querySelector(mc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Ed.bind(t),r.then(t,t)),i.state.loading|=4,i.instance=m,Kt(m);return}m=r.ownerDocument||r,l=Fv(l),(f=Er.get(f))&&jm(l,f),m=m.createElement("link"),Kt(m);var _=m;_._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),bn(m,"link",l),i.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Ed.bind(t),r.addEventListener("load",i),r.addEventListener("error",i))}}var Om=0;function yT(t,r){return t.stylesheets&&t.count===0&&Td(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var l=setTimeout(function(){if(t.stylesheets&&Td(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Om===0&&(Om=62500*J1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Td(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Om?50:800)+r);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Ed(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wd=null;function Td(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wd=new Map,r.forEach(vT,t),wd=null,Ed.call(t))}function vT(t,r){if(!(r.state.loading&4)){var i=wd.get(t);if(i)var l=i.get(null);else{i=new Map,wd.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(i.set(_.dataset.precedence,_),l=_)}l&&i.set(null,l)}f=r.instance,_=f.getAttribute("data-precedence"),m=i.get(_)||l,m===l&&i.set(null,f),i.set(_,f),this.count++,l=Ed.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var pc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function xT(t,r,i,l,f,m,_,w,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Yv(t,r,i,l,f,m,_,w,O,Q,ee,re){return t=new xT(t,r,i,_,O,Q,ee,re,w),r=1,m===!0&&(r|=24),m=Qn(3,null,null,r),t.current=m,m.stateNode=t,r=ff(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:i,cache:r},yf(m),t}function Xv(t){return t?(t=po,t):po}function Jv(t,r,i,l,f,m){f=Xv(f),l.context===null?l.context=f:l.pendingContext=f,l=pa(r),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=ya(t,l,r),i!==null&&(zn(i,t,r),Kl(i,t,r))}function Wv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Mm(t,r){Wv(t,r),(t=t.alternate)&&Wv(t,r)}function Zv(t){if(t.tag===13||t.tag===31){var r=Ei(t,67108864);r!==null&&zn(r,t,67108864),Mm(t,67108864)}}function ex(t){if(t.tag===13||t.tag===31){var r=Wn();r=Fr(r);var i=Ei(t,r);i!==null&&zn(i,t,r),Mm(t,r)}}var Sd=!0;function bT(t,r,i,l){var f=X.T;X.T=null;var m=le.p;try{le.p=2,Vm(t,r,i,l)}finally{le.p=m,X.T=f}}function _T(t,r,i,l){var f=X.T;X.T=null;var m=le.p;try{le.p=8,Vm(t,r,i,l)}finally{le.p=m,X.T=f}}function Vm(t,r,i,l){if(Sd){var f=Lm(l);if(f===null)Em(t,r,l,Nd,i),nx(t,l);else if(wT(f,t,r,i,l))l.stopPropagation();else if(nx(t,l),r&4&&-1<ET.indexOf(t)){for(;f!==null;){var m=dr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=or(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var O=1<<31-kt(_);w.entanglements[1]|=O,_&=~O}ss(m),(it&6)===0&&(ld=$t()+500,uc(0))}}break;case 31:case 13:w=Ei(m,2),w!==null&&zn(w,m,2),ud(),Mm(m,2)}if(m=Lm(l),m===null&&Em(t,r,l,Nd,i),m===f)break;f=m}f!==null&&l.stopPropagation()}else Em(t,r,l,null,i)}}function Lm(t){return t=hr(t),Pm(t)}var Nd=null;function Pm(t){if(Nd=null,t=Hn(t),t!==null){var r=c(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=d(r),t!==null)return t;t=null}else if(i===31){if(t=g(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Nd=t,null}function tx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fs()){case Js:return 2;case li:return 8;case Br:case Xi:return 32;case Ws:return 268435456;default:return 32}default:return 32}}var Um=!1,Ca=null,ka=null,Ia=null,yc=new Map,vc=new Map,Ra=[],ET="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nx(t,r){switch(t){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":yc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(r.pointerId)}}function xc(t,r,i,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:i,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=dr(r),r!==null&&Zv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function wT(t,r,i,l,f){switch(r){case"focusin":return Ca=xc(Ca,t,r,i,l,f),!0;case"dragenter":return ka=xc(ka,t,r,i,l,f),!0;case"mouseover":return Ia=xc(Ia,t,r,i,l,f),!0;case"pointerover":var m=f.pointerId;return yc.set(m,xc(yc.get(m)||null,t,r,i,l,f)),!0;case"gotpointercapture":return m=f.pointerId,vc.set(m,xc(vc.get(m)||null,t,r,i,l,f)),!0}return!1}function rx(t){var r=Hn(t.target);if(r!==null){var i=c(r);if(i!==null){if(r=i.tag,r===13){if(r=d(i),r!==null){t.blockedOn=r,F(t.priority,function(){ex(i)});return}}else if(r===31){if(r=g(i),r!==null){t.blockedOn=r,F(t.priority,function(){ex(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ad(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=Lm(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);jl=l,i.target.dispatchEvent(l),jl=null}else return r=dr(i),r!==null&&Zv(r),t.blockedOn=i,!1;r.shift()}return!0}function sx(t,r,i){Ad(t)&&i.delete(r)}function TT(){Um=!1,Ca!==null&&Ad(Ca)&&(Ca=null),ka!==null&&Ad(ka)&&(ka=null),Ia!==null&&Ad(Ia)&&(Ia=null),yc.forEach(sx),vc.forEach(sx)}function Cd(t,r){t.blockedOn===r&&(t.blockedOn=null,Um||(Um=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,TT)))}var kd=null;function ax(t){kd!==t&&(kd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){kd===t&&(kd=null);for(var r=0;r<t.length;r+=3){var i=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Pm(l||i)===null)continue;break}var m=dr(i);m!==null&&(t.splice(r,3),r-=3,Lf(m,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function zo(t){function r(O){return Cd(O,t)}Ca!==null&&Cd(Ca,t),ka!==null&&Cd(ka,t),Ia!==null&&Cd(Ia,t),yc.forEach(r),vc.forEach(r);for(var i=0;i<Ra.length;i++){var l=Ra[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ra.length&&(i=Ra[0],i.blockedOn===null);)rx(i),i.blockedOn===null&&Ra.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],m=i[l+1],_=f[Ie]||null;if(typeof m=="function")_||ax(i);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Ie]||null)w=_.formAction;else if(Pm(f)!==null)continue}else w=_.action;typeof w=="function"?i[l+1]=w:(i.splice(l,3),l-=3),ax(i)}}}function ix(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function zm(t){this._internalRoot=t}Id.prototype.render=zm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var i=r.current,l=Wn();Jv(i,l,t,r,null,null)},Id.prototype.unmount=zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Jv(t.current,2,null,t,null,null),ud(),r[Rt]=null}};function Id(t){this._internalRoot=t}Id.prototype.unstable_scheduleHydration=function(t){if(t){var r=ci();t={blockedOn:null,target:t,priority:r};for(var i=0;i<Ra.length&&r!==0&&r<Ra[i].priority;i++);Ra.splice(i,0,t),i===0&&rx(t)}};var ox=e.version;if(ox!=="19.2.0")throw Error(a(527,ox,"19.2.0"));le.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var ST={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Dn=Rd.inject(ST),Qt=Rd}catch{}}return _c.createRoot=function(t,r){if(!o(t))throw Error(a(299));var i=!1,l="",f=my,m=gy,_=py;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Yv(t,1,!1,null,null,i,l,null,f,m,_,ix),t[Rt]=r.current,_m(t),new zm(r)},_c.hydrateRoot=function(t,r,i){if(!o(t))throw Error(a(299));var l=!1,f="",m=my,_=gy,w=py,O=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),r=Yv(t,1,!0,r,i??null,l,f,O,m,_,w,ix),r.context=Xv(null),i=r.current,l=Wn(),l=Fr(l),f=pa(l),f.callback=null,ya(i,f,l),i=l,r.current.lanes=i,gs(r,i),ss(r),t[Rt]=r.current,_m(t),new Id(r)},_c.version="19.2.0",_c}var yx;function MT(){if(yx)return Hm.exports;yx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Hm.exports=OT(),Hm.exports}var VT=MT();const LT=l_(VT);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vx="popstate";function PT(s={}){function e(o,c){let{pathname:d="/",search:g="",hash:p=""}=Fi(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),og("",{pathname:d,search:g,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");g=y===-1?p:p.slice(0,y)}return g+"#"+(typeof c=="string"?c:Pc(c))}function a(o,c){sr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return zT(e,n,a,s)}function Ct(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function sr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UT(){return Math.random().toString(36).substring(2,10)}function xx(s,e){return{usr:s.state,key:s.key,idx:e}}function og(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fi(e):e,state:n,key:e&&e.key||a||UT()}}function Pc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Fi(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function zT(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,g="POP",p=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function b(){g="POP";let z=x(),B=z==null?null:z-y;y=z,p&&p({action:g,location:U.location,delta:B})}function T(z,B){g="PUSH";let q=og(U.location,z,B);n&&n(q,z),y=x()+1;let Y=xx(q,y),de=U.createHref(q);try{d.pushState(Y,"",de)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(de)}c&&p&&p({action:g,location:U.location,delta:1})}function k(z,B){g="REPLACE";let q=og(U.location,z,B);n&&n(q,z),y=x();let Y=xx(q,y),de=U.createHref(q);d.replaceState(Y,"",de),c&&p&&p({action:g,location:U.location,delta:0})}function V(z){return BT(z)}let U={get action(){return g},get location(){return s(o,d)},listen(z){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(vx,b),p=z,()=>{o.removeEventListener(vx,b),p=null}},createHref(z){return e(o,z)},createURL:V,encodeLocation(z){let B=V(z);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:k,go(z){return d.go(z)}};return U}function BT(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Pc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function c_(s,e,n="/"){return qT(s,e,n,!1)}function qT(s,e,n,a){let o=typeof e=="string"?Fi(e):e,c=zs(o.pathname||"/",n);if(c==null)return null;let d=u_(s);HT(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=eS(c);g=WT(d[p],y,a)}return g}function u_(s,e=[],n=[],a="",o=!1){let c=(d,g,p=o,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&p)return;Ct(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let b=Us([a,x.relativePath]),T=n.concat(x);d.children&&d.children.length>0&&(Ct(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),u_(d.children,e,T,b,p)),!(d.path==null&&!d.index)&&e.push({path:b,score:XT(b,d.index),routesMeta:T})};return s.forEach((d,g)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))c(d,g);else for(let y of d_(d.path))c(d,g,!0,y)}),e}function d_(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=d_(a.join("/")),g=[];return g.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&g.push(...d),g.map(p=>s.startsWith("/")&&p===""?"/":p)}function HT(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:JT(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var FT=/^:[\w-]+$/,GT=3,$T=2,QT=1,KT=10,YT=-2,bx=s=>s==="*";function XT(s,e){let n=s.split("/"),a=n.length;return n.some(bx)&&(a+=YT),e&&(a+=$T),n.filter(o=>!bx(o)).reduce((o,c)=>o+(FT.test(c)?GT:c===""?QT:KT),a)}function JT(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function WT(s,e,n=!1){let{routesMeta:a}=s,o={},c="/",d=[];for(let g=0;g<a.length;++g){let p=a[g],y=g===a.length-1,x=c==="/"?e:e.slice(c.length)||"/",b=Zd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},x),T=p.route;if(!b&&y&&n&&!a[a.length-1].route.index&&(b=Zd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:Us([c,b.pathname]),pathnameBase:aS(Us([c,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(c=Us([c,b.pathnameBase]))}return d}function Zd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=ZT(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((y,{paramName:x,isOptional:b},T)=>{if(x==="*"){let V=g[T]||"";d=c.slice(0,c.length-V.length).replace(/(.)\/+$/,"$1")}const k=g[T];return b&&!k?y[x]=void 0:y[x]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:s}}function ZT(s,e=!1,n=!0){sr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(a.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function eS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function zs(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var tS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nS=s=>tS.test(s);function rS(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?Fi(s):s,c;if(n)if(nS(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),sr(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?c=_x(n.substring(1),"/"):c=_x(n,e)}else c=e;return{pathname:c,search:iS(a),hash:oS(o)}}function _x(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Qm(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mg(s){let e=sS(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function Vg(s,e,n,a=!1){let o;typeof s=="string"?o=Fi(s):(o={...s},Ct(!o.pathname||!o.pathname.includes("?"),Qm("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),Qm("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),Qm("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=n;else{let b=e.length-1;if(!a&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),b-=1;o.pathname=T.join("/")}g=b>=0?e[b]:"/"}let p=rS(o,g),y=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||x)&&(p.pathname+="/"),p}var Us=s=>s.join("/").replace(/\/\/+/g,"/"),aS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),iS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,oS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function lS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h_=["POST","PUT","PATCH","DELETE"];new Set(h_);var cS=["GET",...h_];new Set(cS);var ul=C.createContext(null);ul.displayName="DataRouter";var wh=C.createContext(null);wh.displayName="DataRouterState";C.createContext(!1);var f_=C.createContext({isTransitioning:!1});f_.displayName="ViewTransition";var uS=C.createContext(new Map);uS.displayName="Fetchers";var dS=C.createContext(null);dS.displayName="Await";var Ur=C.createContext(null);Ur.displayName="Navigation";var Xc=C.createContext(null);Xc.displayName="Location";var zr=C.createContext({outlet:null,matches:[],isDataRoute:!1});zr.displayName="Route";var Lg=C.createContext(null);Lg.displayName="RouteError";function hS(s,{relative:e}={}){Ct(dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=C.useContext(Ur),{hash:o,pathname:c,search:d}=Jc(s,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:Us([n,c])),a.createHref({pathname:g,search:d,hash:o})}function dl(){return C.useContext(Xc)!=null}function Gs(){return Ct(dl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Xc).location}var m_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g_(s){C.useContext(Ur).static||C.useLayoutEffect(s)}function ti(){let{isDataRoute:s}=C.useContext(zr);return s?SS():fS()}function fS(){Ct(dl(),"useNavigate() may be used only in the context of a <Router> component.");let s=C.useContext(ul),{basename:e,navigator:n}=C.useContext(Ur),{matches:a}=C.useContext(zr),{pathname:o}=Gs(),c=JSON.stringify(Mg(a)),d=C.useRef(!1);return g_(()=>{d.current=!0}),C.useCallback((p,y={})=>{if(sr(d.current,m_),!d.current)return;if(typeof p=="number"){n.go(p);return}let x=Vg(p,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Us([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,c,o,s])}C.createContext(null);function Pg(){let{matches:s}=C.useContext(zr),e=s[s.length-1];return e?e.params:{}}function Jc(s,{relative:e}={}){let{matches:n}=C.useContext(zr),{pathname:a}=Gs(),o=JSON.stringify(Mg(n));return C.useMemo(()=>Vg(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function mS(s,e){return p_(s,e)}function p_(s,e,n,a,o){var q;Ct(dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=C.useContext(Ur),{matches:d}=C.useContext(zr),g=d[d.length-1],p=g?g.params:{},y=g?g.pathname:"/",x=g?g.pathnameBase:"/",b=g&&g.route;{let Y=b&&b.path||"";y_(y,!b||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=Gs(),k;if(e){let Y=typeof e=="string"?Fi(e):e;Ct(x==="/"||((q=Y.pathname)==null?void 0:q.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),k=Y}else k=T;let V=k.pathname||"/",U=V;if(x!=="/"){let Y=x.replace(/^\//,"").split("/");U="/"+V.replace(/^\//,"").split("/").slice(Y.length).join("/")}let z=c_(s,{pathname:U});sr(b||z!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),sr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=xS(z&&z.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:Us([x,c.encodeLocation?c.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?x:Us([x,c.encodeLocation?c.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),d,n,a,o);return e&&B?C.createElement(Xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},B):B}function gS(){let s=TS(),e=lS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,d)}var pS=C.createElement(gS,null),yS=class extends C.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?C.createElement(zr.Provider,{value:this.props.routeContext},C.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vS({routeContext:s,match:e,children:n}){let a=C.useContext(ul);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(zr.Provider,{value:s},n)}function xS(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,d=n==null?void 0:n.errors;if(d!=null){let x=c.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);Ct(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let g=!1,p=-1;if(n)for(let x=0;x<c.length;x++){let b=c[x];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=x),b.route.id){let{loaderData:T,errors:k}=n,V=b.route.loader&&!T.hasOwnProperty(b.route.id)&&(!k||k[b.route.id]===void 0);if(b.route.lazy||V){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let y=n&&a?(x,b)=>{var T,k;a(x,{location:n.location,params:((k=(T=n.matches)==null?void 0:T[0])==null?void 0:k.params)??{},errorInfo:b})}:void 0;return c.reduceRight((x,b,T)=>{let k,V=!1,U=null,z=null;n&&(k=d&&b.route.id?d[b.route.id]:void 0,U=b.route.errorElement||pS,g&&(p<0&&T===0?(y_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,z=null):p===T&&(V=!0,z=b.route.hydrateFallbackElement||null)));let B=e.concat(c.slice(0,T+1)),q=()=>{let Y;return k?Y=U:V?Y=z:b.route.Component?Y=C.createElement(b.route.Component,null):b.route.element?Y=b.route.element:Y=x,C.createElement(vS,{match:b,routeContext:{outlet:x,matches:B,isDataRoute:n!=null},children:Y})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?C.createElement(yS,{location:n.location,revalidation:n.revalidation,component:U,error:k,children:q(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:y}):q()},null)}function Ug(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bS(s){let e=C.useContext(ul);return Ct(e,Ug(s)),e}function _S(s){let e=C.useContext(wh);return Ct(e,Ug(s)),e}function ES(s){let e=C.useContext(zr);return Ct(e,Ug(s)),e}function zg(s){let e=ES(s),n=e.matches[e.matches.length-1];return Ct(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function wS(){return zg("useRouteId")}function TS(){var a;let s=C.useContext(Lg),e=_S("useRouteError"),n=zg("useRouteError");return s!==void 0?s:(a=e.errors)==null?void 0:a[n]}function SS(){let{router:s}=bS("useNavigate"),e=zg("useNavigate"),n=C.useRef(!1);return g_(()=>{n.current=!0}),C.useCallback(async(o,c={})=>{sr(n.current,m_),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Ex={};function y_(s,e,n){!e&&!Ex[s]&&(Ex[s]=!0,sr(!1,n))}C.memo(NS);function NS({routes:s,future:e,state:n,unstable_onError:a}){return p_(s,void 0,n,a,e)}function zd({to:s,replace:e,state:n,relative:a}){Ct(dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Ur);sr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(zr),{pathname:d}=Gs(),g=ti(),p=Vg(s,Mg(c),d,a==="path"),y=JSON.stringify(p);return C.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:a})},[g,y,a,e,n]),null}function Zn(s){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AS({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:c=!1}){Ct(!dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=C.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=Fi(n));let{pathname:p="/",search:y="",hash:x="",state:b=null,key:T="default"}=n,k=C.useMemo(()=>{let V=zs(p,d);return V==null?null:{location:{pathname:V,search:y,hash:x,state:b,key:T},navigationType:a}},[d,p,y,x,b,T,a]);return sr(k!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:C.createElement(Ur.Provider,{value:g},C.createElement(Xc.Provider,{children:e,value:k}))}function CS({children:s,location:e}){return mS(lg(s),e)}function lg(s,e=[]){let n=[];return C.Children.forEach(s,(a,o)=>{if(!C.isValidElement(a))return;let c=[...e,o];if(a.type===C.Fragment){n.push.apply(n,lg(a.props.children,c));return}Ct(a.type===Zn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=lg(a.props.children,c)),n.push(d)}),n}var Bd="get",qd="application/x-www-form-urlencoded";function Th(s){return s!=null&&typeof s.tagName=="string"}function kS(s){return Th(s)&&s.tagName.toLowerCase()==="button"}function IS(s){return Th(s)&&s.tagName.toLowerCase()==="form"}function RS(s){return Th(s)&&s.tagName.toLowerCase()==="input"}function jS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function DS(s,e){return s.button===0&&(!e||e==="_self")&&!jS(s)}var jd=null;function OS(){if(jd===null)try{new FormData(document.createElement("form"),0),jd=!1}catch{jd=!0}return jd}var MS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Km(s){return s!=null&&!MS.has(s)?(sr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qd}"`),null):s}function VS(s,e){let n,a,o,c,d;if(IS(s)){let g=s.getAttribute("action");a=g?zs(g,e):null,n=s.getAttribute("method")||Bd,o=Km(s.getAttribute("enctype"))||qd,c=new FormData(s)}else if(kS(s)||RS(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||g.getAttribute("action");if(a=p?zs(p,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||Bd,o=Km(s.getAttribute("formenctype"))||Km(g.getAttribute("enctype"))||qd,c=new FormData(g,s),!OS()){let{name:y,type:x,value:b}=s;if(x==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,b)}}else{if(Th(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bd,a=null,o=qd,d=s}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function LS(s,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&zs(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function PS(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function US(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function zS(s,e,n){let a=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await PS(c,n);return d.links?d.links():[]}return[]}));return FS(a.flat(1).filter(US).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function wx(s,e,n,a,o,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>{var x;return n[y].pathname!==p.pathname||((x=n[y].route.path)==null?void 0:x.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return c==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{var b;let x=a.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function BS(s,e,{includeHydrateFallback:n}={}){return qS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function qS(s){return[...new Set(s)]}function HS(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function FS(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let c=JSON.stringify(HS(o));return n.has(c)||(n.add(c),a.push({key:c,link:o})),a},[])}function v_(){let s=C.useContext(ul);return Bg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function GS(){let s=C.useContext(wh);return Bg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var qg=C.createContext(void 0);qg.displayName="FrameworkContext";function x_(){let s=C.useContext(qg);return Bg(s,"You must render this element inside a <HydratedRouter> element"),s}function $S(s,e){let n=C.useContext(qg),[a,o]=C.useState(!1),[c,d]=C.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:x,onTouchStart:b}=e,T=C.useRef(null);C.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let U=B=>{B.forEach(q=>{d(q.isIntersecting)})},z=new IntersectionObserver(U,{threshold:.5});return T.current&&z.observe(T.current),()=>{z.disconnect()}}},[s]),C.useEffect(()=>{if(a){let U=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(U)}}},[a]);let k=()=>{o(!0)},V=()=>{o(!1),d(!1)};return n?s!=="intent"?[c,T,{}]:[c,T,{onFocus:Ec(g,k),onBlur:Ec(p,V),onMouseEnter:Ec(y,k),onMouseLeave:Ec(x,V),onTouchStart:Ec(b,k)}]:[!1,T,{}]}function Ec(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function QS({page:s,...e}){let{router:n}=v_(),a=C.useMemo(()=>c_(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?C.createElement(YS,{page:s,matches:a,...e}):null}function KS(s){let{manifest:e,routeModules:n}=x_(),[a,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return zS(s,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[s,e,n]),a}function YS({page:s,matches:e,...n}){let a=Gs(),{manifest:o,routeModules:c}=x_(),{basename:d}=v_(),{loaderData:g,matches:p}=GS(),y=C.useMemo(()=>wx(s,e,p,o,a,"data"),[s,e,p,o,a]),x=C.useMemo(()=>wx(s,e,p,o,a,"assets"),[s,e,p,o,a]),b=C.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let V=new Set,U=!1;if(e.forEach(B=>{var Y;let q=o.routes[B.route.id];!q||!q.hasLoader||(!y.some(de=>de.route.id===B.route.id)&&B.route.id in g&&((Y=c[B.route.id])!=null&&Y.shouldRevalidate)||q.hasClientLoader?U=!0:V.add(B.route.id))}),V.size===0)return[];let z=LS(s,d,"data");return U&&V.size>0&&z.searchParams.set("_routes",e.filter(B=>V.has(B.route.id)).map(B=>B.route.id).join(",")),[z.pathname+z.search]},[d,g,a,o,y,e,s,c]),T=C.useMemo(()=>BS(x,o),[x,o]),k=KS(x);return C.createElement(C.Fragment,null,b.map(V=>C.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),T.map(V=>C.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),k.map(({key:V,link:U})=>C.createElement("link",{key:V,nonce:n.nonce,...U})))}function XS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var b_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{b_&&(window.__reactRouterVersion="7.9.6")}catch{}function JS({basename:s,children:e,window:n}){let a=C.useRef();a.current==null&&(a.current=PT({window:n,v5Compat:!0}));let o=a.current,[c,d]=C.useState({action:o.action,location:o.location}),g=C.useCallback(p=>{C.startTransition(()=>d(p))},[d]);return C.useLayoutEffect(()=>o.listen(g),[o,g]),C.createElement(AS,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var __=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=C.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:g,target:p,to:y,preventScrollReset:x,viewTransition:b,...T},k){let{basename:V}=C.useContext(Ur),U=typeof y=="string"&&__.test(y),z,B=!1;if(typeof y=="string"&&U&&(z=y,b_))try{let A=new URL(window.location.href),M=y.startsWith("//")?new URL(A.protocol+y):new URL(y),D=zs(M.pathname,V);M.origin===A.origin&&D!=null?y=D+M.search+M.hash:B=!0}catch{sr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=hS(y,{relative:o}),[Y,de,ie]=$S(a,T),ge=t2(y,{replace:d,state:g,target:p,preventScrollReset:x,relative:o,viewTransition:b});function j(A){e&&e(A),A.defaultPrevented||ge(A)}let N=C.createElement("a",{...T,...ie,href:z||q,onClick:B||c?e:j,ref:XS(k,de),target:p,"data-discover":!U&&n==="render"?"true":void 0});return Y&&!U?C.createElement(C.Fragment,null,N,C.createElement(QS,{page:q})):N});yt.displayName="Link";var WS=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:g,children:p,...y},x){let b=Jc(d,{relative:y.relative}),T=Gs(),k=C.useContext(wh),{navigator:V,basename:U}=C.useContext(Ur),z=k!=null&&i2(b)&&g===!0,B=V.encodeLocation?V.encodeLocation(b).pathname:b.pathname,q=T.pathname,Y=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(q=q.toLowerCase(),Y=Y?Y.toLowerCase():null,B=B.toLowerCase()),Y&&U&&(Y=zs(Y,U)||Y);const de=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ie=q===B||!o&&q.startsWith(B)&&q.charAt(de)==="/",ge=Y!=null&&(Y===B||!o&&Y.startsWith(B)&&Y.charAt(B.length)==="/"),j={isActive:ie,isPending:ge,isTransitioning:z},N=ie?e:void 0,A;typeof a=="function"?A=a(j):A=[a,ie?"active":null,ge?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(j):c;return C.createElement(yt,{...y,"aria-current":N,className:A,ref:x,style:M,to:d,viewTransition:g},typeof p=="function"?p(j):p)});WS.displayName="NavLink";var ZS=C.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:c,method:d=Bd,action:g,onSubmit:p,relative:y,preventScrollReset:x,viewTransition:b,...T},k)=>{let V=s2(),U=a2(g,{relative:y}),z=d.toLowerCase()==="get"?"get":"post",B=typeof g=="string"&&__.test(g),q=Y=>{if(p&&p(Y),Y.defaultPrevented)return;Y.preventDefault();let de=Y.nativeEvent.submitter,ie=(de==null?void 0:de.getAttribute("formmethod"))||d;V(de||Y.currentTarget,{fetcherKey:e,method:ie,navigate:n,replace:o,state:c,relative:y,preventScrollReset:x,viewTransition:b})};return C.createElement("form",{ref:k,method:z,action:U,onSubmit:a?p:q,...T,"data-discover":!B&&s==="render"?"true":void 0})});ZS.displayName="Form";function e2(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E_(s){let e=C.useContext(ul);return Ct(e,e2(s)),e}function t2(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:c,viewTransition:d}={}){let g=ti(),p=Gs(),y=Jc(s,{relative:c});return C.useCallback(x=>{if(DS(x,e)){x.preventDefault();let b=n!==void 0?n:Pc(p)===Pc(y);g(s,{replace:b,state:a,preventScrollReset:o,relative:c,viewTransition:d})}},[p,g,y,n,a,e,s,o,c,d])}var n2=0,r2=()=>`__${String(++n2)}__`;function s2(){let{router:s}=E_("useSubmit"),{basename:e}=C.useContext(Ur),n=wS();return C.useCallback(async(a,o={})=>{let{action:c,method:d,encType:g,formData:p,body:y}=VS(a,e);if(o.navigate===!1){let x=o.fetcherKey||r2();await s.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function a2(s,{relative:e}={}){let{basename:n}=C.useContext(Ur),a=C.useContext(zr);Ct(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...Jc(s||".",{relative:e})},d=Gs();if(s==null){c.search=d.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(x=>x==="")){g.delete("index"),p.filter(b=>b).forEach(b=>g.append("index",b));let x=g.toString();c.search=x?`?${x}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Us([n,c.pathname])),Pc(c)}function i2(s,{relative:e}={}){let n=C.useContext(f_);Ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=E_("useViewTransitionState"),o=Jc(s,{relative:e});if(!n.isTransitioning)return!1;let c=zs(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=zs(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Zd(o.pathname,d)!=null||Zd(o.pathname,c)!=null}var ot=(s=>(s.ADMIN="admin",s.USER="user",s))(ot||{}),Rn=(s=>(s.CONFIRMED="confirmed",s.CANCELED="canceled",s.WAITLIST="waitlist",s))(Rn||{});const Ht=s=>{if(!s)return"";if(s.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,n,a]=s.split("-");return`${a}/${n}/${e}`}try{const e=new Date(s);return isNaN(e.getTime())?s:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return s}},Tx=s=>{if(!s)return"";try{let e;if(s.match(/^\d{4}-\d{2}-\d{2}$/)){const[n,a,o]=s.split("-").map(Number);e=new Date(n,a-1,o)}else e=new Date(s);return isNaN(e.getTime())?s:new Intl.DateTimeFormat("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"}).format(e)}catch{return s}},Pa=s=>{if(!s)return 0;const[e,n]=s.split(":").map(Number);return e*60+n},o2=s=>s&&s.apiKey&&s.projectId&&s.appId,Sx={apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.appspot.com",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML"},Pi={useFirebase:o2(Sx),firebase:Sx},l2=()=>{};var Nx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},c2=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],d=s[n++],g=s[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],d=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},T_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const c=s[o],d=o+1<s.length,g=d?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,x=c>>2,b=(c&3)<<4|g>>4;let T=(g&15)<<2|y>>6,k=y&63;p||(k=64,d||(T=64)),a.push(n[x],n[b],n[T],n[k])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(w_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):c2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const b=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||g==null||y==null||b==null)throw new u2;const T=c<<2|g>>4;if(a.push(T),y!==64){const k=g<<4&240|y>>2;if(a.push(k),b!==64){const V=y<<6&192|b;a.push(V)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class u2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d2=function(s){const e=w_(s);return T_.encodeByteArray(e,!0)},eh=function(s){return d2(s).replace(/\./g,"")},S_=function(s){try{return T_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=()=>h2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof Nx>"u")return;const s=Nx.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},g2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&S_(s[1]);return e&&JSON.parse(e)},Sh=()=>{try{return l2()||f2()||m2()||g2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},N_=s=>{var e,n;return(n=(e=Sh())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},p2=s=>{const e=N_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},A_=()=>{var s;return(s=Sh())==null?void 0:s.config},C_=s=>{var e;return(e=Sh())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k_(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[eh(JSON.stringify(n)),eh(JSON.stringify(d)),""].join(".")}const Rc={};function x2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?s.emulator.push(e):s.prod.push(e);return s}function b2(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Ax=!1;function I_(s,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Rc[s]===e||Rc[s]||Ax)return;Rc[s]=e;function n(T){return`__firebase__banner__${T}`}const a="__firebase__banner",c=x2().prod.length>0;function d(){const T=document.getElementById(a);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ax=!0,d()},T}function x(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=b2(a),k=n("text"),V=document.getElementById(k)||document.createElement("span"),U=n("learnmore"),z=document.getElementById(U)||document.createElement("a"),B=n("preprendIcon"),q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Y=T.element;g(Y),x(z,U);const de=y();p(q,B),Y.append(q,V,z,de),document.body.appendChild(Y)}c?(V.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function E2(){var e;const s=(e=Sh())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function S2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N2(){const s=An();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function A2(){return!E2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C2(){try{return typeof indexedDB=="object"}catch{return!1}}function k2(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class $s extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=I2,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?R2(c,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new $s(o,g,a)}}function R2(s,e){return s.replace(j2,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const j2=/\{\$([^}]+)}/g;function D2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ui(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const c=s[o],d=e[o];if(Cx(c)&&Cx(d)){if(!Ui(c,d))return!1}else if(c!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Cx(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Nc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,c]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Ac(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function O2(s,e){const n=new M2(s,e);return n.subscribe.bind(n)}class M2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");V2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Ym),o.error===void 0&&(o.error=Ym),o.complete===void 0&&(o.complete=Ym);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V2(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return s&&s._delegate?s._delegate:s}class zi{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new y2;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U2(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&d.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:P2(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P2(s){return s===Mi?void 0:s}function U2(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ke||(Ke={}));const B2={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},q2=Ke.INFO,H2={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},F2=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=H2[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=q2,this._logHandler=F2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const G2=(s,e)=>e.some(n=>s instanceof n);let kx,Ix;function $2(){return kx||(kx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q2(){return Ix||(Ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R_=new WeakMap,cg=new WeakMap,j_=new WeakMap,Xm=new WeakMap,Fg=new WeakMap;function K2(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(Ba(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&R_.set(n,s)}).catch(()=>{}),Fg.set(e,s),e}function Y2(s){if(cg.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});cg.set(s,e)}let ug={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return cg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||j_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ba(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function X2(s){ug=s(ug)}function J2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(Jm(this),e,...n);return j_.set(a,e.sort?e.sort():[e]),Ba(a)}:Q2().includes(s)?function(...e){return s.apply(Jm(this),e),Ba(R_.get(this))}:function(...e){return Ba(s.apply(Jm(this),e))}}function W2(s){return typeof s=="function"?J2(s):(s instanceof IDBTransaction&&Y2(s),G2(s,$2())?new Proxy(s,ug):s)}function Ba(s){if(s instanceof IDBRequest)return K2(s);if(Xm.has(s))return Xm.get(s);const e=W2(s);return e!==s&&(Xm.set(s,e),Fg.set(e,s)),e}const Jm=s=>Fg.get(s);function Z2(s,e,{blocked:n,upgrade:a,blocking:o,terminated:c}={}){const d=indexedDB.open(s,e),g=Ba(d);return a&&d.addEventListener("upgradeneeded",p=>{a(Ba(d.result),p.oldVersion,p.newVersion,Ba(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const eN=["get","getKey","getAll","getAllKeys","count"],tN=["put","add","delete","clear"],Wm=new Map;function Rx(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=tN.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||eN.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Wm.set(e,c),c}X2(s=>({...s,get:(e,n,a)=>Rx(e,n)||s.get(e,n,a),has:(e,n)=>!!Rx(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rN(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function rN(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dg="@firebase/app",jx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Hg("@firebase/app"),sN="@firebase/app-compat",aN="@firebase/analytics-compat",iN="@firebase/analytics",oN="@firebase/app-check-compat",lN="@firebase/app-check",cN="@firebase/auth",uN="@firebase/auth-compat",dN="@firebase/database",hN="@firebase/data-connect",fN="@firebase/database-compat",mN="@firebase/functions",gN="@firebase/functions-compat",pN="@firebase/installations",yN="@firebase/installations-compat",vN="@firebase/messaging",xN="@firebase/messaging-compat",bN="@firebase/performance",_N="@firebase/performance-compat",EN="@firebase/remote-config",wN="@firebase/remote-config-compat",TN="@firebase/storage",SN="@firebase/storage-compat",NN="@firebase/firestore",AN="@firebase/ai",CN="@firebase/firestore-compat",kN="firebase",IN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="[DEFAULT]",RN={[dg]:"fire-core",[sN]:"fire-core-compat",[iN]:"fire-analytics",[aN]:"fire-analytics-compat",[lN]:"fire-app-check",[oN]:"fire-app-check-compat",[cN]:"fire-auth",[uN]:"fire-auth-compat",[dN]:"fire-rtdb",[hN]:"fire-data-connect",[fN]:"fire-rtdb-compat",[mN]:"fire-fn",[gN]:"fire-fn-compat",[pN]:"fire-iid",[yN]:"fire-iid-compat",[vN]:"fire-fcm",[xN]:"fire-fcm-compat",[bN]:"fire-perf",[_N]:"fire-perf-compat",[EN]:"fire-rc",[wN]:"fire-rc-compat",[TN]:"fire-gcs",[SN]:"fire-gcs-compat",[NN]:"fire-fst",[CN]:"fire-fst-compat",[AN]:"fire-vertex","fire-js":"fire-js",[kN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,jN=new Map,fg=new Map;function Dx(s,e){try{s.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function el(s){const e=s.name;if(fg.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,s);for(const n of th.values())Dx(n,s);for(const n of jN.values())Dx(n,s);return!0}function Gg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function wr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qa=new Wc("app","Firebase",DN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=IN;function D_(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:hg,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw qa.create("bad-app-name",{appName:String(o)});if(n||(n=A_()),!n)throw qa.create("no-options");const c=th.get(o);if(c){if(Ui(n,c.options)&&Ui(a,c.config))return c;throw qa.create("duplicate-app",{appName:o})}const d=new z2(o);for(const p of fg.values())d.addComponent(p);const g=new ON(n,a,d);return th.set(o,g),g}function O_(s=hg){const e=th.get(s);if(!e&&s===hg&&A_())return D_();if(!e)throw qa.create("no-app",{appName:s});return e}function Ha(s,e,n){let a=RN[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(d.join(" "));return}el(new zi(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="firebase-heartbeat-database",VN=1,Uc="firebase-heartbeat-store";let Zm=null;function M_(){return Zm||(Zm=Z2(MN,VN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Uc)}catch(n){console.warn(n)}}}}).catch(s=>{throw qa.create("idb-open",{originalErrorMessage:s.message})})),Zm}async function LN(s){try{const n=(await M_()).transaction(Uc),a=await n.objectStore(Uc).get(V_(s));return await n.done,a}catch(e){if(e instanceof $s)Bs.warn(e.message);else{const n=qa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bs.warn(n.message)}}}async function Ox(s,e){try{const a=(await M_()).transaction(Uc,"readwrite");await a.objectStore(Uc).put(e,V_(s)),await a.done}catch(n){if(n instanceof $s)Bs.warn(n.message);else{const a=qa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bs.warn(a.message)}}}function V_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=1024,UN=30;class zN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qN(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Mx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>UN){const d=HN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Bs.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mx(),{heartbeatsToSend:a,unsentEntries:o}=BN(this._heartbeatsCache.heartbeats),c=eh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Bs.warn(n),""}}}function Mx(){return new Date().toISOString().substring(0,10)}function BN(s,e=PN){const n=[];let a=s.slice();for(const o of s){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Vx(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Vx(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class qN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C2()?k2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Vx(s){return eh(JSON.stringify({version:2,heartbeats:s})).length}function HN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(s){el(new zi("platform-logger",e=>new nN(e),"PRIVATE")),el(new zi("heartbeat",e=>new zN(e),"PRIVATE")),Ha(dg,jx,s),Ha(dg,jx,"esm2020"),Ha("fire-js","")}FN("");var GN="firebase",$N="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ha(GN,$N,"app");function L_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=L_,P_=new Wc("auth","Firebase",L_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Hg("@firebase/auth");function KN(s,...e){nh.logLevel<=Ke.WARN&&nh.warn(`Auth (${fl}): ${s}`,...e)}function Hd(s,...e){nh.logLevel<=Ke.ERROR&&nh.error(`Auth (${fl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(s,...e){throw Qg(s,...e)}function Lr(s,...e){return Qg(s,...e)}function $g(s,e,n){const a={...QN(),[e]:n};return new Wc("auth","Firebase",a).create(e,{appName:s.name})}function Fa(s){return $g(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YN(s,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&Tr(s,"argument-error"),$g(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return P_.create(s,...e)}function Me(s,e,...n){if(!s)throw Qg(e,...n)}function Ls(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Hd(e),new Error(e)}function qs(s,e){s||Ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function XN(){return Lx()==="http:"||Lx()==="https:"}function Lx(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XN()||T2()||"connection"in navigator)?navigator.onLine:!0}function WN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,qs(n>e,"Short delay should be less than long delay!"),this.isMobile=_2()||S2()}get(){return JN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(s,e){qs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tA=new eu(3e4,6e4);function Gi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ni(s,e,n,a,o={}){return z_(s,o,async()=>{let c={},d={};a&&(e==="GET"?d=a:c={body:JSON.stringify(a)});const g=Zc({key:s.config.apiKey,...d}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...c};return w2()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&hl(s.emulatorConfig.host)&&(y.credentials="include"),U_.fetch()(await B_(s,s.config.apiHost,n,g),y)})}async function z_(s,e,n){s._canInitEmulator=!1;const a={...ZN,...e};try{const o=new rA(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Dd(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dd(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Dd(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw Dd(s,"user-disabled",d);const x=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw $g(s,x,y);Tr(s,x)}}catch(o){if(o instanceof $s)throw o;Tr(s,"network-request-failed",{message:String(o)})}}async function Nh(s,e,n,a,o={}){const c=await ni(s,e,n,a,o);return"mfaPendingCredential"in c&&Tr(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function B_(s,e,n,a){const o=`${e}${n}?${a}`,c=s,d=c.config.emulator?Kg(s.config,o):`${s.config.apiScheme}://${o}`;return eA.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function nA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Lr(this.auth,"network-request-failed")),tA.get())})}}function Dd(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Lr(s,e,a);return o.customData._tokenResponse=n,o}function Px(s){return s!==void 0&&s.enterprise!==void 0}class sA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aA(s,e){return ni(s,"GET","/v2/recaptchaConfig",Gi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(s,e){return ni(s,"POST","/v1/accounts:delete",e)}async function rh(s,e){return ni(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oA(s,e=!1){const n=Pt(s),a=await n.getIdToken(e),o=Yg(a);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:a,authTime:jc(eg(o.auth_time)),issuedAtTime:jc(eg(o.iat)),expirationTime:jc(eg(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function eg(s){return Number(s)*1e3}function Yg(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return Hd("JWT malformed, contained fewer than 3 sections"),null;try{const o=S_(n);return o?JSON.parse(o):(Hd("Failed to decode base64 JWT payload"),null)}catch(o){return Hd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ux(s){const e=Yg(s);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof $s&&lA(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function lA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jc(this.lastLoginAt),this.creationTime=jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(s){var b;const e=s.auth,n=await s.getIdToken(),a=await zc(s,rh(e,{idToken:n}));Me(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?q_(o.providerUserInfo):[],d=dA(s.providerData,c),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),y=g?p:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new gg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function uA(s){const e=Pt(s);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dA(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function q_(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(s,e){const n=await z_(s,{},async()=>{const a=Zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,d=await B_(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:a};return s.emulatorConfig&&hl(s.emulatorConfig.host)&&(p.credentials="include"),U_.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fA(s,e){return ni(s,"POST","/v2/accounts:revokeToken",Gi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ux(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=Ux(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:c}=await hA(e,n);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:c}=n,d=new Yo;return a&&(Me(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(Me(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Me(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(s,e){Me(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Vr{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new cA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await zc(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oA(this,e)}reload(){return uA(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wr(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await zc(this,iA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:b,emailVerified:T,isAnonymous:k,providerData:V,stsTokenManager:U}=n;Me(b&&U,e,"internal-error");const z=Yo.fromJSON(this.name,U);Me(typeof b=="string",e,"internal-error"),Da(a,e.name),Da(o,e.name),Me(typeof T=="boolean",e,"internal-error"),Me(typeof k=="boolean",e,"internal-error"),Da(c,e.name),Da(d,e.name),Da(g,e.name),Da(p,e.name),Da(y,e.name),Da(x,e.name);const B=new Vr({uid:b,auth:e,email:o,emailVerified:T,displayName:a,isAnonymous:k,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:z,createdAt:y,lastLoginAt:x});return V&&Array.isArray(V)&&(B.providerData=V.map(q=>({...q}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,a=!1){const o=new Yo;o.updateFromServerResponse(n);const c=new Vr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await sh(c),c}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Me(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?q_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),g=new Yo;g.updateFromIdToken(a);const p=new Vr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new gg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;function Ps(s){qs(s instanceof Function,"Expected a class definition");let e=zx.get(s);return e?(qs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,zx.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H_.type="NONE";const Bx=H_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(s,e,n){return`firebase:${s}:${e}:${n}`}class Xo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=Fd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Fd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rh(this.auth,{idToken:e}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Xo(Ps(Bx),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Ps(Bx);const d=Fd(a,e.config.apiKey,e.name);let g=null;for(const y of n)try{const x=await y._get(d);if(x){let b;if(typeof x=="string"){const T=await rh(e,{idToken:x}).catch(()=>{});if(!T)break;b=await Vr._fromGetAccountInfoResponse(e,T,x)}else b=Vr._fromJSON(e,x);y!==c&&(g=b),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Xo(c,e,a):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Xo(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y_(e))return"Blackberry";if(X_(e))return"Webos";if(G_(e))return"Safari";if((e.includes("chrome/")||$_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function F_(s=An()){return/firefox\//i.test(s)}function G_(s=An()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $_(s=An()){return/crios\//i.test(s)}function Q_(s=An()){return/iemobile/i.test(s)}function K_(s=An()){return/android/i.test(s)}function Y_(s=An()){return/blackberry/i.test(s)}function X_(s=An()){return/webos/i.test(s)}function Xg(s=An()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mA(s=An()){var e;return Xg(s)&&!!((e=window.navigator)!=null&&e.standalone)}function gA(){return N2()&&document.documentMode===10}function J_(s=An()){return Xg(s)||K_(s)||X_(s)||Y_(s)||/windows phone/i.test(s)||Q_(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(s,e=[]){let n;switch(s){case"Browser":n=qx(An());break;case"Worker":n=`${qx(An())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(s,e={}){return ni(s,"GET","/v2/passwordPolicy",Gi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=6;class xA{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hx(this),this.idTokenSubscription=new Hx(this),this.beforeStateQueue=new pA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ps(n)),this._initializationPromise=this.queue(async()=>{var a,o,c;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rh(this,{idToken:e}),a=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(wr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===g)&&(p!=null&&p.user)&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wr(this.app))return Promise.reject(Fa(this));const n=e?Pt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wr(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wr(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yA(this),n=new xA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await fA(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ps(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,a,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&KN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $i(s){return Pt(s)}class Hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=O2(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _A(s){Ah=s}function Z_(s){return Ah.loadJS(s)}function EA(){return Ah.recaptchaEnterpriseScript}function wA(){return Ah.gapiScript}function TA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class SA{constructor(){this.enterprise=new NA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AA="recaptcha-enterprise",eE="NO_RECAPTCHA";class CA{constructor(e){this.type=AA,this.auth=$i(e)}async verify(e="verify",n=!1){async function a(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{aA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new sA(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(p=>{g(p)})})}function o(c,d,g){const p=window.grecaptcha;Px(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(eE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SA().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{a(this.auth).then(g=>{if(!n&&Px(window.grecaptcha))o(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=EA();p.length!==0&&(p+=g),Z_(p).then(()=>{o(g,c,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function Fx(s,e,n,a=!1,o=!1){const c=new CA(s);let d;if(o)d=eE;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Gx(s,e,n,a,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Fx(s,e,n,n==="getOobCode");return a(s,d)}else return a(s,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Fx(s,e,n,n==="getOobCode");return a(s,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(s,e){const n=Gg(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Ui(c,e??{}))return o;Tr(o,"already-initialized")}return n.initialize({options:e})}function IA(s,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Ps);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function RA(s,e,n){const a=$i(s);Me(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,c=tE(e),{host:d,port:g}=jA(e),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},x=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Me(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Me(Ui(y,a.config.emulator)&&Ui(x,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=x,a.settings.appVerificationDisabledForTesting=!0,hl(d)?(k_(`${c}//${d}${p}`),I_("Auth",!0)):DA()}function tE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function jA(s){const e=tE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:$x(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:$x(d)}}}function $x(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function DA(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,n){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}async function OA(s,e){return ni(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(s,e){return Nh(s,"POST","/v1/accounts:signInWithPassword",Gi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(s,e){return Nh(s,"POST","/v1/accounts:signInWithEmailLink",Gi(s,e))}async function LA(s,e){return Nh(s,"POST","/v1/accounts:signInWithEmailLink",Gi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Jg{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Bc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Bc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gx(e,n,"signInWithPassword",MA);case"emailLink":return VA(e,{email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gx(e,a,"signUpPassword",OA);case"emailLink":return LA(e,{idToken:n,email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(s,e){return Nh(s,"POST","/v1/accounts:signInWithIdp",Gi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="http://localhost";class Bi extends Jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...c}=n;if(!a||!o)return null;const d=new Bi(a,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Jo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Jo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jo(e,n)}buildRequest(){const e={requestUri:PA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zA(s){const e=Nc(Ac(s)).link,n=e?Nc(Ac(e)).deep_link_id:null,a=Nc(Ac(s)).deep_link_id;return(a?Nc(Ac(a)).link:null)||a||n||e||s}class Wg{constructor(e){const n=Nc(Ac(e)),a=n.apiKey??null,o=n.oobCode??null,c=UA(n.mode??null);Me(a&&o&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=zA(e);try{return new Wg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,n){return Bc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Wg.parseLink(n);return Me(a,"argument-error"),Bc._fromEmailAndCode(e,a.code,a.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Zg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends tu{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ma.credential(e.oauthAccessToken)}catch{return null}}}Ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ma.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bi._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Vs.credential(n,a)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends tu{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Va.credentialFromTaggedObject(e)}static credentialFromError(e){return Va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Va.credential(e.oauthAccessToken)}catch{return null}}}Va.GITHUB_SIGN_IN_METHOD="github.com";Va.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends tu{constructor(){super("twitter.com")}static credential(e,n){return Bi._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return La.credential(n,a)}catch{return null}}}La.TWITTER_SIGN_IN_METHOD="twitter.com";La.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const c=await Vr._fromIdTokenResponse(e,a,o),d=Qx(a);return new tl({user:c,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=Qx(a);return new tl({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function Qx(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends $s{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new ah(e,n,a,o)}}function nE(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(s,c,e,a):c})}async function BA(s,e,n=!1){const a=await zc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return tl._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(s,e,n=!1){const{auth:a}=s;if(wr(a.app))return Promise.reject(Fa(a));const o="reauthenticate";try{const c=await zc(s,nE(a,o,e,s),n);Me(c.idToken,a,"internal-error");const d=Yg(c.idToken);Me(d,a,"internal-error");const{sub:g}=d;return Me(s.uid===g,a,"user-mismatch"),tl._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Tr(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(s,e,n=!1){if(wr(s.app))return Promise.reject(Fa(s));const a="signIn",o=await nE(s,a,e),c=await tl._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(c.user),c}async function HA(s,e){return rE($i(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(s){const e=$i(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function GA(s,e,n){return wr(s.app)?Promise.reject(Fa(s)):HA(Pt(s),ml.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&FA(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(s,e){return Pt(s).setPersistence(e)}function $A(s,e,n,a){return Pt(s).onIdTokenChanged(e,n,a)}function QA(s,e,n){return Pt(s).beforeAuthStateChanged(e,n)}function KA(s,e,n,a){return Pt(s).onAuthStateChanged(e,n,a)}function YA(s){return Pt(s).signOut()}const ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=1e3,JA=10;class aE extends sE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);gA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,JA):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},XA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aE.type="LOCAL";const WA=aE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends sE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iE.type="SESSION";const oh=iE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Ch(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await ZA(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=ep("",20);o.port1.start();const x=setTimeout(()=>{p(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(b){const T=b;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(T.data.response);break;default:clearTimeout(x),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(){return window}function tC(s){is().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function nC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function sC(){return oE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="firebaseLocalStorageDb",aC=1,lh="firebaseLocalStorage",cE="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(s,e){return s.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function iC(){const s=indexedDB.deleteDatabase(lE);return new nu(s).toPromise()}function pg(){const s=indexedDB.open(lE,aC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(lh,{keyPath:cE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(lh)?e(a):(a.close(),await iC(),e(await pg()))})})}async function Yx(s,e,n){const a=kh(s,!0).put({[cE]:e,value:n});return new nu(a).toPromise()}async function oC(s,e){const n=kh(s,!1).get(e),a=await new nu(n).toPromise();return a===void 0?null:a.value}function Xx(s,e){const n=kh(s,!0).delete(e);return new nu(n).toPromise()}const lC=800,cC=3;class uE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>cC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(sC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await nC(),!this.activeServiceWorker)return;this.sender=new eC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await Yx(e,ih,"1"),await Xx(e,ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>Yx(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>oC(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=kh(o,!1).getAll();return new nu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uE.type="LOCAL";const uC=uE;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(s,e){return e?Ps(e):(Me(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends Jg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dC(s){return rE(s.auth,new tp(s),s.bypassAuthState)}function hC(s){const{auth:e,user:n}=s;return Me(n,e,"internal-error"),qA(n,new tp(s),s.bypassAuthState)}async function fC(s){const{auth:e,user:n}=s;return Me(n,e,"internal-error"),BA(n,new tp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,a,o,c=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return hC;default:Tr(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new eu(2e3,1e4);async function gC(s,e,n){if(wr(s.app))return Promise.reject(Lr(s,"operation-not-supported-in-this-environment"));const a=$i(s);YN(s,e,Zg);const o=dE(a,n);return new Vi(a,"signInViaPopup",e,o).executeNotNull()}class Vi extends hE{constructor(e,n,a,o,c){super(e,n,o,c),this.provider=a,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){qs(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",Gd=new Map;class yC extends hE{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Gd.get(this.auth._key());if(!e){try{const a=await vC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Gd.set(this.auth._key(),e)}return this.bypassAuthState||Gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vC(s,e){const n=_C(e),a=bC(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function xC(s,e){Gd.set(s._key(),e)}function bC(s){return Ps(s._redirectPersistence)}function _C(s){return Fd(pC,s.config.apiKey,s.name)}async function EC(s,e,n=!1){if(wr(s.app))return Promise.reject(Fa(s));const a=$i(s),o=dE(a,e),d=await new yC(a,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=600*1e3;class TC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!fE(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jx(e))}saveEventToCache(e){this.cachedEventUids.add(Jx(e)),this.lastProcessedEventTime=Date.now()}}function Jx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function fE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(s,e={}){return ni(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CC=/^https?/;async function kC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await NC(s);for(const n of e)try{if(IC(n))return}catch{}Tr(s,"unauthorized-domain")}function IC(s){const e=mg(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!CC.test(n))return!1;if(AC.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new eu(3e4,6e4);function Wx(){const s=is().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function jC(s){return new Promise((e,n)=>{var o,c,d;function a(){Wx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wx(),n(Lr(s,"network-request-failed"))},timeout:RC.get()})}if((c=(o=is().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=is().gapi)!=null&&d.load)a();else{const g=TA("iframefcb");return is()[g]=()=>{gapi.load?a():n(Lr(s,"network-request-failed"))},Z_(`${wA()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw $d=null,e})}let $d=null;function DC(s){return $d=$d||jC(s),$d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new eu(5e3,15e3),MC="__/auth/iframe",VC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UC(s){const e=s.config;Me(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Kg(e,VC):`https://${s.config.authDomain}/${MC}`,a={apiKey:e.apiKey,appName:s.name,v:fl},o=PC.get(s.config.apiHost);o&&(a.eid=o);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${n}?${Zc(a).slice(1)}`}async function zC(s){const e=await DC(s),n=is().gapi;return Me(n,s,"internal-error"),e.open({where:document.body,url:UC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const d=Lr(s,"network-request-failed"),g=is().setTimeout(()=>{c(d)},OC.get());function p(){is().clearTimeout(g),o(a)}a.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,HC=600,FC="_blank",GC="http://localhost";class Zx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $C(s,e,n,a=qC,o=HC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const p={...BC,width:a.toString(),height:o.toString(),top:c,left:d},y=An().toLowerCase();n&&(g=$_(y)?FC:n),F_(y)&&(e=e||GC,p.scrollbars="yes");const x=Object.entries(p).reduce((T,[k,V])=>`${T}${k}=${V},`,"");if(mA(y)&&g!=="_self")return QC(e||"",g),new Zx(null);const b=window.open(e||"",g,x);Me(b,s,"popup-blocked");try{b.focus()}catch{}return new Zx(b)}function QC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="__/auth/handler",YC="emulator/auth/handler",XC=encodeURIComponent("fac");async function eb(s,e,n,a,o,c){Me(s.config.authDomain,s,"auth-domain-config-required"),Me(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:fl,eventId:o};if(e instanceof Zg){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",D2(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,b]of Object.entries({}))d[x]=b}if(e instanceof tu){const x=e.getScopes().filter(b=>b!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const x of Object.keys(g))g[x]===void 0&&delete g[x];const p=await s._getAppCheckToken(),y=p?`#${XC}=${encodeURIComponent(p)}`:"";return`${JC(s)}?${Zc(g).slice(1)}${y}`}function JC({config:s}){return s.emulator?Kg(s,YC):`https://${s.authDomain}/${KC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class WC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oh,this._completeRedirectFn=EC,this._overrideRedirectResult=xC}async _openPopup(e,n,a,o){var d;qs((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await eb(e,n,a,mg(),o);return $C(e,c,ep())}async _openRedirect(e,n,a,o){await this._originValidation(e);const c=await eb(e,n,a,mg(),o);return tC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(qs(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await zC(e),a=new TC(e);return n.register("authEvent",o=>(Me(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[tg];c!==void 0&&n(!!c),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J_()||G_()||Xg()}}const ZC=WC;var tb="@firebase/auth",nb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nk(s){el(new zi("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;Me(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(s)},y=new bA(a,o,c,p);return IA(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),el(new zi("auth-internal",e=>{const n=$i(e.getProvider("auth").getImmediate());return(a=>new ek(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ha(tb,nb,tk(s)),Ha(tb,nb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=300,sk=C_("authIdTokenMaxAge")||rk;let rb=null;const ak=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>sk)return;const o=n==null?void 0:n.token;rb!==o&&(rb=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ik(s=O_()){const e=Gg(s,"auth");if(e.isInitialized())return e.getImmediate();const n=kA(s,{popupRedirectResolver:ZC,persistence:[uC,WA,oh]}),a=C_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=ak(c.toString());QA(n,d,()=>d(n.currentUser)),$A(n,g=>d(g))}}const o=N_("auth");return o&&RA(n,`http://${o}`),n}function ok(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}_A({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const c=Lr("internal-error");c.customData=o,n(c)},a.type="text/javascript",a.charset="UTF-8",ok().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nk("Browser");var sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ga,mE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function A(){}A.prototype=N.prototype,j.F=N.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(M,D,L){for(var R=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)R[ze-2]=arguments[ze];return N.prototype[D].apply(M,R)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,N,A){A||(A=0);const M=Array(16);if(typeof N=="string")for(var D=0;D<16;++D)M[D]=N.charCodeAt(A++)|N.charCodeAt(A++)<<8|N.charCodeAt(A++)<<16|N.charCodeAt(A++)<<24;else for(D=0;D<16;++D)M[D]=N[A++]|N[A++]<<8|N[A++]<<16|N[A++]<<24;N=j.g[0],A=j.g[1],D=j.g[2];let L=j.g[3],R;R=N+(L^A&(D^L))+M[0]+3614090360&4294967295,N=A+(R<<7&4294967295|R>>>25),R=L+(D^N&(A^D))+M[1]+3905402710&4294967295,L=N+(R<<12&4294967295|R>>>20),R=D+(A^L&(N^A))+M[2]+606105819&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(N^D&(L^N))+M[3]+3250441966&4294967295,A=D+(R<<22&4294967295|R>>>10),R=N+(L^A&(D^L))+M[4]+4118548399&4294967295,N=A+(R<<7&4294967295|R>>>25),R=L+(D^N&(A^D))+M[5]+1200080426&4294967295,L=N+(R<<12&4294967295|R>>>20),R=D+(A^L&(N^A))+M[6]+2821735955&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(N^D&(L^N))+M[7]+4249261313&4294967295,A=D+(R<<22&4294967295|R>>>10),R=N+(L^A&(D^L))+M[8]+1770035416&4294967295,N=A+(R<<7&4294967295|R>>>25),R=L+(D^N&(A^D))+M[9]+2336552879&4294967295,L=N+(R<<12&4294967295|R>>>20),R=D+(A^L&(N^A))+M[10]+4294925233&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(N^D&(L^N))+M[11]+2304563134&4294967295,A=D+(R<<22&4294967295|R>>>10),R=N+(L^A&(D^L))+M[12]+1804603682&4294967295,N=A+(R<<7&4294967295|R>>>25),R=L+(D^N&(A^D))+M[13]+4254626195&4294967295,L=N+(R<<12&4294967295|R>>>20),R=D+(A^L&(N^A))+M[14]+2792965006&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(N^D&(L^N))+M[15]+1236535329&4294967295,A=D+(R<<22&4294967295|R>>>10),R=N+(D^L&(A^D))+M[1]+4129170786&4294967295,N=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(N^A))+M[6]+3225465664&4294967295,L=N+(R<<9&4294967295|R>>>23),R=D+(N^A&(L^N))+M[11]+643717713&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^N&(D^L))+M[0]+3921069994&4294967295,A=D+(R<<20&4294967295|R>>>12),R=N+(D^L&(A^D))+M[5]+3593408605&4294967295,N=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(N^A))+M[10]+38016083&4294967295,L=N+(R<<9&4294967295|R>>>23),R=D+(N^A&(L^N))+M[15]+3634488961&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^N&(D^L))+M[4]+3889429448&4294967295,A=D+(R<<20&4294967295|R>>>12),R=N+(D^L&(A^D))+M[9]+568446438&4294967295,N=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(N^A))+M[14]+3275163606&4294967295,L=N+(R<<9&4294967295|R>>>23),R=D+(N^A&(L^N))+M[3]+4107603335&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^N&(D^L))+M[8]+1163531501&4294967295,A=D+(R<<20&4294967295|R>>>12),R=N+(D^L&(A^D))+M[13]+2850285829&4294967295,N=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(N^A))+M[2]+4243563512&4294967295,L=N+(R<<9&4294967295|R>>>23),R=D+(N^A&(L^N))+M[7]+1735328473&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^N&(D^L))+M[12]+2368359562&4294967295,A=D+(R<<20&4294967295|R>>>12),R=N+(A^D^L)+M[5]+4294588738&4294967295,N=A+(R<<4&4294967295|R>>>28),R=L+(N^A^D)+M[8]+2272392833&4294967295,L=N+(R<<11&4294967295|R>>>21),R=D+(L^N^A)+M[11]+1839030562&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^N)+M[14]+4259657740&4294967295,A=D+(R<<23&4294967295|R>>>9),R=N+(A^D^L)+M[1]+2763975236&4294967295,N=A+(R<<4&4294967295|R>>>28),R=L+(N^A^D)+M[4]+1272893353&4294967295,L=N+(R<<11&4294967295|R>>>21),R=D+(L^N^A)+M[7]+4139469664&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^N)+M[10]+3200236656&4294967295,A=D+(R<<23&4294967295|R>>>9),R=N+(A^D^L)+M[13]+681279174&4294967295,N=A+(R<<4&4294967295|R>>>28),R=L+(N^A^D)+M[0]+3936430074&4294967295,L=N+(R<<11&4294967295|R>>>21),R=D+(L^N^A)+M[3]+3572445317&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^N)+M[6]+76029189&4294967295,A=D+(R<<23&4294967295|R>>>9),R=N+(A^D^L)+M[9]+3654602809&4294967295,N=A+(R<<4&4294967295|R>>>28),R=L+(N^A^D)+M[12]+3873151461&4294967295,L=N+(R<<11&4294967295|R>>>21),R=D+(L^N^A)+M[15]+530742520&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^N)+M[2]+3299628645&4294967295,A=D+(R<<23&4294967295|R>>>9),R=N+(D^(A|~L))+M[0]+4096336452&4294967295,N=A+(R<<6&4294967295|R>>>26),R=L+(A^(N|~D))+M[7]+1126891415&4294967295,L=N+(R<<10&4294967295|R>>>22),R=D+(N^(L|~A))+M[14]+2878612391&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~N))+M[5]+4237533241&4294967295,A=D+(R<<21&4294967295|R>>>11),R=N+(D^(A|~L))+M[12]+1700485571&4294967295,N=A+(R<<6&4294967295|R>>>26),R=L+(A^(N|~D))+M[3]+2399980690&4294967295,L=N+(R<<10&4294967295|R>>>22),R=D+(N^(L|~A))+M[10]+4293915773&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~N))+M[1]+2240044497&4294967295,A=D+(R<<21&4294967295|R>>>11),R=N+(D^(A|~L))+M[8]+1873313359&4294967295,N=A+(R<<6&4294967295|R>>>26),R=L+(A^(N|~D))+M[15]+4264355552&4294967295,L=N+(R<<10&4294967295|R>>>22),R=D+(N^(L|~A))+M[6]+2734768916&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~N))+M[13]+1309151649&4294967295,A=D+(R<<21&4294967295|R>>>11),R=N+(D^(A|~L))+M[4]+4149444226&4294967295,N=A+(R<<6&4294967295|R>>>26),R=L+(A^(N|~D))+M[11]+3174756917&4294967295,L=N+(R<<10&4294967295|R>>>22),R=D+(N^(L|~A))+M[2]+718787259&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~N))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,j.g[2]=j.g[2]+D&4294967295,j.g[3]=j.g[3]+L&4294967295}a.prototype.v=function(j,N){N===void 0&&(N=j.length);const A=N-this.blockSize,M=this.C;let D=this.h,L=0;for(;L<N;){if(D==0)for(;L<=A;)o(this,j,L),L+=this.blockSize;if(typeof j=="string"){for(;L<N;)if(M[D++]=j.charCodeAt(L++),D==this.blockSize){o(this,M),D=0;break}}else for(;L<N;)if(M[D++]=j[L++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=N},a.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;N=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=N&255,N/=256;for(this.v(j),j=Array(16),N=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)j[N++]=this.g[A]>>>M&255;return j};function c(j,N){var A=g;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=N(j)}function d(j,N){this.h=N;const A=[];let M=!0;for(let D=j.length-1;D>=0;D--){const L=j[D]|0;M&&L==N||(A[D]=L,M=!1)}this.g=A}var g={};function p(j){return-128<=j&&j<128?c(j,function(N){return new d([N|0],N<0?-1:0)}):new d([j|0],j<0?-1:0)}function y(j){if(isNaN(j)||!isFinite(j))return b;if(j<0)return z(y(-j));const N=[];let A=1;for(let M=0;j>=A;M++)N[M]=j/A|0,A*=4294967296;return new d(N,0)}function x(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return z(x(j.substring(1),N));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(N,8));let M=b;for(let L=0;L<j.length;L+=8){var D=Math.min(8,j.length-L);const R=parseInt(j.substring(L,L+D),N);D<8?(D=y(Math.pow(N,D)),M=M.j(D).add(y(R))):(M=M.j(A),M=M.add(y(R)))}return M}var b=p(0),T=p(1),k=p(16777216);s=d.prototype,s.m=function(){if(U(this))return-z(this).m();let j=0,N=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);j+=(M>=0?M:4294967296+M)*N,N*=4294967296}return j},s.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(V(this))return"0";if(U(this))return"-"+z(this).toString(j);const N=y(Math.pow(j,6));var A=this;let M="";for(;;){const D=de(A,N).g;A=B(A,D.j(N));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=D,V(A))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},s.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function V(j){if(j.h!=0)return!1;for(let N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function U(j){return j.h==-1}s.l=function(j){return j=B(this,j),U(j)?-1:V(j)?0:1};function z(j){const N=j.g.length,A=[];for(let M=0;M<N;M++)A[M]=~j.g[M];return new d(A,~j.h).add(T)}s.abs=function(){return U(this)?z(this):this},s.add=function(j){const N=Math.max(this.g.length,j.g.length),A=[];let M=0;for(let D=0;D<=N;D++){let L=M+(this.i(D)&65535)+(j.i(D)&65535),R=(L>>>16)+(this.i(D)>>>16)+(j.i(D)>>>16);M=R>>>16,L&=65535,R&=65535,A[D]=R<<16|L}return new d(A,A[A.length-1]&-2147483648?-1:0)};function B(j,N){return j.add(z(N))}s.j=function(j){if(V(this)||V(j))return b;if(U(this))return U(j)?z(this).j(z(j)):z(z(this).j(j));if(U(j))return z(this.j(z(j)));if(this.l(k)<0&&j.l(k)<0)return y(this.m()*j.m());const N=this.g.length+j.g.length,A=[];for(var M=0;M<2*N;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<j.g.length;D++){const L=this.i(M)>>>16,R=this.i(M)&65535,ze=j.i(D)>>>16,pe=j.i(D)&65535;A[2*M+2*D]+=R*pe,q(A,2*M+2*D),A[2*M+2*D+1]+=L*pe,q(A,2*M+2*D+1),A[2*M+2*D+1]+=R*ze,q(A,2*M+2*D+1),A[2*M+2*D+2]+=L*ze,q(A,2*M+2*D+2)}for(j=0;j<N;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=N;j<2*N;j++)A[j]=0;return new d(A,0)};function q(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function Y(j,N){this.g=j,this.h=N}function de(j,N){if(V(N))throw Error("division by zero");if(V(j))return new Y(b,b);if(U(j))return N=de(z(j),N),new Y(z(N.g),z(N.h));if(U(N))return N=de(j,z(N)),new Y(z(N.g),N.h);if(j.g.length>30){if(U(j)||U(N))throw Error("slowDivide_ only works with positive integers.");for(var A=T,M=N;M.l(j)<=0;)A=ie(A),M=ie(M);var D=ge(A,1),L=ge(M,1);for(M=ge(M,2),A=ge(A,2);!V(M);){var R=L.add(M);R.l(j)<=0&&(D=D.add(A),L=R),M=ge(M,1),A=ge(A,1)}return N=B(j,D.j(N)),new Y(D,N)}for(D=b;j.l(N)>=0;){for(A=Math.max(1,Math.floor(j.m()/N.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=y(A),R=L.j(N);U(R)||R.l(j)>0;)A-=M,L=y(A),R=L.j(N);V(L)&&(L=T),D=D.add(L),j=B(j,R)}return new Y(D,j)}s.B=function(j){return de(this,j).h},s.and=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let M=0;M<N;M++)A[M]=this.i(M)&j.i(M);return new d(A,this.h&j.h)},s.or=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let M=0;M<N;M++)A[M]=this.i(M)|j.i(M);return new d(A,this.h|j.h)},s.xor=function(j){const N=Math.max(this.g.length,j.g.length),A=[];for(let M=0;M<N;M++)A[M]=this.i(M)^j.i(M);return new d(A,this.h^j.h)};function ie(j){const N=j.g.length+1,A=[];for(let M=0;M<N;M++)A[M]=j.i(M)<<1|j.i(M-1)>>>31;return new d(A,j.h)}function ge(j,N){const A=N>>5;N%=32;const M=j.g.length-A,D=[];for(let L=0;L<M;L++)D[L]=N>0?j.i(L+A)>>>N|j.i(L+A+1)<<32-N:j.i(L+A);return new d(D,j.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,mE=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,Ga=d}).apply(typeof sb<"u"?sb:typeof self<"u"?self:typeof window<"u"?window:{});var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gE,Cc,pE,Qd,yg,yE,vE,xE;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Od=="object"&&Od];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=n(this);function o(h,v){if(v)e:{var E=a;h=h.split(".");for(var S=0;S<h.length-1;S++){var G=h[S];if(!(G in E))break e;E=E[G]}h=h[h.length-1],S=E[h],v=v(S),v!=S&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&E.push([S,v[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function p(h,v,E){return h.call.apply(h.bind,arguments)}function y(h,v,E){return y=p,y.apply(null,arguments)}function x(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function b(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(S,G,J){for(var me=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)me[Pe-2]=arguments[Pe];return v.prototype[G].apply(S,me)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const v=h.length;if(v>0){const E=Array(v);for(let S=0;S<v;S++)E[S]=h[S];return E}return[]}function V(h,v){for(let S=1;S<arguments.length;S++){const G=arguments[S];var E=typeof G;if(E=E!="object"?E:G?Array.isArray(G)?"array":E:"null",E=="array"||E=="object"&&typeof G.length=="number"){E=h.length||0;const J=G.length||0;h.length=E+J;for(let me=0;me<J;me++)h[E+me]=G[me]}else h.push(G)}}class U{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function z(h){d.setTimeout(()=>{throw h},0)}function B(){var h=j;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,E){const S=Y.get();S.set(v,E),this.h?this.h.next=S:this.g=S,this.h=S}}var Y=new U(()=>new de,h=>h.reset());class de{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ge=!1,j=new q,N=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(A)}};function A(){for(var h;h=B();){try{h.h.call(h.g)}catch(E){z(E)}var v=Y;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}ge=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function ze(h,v){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(ze,D),ze.prototype.init=function(h,v){const E=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),X=0;function le(h,v,E,S,G){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!S,this.ha=G,this.key=++X,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,v,E){for(const S in h)v.call(E,h[S],S,h)}function ke(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function I(h){const v={};for(const E in h)v[E]=h[E];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,v){let E,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(E in S)h[E]=S[E];for(let J=0;J<W.length;J++)E=W[J],Object.prototype.hasOwnProperty.call(S,E)&&(h[E]=S[E])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,v,E,S,G){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const me=Ae(h,v,S,G);return me>-1?(v=h[me],E||(v.fa=!1)):(v=new le(v,this.src,J,!!S,G),v.fa=E,h.push(v)),v};function Te(h,v){const E=v.type;if(E in h.g){var S=h.g[E],G=Array.prototype.indexOf.call(S,v,void 0),J;(J=G>=0)&&Array.prototype.splice.call(S,G,1),J&&(xe(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ae(h,v,E,S){for(let G=0;G<h.length;++G){const J=h[G];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==S)return G}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),tt={};function Re(h,v,E,S,G){if(Array.isArray(v)){for(let J=0;J<v.length;J++)Re(h,v[J],E,S,G);return null}return E=Ge(E),h&&h[pe]?h.J(v,E,g(S)?!!S.capture:!1,G):St(h,v,E,!1,S,G)}function St(h,v,E,S,G,J){if(!v)throw Error("Invalid event type");const me=g(G)?!!G.capture:!!G;let Pe=mn(h);if(Pe||(h[Be]=Pe=new fe(h)),E=Pe.add(v,E,S,me,J),E.proxy)return E;if(S=st(),E.proxy=S,S.src=h,S.listener=E,h.addEventListener)L||(G=me),G===void 0&&(G=!1),h.addEventListener(v.toString(),S,G);else if(h.attachEvent)h.attachEvent(Gt(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function st(){function h(E){return v.call(h.src,h.listener,E)}const v=Ut;return h}function fn(h,v,E,S,G){if(Array.isArray(v))for(var J=0;J<v.length;J++)fn(h,v[J],E,S,G);else S=g(S)?!!S.capture:!!S,E=Ge(E),h&&h[pe]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],E=Ae(v,E,S,G),E>-1&&(xe(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=mn(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ae(v,E,S,G)),(E=h>-1?v[h]:null)&&dt(E))}function dt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[pe])Te(v.i,h);else{var E=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(E,S,h.capture):v.detachEvent?v.detachEvent(Gt(E),S):v.addListener&&v.removeListener&&v.removeListener(S),(E=mn(v))?(Te(E,h),E.h==0&&(E.src=null,v[Be]=null)):xe(h)}}}function Gt(h){return h in tt?tt[h]:tt[h]="on"+h}function Ut(h,v){if(h.da)h=!0;else{v=new ze(v,this);const E=h.listener,S=h.ha||h.src;h.fa&&dt(h),h=E.call(S,v)}return h}function mn(h){return h=h[Be],h instanceof fe?h:null}var ae="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ge(h){return typeof h=="function"?h:(h[ae]||(h[ae]=function(v){return h.handleEvent(v)}),h[ae])}function We(){M.call(this),this.i=new fe(this),this.M=this,this.G=null}b(We,M),We.prototype[pe]=!0,We.prototype.removeEventListener=function(h,v,E,S){fn(this,h,v,E,S)};function bt(h,v){var E,S=h.G;if(S)for(E=[];S;S=S.G)E.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new D(v,h);else if(v instanceof D)v.target=v.target||h;else{var G=v;v=new D(S,h),ce(v,G)}G=!0;let J,me;if(E)for(me=E.length-1;me>=0;me--)J=v.g=E[me],G=Sr(J,S,!0,v)&&G;if(J=v.g=h,G=Sr(J,S,!0,v)&&G,G=Sr(J,S,!1,v)&&G,E)for(me=0;me<E.length;me++)J=v.g=E[me],G=Sr(J,S,!1,v)&&G}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let S=0;S<E.length;S++)xe(E[S]);delete h.g[v],h.h--}}this.G=null},We.prototype.J=function(h,v,E,S){return this.i.add(String(h),v,!1,E,S)},We.prototype.K=function(h,v,E,S){return this.i.add(String(h),v,!0,E,S)};function Sr(h,v,E,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let G=!0;for(let J=0;J<v.length;++J){const me=v[J];if(me&&!me.da&&me.capture==E){const Pe=me.listener,zt=me.ha||me.src;me.fa&&Te(h.i,me),G=Pe.call(zt,S)!==!1&&G}}return G&&!S.defaultPrevented}function Xs(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function oi(h){h.g=Xs(()=>{h.g=null,h.i&&(h.i=!1,oi(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class $t extends M{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(h){M.call(this),this.h=h,this.g={}}b(fs,M);var Js=[];function li(h){Ee(h.g,function(v,E){this.g.hasOwnProperty(E)&&dt(v)},h),h.g={}}fs.prototype.N=function(){fs.Z.N.call(this),li(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Br=d.JSON.stringify,Xi=d.JSON.parse,Ws=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ms(){}function Ji(){}var Dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){D.call(this,"d")}b(Qt,D);function Cn(){D.call(this,"c")}b(Cn,D);var kt={},Wi=null;function Zs(){return Wi=Wi||new We}kt.Ia="serverreachability";function Zi(h){D.call(this,kt.Ia,h)}b(Zi,D);function ir(h){const v=Zs();bt(v,new Zi(v))}kt.STAT_EVENT="statevent";function qr(h,v){D.call(this,kt.STAT_EVENT,h),this.stat=v}b(qr,D);function It(h){const v=Zs();bt(v,new qr(v,h))}kt.Ja="timingevent";function or(h,v){D.call(this,kt.Ja,h),this.size=v}b(or,D);function lr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function qn(){this.g=!0}qn.prototype.ua=function(){this.g=!1};function _l(h,v,E,S,G,J){h.info(function(){if(h.g)if(J){var me="",Pe=J.split("&");for(let at=0;at<Pe.length;at++){var zt=Pe[at].split("=");if(zt.length>1){const Nt=zt[0];zt=zt[1];const mr=Nt.split("_");me=mr.length>=2&&mr[1]=="type"?me+(Nt+"="+zt+"&"):me+(Nt+"=redacted&")}}}else me=null;else me=J;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+v+`
`+E+`
`+me})}function eo(h,v,E,S,G,J,me){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+v+`
`+E+`
`+J+" "+me})}function cr(h,v,E,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+El(h,E)+(S?" "+S:"")})}function gs(h,v){h.info(function(){return"TIMEOUT: "+v})}qn.prototype.info=function(){};function El(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var G=S[0];if(G!="noop"&&G!="stop"&&G!="close")for(let me=1;me<S.length;me++)S[me]=""}}}}return Br(J)}catch{return v}}var Hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ea={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ta;function Fr(){}b(Fr,ms),Fr.prototype.g=function(){return new XMLHttpRequest},ta=new Fr;function ur(h){return encodeURIComponent(String(h))}function ci(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function F(h,v,E,S){this.j=h,this.i=v,this.l=E,this.S=S||1,this.V=new fs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oe}function oe(){this.i=null,this.g="",this.h=!1}var be={},Ie={};function Rt(h,v,E){h.M=1,h.A=di(Yt(v)),h.u=E,h.R=!0,Nr(h,null)}function Nr(h,v){h.F=Date.now(),gn(h),h.B=Yt(h.A);var E=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),so(E.i,"t",S),h.C=0,E=h.j.L,h.h=new oe,h.g=Su(h.j,E?v:null,!h.u),h.P>0&&(h.O=new $t(y(h.Y,h,h.g),h.P)),v=h.V,E=h.g,S=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Js[0]=G.toString()),G=Js);for(let J=0;J<G.length;J++){const me=Re(E,G[J],S||v.handleEvent,!1,v.h||v);if(!me)break;v.g[me.key]=me}v=h.J?I(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),ir(),_l(h.i,h.v,h.B,h.l,h.S,h.u)}F.prototype.ba=function(h){h=h.target;const v=this.O;v&&Ir(h)==3?v.j():this.Y(h)},F.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=Ir(this.g),zt=this.g.ya(),at=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||Pe!=4||zt==7||(zt==8||at<=0?ir(3):ir(2)),Hn(this);var v=this.g.ca();this.X=v;var E=to(this);if(this.o=v==200,eo(this.i,this.v,this.B,this.l,this.S,Pe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,G=this.g;if((S=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var J=S;break t}}J=null}if(h=J)cr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gr(this,h);else{this.o=!1,this.m=3,It(12),Fn(this),dr(this);break e}}if(this.R){h=!0;let Nt;for(;!this.K&&this.C<E.length;)if(Nt=Ar(this,E),Nt==Ie){Pe==4&&(this.m=4,It(14),h=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==be){this.m=4,It(15),cr(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else cr(this.i,this.l,Nt,null),Gr(this,Nt);if(ui(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)cr(this.i,this.l,E,"[Invalid Chunked Response]"),Fn(this),dr(this);else if(E.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ll(me),me.P=!0,It(11))}}else cr(this.i,this.l,E,null),Gr(this,E);Pe==4&&Fn(this),this.o&&!this.K&&(Pe==4?_u(this.j,this):(this.o=!1,gn(this)))}else vs(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Fn(this),dr(this)}}}catch{}finally{}};function to(h){if(!ui(h))return h.g.la();const v=pn(h.g);if(v==="")return"";let E="";const S=v.length,G=Ir(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Fn(h),dr(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<S;J++)h.h.h=!0,E+=h.h.i.decode(v[J],{stream:!(G&&J==S-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function ui(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ar(h,v){var E=h.C,S=v.indexOf(`
`,E);return S==-1?Ie:(E=Number(v.substring(E,S)),isNaN(E)?be:(S+=1,S+E>v.length?Ie:(v=v.slice(S,S+E),h.C=S+E,v)))}F.prototype.cancel=function(){this.K=!0,Fn(this)};function gn(h){h.T=Date.now()+h.H,ps(h,h.H)}function ps(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=lr(y(h.aa,h),v)}function Hn(h){h.D&&(d.clearTimeout(h.D),h.D=null)}F.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(gs(this.i,this.B),this.M!=2&&(ir(),It(17)),Fn(this),this.m=2,dr(this)):ps(this,this.T-h)};function dr(h){h.j.I==0||h.K||_u(h.j,h)}function Fn(h){Hn(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,li(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Gr(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||Qr(E.h,h))){if(!h.L&&Qr(E.h,h)&&E.I==3){try{var S=E.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)co(E),ca(E);else break e;vi(E),It(18)}}else E.xa=G[1],0<E.xa-E.K&&G[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=lr(y(E.Va,E),6e3));$r(E.h)<=1&&E.ta&&(E.ta=void 0)}else Zr(E,11)}else if((h.L||E.g==h)&&co(E),!R(v))for(G=E.Ba.g.parse(v),v=0;v<G.length;v++){let at=G[v];const Nt=at[0];if(!(Nt<=E.K))if(E.K=Nt,at=at[1],E.I==2)if(at[0]=="c"){E.M=at[1],E.ba=at[2];const mr=at[3];mr!=null&&(E.ka=mr,E.j.info("VER="+E.ka));const es=at[4];es!=null&&(E.za=es,E.j.info("SVER="+E.za));const Rr=at[5];Rr!=null&&typeof Rr=="number"&&Rr>0&&(S=1.5*Rr,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const jr=h.g;if(jr){const xi=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var J=S.h;J.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Sl(J,J.h),J.h=null))}if(S.G){const uo=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(S.wa=uo,lt(S.J,S.G,uo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var me=h;if(S.na=Tu(S,S.L?S.ba:null,S.W),me.L){Nl(S.h,me);var Pe=me,zt=S.O;zt&&(Pe.H=zt),Pe.D&&(Hn(Pe),gn(Pe)),S.g=me}else xu(S);E.i.length>0&&Wr(E)}else at[0]!="stop"&&at[0]!="close"||Zr(E,7);else E.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Zr(E,7):Ml(E):at[0]!="noop"&&E.l&&E.l.qa(at),E.A=0)}}ir(4)}catch{}}var Kt=class{constructor(h,v){this.g=h,this.map=v}};function wl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $r(h){return h.h?1:h.g?h.g.size:0}function Qr(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Sl(h,v){h.g?h.g.add(v):h.h=v}function Nl(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}wl.prototype.cancel=function(){if(this.i=Al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Al(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return k(h.i)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function no(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const S=h[E].indexOf("=");let G,J=null;S>=0?(G=h[E].substring(0,S),J=h[E].substring(S+1)):G=h[E],v(G,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Gn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Gn?(this.l=h.l,cn(this,h.j),this.o=h.o,this.g=h.g,na(this,h.u),this.h=h.h,Cl(this,yu(h.i)),this.m=h.m):h&&(v=String(h).match(fu))?(this.l=!1,cn(this,v[1]||"",!0),this.o=Kr(v[2]||""),this.g=Kr(v[3]||"",!0),na(this,v[4]),this.h=Kr(v[5]||"",!0),Cl(this,v[6]||"",!0),this.m=Kr(v[7]||"")):(this.l=!1,this.i=new sa(null,this.l))}Gn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(hi(v,ro,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(hi(v,ro,!0),"@"),h.push(ur(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(hi(E,E.charAt(0)=="/"?kl:mu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",hi(E,gu)),h.join("")},Gn.prototype.resolve=function(h){const v=Yt(this);let E=!!h.j;E?cn(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var S=h.h;if(E)na(v,h.u);else if(E=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var G=v.h.lastIndexOf("/");G!=-1&&(S=v.h.slice(0,G+1)+S)}if(G=S,G==".."||G==".")S="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){S=G.lastIndexOf("/",0)==0,G=G.split("/");const J=[];for(let me=0;me<G.length;){const Pe=G[me++];Pe=="."?S&&me==G.length&&J.push(""):Pe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&me==G.length&&J.push("")):(J.push(Pe),S=!0)}S=J.join("/")}else S=G}return E?v.h=S:E=h.i.toString()!=="",E?Cl(v,yu(h.i)):E=!!h.m,E&&(v.m=h.m),v};function Yt(h){return new Gn(h)}function cn(h,v,E){h.j=E?Kr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function na(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Cl(h,v,E){v instanceof sa?(h.i=v,ao(h.i,h.l)):(E||(v=hi(v,ra)),h.i=new sa(v,h.l))}function lt(h,v,E){h.i.set(v,E)}function di(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Kr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function hi(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,On),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function On(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ro=/[#\/\?@]/g,mu=/[#\?:]/g,kl=/[#\?]/g,ra=/[#\?@]/g,gu=/#/g;function sa(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Mn(h){h.g||(h.g=new Map,h.h=0,h.i&&no(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=sa.prototype,s.add=function(h,v){Mn(this),this.i=null,h=aa(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function pu(h,v){Mn(h),v=aa(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Il(h,v){return Mn(h),v=aa(h,v),h.g.has(v)}s.forEach=function(h,v){Mn(this),this.g.forEach(function(E,S){E.forEach(function(G){h.call(v,G,S,this)},this)},this)};function Rl(h,v){Mn(h);let E=[];if(typeof v=="string")Il(h,v)&&(E=E.concat(h.g.get(aa(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}s.set=function(h,v){return Mn(this),this.i=null,h=aa(this,h),Il(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Rl(this,h),h.length>0?String(h[0]):v):v};function so(h,v,E){pu(h,v),E.length>0&&(h.i=null,h.g.set(aa(h,v),k(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var E=v[S];const G=ur(E);E=Rl(this,E);for(let J=0;J<E.length;J++){let me=G;E[J]!==""&&(me+="="+ur(E[J])),h.push(me)}}return this.i=h.join("&")};function yu(h){const v=new sa;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function aa(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function ao(h,v){v&&!h.j&&(Mn(h),h.i=null,h.g.forEach(function(E,S){const G=S.toLowerCase();S!=G&&(pu(this,S),so(this,G,E))},h)),h.j=v}function Cr(h,v){const E=new qn;if(d.Image){const S=new Image;S.onload=x(hr,E,"TestLoadImage: loaded",!0,v,S),S.onerror=x(hr,E,"TestLoadImage: error",!1,v,S),S.onabort=x(hr,E,"TestLoadImage: abort",!1,v,S),S.ontimeout=x(hr,E,"TestLoadImage: timeout",!1,v,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function jl(h,v){const E=new qn,S=new AbortController,G=setTimeout(()=>{S.abort(),hr(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(J=>{clearTimeout(G),J.ok?hr(E,"TestPingServer: ok",!0,v):hr(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),hr(E,"TestPingServer: error",!1,v)})}function hr(h,v,E,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(E)}catch{}}function ia(){this.g=new Ws}function Yr(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Yr,ms),Yr.prototype.g=function(){return new fi(this.i,this.h)};function fi(h,v){We.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(fi,We),s=fi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,kr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;io(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function io(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?oa(this):kr(this),this.readyState==3&&io(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,oa(this))},s.Na=function(h){this.g&&(this.response=h,oa(this))},s.ga=function(){this.g&&oa(this)};function oa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,kr(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function kr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function fr(h){let v="";return Ee(h,function(E,S){v+=S,v+=":",v+=E,v+=`\r
`}),v}function mi(h,v,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=fr(E),typeof h=="string"?E!=null&&ur(E):lt(h,v,E))}function ht(h){We.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(ht,We);var Xr=/^https?$/i,Dl=["POST","PUT"];s=ht.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ta.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){gi(this,J);return}if(h=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)E.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())E.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),G=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Dl,v,void 0)>=0)||S||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,me]of E)this.g.setRequestHeader(J,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){gi(this,J)}};function gi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Ol(h),ys(h)}function Ol(h){h.A||(h.A=!0,bt(h,"complete"),bt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,bt(this,"complete"),bt(this,"abort"),ys(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ys(this,!0)),ht.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?pi(this):this.Xa())},s.Xa=function(){pi(this)};function pi(h){if(h.h&&typeof c<"u"){if(h.v&&Ir(h)==4)setTimeout(h.Ca.bind(h),0);else if(bt(h,"readystatechange"),Ir(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var S;if(S=J===0){let me=String(h.D).match(fu)[1]||null;!me&&d.self&&d.self.location&&(me=d.self.location.protocol.slice(0,-1)),S=!Xr.test(me?me.toLowerCase():"")}E=S}if(E)bt(h,"complete"),bt(h,"success");else{h.o=6;try{var G=Ir(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Ol(h)}}finally{ys(h)}}}}function ys(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||bt(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ir(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Ir(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Xi(v)}};function pn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function vs(h){const v={};h=(h.g&&Ir(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var E=ci(h[S]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[G]||[];v[G]=J,J.push(E)}ke(v,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function la(h){this.za=0,this.i=[],this.j=new qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jr("baseRetryDelayMs",5e3,h),this.Za=Jr("retryDelaySeedMs",1e4,h),this.Ta=Jr("forwardChannelMaxRetries",2,h),this.va=Jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new wl(h&&h.concurrentRequestLimit),this.Ba=new ia,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=la.prototype,s.ka=8,s.I=1,s.connect=function(h,v,E,S){It(0),this.W=h,this.H=v||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Tu(this,null,this.W),Wr(this)};function Ml(h){if(oo(h),h.I==3){var v=h.V++,E=Yt(h.J);if(lt(E,"SID",h.M),lt(E,"RID",v),lt(E,"TYPE","terminate"),yi(h,E),v=new F(h,h.j,v),v.M=2,v.A=di(Yt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=Su(v.j,null),v.g.ea(v.A)),v.F=Date.now(),gn(v)}wu(h)}function ca(h){h.g&&(Ll(h),h.g.cancel(),h.g=null)}function oo(h){ca(h),h.v&&(d.clearTimeout(h.v),h.v=null),co(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Wr(h){if(!Tl(h.h)&&!h.m){h.m=!0;var v=h.Ea;ie||N(),ge||(ie(),ge=!0),j.add(v,h),h.D=0}}function lo(h,v){return $r(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=lr(y(h.Ea,h,v),Eu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new F(this,this.j,h);let J=this.o;if(this.U&&(J?(J=I(J),ce(J,this.U)):J=this.U),this.u!==null||this.R||(G.J=J,J=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=vu(this,G,v),E=Yt(this.J),lt(E,"RID",h),lt(E,"CVER",22),this.G&&lt(E,"X-HTTP-Session-Id",this.G),yi(this,E),J&&(this.R?v="headers="+ur(fr(J))+"&"+v:this.u&&mi(E,this.u,J)),Sl(this.h,G),this.Ra&&lt(E,"TYPE","init"),this.S?(lt(E,"$req",v),lt(E,"SID","null"),G.U=!0,Rt(G,E,null)):Rt(G,E,v),this.I=2}}else this.I==3&&(h?Vl(this,h):this.i.length==0||Tl(this.h)||Vl(this))};function Vl(h,v){var E;v?E=v.l:E=h.V++;const S=Yt(h.J);lt(S,"SID",h.M),lt(S,"RID",E),lt(S,"AID",h.K),yi(h,S),h.u&&h.o&&mi(S,h.u,h.o),E=new F(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=vu(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Sl(h.h,E),Rt(E,S,v)}function yi(h,v){h.H&&Ee(h.H,function(E,S){lt(v,S,E)}),h.l&&Ee({},function(E,S){lt(v,S,E)})}function vu(h,v,E){E=Math.min(h.i.length,E);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var G=h.i;let Pe=-1;for(;;){const zt=["count="+E];Pe==-1?E>0?(Pe=G[0].g,zt.push("ofs="+Pe)):Pe=0:zt.push("ofs="+Pe);let at=!0;for(let Nt=0;Nt<E;Nt++){var J=G[Nt].g;const mr=G[Nt].map;if(J-=Pe,J<0)Pe=Math.max(0,G[Nt].g-100),at=!1;else try{J="req"+J+"_"||"";try{var me=mr instanceof Map?mr:Object.entries(mr);for(const[es,Rr]of me){let jr=Rr;g(Rr)&&(jr=Br(Rr)),zt.push(J+es+"="+encodeURIComponent(jr))}}catch(es){throw zt.push(J+"type="+encodeURIComponent("_badmap")),es}}catch{S&&S(mr)}}if(at){me=zt.join("&");break e}}me=void 0}return h=h.i.splice(0,E),v.G=h,me}function xu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ie||N(),ge||(ie(),ge=!0),j.add(v,h),h.A=0}}function vi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=lr(y(h.Da,h),Eu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,bu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=lr(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),ca(this),bu(this))};function Ll(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function bu(h){h.g=new F(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Yt(h.na);lt(v,"RID","rpc"),lt(v,"SID",h.M),lt(v,"AID",h.K),lt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(v,"TO",h.ia),lt(v,"TYPE","xmlhttp"),yi(h,v),h.u&&h.o&&mi(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=di(Yt(v)),E.u=null,E.R=!0,Nr(E,h)}s.Va=function(){this.C!=null&&(this.C=null,ca(this),vi(this),It(19))};function co(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function _u(h,v){var E=null;if(h.g==v){co(h),Ll(h),h.g=null;var S=2}else if(Qr(h.h,v))E=v.G,Nl(h.h,v),S=1;else return;if(h.I!=0){if(v.o)if(S==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var G=h.D;S=Zs(),bt(S,new or(S,E)),Wr(h)}else xu(h);else if(G=v.m,G==3||G==0&&v.X>0||!(S==1&&lo(h,v)||S==2&&vi(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),G){case 1:Zr(h,5);break;case 4:Zr(h,10);break;case 3:Zr(h,6);break;default:Zr(h,2)}}}function Eu(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function Zr(h,v){if(h.j.info("Error code "+v),v==2){var E=y(h.bb,h),S=h.Ua;const G=!S;S=new Gn(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||cn(S,"https"),di(S),G?Cr(S.toString(),E):jl(S.toString(),E)}else It(2);h.I=0,h.l&&h.l.pa(v),wu(h),oo(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function wu(h){if(h.I=0,h.ja=[],h.l){const v=Al(h.h);(v.length!=0||h.i.length!=0)&&(V(h.ja,v),V(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function Tu(h,v,E){var S=E instanceof Gn?Yt(E):new Gn(E);if(S.g!="")v&&(S.g=v+"."+S.g),na(S,S.u);else{var G=d.location;S=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;const J=new Gn(null);S&&cn(J,S),v&&(J.g=v),G&&na(J,G),E&&(J.h=E),S=J}return E=h.G,v=h.wa,E&&v&&lt(S,E,v),lt(S,"VER",h.ka),yi(h,S),S}function Su(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new ht(new Yr({ab:E})):new ht(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}s=Nu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ua(){}ua.prototype.g=function(h,v){return new kn(h,v)};function kn(h,v){We.call(this),this.g=new la(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!R(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new xs(this)}b(kn,We),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Ml(this.g)},kn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Br(h),h=E);v.i.push(new Kt(v.Ya++,h)),v.I==3&&Wr(v)},kn.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,kn.Z.N.call(this)};function Au(h){Qt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(Au,Qt);function Cu(){Cn.call(this),this.status=1}b(Cu,Cn);function xs(h){this.g=h}b(xs,Nu),xs.prototype.ra=function(){bt(this.g,"a")},xs.prototype.qa=function(h){bt(this.g,new Au(h))},xs.prototype.pa=function(h){bt(this.g,new Cu)},xs.prototype.oa=function(){bt(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,xE=function(){return new ua},vE=function(){return Zs()},yE=kt,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,Qd=Hr,ea.COMPLETE="complete",pE=ea,Ji.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",We.prototype.listen=We.prototype.J,Cc=Ji,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,gE=ht}).apply(typeof Od<"u"?Od:typeof self<"u"?self:typeof window<"u"?window:{});const ab="@firebase/firestore",ib="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Hg("@firebase/firestore");function Ho(){return qi.logLevel}function ve(s,...e){if(qi.logLevel<=Ke.DEBUG){const n=e.map(np);qi.debug(`Firestore (${gl}): ${s}`,...n)}}function Hs(s,...e){if(qi.logLevel<=Ke.ERROR){const n=e.map(np);qi.error(`Firestore (${gl}): ${s}`,...n)}}function nl(s,...e){if(qi.logLevel<=Ke.WARN){const n=e.map(np);qi.warn(`Firestore (${gl}): ${s}`,...n)}}function np(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,bE(s,a,n)}function bE(s,e,n){let a=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Hs(a),new Error(a)}function et(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||bE(e,o,a)}function Ve(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends $s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nn.UNAUTHENTICATED)))}shutdown(){}}class ck{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class uk{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,n(p)):Promise.resolve();let c=new os;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new os,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new os)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(et(typeof a.accessToken=="string",31837,{l:a}),new _E(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class dk{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hk{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new dk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ob{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const a=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ob(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ob(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=mk(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<n&&(a+=e.charAt(o[c]%62))}return a}}function Ye(s,e){return s<e?-1:s>e?1:0}function vg(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),c=e.charAt(a);if(o!==c)return ng(o)===ng(c)?Ye(o,c):ng(o)?1:-1}return Ye(s.length,e.length)}const gk=55296,pk=57343;function ng(s){const e=s.charCodeAt(0);return e>=gk&&e<=pk}function rl(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="__name__";class as{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Ce(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return as.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof as?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const c=as.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ye(e.length,n.length)}static compareSegments(e,n){const a=as.isNumericId(e),o=as.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?as.extractNumericId(e).compare(as.extractNumericId(n)):vg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ga.fromString(e.substring(4,e.length-2))}}class vt extends as{construct(e,n,a){return new vt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new vt(n)}static emptyPath(){return new vt([])}}const yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends as{construct(e,n,a){return new En(e,n,a)}static isValidIdentifier(e){return yk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xg}static keyField(){return new En([xg])}static fromServerFormat(e){const n=[];let a="",o=0;const c=()=>{if(a.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(c(),o++)}if(c(),d)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(vt.fromString(e))}static fromName(e){return new Se(vt.fromString(e).popFirst(5))}static empty(){return new Se(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(s,e,n){if(!n)throw new ye(te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function vk(s,e,n,a){if(e===!0&&a===!0)throw new ye(te.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function lb(s){if(!Se.isDocumentKey(s))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function cb(s){if(Se.isDocumentKey(s))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function wE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ih(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce(12329,{type:typeof s})}function ar(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ih(s);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function xk(s,e){if(e<=0)throw new ye(te.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(s,e){const n={typeString:s};return e&&(n.value=e),n}function ru(s,e){if(!wE(s))throw new ye(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new ye(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=-62135596800,db=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*db);return new Tt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ub)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/db}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ru(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ub;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:an("string",Tt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Tt(0,0))}static max(){return new Oe(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;function bk(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(a===1e9?new Tt(n+1,0):new Tt(n,a));return new Ka(o,Se.empty(),e)}function _k(s){return new Ka(s.readTime,s.key,qc)}class Ka{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ka(Oe.min(),Se.empty(),qc)}static max(){return new Ka(Oe.max(),Se.empty(),qc)}}function Ek(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(s.documentKey,e.documentKey),n!==0?n:Ye(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(s){if(s.code!==te.FAILED_PRECONDITION||s.message!==wk)throw s;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,a)=>{n(e)}))}static reject(e){return new se(((n,a)=>{a(e)}))}static waitFor(e){return new se(((n,a)=>{let o=0,c=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++c,d&&c===o&&n()}),(p=>a(p)))})),d=!0,c===o&&n()}))}static or(e){let n=se.resolve(!1);for(const a of e)n=n.next((o=>o?se.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,c)=>{a.push(n.call(this,o,c))})),this.waitFor(a)}static mapArray(e,n){return new se(((a,o)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next((x=>{d[y]=x,++g,g===c&&a(d)}),(x=>o(x)))}}))}static doWhile(e,n){return new se(((a,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):a()};c()}))}}function Sk(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function su(s){return s==null}function ch(s){return s===0&&1/s==-1/0}function Nk(s){return typeof s=="number"&&Number.isInteger(s)&&!ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="";function Ak(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=hb(e)),e=Ck(s.get(n),e);return hb(e)}function Ck(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case TE:n+="";break;default:n+=c}}return n}function hb(s){return s+TE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ri(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function SE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?a(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,a,o,c){this.key=e,this.value=n,this.color=a??_n.RED,this.left=o??_n.EMPTY,this.right=c??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,c){return new _n(e??this.key,n??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,a),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,a,o,c){return this}insert(e,n,a){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mb(this.data.getIterator())}getIteratorFrom(e){return new mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new nr([])}unionWith(e){let n=new ln(En.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new NE("Invalid base64 string: "+c):c}})(e);return new wn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const kk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ya(s){if(et(!!s,39018),typeof s=="string"){let e=0;const n=kk.exec(s);if(et(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ft(s.seconds),nanos:Ft(s.nanos)}}function Ft(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Xa(s){return typeof s=="string"?wn.fromBase64String(s):wn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="server_timestamp",CE="__type__",kE="__previous_value__",IE="__local_write_time__";function ap(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[CE])==null?void 0:a.stringValue)===AE}function jh(s){const e=s.mapValue.fields[kE];return ap(e)?jh(e):e}function Hc(s){const e=Ya(s.mapValue.fields[IE].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n,a,o,c,d,g,p,y,x){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=x}}const uh="(default)";class Fc{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="__type__",Rk="__max__",Vd={mapValue:{}},jE="__vector__",dh="value";function Ja(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ap(s)?4:Dk(s)?9007199254740991:jk(s)?10:11:Ce(28295,{value:s})}function ds(s,e){if(s===e)return!0;const n=Ja(s);if(n!==Ja(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Hc(s).isEqual(Hc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ya(o.timestampValue),g=Ya(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Xa(o.bytesValue).isEqual(Xa(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ft(o.geoPointValue.latitude)===Ft(c.geoPointValue.latitude)&&Ft(o.geoPointValue.longitude)===Ft(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ft(o.integerValue)===Ft(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Ft(o.doubleValue),g=Ft(c.doubleValue);return d===g?ch(d)===ch(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return rl(s.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(fb(d)!==fb(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!ds(d[p],g[p])))return!1;return!0})(s,e);default:return Ce(52216,{left:s})}}function Gc(s,e){return(s.values||[]).find((n=>ds(n,e)))!==void 0}function sl(s,e){if(s===e)return 0;const n=Ja(s),a=Ja(e);if(n!==a)return Ye(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=Ft(c.integerValue||c.doubleValue),p=Ft(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return gb(s.timestampValue,e.timestampValue);case 4:return gb(Hc(s),Hc(e));case 5:return vg(s.stringValue,e.stringValue);case 6:return(function(c,d){const g=Xa(c),p=Xa(d);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const x=Ye(g[y],p[y]);if(x!==0)return x}return Ye(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ye(Ft(c.latitude),Ft(d.latitude));return g!==0?g:Ye(Ft(c.longitude),Ft(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return pb(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var T,k,V,U;const g=c.fields||{},p=d.fields||{},y=(T=g[dh])==null?void 0:T.arrayValue,x=(k=p[dh])==null?void 0:k.arrayValue,b=Ye(((V=y==null?void 0:y.values)==null?void 0:V.length)||0,((U=x==null?void 0:x.values)==null?void 0:U.length)||0);return b!==0?b:pb(y,x)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Vd.mapValue&&d===Vd.mapValue)return 0;if(c===Vd.mapValue)return 1;if(d===Vd.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},x=Object.keys(y);p.sort(),x.sort();for(let b=0;b<p.length&&b<x.length;++b){const T=vg(p[b],x[b]);if(T!==0)return T;const k=sl(g[p[b]],y[x[b]]);if(k!==0)return k}return Ye(p.length,x.length)})(s.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function gb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ye(s,e);const n=Ya(s),a=Ya(e),o=Ye(n.seconds,a.seconds);return o!==0?o:Ye(n.nanos,a.nanos)}function pb(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const c=sl(n[o],a[o]);if(c)return c}return Ye(n.length,a.length)}function al(s){return bg(s)}function bg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Ya(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Xa(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Se.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const c of n.values||[])o?o=!1:a+=",",a+=bg(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of a)c?c=!1:o+=",",o+=`${d}:${bg(n.fields[d])}`;return o+"}"})(s.mapValue):Ce(61005,{value:s})}function Kd(s){switch(Ja(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jh(s);return e?16+Kd(e):16;case 5:return 2*s.stringValue.length;case 6:return Xa(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,c)=>o+Kd(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return ri(a.fields,((c,d)=>{o+=c.length+Kd(d)})),o})(s.mapValue);default:throw Ce(13486,{value:s})}}function yb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function _g(s){return!!s&&"integerValue"in s}function ip(s){return!!s&&"arrayValue"in s}function vb(s){return!!s&&"nullValue"in s}function xb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Yd(s){return!!s&&"mapValue"in s}function jk(s){var n,a;return((a=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[RE])==null?void 0:a.stringValue)===jE}function Dc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ri(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Dc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dc(s.arrayValue.values[n]);return e}return{...s}}function Dk(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Rk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(n)}setAll(e){let n=En.emptyPath(),a={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,a,o),a={},o=[],n=g.popLast()}d?a[g.lastSegment()]=Dc(d):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,a,o)}delete(e){const n=this.field(e.popLast());Yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){ri(n,((o,c)=>e[o]=c));for(const o of a)delete e[o]}clone(){return new jn(Dc(this.value))}}function DE(s){const e=[];return ri(s.fields,((n,a)=>{const o=new En([n]);if(Yd(a)){const c=DE(a.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,a,o,c,d,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new hn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,n,a,o){return new hn(e,1,n,Oe.min(),a,o,0)}static newNoDocument(e,n){return new hn(e,2,n,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new hn(e,3,n,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function bb(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const c=e[o],d=s.position[o];if(c.field.isKeyField()?a=Se.comparator(Se.fromName(d.referenceValue),n.key):a=sl(d,n.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function _b(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ds(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ok(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class rn extends OE{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new Vk(e,n,a):n==="array-contains"?new Uk(e,a):n==="in"?new zk(e,a):n==="not-in"?new Bk(e,a):n==="array-contains-any"?new qk(e,a):new rn(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new Lk(e,a):new Pk(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sl(n,this.value)):n!==null&&Ja(this.value)===Ja(n)&&this.matchesComparison(sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends OE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pr(e,n)}matches(e){return ME(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ME(s){return s.op==="and"}function VE(s){return Mk(s)&&ME(s)}function Mk(s){for(const e of s.filters)if(e instanceof Pr)return!1;return!0}function Eg(s){if(s instanceof rn)return s.field.canonicalString()+s.op.toString()+al(s.value);if(VE(s))return s.filters.map((e=>Eg(e))).join(",");{const e=s.filters.map((n=>Eg(n))).join(",");return`${s.op}(${e})`}}function LE(s,e){return s instanceof rn?(function(a,o){return o instanceof rn&&a.op===o.op&&a.field.isEqual(o.field)&&ds(a.value,o.value)})(s,e):s instanceof Pr?(function(a,o){return o instanceof Pr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((c,d,g)=>c&&LE(d,o.filters[g])),!0):!1})(s,e):void Ce(19439)}function PE(s){return s instanceof rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${al(n.value)}`})(s):s instanceof Pr?(function(n){return n.op.toString()+" {"+n.getFilters().map(PE).join(" ,")+"}"})(s):"Filter"}class Vk extends rn{constructor(e,n,a){super(e,n,a),this.key=Se.fromName(a.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class Lk extends rn{constructor(e,n){super(e,"in",n),this.keys=UE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Pk extends rn{constructor(e,n){super(e,"not-in",n),this.keys=UE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function UE(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((a=>Se.fromName(a.referenceValue)))}class Uk extends rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ip(n)&&Gc(n.arrayValue,this.value)}}class zk extends rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gc(this.value.arrayValue,n)}}class Bk extends rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gc(this.value.arrayValue,n)}}class qk extends rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Gc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n=null,a=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function Eb(s,e=null,n=[],a=[],o=null,c=null,d=null){return new Hk(s,e,n,a,o,c,d)}function op(s){const e=Ve(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Eg(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>al(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>al(a))).join(",")),e.Te=n}return e.Te}function lp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Ok(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!LE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!_b(s.startAt,e.startAt)&&_b(s.endAt,e.endAt)}function wg(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n=null,a=[],o=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Fk(s,e,n,a,o,c,d,g){return new vl(s,e,n,a,o,c,d,g)}function cp(s){return new vl(s)}function wb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function zE(s){return s.collectionGroup!==null}function Oc(s){const e=Ve(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new ln(En.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new $c(c,a))})),n.has(En.keyField().canonicalString())||e.Ie.push(new $c(En.keyField(),a))}return e.Ie}function ls(s){const e=Ve(s);return e.Ee||(e.Ee=Gk(e,Oc(s))),e.Ee}function Gk(s,e){if(s.limitType==="F")return Eb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new $c(o.field,c)}));const n=s.endAt?new hh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new hh(s.startAt.position,s.startAt.inclusive):null;return Eb(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Tg(s,e){const n=s.filters.concat([e]);return new vl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function fh(s,e,n){return new vl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Dh(s,e){return lp(ls(s),ls(e))&&s.limitType===e.limitType}function BE(s){return`${op(ls(s))}|lt:${s.limitType}`}function Fo(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>PE(o))).join(", ")}]`),su(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>al(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>al(o))).join(",")),`Target(${a})`})(ls(s))}; limitType=${s.limitType})`}function Oh(s,e){return e.isFoundDocument()&&(function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Se.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,o){for(const c of Oc(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,g,p){const y=bb(d,g,p);return d.inclusive?y<=0:y<0})(a.startAt,Oc(a),o)||a.endAt&&!(function(d,g,p){const y=bb(d,g,p);return d.inclusive?y>=0:y>0})(a.endAt,Oc(a),o))})(s,e)}function $k(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function qE(s){return(e,n)=>{let a=!1;for(const o of Oc(s)){const c=Qk(o,e,n);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function Qk(s,e,n){const a=s.field.isKeyField()?Se.comparator(e.key,n.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?sl(p,y):Ce(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ce(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,((n,a)=>{for(const[o,c]of a)e(o,c)}))}isEmpty(){return SE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new jt(Se.comparator);function Fs(){return Kk}const HE=new jt(Se.comparator);function kc(...s){let e=HE;for(const n of s)e=e.insert(n.key,n);return e}function FE(s){let e=HE;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function Li(){return Mc()}function GE(){return Mc()}function Mc(){return new Qi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Yk=new jt(Se.comparator),Xk=new ln(Se.comparator);function Xe(...s){let e=Xk;for(const n of s)e=e.add(n);return e}const Jk=new ln(Ye);function Wk(){return Jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function $E(s){return{integerValue:""+s}}function Zk(s,e){return Nk(e)?$E(e):up(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function eI(s,e,n){return s instanceof mh?(function(o,c){const d={fields:{[CE]:{stringValue:AE},[IE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ap(c)&&(c=jh(c)),c&&(d.fields[kE]=c),{mapValue:d}})(n,e):s instanceof Qc?KE(s,e):s instanceof Kc?YE(s,e):(function(o,c){const d=QE(o,c),g=Tb(d)+Tb(o.Ae);return _g(d)&&_g(o.Ae)?$E(g):up(o.serializer,g)})(s,e)}function tI(s,e,n){return s instanceof Qc?KE(s,e):s instanceof Kc?YE(s,e):n}function QE(s,e){return s instanceof gh?(function(a){return _g(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class mh extends Mh{}class Qc extends Mh{constructor(e){super(),this.elements=e}}function KE(s,e){const n=XE(e);for(const a of s.elements)n.some((o=>ds(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Kc extends Mh{constructor(e){super(),this.elements=e}}function YE(s,e){let n=XE(e);for(const a of s.elements)n=n.filter((o=>!ds(o,a)));return{arrayValue:{values:n}}}class gh extends Mh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tb(s){return Ft(s.integerValue||s.doubleValue)}function XE(s){return ip(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function nI(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Qc&&o instanceof Qc||a instanceof Kc&&o instanceof Kc?rl(a.elements,o.elements,ds):a instanceof gh&&o instanceof gh?ds(a.Ae,o.Ae):a instanceof mh&&o instanceof mh})(s.transform,e.transform)}class rI{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Vh{}function JE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new iu(s.key,sn.none()):new au(s.key,s.data,sn.none());{const n=s.data,a=jn.empty();let o=new ln(En.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?a.delete(c):a.set(c,d),o=o.add(c)}return new si(s.key,a,new nr(o.toArray()),sn.none())}}function sI(s,e,n){s instanceof au?(function(o,c,d){const g=o.value.clone(),p=Nb(o.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):s instanceof si?(function(o,c,d){if(!Xd(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=Nb(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(WE(o)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Vc(s,e,n,a){return s instanceof au?(function(c,d,g,p){if(!Xd(c.precondition,d))return g;const y=c.value.clone(),x=Ab(c.fieldTransforms,p,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof si?(function(c,d,g,p){if(!Xd(c.precondition,d))return g;const y=Ab(c.fieldTransforms,p,d),x=d.data;return x.setAll(WE(c)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(s,e,n,a):(function(c,d,g){return Xd(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,n)}function aI(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),c=QE(a.transform,o||null);c!=null&&(n===null&&(n=jn.empty()),n.set(a.field,c))}return n||null}function Sb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&rl(a,o,((c,d)=>nI(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class au extends Vh{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class si extends Vh{constructor(e,n,a,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function WE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function Nb(s,e,n){const a=new Map;et(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],d=c.transform,g=e.data.field(c.field);a.set(c.field,tI(d,g,n[o]))}return a}function Ab(s,e,n){const a=new Map;for(const o of s){const c=o.transform,d=n.data.field(o.field);a.set(o.field,eI(c,d,e))}return a}class iu extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZE extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&sI(c,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Vc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Vc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=GE();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const p=JE(d,g);p!==null&&a.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((n,a)=>Sb(n,a)))&&rl(this.baseMutations,e.baseMutations,((n,a)=>Sb(n,a)))}}class dp{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){et(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return Yk})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,a[d].version);return new dp(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,Ze;function ew(s){switch(s){case te.OK:return Ce(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ce(15467,{code:s})}}function tw(s){if(s===void 0)return Hs("GRPC error has no .code"),te.UNKNOWN;switch(s){case nn.OK:return te.OK;case nn.CANCELLED:return te.CANCELLED;case nn.UNKNOWN:return te.UNKNOWN;case nn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case nn.INTERNAL:return te.INTERNAL;case nn.UNAVAILABLE:return te.UNAVAILABLE;case nn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case nn.NOT_FOUND:return te.NOT_FOUND;case nn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case nn.ABORTED:return te.ABORTED;case nn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case nn.DATA_LOSS:return te.DATA_LOSS;default:return Ce(39323,{code:s})}}(Ze=nn||(nn={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new Ga([4294967295,4294967295],0);function Cb(s){const e=cI().encode(s),n=new mE;return n.update(e),new Uint8Array(n.digest())}function kb(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ga([n,a],0),new Ga([o,c],0)]}class hp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Ic(`Invalid padding: ${n}`);if(a<0)throw new Ic(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ga.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(Ga.fromNumber(a)));return o.compare(uI)===1&&(o=new Ga([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cb(e),[a,o]=kb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,o,c);if(!this.we(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new hp(c,o,n);return a.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=Cb(e),[a,o]=kb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,a,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Lh(Oe.min(),o,new jt(Ye),Fs(),Xe())}}class ou{constructor(e,n,a,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new ou(a,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class nw{constructor(e,n){this.targetId=e,this.Ce=n}}class rw{constructor(e,n,a=wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class Ib{constructor(){this.ve=0,this.Fe=Rb(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),a=Xe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Ce(38017,{changeType:c})}})),new ou(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=Rb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fs(),this.Je=Ld(),this.He=Ld(),this.Ye=new jt(Ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(wg(c))if(a===0){const d=new Se(c.path);this.et(n,d,hn.newNoDocument(d,Oe.min()))}else et(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=n;let d,g;try{d=Xa(a).toUint8Array()}catch(p){if(p instanceof NE)return nl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new hp(d,o,c)}catch(p){return nl(p instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&wg(g.target)){const p=new Se(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,hn.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let a=Xe();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new Lh(e,n,this.Ye,this.je,a);return this.je=Fs(),this.Je=Ld(),this.He=Ld(),this.Ye=new jt(Ye),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ib,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ln(Ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ln(Ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ib),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ld(){return new jt(Se.comparator)}function Rb(){return new jt(Se.comparator)}const hI={asc:"ASCENDING",desc:"DESCENDING"},fI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mI={and:"AND",or:"OR"};class gI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sg(s,e){return s.useProto3Json||su(e)?e:{value:e}}function ph(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function pI(s,e){return ph(s,e.toTimestamp())}function rr(s){return et(!!s,49232),Oe.fromTimestamp((function(n){const a=Ya(n);return new Tt(a.seconds,a.nanos)})(s))}function fp(s,e){return Ng(s,e).canonicalString()}function Ng(s,e){const n=(function(o){return new vt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function aw(s){const e=vt.fromString(s);return et(dw(e),10190,{key:e.toString()}),e}function yh(s,e){return fp(s.databaseId,e.path)}function Lc(s,e){const n=aw(e);if(n.get(1)!==s.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Se(ow(n))}function iw(s,e){return fp(s.databaseId,e)}function yI(s){const e=aw(s);return e.length===4?vt.emptyPath():ow(e)}function Ag(s){return new vt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ow(s){return et(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function jb(s,e,n){return{name:yh(s,e),fields:n.value.mapValue.fields}}function vI(s,e){return"found"in e?(function(a,o){et(!!o.found,43571),o.found.name,o.found.updateTime;const c=Lc(a,o.found.name),d=rr(o.found.updateTime),g=o.found.createTime?rr(o.found.createTime):Oe.min(),p=new jn({mapValue:{fields:o.found.fields}});return hn.newFoundDocument(c,d,g,p)})(s,e):"missing"in e?(function(a,o){et(!!o.missing,3894),et(!!o.readTime,22933);const c=Lc(a,o.missing),d=rr(o.readTime);return hn.newNoDocument(c,d)})(s,e):Ce(7234,{result:e})}function xI(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(et(x===void 0||typeof x=="string",58123),wn.fromBase64String(x||"")):(et(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),wn.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const x=y.code===void 0?te.UNKNOWN:tw(y.code);return new ye(x,y.message||"")})(d);n=new rw(a,o,c,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Lc(s,a.document.name),c=rr(a.document.updateTime),d=a.document.createTime?rr(a.document.createTime):Oe.min(),g=new jn({mapValue:{fields:a.document.fields}}),p=hn.newFoundDocument(o,c,d,g),y=a.targetIds||[],x=a.removedTargetIds||[];n=new Jd(y,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Lc(s,a.document),c=a.readTime?rr(a.readTime):Oe.min(),d=hn.newNoDocument(o,c),g=a.removedTargetIds||[];n=new Jd([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Lc(s,a.document),c=a.removedTargetIds||[];n=new Jd([],c,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,d=new lI(o,c),g=a.targetId;n=new nw(g,d)}}return n}function lw(s,e){let n;if(e instanceof au)n={update:jb(s,e.key,e.value)};else if(e instanceof iu)n={delete:yh(s,e.key)};else if(e instanceof si)n={update:jb(s,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof ZE))return Ce(16599,{Vt:e.type});n={verify:yh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(c,d){const g=d.transform;if(g instanceof mh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Qc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Kc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof gh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ce(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:pI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)})(s,e.precondition)),n}function bI(s,e){return s&&s.length>0?(et(e!==void 0,14353),s.map((n=>(function(o,c){let d=o.updateTime?rr(o.updateTime):rr(c);return d.isEqual(Oe.min())&&(d=rr(c)),new rI(d,o.transformResults||[])})(n,e)))):[]}function _I(s,e){return{documents:[iw(s,e.path)]}}function EI(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=iw(s,o);const c=(function(y){if(y.length!==0)return uw(Pr.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((x=>(function(T){return{field:Go(T.field),direction:SI(T.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Sg(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function wI(s){let e=yI(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){et(a===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(b){const T=cw(b);return T instanceof Pr&&VE(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((T=>(function(V){return new $c($o(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(b){let T;return T=typeof b=="object"?b.value:b,su(T)?null:T})(n.limit));let p=null;n.startAt&&(p=(function(b){const T=!!b.before,k=b.values||[];return new hh(k,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const T=!b.before,k=b.values||[];return new hh(k,T)})(n.endAt)),Fk(e,o,d,c,g,"F",p,y)}function TI(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=$o(n.unaryFilter.field);return rn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=$o(n.unaryFilter.field);return rn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$o(n.unaryFilter.field);return rn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=$o(n.unaryFilter.field);return rn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(s):s.fieldFilter!==void 0?(function(n){return rn.create($o(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Pr.create(n.compositeFilter.filters.map((a=>cw(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(s):Ce(30097,{filter:s})}function SI(s){return hI[s]}function NI(s){return fI[s]}function AI(s){return mI[s]}function Go(s){return{fieldPath:s.canonicalString()}}function $o(s){return En.fromServerFormat(s.fieldPath)}function uw(s){return s instanceof rn?(function(n){if(n.op==="=="){if(xb(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(vb(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xb(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(vb(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:NI(n.op),value:n.value}}})(s):s instanceof Pr?(function(n){const a=n.getFilters().map((o=>uw(o)));return a.length===1?a[0]:{compositeFilter:{op:AI(n.op),filters:a}}})(s):Ce(54877,{filter:s})}function CI(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function dw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,a,o,c=Oe.min(),d=Oe.min(),g=wn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.yt=e}}function II(s){const e=wI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Cn=new jI}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Ka.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Ka.min())}updateCollectionGroup(e,n,a){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class jI{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new ln(vt.comparator),c=!o.has(a);return this.index[n]=o.add(a),c}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new ln(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hw=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(hw,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="LruGarbageCollector",DI=1048576;function Mb([s,e],[n,a]){const o=Ye(s,n);return o===0?Ye(e,a):o}class OI{constructor(e){this.Ir=e,this.buffer=new ln(Mb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Mb(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MI{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Ob,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yl(n)?ve(Ob,"Ignoring IndexedDB error during garbage collection: ",n):await pl(n)}await this.Vr(3e5)}))}}class VI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Rh.ce);const a=new OI(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Db)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Db):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,c,d,g,p,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(a=b,g=Date.now(),this.removeTargets(e,a,n)))).next((b=>(c=b,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((b=>(y=Date.now(),Ho()<=Ke.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${b} documents in `+(y-p)+`ms
Total Duration: ${y-x}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function LI(s,e){return new VI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Qi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?se.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Vc(a.mutation,o,nr.empty(),Tt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Xe()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Xe()){const o=Li();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((c=>{let d=kc();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=Li();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Xe())))}populateOverlays(e,n,a){const o=[];return a.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,a,o){let c=Fs();const d=Mc(),g=(function(){return Mc()})();return n.forEach(((p,y)=>{const x=a.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof si)?c=c.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),Vc(x.mutation,y,x.mutation.getFieldMask(),Tt.now())):d.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>g.set(y,new UI(x,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Mc();let o=new jt(((d,g)=>d-g)),c=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let x=a.get(p)||nr.empty();x=g.applyToLocalView(y,x),a.set(p,x);const b=(o.get(g.batchId)||Xe()).add(p);o=o.insert(g.batchId,b)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,x=p.value,b=GE();x.forEach((T=>{if(!c.has(T)){const k=JE(n.get(T),a.get(T));k!==null&&b.set(T,k),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,b))}return se.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(d){return Se.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-c.size):se.resolve(Li());let g=qc,p=c;return d.next((y=>se.forEach(y,((x,b)=>(g<b.largestBatchId&&(g=b.largestBatchId),c.get(x)?se.resolve():this.remoteDocumentCache.getEntry(e,x).next((T=>{p=p.insert(x,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,Xe()))).next((x=>({batchId:g,changes:FE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((a=>{let o=kc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const c=n.collectionGroup;let d=kc();return this.indexManager.getCollectionParents(e,c).next((g=>se.forEach(g,(p=>{const y=(function(b,T){return new vl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((x=>{x.forEach(((b,T)=>{d=d.insert(b,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,c,o)))).next((d=>{c.forEach(((p,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,hn.newInvalidDocument(x)))}));let g=kc();return d.forEach(((p,y)=>{const x=c.get(p);x!==void 0&&Vc(x.mutation,y,nr.empty(),Tt.now()),Oh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:rr(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:II(o.bundledQuery),readTime:rr(o.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.overlays=new jt(Se.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Li();return se.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&a.set(o,c)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,c)=>{this.St(e,n,c)})),se.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),se.resolve()}getOverlaysForCollection(e,n,a){const o=Li(),c=n.length+1,d=new Se(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>a&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let c=new jt(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let x=c.get(y.largestBatchId);x===null&&(x=Li(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const g=Li(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,x)=>g.set(y,x))),!(g.size()>=o)););return se.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new oI(n,a));let c=this.qr.get(n);c===void 0&&(c=Xe(),this.qr.set(n,c)),this.qr.set(n,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.Qr=new ln(dn.$r),this.Ur=new ln(dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new dn(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new dn(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Se(new vt([])),a=new dn(n,e),o=new dn(n,e+1),c=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new vt([])),a=new dn(n,e),o=new dn(n,e+1);let c=Xe();return this.Ur.forEachInRange([a,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new dn(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class dn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Ye(e.Yr,n.Yr)}static Kr(e,n){return Ye(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ln(dn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new iI(c,n,a,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new dn(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new dn(n,0),o=new dn(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,o],(d=>{const g=this.Xr(d.Yr);c.push(g)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new ln(Ye);return n.forEach((o=>{const c=new dn(o,0),d=new dn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{a=a.add(g.Yr)}))})),se.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let c=a;Se.isDocumentKey(c)||(c=c.child(""));const d=new dn(new Se(c),0);let g=new ln(Ye);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),d),se.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return se.forEach(n.mutations,(o=>{const c=new dn(o.key,n.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new dn(n,0),o=this.Zr.firstAfterOrEqual(a);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.ri=e,this.docs=(function(){return new jt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return se.resolve(a?a.document.mutableCopy():hn.newInvalidDocument(n))}getEntries(e,n){let a=Fs();return n.forEach((o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():hn.newInvalidDocument(o))})),se.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let c=Fs();const d=n.path,g=new Se(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:x}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||Ek(_k(x),a)<=0||(o.has(x.key)||Oh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,n,a,o){Ce(9500)}ii(e,n){return se.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new $I(this)}getSize(e){return se.resolve(this.size)}}class $I extends PI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.persistence=e,this.si=new Qi((n=>op(n)),lp),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new mp,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new il(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,a){let o=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),se.waitFor(c).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return se.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),se.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return se.resolve(a)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rh(0),this.li=!1,this.li=!0,this.hi=new HI,this.referenceDelegate=e(this),this.Pi=new QI(this),this.indexManager=new RI,this.remoteDocumentCache=(function(o){return new GI(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new kI(n),this.Ii=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new FI(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){ve("MemoryPersistence","Starting transaction:",e);const o=new KI(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return se.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class KI extends Tk{constructor(e){super(),this.currentSequenceNumber=e}}class gp{constructor(e){this.persistence=e,this.Ri=new mp,this.Vi=null}static mi(e){return new gp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),se.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(a=>{const o=Se.fromPath(a);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vh{constructor(e,n){this.persistence=e,this.pi=new Qi((a=>Ak(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=LI(this,n)}static mi(e,n){return new vh(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((a,o)=>this.br(e,a,o).next((c=>c?se.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(a++,c.removeEntry(d,Oe.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),se.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kd(e.data.value)),n}br(e,n,a){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=Xe(),o=Xe();for(const c of n.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new pp(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return A2()?8:Sk(An())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,a).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new YI;return this.Ss(e,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>c.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(Ho()<=Ke.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Ho()<=Ke.DEBUG&&ve("QueryEngine","Query:",Fo(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Ho()<=Ke.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(n))):se.resolve())}ys(e,n){if(wb(n))return se.resolve(null);let a=ls(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=fh(n,null,"F"),a=ls(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const d=Xe(...c);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,a).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(e,fh(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,a,o){return wb(n)||o.isEqual(Oe.min())?se.resolve(null):this.ps.getDocuments(e,a).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,a,o)?se.resolve(null):(Ho()<=Ke.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(n)),this.vs(e,d,n,bk(o,qc)).next((g=>g)))}))}Ds(e,n){let a=new ln(qE(e));return n.forEach(((o,c)=>{Oh(e,c)&&(a=a.add(c))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,a){return Ho()<=Ke.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ka.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="LocalStore",JI=3e8;class WI{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new jt(Ye),this.xs=new Qi((c=>op(c)),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function ZI(s,e,n,a){return new WI(s,e,n,a)}async function mw(s,e){const n=Ve(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((c=>{const d=[],g=[];let p=Xe();for(const y of o){d.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}for(const y of c){g.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}return n.localDocuments.getDocuments(a,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function eR(s,e){const n=Ve(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,x){const b=y.batch,T=b.keys();let k=se.resolve();return T.forEach((V=>{k=k.next((()=>x.getEntry(p,V))).next((U=>{const z=y.docVersions.get(V);et(z!==null,48541),U.version.compareTo(z)<0&&(b.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),x.addEntry(U)))}))})),k.next((()=>g.mutationQueue.removeMutationBatch(p,b)))})(n,a,e,c).next((()=>c.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let p=Xe();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function gw(s){const e=Ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function tR(s,e){const n=Ve(s),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((x,b)=>{const T=o.get(b);if(!T)return;g.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,b))));let k=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?k=k.withResumeToken(wn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):x.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(x.resumeToken,a)),o=o.insert(b,k),(function(U,z,B){return U.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=JI?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,k,x)&&g.push(n.Pi.updateTargetData(c,k))}));let p=Fs(),y=Xe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),g.push(nR(c,d,e.documentUpdates).next((x=>{p=x.ks,y=x.qs}))),!a.isEqual(Oe.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));g.push(x)}return se.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function nR(s,e,n){let a=Xe(),o=Xe();return n.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let d=Fs();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Oe.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):ve(yp,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function rR(s,e){const n=Ve(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=sp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function sR(s,e){const n=Ve(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((c=>c?(o=c,se.resolve(o)):n.Pi.allocateTargetId(a).next((d=>(o=new Ua(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function Cg(s,e,n){const a=Ve(s),o=a.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",c,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!yl(d))throw d;ve(yp,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function Vb(s,e,n){const a=Ve(s);let o=Oe.min(),c=Xe();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,x){const b=Ve(p),T=b.xs.get(x);return T!==void 0?se.resolve(b.Ms.get(T)):b.Pi.getTargetData(y,x)})(a,d,ls(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,n?o:Oe.min(),n?c:Xe()))).next((g=>(aR(a,$k(e),g),{documents:g,Qs:c})))))}function aR(s,e,n){let a=s.Os.get(e)||Oe.min();n.forEach(((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Os.set(e,a)}class Lb{constructor(){this.activeTargetIds=Wk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iR{constructor(){this.Mo=new Lb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Lb,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="ConnectivityMonitor";class Ub{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Pb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Pb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function kg(){return Pd===null?Pd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="RestConnection",lR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===uh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,c){const d=kg(),g=this.zo(e,n.toUriEncodedString());ve(rg,`Sending RPC '${e}' ${d}:`,g,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(g),x=hl(y);return this.Jo(e,g,p,a,x).then((b=>(ve(rg,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw nl(rg,`RPC '${e}' ${d} failed with error: `,b,"url: ",g,"request:",a),b}))}Ho(e,n,a,o,c,d){return this.Go(e,n,a,o,c)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),a&&a.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const a=lR[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class dR extends cR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,c){const d=kg();return new Promise(((g,p)=>{const y=new gE;y.setWithCredentials(!0),y.listenOnce(pE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Qd.NO_ERROR:const b=y.getResponseJson();ve(Sn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),g(b);break;case Qd.TIMEOUT:ve(Sn,`RPC '${e}' ${d} timed out`),p(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const T=y.getStatus();if(ve(Sn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const V=k==null?void 0:k.error;if(V&&V.status&&V.message){const U=(function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(q)>=0?q:te.UNKNOWN})(V.status);p(new ye(U,V.message))}else p(new ye(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ye(te.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(Sn,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(o);ve(Sn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",x,a,15)}))}T_(e,n,a){const o=kg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=xE(),g=vE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const x=c.join("");ve(Sn,`Creating RPC '${e}' stream ${o}: ${x}`,p);const b=d.createWebChannel(x,p);this.I_(b);let T=!1,k=!1;const V=new uR({Yo:z=>{k?ve(Sn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(T||(ve(Sn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),T=!0),ve(Sn,`RPC '${e}' stream ${o} sending:`,z),b.send(z))},Zo:()=>b.close()}),U=(z,B,q)=>{z.listen(B,(Y=>{try{q(Y)}catch(de){setTimeout((()=>{throw de}),0)}}))};return U(b,Cc.EventType.OPEN,(()=>{k||(ve(Sn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),U(b,Cc.EventType.CLOSE,(()=>{k||(k=!0,ve(Sn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(b))})),U(b,Cc.EventType.ERROR,(z=>{k||(k=!0,nl(Sn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),V.a_(new ye(te.UNAVAILABLE,"The operation could not be completed")))})),U(b,Cc.EventType.MESSAGE,(z=>{var B;if(!k){const q=z.data[0];et(!!q,16349);const Y=q,de=(Y==null?void 0:Y.error)||((B=Y[0])==null?void 0:B.error);if(de){ve(Sn,`RPC '${e}' stream ${o} received error:`,de);const ie=de.status;let ge=(function(A){const M=nn[A];if(M!==void 0)return tw(M)})(ie),j=de.message;ge===void 0&&(ge=te.INTERNAL,j="Unknown error status: "+ie+" with message "+de.message),k=!0,V.a_(new ye(ge,j)),b.close()}else ve(Sn,`RPC '${e}' stream ${o} received:`,q),V.u_(q)}})),U(g,yE.STAT_EVENT,(z=>{z.stat===yg.PROXY?ve(Sn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===yg.NOPROXY&&ve(Sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(s){return new gI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,a=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="PersistentStream";class pw{constructor(e,n,a,o,c,d,g,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Hs(n.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new ye(te.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(zb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(zb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hR extends pw{constructor(e,n,a,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xI(this.serializer,e),a=(function(c){if(!("targetChange"in c))return Oe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?rr(d.readTime):Oe.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=Ag(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=wg(p)?{documents:_I(c,p)}:{query:EI(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=sw(c,d.resumeToken);const y=Sg(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Oe.min())>0){g.readTime=ph(c,d.snapshotVersion.toTimestamp());const y=Sg(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=TI(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=Ag(this.serializer),n.removeTarget=e,this.q_(n)}}class fR extends pw{constructor(e,n,a,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bI(e.writeResults,e.commitTime),a=rr(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Ag(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>lw(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{}class gR extends mR{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Ng(n,a),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(te.UNKNOWN,c.toString())}))}Ho(e,n,a,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Ng(n,a),o,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class pR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hs(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="RemoteStore";class yR{constructor(e,n,a,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Ki(this)&&(ve(Hi,"Restarting streams for network reachability change."),await(async function(p){const y=Ve(p);y.Ea.add(4),await lu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Uh(y)})(this))}))})),this.Ra=new pR(a,o)}}async function Uh(s){if(Ki(s))for(const e of s.da)await e(!0)}async function lu(s){for(const e of s.da)await e(!1)}function yw(s,e){const n=Ve(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ep(n)?_p(n):xl(n).O_()&&bp(n,e))}function xp(s,e){const n=Ve(s),a=xl(n);n.Ia.delete(e),a.O_()&&vw(n,e),n.Ia.size===0&&(a.O_()?a.L_():Ki(n)&&n.Ra.set("Unknown"))}function bp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xl(s).Y_(e)}function vw(s,e){s.Va.Ue(e),xl(s).Z_(e)}function _p(s){s.Va=new dI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),xl(s).start(),s.Ra.ua()}function Ep(s){return Ki(s)&&!xl(s).x_()&&s.Ia.size>0}function Ki(s){return Ve(s).Ea.size===0}function xw(s){s.Va=void 0}async function vR(s){s.Ra.set("Online")}async function xR(s){s.Ia.forEach(((e,n)=>{bp(s,e)}))}async function bR(s,e){xw(s),Ep(s)?(s.Ra.ha(e),_p(s)):s.Ra.set("Unknown")}async function _R(s,e,n){if(s.Ra.set("Online"),e instanceof rw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){ve(Hi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await xh(s,a)}else if(e instanceof Jd?s.Va.Ze(e):e instanceof nw?s.Va.st(e):s.Va.tt(e),!n.isEqual(Oe.min()))try{const a=await gw(s.localStore);n.compareTo(a)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const x=c.Ia.get(y);x&&c.Ia.set(y,x.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const x=c.Ia.get(p);if(!x)return;c.Ia.set(p,x.withResumeToken(wn.EMPTY_BYTE_STRING,x.snapshotVersion)),vw(c,p);const b=new Ua(x.target,p,y,x.sequenceNumber);bp(c,b)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){ve(Hi,"Failed to raise snapshot:",a),await xh(s,a)}}async function xh(s,e,n){if(!yl(e))throw e;s.Ea.add(1),await lu(s),s.Ra.set("Offline"),n||(n=()=>gw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ve(Hi,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Uh(s)}))}function bw(s,e){return e().catch((n=>xh(s,n,e)))}async function zh(s){const e=Ve(s),n=Wa(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;ER(e);)try{const o=await rR(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,wR(e,o)}catch(o){await xh(e,o)}_w(e)&&Ew(e)}function ER(s){return Ki(s)&&s.Ta.length<10}function wR(s,e){s.Ta.push(e);const n=Wa(s);n.O_()&&n.X_&&n.ea(e.mutations)}function _w(s){return Ki(s)&&!Wa(s).x_()&&s.Ta.length>0}function Ew(s){Wa(s).start()}async function TR(s){Wa(s).ra()}async function SR(s){const e=Wa(s);for(const n of s.Ta)e.ea(n.mutations)}async function NR(s,e,n){const a=s.Ta.shift(),o=dp.from(a,e,n);await bw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await zh(s)}async function AR(s,e){e&&Wa(s).X_&&await(async function(a,o){if((function(d){return ew(d)&&d!==te.ABORTED})(o.code)){const c=a.Ta.shift();Wa(a).B_(),await bw(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o))),await zh(a)}})(s,e),_w(s)&&Ew(s)}async function Bb(s,e){const n=Ve(s);n.asyncQueue.verifyOperationInProgress(),ve(Hi,"RemoteStore received new credentials");const a=Ki(n);n.Ea.add(3),await lu(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uh(n)}async function CR(s,e){const n=Ve(s);e?(n.Ea.delete(2),await Uh(n)):e||(n.Ea.add(2),await lu(n),n.Ra.set("Unknown"))}function xl(s){return s.ma||(s.ma=(function(n,a,o){const c=Ve(n);return c.sa(),new hR(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:vR.bind(null,s),t_:xR.bind(null,s),r_:bR.bind(null,s),H_:_R.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Ep(s)?_p(s):s.Ra.set("Unknown")):(await s.ma.stop(),xw(s))}))),s.ma}function Wa(s){return s.fa||(s.fa=(function(n,a,o){const c=Ve(n);return c.sa(),new fR(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:TR.bind(null,s),r_:AR.bind(null,s),ta:SR.bind(null,s),na:NR.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await zh(s)):(await s.fa.stop(),s.Ta.length>0&&(ve(Hi,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,a,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,c){const d=Date.now()+a,g=new wp(e,n,d,o,c);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(s,e){if(Hs("AsyncQueue",`${e}: ${s}`),yl(s))return new ye(te.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Se.comparator(n.key,a.key):(n,a)=>Se.comparator(n.key,a.key),this.keyedMap=kc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Wo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.ga=new jt(Se.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class ol{constructor(e,n,a,o,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new ol(e,n,Wo.emptySet(n),d,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class IR{constructor(){this.queries=Hb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Ve(n),c=o.queries;o.queries=Hb(),c.forEach(((d,g)=>{for(const p of g.Sa)p.onError(a)}))})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function Hb(){return new Qi((s=>BE(s)),Dh)}async function ww(s,e){const n=Ve(s);let a=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(a=2):(c=new kR,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=Tp(d,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Sp(n)}async function Tw(s,e){const n=Ve(s),a=e.query;let o=3;const c=n.queries.get(a);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function RR(s,e){const n=Ve(s);let a=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(o)&&(a=!0);d.wa=o}}a&&Sp(n)}function jR(s,e,n){const a=Ve(s),o=a.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);a.queries.delete(e)}function Sp(s){s.Ca.forEach((e=>{e.next()}))}var Ig,Fb;(Fb=Ig||(Ig={})).Ma="default",Fb.Cache="cache";class Sw{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ol(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.key=e}}class Aw{constructor(e){this.key=e}}class DR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=qE(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new qb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,b)=>{const T=o.get(x),k=Oh(this.query,b)?b:null,V=!!T&&this.mutatedKeys.has(T.key),U=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let z=!1;T&&k?T.data.isEqual(k.data)?V!==U&&(a.track({type:3,doc:k}),z=!0):this.su(T,k)||(a.track({type:2,doc:k}),z=!0,(p&&this.eu(k,p)>0||y&&this.eu(k,y)<0)&&(g=!0)):!T&&k?(a.track({type:0,doc:k}),z=!0):T&&!k&&(a.track({type:1,doc:T}),z=!0,(p||y)&&(g=!0)),z&&(k?(d=d.add(k),c=U?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),a.track({type:1,doc:x})}return{tu:d,iu:a,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,b)=>(function(k,V){const U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:z})}};return U(k)-U(V)})(x.type,b.type)||this.eu(x.doc,b.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new ol(this.query,e.tu,c,d,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new Aw(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new Nw(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Np="SyncEngine";class OR{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class MR{constructor(e){this.key=e,this.hu=!1}}class VR{constructor(e,n,a,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Qi((g=>BE(g)),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Se.comparator),this.Au=new Map,this.Ru=new mp,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LR(s,e,n=!0){const a=Dw(s);let o;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Cw(a,e,n,!0),o}async function PR(s,e){const n=Dw(s);await Cw(n,e,!0,!1)}async function Cw(s,e,n,a){const o=await sR(s.localStore,ls(e)),c=o.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let g;return a&&(g=await UR(s,e,c,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&yw(s.remoteStore,o),g}async function UR(s,e,n,a,o){s.pu=(b,T,k)=>(async function(U,z,B,q){let Y=z.view.ru(B);Y.Cs&&(Y=await Vb(U.localStore,z.query,!1).then((({documents:j})=>z.view.ru(j,Y))));const de=q&&q.targetChanges.get(z.targetId),ie=q&&q.targetMismatches.get(z.targetId)!=null,ge=z.view.applyChanges(Y,U.isPrimaryClient,de,ie);return $b(U,z.targetId,ge.au),ge.snapshot})(s,b,T,k);const c=await Vb(s.localStore,e,!0),d=new DR(e,c.Qs),g=d.ru(c.documents),p=ou.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),y=d.applyChanges(g,s.isPrimaryClient,p);$b(s,n,y.au);const x=new OR(e,n,d);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function zR(s,e,n){const a=Ve(s),o=a.Tu.get(e),c=a.Iu.get(o.targetId);if(c.length>1)return a.Iu.set(o.targetId,c.filter((d=>!Dh(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Cg(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&xp(a.remoteStore,o.targetId),Rg(a,o.targetId)})).catch(pl)):(Rg(a,o.targetId),await Cg(a.localStore,o.targetId,!0))}async function BR(s,e){const n=Ve(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),xp(n.remoteStore,a.targetId))}async function qR(s,e,n){const a=YR(s);try{const o=await(function(d,g){const p=Ve(d),y=Tt.now(),x=g.reduce(((k,V)=>k.add(V.key)),Xe());let b,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let V=Fs(),U=Xe();return p.Ns.getEntries(k,x).next((z=>{V=z,V.forEach(((B,q)=>{q.isValidDocument()||(U=U.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(k,V))).next((z=>{b=z;const B=[];for(const q of g){const Y=aI(q,b.get(q.key).overlayedDocument);Y!=null&&B.push(new si(q.key,Y,DE(Y.value.mapValue),sn.exists(!0)))}return p.mutationQueue.addMutationBatch(k,y,B,g)})).next((z=>{T=z;const B=z.applyToLocalDocumentSet(b,U);return p.documentOverlayCache.saveOverlays(k,z.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:FE(b)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new jt(Ye)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y})(a,o.batchId,n),await cu(a,o.changes),await zh(a.remoteStore)}catch(o){const c=Tp(o,"Failed to persist write");n.reject(c)}}async function kw(s,e){const n=Ve(s);try{const a=await tR(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?et(d.hu,14607):o.removedDocuments.size>0&&(et(d.hu,42227),d.hu=!1))})),await cu(n,a,e)}catch(a){await pl(a)}}function Gb(s,e,n){const a=Ve(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const p=Ve(d);p.onlineState=g;let y=!1;p.queries.forEach(((x,b)=>{for(const T of b.Sa)T.va(g)&&(y=!0)})),y&&Sp(p)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function HR(s,e,n){const a=Ve(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),c=o&&o.key;if(c){let d=new jt(Se.comparator);d=d.insert(c,hn.newNoDocument(c,Oe.min()));const g=Xe().add(c),p=new Lh(Oe.min(),new Map,new jt(Ye),d,g);await kw(a,p),a.du=a.du.remove(c),a.Au.delete(e),Ap(a)}else await Cg(a.localStore,e,!1).then((()=>Rg(a,e,n))).catch(pl)}async function FR(s,e){const n=Ve(s),a=e.batch.batchId;try{const o=await eR(n.localStore,e);Rw(n,a,null),Iw(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await cu(n,o)}catch(o){await pl(o)}}async function GR(s,e,n){const a=Ve(s);try{const o=await(function(d,g){const p=Ve(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return p.mutationQueue.lookupMutationBatch(y,g).next((b=>(et(b!==null,37113),x=b.keys(),p.mutationQueue.removeMutationBatch(y,b)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,x,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>p.localDocuments.getDocuments(y,x)))}))})(a.localStore,e);Rw(a,e,n),Iw(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await cu(a,o)}catch(o){await pl(o)}}function Iw(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function Rw(s,e,n){const a=Ve(s);let o=a.Vu[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function Rg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||jw(s,a)}))}function jw(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(xp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Ap(s))}function $b(s,e,n){for(const a of n)a instanceof Nw?(s.Ru.addReference(a.key,e),$R(s,a)):a instanceof Aw?(ve(Np,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||jw(s,a.key)):Ce(19791,{wu:a})}function $R(s,e){const n=e.key,a=n.path.canonicalString();s.du.get(n)||s.Eu.has(a)||(ve(Np,"New document in limbo: "+n),s.Eu.add(a),Ap(s))}function Ap(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Se(vt.fromString(e)),a=s.fu.next();s.Au.set(a,new MR(n)),s.du=s.du.insert(n,a),yw(s.remoteStore,new Ua(ls(cp(n.path)),a,"TargetPurposeLimboResolution",Rh.ce))}}async function cu(s,e,n){const a=Ve(s),o=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,p)=>{d.push(a.pu(p,e,n).then((y=>{var x;if((y||n)&&a.isPrimaryClient){const b=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:x.current;a.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){o.push(y);const b=pp.As(p.targetId,y);c.push(b)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(p,y){const x=Ve(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>se.forEach(y,(T=>se.forEach(T.Es,(k=>x.persistence.referenceDelegate.addReference(b,T.targetId,k))).next((()=>se.forEach(T.ds,(k=>x.persistence.referenceDelegate.removeReference(b,T.targetId,k)))))))))}catch(b){if(!yl(b))throw b;ve(yp,"Failed to update sequence numbers: "+b)}for(const b of y){const T=b.targetId;if(!b.fromCache){const k=x.Ms.get(T),V=k.snapshotVersion,U=k.withLastLimboFreeSnapshotVersion(V);x.Ms=x.Ms.insert(T,U)}}})(a.localStore,c))}async function QR(s,e){const n=Ve(s);if(!n.currentUser.isEqual(e)){ve(Np,"User change. New user:",e.toKey());const a=await mw(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new ye(te.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await cu(n,a.Ls)}}function KR(s,e){const n=Ve(s),a=n.Au.get(e);if(a&&a.hu)return Xe().add(a.key);{let o=Xe();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function Dw(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HR.bind(null,e),e.Pu.H_=RR.bind(null,e.eventManager),e.Pu.yu=jR.bind(null,e.eventManager),e}function YR(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GR.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZI(this.persistence,new XI,e.initialUser,this.serializer)}Cu(e){return new fw(gp.mi,this.serializer)}Du(e){return new iR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class XR extends bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof vh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new MI(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new fw((a=>vh.mi(a,n)),this.serializer)}}class jg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Gb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=QR.bind(null,this.syncEngine),await CR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new IR})()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),a=(function(c){return new dR(c)})(e.databaseInfo);return(function(c,d,g,p){return new gR(c,d,g,p)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,c,d,g){return new yR(a,o,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Gb(this.syncEngine,n,0)),(function(){return Ub.v()?new Ub:new oR})())}createSyncEngine(e,n){return(function(o,c,d,g,p,y,x){const b=new VR(o,c,d,g,p,y);return x&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ve(o);ve(Hi,"RemoteStore shutting down."),c.Ea.add(5),await lu(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}jg.provider={build:()=>new jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ye(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const d=Ve(o),g={documents:c.map((b=>yh(d.serializer,b)))},p=await d.Ho("BatchGetDocuments",d.serializer.databaseId,vt.emptyPath(),g,c.length),y=new Map;p.forEach((b=>{const T=vI(d.serializer,b);y.set(T.key.toString(),T)}));const x=[];return c.forEach((b=>{const T=y.get(b.toString());et(!!T,55234,{key:b}),x.push(T)})),x})(this.datastore,e);return n.forEach((a=>this.recordVersion(a))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new iu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,a)=>{const o=Se.fromPath(a);this.mutations.push(new ZE(o,this.precondition(o)))})),await(async function(a,o){const c=Ve(a),d={writes:o.map((g=>lw(c.serializer,g)))};await c.Go("Commit",c.serializer.databaseId,vt.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});n=Oe.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!n.isEqual(a))throw new ye(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Oe.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Oe.min()))throw new ye(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,a,o,c){this.asyncQueue=e,this.datastore=n,this.options=a,this.updateFunction=o,this.deferred=c,this.zu=a.maxAttempts,this.M_=new vp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new JR(this.datastore),n=this.Hu(e);n&&n.then((a=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(a)})).catch((o=>{this.Yu(o)}))))})).catch((a=>{this.Yu(a)}))}))}Hu(e){try{const n=this.updateFunction(e);return!su(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ew(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="FirestoreClient";class ZR{constructor(e,n,a,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=Nn.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async d=>{ve(Za,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(ve(Za,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Tp(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function ag(s,e){s.asyncQueue.verifyOperationInProgress(),ve(Za,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await mw(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Qb(s,e){s.asyncQueue.verifyOperationInProgress();const n=await e4(s);ve(Za,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>Bb(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>Bb(e.remoteStore,o))),s._onlineComponents=e}async function e4(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve(Za,"Using user provided OfflineComponentProvider");try{await ag(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;nl("Error using user provided cache. Falling back to memory cache: "+n),await ag(s,new bh)}}else ve(Za,"Using default OfflineComponentProvider"),await ag(s,new XR(void 0));return s._offlineComponents}async function Cp(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve(Za,"Using user provided OnlineComponentProvider"),await Qb(s,s._uninitializedComponentsProvider._online)):(ve(Za,"Using default OnlineComponentProvider"),await Qb(s,new jg))),s._onlineComponents}function t4(s){return Cp(s).then((e=>e.syncEngine))}function n4(s){return Cp(s).then((e=>e.datastore))}async function Mw(s){const e=await Cp(s),n=e.eventManager;return n.onListen=LR.bind(null,e.syncEngine),n.onUnlisten=zR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BR.bind(null,e.syncEngine),n}function r4(s,e,n={}){const a=new os;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const x=new Ow({next:T=>{x.Nu(),d.enqueueAndForget((()=>Tw(c,b)));const k=T.docs.has(g);!k&&T.fromCache?y.reject(new ye(te.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&p&&p.source==="server"?y.reject(new ye(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new Sw(cp(g.path),x,{includeMetadataChanges:!0,qa:!0});return ww(c,b)})(await Mw(s),s.asyncQueue,e,n,a))),a.promise}function s4(s,e,n={}){const a=new os;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const x=new Ow({next:T=>{x.Nu(),d.enqueueAndForget((()=>Tw(c,b))),T.fromCache&&p.source==="server"?y.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new Sw(g,x,{includeMetadataChanges:!0,qa:!0});return ww(c,b)})(await Mw(s),s.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firestore.googleapis.com",Yb=!0;class Xb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lw,this.ssl=Yb}else this.host=e.host,this.ssl=e.ssl??Yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bh{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new lk;switch(a.type){case"firstParty":return new hk(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=Kb.get(n);a&&(ve("ComponentProvider","Removing Datastore"),Kb.delete(n),a.terminate())})(this),Promise.resolve()}}function a4(s,e,n,a={}){var y;s=ar(s,Bh);const o=hl(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(k_(`https://${g}`),I_("Firestore",!0)),c.host!==Lw&&c.host!==g&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:a};if(!Ui(p,d)&&(s._setSettings(p),a.mockUserToken)){let x,b;if(typeof a.mockUserToken=="string")x=a.mockUserToken,b=Nn.MOCK_USER;else{x=v2(a.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new ye(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Nn(T)}s._authCredentials=new ck(new _E(x,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class Lt{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(ru(n,Lt._jsonSchema))return new Lt(e,a||null,new Se(vt.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:an("string",Lt._jsonSchemaVersion),referencePath:an("string")};class $a extends ai{constructor(e,n,a){super(e,n,cp(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Se(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}function pt(s,e,...n){if(s=Pt(s),EE("collection","path",e),s instanceof Bh){const a=vt.fromString(e,...n);return cb(a),new $a(s,null,a)}{if(!(s instanceof Lt||s instanceof $a))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(vt.fromString(e,...n));return cb(a),new $a(s.firestore,null,a)}}function tn(s,e,...n){if(s=Pt(s),arguments.length===1&&(e=rp.newId()),EE("doc","path",e),s instanceof Bh){const a=vt.fromString(e,...n);return lb(a),new Lt(s,null,new Se(a))}{if(!(s instanceof Lt||s instanceof $a))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(vt.fromString(e,...n));return lb(a),new Lt(s.firestore,s instanceof $a?s.converter:null,new Se(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="AsyncQueue";class Wb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vp(this,"async_queue_retry"),this._c=()=>{const a=sg();a&&ve(Jb,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yl(e))throw e;ve(Jb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Hs("INTERNAL UNHANDLED ERROR: ",Zb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=wp.createAndSchedule(this,e,n,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Zb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Qs extends Bh{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new Wb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wb(e),this._firestoreClient=void 0,await e}}}function i4(s,e){const n=typeof s=="object"?s:O_(),a=typeof s=="string"?s:uh,o=Gg(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=p2("firestore");c&&a4(o,...c)}return o}function uu(s){if(s._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||o4(s),s._firestoreClient}function o4(s){var a,o,c;const e=s._freezeSettings(),n=(function(g,p,y,x){return new Ik(g,p,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Vw(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(s._databaseId,((a=s._app)==null?void 0:a.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new ZR(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tr(wn.fromBase64String(e))}catch(n){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tr(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ru(e,tr._jsonSchema))return tr.fromBase64String(e.bytes)}}tr._jsonSchemaVersion="firestore/bytes/1.0",tr._jsonSchema={type:an("string",tr._jsonSchemaVersion),bytes:an("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function wc(){return new Yi(xg)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cs._jsonSchemaVersion}}static fromJSON(e){if(ru(e,cs._jsonSchema))return new cs(e.latitude,e.longitude)}}cs._jsonSchemaVersion="firestore/geoPoint/1.0",cs._jsonSchema={type:an("string",cs._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ru(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new us(e.vectorValues);throw new ye(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:an("string",us._jsonSchemaVersion),vectorValues:an("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=/^__.*__$/;class c4{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,n,this.fieldTransforms):new au(e,this.data,n,this.fieldTransforms)}}class Pw{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Uw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:s})}}class Ip{constructor(e,n,a,o,c,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Uw(this.Ac)&&l4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u4{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Ph(e)}Cc(e,n,a,o=!1){return new Ip({Ac:e,methodName:n,Dc:a,path:En.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bl(s){const e=s._freezeSettings(),n=Ph(s._databaseId);return new u4(s._databaseId,!!e.ignoreUndefinedProperties,n)}function qh(s,e,n,a,o,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Dp("Data must be an object, but it was:",d,a);const g=zw(a,d);let p,y;if(c.merge)p=new nr(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const b of c.mergeFields){const T=Dg(e,b,n);if(!d.contains(T))throw new ye(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);qw(x,T)||x.push(T)}p=new nr(x),y=d.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,y=d.fieldTransforms;return new c4(new jn(g),p,y)}class Hh extends kp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function Rp(s,e,n,a){const o=s.Cc(1,e,n);Dp("Data must be an object, but it was:",o,a);const c=[],d=jn.empty();ri(a,((p,y)=>{const x=Op(e,p,n);y=Pt(y);const b=o.yc(x);if(y instanceof Hh)c.push(x);else{const T=du(y,b);T!=null&&(c.push(x),d.set(x,T))}}));const g=new nr(c);return new Pw(d,g,o.fieldTransforms)}function jp(s,e,n,a,o,c){const d=s.Cc(1,e,n),g=[Dg(e,a,n)],p=[o];if(c.length%2!=0)throw new ye(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)g.push(Dg(e,c[T])),p.push(c[T+1]);const y=[],x=jn.empty();for(let T=g.length-1;T>=0;--T)if(!qw(y,g[T])){const k=g[T];let V=p[T];V=Pt(V);const U=d.yc(k);if(V instanceof Hh)y.push(k);else{const z=du(V,U);z!=null&&(y.push(k),x.set(k,z))}}const b=new nr(y);return new Pw(x,b,d.fieldTransforms)}function d4(s,e,n,a=!1){return du(n,s.Cc(a?4:3,e))}function du(s,e){if(Bw(s=Pt(s)))return Dp("Unsupported field value:",e,s),zw(s,e);if(s instanceof kp)return(function(a,o){if(!Uw(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const c=[];let d=0;for(const g of a){let p=du(g,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(s,e)}return(function(a,o){if((a=Pt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Zk(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=Tt.fromDate(a);return{timestampValue:ph(o.serializer,c)}}if(a instanceof Tt){const c=new Tt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:ph(o.serializer,c)}}if(a instanceof cs)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof tr)return{bytesValue:sw(o.serializer,a._byteString)};if(a instanceof Lt){const c=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:fp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof us)return(function(d,g){return{mapValue:{fields:{[RE]:{stringValue:jE},[dh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return up(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Ih(a)}`)})(s,e)}function zw(s,e){const n={};return SE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(s,((a,o)=>{const c=du(o,e.mc(a));c!=null&&(n[a]=c)})),{mapValue:{fields:n}}}function Bw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Tt||s instanceof cs||s instanceof tr||s instanceof Lt||s instanceof kp||s instanceof us)}function Dp(s,e,n){if(!Bw(n)||!wE(n)){const a=Ih(n);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Dg(s,e,n){if((e=Pt(e))instanceof Yi)return e._internalPath;if(typeof e=="string")return Op(s,e);throw _h("Field path arguments must be of type string or ",s,!1,void 0,n)}const h4=new RegExp("[~\\*/\\[\\]]");function Op(s,e,n){if(e.search(h4)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Yi(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function _h(s,e,n,a,o){const c=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${a}`),d&&(p+=` in document ${o}`),p+=")"),new ye(te.INVALID_ARGUMENT,g+s+p)}function qw(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,a,o,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f4 extends Eh{data(){return super.data()}}function Fh(s,e){return typeof e=="string"?Op(s,e):e instanceof Yi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mp{}class Vp extends Mp{}function Mt(s,e,...n){let a=[];e instanceof Mp&&a.push(e),a=a.concat(n),(function(c){const d=c.filter((p=>p instanceof Lp)).length,g=c.filter((p=>p instanceof Gh)).length;if(d>1||d>0&&g>0)throw new ye(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Gh extends Vp{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Gh(e,n,a)}_apply(e){const n=this._parse(e);return Hw(e._query,n),new ai(e.firestore,e.converter,Tg(e._query,n))}_parse(e){const n=bl(e.firestore);return(function(c,d,g,p,y,x,b){let T;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ye(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){t_(b,x);const V=[];for(const U of b)V.push(e_(p,c,U));T={arrayValue:{values:V}}}else T=e_(p,c,b)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||t_(b,x),T=d4(g,d,b,x==="in"||x==="not-in");return rn.create(y,x,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vt(s,e,n){const a=e,o=Fh("where",s);return Gh._create(o,a,n)}class Lp extends Mp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lp(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const g=c.getFlattenedFilters();for(const p of g)Hw(d,p),d=Tg(d,p)})(e._query,n),new ai(e.firestore,e.converter,Tg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pp extends Vp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pp(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $c(c,d)})(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new vl(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Tc(s,e="asc"){const n=e,a=Fh("orderBy",s);return Pp._create(a,n)}class Up extends Vp{constructor(e,n,a){super(),this.type=e,this._limit=n,this._limitType=a}static _create(e,n,a){return new Up(e,n,a)}_apply(e){return new ai(e.firestore,e.converter,fh(e._query,this._limit,this._limitType))}}function Sc(s){return xk("limit",s),Up._create("limit",s,"F")}function e_(s,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new ye(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zE(e)&&n.indexOf("/")!==-1)throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(vt.fromString(n));if(!Se.isDocumentKey(a))throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return yb(s,new Se(a))}if(n instanceof Lt)return yb(s,n._key);throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function t_(s,e){if(!Array.isArray(s)||s.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hw(s,e){const n=(function(o,c){for(const d of o)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Fw{convertValue(e,n="none"){switch(Ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return ri(e,((o,c)=>{a[o]=this.convertValue(c,n)})),a}convertVectorValue(e){var a,o,c;const n=(c=(o=(a=e.fields)==null?void 0:a[dh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>Ft(d.doubleValue)));return new us(n)}convertGeoPoint(e){return new cs(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=jh(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const n=Ya(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=vt.fromString(e);et(dw(a),9688,{name:e});const o=new Fc(a.get(1),a.get(3)),c=new Se(a.popFirst(5));return o.isEqual(n)||Hs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class g4 extends Fw{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}class Qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends Eh{constructor(e,n,a,o,c,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Fh("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:an("string",Qa._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Wd extends Qa{data(e={}){return super.data(e)}}class Zo{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Qo(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new Wd(this._firestore,this._userDataWriter,a.key,a,new Qo(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const p=new Wd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Qo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Wd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Qo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),x=d.indexOf(g.doc.key)),{type:p4(g.type),doc:p,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(s){s=ar(s,Lt);const e=ar(s.firestore,Qs);return r4(uu(e),s._key).then((n=>v4(e,s,n)))}Zo._jsonSchemaVersion="firestore/querySnapshot/1.0",Zo._jsonSchema={type:an("string",Zo._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class zp extends Fw{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function wt(s){s=ar(s,ai);const e=ar(s.firestore,Qs),n=uu(e),a=new zp(e);return m4(s._query),s4(n,s._query).then((o=>new Zo(e,a,s,o)))}function r_(s,e,n){s=ar(s,Lt);const a=ar(s.firestore,Qs),o=$h(s.converter,e,n);return hu(a,[qh(bl(a),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,sn.none())])}function Ud(s,e,n,...a){s=ar(s,Lt);const o=ar(s.firestore,Qs),c=bl(o);let d;return d=typeof(e=Pt(e))=="string"||e instanceof Yi?jp(c,"updateDoc",s._key,e,n,a):Rp(c,"updateDoc",s._key,e),hu(o,[d.toMutation(s._key,sn.exists(!0))])}function y4(s){return hu(ar(s.firestore,Qs),[new iu(s._key,sn.none())])}function s_(s,e){const n=ar(s.firestore,Qs),a=tn(s),o=$h(s.converter,e);return hu(n,[qh(bl(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,sn.exists(!1))]).then((()=>a))}function hu(s,e){return(function(a,o){const c=new os;return a.asyncQueue.enqueueAndForget((async()=>qR(await t4(a),o,c))),c.promise})(uu(s),e)}function v4(s,e,n){const a=n.docs.get(e._key),o=new zp(s);return new Qa(s,o,e._key,a,new Qo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bl(e)}set(e,n,a){this._verifyNotCommitted();const o=za(e,this._firestore),c=$h(o.converter,n,a),d=qh(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,a);return this._mutations.push(d.toMutation(o._key,sn.none())),this}update(e,n,a,...o){this._verifyNotCommitted();const c=za(e,this._firestore);let d;return d=typeof(n=Pt(n))=="string"||n instanceof Yi?jp(this._dataReader,"WriteBatch.update",c._key,n,a,o):Rp(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=za(e,this._firestore);return this._mutations=this._mutations.concat(new iu(n._key,sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function za(s,e){if((s=Pt(s)).firestore!==e)throw new ye(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=bl(e)}get(e){const n=za(e,this._firestore),a=new g4(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ce(24041);const c=o[0];if(c.isFoundDocument())return new Eh(this._firestore,a,c.key,c,n.converter);if(c.isNoDocument())return new Eh(this._firestore,a,n._key,null,n.converter);throw Ce(18433,{doc:c})}))}set(e,n,a){const o=za(e,this._firestore),c=$h(o.converter,n,a),d=qh(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,a);return this._transaction.set(o._key,d),this}update(e,n,a,...o){const c=za(e,this._firestore);let d;return d=typeof(n=Pt(n))=="string"||n instanceof Yi?jp(this._dataReader,"Transaction.update",c._key,n,a,o):Rp(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(e){const n=za(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4 extends _4{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=za(e,this._firestore),a=new zp(this._firestore);return super.get(e).then((o=>new Qa(this._firestore,a,n._key,o._document,new Qo(!1,!1),n.converter)))}}function a_(s,e,n){s=ar(s,Qs);const a={...x4,...n};return(function(c){if(c.maxAttempts<1)throw new ye(te.INVALID_ARGUMENT,"Max attempts must be at least 1")})(a),(function(c,d,g){const p=new os;return c.asyncQueue.enqueueAndForget((async()=>{const y=await n4(c);new WR(c.asyncQueue,y,g,d,p).ju()})),p.promise})(uu(s),(o=>e(new E4(s,o))),a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(s){return uu(s=ar(s,Qs)),new b4(s,(e=>hu(s,e)))}(function(e,n=!0){(function(o){gl=o})(fl),el(new zi("firestore",((a,{instanceIdentifier:o,options:c})=>{const d=a.getProvider("app").getImmediate(),g=new Qs(new uk(a.getProvider("auth-internal")),new fk(d,a.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(y.options.projectId,x)})(d,o),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Ha(ab,ib,e),Ha(ab,ib,"esm2020")})();const i_=Pi.firebase;let ig,er,he;const w4=s=>s&&s.apiKey&&s.projectId&&s.appId;try{Pi.useFirebase&&w4(i_)?(ig=D_(i_),er=ik(ig),he=i4(ig),console.log("Firebase initialized successfully.")):Pi.useFirebase?console.warn("Firebase `useFirebase` is true, but config keys are missing. Please check your .env.local file. Skipping Firebase Init."):console.log("`useFirebase` is false. Skipping Firebase Init.")}catch(s){console.error("Error initializing Firebase:",s)}class T4{constructor(){this.mapDocToEvent=e=>({id:e.id,...e.data()}),this.mapAuthError=e=>({"auth/invalid-credential":"Email ou senha incorretos.","auth/user-not-found":"Email ou senha incorretos.","auth/wrong-password":"Email ou senha incorretos.","auth/invalid-email":"O formato do email  invlido.","auth/user-disabled":"Esta conta foi desativada.","auth/email-already-in-use":"Email j cadastrado.","auth/too-many-requests":"Muitas tentativas. Tente novamente mais tarde.","auth/network-request-failed":"Erro de conexo.","auth/popup-closed-by-user":"Login cancelado.","auth/popup-blocked":"O navegador bloqueou a janela de login.","auth/operation-not-allowed":"Mtodo de login desabilitado.","auth/unauthorized-domain":"Domnio no autorizado.","permission-denied":"Permisso negada.",unavailable:"Servio indisponvel. Tente mais tarde."})[e]||`Erro inesperado (${e}).`}async login(e,n){if(!er)throw new Error("Servio de autenticao no inicializado.");if(!n)throw new Error("A senha  obrigatria.");try{await Kx(er,oh);const o=(await GA(er,e,n)).user;return this._fetchUserProfile(o)}catch(a){throw console.error("Erro no Login Firebase:",a),new Error(this.mapAuthError(a.code))}}async loginWithGoogle(){if(!er)throw new Error("Servio de autenticao no inicializado.");try{await Kx(er,oh);const e=new Vs;await gC(er,e)}catch(e){throw console.error("Erro ao iniciar Login com Google:",e),new Error(this.mapAuthError(e.code))}}async _fetchUserProfile(e){if(!he)throw new Error("Banco de dados no inicializado.");const n=tn(he,"users",e.uid);let a;try{a=await n_(n)}catch(o){if(console.error("Erro ao acessar Firestore:",o),o.code==="permission-denied")return console.warn("Permisso negada ao ler perfil. Retornando dados bsicos."),{uid:e.uid,email:e.email||"",role:ot.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(a.exists()){const o=a.data();return{uid:e.uid,email:e.email||"",name:o.name||e.displayName,role:o.role||ot.USER,rm:o.rm,courseId:o.courseId,classId:o.classId,isOnboarded:o.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:ot.USER,isOnboarded:!1}}async logout(){er&&await YA(er)}onAuthStateChanged(e){return er?KA(er,async n=>{if(n)try{const a=await this._fetchUserProfile(n);e(a)}catch(a){console.error("Erro ao carregar perfil no listener:",a),e({uid:n.uid,email:n.email||"",role:ot.USER,isOnboarded:!1})}else e(null)}):()=>{}}async updateUserProfile(e,n){if(!he)throw new Error("Banco de dados no inicializado.");if(n.rm)try{const c=pt(he,"users"),d=Mt(c,Vt("rm","==",n.rm));if((await wt(d)).docs.find(y=>y.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(c){if(c.code!=="permission-denied")throw c;console.warn("Pulei validao de RM nico devido a permisses.")}const a=tn(he,"users",e),o={...n,updatedAt:new Date().toISOString()};n.name&&n.rm&&(o.isOnboarded=!0);try{await r_(a,o,{merge:!0})}catch(c){throw console.error("Erro ao atualizar perfil:",c),new Error("No foi possvel salvar seus dados. Verifique sua conexo.")}return{...n,uid:e,email:"",role:ot.USER,isOnboarded:!0}}async getUserProfile(e){if(!he||!er)throw new Error("Servio de autenticao ou banco de dados no inicializado.");const n=er.currentUser;return!n||n.uid!==e?(console.warn("Tentativa de buscar perfil de um usurio diferente/deslogado."),null):this._fetchUserProfile(n)}async getUsers(e){if(!he)return{data:[],nextCursor:void 0};const{limit:n,cursor:a,filters:o}=e,{searchTerm:c,role:d,courseId:g,classId:p}=o,y=500;try{const x=[Tc("email"),Sc(y)];d&&x.push(Vt("role","==",d));const b=Mt(pt(he,"users"),...x),T=await wt(b);let k=T.docs.map(B=>({uid:B.id,...B.data()}));if(g&&(k=k.filter(B=>B.courseId===g)),p&&(k=k.filter(B=>B.classId===p)),c){const B=c.toLowerCase();k=k.filter(q=>{var Y,de;return((Y=q.name)==null?void 0:Y.toLowerCase().includes(B))||q.email.toLowerCase().includes(B)||((de=q.rm)==null?void 0:de.includes(B))})}let V=0;if(a){const B=a.id,q=k.findIndex(Y=>Y.uid===B);q!==-1&&(V=q+1)}const U=k.slice(V,V+n);let z;if(U.length===n&&V+n<k.length){const B=U[U.length-1];z=T.docs.find(q=>q.id===B.uid)}return{data:U,nextCursor:z}}catch(x){return console.error("Erro ao buscar usurios:",x),{data:[],nextCursor:void 0}}}async deleteUser(e){if(!he)return;const n=Mt(pt(he,"enrollments"),Vt("userId","==",e)),o=(await wt(n)).docs.map(x=>({id:x.id,...x.data()})),c=Array.from(new Set(o.map(x=>x.eventId))),d=await this.getEventsByIds(c),g=new Map(d.map(x=>[x.id,x])),p=Bo(he),y=new Map;o.forEach(x=>{if(x.status===Rn.CONFIRMED){const b=y.get(x.eventId)||g.get(x.eventId);if(b){const T=b.sessions.findIndex(k=>k.id===x.sessionId);if(T!==-1&&b.sessions[T].filled>0){const k=[...b.sessions];k[T]={...k[T],filled:Math.max(0,k[T].filled-1)},b.sessions=k,y.set(b.id,b)}}}p.delete(tn(he,"enrollments",x.id))}),y.forEach(x=>{p.update(tn(he,"events",x.id),{sessions:x.sessions})}),p.delete(tn(he,"users",e)),await p.commit()}async updateUserRole(e,n){if(!he)return;const a=tn(he,"users",e);await Ud(a,{role:n})}async getCourses(){return he?(await wt(pt(he,"courses"))).docs.map(n=>({id:n.id,...n.data()})):[]}async addCourse(e){if(!he)throw new Error("DB not init");return{id:(await s_(pt(he,"courses"),{name:e})).id,name:e}}async updateCourse(e,n){he&&await Ud(tn(he,"courses",e),{name:n})}async deleteCourse(e){if(!he)return;const n=Bo(he),a=tn(he,"courses",e);n.delete(a);const o=Mt(pt(he,"classes"),Vt("courseId","==",e));(await wt(o)).forEach(x=>n.delete(x.ref));const d=Mt(pt(he,"users"),Vt("courseId","==",e));(await wt(d)).forEach(x=>{n.update(x.ref,{courseId:"",classId:""})});const p=Mt(pt(he,"events"),Vt("allowedCourses","array-contains",e));(await wt(p)).forEach(x=>{const k=(x.data().allowedCourses||[]).filter(V=>V!==e);n.update(x.ref,{allowedCourses:k})}),await n.commit()}async getClasses(e){if(!he)return[];let n=e?Mt(pt(he,"classes"),Vt("courseId","==",e)):pt(he,"classes");return(await wt(n)).docs.map(o=>({id:o.id,...o.data()}))}async addClass(e,n){if(!he)throw new Error("DB not init");return{id:(await s_(pt(he,"classes"),{courseId:e,name:n})).id,courseId:e,name:n}}async updateClass(e,n){he&&await Ud(tn(he,"classes",e),{name:n})}async deleteClass(e){if(!he)return;const n=Bo(he);await y4(tn(he,"classes",e));const a=Mt(pt(he,"users"),Vt("classId","==",e));(await wt(a)).forEach(g=>{n.update(g.ref,{classId:""})});const c=Mt(pt(he,"events"),Vt("allowedClasses","array-contains",e));(await wt(c)).forEach(g=>{const x=(g.data().allowedClasses||[]).filter(b=>b!==e);n.update(g.ref,{allowedClasses:x})}),await n.commit()}async getEvents(e){if(!he)return{data:[],nextCursor:void 0};const{limit:n,cursor:a,filters:o}=e,{searchTerm:c,visibility:d,course:g}=o,p=500;try{const y=Mt(pt(he,"events"),Tc("createdAt","desc"),Sc(p)),b=(await wt(y)).docs.map(B=>this.mapDocToEvent(B));let T=[];d==="class"&&g&&(T=(await wt(pt(he,"classes"))).docs.map(q=>({id:q.id,...q.data()})));const k=b.filter(B=>{var ie,ge;const q=c?B.name.toLowerCase().includes(c.toLowerCase())||B.description.toLowerCase().includes(c.toLowerCase()):!0,Y=d?B.visibility===d:!0;let de=!0;return g&&(B.visibility==="public"?de=!1:B.visibility==="course"?de=((ie=B.allowedCourses)==null?void 0:ie.includes(g))||!1:B.visibility==="class"&&(T.length>0?de=((ge=B.allowedClasses)==null?void 0:ge.some(j=>{const N=T.find(A=>A.id===j);return(N==null?void 0:N.courseId)===g}))||!1:de=!1)),q&&Y&&de}),V=typeof a=="number"?a:0,U=k.slice(V,V+n),z=V+U.length<k.length?V+U.length:void 0;return{data:U,nextCursor:z}}catch(y){return console.error("Error fetching events:",y),{data:[],nextCursor:void 0}}}async getEventById(e){if(!he)return;const n=tn(he,"events",e),a=await n_(n);return a.exists()?this.mapDocToEvent(a):void 0}async getEventsByIds(e){if(!he||e.length===0)return[];const n=30,a=[];for(let o=0;o<e.length;o+=n){const c=e.slice(o,o+n),d=Mt(pt(he,"events"),Vt(wc(),"in",c)),p=(await wt(d)).docs.map(y=>this.mapDocToEvent(y));a.push(...p)}return a}async getEventsByParentId(e){if(!he)return[];const n=Mt(pt(he,"events"),Vt("parentId","==",e));return(await wt(n)).docs.map(o=>this.mapDocToEvent(o))}async getAvailableEventsForUser(e){if(!he)return[];const n=500;try{const a=Mt(pt(he,"events"),Tc(wc(),"desc"),Sc(n));return(await wt(a)).docs.map(d=>this.mapDocToEvent(d)).filter(d=>{var g,p;return d.visibility==="public"?!0:d.visibility==="course"?e.courseId?(g=d.allowedCourses)==null?void 0:g.includes(e.courseId):!1:d.visibility==="class"&&e.classId?(p=d.allowedClasses)==null?void 0:p.includes(e.classId):!1})}catch(a){return console.error("Erro ao buscar eventos do usurio:",a),[]}}async getPublicEvents(){if(!he)return[];const e=Mt(pt(he,"events"),Vt("visibility","==","public"),Tc(wc(),"desc"),Sc(10));try{return(await wt(e)).docs.map(a=>this.mapDocToEvent(a))}catch{const a=Mt(pt(he,"events"),Tc(wc(),"desc"),Sc(50));return(await wt(a)).docs.map(c=>this.mapDocToEvent(c)).filter(c=>c.visibility==="public").slice(0,10)}}async createEvent(e){if(!he)return;const{id:n,...a}=e,o=JSON.parse(JSON.stringify(a));await r_(tn(he,"events",n),o)}async updateEvent(e){if(!he)return;const{id:n,...a}=e;await Ud(tn(he,"events",n),JSON.parse(JSON.stringify(a)))}async deleteEvent(e){if(!he)return;const n=Bo(he),a=[e],o=Mt(pt(he,"events"),Vt("parentId","==",e));(await wt(o)).forEach(p=>a.push(p.id));const d=[],g=[];for(let p=0;p<a.length;p+=10)g.push(a.slice(p,p+10));for(const p of g){const y=Mt(pt(he,"enrollments"),Vt("eventId","in",p));(await wt(y)).forEach(b=>d.push(b.ref))}a.forEach(p=>{n.delete(tn(he,"events",p))}),d.forEach(p=>{n.delete(p)}),await n.commit()}async getEnrollmentsForUser(e){if(!he)return[];try{const n=Mt(pt(he,"enrollments"),Vt("userId","==",e));return(await wt(n)).docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.status!==Rn.CANCELED)}catch(n){return console.error("Error fetching enrollments:",n),[]}}async getUserEnrollmentsDetails(e){if(!he)return[];const n=Mt(pt(he,"enrollments"),Vt("userId","==",e),Vt("status","==",Rn.CONFIRMED)),o=(await wt(n)).docs.map(p=>({id:p.id,...p.data()}));if(o.length===0)return[];const c=Array.from(new Set(o.map(p=>p.eventId))),d=await this.getEventsByIds(c),g=new Map(d.map(p=>[p.id,p]));return o.map(p=>{const y=g.get(p.eventId),x=y==null?void 0:y.sessions.find(b=>b.id===p.sessionId);return!y||!x?null:{enrollmentId:p.id,eventName:y.name,eventLocation:y.location,sessionDate:x.date,sessionTime:`${x.startTime} - ${x.endTime}`,enrolledAt:p.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(e){if(!he)return[];const n=Mt(pt(he,"enrollments"),Vt("eventId","==",e),Vt("status","==",Rn.CONFIRMED)),o=(await wt(n)).docs.map(y=>({id:y.id,...y.data()}));if(o.length===0)return[];const c=await this.getEventById(e);if(!c)return[];const d=Array.from(new Set(o.map(y=>y.userId))),g=await this._fetchUsersByIds(d),p=new Map(g.map(y=>[y.uid,y]));return o.map(y=>{const x=p.get(y.userId),b=c.sessions.find(T=>T.id===y.sessionId);return{id:y.id,user:{uid:x==null?void 0:x.uid,name:(x==null?void 0:x.name)||"Desconhecido",email:(x==null?void 0:x.email)||"",rm:(x==null?void 0:x.rm)||""},session:{id:b==null?void 0:b.id,date:b==null?void 0:b.date,startTime:b==null?void 0:b.startTime,endTime:b==null?void 0:b.endTime},status:y.status,enrolledAt:y.enrolledAt}})}async getEnrollmentDetailsForEvent(e){if(!he)return[];const n=Mt(pt(he,"enrollments"),Vt("eventId","==",e),Vt("status","==",Rn.CONFIRMED)),o=(await wt(n)).docs.map(y=>({id:y.id,...y.data()}));if(o.length===0)return[];const c=await this.getEventById(e);if(!c)return[];const d=Array.from(new Set(o.map(y=>y.userId))),g=await this._fetchUsersByIds(d),p=new Map(g.map(y=>[y.uid,y]));return o.map(y=>{const x=p.get(y.userId),b=c.sessions.find(T=>T.id===y.sessionId);return{Nome:(x==null?void 0:x.name)||"Desconhecido",Email:(x==null?void 0:x.email)||"",RM:(x==null?void 0:x.rm)||"",SessaoData:Ht(b==null?void 0:b.date),SessaoHora:(b==null?void 0:b.startTime)||"",Status:y.status,DataInscricao:new Date(y.enrolledAt).toLocaleString("pt-BR")}})}async _fetchUsersByIds(e){if(!he||e.length===0)return[];const n=[],a=10;for(let o=0;o<e.length;o+=a){const c=e.slice(o,o+a),d=Mt(pt(he,"users"),Vt(wc(),"in",c));(await wt(d)).forEach(p=>n.push({uid:p.id,...p.data()}))}return n}async createEnrollment(e,n,a){if(!he)throw new Error("Banco de dados no inicializado.");const o=await this.getEnrollmentsForUser(e),c=Array.from(new Set(o.map(U=>U.eventId))),[d,g]=await Promise.all([this.getEventsByIds(c),this.getEventById(n)]);if(!g)throw new Error("Evento no encontrado.");const p=new Map(d.map(U=>[U.id,U])),y=g.sessions.find(U=>U.id===a);if(!y)throw new Error("Sesso no encontrada.");const x=Pa(y.startTime),b=Pa(y.endTime);for(const U of o){if(U.eventId===n)throw new Error("Voc j est inscrito neste evento.");const z=p.get(U.eventId);if(!z)continue;const B=z.sessions.find(q=>q.id===U.sessionId);if((B==null?void 0:B.date)===y.date){const q=Pa(B.startTime),Y=Pa(B.endTime);if(x<Y&&q<b)throw new Error(`CONFLICT|${z.name}|${B.startTime}|${B.endTime}`)}}const T=`${e}_${n}`,k=tn(he,"enrollments",T),V=tn(he,"events",n);return await a_(he,async U=>{const[z,B]=await Promise.all([U.get(k),U.get(V)]);if(z.exists()&&z.data().status===Rn.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");if(!B.exists())throw new Error("Evento no existe mais.");const q=B.data(),Y=q.sessions.findIndex(ie=>ie.id===a);if(Y===-1)throw new Error("Sesso invlida.");if(q.sessions[Y].filled>=q.sessions[Y].capacity)throw new Error("Esta sesso atingiu a capacidade mxima.");const de=[...q.sessions];de[Y]={...de[Y],filled:de[Y].filled+1},U.update(V,{sessions:de}),U.set(k,{userId:e,eventId:n,sessionId:a,status:Rn.CONFIRMED,enrolledAt:new Date().toISOString()})}),{id:T,userId:e,eventId:n,sessionId:a,status:Rn.CONFIRMED,enrolledAt:new Date().toISOString()}}async cancelEnrollment(e){if(!he)return;const n=tn(he,"enrollments",e);await a_(he,async a=>{const o=await a.get(n);if(!o.exists())return;const{eventId:c,sessionId:d}=o.data(),g=tn(he,"events",c),p=await a.get(g);if(p.exists()){const y=p.data(),x=y.sessions.findIndex(b=>b.id===d);if(x!==-1&&y.sessions[x].filled>0){const b=[...y.sessions];b[x]={...b[x],filled:b[x].filled-1},a.update(g,{sessions:b})}}a.delete(n)})}async resetAndSeedData(){alert("A funo de RESET est desabilitada no modo Firebase por segurana.")}async exportData(){if(!he)return"{}";const e=["users","events","enrollments","courses","classes"],n={};for(const a of e){const o=await wt(pt(he,a));n[a]=o.docs.map(c=>({_id:c.id,...c.data()}))}return JSON.stringify(n,null,2)}async importData(e){if(he)try{const n=JSON.parse(e),a={eduevent_users:"users",eduevent_events:"events",eduevent_enrollments:"enrollments",eduevent_courses:"courses",eduevent_classes:"classes",users:"users",events:"events",enrollments:"enrollments",courses:"courses",classes:"classes"},o=490;let c=Bo(he),d=0;for(const g of Object.keys(n)){const p=a[g];if(!p||!Array.isArray(n[g]))continue;const y=n[g];for(const x of y){const b=x._id||x.uid||x.id;if(!b){console.warn(`Item sem ID ignorado na coleo ${p}`,x);continue}const{_id:T,...k}=x,V=tn(he,p,b);c.set(V,k),d++,d>=o&&(await c.commit(),c=Bo(he),d=0)}}d>0&&await c.commit()}catch(n){throw console.error("Firebase Import Failed:",n),new Error("Erro ao importar dados para o Firebase.")}}}const S4=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Design Digital"},{id:"c3",name:"Administrao"}],N4=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DD-2024-A"},{id:"t4",courseId:"c3",name:"ADM-2024-A"}],ue={USERS:"eduevent_users",EVENTS:"eduevent_events",ENROLLMENTS:"eduevent_enrollments",CURRENT_USER:"eduevent_current_user",COURSES:"eduevent_courses",CLASSES:"eduevent_classes"},en=s=>new Promise(e=>setTimeout(e,s));class A4{constructor(){this.authListeners=[],localStorage.getItem(ue.COURSES)||localStorage.setItem(ue.COURSES,JSON.stringify(S4)),localStorage.getItem(ue.CLASSES)||localStorage.setItem(ue.CLASSES,JSON.stringify(N4))}notifyAuthListeners(e){this.authListeners.forEach(n=>n(e))}async login(e,n){await en(500);let o=this.getItems(ue.USERS).find(c=>c.email===e);return o||(o={uid:`user_${Date.now()}`,email:e,role:e.includes("admin")?ot.ADMIN:ot.USER,isOnboarded:!1},this.saveItem(ue.USERS,o)),localStorage.setItem(ue.CURRENT_USER,JSON.stringify(o)),this.notifyAuthListeners(o),o}async loginWithGoogle(){await en(800);const e="google.mock@example.com";let a=this.getItems(ue.USERS).find(o=>o.email===e);a||(a={uid:`user_google_${Date.now()}`,email:e,name:"Google Mock User",role:ot.USER,isOnboarded:!1},this.saveItem(ue.USERS,a)),localStorage.setItem(ue.CURRENT_USER,JSON.stringify(a)),this.notifyAuthListeners(a)}async logout(){localStorage.removeItem(ue.CURRENT_USER),this.notifyAuthListeners(null)}onAuthStateChanged(e){this.authListeners.push(e);const n=localStorage.getItem(ue.CURRENT_USER),a=n?JSON.parse(n):null;return e(a),()=>{this.authListeners=this.authListeners.filter(o=>o!==e)}}async updateUserProfile(e,n){await en(600);const a=this.getItems(ue.USERS),o=a.findIndex(p=>p.uid===e);if(o===-1)throw new Error("Usurio no encontrado");if(n.rm&&a.some(y=>y.rm===n.rm&&y.uid!==e))throw new Error("Este RM j est cadastrado para outro usurio.");const c={...a[o],...n,isOnboarded:!0};a[o]=c,localStorage.setItem(ue.USERS,JSON.stringify(a));const d=localStorage.getItem(ue.CURRENT_USER),g=d?JSON.parse(d):null;return g&&g.uid===e&&(localStorage.setItem(ue.CURRENT_USER,JSON.stringify(c)),this.notifyAuthListeners(c)),c}async getUserProfile(e){return await en(100),this.getItems(ue.USERS).find(o=>o.uid===e)||null}async getUsers(e){await en(500);const n=this.getItems(ue.USERS),{searchTerm:a,role:o,courseId:c,classId:d}=e.filters,g=n.filter(b=>{var z,B;const T=a?((z=b.name)==null?void 0:z.toLowerCase().includes(a.toLowerCase()))||b.email.toLowerCase().includes(a.toLowerCase())||((B=b.rm)==null?void 0:B.includes(a)):!0,k=o?b.role===o:!0,V=c?b.courseId===c:!0,U=d?b.classId===d:!0;return T&&k&&V&&U}),p=e.cursor||0,y=g.slice(p,p+e.limit),x=p+y.length;return{data:y,nextCursor:x<g.length?x:void 0}}async deleteUser(e){await en(500);let n=this.getItems(ue.USERS);n=n.filter(a=>a.uid!==e),localStorage.setItem(ue.USERS,JSON.stringify(n))}async updateUserRole(e,n){await en(300);const a=this.getItems(ue.USERS),o=a.findIndex(c=>c.uid===e);o!==-1&&(a[o].role=n,localStorage.setItem(ue.USERS,JSON.stringify(a)))}async getCourses(){return this.getItems(ue.COURSES)}async addCourse(e){const n=this.getItems(ue.COURSES),a={id:`c_${Date.now()}`,name:e};return n.push(a),localStorage.setItem(ue.COURSES,JSON.stringify(n)),a}async updateCourse(e,n){const a=this.getItems(ue.COURSES),o=a.findIndex(c=>c.id===e);o!==-1&&(a[o].name=n,localStorage.setItem(ue.COURSES,JSON.stringify(a)))}async deleteCourse(e){let n=this.getItems(ue.COURSES);n=n.filter(o=>o.id!==e),localStorage.setItem(ue.COURSES,JSON.stringify(n));let a=this.getItems(ue.CLASSES);a=a.filter(o=>o.courseId!==e),localStorage.setItem(ue.CLASSES,JSON.stringify(a))}async getClasses(e){const n=this.getItems(ue.CLASSES);return e?n.filter(a=>a.courseId===e):n}async addClass(e,n){const a=this.getItems(ue.CLASSES),o={id:`t_${Date.now()}`,courseId:e,name:n};return a.push(o),localStorage.setItem(ue.CLASSES,JSON.stringify(a)),o}async updateClass(e,n){const a=this.getItems(ue.CLASSES),o=a.findIndex(c=>c.id===e);o!==-1&&(a[o].name=n,localStorage.setItem(ue.CLASSES,JSON.stringify(a)))}async deleteClass(e){let n=this.getItems(ue.CLASSES);n=n.filter(a=>a.id!==e),localStorage.setItem(ue.CLASSES,JSON.stringify(n))}async getEvents(e){await en(400);const n=this.getItems(ue.EVENTS),{searchTerm:a,visibility:o,course:c}=e.filters,d=this.getItems(ue.CLASSES),g=n.filter(b=>{var U,z;const T=a?b.name.toLowerCase().includes(a.toLowerCase())||b.description.toLowerCase().includes(a.toLowerCase()):!0,k=o?b.visibility===o:!0;let V=!0;return c&&(b.visibility==="public"?V=!1:b.visibility==="course"?V=((U=b.allowedCourses)==null?void 0:U.includes(c))||!1:b.visibility==="class"&&(V=((z=b.allowedClasses)==null?void 0:z.some(B=>{const q=d.find(Y=>Y.id===B);return(q==null?void 0:q.courseId)===c}))||!1)),T&&k&&V}),p=e.cursor||0,y=g.slice(p,p+e.limit),x=p+y.length;return{data:y,nextCursor:x<g.length?x:void 0}}async getEventById(e){return await en(200),this.getItems(ue.EVENTS).find(a=>a.id===e)}async getEventsByIds(e){return await en(200),this.getItems(ue.EVENTS).filter(a=>e.includes(a.id))}async getEventsByParentId(e){return await en(200),this.getItems(ue.EVENTS).filter(a=>a.parentId===e)}async getAvailableEventsForUser(e){return await en(400),this.getItems(ue.EVENTS).filter(a=>{var o,c;return a.visibility==="public"?!0:a.visibility==="course"?e.courseId?(o=a.allowedCourses)==null?void 0:o.includes(e.courseId):!1:a.visibility==="class"&&e.classId?(c=a.allowedClasses)==null?void 0:c.includes(e.classId):!1})}async getPublicEvents(){return await en(400),this.getItems(ue.EVENTS).filter(n=>n.visibility==="public")}async createEvent(e){await en(600);const n=this.getItems(ue.EVENTS);n.push(e),localStorage.setItem(ue.EVENTS,JSON.stringify(n))}async updateEvent(e){await en(500);const n=this.getItems(ue.EVENTS),a=n.findIndex(o=>o.id===e.id);if(a!==-1)n[a]=e,localStorage.setItem(ue.EVENTS,JSON.stringify(n));else throw new Error("Evento no encontrado para atualizao")}async deleteEvent(e){await en(400);let n=this.getItems(ue.EVENTS);const a=n.filter(c=>c.id===e||c.parentId===e).map(c=>c.id);n=n.filter(c=>!a.includes(c.id)),localStorage.setItem(ue.EVENTS,JSON.stringify(n));let o=this.getItems(ue.ENROLLMENTS);o=o.filter(c=>!a.includes(c.eventId)),localStorage.setItem(ue.ENROLLMENTS,JSON.stringify(o))}async getEnrollmentsForUser(e){return await en(300),this.getItems(ue.ENROLLMENTS).filter(a=>a.userId===e&&a.status!==Rn.CANCELED)}async getUserEnrollmentsDetails(e){const n=this.getItems(ue.ENROLLMENTS).filter(o=>o.userId===e&&o.status===Rn.CONFIRMED),a=this.getItems(ue.EVENTS);return n.map(o=>{const c=a.find(g=>g.id===o.eventId),d=c==null?void 0:c.sessions.find(g=>g.id===o.sessionId);return!c||!d?null:{enrollmentId:o.id,eventName:c.name,eventLocation:c.location,sessionDate:d.date,sessionTime:`${d.startTime} - ${d.endTime}`,enrolledAt:o.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(e){const n=this.getItems(ue.ENROLLMENTS).filter(c=>c.eventId===e&&c.status===Rn.CONFIRMED),a=this.getItems(ue.USERS),o=this.getItems(ue.EVENTS).find(c=>c.id===e);return n.map(c=>{const d=a.find(p=>p.uid===c.userId),g=o==null?void 0:o.sessions.find(p=>p.id===c.sessionId);return{id:c.id,user:{uid:d==null?void 0:d.uid,name:(d==null?void 0:d.name)||"Desconhecido",email:(d==null?void 0:d.email)||"",rm:(d==null?void 0:d.rm)||""},session:{id:g==null?void 0:g.id,date:g==null?void 0:g.date,startTime:g==null?void 0:g.startTime,endTime:g==null?void 0:g.endTime},status:c.status,enrolledAt:c.enrolledAt}})}async getEnrollmentDetailsForEvent(e){const n=this.getItems(ue.ENROLLMENTS).filter(c=>c.eventId===e&&c.status===Rn.CONFIRMED),a=this.getItems(ue.USERS),o=this.getItems(ue.EVENTS).find(c=>c.id===e);return n.map(c=>{const d=a.find(p=>p.uid===c.userId),g=o==null?void 0:o.sessions.find(p=>p.id===c.sessionId);return{Nome:(d==null?void 0:d.name)||"Desconhecido",Email:(d==null?void 0:d.email)||"",RM:(d==null?void 0:d.rm)||"",SessaoData:Ht(g==null?void 0:g.date),SessaoHora:(g==null?void 0:g.startTime)||"",Status:c.status,DataInscricao:new Date(c.enrolledAt).toLocaleString("pt-BR")}})}async createEnrollment(e,n,a){await en(800);const o=this.getItems(ue.EVENTS),c=o.findIndex(q=>q.id===n);if(c===-1)throw new Error("Evento no encontrado");const d=o[c].sessions.findIndex(q=>q.id===a);if(d===-1)throw new Error("Sesso no encontrada");const g=o[c].sessions[d];if(g.filled>=g.capacity)throw new Error("A sesso est lotada");const p=this.getItems(ue.ENROLLMENTS);if(p.find(q=>q.userId===e&&q.eventId===n&&q.status===Rn.CONFIRMED))throw new Error("Voc j est inscrito neste evento");const x=await this.getEnrollmentsForUser(e),b=[...new Set(x.map(q=>q.eventId))],T=await this.getEventsByIds(b),k=new Map(T.map(q=>[q.id,q])),V=g.date,U=Pa(g.startTime),z=Pa(g.endTime);for(const q of x){const Y=k.get(q.eventId);if(!Y)continue;const de=Y.sessions.find(ie=>ie.id===q.sessionId);if(de&&de.date===V){const ie=Pa(de.startTime),ge=Pa(de.endTime);if(U<ge&&ie<z)throw new Error(`CONFLICT|${Y.name}|${de.startTime}|${de.endTime}`)}}const B={id:`enr_${Date.now()}`,userId:e,eventId:n,sessionId:a,status:Rn.CONFIRMED,enrolledAt:new Date().toISOString()};return p.push(B),localStorage.setItem(ue.ENROLLMENTS,JSON.stringify(p)),o[c].sessions[d].filled+=1,localStorage.setItem(ue.EVENTS,JSON.stringify(o)),B}async cancelEnrollment(e){await en(500);const n=this.getItems(ue.ENROLLMENTS),a=n.findIndex(g=>g.id===e);if(a===-1)throw new Error("Inscrio no encontrada");const o=n[a],c=this.getItems(ue.EVENTS),d=c.findIndex(g=>g.id===o.eventId);if(d!==-1){const g=c[d].sessions.findIndex(p=>p.id===o.sessionId);g!==-1&&(c[d].sessions[g].filled=Math.max(0,c[d].sessions[g].filled-1),localStorage.setItem(ue.EVENTS,JSON.stringify(c)))}n.splice(a,1),localStorage.setItem(ue.ENROLLMENTS,JSON.stringify(n))}async resetAndSeedData(){localStorage.clear(),await en(500);const e=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Direito"},{id:"c3",name:"Medicina"},{id:"c4",name:"Design"}];localStorage.setItem(ue.COURSES,JSON.stringify(e));const n=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DIR-2024-A"},{id:"t4",courseId:"c3",name:"MED-2024-A"},{id:"t5",courseId:"c4",name:"DSG-2024-A"}];localStorage.setItem(ue.CLASSES,JSON.stringify(n));const a=[{uid:"u_admin",email:"admin@school.com",name:"Administrador Sistema",role:ot.ADMIN,isOnboarded:!0},{uid:"u_student1",email:"aluno.cc@school.com",name:"Joo da Silva",rm:"10001",courseId:"c1",classId:"t1",role:ot.USER,isOnboarded:!0},{uid:"u_student2",email:"aluno.dir@school.com",name:"Maria Souza",rm:"20002",courseId:"c2",classId:"t3",role:ot.USER,isOnboarded:!0},{uid:"u_student3",email:"aluno.med@school.com",name:"Pedro Santos",rm:"30003",courseId:"c3",classId:"t4",role:ot.USER,isOnboarded:!0}];localStorage.setItem(ue.USERS,JSON.stringify(a));const o=new Date,c=y=>y.toISOString().split("T")[0],d=new Date(o);d.setDate(o.getDate()+7);const g=new Date(o);g.setDate(o.getDate()+30);const p=[{id:"evt_1",name:"Semana de Tecnologia & Inovao 2024",description:"Uma semana inteira dedicada ao futuro da tecnologia, com palestras, workshops e networking.",location:"Centro de Convenes",visibility:"public",sessions:[{id:"s1",date:c(d),startTime:"09:00",endTime:"18:00",capacity:500,filled:45}],createdBy:"u_admin",createdAt:new Date().toISOString(),hasDedicatedPage:!0,dedicatedPageConfig:{presentationText:"Bem-vindo  maior semana de tecnologia do ano! Prepare-se para imergir em contedos sobre IA, Blockchain, Cloud Computing e muito mais. Contaremos com a presena de especialistas de grandes empresas do mercado.",themeColor:"#4F46E5",schedule:[{id:"sch_1",time:"09:00",title:"Credenciamento e Caf",description:"Recepo dos participantes no saguo principal."},{id:"sch_2",time:"10:00",title:"Abertura Oficial",description:"Palavra do Reitor e convidados especiais."},{id:"sch_3",time:"11:00",title:"Keynote: O Futuro da IA",description:"Palestra com Dr. Alan Turing (IA Hologrfica)."},{id:"sch_4",time:"14:00",title:"Workshop Prtico",description:"Hands-on em desenvolvimento web moderno."}],gallery:[{id:"img_1",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&w=1000&q=80",caption:"Palco Principal"},{id:"img_2",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?auto=format&fit=crop&w=1000&q=80",caption:"rea de Networking"},{id:"img_3",url:"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?auto=format&fit=crop&w=1000&q=80",caption:"Edio Anterior"}]}},{id:"evt_2",name:"Hackathon de Inovao",description:"Maratona de programao exclusiva para alunos de Computao.",location:"Laboratrio 3",visibility:"course",allowedCourses:["c1"],sessions:[{id:"s2",date:c(d),startTime:"18:00",endTime:"22:00",capacity:50,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_3",name:"Aula Magna de Anatomia",description:"Aula especial com convidados internacionais.",location:"Auditrio B",visibility:"class",allowedClasses:["t4"],sessions:[{id:"s3",date:c(g),startTime:"14:00",endTime:"16:00",capacity:100,filled:10}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_parent_1",name:"Semana Acadmica Integrada",description:"Uma semana de eventos para todos os cursos.",location:"Campus Central",visibility:"public",sessions:[{id:"s_p1",date:c(d),startTime:"08:00",endTime:"10:00",capacity:200,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_child_1",parentId:"evt_parent_1",name:"Workshop de IA (Sub-evento)",description:"Introduo a Redes Neurais.",location:"Sala 101",visibility:"public",sessions:[{id:"s_c1",date:c(d),startTime:"10:30",endTime:"12:00",capacity:30,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()},{id:"evt_child_2",parentId:"evt_parent_1",name:"Palestra: Direito Digital (Sub-evento)",description:"Impactos da tecnologia na legislao.",location:"Auditrio A",visibility:"public",sessions:[{id:"s_c2",date:c(d),startTime:"14:00",endTime:"16:00",capacity:100,filled:0}],createdBy:"u_admin",createdAt:new Date().toISOString()}];localStorage.setItem(ue.EVENTS,JSON.stringify(p))}async exportData(){const e={};return[ue.USERS,ue.EVENTS,ue.ENROLLMENTS,ue.COURSES,ue.CLASSES].forEach(a=>{e[a]=this.getItems(a)}),JSON.stringify(e,null,2)}async importData(e){try{const n=JSON.parse(e);localStorage.clear();const a={users:ue.USERS,events:ue.EVENTS,enrollments:ue.ENROLLMENTS,courses:ue.COURSES,classes:ue.CLASSES,[ue.USERS]:ue.USERS,[ue.EVENTS]:ue.EVENTS,[ue.ENROLLMENTS]:ue.ENROLLMENTS,[ue.COURSES]:ue.COURSES,[ue.CLASSES]:ue.CLASSES};Object.keys(n).forEach(o=>{const c=a[o];if(c&&Array.isArray(n[o])){const d=n[o].map(g=>{const{_id:p,...y}=g;return y});localStorage.setItem(c,JSON.stringify(d))}})}catch(n){throw console.error("Import failed:",n),new Error("Formato de JSON invlido ou corrompido.")}}getItems(e){const n=localStorage.getItem(e);return n?JSON.parse(n):[]}saveItem(e,n){const a=this.getItems(e);a.push(n),localStorage.setItem(e,JSON.stringify(a))}}const C4=()=>Pi.useFirebase?new T4:new A4,De=C4(),Gw=C.createContext(void 0),k4=({children:s})=>{const[e,n]=C.useState(null),[a,o]=C.useState(!0);C.useEffect(()=>{const y=De.onAuthStateChanged(x=>{n(x),o(!1)});return()=>y()},[]);const c=async(y,x)=>{o(!0);try{await De.login(y,x)}catch(b){throw console.error(b),o(!1),b}},d=async()=>{o(!0);try{await De.loginWithGoogle()}catch(y){throw console.error(y),o(!1),y}},g=async()=>{o(!0),await De.logout()},p=async()=>{if(e){o(!0);try{const y=await De.getUserProfile(e.uid);n(y)}catch(y){console.error("Falha ao atualizar o perfil",y)}finally{o(!1)}}};return u.jsx(Gw.Provider,{value:{user:e,loading:a,login:c,loginWithGoogle:d,logout:g,refreshProfile:p},children:s})},Ks=()=>{const s=C.useContext(Gw);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},$w=C.createContext(void 0),I4=({children:s})=>{const[e,n]=C.useState([]),a=C.useCallback(c=>{n(d=>d.filter(g=>g.id!==c))},[]),o=C.useCallback((c,d)=>{const g=Math.random().toString(36).substr(2,9);n(p=>[...p,{id:g,type:c,message:d}]),setTimeout(()=>{a(g)},4e3)},[a]);return u.jsxs($w.Provider,{value:{addToast:o,removeToast:a},children:[s,u.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(c=>u.jsxs("div",{className:`pointer-events-auto transform transition-all duration-300 ease-in-out translate-y-0 opacity-100 min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border-l-4 flex items-start justify-between bg-white dark:bg-darkcard dark:border-gray-600
              ${c.type==="success"?"border-green-500":""}
              ${c.type==="error"?"border-red-500":""}
              ${c.type==="warning"?"border-amber-500":""}
              ${c.type==="info"?"border-blue-500":""}
            `,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("span",{className:"text-xl mr-3",children:[c.type==="success"&&"",c.type==="error"&&"",c.type==="warning"&&"",c.type==="info"&&""]}),u.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:c.message})]}),u.jsx("button",{onClick:()=>a(c.id),className:"ml-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 focus:outline-none",children:""})]},c.id))})]})},Ys=()=>{const s=C.useContext($w);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},Qw=C.createContext(void 0),R4=({children:s})=>{const[e,n]=C.useState(()=>{const o=localStorage.getItem("eduevent_theme");return o==="dark"||o==="light"?o:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});C.useEffect(()=>{const o=window.document.documentElement;e==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("eduevent_theme",e)},[e]);const a=()=>{n(o=>o==="light"?"dark":"light")};return u.jsx(Qw.Provider,{value:{theme:e,toggleTheme:a},children:s})},j4=()=>{const s=C.useContext(Qw);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},Oa=({children:s})=>{const{user:e,logout:n}=Ks(),{theme:a,toggleTheme:o}=j4(),c=ti(),d=Gs(),[g,p]=C.useState(!1),y=async()=>{await n(),c("/")},x=T=>d.pathname===T?"bg-indigo-50 border-primary text-primary dark:bg-indigo-900/50 dark:text-indigo-200":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200",b=T=>d.pathname===T?"border-primary text-gray-900 dark:text-white dark:border-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200";return e?u.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-darkbg transition-colors duration-200",children:[u.jsxs("nav",{className:"bg-white dark:bg-darkcard shadow-sm sticky top-0 z-50 transition-colors duration-200",children:[u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between h-16",children:[u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0 flex items-center",children:u.jsx(yt,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight dark:text-indigo-400",children:"EduEvent"})}),u.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[u.jsx(yt,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${b("/dashboard")}`,children:"Eventos"}),u.jsx(yt,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${b("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===ot.ADMIN&&u.jsxs(u.Fragment,{children:[u.jsx(yt,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${b("/admin/events")}`,children:"Admin Eventos"}),u.jsx(yt,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${b("/admin/courses")}`,children:"Admin Cursos"}),u.jsx(yt,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${b("/admin/users")}`,children:"Admin Usurios"}),u.jsx(yt,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 dark:text-amber-400 ${b("/admin/dev")}`,children:"Desenvolvimento"})]})]})]}),u.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[u.jsx("button",{onClick:o,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",title:a==="dark"?"Mudar para modo claro":"Mudar para modo escuro",children:a==="dark"?u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),u.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[u.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:e.name||e.email}),u.jsx("button",{onClick:y,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none transition-colors",children:"Sair"})]})]}),u.jsxs("div",{className:"-mr-2 flex items-center sm:hidden gap-2",children:[u.jsx("button",{onClick:o,className:"p-3 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",children:a==="dark"?u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),u.jsxs("button",{onClick:()=>p(!g),type:"button",className:"bg-white dark:bg-gray-800 inline-flex items-center justify-center p-3 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[u.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),g?u.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):u.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]})]})}),g&&u.jsxs("div",{className:"sm:hidden border-t border-gray-200 dark:border-gray-700",id:"mobile-menu",children:[u.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[u.jsx(yt,{to:"/dashboard",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/dashboard")}`,children:"Eventos"}),u.jsx(yt,{to:"/my-enrollments",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===ot.ADMIN&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"pt-4 pb-2",children:u.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),u.jsx(yt,{to:"/admin/events",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/admin/events")}`,children:"Gerenciar Eventos"}),u.jsx(yt,{to:"/admin/courses",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/admin/courses")}`,children:"Gerenciar Cursos"}),u.jsx(yt,{to:"/admin/users",onClick:()=>p(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${x("/admin/users")}`,children:"Gerenciar Usurios"}),u.jsx(yt,{to:"/admin/dev",onClick:()=>p(!1),className:"block pl-3 pr-4 py-3 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-700 dark:text-amber-500",children:"Desenvolvimento"})]})]}),u.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center px-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-200 font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:e.name||"Usurio"}),u.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e.email})]})]}),u.jsx("div",{className:"mt-3 space-y-1",children:u.jsx("button",{onClick:y,className:"block w-full text-left px-4 py-3 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700",children:"Sair do Sistema"})})]})]})]}),u.jsx("main",{className:"flex-1 py-6",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s})})]}):u.jsx(u.Fragment,{children:s})},hs=({children:s,isLoading:e=!1,variant:n="primary",className:a="",disabled:o,...c})=>{const d="relative inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",g={primary:"border-transparent text-white bg-primary hover:bg-indigo-700 focus:ring-primary",secondary:"border-transparent text-white bg-secondary hover:bg-emerald-700 focus:ring-secondary",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500",outline:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary"};return u.jsxs("button",{disabled:e||o,className:`${d} ${g[n]} ${a}`,...c,children:[u.jsx("span",{className:e?"invisible":"",children:s}),e&&u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})},ll=s=>{const e=(s==null?void 0:s.code)||"",n=(s==null?void 0:s.message)||"";if(typeof n=="string"&&n.startsWith("CONFLICT|")){const a=n.split("|");return a.length>=4?`Conflito de horrio! Voc j possui o evento "${a[1]}" agendado entre ${a[2]} e ${a[3]}.`:"Conflito de horrio com outro evento j agendado."}if(n==="A sesso est lotada"||n.includes("capacidade mxima"))return"Que pena! Esta sesso acabou de lotar.";if(n.includes("j est inscrito"))return"Voc j garantiu sua vaga neste evento!";if(n.includes("Evento no encontrado"))return"O evento que voc procura no est mais disponvel.";switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos. Verifique e tente novamente.";case"auth/email-already-in-use":return"Este e-mail j est sendo usado por outra conta.";case"auth/weak-password":return"Sua senha  muito fraca. Escolha uma senha mais forte.";case"auth/invalid-email":return"O formato do e-mail  invlido.";case"auth/user-disabled":return"Esta conta foi desativada. Contate o administrador.";case"auth/too-many-requests":return"Muitas tentativas consecutivas. Aguarde alguns instantes.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/popup-closed-by-user":return"O login foi cancelado.";case"permission-denied":return"Voc no tem permisso para realizar esta ao.";default:return n||"Ocorreu um erro inesperado. Tente novamente mais tarde."}},Ko=({label:s,error:e,helperText:n,as:a="input",className:o="",children:c,...d})=>{const g=`
    appearance-none 
    block 
    w-full 
    px-4 
    py-3 
    text-base 
    rounded-lg 
    border 
    bg-white dark:bg-gray-800 
    text-gray-900 dark:text-white 
    placeholder-gray-400 
    focus:outline-none 
    focus:ring-2 
    focus:ring-offset-0
    transition-shadow 
    duration-200
  `,p=e?"border-red-300 focus:border-red-500 focus:ring-red-200 dark:border-red-800 dark:focus:ring-red-900/30":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-indigo-100 dark:focus:ring-indigo-900/30";return u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:d.id,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 ml-1",children:s}),u.jsx("div",{className:"relative",children:a==="select"?u.jsx("select",{className:`${g} ${p} ${o} pr-10`,...d,children:c}):u.jsx("input",{className:`${g} ${p} ${o}`,...d})}),e?u.jsxs("p",{className:"mt-1.5 text-sm text-red-600 dark:text-red-400 flex items-center animate-fade-in ml-1",children:[u.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]}):n?u.jsx("p",{className:"mt-1.5 text-sm text-gray-500 dark:text-gray-400 ml-1",children:n}):null]})},D4=()=>{const[s,e]=C.useState(""),[n,a]=C.useState(""),{user:o,loading:c,login:d,loginWithGoogle:g}=Ks(),p=ti(),{addToast:y}=Ys(),[x,b]=C.useState(!1);C.useEffect(()=>{!c&&o&&p("/dashboard")},[o,c,p]);const T=async V=>{V.preventDefault(),b(!0);try{await d(s,n),y("success","Login realizado com sucesso!")}catch(U){const z=ll(U);y("error",z)}finally{b(!1)}},k=async()=>{b(!0);try{await g(),y("success","Autenticado com Google!")}catch(V){const U=ll(V);y("error",U),b(!1)}};return c||!c&&o?u.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-primary font-medium",children:"Verificando sesso..."}):u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:u.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[u.jsx("div",{className:"flex justify-start",children:u.jsxs(yt,{to:"/",className:"flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors font-medium p-2 -ml-2 rounded-lg active:bg-gray-100 dark:active:bg-gray-800",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-primary dark:text-indigo-400",children:"EduEvent"}),u.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Acesse sua conta"}),u.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:Pi.useFirebase?"Gerencie suas inscries e eventos em um s lugar.":"Ambiente de Demonstrao (Mock)"})]}),u.jsxs("form",{className:"mt-8 space-y-2",onSubmit:T,children:[u.jsx(Ko,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,label:"E-mail",placeholder:"seu@email.com",value:s,onChange:V=>e(V.target.value),inputMode:"email"}),u.jsx(Ko,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:Pi.useFirebase,label:"Senha",placeholder:"",value:n,onChange:V=>a(V.target.value),enterKeyHint:"go"}),u.jsx("div",{className:"pt-4",children:u.jsx(hs,{type:"submit",isLoading:x,className:"w-full h-12 text-base shadow-lg shadow-indigo-200 dark:shadow-none",children:"Acessar Plataforma"})}),u.jsxs("div",{className:"relative my-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-gray-50 dark:bg-darkbg text-gray-500 dark:text-gray-400",children:"Ou entre rapidamente com"})})]}),u.jsxs("button",{type:"button",onClick:k,disabled:x,className:"w-full h-12 flex items-center justify-center px-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70 transition-colors active:scale-[0.98]",children:[u.jsxs("svg",{className:"h-5 w-5 mr-3","aria-hidden":"true",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),!Pi.useFirebase&&u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 p-4 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[u.jsx("p",{className:"font-bold mb-2",children:"Ambiente de Teste (Mock):"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{onClick:()=>e("student@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" student@school.com"}),u.jsx("li",{onClick:()=>e("admin@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" admin@school.com"})]})]})]})})},O4=()=>{const{user:s,refreshProfile:e}=Ks(),n=ti(),{addToast:a}=Ys(),[o,c]=C.useState([]),[d,g]=C.useState([]),[p,y]=C.useState(!1),[x,b]=C.useState({name:(s==null?void 0:s.name)||"",rm:"",courseId:"",classId:""});C.useEffect(()=>{if(s!=null&&s.isOnboarded){n("/dashboard");return}De.getCourses().then(c)},[s,n]),C.useEffect(()=>{x.courseId&&(De.getClasses(x.courseId).then(g),b(k=>({...k,classId:""})))},[x.courseId]);const T=async k=>{if(k.preventDefault(),!!s){y(!0);try{const V={...x,email:s.email,role:s.role};await De.updateUserProfile(s.uid,V),await e(),a("success","Perfil completado com sucesso! Bem-vindo."),n("/dashboard")}catch(V){const U=ll(V);a("error",U)}finally{y(!1)}}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Complete seu perfil"}),u.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Precisamos de mais alguns detalhes antes de comear."})]}),u.jsxs("form",{className:"mt-8 space-y-4",onSubmit:T,children:[u.jsx(Ko,{id:"name",name:"name",type:"text",required:!0,label:"Nome Completo",placeholder:"Ex: Joo da Silva",value:x.name,onChange:k=>b({...x,name:k.target.value}),autoComplete:"name"}),u.jsx(Ko,{id:"rm",name:"rm",type:"text",required:!0,label:"Registro de Matrcula (RM)",placeholder:"Ex: 12345",value:x.rm,onChange:k=>b({...x,rm:k.target.value}),inputMode:"numeric"}),u.jsxs(Ko,{as:"select",label:"Curso",required:!0,value:x.courseId,onChange:k=>b({...x,courseId:k.target.value}),children:[u.jsx("option",{value:"",children:"Selecione o Curso"}),o.map(k=>u.jsx("option",{value:k.id,children:k.name},k.id))]}),u.jsxs(Ko,{as:"select",label:"Turma",required:!0,disabled:!x.courseId,value:x.classId,onChange:k=>b({...x,classId:k.target.value}),className:"disabled:opacity-50",children:[u.jsx("option",{value:"",children:"Selecione a Turma"}),d.map(k=>u.jsx("option",{value:k.id,children:k.name},k.id))]}),u.jsx("div",{className:"pt-4",children:u.jsx(hs,{type:"submit",isLoading:p,className:"w-full h-12 text-base shadow-lg",children:"Concluir Cadastro"})})]})]})})},M4=(s,e={})=>{const[n,a]=C.useState(null),[o,c]=C.useState(null),d=e.minSwipeDistance||50;return{onTouchStart:x=>{c(null),a({x:x.targetTouches[0].clientX,y:x.targetTouches[0].clientY})},onTouchMove:x=>{c({x:x.targetTouches[0].clientX,y:x.targetTouches[0].clientY})},onTouchEnd:()=>{if(!n||!o)return;const x=n.x-o.x,b=n.y-o.y;if(Math.abs(x)>Math.abs(b)){if(Math.abs(x)<d)return;x>0?s.onSwipeLeft&&s.onSwipeLeft():s.onSwipeRight&&s.onSwipeRight()}else{if(Math.abs(b)<d)return;b>0?s.onSwipeUp&&s.onSwipeUp():s.onSwipeDown&&s.onSwipeDown()}}}},ei=({isOpen:s,onClose:e,title:n,children:a})=>{const o=C.useRef(null),c=C.useRef(null),d=M4({onSwipeDown:e});return C.useEffect(()=>(s?(c.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{o.current&&o.current.focus()},50)):(document.body.style.overflow="unset",c.current&&c.current.focus()),()=>{document.body.style.overflow="unset"}),[s]),C.useEffect(()=>{const g=p=>{p.key==="Escape"&&e()};return s&&window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}},[s,e]),s?u.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-80 transition-opacity animate-fade-in","aria-hidden":"true",onClick:e}),u.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),u.jsxs("div",{ref:o,tabIndex:-1,className:`
              inline-block align-bottom bg-white dark:bg-darkcard 
              rounded-t-2xl sm:rounded-lg 
              text-left overflow-hidden shadow-xl 
              transform transition-all 
              w-full sm:my-8 sm:align-middle sm:max-w-lg 
              animate-slide-in outline-none
              relative
            `,...d,children:[u.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1",onClick:e,children:u.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),u.jsx("div",{className:"bg-white dark:bg-darkcard px-4 pt-2 pb-4 sm:p-6 sm:pb-4",children:u.jsx("div",{className:"sm:flex sm:items-start",children:u.jsxs("div",{className:"mt-2 text-center sm:mt-0 sm:text-left w-full",children:[u.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:n}),u.jsx("div",{className:"mt-4 text-gray-600 dark:text-gray-300",children:a})]})})}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-4 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-100 dark:border-gray-700",children:u.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm sm:py-2 transition-colors active:scale-[0.98]",onClick:e,children:"Fechar"})})]})]})}):null},V4=({currentPage:s,totalItems:e,itemsPerPage:n,onPageChange:a})=>{const o=Math.ceil(e/n);if(o<=1)return null;const c=()=>{const d=[];if(o<=7)for(let g=1;g<=o;g++)d.push(g);else s<=4?d.push(1,2,3,4,5,"...",o):s>=o-3?d.push(1,"...",o-4,o-3,o-2,o-1,o):d.push(1,"...",s-1,s,s+1,"...",o);return d};return u.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[u.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[u.jsx("button",{onClick:()=>a(Math.max(1,s-1)),disabled:s===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),u.jsx("button",{onClick:()=>a(Math.min(o,s+1)),disabled:s===o,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),u.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",u.jsx("span",{className:"font-medium",children:(s-1)*n+1})," a ",u.jsx("span",{className:"font-medium",children:Math.min(s*n,e)})," de ",u.jsx("span",{className:"font-medium",children:e})," resultados"]})}),u.jsx("div",{children:u.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[u.jsxs("button",{onClick:()=>a(Math.max(1,s-1)),disabled:s===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[u.jsx("span",{className:"sr-only",children:"Anterior"}),u.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),c().map((d,g)=>typeof d=="number"?u.jsx("button",{onClick:()=>a(d),"aria-current":s===d?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${s===d?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:d},g):u.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},g)),u.jsxs("button",{onClick:()=>a(Math.min(o,s+1)),disabled:s===o,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[u.jsx("span",{className:"sr-only",children:"Prximo"}),u.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},Kw=(s,e)=>{const[n,a]=C.useState(null),[o,c]=C.useState(!1),{addToast:d}=Ys(),g=C.useCallback(()=>{a(null)},[]),p=C.useCallback(async(x,b)=>{if(s){g(),c(!0);try{await De.createEnrollment(s.uid,x.id,b),d("success",`Inscrio confirmada em ${x.name}!`),setTimeout(()=>e(),500)}catch(T){const k=T.message||"";if(k.startsWith("CONFLICT|")){const[V,U,z,B]=k.split("|");a({name:U,time:`${z} - ${B}`}),d("warning","Conflito de horrio detectado.")}else{const V=ll(T);d("error",V)}}finally{c(!1)}}},[s,e,g,d]),y=C.useCallback(async x=>{if(s){c(!0);try{await De.cancelEnrollment(x),d("success","Inscrio cancelada com sucesso."),setTimeout(()=>e(),500)}catch(b){d("error","Erro ao cancelar inscrio."),console.error(b)}finally{c(!1)}}},[s,e,d]);return{handleEnroll:p,handleCancel:y,isProcessing:o,isEnrolling:o,conflictData:n,clearState:g}};function Bp(s,e=300){const[n,a]=C.useState(s);return C.useEffect(()=>{const o=setTimeout(()=>{a(s)},e);return()=>{clearTimeout(o)}},[s,e]),n}const Yw=()=>u.jsx("li",{className:"px-6 py-4 animate-pulse",children:u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/5"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/5"})]}),u.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})}),L4=()=>u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col h-full animate-pulse",children:[u.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-1/3"})]}),u.jsx("div",{className:"h-5 bg-gray-200 rounded w-4/5 mb-2"}),u.jsxs("div",{className:"space-y-2 flex-1",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),u.jsxs("div",{className:"mt-4 space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})})]}),u.jsx("div",{className:"w-full h-12 bg-gray-100 border-t border-gray-200"})]}),P4=()=>u.jsxs("tr",{className:"animate-pulse",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),u.jsxs("div",{className:"ml-4 space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:u.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 inline-block"})})]}),U4=()=>u.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3 animate-pulse",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]}),u.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-b border-gray-100 py-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),u.jsx("div",{className:"flex justify-end pt-1",children:u.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"})})]}),cl=({icon:s,title:e,description:n,action:a})=>u.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center bg-white dark:bg-darkcard rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[u.jsx("div",{className:"text-5xl text-gray-300 dark:text-gray-600 mb-4 transition-colors duration-200",children:s||""}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:e}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mb-6",children:n}),a&&u.jsx("button",{onClick:a.onClick,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:a.label})]}),ii=({isOpen:s,onClose:e,onConfirm:n,title:a,message:o,confirmText:c="Confirmar",cancelText:d="Cancelar",isProcessing:g=!1,variant:p="danger"})=>u.jsx(ei,{isOpen:s,onClose:()=>!g&&e(),title:a,children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"text-gray-700",children:o}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{onClick:e,disabled:g,className:"px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 text-gray-800 text-sm font-medium disabled:opacity-50",children:d}),u.jsx(hs,{onClick:n,isLoading:g,variant:p,children:c})]})]})}),z4=({isOpen:s,onClose:e})=>{const[n,a]=C.useState(0),[o,c]=C.useState(!1);if(!s)return null;const d=[{title:"Bem-vindo ao EduEvent! ",description:"Sua nova central para descobrir, gerenciar e participar dos melhores eventos acadmicos e escolares da sua instituio.",color:"bg-indigo-500",image:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-indigo-600 dark:text-indigo-400",children:[u.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),u.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})},{title:"Explore Eventos Incrveis ",description:"Navegue pelo Dashboard para encontrar eventos. Use os filtros inteligentes para buscar por data, nome ou ver apenas o que  relevante para seu curso.",color:"bg-emerald-500",image:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-emerald-600 dark:text-emerald-400",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),u.jsx("path",{d:"M11 8v6M8 11h6"})]})},{title:"Inscrio em 1 Clique ",description:"Gostou de um evento? Clique em 'Garantir Vaga' ou 'Inscrever'. O sistema verifica conflitos de horrio automaticamente para voc.",color:"bg-amber-500",image:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-amber-600 dark:text-amber-400",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("polyline",{points:"14 2 14 8 20 8"}),u.jsx("path",{d:"M9 15l2 2 4-4"})]})},{title:"Sua Agenda Organizada ",description:"Acesse 'Minhas Inscries' para ver todos os seus compromissos confirmados. Voc pode cancelar inscries se mudar de ideia.",color:"bg-purple-500",image:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-purple-600 dark:text-purple-400",children:[u.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),u.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),u.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),u.jsx("path",{d:"M8 14h.01"}),u.jsx("path",{d:"M12 14h.01"}),u.jsx("path",{d:"M16 14h.01"}),u.jsx("path",{d:"M8 18h.01"}),u.jsx("path",{d:"M12 18h.01"}),u.jsx("path",{d:"M16 18h.01"})]})},{title:"Tudo Pronto! ",description:"Voc j sabe o bsico. Agora  com voc! Explore, aprenda e aproveite ao mximo os eventos da sua escola.",color:"bg-primary",image:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-primary dark:text-indigo-400",children:[u.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),u.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),u.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),u.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]})}],g=()=>{n<d.length-1?(c(!0),setTimeout(()=>{a(x=>x+1),c(!1)},300)):e()},p=()=>{e()},y=d[n];return u.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity",onClick:p}),u.jsxs("div",{className:"relative bg-white dark:bg-darkcard w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col min-h-[500px] animate-fade-in border border-gray-100 dark:border-gray-700",children:[u.jsx("div",{className:`h-2 w-full ${y.color} transition-colors duration-500`}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[u.jsx("div",{className:`mb-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-full transition-all duration-300 transform ${o?"opacity-0 scale-90 translate-x-4":"opacity-100 scale-100 translate-x-0"}`,children:y.image}),u.jsxs("div",{className:`transition-all duration-300 ${o?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:y.title}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:y.description})]})]}),u.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700",children:[u.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:d.map((x,b)=>u.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${b===n?`w-6 ${y.color}`:"w-2 bg-gray-300 dark:bg-gray-600"}`},b))}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 font-medium text-sm px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Pular Tutorial"}),u.jsxs("button",{onClick:g,className:`px-6 py-2.5 rounded-xl text-white font-bold shadow-lg shadow-indigo-500/20 transform transition active:scale-95 flex items-center ${y.color} hover:brightness-110`,children:[n===d.length-1?"Comear Agora":"Prximo",n<d.length-1&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})},B4=Yc.memo(({event:s,hasChildren:e,onAction:n})=>{const a=!e&&s.sessions.length===1?s.sessions[0]:null,o=a?a.capacity:0,c=a?a.filled:0,d=o>0?c/o*100:0,g=o>0&&c>=o;let p="bg-indigo-500",y="Pblico";return s.visibility==="course"&&(p="bg-emerald-500",y="Meu Curso"),s.visibility==="class"&&(p="bg-purple-500",y="Minha Turma"),u.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col h-full relative animate-fade-in hover:-translate-y-1",children:[u.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${p} opacity-80`}),u.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${p} bg-opacity-10 dark:bg-opacity-20 text-gray-700 dark:text-gray-200`,children:y}),e?u.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full font-medium border border-gray-200 dark:border-gray-600",children:"Evento Principal"}):g&&a?u.jsxs("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Esgotado"]}):u.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Inscries Abertas"]})]}),u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:s.name}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:s.description}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),u.jsx("span",{className:"font-medium",children:s.location})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),u.jsx("span",{className:"font-medium",children:e?"Ver programao completa":s.sessions.length>1?`${s.sessions.length} horrios disponveis`:`${Ht(a==null?void 0:a.date)}  ${a==null?void 0:a.startTime}`})]})]}),!e&&a&&u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[u.jsx("span",{className:g?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:g?"Sem vagas":`${o-c} vagas restantes`}),u.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:[Math.round(d),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${g?"bg-red-500":d>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${d}%`}})})]})]}),u.jsxs("button",{onClick:()=>n(s),className:"w-full py-3 text-sm font-bold text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors border-t border-indigo-100 dark:border-gray-700 flex justify-center items-center",children:[e?"Explorar Evento":"Ver Detalhes e Inscrever",u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),q4=()=>{const{user:s}=Ks(),e=ti(),[n,a]=C.useState([]),[o,c]=C.useState([]),[d,g]=C.useState(!0),[p,y]=C.useState(null),[x,b]=C.useState(null),[T,k]=C.useState(!1);C.useEffect(()=>{if(!localStorage.getItem("eduevent_tutorial_completed")){const W=setTimeout(()=>k(!0),1e3);return()=>clearTimeout(W)}},[]);const V=()=>{k(!1),localStorage.setItem("eduevent_tutorial_completed","true")},U=C.useCallback(async(I=!0)=>{if(!s)return;I&&g(!0);const[W,ce]=await Promise.all([De.getAvailableEventsForUser(s),De.getEnrollmentsForUser(s.uid)]);a(W),c(ce),I&&g(!1)},[s]),z=C.useCallback(()=>{U(!1),b(null)},[U]),{handleEnroll:B,handleCancel:q,isProcessing:Y,conflictData:de,clearState:ie}=Kw(s,z),[ge,j]=C.useState(""),N=Bp(ge,300),[A,M]=C.useState(""),[D,L]=C.useState(!1),[R,ze]=C.useState(1),pe=9;C.useEffect(()=>{U()},[U]),C.useEffect(()=>{if(p){const I=n.find(W=>W.id===p.id);I&&JSON.stringify(I)!==JSON.stringify(p)&&y(I)}},[n,p]);const X=C.useMemo(()=>{const I=new Set;return n.forEach(W=>{W.parentId&&I.add(W.parentId)}),I},[n]),le=C.useMemo(()=>{const I=new Date().toISOString().split("T")[0];return n.filter(W=>{if(W.parentId)return!1;const ce=W.name.toLowerCase().includes(N.toLowerCase())||W.description.toLowerCase().includes(N.toLowerCase()),fe=n.filter(tt=>tt.parentId===W.id),Te=[...W.sessions,...fe.flatMap(tt=>tt.sessions)],Ae=A?Te.some(tt=>tt.date===A):!0,Be=D||Te.some(tt=>tt.date>=I);return ce&&Ae&&Be})},[n,N,A,D]);C.useEffect(()=>{ze(1)},[N,A,D]);const xe=C.useMemo(()=>{const I=(R-1)*pe;return le.slice(I,I+pe)},[le,R]),Ee=(I,W)=>o.find(ce=>ce.eventId===I&&ce.sessionId===W),ke=C.useCallback(I=>{X.has(I.id)?e(`/event/${I.id}`):(ie(),y(I))},[X,e,ie]);return u.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[u.jsx(z4,{isOpen:T,onClose:V}),u.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Dashboard de Eventos"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),u.jsxs("div",{className:"bg-white dark:bg-darkcard p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col lg:flex-row gap-4 items-end transition-colors duration-200",children:[u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),u.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:ge,onChange:I=>j(I.target.value)})]})]}),u.jsxs("div",{className:"w-full lg:w-48",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Data Especfica"}),u.jsx("input",{type:"date",className:"w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:A,onChange:I=>M(I.target.value)})]}),u.jsx("div",{className:"w-full lg:w-auto pb-2",children:u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:D,onChange:I=>L(I.target.checked),style:{right:D?"0":"auto",left:D?"auto":"0",borderColor:D?"#4F46E5":"#E5E7EB"}}),u.jsx("label",{htmlFor:"toggle",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${D?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`})]}),u.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mostrar Passados"})]})})]}),d?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((I,W)=>u.jsx(L4,{},W))}):le.length===0?u.jsx(cl,{title:"Nenhum evento encontrado",description:n.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":D?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'.",action:!D&&n.length>0?{label:"Ver histrico de eventos",onClick:()=>L(!0)}:void 0}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:xe.map(I=>u.jsx(B4,{event:I,hasChildren:X.has(I.id),onAction:ke},I.id))}),u.jsx(V4,{currentPage:R,totalItems:le.length,itemsPerPage:pe,onPageChange:ze})]}),u.jsx(ei,{isOpen:!!p,onClose:()=>y(null),title:p?p.name:"",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:u.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:p==null?void 0:p.description})}),de&&u.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md animate-slide-in",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),u.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[u.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[u.jsx("p",{className:"font-semibold",children:de.name}),u.jsx("p",{className:"text-xs",children:de.time})]})]})]})]})}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[u.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),u.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:p==null?void 0:p.sessions.map(I=>{const W=Ee(p.id,I.id),ce=!!W,fe=I.filled>=I.capacity,Te=I.filled/I.capacity*100,Ae=I.date<new Date().toISOString().split("T")[0];return u.jsx("div",{className:`relative border rounded-lg p-4 transition-all duration-200 
                                ${ce?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":fe||Ae?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-70":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:Ht(I.date)}),ce&&u.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),Ae&&!ce&&u.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),u.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:u.jsxs("span",{className:"flex items-center",children:[" ",I.startTime," - ",I.endTime]})}),u.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[u.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${fe?"bg-red-500":Te>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(Te,100)}%`}})}),u.jsx("span",{className:`text-xs font-bold w-24 text-right ${fe?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:fe?"ESGOTADO":`${I.capacity-I.filled} vagas`})]})]}),u.jsx("div",{className:"flex items-center",children:ce?u.jsx("button",{onClick:()=>W&&b(W.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):u.jsx(hs,{onClick:()=>p&&B(p,I.id),isLoading:Y,disabled:fe||Ae,className:`w-full sm:w-auto ${fe||Ae?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed hover:bg-gray-300":""}`,children:Ae?"Encerrado":fe?"Lotado":"Garantir Vaga"})})]})},I.id)})})]})]})}),u.jsx(ii,{isOpen:!!x,onClose:()=>b(null),onConfirm:()=>x&&q(x),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:Y})]})},o_=Yc.memo(({evt:s,isNested:e,onOpenSubEvent:n,onManageEnrollments:a,onEdit:o,onDelete:c,onConfigPage:d})=>{const g=!s.parentId,p=s.sessions.reduce((B,q)=>B+q.capacity,0),y=s.sessions.reduce((B,q)=>B+q.filled,0),x=p>0?y/p*100:0,b=p>0&&y>=p;let T="bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",k="Pblico";return s.visibility==="course"&&(T="bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300",k="Curso"),s.visibility==="class"&&(T="bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",k="Turma"),u.jsxs("li",{className:`relative transition-all duration-200 border-b border-gray-100 dark:border-gray-700 last:border-0 ${e?"bg-gray-50/80 hover:bg-gray-100 dark:bg-gray-800/40 dark:hover:bg-gray-800":"bg-white hover:bg-gray-50 dark:bg-darkcard dark:hover:bg-gray-800/60"}`,children:[e&&u.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-12 flex justify-center",children:[u.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 h-full absolute left-6 -top-1/2"}),u.jsx("div",{className:"absolute top-1/2 left-6 w-4 h-px bg-gray-300 dark:bg-gray-600"})]}),u.jsxs("div",{className:`px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between ${e?"pl-14":""}`,children:[u.jsxs("div",{className:"mb-4 sm:mb-0 flex-1 pr-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[e&&u.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:"Sub"}),u.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${g?"text-lg":"text-base"}`,children:s.name}),s.hasDedicatedPage&&!e&&u.jsx("a",{href:`#/special/${s.id}`,target:"_blank",rel:"noreferrer",className:"text-[10px] font-bold bg-amber-100 text-amber-700 hover:bg-amber-200 dark:bg-amber-900/40 dark:text-amber-300 px-1.5 py-0.5 rounded border border-amber-200 dark:border-amber-700 ml-2 flex items-center gap-1",title:"Ver Pgina Dedicada",children:" PAGE "})]}),u.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 flex flex-wrap gap-3 items-center",children:[u.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${T}`,children:k}),u.jsxs("span",{className:"flex items-center text-gray-400 dark:text-gray-500",title:"Sesses cadastradas",children:[u.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.sessions.length," sesses"]})]}),u.jsxs("div",{className:"mt-3 w-full max-w-[200px]",children:[u.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 dark:text-gray-400 mb-1 uppercase font-bold tracking-wide",children:[u.jsx("span",{children:"Ocupao"}),u.jsxs("span",{className:b?"text-red-600 dark:text-red-400":"",children:[y,"/",p]})]}),u.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${b?"bg-red-500":x>80?"bg-amber-400":"bg-primary"}`,style:{width:`${Math.min(x,100)}%`}})})]})]}),u.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-80 hover:opacity-100",children:[!e&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>d(s),className:`p-2 rounded-md transition border ${s.hasDedicatedPage?"bg-amber-50 text-amber-600 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800":"text-gray-400 border-transparent hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:"Configurar Pgina Dedicada",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),u.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"})]}),g&&u.jsx("button",{onClick:()=>n(s),className:"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-2 rounded-md transition",title:"Adicionar Sub-evento vinculado",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("button",{onClick:()=>a(s),className:"text-gray-500 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 p-2 rounded-md transition",title:"Gerenciar Inscritos e Exportar",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),u.jsx("button",{onClick:()=>o(s),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 p-2 rounded-md transition",title:"Editar Evento",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002 2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),u.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),u.jsx("button",{onClick:()=>c(s),className:"text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 p-2 rounded-md transition",title:"Excluir Evento",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})}),H4=()=>{var Hr,ea,ta,Fr,ur,ci;const{user:s}=Ks(),e=ti(),{addToast:n}=Ys(),[a,o]=C.useState([]),[c,d]=C.useState([]),[g,p]=C.useState([]),[y,x]=C.useState(!1),[b,T]=C.useState(!1),[k,V]=C.useState(!1),[U,z]=C.useState(1),[B,q]=C.useState([void 0]),[Y,de]=C.useState(!0),ie=10,[ge,j]=C.useState(""),N=Bp(ge,300),[A,M]=C.useState({searchTerm:"",visibility:"",course:""}),[D,L]=C.useState(""),[R,ze]=C.useState("details"),[pe,X]=C.useState("manual"),[le,xe]=C.useState(null),[Ee,ke]=C.useState(null),[I,W]=C.useState(null),[ce,fe]=C.useState(null),[Te,Ae]=C.useState(!1),[Be,tt]=C.useState(!1),[Re,St]=C.useState({name:"",description:"",location:"",visibility:"public",allowedCourses:[],allowedClasses:[],sessions:[],parentId:void 0,hasDedicatedPage:!1,dedicatedPageConfig:{schedule:[],gallery:[],themeColor:"#4F46E5"}}),[st,fn]=C.useState(null),[dt,Gt]=C.useState({date:"",startTime:"",endTime:"",capacity:30}),[Ut,mn]=C.useState({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),[ae,Ge]=C.useState({time:"",title:"",description:""}),[We,bt]=C.useState(""),Xs=`${new Date().getFullYear()+2}-12-31`,oi=50,$t=C.useCallback(async F=>{V(!0);const oe=B[F-1],{data:be,nextCursor:Ie}=await De.getEvents({limit:ie,cursor:oe,filters:A});o(be),de(!!Ie),Ie&&B.length<=F&&q(Rt=>[...Rt,Ie]),V(!1)},[B,A]),fs=async()=>{const[F,oe]=await Promise.all([De.getCourses(),De.getClasses()]);d(F),p(oe)};C.useEffect(()=>{fs()},[]),C.useEffect(()=>{M(F=>({...F,searchTerm:N}))},[N]),C.useEffect(()=>{q([void 0]),z(1),$t(1)},[A]);const Js=C.useMemo(()=>{const F=[],oe={},be=new Set(a.map(Ie=>Ie.id));return a.forEach(Ie=>{Ie.parentId&&be.has(Ie.parentId)?(oe[Ie.parentId]||(oe[Ie.parentId]=[]),oe[Ie.parentId].push(Ie)):F.push(Ie)}),F.sort((Ie,Rt)=>(Rt.createdAt||"").localeCompare(Ie.createdAt||"")),Object.values(oe).forEach(Ie=>{Ie.sort((Rt,Nr)=>(Rt.createdAt||"").localeCompare(Nr.createdAt||""))}),{roots:F,childrenMap:oe}},[a]),li=()=>{if(!Y)return;const F=U+1;z(F),$t(F)},Br=()=>{if(U===1)return;const F=U-1;z(F),$t(F)},Xi=(F,oe)=>{M(be=>({...be,[F]:oe}))},Ws=()=>{z(1),q([void 0]),$t(1)},ms=()=>{St({name:"",description:"",location:"",sessions:[],visibility:"public",allowedCourses:[],allowedClasses:[],parentId:void 0,hasDedicatedPage:!1,dedicatedPageConfig:{schedule:[],gallery:[],themeColor:"#4F46E5"}}),Gt({date:"",startTime:"",endTime:"",capacity:30}),mn({startDate:"",endDate:"",startTime:"",endTime:"",capacity:30,daysOfWeek:[]}),xe(null),X("manual"),ke(null),W(null),ze("details")},Ji=()=>{ms(),L("Criar Novo Evento"),x(!0)},Dn=C.useCallback(F=>{var oe;if(ms(),L("Adicionar Sub-evento"),xe(F.name),(oe=F.sessions)!=null&&oe.length){const be=F.sessions.map(Ie=>Ie.date).sort();W({min:be[0],max:be[be.length-1]})}St({parentId:F.id,visibility:F.visibility,allowedCourses:F.allowedCourses,allowedClasses:F.allowedClasses,location:F.location,sessions:[],name:"",description:"",hasDedicatedPage:!1,dedicatedPageConfig:{schedule:[],gallery:[],themeColor:"#4F46E5"}}),x(!0)},[]),Qt=C.useCallback(F=>{ms(),St({...F}),L("Editar Evento"),x(!0)},[]),Cn=C.useCallback(F=>{var oe,be,Ie,Rt;fn({eventId:F.id,eventName:F.name,hasDedicatedPage:F.hasDedicatedPage||!1,config:{schedule:((oe=F.dedicatedPageConfig)==null?void 0:oe.schedule)||[],gallery:((be=F.dedicatedPageConfig)==null?void 0:be.gallery)||[],themeColor:((Ie=F.dedicatedPageConfig)==null?void 0:Ie.themeColor)||"#4F46E5",presentationText:((Rt=F.dedicatedPageConfig)==null?void 0:Rt.presentationText)||""}}),T(!0)},[]),kt=async F=>{if(F.preventDefault(),!!st){V(!0);try{const oe=a.find(be=>be.id===st.eventId);if(oe){const be={...oe,hasDedicatedPage:st.hasDedicatedPage,dedicatedPageConfig:st.config};await De.updateEvent(be),n("success","Configurao da pgina salva!"),Ws(),T(!1)}}catch(oe){console.error(oe),n("error","Erro ao salvar configurao.")}finally{V(!1)}}},Wi=()=>{if(!ae.time||!ae.title||!st)return;const F={id:`sch_${Date.now()}`,...ae};fn(oe=>oe?{...oe,config:{...oe.config,schedule:[...oe.config.schedule,F]}}:null),Ge({time:"",title:"",description:""})},Zs=F=>{fn(oe=>oe?{...oe,config:{...oe.config,schedule:oe.config.schedule.filter(be=>be.id!==F)}}:null)},Zi=()=>{if(!We||!st)return;const F={id:`img_${Date.now()}`,url:We};fn(oe=>oe?{...oe,config:{...oe.config,gallery:[...oe.config.gallery,F]}}:null),bt("")},ir=F=>{fn(oe=>oe?{...oe,config:{...oe.config,gallery:oe.config.gallery.filter(be=>be.id!==F)}}:null)},qr=C.useCallback(F=>{fe(F.id),Ae(!F.parentId)},[]),It=C.useCallback(F=>{e(`/admin/events/${F.id}/enrollments`)},[e]),or=()=>{if(!dt.date||!dt.startTime||!dt.endTime)return;if(I&&(dt.date<I.min||dt.date>I.max)){ke(`A data deve estar entre ${Ht(I.min)} e ${Ht(I.max)}.`);return}if(dt.startTime>=dt.endTime){ke("O horrio de trmino deve ser aps o horrio de incio.");return}const F={id:`sess_${Date.now()}`,date:dt.date,startTime:dt.startTime,endTime:dt.endTime,capacity:dt.capacity||30,filled:0};St(oe=>({...oe,sessions:[...oe.sessions||[],F]})),Gt({date:"",startTime:"",endTime:"",capacity:30}),ke(null)},lr=()=>{ke(null);const{startDate:F,endDate:oe,startTime:be,endTime:Ie,capacity:Rt,daysOfWeek:Nr}=Ut;if(!F||!oe||!be||!Ie||!Nr.length){ke("Preencha todos os campos.");return}if(I&&(F<I.min||oe>I.max)){ke(`O intervalo deve estar entre ${Ht(I.min)} e ${Ht(I.max)}.`);return}if(oe>Xs){ke(`A gerao  limitada at ${Ht(Xs)}.`);return}if(be>=Ie){ke("O horrio de trmino deve ser aps o horrio de incio.");return}const to=new Date(`${F}T12:00:00Z`),ui=new Date(`${oe}T12:00:00Z`);if(to>ui){ke("A data de incio deve ser anterior  de fim.");return}const Ar=[],gn=new Date(to);let ps=0;for(;gn<=ui&&(ps++,!(ps>1e3));)Nr.includes(gn.getUTCDay())&&Ar.push({id:`sess_${gn.getTime()}_${Ar.length}`,date:gn.toISOString().split("T")[0],startTime:be,endTime:Ie,capacity:Rt,filled:0}),gn.setDate(gn.getDate()+1);if(Ar.length>oi){ke(`Limite de segurana excedido. Tente gerar menos de ${oi} sesses por vez.`);return}if(!Ar.length){ke("Nenhuma data encontrada no intervalo para os dias selecionados.");return}St(Hn=>({...Hn,sessions:[...Hn.sessions||[],...Ar]})),n("success",`${Ar.length} sesses geradas.`)},qn=F=>{St(oe=>{var be;return{...oe,sessions:(be=oe.sessions)==null?void 0:be.filter((Ie,Rt)=>Rt!==F)}})},_l=async F=>{var oe,be;if(F.preventDefault(),!Re.name||!((oe=Re.sessions)!=null&&oe.length)){ke("Nome e ao menos uma sesso so obrigatrios."),Re.name&&!((be=Re.sessions)!=null&&be.length)&&ze("sessions");return}V(!0);try{Re.id?(await De.updateEvent(Re),n("success","Evento atualizado com sucesso!")):(await De.createEvent({...Re,id:`evt_${Date.now()}`,createdAt:new Date().toISOString(),createdBy:(s==null?void 0:s.uid)||""}),n("success","Evento criado com sucesso!")),x(!1),ms(),Ws()}catch(Ie){console.error(Ie),n("error","Erro ao salvar evento.")}finally{V(!1)}},eo=async()=>{if(ce){tt(!0);try{await De.deleteEvent(ce),n("success","Evento removido com sucesso!"),fe(null),Ws()}catch(F){console.error(F),n("error","Erro ao excluir evento.")}finally{tt(!1)}}},cr=F=>St(oe=>{var be;return{...oe,allowedCourses:(be=oe.allowedCourses)!=null&&be.includes(F)?oe.allowedCourses.filter(Ie=>Ie!==F):[...oe.allowedCourses||[],F]}}),gs=F=>St(oe=>{var be;return{...oe,allowedClasses:(be=oe.allowedClasses)!=null&&be.includes(F)?oe.allowedClasses.filter(Ie=>Ie!==F):[...oe.allowedClasses||[],F]}}),El=F=>mn(oe=>({...oe,daysOfWeek:oe.daysOfWeek.includes(F)?oe.daysOfWeek.filter(be=>be!==F):[...oe.daysOfWeek,F]}));return u.jsxs("div",{className:"container mx-auto space-y-6",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gerenciamento de Eventos"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Crie, edite e gerencie eventos e suas sesses."})]}),u.jsxs("div",{className:"flex flex-col xl:flex-row gap-2 w-full lg:w-auto items-center",children:[u.jsxs("div",{className:"w-full xl:w-64 relative",children:[u.jsx("input",{type:"text",placeholder:"Buscar evento...",className:"w-full pl-9 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:ge,onChange:F=>j(F.target.value)}),u.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 absolute left-2 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),u.jsxs("div",{className:"flex gap-2 w-full xl:w-auto",children:[u.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:A.visibility,onChange:F=>Xi("visibility",F.target.value),children:[u.jsx("option",{value:"",children:"Todas Visibilidades"}),u.jsx("option",{value:"public",children:"Pblico"}),u.jsx("option",{value:"course",children:"Por Curso"}),u.jsx("option",{value:"class",children:"Por Turma"})]}),u.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:A.course,onChange:F=>Xi("course",F.target.value),children:[u.jsx("option",{value:"",children:"Todos os Cursos"}),c.map(F=>u.jsx("option",{value:F.id,children:F.name},F.id))]})]}),u.jsx("button",{onClick:Ji,className:"w-full xl:w-auto bg-primary text-white px-6 py-2 rounded-md font-bold whitespace-nowrap hover:bg-indigo-700 shadow-sm transition",children:"+ Novo Evento"})]})]}),k?u.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((F,oe)=>u.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm rounded-lg p-0 overflow-hidden border border-gray-100 dark:border-gray-700",children:u.jsx(Yw,{})},oe))}):a.length===0?u.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 sm:rounded-lg p-8",children:u.jsx(cl,{title:"Nenhum evento encontrado",description:"Tente ajustar os filtros ou crie um novo evento."})}):u.jsx("div",{className:"space-y-4",children:Js.roots.map(F=>{const oe=Js.childrenMap[F.id]||[];return u.jsx("div",{className:"bg-white dark:bg-darkcard shadow-sm border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden transition-shadow hover:shadow-md",children:u.jsxs("ul",{children:[u.jsx(o_,{evt:F,onOpenSubEvent:Dn,onManageEnrollments:It,onEdit:Qt,onDelete:qr,onConfigPage:Cn}),oe.map(be=>u.jsx(o_,{evt:be,isNested:!0,onOpenSubEvent:Dn,onManageEnrollments:It,onEdit:Qt,onDelete:qr,onConfigPage:Cn},be.id))]})},F.id)})}),a.length>0&&u.jsx("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-lg px-4 py-3 flex items-center justify-between sm:px-6 shadow-sm",children:u.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Pgina ",u.jsx("span",{className:"font-medium",children:U})]})}),u.jsx("div",{children:u.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[u.jsx("button",{onClick:Br,disabled:U===1||k,className:"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Anterior"}),u.jsx("button",{onClick:li,disabled:!Y||k,className:"relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Prximo"})]})})]})}),u.jsx(ii,{isOpen:!!ce,onClose:()=>fe(null),onConfirm:eo,title:"Confirmar Excluso",message:u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Tem certeza que deseja excluir este evento?"}),Te&&u.jsx("p",{className:"text-red-600 dark:text-red-400 font-bold mt-2 bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-100 dark:border-red-900/30",children:" Ateno: Todos os sub-eventos vinculados tambm sero excludos."})]}),isProcessing:Be}),u.jsx(ei,{isOpen:y,onClose:()=>x(!1),title:D,children:u.jsxs("form",{onSubmit:_l,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 mb-4 overflow-x-auto",children:[u.jsx("button",{type:"button",onClick:()=>ze("details"),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${R==="details"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"1. Detalhes"}),u.jsxs("button",{type:"button",onClick:()=>ze("sessions"),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${R==="sessions"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:["2. Sesses (",((Hr=Re.sessions)==null?void 0:Hr.length)||0,")"]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4",children:[R==="details"&&u.jsxs("div",{className:"space-y-4 animate-fade-in",children:[le&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 p-3 rounded-md text-sm mb-4",children:["Vinculado ao evento pai: ",u.jsx("strong",{children:le})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome do Evento *"}),u.jsx("input",{type:"text",required:!0,placeholder:"Ex: Feira de Cincias",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:Re.name,onChange:F=>St({...Re,name:F.target.value})})]}),u.jsxs("div",{className:le?"opacity-50 pointer-events-none":"",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibilidade"}),u.jsxs("select",{value:Re.visibility,onChange:F=>St({...Re,visibility:F.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",disabled:!!le,children:[u.jsx("option",{value:"public",children:"Pblico (Todos podem ver)"}),u.jsx("option",{value:"course",children:"Restrito a Cursos"}),u.jsx("option",{value:"class",children:"Restrito a Turmas"})]}),Re.visibility==="course"&&u.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[u.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione os cursos permitidos:"}),c.map(F=>{var oe;return u.jsxs("div",{className:"flex items-center mb-1",children:[u.jsx("input",{type:"checkbox",id:`c_${F.id}`,checked:(oe=Re.allowedCourses)==null?void 0:oe.includes(F.id),onChange:()=>cr(F.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),u.jsx("label",{htmlFor:`c_${F.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:F.name})]},F.id)})]}),Re.visibility==="class"&&u.jsxs("div",{className:"mt-2 p-3 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800/50 max-h-40 overflow-y-auto",children:[u.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Selecione as turmas permitidas:"}),c.map(F=>u.jsxs("div",{className:"mb-2",children:[u.jsx("strong",{className:"text-xs text-gray-900 dark:text-gray-200 block mb-1",children:F.name}),u.jsx("div",{className:"pl-2",children:g.filter(oe=>oe.courseId===F.id).map(oe=>{var be;return u.jsxs("div",{className:"flex items-center mb-1",children:[u.jsx("input",{type:"checkbox",id:`cl_${oe.id}`,checked:(be=Re.allowedClasses)==null?void 0:be.includes(oe.id),onChange:()=>gs(oe.id),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),u.jsx("label",{htmlFor:`cl_${oe.id}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:oe.name})]},oe.id)})})]},F.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Local"}),u.jsx("input",{type:"text",placeholder:"Ex: Auditrio Principal",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",value:Re.location,onChange:F=>St({...Re,location:F.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descrio"}),u.jsx("textarea",{placeholder:"Detalhes do evento...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary",rows:3,value:Re.description,onChange:F=>St({...Re,description:F.target.value})})]})]}),R==="sessions"&&u.jsxs("div",{className:"space-y-4 animate-fade-in",children:[I&&u.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 p-3 text-sm text-amber-800 dark:text-amber-300",children:[" ",u.jsx("strong",{children:"Restrio de Data:"})," Este sub-evento deve ocorrer entre ",Ht(I.min)," e ",Ht(I.max),"."]}),u.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden",children:[u.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:[u.jsx("button",{type:"button",onClick:()=>X("manual"),className:`flex-1 py-2 text-sm font-medium ${pe==="manual"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Adicionar Manual"}),u.jsx("button",{type:"button",onClick:()=>X("recurring"),className:`flex-1 py-2 text-sm font-medium ${pe==="recurring"?"bg-white dark:bg-darkcard text-primary dark:text-indigo-400 border-t-2 border-primary":"text-gray-500 dark:text-gray-400"}`,children:"Gerar Recorrncia"})]}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:[pe==="manual"&&u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Data"}),u.jsx("input",{type:"date",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:dt.date,min:I==null?void 0:I.min,max:I==null?void 0:I.max,onChange:F=>Gt({...dt,date:F.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Incio"}),u.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:dt.startTime,onChange:F=>Gt({...dt,startTime:F.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fim"}),u.jsx("input",{type:"time",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:dt.endTime,onChange:F=>Gt({...dt,endTime:F.target.value})})]}),u.jsxs("div",{className:"sm:col-span-2 flex items-end gap-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Vagas"}),u.jsx("input",{type:"number",className:"w-full border border-gray-300 dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:dt.capacity,onChange:F=>Gt({...dt,capacity:parseInt(F.target.value)})})]}),u.jsx("button",{type:"button",onClick:or,className:"bg-white dark:bg-gray-700 border border-primary dark:border-indigo-500 text-primary dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-gray-600 px-4 py-1.5 rounded text-sm font-medium h-[34px]",children:"+ Adicionar"})]})]}),pe==="recurring"&&u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"De"}),u.jsx("input",{type:"date",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:Ut.startDate,min:I==null?void 0:I.min,max:Xs,onChange:F=>mn({...Ut,startDate:F.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"At"}),u.jsx("input",{type:"date",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:Ut.endDate,min:I==null?void 0:I.min,max:Xs,onChange:F=>mn({...Ut,endDate:F.target.value})})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsx("input",{type:"time",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:Ut.startTime,onChange:F=>mn({...Ut,startTime:F.target.value})}),u.jsx("input",{type:"time",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:Ut.endTime,onChange:F=>mn({...Ut,endTime:F.target.value})}),u.jsx("input",{type:"number",placeholder:"Cap.",className:"w-full border dark:border-gray-600 p-1.5 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:Ut.capacity,onChange:F=>mn({...Ut,capacity:parseInt(F.target.value)})})]}),u.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"].map((F,oe)=>u.jsx("button",{type:"button",onClick:()=>El(oe),className:`text-xs w-8 h-8 rounded-full border flex items-center justify-center transition ${Ut.daysOfWeek.includes(oe)?"bg-primary text-white border-primary":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600"}`,children:F.charAt(0)},F))}),u.jsx("button",{type:"button",onClick:lr,className:"w-full bg-primary text-white py-2 rounded text-sm hover:bg-indigo-700",children:"Gerar Sesses"})]}),Ee&&u.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded",children:Ee})]})]}),u.jsxs("div",{children:[u.jsxs("h5",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex justify-between items-center",children:["Sesses Geradas",u.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:((ea=Re.sessions)==null?void 0:ea.length)||0})]}),u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md max-h-48 overflow-y-auto bg-white dark:bg-gray-800 divide-y divide-gray-100 dark:divide-gray-700",children:[((ta=Re.sessions)==null?void 0:ta.length)===0&&u.jsx("p",{className:"text-sm text-gray-400 text-center py-6 italic",children:"Nenhuma sesso adicionada ainda."}),(Fr=Re.sessions)==null?void 0:Fr.slice().sort((F,oe)=>F.date.localeCompare(oe.date)).map((F,oe)=>u.jsxs("div",{className:"p-2.5 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/50 text-sm",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:Ht(F.date)}),u.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[F.startTime," - ",F.endTime,"  ",F.capacity," vagas"]})]}),u.jsx("button",{type:"button",onClick:()=>qn(oe),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400 p-1",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},oe))]})]})]})]}),u.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:[u.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),u.jsx(hs,{type:"submit",isLoading:k,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar Evento"})]})]})}),u.jsx(ei,{isOpen:b,onClose:()=>T(!1),title:`Pgina Dedicada: ${(st==null?void 0:st.eventName)||""}`,children:st&&u.jsxs("form",{onSubmit:kt,className:"flex flex-col h-[70vh] sm:h-[60vh]",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto px-1 pb-4 space-y-6 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center justify-between bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-200 dark:border-amber-900/30",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-amber-900 dark:text-amber-400",children:"Habilitar Pgina Dedicada"}),u.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-500",children:"Cria uma landing page exclusiva e pblica para este evento."})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:st.hasDedicatedPage,onChange:F=>fn({...st,hasDedicatedPage:F.target.checked})}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),st.hasDedicatedPage&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto de Apresentao (Hero)"}),u.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",rows:4,placeholder:"Uma descrio detalhada e convidativa sobre o evento...",value:st.config.presentationText||"",onChange:F=>fn({...st,config:{...st.config,presentationText:F.target.value}})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cor do Tema"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"color",className:"h-10 w-20 p-0 border-0 rounded cursor-pointer",value:st.config.themeColor||"#4F46E5",onChange:F=>fn({...st,config:{...st.config,themeColor:F.target.value}})}),u.jsx("span",{className:"text-sm text-gray-500 uppercase",children:st.config.themeColor})]})]}),u.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[u.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Itens Manuais do Cronograma"}),u.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Nota: Sub-eventos deste evento sero adicionados automaticamente ao cronograma da pgina."}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded-md mb-3 space-y-2",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"time",className:"border rounded px-2 py-1 text-sm w-24 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:ae.time,onChange:F=>Ge({...ae,time:F.target.value})}),u.jsx("input",{type:"text",placeholder:"Ttulo (ex: Abertura)",className:"border rounded px-2 py-1 text-sm flex-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:ae.title,onChange:F=>Ge({...ae,title:F.target.value})})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Descrio da atividade...",className:"border rounded px-2 py-1 text-sm flex-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:ae.description,onChange:F=>Ge({...ae,description:F.target.value})}),u.jsx("button",{type:"button",onClick:Wi,className:"bg-amber-500 text-white px-3 py-1 rounded text-sm font-bold hover:bg-amber-600",children:"+"})]})]}),u.jsx("ul",{className:"space-y-2 max-h-40 overflow-y-auto",children:(ur=st.config.schedule)==null?void 0:ur.map(F=>u.jsxs("li",{className:"flex justify-between items-start bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-amber-600 mr-2",children:F.time}),u.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:F.title}),F.description&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:F.description})]}),u.jsx("button",{type:"button",onClick:()=>Zs(F.id),className:"text-red-500 hover:text-red-700",children:""})]},F.id))})]}),u.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[u.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Galeria (URLs)"}),u.jsxs("div",{className:"flex gap-2 mb-3",children:[u.jsx("input",{type:"url",placeholder:"https://exemplo.com/imagem.jpg",className:"border rounded px-2 py-1 text-sm flex-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:We,onChange:F=>bt(F.target.value)}),u.jsx("button",{type:"button",onClick:Zi,className:"bg-amber-500 text-white px-3 py-1 rounded text-sm font-bold hover:bg-amber-600",children:"Add"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:(ci=st.config.gallery)==null?void 0:ci.map(F=>u.jsxs("div",{className:"relative group aspect-square bg-gray-100 rounded overflow-hidden",children:[u.jsx("img",{src:F.url,alt:"Gallery",className:"w-full h-full object-cover"}),u.jsx("button",{type:"button",onClick:()=>ir(F.id),className:"absolute top-1 right-1 bg-red-600 text-white w-5 h-5 rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},F.id))})]})]})]}),u.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-200 dark:border-gray-600 flex justify-between gap-3",children:[u.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium",children:"Cancelar"}),u.jsx(hs,{type:"submit",isLoading:k,className:"px-6 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-md text-sm font-medium shadow-sm",children:"Salvar Pgina"})]})]})})]})},F4=Yc.memo(({user:s,courseName:e,className:n,onEdit:a,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:d})=>u.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-primary dark:text-indigo-300 font-bold",children:s.name?s.name.charAt(0):s.email.charAt(0).toUpperCase()}),u.jsxs("div",{className:"ml-4",children:[u.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.name||"Sem nome"}),u.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.email})]})]})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:e}),u.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.rm||"-"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.role===ot.ADMIN?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:s.role})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[u.jsx("button",{onClick:()=>d(s),className:"text-cyan-600 hover:text-cyan-900 dark:text-cyan-400 dark:hover:text-cyan-300",title:"Ver Inscries",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),u.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),u.jsx("button",{onClick:()=>a(s),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Editar"}),u.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),u.jsx("button",{onClick:()=>o(s),className:"text-amber-600 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300",children:s.role===ot.ADMIN?"Virar User":"Virar Admin"}),u.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),u.jsx("button",{onClick:()=>c(s),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Excluir"})]})]})),G4=Yc.memo(({user:s,courseName:e,className:n,onEdit:a,onRequestRoleChange:o,onRequestDelete:c,onViewEnrollments:d})=>u.jsxs("div",{className:"bg-white dark:bg-darkcard shadow rounded-lg p-4 flex flex-col space-y-3 border border-gray-100 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-primary dark:text-indigo-300 font-bold",children:s.name?s.name.charAt(0):s.email.charAt(0).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:s.name||"Sem nome"}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.email})]})]}),u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.role===ot.ADMIN?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:s.role})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm border-t border-b border-gray-100 dark:border-gray-700 py-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs block",children:"Curso"}),u.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:e})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs block",children:"Turma"}),u.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:n})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs block",children:"RM"}),u.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.rm||"-"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-2 pt-1 overflow-x-auto",children:[u.jsxs("button",{onClick:()=>d(s),className:"text-cyan-600 dark:text-cyan-400 text-sm font-medium border border-cyan-100 dark:border-cyan-900 px-2 py-1 rounded hover:bg-cyan-50 dark:hover:bg-cyan-900/30 flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Agenda"]}),u.jsx("button",{onClick:()=>a(s),className:"text-indigo-600 dark:text-indigo-400 text-sm font-medium border border-indigo-100 dark:border-indigo-900 px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30",children:"Editar"}),u.jsx("button",{onClick:()=>o(s),className:"text-amber-600 dark:text-amber-400 text-sm font-medium border border-amber-100 dark:border-amber-900 px-2 py-1 rounded hover:bg-amber-50 dark:hover:bg-amber-900/30",children:s.role===ot.ADMIN?"User":"Admin"}),u.jsx("button",{onClick:()=>c(s),className:"text-red-600 dark:text-red-400 text-sm font-medium border border-red-100 dark:border-red-900 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30",children:"Excluir"})]})]})),$4=()=>{const[s,e]=C.useState([]),[n,a]=C.useState([]),[o,c]=C.useState([]),[d,g]=C.useState(!1),[p,y]=C.useState(!0),{addToast:x}=Ys(),[b,T]=C.useState(1),[k,V]=C.useState([void 0]),[U,z]=C.useState(!0),B=15,[q,Y]=C.useState(""),de=Bp(q,300),[ie,ge]=C.useState({searchTerm:"",role:"",courseId:"",classId:""}),[j,N]=C.useState(null),[A,M]=C.useState({name:"",rm:"",courseId:"",classId:""}),[D,L]=C.useState(!1),[R,ze]=C.useState(null),[pe,X]=C.useState([]),[le,xe]=C.useState(!1),[Ee,ke]=C.useState(null),I=C.useCallback(async ae=>{g(!0);const Ge=k[ae-1],{data:We,nextCursor:bt}=await De.getUsers({limit:B,cursor:Ge,filters:ie});e(We),z(!!bt),bt&&k.length<=ae&&V(Sr=>[...Sr,bt]),g(!1)},[k,ie]),W=async()=>{y(!0);const[ae,Ge]=await Promise.all([De.getCourses(),De.getClasses()]);a(ae),c(Ge),y(!1)};C.useEffect(()=>{W()},[]),C.useEffect(()=>{ge(ae=>({...ae,searchTerm:de}))},[de]),C.useEffect(()=>{V([void 0]),T(1),I(1)},[ie]);const ce=()=>{if(!U)return;const ae=b+1;T(ae),I(ae)},fe=()=>{if(b===1)return;const ae=b-1;T(ae),I(ae)},Te=(ae,Ge)=>{ge(We=>({...We,[ae]:Ge}))},Ae=()=>{T(1),V([void 0]),I(1)},Be=C.useCallback(ae=>ke({type:"DELETE",user:ae}),[]),tt=C.useCallback(ae=>ke({type:"ROLE",user:ae}),[]),Re=C.useCallback(ae=>{N(ae),M({name:ae.name||"",rm:ae.rm||"",courseId:ae.courseId||"",classId:ae.classId||""}),L(!1)},[]),St=C.useCallback(async ae=>{ze(ae),xe(!0);try{const Ge=await De.getUserEnrollmentsDetails(ae.uid);X(Ge)}catch(Ge){console.error(Ge),X([])}finally{xe(!1)}},[]),st=async ae=>{R&&(await De.cancelEnrollment(ae),x("success","Inscrio removida."),St(R))},fn=async()=>{if(Ee){L(!0);try{if(Ee.type==="DELETE")await De.deleteUser(Ee.user.uid),x("success","Usurio excludo.");else if(Ee.type==="ROLE"){const ae=Ee.user.role===ot.ADMIN?ot.USER:ot.ADMIN;await De.updateUserRole(Ee.user.uid,ae),x("success",`Role alterada para ${ae}.`)}ke(null),Ae()}catch(ae){const Ge=ll(ae);x("error",Ge)}finally{L(!1)}}},dt=async ae=>{if(ae.preventDefault(),!!j){L(!0);try{await De.updateUserProfile(j.uid,A),N(null),x("success","Perfil atualizado."),Ae()}catch(Ge){const We=ll(Ge);x("error",We)}finally{L(!1)}}},Gt=C.useCallback(ae=>{var Ge;return((Ge=n.find(We=>We.id===ae))==null?void 0:Ge.name)||"-"},[n]),Ut=C.useCallback(ae=>{var Ge;return((Ge=o.find(We=>We.id===ae))==null?void 0:Ge.name)||"-"},[o]),mn=C.useMemo(()=>ie.courseId?o.filter(ae=>ae.courseId===ie.courseId):[],[o,ie.courseId]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gerenciamento de Usurios"}),u.jsxs("div",{className:"bg-white dark:bg-darkcard p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Buscar"}),u.jsx("input",{type:"text",placeholder:"Nome, Email ou RM...",className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:q,onChange:ae=>Y(ae.target.value)})]}),u.jsxs("div",{className:"w-full md:w-40",children:[u.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Perfil"}),u.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ie.role,onChange:ae=>Te("role",ae.target.value),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:ot.ADMIN,children:"Admin"}),u.jsx("option",{value:ot.USER,children:"User"})]})]}),u.jsxs("div",{className:"w-full md:w-48",children:[u.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Curso"}),u.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ie.courseId,onChange:ae=>{ge({...ie,courseId:ae.target.value,classId:""})},children:[u.jsx("option",{value:"",children:"Todos os Cursos"}),n.map(ae=>u.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),u.jsxs("div",{className:"w-full md:w-48",children:[u.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Turma"}),u.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-700",value:ie.classId,onChange:ae=>Te("classId",ae.target.value),disabled:!ie.courseId,children:[u.jsx("option",{value:"",children:"Todas as Turmas"}),mn.map(ae=>u.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-darkcard shadow overflow-x-auto sm:rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 hidden md:table",children:[u.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Usurio"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Curso/Turma"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"RM"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Role"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Aes"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-darkcard divide-y divide-gray-200 dark:divide-gray-700",children:d?u.jsx(u.Fragment,{children:Array.from({length:5}).map((ae,Ge)=>u.jsx(P4,{},Ge))}):s.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"p-0",children:u.jsx(cl,{title:"Nenhum usurio",description:"Tente ajustar os filtros."})})}):s.map(ae=>u.jsx(F4,{user:ae,courseName:Gt(ae.courseId),className:Ut(ae.classId),onEdit:Re,onRequestRoleChange:tt,onRequestDelete:Be,onViewEnrollments:St},ae.uid))})]}),u.jsx("div",{className:"md:hidden p-4 space-y-4 bg-gray-50 dark:bg-darkbg",children:d?u.jsx(u.Fragment,{children:Array.from({length:5}).map((ae,Ge)=>u.jsx(U4,{},Ge))}):s.length===0?u.jsx(cl,{title:"Nenhum usurio",description:"Tente ajustar os filtros."}):s.map(ae=>u.jsx(G4,{user:ae,courseName:Gt(ae.courseId),className:Ut(ae.classId),onEdit:Re,onRequestRoleChange:tt,onRequestDelete:Be,onViewEnrollments:St},ae.uid))})]}),u.jsxs("div",{className:"flex justify-between items-center mt-4",children:[u.jsx("button",{onClick:fe,disabled:b===1||d,className:"px-4 py-2 bg-white dark:bg-darkcard border dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Anterior"}),u.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Pgina ",b]}),u.jsx("button",{onClick:ce,disabled:!U||d,className:"px-4 py-2 bg-white dark:bg-darkcard border dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Prximo"})]}),u.jsx(ii,{isOpen:!!Ee,onClose:()=>ke(null),onConfirm:fn,title:"Confirmar Ao",message:(Ee==null?void 0:Ee.type)==="DELETE"?`Tem certeza que deseja excluir ${Ee.user.name}?`:`Deseja alterar o perfil de ${Ee==null?void 0:Ee.user.name} para ${(Ee==null?void 0:Ee.user.role)===ot.ADMIN?"USURIO":"ADMIN"}?`,isProcessing:D,variant:(Ee==null?void 0:Ee.type)==="DELETE"?"danger":"primary"}),u.jsx(ei,{isOpen:!!j,onClose:()=>N(null),title:"Editar Usurio",children:u.jsxs("form",{onSubmit:dt,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"Nome Completo"}),u.jsx("input",{type:"text",className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:A.name,onChange:ae=>M({...A,name:ae.target.value}),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"RM"}),u.jsx("input",{type:"text",className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:A.rm,onChange:ae=>M({...A,rm:ae.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"Curso"}),u.jsxs("select",{className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:A.courseId,onChange:ae=>M({...A,courseId:ae.target.value,classId:""}),children:[u.jsx("option",{value:"",children:"Selecione..."}),n.map(ae=>u.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:"Turma"}),u.jsxs("select",{className:"mt-1 w-full border dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:A.classId,onChange:ae=>M({...A,classId:ae.target.value}),disabled:!A.courseId,children:[u.jsx("option",{value:"",children:"Selecione..."}),o.filter(ae=>ae.courseId===A.courseId).map(ae=>u.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),u.jsx(hs,{type:"submit",isLoading:D,className:"w-full",children:"Salvar"})]})}),u.jsx(ei,{isOpen:!!R,onClose:()=>ze(null),title:`Agenda: ${R==null?void 0:R.name}`,children:u.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:le?u.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Carregando..."}):pe.length===0?u.jsx("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded text-gray-500 dark:text-gray-300",children:"Nenhuma inscrio."}):u.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:pe.map((ae,Ge)=>u.jsxs("li",{className:"py-3 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-white",children:ae.eventName}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",Ht(ae.sessionDate),"   ",ae.sessionTime]})]}),u.jsx("button",{onClick:()=>st(ae.enrollmentId),className:"text-red-500 dark:text-red-400 text-xs font-bold border dark:border-red-900 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30",children:"Remover"})]},Ge))})})})]})},Q4=()=>{const[s,e]=C.useState([]),[n,a]=C.useState([]),[o,c]=C.useState(!1),{addToast:d}=Ys(),[g,p]=C.useState(""),[y,x]=C.useState(""),[b,T]=C.useState(""),[k,V]=C.useState(""),[U,z]=C.useState(null),[B,q]=C.useState(null),[Y,de]=C.useState(!1),ie=async()=>{c(!0);const pe=await De.getCourses(),X=await De.getClasses();e(pe),a(X),c(!1)};C.useEffect(()=>{ie()},[]);const ge=async pe=>{if(pe.preventDefault(),!!g)try{await De.addCourse(g),p(""),d("success","Curso adicionado."),ie()}catch{d("error","Erro ao adicionar curso.")}},j=pe=>{q({type:"course",id:pe})},N=async pe=>{if(pe.preventDefault(),!(!y||!b))try{await De.addClass(b,y),x(""),d("success","Turma adicionada."),ie()}catch{d("error","Erro ao adicionar turma.")}},A=pe=>{q({type:"class",id:pe})},M=async()=>{if(B){de(!0);try{B.type==="course"?await De.deleteCourse(B.id):await De.deleteClass(B.id),d("success","Item removido."),q(null),ie()}catch{d("error","Erro ao remover item.")}finally{de(!1)}}},D=(pe,X,le)=>{z({type:pe,id:X,name:le})},L=async pe=>{if(pe.preventDefault(),!(!U||!U.name))try{U.type==="course"?await De.updateCourse(U.id,U.name):await De.updateClass(U.id,U.name),d("success","Atualizado com sucesso."),z(null),ie()}catch{d("error","Erro ao atualizar.")}},R=s.filter(pe=>pe.name.toLowerCase().includes(k.toLowerCase())),ze=n.filter(pe=>{var Ee;const X=((Ee=s.find(ke=>ke.id===pe.courseId))==null?void 0:Ee.name)||"",le=pe.name.toLowerCase().includes(k.toLowerCase()),xe=X.toLowerCase().includes(k.toLowerCase());return le||xe});return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gesto de Cursos e Turmas"}),u.jsx("div",{className:"w-full sm:w-72",children:u.jsx("input",{type:"text",placeholder:"Buscar Curso ou Turma...",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:k,onChange:pe=>V(pe.target.value)})})]}),u.jsxs("div",{className:"bg-white dark:bg-darkcard shadow rounded-lg p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Cursos"}),u.jsxs("form",{onSubmit:ge,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[u.jsx("input",{type:"text",placeholder:"Nome do novo curso",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:g,onChange:pe=>p(pe.target.value)}),u.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-primary text-white px-4 py-2 rounded-md hover:bg-indigo-700 font-medium",children:"Adicionar Curso"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[R.map(pe=>u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md p-4 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 shadow-sm",children:[u.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 break-words flex-1 pr-2",children:pe.name}),u.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[u.jsx("button",{onClick:()=>D("course",pe.id,pe.name),className:"text-blue-600 dark:text-blue-400 text-sm hover:text-white hover:bg-blue-600 dark:hover:bg-blue-500 font-medium px-2 py-1 rounded transition",title:"Editar",children:""}),u.jsx("button",{onClick:()=>j(pe.id),className:"text-red-600 dark:text-red-400 text-sm hover:text-white hover:bg-red-600 dark:hover:bg-red-500 font-medium px-2 py-1 rounded transition",title:"Excluir",children:""})]})]},pe.id)),R.length===0&&u.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm italic col-span-full",children:"Nenhum curso encontrado."})]})]}),u.jsxs("div",{className:"bg-white dark:bg-darkcard shadow rounded-lg p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Turmas"}),u.jsxs("form",{onSubmit:N,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[u.jsxs("select",{className:"w-full sm:w-1/3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:b,onChange:pe=>T(pe.target.value),required:!0,children:[u.jsx("option",{value:"",children:"Selecione o Curso..."}),s.map(pe=>u.jsx("option",{value:pe.id,children:pe.name},pe.id))]}),u.jsx("input",{type:"text",placeholder:"Nome da Turma (ex: 2024-A)",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:y,onChange:pe=>x(pe.target.value),required:!0}),u.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-secondary text-white px-4 py-2 rounded-md hover:bg-emerald-700 font-medium",children:"Adicionar Turma"})]}),u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-darkcard overflow-hidden",children:[u.jsxs("div",{className:"hidden md:grid grid-cols-3 bg-gray-50 dark:bg-gray-800 px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700",children:[u.jsx("div",{children:"Turma"}),u.jsx("div",{children:"Curso Associado"}),u.jsx("div",{className:"text-right",children:"Aes"})]}),u.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[ze.map(pe=>{var le;const X=((le=s.find(xe=>xe.id===pe.courseId))==null?void 0:le.name)||"Curso removido";return u.jsxs("div",{className:"p-4 md:px-6 md:py-4 flex flex-col md:grid md:grid-cols-3 gap-2 md:items-center hover:bg-gray-50 dark:hover:bg-gray-800/50 transition",children:[u.jsxs("div",{className:"flex justify-between items-center md:block",children:[u.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:pe.name}),u.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Turma"})]}),u.jsxs("div",{className:"flex justify-between items-center md:block",children:[u.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:X}),u.jsx("span",{className:"md:hidden text-xs font-bold text-gray-400 uppercase",children:"Curso"})]}),u.jsxs("div",{className:"text-right mt-3 md:mt-0 pt-3 md:pt-0 border-t md:border-0 border-gray-100 dark:border-gray-700 flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>D("class",pe.id,pe.name),className:"text-blue-600 dark:text-blue-400 hover:text-white hover:bg-blue-600 dark:hover:bg-blue-500 text-sm font-medium border border-blue-200 dark:border-blue-900 px-3 py-1.5 rounded transition",children:"Editar"}),u.jsx("button",{onClick:()=>A(pe.id),className:"text-red-600 dark:text-red-400 hover:text-white hover:bg-red-600 dark:hover:bg-red-500 text-sm font-medium border border-red-200 dark:border-red-900 px-3 py-1.5 rounded transition",children:"Excluir"})]})]},pe.id)}),ze.length===0&&u.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma turma encontrada."})]})]})]}),u.jsx(ii,{isOpen:!!B,onClose:()=>q(null),onConfirm:M,title:"Confirmar Excluso",message:u.jsxs("div",{children:[u.jsxs("p",{children:["Tem certeza que deseja excluir ",(B==null?void 0:B.type)==="course"?"este curso":"esta turma","?"]}),(B==null?void 0:B.type)==="course"&&u.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 font-bold mt-2 bg-red-50 dark:bg-red-900/20 p-2 rounded",children:" Ateno: Todas as turmas e vnculos de usurios deste curso sero removidos automaticamente."})]}),isProcessing:Y}),u.jsx(ei,{isOpen:!!U,onClose:()=>z(null),title:(U==null?void 0:U.type)==="course"?"Editar Curso":"Editar Turma",children:u.jsxs("form",{onSubmit:L,children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome"}),u.jsx("input",{type:"text",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:ring-primary focus:border-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:(U==null?void 0:U.name)||"",onChange:pe=>z(X=>X?{...X,name:pe.target.value}:null),required:!0})]}),u.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded font-medium hover:bg-indigo-700",children:"Salvar"})]})})]})},qo=s=>{const e=String(s??"");return/[",\n\r]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},K4=()=>{const{id:s}=Pg(),[e,n]=C.useState(null),[a,o]=C.useState([]),[c,d]=C.useState(!0),[g,p]=C.useState(null),[y,x]=C.useState(!1),[b,T]=C.useState(""),{addToast:k}=Ys(),V=async()=>{if(!s)return;d(!0);const q=await De.getEventById(s);n(q||null);const Y=await De.getEnrichedEnrollments(s);o(Y),d(!1)};C.useEffect(()=>{V()},[s]);const U=()=>{if(B.length===0)return;const Y=[["Nome","Email","RM","Data Sesso","Horrio","Data Inscrio"].join(","),...B.map(j=>[qo(j.user.name),qo(j.user.email),qo(j.user.rm),qo(Ht(j.session.date)),qo(`${j.session.startTime} - ${j.session.endTime}`),qo(new Date(j.enrolledAt).toLocaleString("pt-BR"))].join(","))].join(`
`),de=new Blob([`\uFEFF${Y}`],{type:"text/csv;charset=utf-8;"}),ie=URL.createObjectURL(de),ge=document.createElement("a");ge.href=ie,ge.setAttribute("download",`inscritos_${(e==null?void 0:e.name.replace(/\s+/g,"_"))||"evento"}.csv`),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},z=async()=>{if(g){x(!0);try{await De.cancelEnrollment(g),k("success","Inscrio removida."),p(null),V()}catch{k("error","Erro ao remover inscrio.")}finally{x(!1)}}},B=a.filter(q=>{var Y;return q.user.name.toLowerCase().includes(b.toLowerCase())||q.user.email.toLowerCase().includes(b.toLowerCase())||((Y=q.user.rm)==null?void 0:Y.includes(b))});return c?u.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Carregando lista de inscritos..."}):e?u.jsxs("div",{className:"space-y-6 pb-20",children:[" ",u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[u.jsxs(yt,{to:"/admin/events",className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 hover:text-gray-700 flex-shrink-0 transition-colors",children:[u.jsx("span",{className:"sr-only",children:"Voltar"}),u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white leading-tight truncate",children:"Inscritos"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e.name})]}),u.jsx("button",{onClick:U,disabled:B.length===0,className:"p-3 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 disabled:opacity-50",title:"Exportar CSV",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),u.jsx("div",{className:"w-full",children:u.jsx("input",{type:"text",placeholder:"Buscar por nome, RM ou email...",className:"w-full h-12 px-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-base shadow-sm focus:ring-2 focus:ring-primary focus:border-transparent",value:b,onChange:q=>T(q.target.value)})})]}),B.length===0?u.jsx(cl,{title:"Nenhum inscrito",description:b?"Nenhum aluno encontrado para esta busca.":"Nenhum inscrito neste evento at o momento."}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"md:hidden flex items-center justify-center text-xs text-gray-500 dark:text-gray-400 mb-2 animate-pulse",children:[u.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),u.jsx("span",{children:"Deslize a tabela para ver mais"})]}),u.jsx("div",{className:"hidden md:block bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-lg border border-gray-200 dark:border-gray-700",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[u.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aluno"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"RM / Email"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Sesso"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Inscrito em"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aes"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-darkcard divide-y divide-gray-200 dark:divide-gray-700",children:B.map(q=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.user.name})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:q.user.rm||"-"}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:q.user.email})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:Ht(q.session.date)}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[q.session.startTime," - ",q.session.endTime]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(q.enrolledAt).toLocaleDateString("pt-BR")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>p(q.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 font-bold",children:"Remover"})})]},q.id))})]})}),u.jsx("div",{className:"md:hidden space-y-4",children:B.map(q=>u.jsxs("div",{className:"bg-white dark:bg-darkcard shadow-sm rounded-xl p-5 border border-gray-100 dark:border-gray-700 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:q.user.name}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.user.email})]}),u.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 px-2 py-1 rounded font-bold",children:["RM: ",q.user.rm||"-"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("span",{className:"block text-[10px] text-gray-400 uppercase font-bold tracking-wide mb-1",children:"Sesso"}),u.jsx("span",{className:"block font-medium text-gray-800 dark:text-gray-200",children:Ht(q.session.date)}),u.jsxs("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:[q.session.startTime," - ",q.session.endTime]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-[10px] text-gray-400 uppercase font-bold tracking-wide mb-1",children:"Inscrito em"}),u.jsx("span",{className:"block text-gray-600 dark:text-gray-300",children:new Date(q.enrolledAt).toLocaleDateString("pt-BR")})]})]}),u.jsx("button",{onClick:()=>p(q.id),className:"w-full h-12 text-base text-red-600 dark:text-red-400 font-bold border border-red-200 dark:border-red-900/30 bg-red-50 dark:bg-red-900/10 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 transition active:scale-[0.98]",children:"Remover Inscrio"})]},q.id))})]}),u.jsx(ii,{isOpen:!!g,onClose:()=>p(null),onConfirm:z,title:"Remover Inscrio",message:"Tem certeza que deseja remover a inscrio deste aluno? A vaga ser liberada imediatamente.",confirmText:"Confirmar Remoo",isProcessing:y})]}):u.jsx("div",{className:"p-8 text-center text-red-500",children:"Evento no encontrado."})},Y4=()=>{const[s,e]=C.useState(!1),[n,a]=C.useState(!1),{addToast:o}=Ys(),c=C.useRef(null),d=()=>{a(!0)},g=async()=>{e(!0);try{await De.resetAndSeedData(),o("success","Dados gerados com sucesso! Recarregando sistema..."),setTimeout(()=>{window.location.reload()},2e3)}catch(b){console.error(b),o("error","Ocorreu um erro ao gerar os dados."),e(!1),a(!1)}},p=async()=>{e(!0);try{const b=await De.exportData(),T=new Blob([b],{type:"application/json"}),k=URL.createObjectURL(T),V=document.createElement("a");V.href=k,V.download=`eduevent_dump_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),o("success","Exportao concluda.")}catch(b){console.error(b),o("error","Falha na exportao.")}finally{e(!1)}},y=()=>{var b;(b=c.current)==null||b.click()},x=b=>{var V;const T=(V=b.target.files)==null?void 0:V[0];if(!T)return;e(!0);const k=new FileReader;k.onload=async U=>{var z;try{const B=(z=U.target)==null?void 0:z.result;await De.importData(B),o("success","Importao realizada com sucesso! Recarregando..."),setTimeout(()=>{window.location.reload()},1500)}catch(B){console.error(B),o("error","Erro ao importar dados. Verifique o arquivo."),e(!1)}finally{c.current&&(c.current.value="")}},k.onerror=()=>{o("error","Erro ao ler o arquivo."),e(!1)},k.readAsText(T)};return u.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto mt-10",children:[u.jsx("div",{className:"bg-white dark:bg-darkcard shadow sm:rounded-lg border border-gray-100 dark:border-gray-700",children:u.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[u.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Ferramentas de Desenvolvimento"}),u.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-500 dark:text-gray-400",children:[u.jsx("p",{children:"Utilize esta funo para popular o banco de dados local com informaes de teste."}),u.jsx("p",{className:"mt-2 font-bold text-red-500 dark:text-red-400",children:"Isso  destrutivo e sobrescrever todos os dados existentes."})]}),u.jsxs("div",{className:"mt-5 flex flex-wrap gap-4",children:[u.jsx("button",{type:"button",onClick:d,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:" Resetar e Gerar Massa de Dados"}),u.jsx(hs,{onClick:p,isLoading:s,className:"bg-blue-600 hover:bg-blue-700 text-white",children:" Exportar Dados (JSON)"}),u.jsx("input",{type:"file",ref:c,onChange:x,hidden:!0,accept:".json"}),u.jsx(hs,{onClick:y,isLoading:s,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:" Importar JSON"})]})]})}),u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-md border border-indigo-100 dark:border-indigo-800",children:[u.jsx("h4",{className:"font-bold text-indigo-800 dark:text-indigo-300 mb-2",children:"O que ser gerado?"}),u.jsxs("ul",{className:"list-disc list-inside text-sm text-indigo-700 dark:text-indigo-400 space-y-1",children:[u.jsx("li",{children:"Cursos: CC, Direito, Medicina, Design."}),u.jsx("li",{children:"Turmas associadas a cada curso."}),u.jsx("li",{children:"Usurios: 1 Admin (admin@school.com), 3 Alunos com perfis variados."}),u.jsx("li",{children:"Eventos Pblicos e Restritos (por curso/turma)."}),u.jsx("li",{children:"Hierarquia: Semana Acadmica com 2 sub-eventos."})]})]}),u.jsx(ii,{isOpen:n,onClose:()=>a(!1),onConfirm:g,title:"Confirmar Reset",message:"Tem certeza absoluta? Essa ao apagar todos os usurios, eventos e inscries atuais e criar dados fictcios.",confirmText:"Sim, Resetar Tudo",isProcessing:s})]})},X4=()=>{const{user:s}=Ks(),{addToast:e}=Ys(),[n,a]=C.useState([]),[o,c]=C.useState(null),[d,g]=C.useState(!0),[p,y]=C.useState(!1),x=async()=>{if(s){g(!0);try{const k=await De.getEnrollmentsForUser(s.uid);if(k.length===0){a([]),g(!1);return}const V=[...new Set(k.map(q=>q.eventId))],U=await De.getEventsByIds(V),z=new Map(U.map(q=>[q.id,q])),B=k.map(q=>{const Y=z.get(q.eventId);if(!Y)return null;const de=Y.sessions.find(ie=>ie.id===q.sessionId);return de?{enrollment:q,event:Y,session:de}:null}).filter(Boolean);a(B)}catch(k){console.error("Failed to load enrollments data:",k),e("error","Falha ao carregar inscries."),a([])}finally{g(!1)}}};C.useEffect(()=>{x()},[s]);const b=async()=>{if(o){y(!0);try{await De.cancelEnrollment(o),e("success","Inscrio cancelada com sucesso.")}catch(k){console.error(k),e("error","Erro ao cancelar inscrio.")}finally{c(null),y(!1),x()}}},T=new Date().toISOString().split("T")[0];return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Minha Agenda"}),d?u.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:u.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Array.from({length:3}).map((k,V)=>u.jsx(Yw,{},V))})}):n.length===0?u.jsx(cl,{title:"Agenda Vazia",description:"Voc ainda no se inscreveu em nenhum evento."}):u.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:u.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(({enrollment:k,event:V,session:U})=>{const z=U.date<T;return u.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 gap-4 transition-colors",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-primary dark:text-indigo-400",children:V.name}),u.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:[" ",Ht(U.date),"   ",U.startTime," - ",U.endTime]}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[" ",V.location]}),z&&u.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 mt-2",children:"Evento Finalizado"})]}),u.jsx("div",{children:u.jsx("button",{onClick:()=>c(k.id),disabled:z,className:`w-full sm:w-auto text-sm px-3 py-2 rounded transition flex justify-center border
                                            ${z?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 cursor-not-allowed":"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 border-red-200 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:z?"Concludo":"Cancelar Inscrio"})})]},k.id)})})}),u.jsx(ii,{isOpen:!!o,onClose:()=>c(null),onConfirm:b,title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio neste evento? A vaga ser liberada para outro participante.",confirmText:"Sim, Cancelar",cancelText:"Manter Inscrio",isProcessing:p})]})},J4=()=>{const[s,e]=C.useState([]),[n,a]=C.useState([]),[o,c]=C.useState(!0);return C.useEffect(()=>{(async()=>{c(!0);const g=await De.getPublicEvents(),p=g.filter(x=>x.hasDedicatedPage).slice(0,3),y=g.filter(x=>!x.hasDedicatedPage).slice(0,8);e(p),a(y),c(!1)})()},[]),u.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg flex flex-col font-sans transition-colors duration-300",children:[u.jsx("nav",{className:"bg-white/80 dark:bg-darkcard/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700 sticky top-0 z-50 transition-colors",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between h-20 items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-lg",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),u.jsx("span",{className:"text-gray-900 dark:text-white font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx(yt,{to:"/login",className:"text-gray-500 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 font-medium px-3 py-2 transition-colors",children:"Acessar Painel"})})]})})}),u.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16",children:[s.length>0&&u.jsxs("section",{className:"animate-fade-in",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Eventos em Destaque"}),u.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Confira as pginas exclusivas dos nossos principais eventos."})]}),u.jsx("div",{className:"grid gap-8 lg:grid-cols-2",children:s.map(d=>{var g,p,y,x,b;return u.jsxs(yt,{to:`/special/${d.id}`,className:"group relative bg-white dark:bg-darkcard rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col min-h-[300px] border border-gray-100 dark:border-gray-700",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent dark:from-primary/20 opacity-50"}),((y=(p=(g=d.dedicatedPageConfig)==null?void 0:g.gallery)==null?void 0:p[0])==null?void 0:y.url)&&u.jsxs("div",{className:"h-48 w-full overflow-hidden relative",children:[u.jsx("img",{src:d.dedicatedPageConfig.gallery[0].url,alt:d.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),u.jsxs("div",{className:"p-8 relative z-10 flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 uppercase tracking-wide",children:" Especial"}),u.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:Ht((x=d.sessions[0])==null?void 0:x.date)})]}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:d.name}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 line-clamp-2 mb-6",children:((b=d.dedicatedPageConfig)==null?void 0:b.presentationText)||d.description}),u.jsxs("div",{className:"mt-auto flex items-center font-bold text-primary dark:text-indigo-400 group-hover:translate-x-1 transition-transform",children:["Ver Pgina Exclusiva ",u.jsx("span",{className:"ml-2",children:""})]})]})]},d.id)})})]}),u.jsxs("section",{children:[u.jsxs("div",{className:"mb-6 flex items-end justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda Pblica"}),u.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Prximas atividades abertas  comunidade."})]}),u.jsx(yt,{to:"/login",className:"hidden sm:block text-primary dark:text-indigo-400 hover:text-indigo-600 font-medium text-sm",children:"Ver todos no painel "})]}),o?u.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(d=>u.jsx("div",{className:"bg-white dark:bg-darkcard h-40 rounded-xl animate-pulse"},d))}):n.length===0?u.jsx("div",{className:"text-center py-16 bg-white dark:bg-darkcard rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:u.jsx("p",{className:"text-gray-400",children:"Nenhum outro evento pblico agendado no momento."})}):u.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(d=>{var x,b;const g=(x=d.sessions[0])!=null&&x.date?new Date(d.sessions[0].date):new Date,p=g.getDate(),y=g.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return u.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-md transition-shadow p-5 border border-gray-100 dark:border-gray-700 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg p-2 text-center min-w-[50px]",children:[u.jsx("span",{className:"block text-xs font-bold",children:y}),u.jsx("span",{className:"block text-lg font-extrabold leading-none",children:p})]}),u.jsx(yt,{to:"/login",className:"bg-primary/10 text-primary hover:bg-primary hover:text-white dark:text-indigo-400 dark:hover:bg-indigo-600 dark:hover:text-white px-3 py-1 rounded-full text-xs font-bold transition-colors",children:"Inscrever"})]}),u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:d.name}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:d.description}),u.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center",children:[u.jsxs("span",{className:"mr-2",children:[" ",d.location]}),u.jsxs("span",{children:[" ",(b=d.sessions[0])==null?void 0:b.startTime]})]})]},d.id)})})]})]}),u.jsx("footer",{className:"bg-white dark:bg-darkcard border-t border-gray-200 dark:border-gray-700 mt-auto",children:u.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 2024 EduEvent. Todos os direitos reservados."}),u.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[u.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Contato"}),u.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Privacidade"}),u.jsx(yt,{to:"/login",className:"text-gray-400 hover:text-primary",children:"rea do Aluno"})]})]})})]})},W4=()=>{var V,U,z,B,q,Y,de;const{id:s}=Pg(),[e,n]=C.useState(null),[a,o]=C.useState([]),[c,d]=C.useState(!0),[g,p]=C.useState("about");C.useEffect(()=>{(async()=>{if(s)try{const[ge,j]=await Promise.all([De.getEventById(s),De.getEventsByParentId(s)]);n(ge||null),o(j)}catch(ge){console.error("Failed to load dedicated page data",ge)}finally{d(!1)}})()},[s]);const y=C.useMemo(()=>{var M,D;if(!e)return[];const ie=((M=e.dedicatedPageConfig)==null?void 0:M.schedule)||[],ge=[];a.forEach(L=>{L.sessions.forEach(R=>{ge.push({id:`sub_${L.id}_${R.id}`,time:R.startTime,title:L.name,description:`${L.description||""}  Local: ${L.location||"No informado"}`,dateLabel:Tx(R.date)})})});const j=(D=e.sessions[0])!=null&&D.date?Tx(e.sessions[0].date):"";return[...ie.map(L=>({...L,dateLabel:L.id.startsWith("sub_")?void 0:j})),...ge].sort((L,R)=>L.dateLabel!==R.dateLabel?(L.dateLabel||"").localeCompare(R.dateLabel||""):L.time.localeCompare(R.time))},[e,a]),x=C.useMemo(()=>{const ie={};return y.forEach(ge=>{const j=ge.dateLabel||"Data a definir";ie[j]||(ie[j]=[]),ie[j].push(ge)}),ie},[y]);if(c)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-gray-500",children:"Carregando evento..."});if(!e||!e.hasDedicatedPage)return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-darkbg px-4 text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:"Pgina no encontrada"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Este evento no possui uma pgina dedicada ou no existe."}),u.jsx(yt,{to:"/",className:"text-primary hover:underline",children:"Voltar para Home"})]});const b=e.dedicatedPageConfig||{gallery:[]},T=b.themeColor||"#4F46E5",k={"--theme-color":T};return u.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg text-gray-900 dark:text-gray-100 font-sans selection:bg-opacity-30 selection:bg-[var(--theme-color)]",style:k,children:[u.jsxs("header",{className:"relative bg-darkbg text-white overflow-hidden min-h-[55vh] flex flex-col justify-end pb-12",children:[((U=(V=b.gallery)==null?void 0:V[0])==null?void 0:U.url)&&u.jsxs("div",{className:"absolute inset-0 z-0",children:[u.jsx("img",{src:b.gallery[0].url,alt:"Background",className:"w-full h-full object-cover opacity-40 blur-sm scale-105 transform origin-center animate-fade-in"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-darkbg via-darkbg/60 to-transparent"})]}),u.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 w-full animate-slide-in",children:[u.jsxs(yt,{to:"/",className:"inline-flex items-center mb-8 text-white/70 hover:text-white transition-colors text-sm font-medium group",children:[u.jsx("span",{className:"mr-2 group-hover:-translate-x-1 transition-transform",children:""})," Voltar para Eventos"]}),u.jsx("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6",children:u.jsxs("div",{className:"max-w-4xl",children:[u.jsx("span",{className:"inline-block py-1 px-3 rounded text-[10px] font-bold tracking-widest mb-4 uppercase text-white bg-[var(--theme-color)] shadow-lg shadow-[var(--theme-color)]/20",children:"Evento em Destaque"}),u.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-4 leading-tight text-white drop-shadow-sm",children:e.name}),u.jsx("p",{className:"text-lg md:text-xl text-white/80 font-light max-w-2xl leading-relaxed",children:e.description})]})})]})]}),u.jsx("div",{className:"sticky top-0 z-40 bg-white/90 dark:bg-darkcard/90 backdrop-blur-md shadow-sm border-b border-gray-200 dark:border-gray-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-6",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsx("nav",{className:"flex space-x-1 h-full overflow-x-auto no-scrollbar",children:["about","schedule","gallery"].map(ie=>u.jsxs("button",{onClick:()=>p(ie),className:`relative px-5 inline-flex items-center h-full text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap
                                        ${g===ie?"text-[var(--theme-color)]":"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[ie==="about"&&"Viso Geral",ie==="schedule"&&"Cronograma",ie==="gallery"&&"Galeria",g===ie&&u.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--theme-color)] shadow-[0_0_10px_var(--theme-color)]"})]},ie))}),u.jsx("div",{className:"hidden md:flex items-center pl-6 border-l border-gray-200 dark:border-gray-700",children:u.jsx(yt,{to:"/login",className:"inline-flex items-center justify-center px-6 py-2 rounded-full font-bold text-white text-sm shadow-lg transform transition hover:-translate-y-0.5 active:translate-y-0 hover:shadow-xl",style:{backgroundColor:T},children:"Garantir Vaga"})})]})})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in min-h-[40vh]",children:[g==="about"&&u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[u.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Sobre o Evento"}),u.jsx("div",{className:"prose dark:prose-invert prose-lg max-w-none text-gray-600 dark:text-gray-300 leading-relaxed",children:u.jsx("p",{className:"whitespace-pre-line",children:b.presentationText||"Junte-se a ns para uma experincia inesquecvel. Este evento foi cuidadosamente planejado para oferecer o melhor contedo e oportunidades de networking."})})]}),a.length>0&&u.jsxs("section",{className:"pt-8 border-t border-gray-100 dark:border-gray-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Destaques da Programao"}),u.jsx("button",{onClick:()=>p("schedule"),className:"text-sm font-bold text-[var(--theme-color)] hover:underline hidden sm:block",children:"Ver tudo "})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(ie=>u.jsxs("div",{className:"group relative bg-white dark:bg-darkcard rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-xl hover:border-transparent transition-all duration-300 flex flex-col justify-between overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--theme-color)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsx("span",{className:"inline-block px-2 py-1 rounded bg-gray-50 dark:bg-gray-800 text-[10px] font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Atividade"}),u.jsx("span",{className:"text-[var(--theme-color)] opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300",children:""})]}),u.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 leading-tight group-hover:text-[var(--theme-color)] transition-colors",children:ie.name}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 mb-4 leading-relaxed",children:ie.description})]}),u.jsxs("div",{className:"pt-4 border-t border-gray-50 dark:border-gray-800 flex items-center justify-between text-xs font-medium text-gray-400 dark:text-gray-500",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),ie.sessions.length>0?ie.sessions[0].startTime:"TBA"]}),u.jsxs("div",{className:"flex items-center",children:[u.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),ie.location]})]})]},ie.id))})]})]}),u.jsx("div",{className:"lg:col-span-4 space-y-8",children:u.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-8 sticky top-24",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:"Informaes do Evento"}),u.jsxs("ul",{className:"space-y-6",children:[u.jsxs("li",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Data Principal"}),u.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:Ht((z=e.sessions[0])==null?void 0:z.date)})]})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Horrio"}),u.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[(B=e.sessions[0])==null?void 0:B.startTime," s ",(q=e.sessions[0])==null?void 0:q.endTime]})]})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Localizao"}),u.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:e.location})]})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Capacidade"}),u.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[e.sessions.reduce((ie,ge)=>ie+ge.capacity,0)," vagas totais"]})]})]})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:u.jsx(yt,{to:"/login",className:"w-full flex items-center justify-center px-4 py-3 rounded-xl font-bold text-white shadow-lg transition transform hover:scale-[1.02]",style:{backgroundColor:T},children:"Inscrever-se"})})]})})]}),g==="schedule"&&u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Cronograma Completo"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Acompanhe todos os horrios e atividades."})]}),Object.keys(x).length===0?u.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:u.jsx("p",{className:"text-gray-500",children:"Programao detalhada em breve."})}):u.jsx("div",{className:"space-y-16",children:Object.entries(x).map(([ie,ge])=>{const j=ge;return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"sticky top-20 z-20 bg-gray-50/95 dark:bg-darkbg/95 backdrop-blur-sm py-4 mb-8 border-b border-gray-200 dark:border-gray-700 flex items-center",children:[u.jsxs("span",{className:"px-3 py-1 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm font-bold shadow-sm mr-3",children:[ie.split(",")[0]," "]}),u.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[ie.split(",")[1]," "]})]}),u.jsx("div",{className:"relative border-l-2 border-gray-200 dark:border-gray-800 ml-4 md:ml-6 space-y-12 pb-4",children:j.map((N,A)=>u.jsxs("div",{className:"relative pl-8 md:pl-12 group",children:[u.jsx("div",{className:"absolute -left-[9px] top-1.5 h-[18px] w-[18px] rounded-full border-4 border-white dark:border-darkbg shadow-sm transition-transform group-hover:scale-125",style:{backgroundColor:T}}),u.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2 md:gap-8 mb-2",children:[u.jsx("div",{className:"flex-shrink-0 w-20 pt-1",children:u.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:N.time})}),u.jsxs("div",{className:"flex-1 bg-white dark:bg-darkcard p-5 rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm group-hover:shadow-md transition-shadow",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 group-hover:text-[var(--theme-color)] transition-colors",children:N.title}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:N.description})]})]})]},A))})]},ie)})})]}),g==="gallery"&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Galeria de Fotos"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Momentos marcantes."})]}),((Y=b.gallery)==null?void 0:Y.length)===0?u.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:u.jsx("p",{className:"text-gray-500",children:"Imagens indisponveis no momento."})}):u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6",children:(de=b.gallery)==null?void 0:de.map((ie,ge)=>u.jsxs("div",{className:"break-inside-avoid group relative rounded-2xl overflow-hidden shadow-md cursor-zoom-in",children:[u.jsx("img",{src:ie.url,alt:ie.caption||`Imagem ${ge+1}`,className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6",children:ie.caption&&u.jsx("p",{className:"text-white font-medium transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:ie.caption})})]},ge))})]})]}),u.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50 animate-bounce-slow",children:u.jsx(yt,{to:"/login",className:"flex items-center justify-center w-14 h-14 rounded-full text-white shadow-xl shadow-indigo-900/20 hover:scale-110 transition-transform",style:{backgroundColor:T},children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]})},Z4=()=>{const{id:s}=Pg(),{user:e}=Ks(),n=ti(),[a,o]=C.useState(null),[c,d]=C.useState([]),[g,p]=C.useState([]),[y,x]=C.useState(!0),[b,T]=C.useState(null),[k,V]=C.useState(null),U=C.useCallback(async(N=!0)=>{if(!(!s||!e)){N&&x(!0);try{const[A,M,D]=await Promise.all([De.getEventById(s),De.getEventsByParentId(s),De.getEnrollmentsForUser(e.uid)]);if(!A){n("/dashboard");return}o(A),d(M),p(D)}catch(A){console.error(A)}finally{N&&x(!1)}}},[s,e,n]),z=C.useCallback(()=>{U(!1),V(null)},[U]),{handleEnroll:B,handleCancel:q,isProcessing:Y,conflictData:de,clearState:ie}=Kw(e,z);C.useEffect(()=>{U()},[U]),C.useEffect(()=>{if(b){const A=[a,...c].filter(Boolean).find(M=>M.id===b.id);A&&JSON.stringify(A)!==JSON.stringify(b)&&T(A)}},[a,c,b]);const ge=(N,A)=>g.find(M=>M.eventId===N&&M.sessionId===A),j=N=>{ie(),T(N)};return y?u.jsx("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400 font-medium",children:"Carregando detalhes do evento..."}):a?u.jsxs("div",{className:"space-y-8 pb-12",children:[u.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:u.jsxs("ol",{className:"flex items-center space-x-2",children:[u.jsx("li",{children:u.jsx(yt,{to:"/dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-indigo-400 font-medium transition",children:"Eventos"})}),u.jsx("li",{children:u.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"/"})}),u.jsx("li",{className:"text-gray-900 dark:text-white font-semibold","aria-current":"page",children:a.name})]})}),u.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),u.jsx("div",{className:"p-8 md:p-10",children:u.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-xs font-bold uppercase tracking-wide mb-4 border border-indigo-100 dark:border-indigo-900/50",children:"Evento Principal"}),u.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight",children:a.name}),u.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-4xl",children:a.description}),u.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 dark:text-gray-400 text-sm font-medium",children:[u.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[u.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.location]}),u.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[u.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.sessions.length," Sesses Principais"]})]})]}),a.sessions.length>0&&u.jsx("div",{className:"flex-shrink-0",children:u.jsxs("button",{onClick:()=>j(a),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao Geral",u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Atividades & Sub-eventos"}),u.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"})]}),c.length===0?u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-12 text-center",children:[u.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(N=>{const A=N.sessions.length===1?N.sessions[0]:null,M=A?A.capacity:0,D=A?A.filled:0,L=M>0?D/M*100:0,R=M>0&&D>=M,ze=N.sessions.some(pe=>ge(N.id,pe.id));return u.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col relative",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 dark:bg-gray-700 group-hover:bg-primary transition-colors"}),u.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:N.name}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-1",children:N.description}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto pt-4 border-t border-gray-50 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),u.jsx("span",{className:"font-medium",children:N.location})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),u.jsx("span",{className:"font-medium",children:N.sessions.length>1?`${N.sessions.length} opes de horrio`:`${Ht(A==null?void 0:A.date)}  ${A==null?void 0:A.startTime}`})]})]}),A&&u.jsxs("div",{className:"mt-4",children:[u.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:u.jsx("span",{className:R?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:R?"LOTADO":`${M-D} vagas`})}),u.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5",children:u.jsx("div",{className:`h-full rounded-full ${R?"bg-red-500":"bg-emerald-500"}`,style:{width:`${L}%`}})})]})]}),u.jsx("button",{onClick:()=>j(N),className:`w-full py-3 font-bold text-sm transition-colors border-t border-gray-100 dark:border-gray-700
                                        ${ze?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"bg-gray-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white text-primary dark:text-indigo-300"}`,children:ze?"Gerenciar Inscrio":N.sessions.length>1?"Escolher Horrio":R?"Ver Detalhes":"Inscrever-se Agora"})]},N.id)})}),u.jsx(ei,{isOpen:!!b,onClose:()=>T(null),title:b?b.name:"",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:u.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:b==null?void 0:b.description})}),de&&u.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),u.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[u.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[u.jsx("p",{className:"font-semibold",children:de.name}),u.jsx("p",{className:"text-xs",children:de.time})]})]})]})]})}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[u.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),u.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:b==null?void 0:b.sessions.map(N=>{const A=ge(b.id,N.id),M=!!A,D=N.filled>=N.capacity,L=N.filled/N.capacity*100;return u.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${M?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":D?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-90":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:Ht(N.date)}),M&&u.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),u.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:u.jsxs("span",{className:"flex items-center",children:[" ",N.startTime," - ",N.endTime]})}),u.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[u.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${D?"bg-red-500":L>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(L,100)}%`}})}),u.jsx("span",{className:`text-xs font-bold w-24 text-right ${D?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:D?"ESGOTADO":`${N.capacity-N.filled} vagas`})]})]}),u.jsx("div",{className:"flex items-center",children:M?u.jsx("button",{onClick:()=>A&&V(A.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 dark:border-red-900 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):u.jsx(hs,{onClick:()=>b&&B(b,N.id),isLoading:Y,disabled:D,className:`w-full sm:w-auto ${D?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":""}`,children:D?"Lotado":"Inscrever"})})]})},N.id)})})]})]})}),u.jsx(ii,{isOpen:!!k,onClose:()=>V(null),onConfirm:()=>k&&q(k),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:Y})]}):u.jsx("div",{className:"p-12 text-center text-red-500 dark:text-red-400 font-bold",children:"Evento no encontrado."})},Ms=({children:s,roleRequired:e})=>{const{user:n,loading:a}=Ks();return a?u.jsx("div",{className:"h-screen flex items-center justify-center text-primary font-medium dark:bg-darkbg dark:text-gray-200",children:"Carregando EduEvent..."}):n?!n.isOnboarded&&window.location.hash!=="#/complete-profile"?u.jsx(zd,{to:"/complete-profile"}):e&&n.role!==e?u.jsx(zd,{to:"/dashboard"}):u.jsx(u.Fragment,{children:s}):u.jsx(zd,{to:"/login"})},ej=()=>{const{user:s}=Ks();return u.jsxs(CS,{children:[u.jsx(Zn,{path:"/",element:s?u.jsx(zd,{to:"/dashboard"}):u.jsx(J4,{})}),u.jsx(Zn,{path:"/special/:id",element:u.jsx(W4,{})}),u.jsx(Zn,{path:"/login",element:u.jsx(D4,{})}),u.jsx(Zn,{path:"/complete-profile",element:u.jsx(Ms,{children:u.jsx(O4,{})})}),u.jsx(Zn,{path:"/dashboard",element:u.jsx(Ms,{children:u.jsx(Oa,{children:u.jsx(q4,{})})})}),u.jsx(Zn,{path:"/event/:id",element:u.jsx(Ms,{children:u.jsx(Oa,{children:u.jsx(Z4,{})})})}),u.jsx(Zn,{path:"/my-enrollments",element:u.jsx(Ms,{children:u.jsx(Oa,{children:u.jsx(X4,{})})})}),u.jsx(Zn,{path:"/admin/events",element:u.jsx(Ms,{roleRequired:ot.ADMIN,children:u.jsx(Oa,{children:u.jsx(H4,{})})})}),u.jsx(Zn,{path:"/admin/events/:id/enrollments",element:u.jsx(Ms,{roleRequired:ot.ADMIN,children:u.jsx(Oa,{children:u.jsx(K4,{})})})}),u.jsx(Zn,{path:"/admin/courses",element:u.jsx(Ms,{roleRequired:ot.ADMIN,children:u.jsx(Oa,{children:u.jsx(Q4,{})})})}),u.jsx(Zn,{path:"/admin/users",element:u.jsx(Ms,{roleRequired:ot.ADMIN,children:u.jsx(Oa,{children:u.jsx($4,{})})})}),u.jsx(Zn,{path:"/admin/dev",element:u.jsx(Ms,{roleRequired:ot.ADMIN,children:u.jsx(Oa,{children:u.jsx(Y4,{})})})})]})};function tj(){return u.jsx(k4,{children:u.jsx(R4,{children:u.jsx(I4,{children:u.jsx(JS,{children:u.jsx(ej,{})})})})})}const Xw=document.getElementById("root");if(!Xw)throw new Error("Could not find root element to mount to");const nj=LT.createRoot(Xw);nj.render(u.jsx(Yc.StrictMode,{children:u.jsx(tj,{})}));
