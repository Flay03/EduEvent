function fT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var x4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function E4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var bv={exports:{}},au={},Nv={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),pT=Symbol.for("react.portal"),gT=Symbol.for("react.fragment"),yT=Symbol.for("react.strict_mode"),vT=Symbol.for("react.profiler"),wT=Symbol.for("react.provider"),_T=Symbol.for("react.context"),xT=Symbol.for("react.forward_ref"),ET=Symbol.for("react.suspense"),IT=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),Pg=Symbol.iterator;function kT(t){return t===null||typeof t!="object"?null:(t=Pg&&t[Pg]||t["@@iterator"],typeof t=="function"?t:null)}var Cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Av=Object.assign,Rv={};function Xi(t,e,n){this.props=t,this.context=e,this.refs=Rv,this.updater=n||Cv}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pv(){}Pv.prototype=Xi.prototype;function Rf(t,e,n){this.props=t,this.context=e,this.refs=Rv,this.updater=n||Cv}var Pf=Rf.prototype=new Pv;Pf.constructor=Rf;Av(Pf,Xi.prototype);Pf.isPureReactComponent=!0;var jg=Array.isArray,jv=Object.prototype.hasOwnProperty,jf={current:null},Dv={key:!0,ref:!0,__self:!0,__source:!0};function Ov(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jv.call(e,r)&&!Dv.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Va,type:t,key:i,ref:o,props:s,_owner:jf.current}}function ST(t,e){return{$$typeof:Va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Df(t){return typeof t=="object"&&t!==null&&t.$$typeof===Va}function bT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dg=/\/+/g;function gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bT(""+t.key):e.toString(36)}function Wl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Va:case pT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+gd(o,0):r,jg(s)?(n="",t!=null&&(n=t.replace(Dg,"$&/")+"/"),Wl(s,e,n,"",function(u){return u})):s!=null&&(Df(s)&&(s=ST(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",jg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+gd(i,a);o+=Wl(i,e,n,l,s)}else if(l=kT(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+gd(i,a++),o+=Wl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function El(t,e,n){if(t==null)return t;var r=[],s=0;return Wl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function NT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Hl={transition:null},CT={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:jf};function Mv(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:El,forEach:function(t,e,n){El(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return El(t,function(){e++}),e},toArray:function(t){return El(t,function(e){return e})||[]},only:function(t){if(!Df(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Xi;oe.Fragment=gT;oe.Profiler=vT;oe.PureComponent=Rf;oe.StrictMode=yT;oe.Suspense=ET;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CT;oe.act=Mv;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Av({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)jv.call(e,l)&&!Dv.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Va,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:_T,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wT,_context:t},t.Consumer=t};oe.createElement=Ov;oe.createFactory=function(t){var e=Ov.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:xT,render:t}};oe.isValidElement=Df;oe.lazy=function(t){return{$$typeof:TT,_payload:{_status:-1,_result:t},_init:NT}};oe.memo=function(t,e){return{$$typeof:IT,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Hl.transition;Hl.transition={};try{t()}finally{Hl.transition=e}};oe.unstable_act=Mv;oe.useCallback=function(t,e){return At.current.useCallback(t,e)};oe.useContext=function(t){return At.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return At.current.useDeferredValue(t)};oe.useEffect=function(t,e){return At.current.useEffect(t,e)};oe.useId=function(){return At.current.useId()};oe.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return At.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};oe.useRef=function(t){return At.current.useRef(t)};oe.useState=function(t){return At.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return At.current.useTransition()};oe.version="18.3.1";Nv.exports=oe;var j=Nv.exports;const Bt=mT(j),AT=fT({__proto__:null,default:Bt},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT=j,PT=Symbol.for("react.element"),jT=Symbol.for("react.fragment"),DT=Object.prototype.hasOwnProperty,OT=RT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MT={key:!0,ref:!0,__self:!0,__source:!0};function Lv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DT.call(e,r)&&!MT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PT,type:t,key:i,ref:o,props:s,_owner:OT.current}}au.Fragment=jT;au.jsx=Lv;au.jsxs=Lv;bv.exports=au;var d=bv.exports,oh={},Vv={exports:{}},Kt={},Fv={exports:{}},Uv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,J){var re=K.length;K.push(J);e:for(;0<re;){var _e=re-1>>>1,ge=K[_e];if(0<s(ge,J))K[_e]=J,K[re]=ge,re=_e;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],re=K.pop();if(re!==J){K[0]=re;e:for(var _e=0,ge=K.length,Pe=ge>>>1;_e<Pe;){var on=2*(_e+1)-1,an=K[on],Vt=on+1,Tt=K[Vt];if(0>s(an,re))Vt<ge&&0>s(Tt,an)?(K[_e]=Tt,K[Vt]=re,_e=Vt):(K[_e]=an,K[on]=re,_e=on);else if(Vt<ge&&0>s(Tt,re))K[_e]=Tt,K[Vt]=re,_e=Vt;else break e}}return J}function s(K,J){var re=K.sortIndex-J.sortIndex;return re!==0?re:K.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,y=!1,w=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var J=n(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=K)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(u)}}function R(K){if(T=!1,x(K),!w)if(n(l)!==null)w=!0,sn(O);else{var J=n(u);J!==null&&Le(R,J.startTime-K)}}function O(K,J){w=!1,T&&(T=!1,_(v),v=-1),y=!0;var re=p;try{for(x(J),f=n(l);f!==null&&(!(f.expirationTime>J)||K&&!A());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var ge=_e(f.expirationTime<=J);J=t.unstable_now(),typeof ge=="function"?f.callback=ge:f===n(l)&&r(l),x(J)}else r(l);f=n(l)}if(f!==null)var Pe=!0;else{var on=n(u);on!==null&&Le(R,on.startTime-J),Pe=!1}return Pe}finally{f=null,p=re,y=!1}}var M=!1,S=null,v=-1,k=5,N=-1;function A(){return!(t.unstable_now()-N<k)}function P(){if(S!==null){var K=t.unstable_now();N=K;var J=!0;try{J=S(!0,K)}finally{J?C():(M=!1,S=null)}}else M=!1}var C;if(typeof E=="function")C=function(){E(P)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,On=Ge.port2;Ge.port1.onmessage=P,C=function(){On.postMessage(null)}}else C=function(){b(P,0)};function sn(K){S=K,M||(M=!0,C())}function Le(K,J){v=b(function(){K(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,sn(O))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(K){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var re=p;p=J;try{return K()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=p;p=K;try{return J()}finally{p=re}},t.unstable_scheduleCallback=function(K,J,re){var _e=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?_e+re:_e):re=_e,K){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=re+ge,K={id:h++,callback:J,priorityLevel:K,startTime:re,expirationTime:ge,sortIndex:-1},re>_e?(K.sortIndex=re,e(u,K),n(l)===null&&K===n(u)&&(T?(_(v),v=-1):T=!0,Le(R,re-_e))):(K.sortIndex=ge,e(l,K),w||y||(w=!0,sn(O))),K},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(K){var J=p;return function(){var re=p;p=J;try{return K.apply(this,arguments)}finally{p=re}}}})(Uv);Fv.exports=Uv;var LT=Fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=j,Ht=LT;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bv=new Set,la={};function Os(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(la[t]=e,t=0;t<e.length;t++)Bv.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ah=Object.prototype.hasOwnProperty,FT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Og={},Mg={};function UT(t){return ah.call(Mg,t)?!0:ah.call(Og,t)?!1:FT.test(t)?Mg[t]=!0:(Og[t]=!0,!1)}function BT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $T(t,e,n,r){if(e===null||typeof e>"u"||BT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Of=/[\-:]([a-z])/g;function Mf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Of,Mf);ht[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Of,Mf);ht[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Of,Mf);ht[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lf(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($T(e,n,s,r)&&(n=null),r||s===null?UT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),li=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),Vf=Symbol.for("react.strict_mode"),lh=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),zv=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),ch=Symbol.for("react.suspense"),uh=Symbol.for("react.suspense_list"),Uf=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),qv=Symbol.for("react.offscreen"),Lg=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=Lg&&t[Lg]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,yd;function Lo(t){if(yd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yd=e&&e[1]||""}return`
`+yd+t}var vd=!1;function wd(t,e){if(!t||vd)return"";vd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{vd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lo(t):""}function zT(t){switch(t.tag){case 5:return Lo(t.type);case 16:return Lo("Lazy");case 13:return Lo("Suspense");case 19:return Lo("SuspenseList");case 0:case 2:case 15:return t=wd(t.type,!1),t;case 11:return t=wd(t.type.render,!1),t;case 1:return t=wd(t.type,!0),t;default:return""}}function dh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case li:return"Portal";case lh:return"Profiler";case Vf:return"StrictMode";case ch:return"Suspense";case uh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zv:return(t.displayName||"Context")+".Consumer";case $v:return(t._context.displayName||"Context")+".Provider";case Ff:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uf:return e=t.displayName||null,e!==null?e:dh(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return dh(t(e))}catch{}}return null}function qT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dh(e);case 8:return e===Vf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WT(t){var e=Wv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tl(t){t._valueTracker||(t._valueTracker=WT(t))}function Hv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hh(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kv(t,e){e=e.checked,e!=null&&Lf(t,"checked",e,!1)}function fh(t,e){Kv(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mh(t,e.type,n):e.hasOwnProperty("defaultValue")&&mh(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mh(t,e,n){(e!=="number"||fc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vo=Array.isArray;function xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ug(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Vo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function Gv(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,Yv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ca(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HT=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){HT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function Jv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function Xv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var KT=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yh(t,e){if(e){if(KT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function vh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=null;function Bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _h=null,Ei=null,Ii=null;function $g(t){if(t=Ba(t)){if(typeof _h!="function")throw Error(z(280));var e=t.stateNode;e&&(e=hu(e),_h(t.stateNode,t.type,e))}}function Zv(t){Ei?Ii?Ii.push(t):Ii=[t]:Ei=t}function ew(){if(Ei){var t=Ei,e=Ii;if(Ii=Ei=null,$g(t),e)for(t=0;t<e.length;t++)$g(e[t])}}function tw(t,e){return t(e)}function nw(){}var _d=!1;function rw(t,e,n){if(_d)return t(e,n);_d=!0;try{return tw(t,e,n)}finally{_d=!1,(Ei!==null||Ii!==null)&&(nw(),ew())}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var r=hu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var xh=!1;if(Zn)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){xh=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{xh=!1}function GT(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Go=!1,mc=null,pc=!1,Eh=null,QT={onError:function(t){Go=!0,mc=t}};function YT(t,e,n,r,s,i,o,a,l){Go=!1,mc=null,GT.apply(QT,arguments)}function JT(t,e,n,r,s,i,o,a,l){if(YT.apply(this,arguments),Go){if(Go){var u=mc;Go=!1,mc=null}else throw Error(z(198));pc||(pc=!0,Eh=u)}}function Ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zg(t){if(Ms(t)!==t)throw Error(z(188))}function XT(t){var e=t.alternate;if(!e){if(e=Ms(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zg(s),t;if(i===r)return zg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function iw(t){return t=XT(t),t!==null?ow(t):null}function ow(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ow(t);if(e!==null)return e;t=t.sibling}return null}var aw=Ht.unstable_scheduleCallback,qg=Ht.unstable_cancelCallback,ZT=Ht.unstable_shouldYield,ek=Ht.unstable_requestPaint,$e=Ht.unstable_now,tk=Ht.unstable_getCurrentPriorityLevel,$f=Ht.unstable_ImmediatePriority,lw=Ht.unstable_UserBlockingPriority,gc=Ht.unstable_NormalPriority,nk=Ht.unstable_LowPriority,cw=Ht.unstable_IdlePriority,lu=null,Sn=null;function rk(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(lu,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:ok,sk=Math.log,ik=Math.LN2;function ok(t){return t>>>=0,t===0?32:31-(sk(t)/ik|0)|0}var Sl=64,bl=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Fo(a):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),s=1<<n,r|=t[n],e&=~s;return r}function ak(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ak(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uw(){var t=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),t}function xd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function ck(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function zf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function dw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hw,qf,fw,mw,pw,Th=!1,Nl=[],Rr=null,Pr=null,jr=null,da=new Map,ha=new Map,wr=[],uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wg(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(e.pointerId)}}function Ao(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ba(e),e!==null&&qf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dk(t,e,n,r,s){switch(e){case"focusin":return Rr=Ao(Rr,t,e,n,r,s),!0;case"dragenter":return Pr=Ao(Pr,t,e,n,r,s),!0;case"mouseover":return jr=Ao(jr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return da.set(i,Ao(da.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ha.set(i,Ao(ha.get(i)||null,t,e,n,r,s)),!0}return!1}function gw(t){var e=us(t.target);if(e!==null){var n=Ms(e);if(n!==null){if(e=n.tag,e===13){if(e=sw(n),e!==null){t.blockedOn=e,pw(t.priority,function(){fw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wh=r,n.target.dispatchEvent(r),wh=null}else return e=Ba(n),e!==null&&qf(e),t.blockedOn=n,!1;e.shift()}return!0}function Hg(t,e,n){Kl(t)&&n.delete(e)}function hk(){Th=!1,Rr!==null&&Kl(Rr)&&(Rr=null),Pr!==null&&Kl(Pr)&&(Pr=null),jr!==null&&Kl(jr)&&(jr=null),da.forEach(Hg),ha.forEach(Hg)}function Ro(t,e){t.blockedOn===e&&(t.blockedOn=null,Th||(Th=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,hk)))}function fa(t){function e(s){return Ro(s,t)}if(0<Nl.length){Ro(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&Ro(Rr,t),Pr!==null&&Ro(Pr,t),jr!==null&&Ro(jr,t),da.forEach(e),ha.forEach(e),n=0;n<wr.length;n++)r=wr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wr.length&&(n=wr[0],n.blockedOn===null);)gw(n),n.blockedOn===null&&wr.shift()}var Ti=ar.ReactCurrentBatchConfig,vc=!0;function fk(t,e,n,r){var s=ye,i=Ti.transition;Ti.transition=null;try{ye=1,Wf(t,e,n,r)}finally{ye=s,Ti.transition=i}}function mk(t,e,n,r){var s=ye,i=Ti.transition;Ti.transition=null;try{ye=4,Wf(t,e,n,r)}finally{ye=s,Ti.transition=i}}function Wf(t,e,n,r){if(vc){var s=kh(t,e,n,r);if(s===null)Rd(t,e,r,wc,n),Wg(t,r);else if(dk(s,t,e,n,r))r.stopPropagation();else if(Wg(t,r),e&4&&-1<uk.indexOf(t)){for(;s!==null;){var i=Ba(s);if(i!==null&&hw(i),i=kh(t,e,n,r),i===null&&Rd(t,e,r,wc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Rd(t,e,r,null,n)}}var wc=null;function kh(t,e,n,r){if(wc=null,t=Bf(r),t=us(t),t!==null)if(e=Ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wc=t,null}function yw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tk()){case $f:return 1;case lw:return 4;case gc:case nk:return 16;case cw:return 536870912;default:return 16}default:return 16}}var Sr=null,Hf=null,Gl=null;function vw(){if(Gl)return Gl;var t,e=Hf,n=e.length,r,s="value"in Sr?Sr.value:Sr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Gl=s.slice(t,1<r?1-r:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function Kg(){return!1}function Gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cl:Kg,this.isPropagationStopped=Kg,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kf=Gt(Zi),Ua=Oe({},Zi,{view:0,detail:0}),pk=Gt(Ua),Ed,Id,Po,cu=Oe({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Po&&(Po&&t.type==="mousemove"?(Ed=t.screenX-Po.screenX,Id=t.screenY-Po.screenY):Id=Ed=0,Po=t),Ed)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),Gg=Gt(cu),gk=Oe({},cu,{dataTransfer:0}),yk=Gt(gk),vk=Oe({},Ua,{relatedTarget:0}),Td=Gt(vk),wk=Oe({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),_k=Gt(wk),xk=Oe({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ek=Gt(xk),Ik=Oe({},Zi,{data:0}),Qg=Gt(Ik),Tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sk[t])?!!e[t]:!1}function Gf(){return bk}var Nk=Oe({},Ua,{key:function(t){if(t.key){var e=Tk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ck=Gt(Nk),Ak=Oe({},cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yg=Gt(Ak),Rk=Oe({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),Pk=Gt(Rk),jk=Oe({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dk=Gt(jk),Ok=Oe({},cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=Gt(Ok),Lk=[9,13,27,32],Qf=Zn&&"CompositionEvent"in window,Qo=null;Zn&&"documentMode"in document&&(Qo=document.documentMode);var Vk=Zn&&"TextEvent"in window&&!Qo,ww=Zn&&(!Qf||Qo&&8<Qo&&11>=Qo),Jg=" ",Xg=!1;function _w(t,e){switch(t){case"keyup":return Lk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function Fk(t,e){switch(t){case"compositionend":return xw(e);case"keypress":return e.which!==32?null:(Xg=!0,Jg);case"textInput":return t=e.data,t===Jg&&Xg?null:t;default:return null}}function Uk(t,e){if(ui)return t==="compositionend"||!Qf&&_w(t,e)?(t=vw(),Gl=Hf=Sr=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ww&&e.locale!=="ko"?null:e.data;default:return null}}var Bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bk[t.type]:e==="textarea"}function Ew(t,e,n,r){Zv(r),e=_c(e,"onChange"),0<e.length&&(n=new Kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,ma=null;function $k(t){jw(t,0)}function uu(t){var e=fi(t);if(Hv(e))return t}function zk(t,e){if(t==="change")return e}var Iw=!1;if(Zn){var kd;if(Zn){var Sd="oninput"in document;if(!Sd){var e0=document.createElement("div");e0.setAttribute("oninput","return;"),Sd=typeof e0.oninput=="function"}kd=Sd}else kd=!1;Iw=kd&&(!document.documentMode||9<document.documentMode)}function t0(){Yo&&(Yo.detachEvent("onpropertychange",Tw),ma=Yo=null)}function Tw(t){if(t.propertyName==="value"&&uu(ma)){var e=[];Ew(e,ma,t,Bf(t)),rw($k,e)}}function qk(t,e,n){t==="focusin"?(t0(),Yo=e,ma=n,Yo.attachEvent("onpropertychange",Tw)):t==="focusout"&&t0()}function Wk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uu(ma)}function Hk(t,e){if(t==="click")return uu(e)}function Kk(t,e){if(t==="input"||t==="change")return uu(e)}function Gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:Gk;function pa(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ah.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function n0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r0(t,e){var n=n0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n0(n)}}function kw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sw(){for(var t=window,e=fc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fc(t.document)}return e}function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qk(t){var e=Sw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kw(n.ownerDocument.documentElement,n)){if(r!==null&&Yf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=r0(n,i);var o=r0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yk=Zn&&"documentMode"in document&&11>=document.documentMode,di=null,Sh=null,Jo=null,bh=!1;function s0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||di==null||di!==fc(r)||(r=di,"selectionStart"in r&&Yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&pa(Jo,r)||(Jo=r,r=_c(Sh,"onSelect"),0<r.length&&(e=new Kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=di)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},bd={},bw={};Zn&&(bw=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function du(t){if(bd[t])return bd[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bw)return bd[t]=e[n];return t}var Nw=du("animationend"),Cw=du("animationiteration"),Aw=du("animationstart"),Rw=du("transitionend"),Pw=new Map,i0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(t,e){Pw.set(t,e),Os(e,[t])}for(var Nd=0;Nd<i0.length;Nd++){var Cd=i0[Nd],Jk=Cd.toLowerCase(),Xk=Cd[0].toUpperCase()+Cd.slice(1);Gr(Jk,"on"+Xk)}Gr(Nw,"onAnimationEnd");Gr(Cw,"onAnimationIteration");Gr(Aw,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(Rw,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function o0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JT(r,e,void 0,t),t.currentTarget=null}function jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;o0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;o0(s,a,u),i=l}}}if(pc)throw t=Eh,pc=!1,Eh=null,t}function Ne(t,e){var n=e[Ph];n===void 0&&(n=e[Ph]=new Set);var r=t+"__bubble";n.has(r)||(Dw(e,t,2,!1),n.add(r))}function Ad(t,e,n){var r=0;e&&(r|=4),Dw(n,t,r,e)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[Rl]){t[Rl]=!0,Bv.forEach(function(n){n!=="selectionchange"&&(Zk.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rl]||(e[Rl]=!0,Ad("selectionchange",!1,e))}}function Dw(t,e,n,r){switch(yw(e)){case 1:var s=fk;break;case 4:s=mk;break;default:s=Wf}n=s.bind(null,e,n,t),s=void 0,!xh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Rd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=us(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}rw(function(){var u=i,h=Bf(n),f=[];e:{var p=Pw.get(t);if(p!==void 0){var y=Kf,w=t;switch(t){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":y=Ck;break;case"focusin":w="focus",y=Td;break;case"focusout":w="blur",y=Td;break;case"beforeblur":case"afterblur":y=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Pk;break;case Nw:case Cw:case Aw:y=_k;break;case Rw:y=Dk;break;case"scroll":y=pk;break;case"wheel":y=Mk;break;case"copy":case"cut":case"paste":y=Ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Yg}var T=(e&4)!==0,b=!T&&t==="scroll",_=T?p!==null?p+"Capture":null:p;T=[];for(var E=u,x;E!==null;){x=E;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,_!==null&&(R=ua(E,_),R!=null&&T.push(ya(E,R,x)))),b)break;E=E.return}0<T.length&&(p=new y(p,w,null,n,h),f.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==wh&&(w=n.relatedTarget||n.fromElement)&&(us(w)||w[er]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=u,w=w?us(w):null,w!==null&&(b=Ms(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(T=Gg,R="onMouseLeave",_="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(T=Yg,R="onPointerLeave",_="onPointerEnter",E="pointer"),b=y==null?p:fi(y),x=w==null?p:fi(w),p=new T(R,E+"leave",y,n,h),p.target=b,p.relatedTarget=x,R=null,us(h)===u&&(T=new T(_,E+"enter",w,n,h),T.target=x,T.relatedTarget=b,R=T),b=R,y&&w)t:{for(T=y,_=w,E=0,x=T;x;x=ri(x))E++;for(x=0,R=_;R;R=ri(R))x++;for(;0<E-x;)T=ri(T),E--;for(;0<x-E;)_=ri(_),x--;for(;E--;){if(T===_||_!==null&&T===_.alternate)break t;T=ri(T),_=ri(_)}T=null}else T=null;y!==null&&a0(f,p,y,T,!1),w!==null&&b!==null&&a0(f,b,w,T,!0)}}e:{if(p=u?fi(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var O=zk;else if(Zg(p))if(Iw)O=Kk;else{O=Wk;var M=qk}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=Hk);if(O&&(O=O(t,u))){Ew(f,O,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&mh(p,"number",p.value)}switch(M=u?fi(u):window,t){case"focusin":(Zg(M)||M.contentEditable==="true")&&(di=M,Sh=u,Jo=null);break;case"focusout":Jo=Sh=di=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,s0(f,n,h);break;case"selectionchange":if(Yk)break;case"keydown":case"keyup":s0(f,n,h)}var S;if(Qf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ui?_w(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ww&&n.locale!=="ko"&&(ui||v!=="onCompositionStart"?v==="onCompositionEnd"&&ui&&(S=vw()):(Sr=h,Hf="value"in Sr?Sr.value:Sr.textContent,ui=!0)),M=_c(u,v),0<M.length&&(v=new Qg(v,t,null,n,h),f.push({event:v,listeners:M}),S?v.data=S:(S=xw(n),S!==null&&(v.data=S)))),(S=Vk?Fk(t,n):Uk(t,n))&&(u=_c(u,"onBeforeInput"),0<u.length&&(h=new Qg("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=S))}jw(f,e)})}function ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ua(t,n),i!=null&&r.unshift(ya(t,i,s)),i=ua(t,e),i!=null&&r.push(ya(t,i,s))),t=t.return}return r}function ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ua(n,i),l!=null&&o.unshift(ya(n,l,a))):s||(l=ua(n,i),l!=null&&o.push(ya(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eS=/\r\n?/g,tS=/\u0000|\uFFFD/g;function l0(t){return(typeof t=="string"?t:""+t).replace(eS,`
`).replace(tS,"")}function Pl(t,e,n){if(e=l0(e),l0(t)!==e&&n)throw Error(z(425))}function xc(){}var Nh=null,Ch=null;function Ah(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,nS=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,rS=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(t){return c0.resolve(null).then(t).catch(sS)}:Rh;function sS(t){setTimeout(function(){throw t})}function Pd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fa(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function u0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eo=Math.random().toString(36).slice(2),Tn="__reactFiber$"+eo,va="__reactProps$"+eo,er="__reactContainer$"+eo,Ph="__reactEvents$"+eo,iS="__reactListeners$"+eo,oS="__reactHandles$"+eo;function us(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=u0(t);t!==null;){if(n=t[Tn])return n;t=u0(t)}return e}t=n,n=t.parentNode}return null}function Ba(t){return t=t[Tn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function hu(t){return t[va]||null}var jh=[],mi=-1;function Qr(t){return{current:t}}function Ae(t){0>mi||(t.current=jh[mi],jh[mi]=null,mi--)}function Te(t,e){mi++,jh[mi]=t.current,t.current=e}var qr={},Et=Qr(qr),Ot=Qr(!1),Es=qr;function Oi(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function Ec(){Ae(Ot),Ae(Et)}function d0(t,e,n){if(Et.current!==qr)throw Error(z(168));Te(Et,e),Te(Ot,n)}function Ow(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,qT(t)||"Unknown",s));return Oe({},n,r)}function Ic(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,Es=Et.current,Te(Et,t),Te(Ot,Ot.current),!0}function h0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Ow(t,e,Es),r.__reactInternalMemoizedMergedChildContext=t,Ae(Ot),Ae(Et),Te(Et,t)):Ae(Ot),Te(Ot,n)}var zn=null,fu=!1,jd=!1;function Mw(t){zn===null?zn=[t]:zn.push(t)}function aS(t){fu=!0,Mw(t)}function Yr(){if(!jd&&zn!==null){jd=!0;var t=0,e=ye;try{var n=zn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,fu=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),aw($f,Yr),s}finally{ye=e,jd=!1}}return null}var pi=[],gi=0,Tc=null,kc=0,Yt=[],Jt=0,Is=null,Wn=1,Hn="";function as(t,e){pi[gi++]=kc,pi[gi++]=Tc,Tc=t,kc=e}function Lw(t,e,n){Yt[Jt++]=Wn,Yt[Jt++]=Hn,Yt[Jt++]=Is,Is=t;var r=Wn;t=Hn;var s=32-fn(r)-1;r&=~(1<<s),n+=1;var i=32-fn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wn=1<<32-fn(e)+s|n<<s|r,Hn=i+t}else Wn=1<<i|n<<s|r,Hn=t}function Jf(t){t.return!==null&&(as(t,1),Lw(t,1,0))}function Xf(t){for(;t===Tc;)Tc=pi[--gi],pi[gi]=null,kc=pi[--gi],pi[gi]=null;for(;t===Is;)Is=Yt[--Jt],Yt[Jt]=null,Hn=Yt[--Jt],Yt[Jt]=null,Wn=Yt[--Jt],Yt[Jt]=null}var qt=null,$t=null,Re=!1,hn=null;function Vw(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function f0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,$t=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:Wn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,$t=null,!0):!1;default:return!1}}function Dh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Oh(t){if(Re){var e=$t;if(e){var n=e;if(!f0(t,e)){if(Dh(t))throw Error(z(418));e=Dr(n.nextSibling);var r=qt;e&&f0(t,e)?Vw(r,n):(t.flags=t.flags&-4097|2,Re=!1,qt=t)}}else{if(Dh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,qt=t}}}function m0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function jl(t){if(t!==qt)return!1;if(!Re)return m0(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ah(t.type,t.memoizedProps)),e&&(e=$t)){if(Dh(t))throw Fw(),Error(z(418));for(;e;)Vw(t,e),e=Dr(e.nextSibling)}if(m0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=qt?Dr(t.stateNode.nextSibling):null;return!0}function Fw(){for(var t=$t;t;)t=Dr(t.nextSibling)}function Mi(){$t=qt=null,Re=!1}function Zf(t){hn===null?hn=[t]:hn.push(t)}var lS=ar.ReactCurrentBatchConfig;function jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Dl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function p0(t){var e=t._init;return e(t._payload)}function Uw(t){function e(_,E){if(t){var x=_.deletions;x===null?(_.deletions=[E],_.flags|=16):x.push(E)}}function n(_,E){if(!t)return null;for(;E!==null;)e(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function s(_,E){return _=Vr(_,E),_.index=0,_.sibling=null,_}function i(_,E,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<E?(_.flags|=2,E):x):(_.flags|=2,E)):(_.flags|=1048576,E)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,E,x,R){return E===null||E.tag!==6?(E=Ud(x,_.mode,R),E.return=_,E):(E=s(E,x),E.return=_,E)}function l(_,E,x,R){var O=x.type;return O===ci?h(_,E,x.props.children,R,x.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===yr&&p0(O)===E.type)?(R=s(E,x.props),R.ref=jo(_,E,x),R.return=_,R):(R=nc(x.type,x.key,x.props,null,_.mode,R),R.ref=jo(_,E,x),R.return=_,R)}function u(_,E,x,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=Bd(x,_.mode,R),E.return=_,E):(E=s(E,x.children||[]),E.return=_,E)}function h(_,E,x,R,O){return E===null||E.tag!==7?(E=_s(x,_.mode,R,O),E.return=_,E):(E=s(E,x),E.return=_,E)}function f(_,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ud(""+E,_.mode,x),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Il:return x=nc(E.type,E.key,E.props,null,_.mode,x),x.ref=jo(_,null,E),x.return=_,x;case li:return E=Bd(E,_.mode,x),E.return=_,E;case yr:var R=E._init;return f(_,R(E._payload),x)}if(Vo(E)||No(E))return E=_s(E,_.mode,x,null),E.return=_,E;Dl(_,E)}return null}function p(_,E,x,R){var O=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return O!==null?null:a(_,E,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:return x.key===O?l(_,E,x,R):null;case li:return x.key===O?u(_,E,x,R):null;case yr:return O=x._init,p(_,E,O(x._payload),R)}if(Vo(x)||No(x))return O!==null?null:h(_,E,x,R,null);Dl(_,x)}return null}function y(_,E,x,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(x)||null,a(E,_,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Il:return _=_.get(R.key===null?x:R.key)||null,l(E,_,R,O);case li:return _=_.get(R.key===null?x:R.key)||null,u(E,_,R,O);case yr:var M=R._init;return y(_,E,x,M(R._payload),O)}if(Vo(R)||No(R))return _=_.get(x)||null,h(E,_,R,O,null);Dl(E,R)}return null}function w(_,E,x,R){for(var O=null,M=null,S=E,v=E=0,k=null;S!==null&&v<x.length;v++){S.index>v?(k=S,S=null):k=S.sibling;var N=p(_,S,x[v],R);if(N===null){S===null&&(S=k);break}t&&S&&N.alternate===null&&e(_,S),E=i(N,E,v),M===null?O=N:M.sibling=N,M=N,S=k}if(v===x.length)return n(_,S),Re&&as(_,v),O;if(S===null){for(;v<x.length;v++)S=f(_,x[v],R),S!==null&&(E=i(S,E,v),M===null?O=S:M.sibling=S,M=S);return Re&&as(_,v),O}for(S=r(_,S);v<x.length;v++)k=y(S,_,v,x[v],R),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?v:k.key),E=i(k,E,v),M===null?O=k:M.sibling=k,M=k);return t&&S.forEach(function(A){return e(_,A)}),Re&&as(_,v),O}function T(_,E,x,R){var O=No(x);if(typeof O!="function")throw Error(z(150));if(x=O.call(x),x==null)throw Error(z(151));for(var M=O=null,S=E,v=E=0,k=null,N=x.next();S!==null&&!N.done;v++,N=x.next()){S.index>v?(k=S,S=null):k=S.sibling;var A=p(_,S,N.value,R);if(A===null){S===null&&(S=k);break}t&&S&&A.alternate===null&&e(_,S),E=i(A,E,v),M===null?O=A:M.sibling=A,M=A,S=k}if(N.done)return n(_,S),Re&&as(_,v),O;if(S===null){for(;!N.done;v++,N=x.next())N=f(_,N.value,R),N!==null&&(E=i(N,E,v),M===null?O=N:M.sibling=N,M=N);return Re&&as(_,v),O}for(S=r(_,S);!N.done;v++,N=x.next())N=y(S,_,v,N.value,R),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?v:N.key),E=i(N,E,v),M===null?O=N:M.sibling=N,M=N);return t&&S.forEach(function(P){return e(_,P)}),Re&&as(_,v),O}function b(_,E,x,R){if(typeof x=="object"&&x!==null&&x.type===ci&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:e:{for(var O=x.key,M=E;M!==null;){if(M.key===O){if(O=x.type,O===ci){if(M.tag===7){n(_,M.sibling),E=s(M,x.props.children),E.return=_,_=E;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===yr&&p0(O)===M.type){n(_,M.sibling),E=s(M,x.props),E.ref=jo(_,M,x),E.return=_,_=E;break e}n(_,M);break}else e(_,M);M=M.sibling}x.type===ci?(E=_s(x.props.children,_.mode,R,x.key),E.return=_,_=E):(R=nc(x.type,x.key,x.props,null,_.mode,R),R.ref=jo(_,E,x),R.return=_,_=R)}return o(_);case li:e:{for(M=x.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(_,E.sibling),E=s(E,x.children||[]),E.return=_,_=E;break e}else{n(_,E);break}else e(_,E);E=E.sibling}E=Bd(x,_.mode,R),E.return=_,_=E}return o(_);case yr:return M=x._init,b(_,E,M(x._payload),R)}if(Vo(x))return w(_,E,x,R);if(No(x))return T(_,E,x,R);Dl(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(n(_,E.sibling),E=s(E,x),E.return=_,_=E):(n(_,E),E=Ud(x,_.mode,R),E.return=_,_=E),o(_)):n(_,E)}return b}var Li=Uw(!0),Bw=Uw(!1),Sc=Qr(null),bc=null,yi=null,em=null;function tm(){em=yi=bc=null}function nm(t){var e=Sc.current;Ae(Sc),t._currentValue=e}function Mh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ki(t,e){bc=t,em=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(bc===null)throw Error(z(308));yi=t,bc.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var ds=null;function rm(t){ds===null?ds=[t]:ds.push(t)}function $w(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rm(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,rm(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zf(t,n)}}function g0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nc(t,e,n,r){var s=t.updateQueue;vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,T=a;switch(p=e,y=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){f=w.call(y,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,p=typeof w=="function"?w.call(y,f,p):w,p==null)break e;f=Oe({},f,p);break e;case 2:vr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ks|=o,t.lanes=o,t.memoizedState=f}}function y0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var $a={},bn=Qr($a),wa=Qr($a),_a=Qr($a);function hs(t){if(t===$a)throw Error(z(174));return t}function im(t,e){switch(Te(_a,e),Te(wa,t),Te(bn,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gh(e,t)}Ae(bn),Te(bn,e)}function Vi(){Ae(bn),Ae(wa),Ae(_a)}function qw(t){hs(_a.current);var e=hs(bn.current),n=gh(e,t.type);e!==n&&(Te(wa,t),Te(bn,n))}function om(t){wa.current===t&&(Ae(bn),Ae(wa))}var je=Qr(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function am(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var Jl=ar.ReactCurrentDispatcher,Od=ar.ReactCurrentBatchConfig,Ts=0,De=null,Qe=null,nt=null,Ac=!1,Xo=!1,xa=0,cS=0;function gt(){throw Error(z(321))}function lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function cm(t,e,n,r,s,i){if(Ts=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jl.current=t===null||t.memoizedState===null?fS:mS,t=n(r,s),Xo){i=0;do{if(Xo=!1,xa=0,25<=i)throw Error(z(301));i+=1,nt=Qe=null,e.updateQueue=null,Jl.current=pS,t=n(r,s)}while(Xo)}if(Jl.current=Rc,e=Qe!==null&&Qe.next!==null,Ts=0,nt=Qe=De=null,Ac=!1,e)throw Error(z(300));return t}function um(){var t=xa!==0;return xa=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?De.memoizedState=nt=t:nt=nt.next=t,nt}function nn(){if(Qe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=nt===null?De.memoizedState:nt.next;if(e!==null)nt=e,Qe=t;else{if(t===null)throw Error(z(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},nt===null?De.memoizedState=nt=t:nt=nt.next=t}return nt}function Ea(t,e){return typeof e=="function"?e(t):e}function Md(t){var e=nn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((Ts&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,De.lanes|=h,ks|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,yn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,ks|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=nn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ww(){}function Hw(t,e){var n=De,r=nn(),s=e(),i=!yn(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,dm(Qw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Ia(9,Gw.bind(null,n,r,s,e),void 0,null),st===null)throw Error(z(349));Ts&30||Kw(n,e,s)}return s}function Kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gw(t,e,n,r){e.value=n,e.getSnapshot=r,Yw(e)&&Jw(t)}function Qw(t,e,n){return n(function(){Yw(e)&&Jw(t)})}function Yw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function Jw(t){var e=tr(t,1);e!==null&&mn(e,t,1,-1)}function v0(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=hS.bind(null,De,t),[e.memoizedState,t]}function Ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xw(){return nn().memoizedState}function Xl(t,e,n,r){var s=In();De.flags|=t,s.memoizedState=Ia(1|e,n,void 0,r===void 0?null:r)}function mu(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&lm(r,o.deps)){s.memoizedState=Ia(e,n,i,r);return}}De.flags|=t,s.memoizedState=Ia(1|e,n,i,r)}function w0(t,e){return Xl(8390656,8,t,e)}function dm(t,e){return mu(2048,8,t,e)}function Zw(t,e){return mu(4,2,t,e)}function e_(t,e){return mu(4,4,t,e)}function t_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n_(t,e,n){return n=n!=null?n.concat([t]):null,mu(4,4,t_.bind(null,e,t),n)}function hm(){}function r_(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function s_(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i_(t,e,n){return Ts&21?(yn(n,e)||(n=uw(),De.lanes|=n,ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function uS(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Od.transition;Od.transition={};try{t(!1),e()}finally{ye=n,Od.transition=r}}function o_(){return nn().memoizedState}function dS(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a_(t))l_(e,n);else if(n=$w(t,e,n,r),n!==null){var s=Nt();mn(n,t,r,s),c_(n,e,r)}}function hS(t,e,n){var r=Lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a_(t))l_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,yn(a,o)){var l=e.interleaved;l===null?(s.next=s,rm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=$w(t,e,s,r),n!==null&&(s=Nt(),mn(n,t,r,s),c_(n,e,r))}}function a_(t){var e=t.alternate;return t===De||e!==null&&e===De}function l_(t,e){Xo=Ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zf(t,n)}}var Rc={readContext:tn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},fS={readContext:tn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:w0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,t_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dS.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:v0,useDebugValue:hm,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=v0(!1),e=t[0];return t=uS.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=In();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),st===null)throw Error(z(349));Ts&30||Kw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,w0(Qw.bind(null,r,i,t),[t]),r.flags|=2048,Ia(9,Gw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=st.identifierPrefix;if(Re){var n=Hn,r=Wn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mS={readContext:tn,useCallback:r_,useContext:tn,useEffect:dm,useImperativeHandle:n_,useInsertionEffect:Zw,useLayoutEffect:e_,useMemo:s_,useReducer:Md,useRef:Xw,useState:function(){return Md(Ea)},useDebugValue:hm,useDeferredValue:function(t){var e=nn();return i_(e,Qe.memoizedState,t)},useTransition:function(){var t=Md(Ea)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:o_,unstable_isNewReconciler:!1},pS={readContext:tn,useCallback:r_,useContext:tn,useEffect:dm,useImperativeHandle:n_,useInsertionEffect:Zw,useLayoutEffect:e_,useMemo:s_,useReducer:Ld,useRef:Xw,useState:function(){return Ld(Ea)},useDebugValue:hm,useDeferredValue:function(t){var e=nn();return Qe===null?e.memoizedState=t:i_(e,Qe.memoizedState,t)},useTransition:function(){var t=Ld(Ea)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:o_,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pu={isMounted:function(t){return(t=t._reactInternals)?Ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=Lr(t),i=Jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(mn(e,t,s,r),Yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=Lr(t),i=Jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(mn(e,t,s,r),Yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Lr(t),s=Jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Or(t,s,r),e!==null&&(mn(e,t,r,n),Yl(e,t,r))}};function _0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!pa(n,r)||!pa(s,i):!0}function u_(t,e,n){var r=!1,s=qr,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Mt(e)?Es:Et.current,r=e.contextTypes,i=(r=r!=null)?Oi(t,s):qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function x0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pu.enqueueReplaceState(e,e.state,null)}function Vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Mt(e)?Es:Et.current,s.context=Oi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pu.enqueueReplaceState(s,s.state,null),Nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=zT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gS=typeof WeakMap=="function"?WeakMap:Map;function d_(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,Qh=r),Fh(t,e)},n}function h_(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fh(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function E0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=AS.bind(null,t,e,n),e.then(t,t))}function I0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function T0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var yS=ar.ReactCurrentOwner,Dt=!1;function St(t,e,n,r){e.child=t===null?Bw(e,null,n,r):Li(e,t.child,n,r)}function k0(t,e,n,r,s){n=n.render;var i=e.ref;return ki(e,s),r=cm(t,e,n,r,i,s),n=um(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Re&&n&&Jf(e),e.flags|=1,St(t,e,r,s),e.child)}function S0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_m(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,f_(t,e,i,r,s)):(t=nc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pa,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=Vr(i,r),t.ref=e.ref,t.return=e,e.child=t}function f_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pa(i,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,nr(t,e,s)}return Uh(t,e,n,r,s)}function m_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(wi,Ut),Ut|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(wi,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(wi,Ut),Ut|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(wi,Ut),Ut|=r;return St(t,e,s,n),e.child}function p_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uh(t,e,n,r,s){var i=Mt(n)?Es:Et.current;return i=Oi(e,i),ki(e,s),n=cm(t,e,n,r,i,s),r=um(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Re&&r&&Jf(e),e.flags|=1,St(t,e,n,s),e.child)}function b0(t,e,n,r,s){if(Mt(n)){var i=!0;Ic(e)}else i=!1;if(ki(e,s),e.stateNode===null)Zl(t,e),u_(e,n,r),Vh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=tn(u):(u=Mt(n)?Es:Et.current,u=Oi(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&x0(e,o,r,u),vr=!1;var p=e.memoizedState;o.state=p,Nc(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Ot.current||vr?(typeof h=="function"&&(Lh(e,n,h,r),l=e.memoizedState),(a=vr||_0(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:un(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=Mt(n)?Es:Et.current,l=Oi(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&x0(e,o,r,l),vr=!1,p=e.memoizedState,o.state=p,Nc(e,r,o,s);var w=e.memoizedState;a!==f||p!==w||Ot.current||vr?(typeof y=="function"&&(Lh(e,n,y,r),w=e.memoizedState),(u=vr||_0(e,n,u,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Bh(t,e,n,r,i,s)}function Bh(t,e,n,r,s,i){p_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&h0(e,n,!1),nr(t,e,i);r=e.stateNode,yS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Li(e,t.child,null,i),e.child=Li(e,null,a,i)):St(t,e,a,i),e.memoizedState=r.state,s&&h0(e,n,!0),e.child}function g_(t){var e=t.stateNode;e.pendingContext?d0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d0(t,e.context,!1),im(t,e.containerInfo)}function N0(t,e,n,r,s){return Mi(),Zf(s),e.flags|=256,St(t,e,n,r),e.child}var $h={dehydrated:null,treeContext:null,retryLane:0};function zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function y_(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(je,s&1),t===null)return Oh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vu(o,r,0,null),t=_s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zh(n),e.memoizedState=$h,t):fm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return vS(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Vr(a,i):(i=_s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$h,r}return i=t.child,t=i.sibling,r=Vr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fm(t,e){return e=vu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ol(t,e,n,r){return r!==null&&Zf(r),Li(e,t.child,null,n),t=fm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(z(422))),Ol(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vu({mode:"visible",children:r.children},s,0,null),i=_s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Li(e,t.child,null,o),e.child.memoizedState=zh(o),e.memoizedState=$h,i);if(!(e.mode&1))return Ol(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Vd(i,r,void 0),Ol(t,e,o,r)}if(a=(o&t.childLanes)!==0,Dt||a){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),mn(r,t,s,-1))}return wm(),r=Vd(Error(z(421))),Ol(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=RS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Dr(s.nextSibling),qt=e,Re=!0,hn=null,t!==null&&(Yt[Jt++]=Wn,Yt[Jt++]=Hn,Yt[Jt++]=Is,Wn=t.id,Hn=t.overflow,Is=e),e=fm(e,r.children),e.flags|=4096,e)}function C0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mh(t.return,e,n)}function Fd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function v_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C0(t,n,e);else if(t.tag===19)C0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Fd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Fd(e,!0,n,null,i);break;case"together":Fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wS(t,e,n){switch(e.tag){case 3:g_(e),Mi();break;case 5:qw(e);break;case 1:Mt(e.type)&&Ic(e);break;case 4:im(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Sc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?y_(t,e,n):(Te(je,je.current&1),t=nr(t,e,n),t!==null?t.sibling:null);Te(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,m_(t,e,n)}return nr(t,e,n)}var w_,qh,__,x_;w_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qh=function(){};__=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,hs(bn.current);var i=null;switch(n){case"input":s=hh(t,s),r=hh(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=ph(t,s),r=ph(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xc)}yh(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(la.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(la.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};x_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Do(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _S(t,e,n){var r=e.pendingProps;switch(Xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Mt(e.type)&&Ec(),yt(e),null;case 3:return r=e.stateNode,Vi(),Ae(Ot),Ae(Et),am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Xh(hn),hn=null))),qh(t,e),yt(e),null;case 5:om(e);var s=hs(_a.current);if(n=e.type,t!==null&&e.stateNode!=null)__(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return yt(e),null}if(t=hs(bn.current),jl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tn]=e,r[va]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Uo.length;s++)Ne(Uo[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Vg(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":Ug(r,i),Ne("invalid",r)}yh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,a,t),s=["children",""+a]):la.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Tl(r),Fg(r,i,!0);break;case"textarea":Tl(r),Bg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[va]=r,w_(t,e,!1,!1),e.stateNode=t;e:{switch(o=vh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Uo.length;s++)Ne(Uo[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":Vg(t,r),s=hh(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Ug(t,r),s=ph(t,r),Ne("invalid",t);break;default:s=r}yh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Xv(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Yv(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ca(t,l):typeof l=="number"&&ca(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(la.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Lf(t,i,l,o))}switch(n){case"input":Tl(t),Fg(t,r,!1);break;case"textarea":Tl(t),Bg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xi(t,!!r.multiple,i,!1):r.defaultValue!=null&&xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)x_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=hs(_a.current),hs(bn.current),jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return yt(e),null;case 13:if(Ae(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&$t!==null&&e.mode&1&&!(e.flags&128))Fw(),Mi(),e.flags|=98560,i=!1;else if(i=jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Tn]=e}else Mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else hn!==null&&(Xh(hn),hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Je===0&&(Je=3):wm())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Vi(),qh(t,e),t===null&&ga(e.stateNode.containerInfo),yt(e),null;case 10:return nm(e.type._context),yt(e),null;case 17:return Mt(e.type)&&Ec(),yt(e),null;case 19:if(Ae(je),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Do(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cc(t),o!==null){for(e.flags|=128,Do(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>Ui&&(e.flags|=128,r=!0,Do(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Do(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return yt(e),null}else 2*$e()-i.renderingStartTime>Ui&&n!==1073741824&&(e.flags|=128,r=!0,Do(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=je.current,Te(je,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return vm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function xS(t,e){switch(Xf(e),e.tag){case 1:return Mt(e.type)&&Ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vi(),Ae(Ot),Ae(Et),am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return om(e),null;case 13:if(Ae(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(je),null;case 4:return Vi(),null;case 10:return nm(e.type._context),null;case 22:case 23:return vm(),null;case 24:return null;default:return null}}var Ml=!1,_t=!1,ES=typeof WeakSet=="function"?WeakSet:Set,G=null;function vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Wh(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var A0=!1;function IS(t,e){if(Nh=vc,t=Sw(),Yf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++u===s&&(a=o),p===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ch={focusedElem:t,selectionRange:n},vc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,b=w.memoizedState,_=e.stateNode,E=_.getSnapshotBeforeUpdate(e.elementType===e.type?T:un(e.type,T),b);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){Fe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return w=A0,A0=!1,w}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wh(e,n,i)}s=s.next}while(s!==r)}}function gu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function E_(t){var e=t.alternate;e!==null&&(t.alternate=null,E_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[va],delete e[Ph],delete e[iS],delete e[oS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I_(t){return t.tag===5||t.tag===3||t.tag===4}function R0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xc));else if(r!==4&&(t=t.child,t!==null))for(Kh(t,e,n),t=t.sibling;t!==null;)Kh(t,e,n),t=t.sibling}function Gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gh(t,e,n),t=t.sibling;t!==null;)Gh(t,e,n),t=t.sibling}var ot=null,dn=!1;function pr(t,e,n){for(n=n.child;n!==null;)T_(t,e,n),n=n.sibling}function T_(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(lu,n)}catch{}switch(n.tag){case 5:_t||vi(n,e);case 6:var r=ot,s=dn;ot=null,pr(t,e,n),ot=r,dn=s,ot!==null&&(dn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(dn?(t=ot,n=n.stateNode,t.nodeType===8?Pd(t.parentNode,n):t.nodeType===1&&Pd(t,n),fa(t)):Pd(ot,n.stateNode));break;case 4:r=ot,s=dn,ot=n.stateNode.containerInfo,dn=!0,pr(t,e,n),ot=r,dn=s;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wh(n,e,o),s=s.next}while(s!==r)}pr(t,e,n);break;case 1:if(!_t&&(vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,pr(t,e,n),_t=r):pr(t,e,n);break;default:pr(t,e,n)}}function P0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ES),e.forEach(function(r){var s=PS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,dn=!1;break e;case 3:ot=a.stateNode.containerInfo,dn=!0;break e;case 4:ot=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(ot===null)throw Error(z(160));T_(i,o,s),ot=null,dn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Fe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k_(e,t),e=e.sibling}function k_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),xn(t),r&4){try{Zo(3,t,t.return),gu(3,t)}catch(T){Fe(t,t.return,T)}try{Zo(5,t,t.return)}catch(T){Fe(t,t.return,T)}}break;case 1:cn(e,t),xn(t),r&512&&n!==null&&vi(n,n.return);break;case 5:if(cn(e,t),xn(t),r&512&&n!==null&&vi(n,n.return),t.flags&32){var s=t.stateNode;try{ca(s,"")}catch(T){Fe(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Kv(s,i),vh(a,o);var u=vh(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?Xv(s,f):h==="dangerouslySetInnerHTML"?Yv(s,f):h==="children"?ca(s,f):Lf(s,h,f,u)}switch(a){case"input":fh(s,i);break;case"textarea":Gv(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?xi(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?xi(s,!!i.multiple,i.defaultValue,!0):xi(s,!!i.multiple,i.multiple?[]:"",!1))}s[va]=i}catch(T){Fe(t,t.return,T)}}break;case 6:if(cn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Fe(t,t.return,T)}}break;case 3:if(cn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(T){Fe(t,t.return,T)}break;case 4:cn(e,t),xn(t);break;case 13:cn(e,t),xn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gm=$e())),r&4&&P0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(u=_t)||h,cn(e,t),_t=u):cn(e,t),xn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(p=G,y=p.child,p.tag){case 0:case 11:case 14:case 15:Zo(4,p,p.return);break;case 1:vi(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){Fe(r,n,T)}}break;case 5:vi(p,p.return);break;case 22:if(p.memoizedState!==null){D0(f);continue}}y!==null?(y.return=p,G=y):D0(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Jv("display",o))}catch(T){Fe(t,t.return,T)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(T){Fe(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(e,t),xn(t),r&4&&P0(t);break;case 21:break;default:cn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ca(s,""),r.flags&=-33);var i=R0(t);Gh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=R0(t);Kh(t,a,o);break;default:throw Error(z(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TS(t,e,n){G=t,S_(t)}function S_(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ml;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_t;a=Ml;var u=_t;if(Ml=o,(_t=l)&&!u)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?O0(s):l!==null?(l.return=o,G=l):O0(s);for(;i!==null;)G=i,S_(i),i=i.sibling;G=s,Ml=a,_t=u}j0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):j0(t)}}function j0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&y0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}_t||e.flags&512&&Hh(e)}catch(p){Fe(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function D0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function O0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gu(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{Hh(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{Hh(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var kS=Math.ceil,Pc=ar.ReactCurrentDispatcher,mm=ar.ReactCurrentOwner,Zt=ar.ReactCurrentBatchConfig,ue=0,st=null,We=null,ct=0,Ut=0,wi=Qr(0),Je=0,Ta=null,ks=0,yu=0,pm=0,ea=null,jt=null,gm=0,Ui=1/0,Bn=null,jc=!1,Qh=null,Mr=null,Ll=!1,br=null,Dc=0,ta=0,Yh=null,ec=-1,tc=0;function Nt(){return ue&6?$e():ec!==-1?ec:ec=$e()}function Lr(t){return t.mode&1?ue&2&&ct!==0?ct&-ct:lS.transition!==null?(tc===0&&(tc=uw()),tc):(t=ye,t!==0||(t=window.event,t=t===void 0?16:yw(t.type)),t):1}function mn(t,e,n,r){if(50<ta)throw ta=0,Yh=null,Error(z(185));Fa(t,n,r),(!(ue&2)||t!==st)&&(t===st&&(!(ue&2)&&(yu|=n),Je===4&&_r(t,ct)),Lt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ui=$e()+500,fu&&Yr()))}function Lt(t,e){var n=t.callbackNode;lk(t,e);var r=yc(t,t===st?ct:0);if(r===0)n!==null&&qg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qg(n),e===1)t.tag===0?aS(M0.bind(null,t)):Mw(M0.bind(null,t)),rS(function(){!(ue&6)&&Yr()}),n=null;else{switch(dw(r)){case 1:n=$f;break;case 4:n=lw;break;case 16:n=gc;break;case 536870912:n=cw;break;default:n=gc}n=D_(n,b_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function b_(t,e){if(ec=-1,tc=0,ue&6)throw Error(z(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var r=yc(t,t===st?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oc(t,r);else{e=r;var s=ue;ue|=2;var i=C_();(st!==t||ct!==e)&&(Bn=null,Ui=$e()+500,ws(t,e));do try{NS();break}catch(a){N_(t,a)}while(!0);tm(),Pc.current=i,ue=s,We!==null?e=0:(st=null,ct=0,e=Je)}if(e!==0){if(e===2&&(s=Ih(t),s!==0&&(r=s,e=Jh(t,s))),e===1)throw n=Ta,ws(t,0),_r(t,r),Lt(t,$e()),n;if(e===6)_r(t,r);else{if(s=t.current.alternate,!(r&30)&&!SS(s)&&(e=Oc(t,r),e===2&&(i=Ih(t),i!==0&&(r=i,e=Jh(t,i))),e===1))throw n=Ta,ws(t,0),_r(t,r),Lt(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ls(t,jt,Bn);break;case 3:if(_r(t,r),(r&130023424)===r&&(e=gm+500-$e(),10<e)){if(yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rh(ls.bind(null,t,jt,Bn),e);break}ls(t,jt,Bn);break;case 4:if(_r(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kS(r/1960))-r,10<r){t.timeoutHandle=Rh(ls.bind(null,t,jt,Bn),r);break}ls(t,jt,Bn);break;case 5:ls(t,jt,Bn);break;default:throw Error(z(329))}}}return Lt(t,$e()),t.callbackNode===n?b_.bind(null,t):null}function Jh(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=Oc(t,e),t!==2&&(e=jt,jt=n,e!==null&&Xh(e)),t}function Xh(t){jt===null?jt=t:jt.push.apply(jt,t)}function SS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~pm,e&=~yu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function M0(t){if(ue&6)throw Error(z(327));Si();var e=yc(t,0);if(!(e&1))return Lt(t,$e()),null;var n=Oc(t,e);if(t.tag!==0&&n===2){var r=Ih(t);r!==0&&(e=r,n=Jh(t,r))}if(n===1)throw n=Ta,ws(t,0),_r(t,e),Lt(t,$e()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ls(t,jt,Bn),Lt(t,$e()),null}function ym(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ui=$e()+500,fu&&Yr())}}function Ss(t){br!==null&&br.tag===0&&!(ue&6)&&Si();var e=ue;ue|=1;var n=Zt.transition,r=ye;try{if(Zt.transition=null,ye=1,t)return t()}finally{ye=r,Zt.transition=n,ue=e,!(ue&6)&&Yr()}}function vm(){Ut=wi.current,Ae(wi)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nS(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ec();break;case 3:Vi(),Ae(Ot),Ae(Et),am();break;case 5:om(r);break;case 4:Vi();break;case 13:Ae(je);break;case 19:Ae(je);break;case 10:nm(r.type._context);break;case 22:case 23:vm()}n=n.return}if(st=t,We=t=Vr(t.current,null),ct=Ut=e,Je=0,Ta=null,pm=yu=ks=0,jt=ea=null,ds!==null){for(e=0;e<ds.length;e++)if(n=ds[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ds=null}return t}function N_(t,e){do{var n=We;try{if(tm(),Jl.current=Rc,Ac){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ac=!1}if(Ts=0,nt=Qe=De=null,Xo=!1,xa=0,mm.current=null,n===null||n.return===null){Je=1,Ta=e,We=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=I0(o);if(y!==null){y.flags&=-257,T0(y,o,a,i,e),y.mode&1&&E0(i,u,e),e=y,l=u;var w=e.updateQueue;if(w===null){var T=new Set;T.add(l),e.updateQueue=T}else w.add(l);break e}else{if(!(e&1)){E0(i,u,e),wm();break e}l=Error(z(426))}}else if(Re&&a.mode&1){var b=I0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),T0(b,o,a,i,e),Zf(Fi(l,a));break e}}i=l=Fi(l,a),Je!==4&&(Je=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=d_(i,l,e);g0(i,_);break e;case 1:a=l;var E=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Mr===null||!Mr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=h_(i,a,e);g0(i,R);break e}}i=i.return}while(i!==null)}R_(n)}catch(O){e=O,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function C_(){var t=Pc.current;return Pc.current=Rc,t===null?Rc:t}function wm(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||!(ks&268435455)&&!(yu&268435455)||_r(st,ct)}function Oc(t,e){var n=ue;ue|=2;var r=C_();(st!==t||ct!==e)&&(Bn=null,ws(t,e));do try{bS();break}catch(s){N_(t,s)}while(!0);if(tm(),ue=n,Pc.current=r,We!==null)throw Error(z(261));return st=null,ct=0,Je}function bS(){for(;We!==null;)A_(We)}function NS(){for(;We!==null&&!ZT();)A_(We)}function A_(t){var e=j_(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?R_(t):We=e,mm.current=null}function R_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xS(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,We=null;return}}else if(n=_S(n,e,Ut),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Je===0&&(Je=5)}function ls(t,e,n){var r=ye,s=Zt.transition;try{Zt.transition=null,ye=1,CS(t,e,n,r)}finally{Zt.transition=s,ye=r}return null}function CS(t,e,n,r){do Si();while(br!==null);if(ue&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ck(t,i),t===st&&(We=st=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ll||(Ll=!0,D_(gc,function(){return Si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=ye;ye=1;var a=ue;ue|=4,mm.current=null,IS(t,n),k_(n,t),Qk(Ch),vc=!!Nh,Ch=Nh=null,t.current=n,TS(n),ek(),ue=a,ye=o,Zt.transition=i}else t.current=n;if(Ll&&(Ll=!1,br=t,Dc=s),i=t.pendingLanes,i===0&&(Mr=null),rk(n.stateNode),Lt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jc)throw jc=!1,t=Qh,Qh=null,t;return Dc&1&&t.tag!==0&&Si(),i=t.pendingLanes,i&1?t===Yh?ta++:(ta=0,Yh=t):ta=0,Yr(),null}function Si(){if(br!==null){var t=dw(Dc),e=Zt.transition,n=ye;try{if(Zt.transition=null,ye=16>t?16:t,br===null)var r=!1;else{if(t=br,br=null,Dc=0,ue&6)throw Error(z(331));var s=ue;for(ue|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:Zo(8,h,i)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var p=h.sibling,y=h.return;if(E_(h),h===u){G=null;break}if(p!==null){p.return=y,G=p;break}G=y}}}var w=i.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var b=T.sibling;T.sibling=null,T=b}while(T!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,G=_;break e}G=i.return}}var E=t.current;for(G=E;G!==null;){o=G;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,G=x;else e:for(o=E;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gu(9,a)}}catch(O){Fe(a,a.return,O)}if(a===o){G=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,G=R;break e}G=a.return}}if(ue=s,Yr(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(lu,t)}catch{}r=!0}return r}finally{ye=n,Zt.transition=e}}return!1}function L0(t,e,n){e=Fi(n,e),e=d_(t,e,1),t=Or(t,e,1),e=Nt(),t!==null&&(Fa(t,1,e),Lt(t,e))}function Fe(t,e,n){if(t.tag===3)L0(t,t,n);else for(;e!==null;){if(e.tag===3){L0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=Fi(n,t),t=h_(e,t,1),e=Or(e,t,1),t=Nt(),e!==null&&(Fa(e,1,t),Lt(e,t));break}}e=e.return}}function AS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ct&n)===n&&(Je===4||Je===3&&(ct&130023424)===ct&&500>$e()-gm?ws(t,0):pm|=n),Lt(t,e)}function P_(t,e){e===0&&(t.mode&1?(e=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):e=1);var n=Nt();t=tr(t,e),t!==null&&(Fa(t,e,n),Lt(t,n))}function RS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P_(t,n)}function PS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),P_(t,n)}var j_;j_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,wS(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Re&&e.flags&1048576&&Lw(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zl(t,e),t=e.pendingProps;var s=Oi(e,Et.current);ki(e,n),s=cm(null,e,r,t,s,n);var i=um();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(i=!0,Ic(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sm(e),s.updater=pu,e.stateNode=s,s._reactInternals=e,Vh(e,r,t,n),e=Bh(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&Jf(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=DS(r),t=un(r,t),s){case 0:e=Uh(null,e,r,t,n);break e;case 1:e=b0(null,e,r,t,n);break e;case 11:e=k0(null,e,r,t,n);break e;case 14:e=S0(null,e,r,un(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Uh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),b0(t,e,r,s,n);case 3:e:{if(g_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,zw(t,e),Nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fi(Error(z(423)),e),e=N0(t,e,r,n,s);break e}else if(r!==s){s=Fi(Error(z(424)),e),e=N0(t,e,r,n,s);break e}else for($t=Dr(e.stateNode.containerInfo.firstChild),qt=e,Re=!0,hn=null,n=Bw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),r===s){e=nr(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return qw(e),t===null&&Oh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ah(r,s)?o=null:i!==null&&Ah(r,i)&&(e.flags|=32),p_(t,e),St(t,e,o,n),e.child;case 6:return t===null&&Oh(e),null;case 13:return y_(t,e,n);case 4:return im(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Li(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),k0(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Sc,r._currentValue),r._currentValue=o,i!==null)if(yn(i.value,o)){if(i.children===s.children&&!Ot.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Jn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Mh(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Mh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ki(e,n),s=tn(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=un(r,e.pendingProps),s=un(r.type,s),S0(t,e,r,s,n);case 15:return f_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Zl(t,e),e.tag=1,Mt(r)?(t=!0,Ic(e)):t=!1,ki(e,n),u_(e,r,s),Vh(e,r,s,n),Bh(null,e,r,!0,t,n);case 19:return v_(t,e,n);case 22:return m_(t,e,n)}throw Error(z(156,e.tag))};function D_(t,e){return aw(t,e)}function jS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new jS(t,e,n,r)}function _m(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DS(t){if(typeof t=="function")return _m(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ff)return 11;if(t===Uf)return 14}return 2}function Vr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")_m(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ci:return _s(n.children,s,i,e);case Vf:o=8,s|=8;break;case lh:return t=Xt(12,n,e,s|2),t.elementType=lh,t.lanes=i,t;case ch:return t=Xt(13,n,e,s),t.elementType=ch,t.lanes=i,t;case uh:return t=Xt(19,n,e,s),t.elementType=uh,t.lanes=i,t;case qv:return vu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $v:o=10;break e;case zv:o=9;break e;case Ff:o=11;break e;case Uf:o=14;break e;case yr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _s(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function vu(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=qv,t.lanes=n,t.stateNode={isHidden:!1},t}function Ud(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Bd(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xd(0),this.expirationTimes=xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xm(t,e,n,r,s,i,o,a,l){return t=new OS(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(i),t}function MS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O_(t){if(!t)return qr;t=t._reactInternals;e:{if(Ms(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Mt(n))return Ow(t,n,e)}return e}function M_(t,e,n,r,s,i,o,a,l){return t=xm(n,r,!0,t,s,i,o,a,l),t.context=O_(null),n=t.current,r=Nt(),s=Lr(n),i=Jn(r,s),i.callback=e??null,Or(n,i,s),t.current.lanes=s,Fa(t,s,r),Lt(t,r),t}function wu(t,e,n,r){var s=e.current,i=Nt(),o=Lr(s);return n=O_(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(s,e,o),t!==null&&(mn(t,s,o,i),Yl(t,s,o)),o}function Mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Em(t,e){V0(t,e),(t=t.alternate)&&V0(t,e)}function LS(){return null}var L_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Im(t){this._internalRoot=t}_u.prototype.render=Im.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));wu(t,e,null,null)};_u.prototype.unmount=Im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){wu(null,t,null,null)}),e[er]=null}};function _u(t){this._internalRoot=t}_u.prototype.unstable_scheduleHydration=function(t){if(t){var e=mw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wr.length&&e!==0&&e<wr[n].priority;n++);wr.splice(n,0,t),n===0&&gw(t)}};function Tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F0(){}function VS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Mc(o);i.call(u)}}var o=M_(e,r,t,0,null,!1,!1,"",F0);return t._reactRootContainer=o,t[er]=o.current,ga(t.nodeType===8?t.parentNode:t),Ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Mc(l);a.call(u)}}var l=xm(t,0,!1,null,null,!1,!1,"",F0);return t._reactRootContainer=l,t[er]=l.current,ga(t.nodeType===8?t.parentNode:t),Ss(function(){wu(e,l,n,r)}),l}function Eu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Mc(o);a.call(l)}}wu(e,o,t,s)}else o=VS(n,e,t,s,r);return Mc(o)}hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(zf(e,n|1),Lt(e,$e()),!(ue&6)&&(Ui=$e()+500,Yr()))}break;case 13:Ss(function(){var r=tr(t,1);if(r!==null){var s=Nt();mn(r,t,1,s)}}),Em(t,1)}};qf=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Nt();mn(e,t,134217728,n)}Em(t,134217728)}};fw=function(t){if(t.tag===13){var e=Lr(t),n=tr(t,e);if(n!==null){var r=Nt();mn(n,t,e,r)}Em(t,e)}};mw=function(){return ye};pw=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};_h=function(t,e,n){switch(e){case"input":if(fh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hu(r);if(!s)throw Error(z(90));Hv(r),fh(r,s)}}}break;case"textarea":Gv(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};tw=ym;nw=Ss;var FS={usingClientEntryPoint:!1,Events:[Ba,fi,hu,Zv,ew,ym]},Oo={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},US={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iw(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{lu=Vl.inject(US),Sn=Vl}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FS;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tm(e))throw Error(z(200));return MS(t,e,null,n)};Kt.createRoot=function(t,e){if(!Tm(t))throw Error(z(299));var n=!1,r="",s=L_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xm(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,ga(t.nodeType===8?t.parentNode:t),new Im(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=iw(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Ss(t)};Kt.hydrate=function(t,e,n){if(!xu(e))throw Error(z(200));return Eu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Tm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=L_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=M_(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,ga(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _u(e)};Kt.render=function(t,e,n){if(!xu(e))throw Error(z(200));return Eu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!xu(t))throw Error(z(40));return t._reactRootContainer?(Ss(function(){Eu(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Kt.unstable_batchedUpdates=ym;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Eu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function V_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V_)}catch(t){console.error(t)}}V_(),Vv.exports=Kt;var BS=Vv.exports,U0=BS;oh.createRoot=U0.createRoot,oh.hydrateRoot=U0.hydrateRoot;const $S="modulepreload",zS=function(t){return"/EduEvent/"+t},B0={},to=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=zS(l),l in B0)return;B0[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":$S,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ka.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const $0="popstate";function qS(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Ls(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Zh("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:Lc(i))}function r(s,i){Iu(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return HS(e,n,r,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Iu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WS(){return Math.random().toString(36).substr(2,8)}function z0(t,e){return{usr:t.state,key:t.key,idx:e}}function Zh(t,e,n,r){return n===void 0&&(n=null),ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ls(e):e,{state:n,key:e&&e.key||r||WS()})}function Lc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ls(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Nr.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(ka({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Nr.Pop;let b=h(),_=b==null?null:b-u;u=b,l&&l({action:a,location:T.location,delta:_})}function p(b,_){a=Nr.Push;let E=Zh(T.location,b,_);n&&n(E,b),u=h()+1;let x=z0(E,u),R=T.createHref(E);try{o.pushState(x,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}i&&l&&l({action:a,location:T.location,delta:1})}function y(b,_){a=Nr.Replace;let E=Zh(T.location,b,_);n&&n(E,b),u=h();let x=z0(E,u),R=T.createHref(E);o.replaceState(x,"",R),i&&l&&l({action:a,location:T.location,delta:0})}function w(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof b=="string"?b:Lc(b);return E=E.replace(/ $/,"%20"),ze(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let T={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener($0,f),l=b,()=>{s.removeEventListener($0,f),l=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let _=w(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(b){return o.go(b)}};return T}var q0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(q0||(q0={}));function KS(t,e,n){return n===void 0&&(n="/"),GS(t,e,n)}function GS(t,e,n,r){let s=typeof e=="string"?Ls(e):e,i=km(s.pathname||"/",n);if(i==null)return null;let o=F_(t);QS(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=a1(i);a=s1(o[l],u)}return a}function F_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Fr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),F_(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:n1(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of U_(i.path))s(i,o,l)}),e}function U_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=U_(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function QS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:r1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YS=/^:[\w-]+$/,JS=3,XS=2,ZS=1,e1=10,t1=-2,W0=t=>t==="*";function n1(t,e){let n=t.split("/"),r=n.length;return n.some(W0)&&(r+=t1),e&&(r+=XS),n.filter(s=>!W0(s)).reduce((s,i)=>s+(YS.test(i)?JS:i===""?ZS:e1),r)}function r1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function s1(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=i1({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Fr([i,f.pathname]),pathnameBase:h1(Fr([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Fr([i,f.pathnameBase]))}return o}function i1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=o1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let T=a[f]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const w=a[f];return y&&!w?u[p]=void 0:u[p]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function o1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Iu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function a1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Iu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function km(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const l1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c1=t=>l1.test(t);function u1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ls(t):t,i;if(n)if(c1(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Iu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=H0(n.substring(1),"/"):i=H0(n,e)}else i=e;return{pathname:i,search:f1(r),hash:m1(s)}}function H0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $d(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Sm(t,e){let n=d1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ls(t):(s=ka({},t),ze(!s.pathname||!s.pathname.includes("?"),$d("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),$d("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),$d("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=u1(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),h1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),f1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,m1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function p1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B_=["post","put","patch","delete"];new Set(B_);const g1=["get",...B_];new Set(g1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sa.apply(this,arguments)}const Nm=j.createContext(null),y1=j.createContext(null),Jr=j.createContext(null),Tu=j.createContext(null),lr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),$_=j.createContext(null);function v1(t,e){let{relative:n}=e===void 0?{}:e;no()||ze(!1);let{basename:r,navigator:s}=j.useContext(Jr),{hash:i,pathname:o,search:a}=W_(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Fr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function no(){return j.useContext(Tu)!=null}function cr(){return no()||ze(!1),j.useContext(Tu).location}function z_(t){j.useContext(Jr).static||j.useLayoutEffect(t)}function Xr(){let{isDataRoute:t}=j.useContext(lr);return t?R1():w1()}function w1(){no()||ze(!1);let t=j.useContext(Nm),{basename:e,future:n,navigator:r}=j.useContext(Jr),{matches:s}=j.useContext(lr),{pathname:i}=cr(),o=JSON.stringify(Sm(s,n.v7_relativeSplatPath)),a=j.useRef(!1);return z_(()=>{a.current=!0}),j.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=bm(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function q_(){let{matches:t}=j.useContext(lr),e=t[t.length-1];return e?e.params:{}}function W_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Jr),{matches:s}=j.useContext(lr),{pathname:i}=cr(),o=JSON.stringify(Sm(s,r.v7_relativeSplatPath));return j.useMemo(()=>bm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function _1(t,e){return x1(t,e)}function x1(t,e,n,r){no()||ze(!1);let{navigator:s}=j.useContext(Jr),{matches:i}=j.useContext(lr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=cr(),h;if(e){var f;let b=typeof e=="string"?Ls(e):e;l==="/"||(f=b.pathname)!=null&&f.startsWith(l)||ze(!1),h=b}else h=u;let p=h.pathname||"/",y=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=KS(t,{pathname:y}),T=S1(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Fr([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Fr([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&T?j.createElement(Tu.Provider,{value:{location:Sa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Nr.Pop}},T):T}function E1(){let t=A1(),e=p1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const I1=j.createElement(E1,null);class T1 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(lr.Provider,{value:this.props.routeContext},j.createElement($_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k1(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Nm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(lr.Provider,{value:e},r)}function S1(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||ze(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:y}=n,w=f.route.loader&&p[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let y,w=!1,T=null,b=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||I1,l&&(u<0&&p===0?(P1("route-fallback"),w=!0,b=null):u===p&&(w=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),E=()=>{let x;return y?x=T:w?x=b:f.route.Component?x=j.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,j.createElement(k1,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?j.createElement(T1,{location:n.location,revalidation:n.revalidation,component:T,error:y,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var H_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(H_||{}),K_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(K_||{});function b1(t){let e=j.useContext(Nm);return e||ze(!1),e}function N1(t){let e=j.useContext(y1);return e||ze(!1),e}function C1(t){let e=j.useContext(lr);return e||ze(!1),e}function G_(t){let e=C1(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function A1(){var t;let e=j.useContext($_),n=N1(),r=G_();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function R1(){let{router:t}=b1(H_.UseNavigateStable),e=G_(K_.UseNavigateStable),n=j.useRef(!1);return z_(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Sa({fromRouteId:e},i)))},[t,e])}const K0={};function P1(t,e,n){K0[t]||(K0[t]=!0)}function j1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rc(t){let{to:e,replace:n,state:r,relative:s}=t;no()||ze(!1);let{future:i,static:o}=j.useContext(Jr),{matches:a}=j.useContext(lr),{pathname:l}=cr(),u=Xr(),h=bm(e,Sm(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return j.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Pt(t){ze(!1)}function D1(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Nr.Pop,navigator:i,static:o=!1,future:a}=t;no()&&ze(!1);let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:i,static:o,future:Sa({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ls(r));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:w="default"}=r,T=j.useMemo(()=>{let b=km(h,l);return b==null?null:{location:{pathname:b,search:f,hash:p,state:y,key:w},navigationType:s}},[l,h,f,p,y,w,s]);return T==null?null:j.createElement(Jr.Provider,{value:u},j.createElement(Tu.Provider,{children:n,value:T}))}function O1(t){let{children:e,location:n}=t;return _1(ef(e),n)}new Promise(()=>{});function ef(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,ef(r.props.children,i));return}r.type!==Pt&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ef(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tf.apply(this,arguments)}function M1(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function L1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function V1(t,e){return t.button===0&&(!e||e==="_self")&&!L1(t)}function nf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function F1(t,e){let n=nf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const U1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],B1="6";try{window.__reactRouterVersion=B1}catch{}const $1="startTransition",G0=AT[$1];function z1(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=qS({window:s,v5Compat:!0}));let o=i.current,[a,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=j.useCallback(f=>{u&&G0?G0(()=>l(f)):l(f)},[l,u]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>j1(r),[r]),j.createElement(D1,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const q1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=M1(e,U1),{basename:y}=j.useContext(Jr),w,T=!1;if(typeof u=="string"&&W1.test(u)&&(w=u,q1))try{let x=new URL(window.location.href),R=u.startsWith("//")?new URL(x.protocol+u):new URL(u),O=km(R.pathname,y);R.origin===x.origin&&O!=null?u=O+R.search+R.hash:T=!0}catch{}let b=v1(u,{relative:s}),_=H1(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function E(x){r&&r(x),x.defaultPrevented||_(x)}return j.createElement("a",tf({},p,{href:w||b,onClick:T||i?r:E,ref:n,target:l}))});var Q0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Q0||(Q0={}));var Y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y0||(Y0={}));function H1(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Xr(),u=cr(),h=W_(t,{relative:o});return j.useCallback(f=>{if(V1(f,n)){f.preventDefault();let p=r!==void 0?r:Lc(u)===Lc(h);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,h,r,s,n,t,i,o,a])}function K1(t){let e=j.useRef(nf(t)),n=j.useRef(!1),r=cr(),s=j.useMemo(()=>F1(r.search,n.current?null:e.current),[r.search]),i=Xr(),o=j.useCallback((a,l)=>{const u=nf(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var Ye=(t=>(t.ADMIN="admin",t.USER="user",t))(Ye||{}),et=(t=>(t.CONFIRMED="confirmed",t.CANCELED="canceled",t.WAITLIST="waitlist",t))(et||{});const pn=t=>{if(!t)return"";if(t.match(/^\d{4}-\d{2}-\d{2}$/)){const[e,n,r]=t.split("-");return`${r}/${n}/${e}`}try{const e=new Date(t);return isNaN(e.getTime())?t:new Intl.DateTimeFormat("pt-BR").format(e)}catch{return t}},J0=t=>{if(!t)return"";try{let e;if(t.match(/^\d{4}-\d{2}-\d{2}$/)){const[n,r,s]=t.split("-").map(Number);e=new Date(n,r-1,s)}else e=new Date(t);return isNaN(e.getTime())?t:new Intl.DateTimeFormat("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"}).format(e)}catch{return t}},zd={},G1=t=>t&&t.apiKey&&t.projectId&&t.appId,X0={apiKey:"AIzaSyBOUAqkPhqFhsIkZVh97OJau-SzQug1PBE",authDomain:"eduevent-e50f4.firebaseapp.com",projectId:"eduevent-e50f4",storageBucket:"eduevent-e50f4.appspot.com",messagingSenderId:"964945250582",appId:"1:964945250582:web:3ce9fcdad019132561a837",measurementId:"G-KCLHFXEEML",vapidKey:(zd==null?void 0:zd.VITE_FIREBASE_VAPID_KEY)||""},Kn={useFirebase:G1(X0),firebase:X0};var Z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Q1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Q_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Q1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new Y1;const p=i<<2|a>>4;if(r.push(p),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J1=function(t){const e=Q_(t);return Y_.encodeByteArray(e,!0)},Vc=function(t){return J1(t).replace(/\./g,"")},J_=function(t){try{return Y_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=()=>X1().__FIREBASE_DEFAULTS__,eb=()=>{if(typeof process>"u"||typeof Z0>"u")return;const t=Z0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J_(t[1]);return e&&JSON.parse(e)},ku=()=>{try{return Z1()||eb()||tb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X_=t=>{var e,n;return(n=(e=ku())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nb=t=>{const e=X_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Z_=()=>{var t;return(t=ku())===null||t===void 0?void 0:t.config},ex=t=>{var e;return(e=ku())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vc(JSON.stringify(n)),Vc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ib(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function ob(){var t;const e=(t=ku())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ab(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ub(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function db(){return!ob()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tx(){try{return typeof indexedDB=="object"}catch{return!1}}function nx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function hb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fb,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vs.prototype.create)}}class Vs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?mb(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new jn(s,a,r)}}function mb(t,e){return t.replace(pb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pb=/\{\$([^}]+)}/g;function gb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ey(i)&&ey(o)){if(!Bi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ey(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $o(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yb(t,e){const n=new vb(t,e);return n.subscribe.bind(n)}class vb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wb(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qd),s.error===void 0&&(s.error=qd),s.complete===void 0&&(s.complete=qd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class vn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Eb(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xb(t){return t===cs?void 0:t}function Eb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _b(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const Tb={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},kb=le.INFO,Sb={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},bb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Sb[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=kb,this._logHandler=bb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const Nb=(t,e)=>e.some(n=>t instanceof n);let ty,ny;function Cb(){return ty||(ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ab(){return ny||(ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rx=new WeakMap,rf=new WeakMap,sx=new WeakMap,Wd=new WeakMap,Am=new WeakMap;function Rb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rx.set(n,t)}).catch(()=>{}),Am.set(e,t),e}function Pb(t){if(rf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rf.set(t,e)}let sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jb(t){sf=t(sf)}function Db(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hd(this),e,...n);return sx.set(r,e.sort?e.sort():[e]),Xn(r)}:Ab().includes(t)?function(...e){return t.apply(Hd(this),e),Xn(rx.get(this))}:function(...e){return Xn(t.apply(Hd(this),e))}}function Ob(t){return typeof t=="function"?Db(t):(t instanceof IDBTransaction&&Pb(t),Nb(t,Cb())?new Proxy(t,sf):t)}function Xn(t){if(t instanceof IDBRequest)return Rb(t);if(Wd.has(t))return Wd.get(t);const e=Ob(t);return e!==t&&(Wd.set(t,e),Am.set(e,t)),e}const Hd=t=>Am.get(t);function Su(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Xn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xn(o.result),l.oldVersion,l.newVersion,Xn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function Kd(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Xn(n).then(()=>{})}const Mb=["get","getKey","getAll","getAllKeys","count"],Lb=["put","add","delete","clear"],Gd=new Map;function ry(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gd.get(e))return Gd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Lb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Mb.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Gd.set(e,i),i}jb(t=>({...t,get:(e,n,r)=>ry(e,n)||t.get(e,n,r),has:(e,n)=>!!ry(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Fb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const of="@firebase/app",sy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Cm("@firebase/app"),Ub="@firebase/app-compat",Bb="@firebase/analytics-compat",$b="@firebase/analytics",zb="@firebase/app-check-compat",qb="@firebase/app-check",Wb="@firebase/auth",Hb="@firebase/auth-compat",Kb="@firebase/database",Gb="@firebase/data-connect",Qb="@firebase/database-compat",Yb="@firebase/functions",Jb="@firebase/functions-compat",Xb="@firebase/installations",Zb="@firebase/installations-compat",eN="@firebase/messaging",tN="@firebase/messaging-compat",nN="@firebase/performance",rN="@firebase/performance-compat",sN="@firebase/remote-config",iN="@firebase/remote-config-compat",oN="@firebase/storage",aN="@firebase/storage-compat",lN="@firebase/firestore",cN="@firebase/vertexai-preview",uN="@firebase/firestore-compat",dN="firebase",hN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="[DEFAULT]",fN={[of]:"fire-core",[Ub]:"fire-core-compat",[$b]:"fire-analytics",[Bb]:"fire-analytics-compat",[qb]:"fire-app-check",[zb]:"fire-app-check-compat",[Wb]:"fire-auth",[Hb]:"fire-auth-compat",[Kb]:"fire-rtdb",[Gb]:"fire-data-connect",[Qb]:"fire-rtdb-compat",[Yb]:"fire-fn",[Jb]:"fire-fn-compat",[Xb]:"fire-iid",[Zb]:"fire-iid-compat",[eN]:"fire-fcm",[tN]:"fire-fcm-compat",[nN]:"fire-perf",[rN]:"fire-perf-compat",[sN]:"fire-rc",[iN]:"fire-rc-compat",[oN]:"fire-gcs",[aN]:"fire-gcs-compat",[lN]:"fire-fst",[uN]:"fire-fst-compat",[cN]:"fire-vertex","fire-js":"fire-js",[dN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Map,mN=new Map,lf=new Map;function iy(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(lf.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;lf.set(e,t);for(const n of Fc.values())iy(n,t);for(const n of mN.values())iy(n,t);return!0}function ro(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Vs("app","Firebase",pN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=hN;function ix(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:af,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ur.create("bad-app-name",{appName:String(s)});if(n||(n=Z_()),!n)throw Ur.create("no-options");const i=Fc.get(s);if(i){if(Bi(n,i.options)&&Bi(r,i.config))return i;throw Ur.create("duplicate-app",{appName:s})}const o=new Ib(s);for(const l of lf.values())o.addComponent(l);const a=new gN(n,r,o);return Fc.set(s,a),a}function Rm(t=af){const e=Fc.get(t);if(!e&&t===af&&Z_())return ix();if(!e)throw Ur.create("no-app",{appName:t});return e}function en(t,e,n){var r;let s=(r=fN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Rn(new vn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firebase-heartbeat-database",vN=1,ba="firebase-heartbeat-store";let Qd=null;function ox(){return Qd||(Qd=Su(yN,vN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Qd}async function wN(t){try{const n=(await ox()).transaction(ba),r=await n.objectStore(ba).get(ax(t));return await n.done,r}catch(e){if(e instanceof jn)rr.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function oy(t,e){try{const r=(await ox()).transaction(ba,"readwrite");await r.objectStore(ba).put(e,ax(t)),await r.done}catch(n){if(n instanceof jn)rr.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function ax(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=1024,xN=30*24*60*60*1e3;class EN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ay();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=xN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ay(),{heartbeatsToSend:r,unsentEntries:s}=IN(this._heartbeatsCache.heartbeats),i=Vc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function ay(){return new Date().toISOString().substring(0,10)}function IN(t,e=_N){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ly(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ly(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tx()?nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return oy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return oy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ly(t){return Vc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){Rn(new vn("platform-logger",e=>new Vb(e),"PRIVATE")),Rn(new vn("heartbeat",e=>new EN(e),"PRIVATE")),en(of,sy,t),en(of,sy,"esm2017"),en("fire-js","")}kN("");var SN="firebase",bN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(SN,bN,"app");function Pm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NN=lx,cx=new Vs("auth","Firebase",lx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Cm("@firebase/auth");function CN(t,...e){Uc.logLevel<=le.WARN&&Uc.warn(`Auth (${so}): ${t}`,...e)}function sc(t,...e){Uc.logLevel<=le.ERROR&&Uc.error(`Auth (${so}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,...e){throw Dm(t,...e)}function gn(t,...e){return Dm(t,...e)}function jm(t,e,n){const r=Object.assign(Object.assign({},NN()),{[e]:n});return new Vs("auth","Firebase",r).create(e,{appName:t.name})}function Br(t){return jm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rn(t,"argument-error"),jm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cx.create(t,...e)}function te(t,e,...n){if(!t)throw Dm(e,...n)}function Gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sc(e),new Error(e)}function sr(t,e){t||Gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function RN(){return cy()==="http:"||cy()==="https:"}function cy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RN()||lb()||"connection"in navigator)?navigator.onLine:!0}function jN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=ib()||cb()}get(){return PN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new qa(3e4,6e4);function Fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zr(t,e,n,r,s={}){return dx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=za(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return ab()||(u.referrerPolicy="no-referrer"),ux.fetch()(hx(t,t.config.apiHost,n,a),u)})}async function dx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DN),e);try{const s=new LN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Fl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fl(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jm(t,h,u);rn(t,h)}}catch(s){if(s instanceof jn)throw s;rn(t,"network-request-failed",{message:String(s)})}}async function bu(t,e,n,r,s={}){const i=await Zr(t,e,n,r,s);return"mfaPendingCredential"in i&&rn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function hx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Om(t.config,s):`${t.config.apiScheme}://${s}`}function MN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),ON.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gn(t,e,r);return s.customData._tokenResponse=n,s}function uy(t){return t!==void 0&&t.enterprise!==void 0}class VN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function FN(t,e){return Zr(t,"GET","/v2/recaptchaConfig",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return Zr(t,"POST","/v1/accounts:delete",e)}async function fx(t,e){return Zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BN(t,e=!1){const n=ke(t),r=await n.getIdToken(e),s=Mm(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:na(Yd(s.auth_time)),issuedAtTime:na(Yd(s.iat)),expirationTime:na(Yd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Yd(t){return Number(t)*1e3}function Mm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const s=J_(n);return s?JSON.parse(s):(sc("Failed to decode base64 JWT payload"),null)}catch(s){return sc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dy(t){const e=Mm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&$N(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $N({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=na(this.lastLoginAt),this.creationTime=na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Na(t,fx(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?mx(i.providerUserInfo):[],a=WN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new uf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function qN(t){const e=ke(t);await Bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mx(t){return t.map(e=>{var{providerId:n}=e,r=Pm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){const n=await dx(t,{},async()=>{const r=za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=hx(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ux.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KN(t,e){return Zr(t,"POST","/v2/accounts:revokeToken",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=dy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await HN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new bi;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bi,this.toJSON())}_performRefresh(){return Gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Pm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new uf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Na(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BN(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await Na(this,UN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:R,isAnonymous:O,providerData:M,stsTokenManager:S}=n;te(x&&S,e,"internal-error");const v=bi.fromJSON(this.name,S);te(typeof x=="string",e,"internal-error"),gr(f,e.name),gr(p,e.name),te(typeof R=="boolean",e,"internal-error"),te(typeof O=="boolean",e,"internal-error"),gr(y,e.name),gr(w,e.name),gr(T,e.name),gr(b,e.name),gr(_,e.name),gr(E,e.name);const k=new Qn({uid:x,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:O,photoURL:w,phoneNumber:y,tenantId:T,stsTokenManager:v,createdAt:_,lastLoginAt:E});return M&&Array.isArray(M)&&(k.providerData=M.map(N=>Object.assign({},N))),b&&(k._redirectEventId=b),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new bi;s.updateFromServerResponse(n);const i=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?mx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new bi;a.updateFromIdToken(r);const l=new Qn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new uf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;function Yn(t){sr(t instanceof Function,"Expected a class definition");let e=hy.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}px.type="NONE";const fy=px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t,e,n){return`firebase:${t}:${e}:${n}`}class Ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ic(this.userKey,s.apiKey,i),this.fullPersistenceKey=ic("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ni(Yn(fy),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Yn(fy);const o=ic(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=Qn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ni(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xx(e))return"Blackberry";if(Ex(e))return"Webos";if(yx(e))return"Safari";if((e.includes("chrome/")||vx(e))&&!e.includes("edge/"))return"Chrome";if(_x(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gx(t=It()){return/firefox\//i.test(t)}function yx(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vx(t=It()){return/crios\//i.test(t)}function wx(t=It()){return/iemobile/i.test(t)}function _x(t=It()){return/android/i.test(t)}function xx(t=It()){return/blackberry/i.test(t)}function Ex(t=It()){return/webos/i.test(t)}function Lm(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GN(t=It()){var e;return Lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QN(){return ub()&&document.documentMode===10}function Ix(t=It()){return Lm(t)||_x(t)||Ex(t)||xx(t)||/windows phone/i.test(t)||wx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e=[]){let n;switch(t){case"Browser":n=my(It());break;case"Worker":n=`${my(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e={}){return Zr(t,"GET","/v2/passwordPolicy",Fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=6;class ZN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:XN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new py(this),this.idTokenSubscription=new py(this),this.beforeStateQueue=new YN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ni.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fx(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Br(this));const n=e?ke(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JN(this),n=new ZN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ni.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&CN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Us(t){return ke(t)}class py{constructor(e){this.auth=e,this.observer=null,this.addObserver=yb(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tC(t){Nu=t}function kx(t){return Nu.loadJS(t)}function nC(){return Nu.recaptchaEnterpriseScript}function rC(){return Nu.gapiScript}function sC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const iC="recaptcha-enterprise",oC="NO_RECAPTCHA";class aC{constructor(e){this.type=iC,this.auth=Us(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{FN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new VN(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;uy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(oC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&uy(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=nC();l.length!==0&&(l+=a),kx(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function gy(t,e,n,r=!1){const s=new aC(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function yy(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await gy(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await gy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e){const n=ro(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Bi(i,e??{}))return s;rn(s,"already-initialized")}return n.initialize({options:e})}function cC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uC(t,e,n){const r=Us(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Sx(e),{host:o,port:a}=dC(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),hC()}function Sx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dC(t){const e=Sx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:vy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:vy(o)}}}function vy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gn("not implemented")}_getIdTokenResponse(e){return Gn("not implemented")}_linkToIdToken(e,n){return Gn("not implemented")}_getReauthenticationResolver(e){return Gn("not implemented")}}async function fC(t,e){return Zr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(t,e){return bu(t,"POST","/v1/accounts:signInWithPassword",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(t,e){return bu(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}async function gC(t,e){return bu(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends Vm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ca(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ca(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,n,"signInWithPassword",mC);case"emailLink":return pC(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,r,"signUpPassword",fC);case"emailLink":return gC(e,{idToken:n,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(t,e){return bu(t,"POST","/v1/accounts:signInWithIdp",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="http://localhost";class bs extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Pm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new bs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ci(e,n)}buildRequest(){const e={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wC(t){const e=Bo($o(t)).link,n=e?Bo($o(e)).deep_link_id:null,r=Bo($o(t)).deep_link_id;return(r?Bo($o(r)).link:null)||r||n||e||t}class Fm{constructor(e){var n,r,s,i,o,a;const l=Bo($o(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=vC((s=l.mode)!==null&&s!==void 0?s:null);te(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=wC(e);try{return new Fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return Ca._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fm.parseLink(n);return te(r,"argument-error"),Ca._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Um{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Wa{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qn.credential(n,r)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Wa{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Wa{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qn._fromIdTokenResponse(e,r,s),o=wy(r);return new $i({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=wy(r);return new $i({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function wy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends jn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new $c(e,n,r,s)}}function bx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(t,i,e,r):i})}async function _C(t,e,n=!1){const r=await Na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $i._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e,n=!1){const{auth:r}=t;if(kn(r.app))return Promise.reject(Br(r));const s="reauthenticate";try{const i=await Na(t,bx(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Mm(i.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),$i._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&rn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(t,e,n=!1){if(kn(t.app))return Promise.reject(Br(t));const r="signIn",s=await bx(t,r,e),i=await $i._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function EC(t,e){return Nx(Us(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t){const e=Us(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function TC(t,e,n){return kn(t.app)?Promise.reject(Br(t)):EC(ke(t),io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t,e){return ke(t).setPersistence(e)}function kC(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function SC(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function bC(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function NC(t){return ke(t).signOut()}const zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1e3,AC=10;class Ax extends Cx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ax.type="LOCAL";const RC=Ax;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx extends Cx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rx.type="SESSION";const qc=Rx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Cu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await PC(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Bm("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function DC(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function OC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LC(){return Px()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="firebaseLocalStorageDb",VC=1,Wc="firebaseLocalStorage",Dx="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Au(t,e){return t.transaction([Wc],e?"readwrite":"readonly").objectStore(Wc)}function FC(){const t=indexedDB.deleteDatabase(jx);return new Ha(t).toPromise()}function df(){const t=indexedDB.open(jx,VC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wc,{keyPath:Dx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wc)?e(r):(r.close(),await FC(),e(await df()))})})}async function xy(t,e,n){const r=Au(t,!0).put({[Dx]:e,value:n});return new Ha(r).toPromise()}async function UC(t,e){const n=Au(t,!1).get(e),r=await new Ha(n).toPromise();return r===void 0?null:r.value}function Ey(t,e){const n=Au(t,!0).delete(e);return new Ha(n).toPromise()}const BC=800,$C=3;class Ox{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await df(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$C)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Px()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cu._getInstance(LC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OC(),!this.activeServiceWorker)return;this.sender=new jC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await df();return await xy(e,zc,"1"),await Ey(e,zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ey(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Au(s,!1).getAll();return new Ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ox.type="LOCAL";const zC=Ox;new qa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){return e?Yn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends Vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qC(t){return Nx(t.auth,new $m(t),t.bypassAuthState)}function WC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),xC(n,new $m(t),t.bypassAuthState)}async function HC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),_C(n,new $m(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return HC;case"reauthViaPopup":case"reauthViaRedirect":return WC;default:rn(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new qa(2e3,1e4);async function GC(t,e,n){if(kn(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const r=Us(t);AN(t,e,Um);const s=Mx(r,n);return new fs(r,"signInViaPopup",e,s).executeNotNull()}class fs extends Lx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,fs.currentPopupAction&&fs.currentPopupAction.cancel(),fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KC.get())};e()}}fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="pendingRedirect",oc=new Map;class YC extends Lx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const r=await JC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JC(t,e){const n=eA(e),r=ZC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function XC(t,e){oc.set(t._key(),e)}function ZC(t){return Yn(t._redirectPersistence)}function eA(t){return ic(QC,t.config.apiKey,t.name)}async function tA(t,e,n=!1){if(kn(t.app))return Promise.reject(Br(t));const r=Us(t),s=Mx(r,e),o=await new YC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=10*60*1e3;class rA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Vx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iy(e))}saveEventToCache(e){this.cachedEventUids.add(Iy(e)),this.lastProcessedEventTime=Date.now()}}function Iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Vx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e={}){return Zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aA=/^https?/;async function lA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iA(t);for(const n of e)try{if(cA(n))return}catch{}rn(t,"unauthorized-domain")}function cA(t){const e=cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aA.test(n))return!1;if(oA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new qa(3e4,6e4);function Ty(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dA(t){return new Promise((e,n)=>{var r,s,i;function o(){Ty(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ty(),n(gn(t,"network-request-failed"))},timeout:uA.get()})}if(!((s=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Nn().gapi)===null||i===void 0)&&i.load)o();else{const a=sC("iframefcb");return Nn()[a]=()=>{gapi.load?o():n(gn(t,"network-request-failed"))},kx(`${rC()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ac=null,e})}let ac=null;function hA(t){return ac=ac||dA(t),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new qa(5e3,15e3),mA="__/auth/iframe",pA="emulator/auth/iframe",gA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vA(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Om(e,pA):`https://${t.config.authDomain}/${mA}`,r={apiKey:e.apiKey,appName:t.name,v:so},s=yA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${za(r).slice(1)}`}async function wA(t){const e=await hA(t),n=Nn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:vA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=gn(t,"network-request-failed"),a=Nn().setTimeout(()=>{i(o)},fA.get());function l(){Nn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xA=500,EA=600,IA="_blank",TA="http://localhost";class ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kA(t,e,n,r=xA,s=EA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},_A),{width:r.toString(),height:s.toString(),top:i,left:o}),u=It().toLowerCase();n&&(a=vx(u)?IA:n),gx(u)&&(e=e||TA,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(GN(u)&&a!=="_self")return SA(e||"",a),new ky(null);const f=window.open(e||"",a,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new ky(f)}function SA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="__/auth/handler",NA="emulator/auth/handler",CA=encodeURIComponent("fac");async function Sy(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:so,eventId:s};if(e instanceof Um){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Wa){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${CA}=${encodeURIComponent(l)}`:"";return`${AA(t)}?${za(a).slice(1)}${u}`}function AA({config:t}){return t.emulator?Om(t,NA):`https://${t.authDomain}/${bA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="webStorageSupport";class RA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qc,this._completeRedirectFn=tA,this._overrideRedirectResult=XC}async _openPopup(e,n,r,s){var i;sr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Sy(e,n,r,cf(),s);return kA(e,o,Bm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Sy(e,n,r,cf(),s);return DC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wA(e),r=new rA(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jd,{type:Jd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Jd];o!==void 0&&n(!!o),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ix()||yx()||Lm()}}const PA=RA;var by="@firebase/auth",Ny="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OA(t){Rn(new vn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tx(t)},u=new eC(r,s,i,l);return cC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rn(new vn("auth-internal",e=>{const n=Us(e.getProvider("auth").getImmediate());return(r=>new jA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(by,Ny,DA(t)),en(by,Ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=5*60,LA=ex("authIdTokenMaxAge")||MA;let Cy=null;const VA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LA)return;const s=n==null?void 0:n.token;Cy!==s&&(Cy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FA(t=Rm()){const e=ro(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lC(t,{popupRedirectResolver:PA,persistence:[zC,RC,qc]}),r=ex("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=VA(i.toString());SC(n,o,()=>o(n.currentUser)),kC(n,a=>o(a))}}const s=X_("auth");return s&&uC(n,`http://${s}`),n}function UA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=gn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",UA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OA("Browser");var Ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,Fx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function k(){}k.prototype=v.prototype,S.D=v.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(N,A,P){for(var C=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)C[Ge-2]=arguments[Ge];return v.prototype[A].apply(N,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,v,k){k||(k=0);var N=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)N[A]=v.charCodeAt(k++)|v.charCodeAt(k++)<<8|v.charCodeAt(k++)<<16|v.charCodeAt(k++)<<24;else for(A=0;16>A;++A)N[A]=v[k++]|v[k++]<<8|v[k++]<<16|v[k++]<<24;v=S.g[0],k=S.g[1],A=S.g[2];var P=S.g[3],C=v+(P^k&(A^P))+N[0]+3614090360&4294967295;v=k+(C<<7&4294967295|C>>>25),C=P+(A^v&(k^A))+N[1]+3905402710&4294967295,P=v+(C<<12&4294967295|C>>>20),C=A+(k^P&(v^k))+N[2]+606105819&4294967295,A=P+(C<<17&4294967295|C>>>15),C=k+(v^A&(P^v))+N[3]+3250441966&4294967295,k=A+(C<<22&4294967295|C>>>10),C=v+(P^k&(A^P))+N[4]+4118548399&4294967295,v=k+(C<<7&4294967295|C>>>25),C=P+(A^v&(k^A))+N[5]+1200080426&4294967295,P=v+(C<<12&4294967295|C>>>20),C=A+(k^P&(v^k))+N[6]+2821735955&4294967295,A=P+(C<<17&4294967295|C>>>15),C=k+(v^A&(P^v))+N[7]+4249261313&4294967295,k=A+(C<<22&4294967295|C>>>10),C=v+(P^k&(A^P))+N[8]+1770035416&4294967295,v=k+(C<<7&4294967295|C>>>25),C=P+(A^v&(k^A))+N[9]+2336552879&4294967295,P=v+(C<<12&4294967295|C>>>20),C=A+(k^P&(v^k))+N[10]+4294925233&4294967295,A=P+(C<<17&4294967295|C>>>15),C=k+(v^A&(P^v))+N[11]+2304563134&4294967295,k=A+(C<<22&4294967295|C>>>10),C=v+(P^k&(A^P))+N[12]+1804603682&4294967295,v=k+(C<<7&4294967295|C>>>25),C=P+(A^v&(k^A))+N[13]+4254626195&4294967295,P=v+(C<<12&4294967295|C>>>20),C=A+(k^P&(v^k))+N[14]+2792965006&4294967295,A=P+(C<<17&4294967295|C>>>15),C=k+(v^A&(P^v))+N[15]+1236535329&4294967295,k=A+(C<<22&4294967295|C>>>10),C=v+(A^P&(k^A))+N[1]+4129170786&4294967295,v=k+(C<<5&4294967295|C>>>27),C=P+(k^A&(v^k))+N[6]+3225465664&4294967295,P=v+(C<<9&4294967295|C>>>23),C=A+(v^k&(P^v))+N[11]+643717713&4294967295,A=P+(C<<14&4294967295|C>>>18),C=k+(P^v&(A^P))+N[0]+3921069994&4294967295,k=A+(C<<20&4294967295|C>>>12),C=v+(A^P&(k^A))+N[5]+3593408605&4294967295,v=k+(C<<5&4294967295|C>>>27),C=P+(k^A&(v^k))+N[10]+38016083&4294967295,P=v+(C<<9&4294967295|C>>>23),C=A+(v^k&(P^v))+N[15]+3634488961&4294967295,A=P+(C<<14&4294967295|C>>>18),C=k+(P^v&(A^P))+N[4]+3889429448&4294967295,k=A+(C<<20&4294967295|C>>>12),C=v+(A^P&(k^A))+N[9]+568446438&4294967295,v=k+(C<<5&4294967295|C>>>27),C=P+(k^A&(v^k))+N[14]+3275163606&4294967295,P=v+(C<<9&4294967295|C>>>23),C=A+(v^k&(P^v))+N[3]+4107603335&4294967295,A=P+(C<<14&4294967295|C>>>18),C=k+(P^v&(A^P))+N[8]+1163531501&4294967295,k=A+(C<<20&4294967295|C>>>12),C=v+(A^P&(k^A))+N[13]+2850285829&4294967295,v=k+(C<<5&4294967295|C>>>27),C=P+(k^A&(v^k))+N[2]+4243563512&4294967295,P=v+(C<<9&4294967295|C>>>23),C=A+(v^k&(P^v))+N[7]+1735328473&4294967295,A=P+(C<<14&4294967295|C>>>18),C=k+(P^v&(A^P))+N[12]+2368359562&4294967295,k=A+(C<<20&4294967295|C>>>12),C=v+(k^A^P)+N[5]+4294588738&4294967295,v=k+(C<<4&4294967295|C>>>28),C=P+(v^k^A)+N[8]+2272392833&4294967295,P=v+(C<<11&4294967295|C>>>21),C=A+(P^v^k)+N[11]+1839030562&4294967295,A=P+(C<<16&4294967295|C>>>16),C=k+(A^P^v)+N[14]+4259657740&4294967295,k=A+(C<<23&4294967295|C>>>9),C=v+(k^A^P)+N[1]+2763975236&4294967295,v=k+(C<<4&4294967295|C>>>28),C=P+(v^k^A)+N[4]+1272893353&4294967295,P=v+(C<<11&4294967295|C>>>21),C=A+(P^v^k)+N[7]+4139469664&4294967295,A=P+(C<<16&4294967295|C>>>16),C=k+(A^P^v)+N[10]+3200236656&4294967295,k=A+(C<<23&4294967295|C>>>9),C=v+(k^A^P)+N[13]+681279174&4294967295,v=k+(C<<4&4294967295|C>>>28),C=P+(v^k^A)+N[0]+3936430074&4294967295,P=v+(C<<11&4294967295|C>>>21),C=A+(P^v^k)+N[3]+3572445317&4294967295,A=P+(C<<16&4294967295|C>>>16),C=k+(A^P^v)+N[6]+76029189&4294967295,k=A+(C<<23&4294967295|C>>>9),C=v+(k^A^P)+N[9]+3654602809&4294967295,v=k+(C<<4&4294967295|C>>>28),C=P+(v^k^A)+N[12]+3873151461&4294967295,P=v+(C<<11&4294967295|C>>>21),C=A+(P^v^k)+N[15]+530742520&4294967295,A=P+(C<<16&4294967295|C>>>16),C=k+(A^P^v)+N[2]+3299628645&4294967295,k=A+(C<<23&4294967295|C>>>9),C=v+(A^(k|~P))+N[0]+4096336452&4294967295,v=k+(C<<6&4294967295|C>>>26),C=P+(k^(v|~A))+N[7]+1126891415&4294967295,P=v+(C<<10&4294967295|C>>>22),C=A+(v^(P|~k))+N[14]+2878612391&4294967295,A=P+(C<<15&4294967295|C>>>17),C=k+(P^(A|~v))+N[5]+4237533241&4294967295,k=A+(C<<21&4294967295|C>>>11),C=v+(A^(k|~P))+N[12]+1700485571&4294967295,v=k+(C<<6&4294967295|C>>>26),C=P+(k^(v|~A))+N[3]+2399980690&4294967295,P=v+(C<<10&4294967295|C>>>22),C=A+(v^(P|~k))+N[10]+4293915773&4294967295,A=P+(C<<15&4294967295|C>>>17),C=k+(P^(A|~v))+N[1]+2240044497&4294967295,k=A+(C<<21&4294967295|C>>>11),C=v+(A^(k|~P))+N[8]+1873313359&4294967295,v=k+(C<<6&4294967295|C>>>26),C=P+(k^(v|~A))+N[15]+4264355552&4294967295,P=v+(C<<10&4294967295|C>>>22),C=A+(v^(P|~k))+N[6]+2734768916&4294967295,A=P+(C<<15&4294967295|C>>>17),C=k+(P^(A|~v))+N[13]+1309151649&4294967295,k=A+(C<<21&4294967295|C>>>11),C=v+(A^(k|~P))+N[4]+4149444226&4294967295,v=k+(C<<6&4294967295|C>>>26),C=P+(k^(v|~A))+N[11]+3174756917&4294967295,P=v+(C<<10&4294967295|C>>>22),C=A+(v^(P|~k))+N[2]+718787259&4294967295,A=P+(C<<15&4294967295|C>>>17),C=k+(P^(A|~v))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var k=v-this.blockSize,N=this.B,A=this.h,P=0;P<v;){if(A==0)for(;P<=k;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<v;)if(N[A++]=S.charCodeAt(P++),A==this.blockSize){s(this,N),A=0;break}}else for(;P<v;)if(N[A++]=S[P++],A==this.blockSize){s(this,N),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var k=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=k&255,k/=256;for(this.u(S),S=Array(16),v=k=0;4>v;++v)for(var N=0;32>N;N+=8)S[k++]=this.g[v]>>>N&255;return S};function i(S,v){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=v(S)}function o(S,v){this.h=v;for(var k=[],N=!0,A=S.length-1;0<=A;A--){var P=S[A]|0;N&&P==v||(k[A]=P,N=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?i(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return b(u(-S));for(var v=[],k=1,N=0;S>=k;N++)v[N]=S/k|0,k*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return b(h(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(v,8)),N=f,A=0;A<S.length;A+=8){var P=Math.min(8,S.length-A),C=parseInt(S.substring(A,A+P),v);8>P?(P=u(Math.pow(v,P)),N=N.j(P).add(u(C))):(N=N.j(k),N=N.add(u(C)))}return N}var f=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-b(this).m();for(var S=0,v=1,k=0;k<this.g.length;k++){var N=this.i(k);S+=(0<=N?N:4294967296+N)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(T(this))return"-"+b(this).toString(S);for(var v=u(Math.pow(S,6)),k=this,N="";;){var A=R(k,v).g;k=_(k,A.j(v));var P=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=A,w(k))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function T(S){return S.h==-1}t.l=function(S){return S=_(this,S),T(S)?-1:w(S)?0:1};function b(S){for(var v=S.g.length,k=[],N=0;N<v;N++)k[N]=~S.g[N];return new o(k,~S.h).add(p)}t.abs=function(){return T(this)?b(this):this},t.add=function(S){for(var v=Math.max(this.g.length,S.g.length),k=[],N=0,A=0;A<=v;A++){var P=N+(this.i(A)&65535)+(S.i(A)&65535),C=(P>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);N=C>>>16,P&=65535,C&=65535,k[A]=C<<16|P}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(S,v){return S.add(b(v))}t.j=function(S){if(w(this)||w(S))return f;if(T(this))return T(S)?b(this).j(b(S)):b(b(this).j(S));if(T(S))return b(this.j(b(S)));if(0>this.l(y)&&0>S.l(y))return u(this.m()*S.m());for(var v=this.g.length+S.g.length,k=[],N=0;N<2*v;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(var A=0;A<S.g.length;A++){var P=this.i(N)>>>16,C=this.i(N)&65535,Ge=S.i(A)>>>16,On=S.i(A)&65535;k[2*N+2*A]+=C*On,E(k,2*N+2*A),k[2*N+2*A+1]+=P*On,E(k,2*N+2*A+1),k[2*N+2*A+1]+=C*Ge,E(k,2*N+2*A+1),k[2*N+2*A+2]+=P*Ge,E(k,2*N+2*A+2)}for(N=0;N<v;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=v;N<2*v;N++)k[N]=0;return new o(k,0)};function E(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function x(S,v){this.g=S,this.h=v}function R(S,v){if(w(v))throw Error("division by zero");if(w(S))return new x(f,f);if(T(S))return v=R(b(S),v),new x(b(v.g),b(v.h));if(T(v))return v=R(S,b(v)),new x(b(v.g),v.h);if(30<S.g.length){if(T(S)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var k=p,N=v;0>=N.l(S);)k=O(k),N=O(N);var A=M(k,1),P=M(N,1);for(N=M(N,2),k=M(k,2);!w(N);){var C=P.add(N);0>=C.l(S)&&(A=A.add(k),P=C),N=M(N,1),k=M(k,1)}return v=_(S,A.j(v)),new x(A,v)}for(A=f;0<=S.l(v);){for(k=Math.max(1,Math.floor(S.m()/v.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=u(k),C=P.j(v);T(C)||0<C.l(S);)k-=N,P=u(k),C=P.j(v);w(P)&&(P=p),A=A.add(P),S=_(S,C)}return new x(A,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var v=Math.max(this.g.length,S.g.length),k=[],N=0;N<v;N++)k[N]=this.i(N)&S.i(N);return new o(k,this.h&S.h)},t.or=function(S){for(var v=Math.max(this.g.length,S.g.length),k=[],N=0;N<v;N++)k[N]=this.i(N)|S.i(N);return new o(k,this.h|S.h)},t.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),k=[],N=0;N<v;N++)k[N]=this.i(N)^S.i(N);return new o(k,this.h^S.h)};function O(S){for(var v=S.g.length+1,k=[],N=0;N<v;N++)k[N]=S.i(N)<<1|S.i(N-1)>>>31;return new o(k,S.h)}function M(S,v){var k=v>>5;v%=32;for(var N=S.g.length-k,A=[],P=0;P<N;P++)A[P]=0<v?S.i(P+k)>>>v|S.i(P+k+1)<<32-v:S.i(P+k);return new o(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,xs=o}).apply(typeof Ay<"u"?Ay:typeof self<"u"?self:typeof window<"u"?window:{});var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ux,zo,Bx,lc,hf,$x,zx,qx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ul=="object"&&Ul];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,m){if(m)e:{var g=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var D=c[I];if(!(D in g))break e;g=g[D]}c=c[c.length-1],I=g[c],m=m(I),m!=I&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function i(c,m){c instanceof String&&(c+="");var g=0,I=!1,D={next:function(){if(!I&&g<c.length){var L=g++;return{value:m(L,c[L]),done:!1}}return I=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(c){return c||function(){return i(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,I),c.apply(m,D)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function w(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(I,D,L){for(var W=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)W[xe-2]=arguments[xe];return m.prototype[D].apply(I,W)}}function T(c){const m=c.length;if(0<m){const g=Array(m);for(let I=0;I<m;I++)g[I]=c[I];return g}return[]}function b(c,m){for(let g=1;g<arguments.length;g++){const I=arguments[g];if(l(I)){const D=c.length||0,L=I.length||0;c.length=D+L;for(let W=0;W<L;W++)c[D+W]=I[W]}else c.push(I)}}class _{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var O=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function M(c,m,g){for(const I in c)m.call(g,c[I],I,c)}function S(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function v(c){const m={};for(const g in c)m[g]=c[g];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,m){let g,I;for(let D=1;D<arguments.length;D++){I=arguments[D];for(g in I)c[g]=I[g];for(let L=0;L<k.length;L++)g=k[L],Object.prototype.hasOwnProperty.call(I,g)&&(c[g]=I[g])}}function A(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function P(c){a.setTimeout(()=>{throw c},0)}function C(){var c=J;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Ge{constructor(){this.h=this.g=null}add(m,g){const I=On.get();I.set(m,g),this.h?this.h.next=I:this.g=I,this.h=I}}var On=new _(()=>new sn,c=>c.reset());class sn{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,K=!1,J=new Ge,re=()=>{const c=a.Promise.resolve(void 0);Le=()=>{c.then(_e)}};var _e=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(g){P(g)}var m=On;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}K=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var on=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function an(c,m){if(Pe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(O){e:{try{R(m.nodeName);var D=!0;break e}catch{}D=!1}D||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Vt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&an.aa.h.call(this)}}w(an,Pe);var Vt={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),sl=0;function Zu(c,m,g,I,D){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!I,this.ha=D,this.key=++sl,this.da=this.fa=!1}function Ks(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gs(c){this.src=c,this.g={},this.h=0}Gs.prototype.add=function(c,m,g,I,D){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var W=fo(c,m,I,D);return-1<W?(m=c[W],g||(m.fa=!1)):(m=new Zu(m,this.src,L,!!I,D),m.fa=g,c.push(m)),m};function ho(c,m){var g=m.type;if(g in c.g){var I=c.g[g],D=Array.prototype.indexOf.call(I,m,void 0),L;(L=0<=D)&&Array.prototype.splice.call(I,D,1),L&&(Ks(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function fo(c,m,g,I){for(var D=0;D<c.length;++D){var L=c[D];if(!L.da&&L.listener==m&&L.capture==!!g&&L.ha==I)return D}return-1}var mo="closure_lm_"+(1e6*Math.random()|0),Qs={};function po(c,m,g,I,D){if(Array.isArray(m)){for(var L=0;L<m.length;L++)po(c,m[L],g,I,D);return null}return g=B(g),c&&c[Tt]?c.K(m,g,u(I)?!!I.capture:!1,D):Mn(c,m,g,!1,I,D)}function Mn(c,m,g,I,D,L){if(!m)throw Error("Invalid event type");var W=u(D)?!!D.capture:!!D,xe=Ys(c);if(xe||(c[mo]=xe=new Gs(c)),g=xe.add(m,g,I,W,L),g.proxy)return g;if(I=Ze(),g.proxy=I,I.src=c,I.listener=g,c.addEventListener)on||(D=W),D===void 0&&(D=!1),c.addEventListener(m.toString(),I,D);else if(c.attachEvent)c.attachEvent(Ln(m.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ze(){function c(g){return m.call(c.src,c.listener,g)}const m=il;return c}function dr(c,m,g,I,D){if(Array.isArray(m))for(var L=0;L<m.length;L++)dr(c,m[L],g,I,D);else I=u(I)?!!I.capture:!!I,g=B(g),c&&c[Tt]?(c=c.i,m=String(m).toString(),m in c.g&&(L=c.g[m],g=fo(L,g,I,D),-1<g&&(Ks(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete c.g[m],c.h--)))):c&&(c=Ys(c))&&(m=c.g[m.toString()],c=-1,m&&(c=fo(m,g,I,D)),(g=-1<c?m[c]:null)&&ts(g))}function ts(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Tt])ho(m.i,c);else{var g=c.type,I=c.proxy;m.removeEventListener?m.removeEventListener(g,I,c.capture):m.detachEvent?m.detachEvent(Ln(g),I):m.addListener&&m.removeListener&&m.removeListener(I),(g=Ys(m))?(ho(g,c),g.h==0&&(g.src=null,m[mo]=null)):Ks(c)}}}function Ln(c){return c in Qs?Qs[c]:Qs[c]="on"+c}function il(c,m){if(c.da)c=!0;else{m=new an(m,this);var g=c.listener,I=c.ha||c.src;c.fa&&ts(c),c=g.call(I,m)}return c}function Ys(c){return c=c[mo],c instanceof Gs?c:null}var Js="__closure_events_fn_"+(1e9*Math.random()>>>0);function B(c){return typeof c=="function"?c:(c[Js]||(c[Js]=function(m){return c.handleEvent(m)}),c[Js])}function H(){ge.call(this),this.i=new Gs(this),this.M=this,this.F=null}w(H,ge),H.prototype[Tt]=!0,H.prototype.removeEventListener=function(c,m,g,I){dr(this,c,m,g,I)};function Z(c,m){var g,I=c.F;if(I)for(g=[];I;I=I.F)g.push(I);if(c=c.M,I=m.type||m,typeof m=="string")m=new Pe(m,c);else if(m instanceof Pe)m.target=m.target||c;else{var D=m;m=new Pe(I,c),N(m,D)}if(D=!0,g)for(var L=g.length-1;0<=L;L--){var W=m.g=g[L];D=Se(W,I,!0,m)&&D}if(W=m.g=c,D=Se(W,I,!0,m)&&D,D=Se(W,I,!1,m)&&D,g)for(L=0;L<g.length;L++)W=m.g=g[L],D=Se(W,I,!1,m)&&D}H.prototype.N=function(){if(H.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],I=0;I<g.length;I++)Ks(g[I]);delete c.g[m],c.h--}}this.F=null},H.prototype.K=function(c,m,g,I){return this.i.add(String(c),m,!1,g,I)},H.prototype.L=function(c,m,g,I){return this.i.add(String(c),m,!0,g,I)};function Se(c,m,g,I){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var D=!0,L=0;L<m.length;++L){var W=m[L];if(W&&!W.da&&W.capture==g){var xe=W.listener,it=W.ha||W.src;W.fa&&ho(c.i,W),D=xe.call(it,I)!==!1&&D}}return D&&!I.defaultPrevented}function Qt(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function Xs(c){c.g=Qt(()=>{c.g=null,c.i&&(c.i=!1,Xs(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class ol extends ge{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(c){ge.call(this),this.h=c,this.g={}}w(ns,ge);var Fp=[];function Up(c){M(c.g,function(m,g){this.g.hasOwnProperty(g)&&ts(m)},c),c.g={}}ns.prototype.N=function(){ns.aa.N.call(this),Up(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ed=a.JSON.stringify,$I=a.JSON.parse,zI=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function td(){}td.prototype.h=null;function Bp(c){return c.h||(c.h=c.i())}function $p(){}var go={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nd(){Pe.call(this,"d")}w(nd,Pe);function rd(){Pe.call(this,"c")}w(rd,Pe);var rs={},zp=null;function al(){return zp=zp||new H}rs.La="serverreachability";function qp(c){Pe.call(this,rs.La,c)}w(qp,Pe);function yo(c){const m=al();Z(m,new qp(m))}rs.STAT_EVENT="statevent";function Wp(c,m){Pe.call(this,rs.STAT_EVENT,c),this.stat=m}w(Wp,Pe);function kt(c){const m=al();Z(m,new Wp(m,c))}rs.Ma="timingevent";function Hp(c,m){Pe.call(this,rs.Ma,c),this.size=m}w(Hp,Pe);function vo(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function qI(c,m,g,I,D,L){c.info(function(){if(c.g)if(L)for(var W="",xe=L.split("&"),it=0;it<xe.length;it++){var he=xe[it].split("=");if(1<he.length){var mt=he[0];he=he[1];var pt=mt.split("_");W=2<=pt.length&&pt[1]=="type"?W+(mt+"="+he+"&"):W+(mt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+I+") [attempt "+D+"]: "+m+`
`+g+`
`+W})}function WI(c,m,g,I,D,L,W){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+D+"]: "+m+`
`+g+`
`+L+" "+W})}function Zs(c,m,g,I){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+KI(c,g)+(I?" "+I:"")})}function HI(c,m){c.info(function(){return"TIMEOUT: "+m})}wo.prototype.info=function(){};function KI(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var I=g[c];if(!(2>I.length)){var D=I[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return ed(g)}catch{return m}}var ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sd;function cl(){}w(cl,td),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},sd=new cl;function hr(c,m,g,I){this.j=c,this.i=m,this.l=g,this.R=I||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gp}function Gp(){this.i=null,this.g="",this.h=!1}var Qp={},id={};function od(c,m,g){c.L=1,c.v=fl(Vn(m)),c.m=g,c.P=!0,Yp(c,null)}function Yp(c,m){c.F=Date.now(),ul(c),c.A=Vn(c.v);var g=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ug(g.i,"t",I),c.C=0,g=c.j.J,c.h=new Gp,c.g=Ng(c.j,g?m:null,!c.m),0<c.O&&(c.M=new ol(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,I=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Fp[0]=D.toString()),D=Fp);for(var L=0;L<D.length;L++){var W=po(g,D[L],I||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),yo(),qI(c.i,c.u,c.A,c.l,c.R,c.m)}hr.prototype.ca=function(c){c=c.target;const m=this.M;m&&Fn(c)==3?m.j():this.Y(c)},hr.prototype.Y=function(c){try{if(c==this.g)e:{const pt=Fn(this.g);var m=this.g.Ba();const ni=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||yg(this.g)))){this.J||pt!=4||m==7||(m==8||0>=ni?yo(3):yo(2)),ad(this);var g=this.g.Z();this.X=g;t:if(Jp(this)){var I=yg(this.g);c="";var D=I.length,L=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),_o(this);var W="";break t}this.h.i=new a.TextDecoder}for(m=0;m<D;m++)this.h.h=!0,c+=this.h.i.decode(I[m],{stream:!(L&&m==D-1)});I.length=0,this.h.g+=c,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,WI(this.i,this.u,this.A,this.l,this.R,pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,it=this.g;if((xe=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(xe)){var he=xe;break t}}he=null}if(g=he)Zs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ld(this,g);else{this.o=!1,this.s=3,kt(12),ss(this),_o(this);break e}}if(this.P){g=!0;let ln;for(;!this.J&&this.C<W.length;)if(ln=GI(this,W),ln==id){pt==4&&(this.s=4,kt(14),g=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Qp){this.s=4,kt(15),Zs(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else Zs(this.i,this.l,ln,null),ld(this,ln);if(Jp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||W.length!=0||this.h.h||(this.s=1,kt(16),g=!1),this.o=this.o&&g,!g)Zs(this.i,this.l,W,"[Invalid Chunked Response]"),ss(this),_o(this);else if(0<W.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),md(mt),mt.M=!0,kt(11))}}else Zs(this.i,this.l,W,null),ld(this,W);pt==4&&ss(this),this.o&&!this.J&&(pt==4?Tg(this.j,this):(this.o=!1,ul(this)))}else dT(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),ss(this),_o(this)}}}catch{}finally{}};function Jp(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function GI(c,m){var g=c.C,I=m.indexOf(`
`,g);return I==-1?id:(g=Number(m.substring(g,I)),isNaN(g)?Qp:(I+=1,I+g>m.length?id:(m=m.slice(I,I+g),c.C=I+g,m)))}hr.prototype.cancel=function(){this.J=!0,ss(this)};function ul(c){c.S=Date.now()+c.I,Xp(c,c.I)}function Xp(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=vo(p(c.ba,c),m)}function ad(c){c.B&&(a.clearTimeout(c.B),c.B=null)}hr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(HI(this.i,this.A),this.L!=2&&(yo(),kt(17)),ss(this),this.s=2,_o(this)):Xp(this,this.S-c)};function _o(c){c.j.G==0||c.J||Tg(c.j,c)}function ss(c){ad(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Up(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function ld(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||cd(g.h,c))){if(!c.K&&cd(g.h,c)&&g.G==3){try{var I=g.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var D=I;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)wl(g),yl(g);else break e;fd(g),kt(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=vo(p(g.Za,g),6e3));if(1>=tg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else os(g,11)}else if((c.K||g.g==c)&&wl(g),!E(m))for(D=g.Da.g.parse(m),m=0;m<D.length;m++){let he=D[m];if(g.T=he[0],he=he[1],g.G==2)if(he[0]=="c"){g.K=he[1],g.ia=he[2];const mt=he[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const pt=he[4];pt!=null&&(g.Aa=pt,g.j.info("SVER="+g.Aa));const ni=he[5];ni!=null&&typeof ni=="number"&&0<ni&&(I=1.5*ni,g.L=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const ln=c.g;if(ln){const xl=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var L=I.h;L.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ud(L,L.h),L.h=null))}if(I.D){const pd=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;pd&&(I.ya=pd,be(I.I,I.D,pd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),I=g;var W=c;if(I.qa=bg(I,I.J?I.ia:null,I.W),W.K){ng(I.h,W);var xe=W,it=I.L;it&&(xe.I=it),xe.B&&(ad(xe),ul(xe)),I.g=W}else Eg(I);0<g.i.length&&vl(g)}else he[0]!="stop"&&he[0]!="close"||os(g,7);else g.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?os(g,7):hd(g):he[0]!="noop"&&g.l&&g.l.ta(he),g.v=0)}}yo(4)}catch{}}var QI=class{constructor(c,m){this.g=c,this.map=m}};function Zp(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function tg(c){return c.h?1:c.g?c.g.size:0}function cd(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function ud(c,m){c.g?c.g.add(m):c.h=m}function ng(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Zp.prototype.cancel=function(){if(this.i=rg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function rg(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return T(c.i)}function YI(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,I=0;I<g;I++)m.push(c[I]);return m}m=[],g=0;for(I in c)m[g++]=c[I];return m}function JI(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const I in c)m[g++]=I;return m}}}function sg(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=JI(c),I=YI(c),D=I.length,L=0;L<D;L++)m.call(void 0,I[L],g&&g[L],c)}var ig=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XI(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var I=c[g].indexOf("="),D=null;if(0<=I){var L=c[g].substring(0,I);D=c[g].substring(I+1)}else L=c[g];m(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function is(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof is){this.h=c.h,dl(this,c.j),this.o=c.o,this.g=c.g,hl(this,c.s),this.l=c.l;var m=c.i,g=new Io;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),og(this,g),this.m=c.m}else c&&(m=String(c).match(ig))?(this.h=!1,dl(this,m[1]||"",!0),this.o=xo(m[2]||""),this.g=xo(m[3]||"",!0),hl(this,m[4]),this.l=xo(m[5]||"",!0),og(this,m[6]||"",!0),this.m=xo(m[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}is.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Eo(m,ag,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Eo(m,ag,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Eo(g,g.charAt(0)=="/"?tT:eT,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Eo(g,rT)),c.join("")};function Vn(c){return new is(c)}function dl(c,m,g){c.j=g?xo(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function hl(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function og(c,m,g){m instanceof Io?(c.i=m,sT(c.i,c.h)):(g||(m=Eo(m,nT)),c.i=new Io(m,c.h))}function be(c,m,g){c.i.set(m,g)}function fl(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xo(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Eo(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,ZI),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ZI(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ag=/[#\/\?@]/g,eT=/[#\?:]/g,tT=/[#\?]/g,nT=/[#\?@]/g,rT=/#/g;function Io(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function fr(c){c.g||(c.g=new Map,c.h=0,c.i&&XI(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Io.prototype,t.add=function(c,m){fr(this),this.i=null,c=ei(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function lg(c,m){fr(c),m=ei(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function cg(c,m){return fr(c),m=ei(c,m),c.g.has(m)}t.forEach=function(c,m){fr(this),this.g.forEach(function(g,I){g.forEach(function(D){c.call(m,D,I,this)},this)},this)},t.na=function(){fr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let I=0;I<m.length;I++){const D=c[I];for(let L=0;L<D.length;L++)g.push(m[I])}return g},t.V=function(c){fr(this);let m=[];if(typeof c=="string")cg(this,c)&&(m=m.concat(this.g.get(ei(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return fr(this),this.i=null,c=ei(this,c),cg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function ug(c,m,g){lg(c,m),0<g.length&&(c.i=null,c.g.set(ei(c,m),T(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var I=m[g];const L=encodeURIComponent(String(I)),W=this.V(I);for(I=0;I<W.length;I++){var D=L;W[I]!==""&&(D+="="+encodeURIComponent(String(W[I]))),c.push(D)}}return this.i=c.join("&")};function ei(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function sT(c,m){m&&!c.j&&(fr(c),c.i=null,c.g.forEach(function(g,I){var D=I.toLowerCase();I!=D&&(lg(this,I),ug(this,D,g))},c)),c.j=m}function iT(c,m){const g=new wo;if(a.Image){const I=new Image;I.onload=y(mr,g,"TestLoadImage: loaded",!0,m,I),I.onerror=y(mr,g,"TestLoadImage: error",!1,m,I),I.onabort=y(mr,g,"TestLoadImage: abort",!1,m,I),I.ontimeout=y(mr,g,"TestLoadImage: timeout",!1,m,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else m(!1)}function oT(c,m){const g=new wo,I=new AbortController,D=setTimeout(()=>{I.abort(),mr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:I.signal}).then(L=>{clearTimeout(D),L.ok?mr(g,"TestPingServer: ok",!0,m):mr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(D),mr(g,"TestPingServer: error",!1,m)})}function mr(c,m,g,I,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),I(g)}catch{}}function aT(){this.g=new zI}function lT(c,m,g){const I=g||"";try{sg(c,function(D,L){let W=D;u(D)&&(W=ed(D)),m.push(I+L+"="+encodeURIComponent(W))})}catch(D){throw m.push(I+"type="+encodeURIComponent("_badmap")),D}}function ml(c){this.l=c.Ub||null,this.j=c.eb||!1}w(ml,td),ml.prototype.g=function(){return new pl(this.l,this.j)},ml.prototype.i=function(c){return function(){return c}}({});function pl(c,m){H.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(pl,H),t=pl.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,ko(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function dg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?To(this):ko(this),this.readyState==3&&dg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,To(this))},t.Qa=function(c){this.g&&(this.response=c,To(this))},t.ga=function(){this.g&&To(this)};function To(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ko(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function ko(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function hg(c){let m="";return M(c,function(g,I){m+=I,m+=":",m+=g,m+=`\r
`}),m}function dd(c,m,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=hg(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):be(c,m,g))}function Ve(c){H.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ve,H);var cT=/^https?$/i,uT=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sd.g(),this.v=this.o?Bp(this.o):Bp(sd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(L){fg(this,L);return}if(c=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var D in I)g.set(D,I[D]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const L of I.keys())g.set(L,I.get(L));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uT,m,void 0))||I||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of g)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gg(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){fg(this,L)}};function fg(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,mg(c),gl(c)}function mg(c){c.A||(c.A=!0,Z(c,"complete"),Z(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Z(this,"complete"),Z(this,"abort"),gl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pg(this):this.bb())},t.bb=function(){pg(this)};function pg(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)Qt(c.Ea,0,c);else if(Z(c,"readystatechange"),Fn(c)==4){c.h=!1;try{const W=c.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var I;if(I=W===0){var D=String(c.D).match(ig)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),I=!cT.test(D?D.toLowerCase():"")}g=I}if(g)Z(c,"complete"),Z(c,"success");else{c.m=6;try{var L=2<Fn(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",mg(c)}}finally{gl(c)}}}}function gl(c,m){if(c.g){gg(c);const g=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Z(c,"ready");try{g.onreadystatechange=I}catch{}}}function gg(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),$I(m)}};function yg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function dT(c){const m={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(E(c[I]))continue;var g=A(c[I]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=m[D]||[];m[D]=L,L.push(g)}S(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function vg(c){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=So("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=So("baseRetryDelayMs",5e3,c),this.cb=So("retryDelaySeedMs",1e4,c),this.Wa=So("forwardChannelMaxRetries",2,c),this.wa=So("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zp(c&&c.concurrentRequestLimit),this.Da=new aT,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vg.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,I){kt(0),this.W=c,this.H=m||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.I=bg(this,null,this.W),vl(this)};function hd(c){if(wg(c),c.G==3){var m=c.U++,g=Vn(c.I);if(be(g,"SID",c.K),be(g,"RID",m),be(g,"TYPE","terminate"),bo(c,g),m=new hr(c,c.j,m),m.L=2,m.v=fl(Vn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=Ng(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ul(m)}Sg(c)}function yl(c){c.g&&(md(c),c.g.cancel(),c.g=null)}function wg(c){yl(c),c.u&&(a.clearTimeout(c.u),c.u=null),wl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function vl(c){if(!eg(c.h)&&!c.s){c.s=!0;var m=c.Ga;Le||re(),K||(Le(),K=!0),J.add(m,c),c.B=0}}function hT(c,m){return tg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=vo(p(c.Ga,c,m),kg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new hr(this,this.j,c);let L=this.o;if(this.S&&(L?(L=v(L),N(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=xg(this,D,m),g=Vn(this.I),be(g,"RID",c),be(g,"CVER",22),this.D&&be(g,"X-HTTP-Session-Id",this.D),bo(this,g),L&&(this.O?m="headers="+encodeURIComponent(String(hg(L)))+"&"+m:this.m&&dd(g,this.m,L)),ud(this.h,D),this.Ua&&be(g,"TYPE","init"),this.P?(be(g,"$req",m),be(g,"SID","null"),D.T=!0,od(D,g,null)):od(D,g,m),this.G=2}}else this.G==3&&(c?_g(this,c):this.i.length==0||eg(this.h)||_g(this))};function _g(c,m){var g;m?g=m.l:g=c.U++;const I=Vn(c.I);be(I,"SID",c.K),be(I,"RID",g),be(I,"AID",c.T),bo(c,I),c.m&&c.o&&dd(I,c.m,c.o),g=new hr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=xg(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ud(c.h,g),od(g,I,m)}function bo(c,m){c.H&&M(c.H,function(g,I){be(m,I,g)}),c.l&&sg({},function(g,I){be(m,I,g)})}function xg(c,m,g){g=Math.min(c.i.length,g);var I=c.l?p(c.l.Na,c.l,c):null;e:{var D=c.i;let L=-1;for(;;){const W=["count="+g];L==-1?0<g?(L=D[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let xe=!0;for(let it=0;it<g;it++){let he=D[it].g;const mt=D[it].map;if(he-=L,0>he)L=Math.max(0,D[it].g-100),xe=!1;else try{lT(mt,W,"req"+he+"_")}catch{I&&I(mt)}}if(xe){I=W.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,I}function Eg(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Le||re(),K||(Le(),K=!0),J.add(m,c),c.v=0}}function fd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=vo(p(c.Fa,c),kg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Ig(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=vo(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),yl(this),Ig(this))};function md(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Ig(c){c.g=new hr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Vn(c.qa);be(m,"RID","rpc"),be(m,"SID",c.K),be(m,"AID",c.T),be(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(m,"TO",c.ja),be(m,"TYPE","xmlhttp"),bo(c,m),c.m&&c.o&&dd(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=fl(Vn(m)),g.m=null,g.P=!0,Yp(g,c)}t.Za=function(){this.C!=null&&(this.C=null,yl(this),fd(this),kt(19))};function wl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Tg(c,m){var g=null;if(c.g==m){wl(c),md(c),c.g=null;var I=2}else if(cd(c.h,m))g=m.D,ng(c.h,m),I=1;else return;if(c.G!=0){if(m.o)if(I==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var D=c.B;I=al(),Z(I,new Hp(I,g)),vl(c)}else Eg(c);else if(D=m.s,D==3||D==0&&0<m.X||!(I==1&&hT(c,m)||I==2&&fd(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),D){case 1:os(c,5);break;case 4:os(c,10);break;case 3:os(c,6);break;default:os(c,2)}}}function kg(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function os(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),I=c.Xa;const D=!I;I=new is(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dl(I,"https"),fl(I),D?iT(I.toString(),g):oT(I.toString(),g)}else kt(2);c.G=0,c.l&&c.l.sa(m),Sg(c),wg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Sg(c){if(c.G=0,c.ka=[],c.l){const m=rg(c.h);(m.length!=0||c.i.length!=0)&&(b(c.ka,m),b(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function bg(c,m,g){var I=g instanceof is?Vn(g):new is(g);if(I.g!="")m&&(I.g=m+"."+I.g),hl(I,I.s);else{var D=a.location;I=D.protocol,m=m?m+"."+D.hostname:D.hostname,D=+D.port;var L=new is(null);I&&dl(L,I),m&&(L.g=m),D&&hl(L,D),g&&(L.l=g),I=L}return g=c.D,m=c.ya,g&&m&&be(I,g,m),be(I,"VER",c.la),bo(c,I),I}function Ng(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Ve(new ml({eb:g})):new Ve(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cg(){}t=Cg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _l(){}_l.prototype.g=function(c,m){return new Ft(c,m)};function Ft(c,m){H.call(this),this.g=new vg(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!E(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!E(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new ti(this)}w(Ft,H),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){hd(this.g)},Ft.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=ed(c),c=g);m.i.push(new QI(m.Ya++,c)),m.G==3&&vl(m)},Ft.prototype.N=function(){this.g.l=null,delete this.j,hd(this.g),delete this.g,Ft.aa.N.call(this)};function Ag(c){nd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}w(Ag,nd);function Rg(){rd.call(this),this.status=1}w(Rg,rd);function ti(c){this.g=c}w(ti,Cg),ti.prototype.ua=function(){Z(this.g,"a")},ti.prototype.ta=function(c){Z(this.g,new Ag(c))},ti.prototype.sa=function(c){Z(this.g,new Rg)},ti.prototype.ra=function(){Z(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,qx=function(){return new _l},zx=function(){return al()},$x=rs,hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ll.NO_ERROR=0,ll.TIMEOUT=8,ll.HTTP_ERROR=6,lc=ll,Kp.COMPLETE="complete",Bx=Kp,$p.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",H.prototype.listen=H.prototype.K,zo=$p,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,Ux=Ve}).apply(typeof Ul<"u"?Ul:typeof self<"u"?self:typeof window<"u"?window:{});const Ry="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Cm("@firebase/firestore");function Mo(){return Ns.logLevel}function Q(t,...e){if(Ns.logLevel<=le.DEBUG){const n=e.map(zm);Ns.debug(`Firestore (${oo}): ${t}`,...n)}}function ir(t,...e){if(Ns.logLevel<=le.ERROR){const n=e.map(zm);Ns.error(`Firestore (${oo}): ${t}`,...n)}}function zi(t,...e){if(Ns.logLevel<=le.WARN){const n=e.map(zm);Ns.warn(`Firestore (${oo}): ${t}`,...n)}}function zm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function de(t,e){t||X()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class $A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zA{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new Wx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new wt(e)}}class qA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new HA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=GA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function qi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Xe(0,0))}static max(){return new ee(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Aa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Aa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Aa{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const QA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Aa{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return QA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(we.fromString(e))}static fromName(e){return new Y(we.fromString(e).popFirst(5))}static empty(){return new Y(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new we(e.slice()))}}function YA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Wr(s,Y.empty(),e)}function JA(t){return new Wr(t.readTime,t.key,-1)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(ee.min(),Y.empty(),-1)}static max(){return new Wr(ee.max(),Y.empty(),-1)}}function XA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==ZA)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function t2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qm.oe=-1;function Qa(t){return t==null}function Hc(t){return t===0&&1/t==-1/0}function n2(t){return typeof t=="number"&&Number.isInteger(t)&&!Hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jy(this.data.getIterator())}getIteratorFrom(e){return new jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new zt([])}unionWith(e){let n=new ut(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Gx("Invalid base64 string: "+i):i}}(e);return new ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const r2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(de(!!t),typeof t=="string"){let e=0;const n=r2.exec(t);if(de(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wm(t){const e=t.mapValue.fields.__previous_value__;return Ru(e)?Wm(e):e}function Ra(t){const e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l={mapValue:{}};function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ru(t)?4:o2(t)?9007199254740991:i2(t)?10:11:X()}function Pn(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Hr(s.timestampValue),a=Hr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cs(s.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),a=Be(i.doubleValue);return o===a?Hc(o)===Hc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return qi(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Py(o)!==Py(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function ja(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function Wi(t,e){if(t===e)return 0;const n=As(t),r=As(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Be(i.integerValue||i.doubleValue),l=Be(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Dy(t.timestampValue,e.timestampValue);case 4:return Dy(Ra(t),Ra(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cs(i),l=Cs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=me(a[u],l[u]);if(h!==0)return h}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(Be(i.latitude),Be(o.latitude));return a!==0?a:me(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Oy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,h;const f=i.fields||{},p=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,T=me(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:Oy(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$l.mapValue&&o===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=me(l[f],h[f]);if(p!==0)return p;const y=Wi(a[l[f]],u[h[f]]);if(y!==0)return y}return me(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function Dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Hr(t),r=Hr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Oy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Wi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Hi(t){return ff(t)}function ff(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ff(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ff(n.fields[o])}`;return s+"}"}(t.mapValue):X()}function Kc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mf(t){return!!t&&"integerValue"in t}function Hm(t){return!!t&&"arrayValue"in t}function My(t){return!!t&&"nullValue"in t}function Ly(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cc(t){return!!t&&"mapValue"in t}function i2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ra(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];cc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Bs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bt(ra(this.value))}}function Qx(t){const e=[];return Bs(t.fields,(n,r)=>{const s=new lt([n]);if(cc(r)){const i=Qx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rt(e,0,ee.min(),ee.min(),ee.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,ee.min(),ee.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,ee.min(),ee.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.position=e,this.inclusive=n}}function Vy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Wi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n="asc"){this.field=e,this.dir=n}}function a2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{}class He extends Yx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new c2(e,n,r):n==="array-contains"?new h2(e,r):n==="in"?new f2(e,r):n==="not-in"?new m2(e,r):n==="array-contains-any"?new p2(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new u2(e,r):new d2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wi(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends Yx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new wn(e,n)}matches(e){return Jx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jx(t){return t.op==="and"}function Xx(t){return l2(t)&&Jx(t)}function l2(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function pf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Hi(t.value);if(Xx(t))return t.filters.map(e=>pf(e)).join(",");{const e=t.filters.map(n=>pf(n)).join(",");return`${t.op}(${e})`}}function Zx(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Pn(r.value,s.value)}(t,e):t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Zx(o,s.filters[a]),!0):!1}(t,e):void X()}function eE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Hi(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(eE).join(" ,")+"}"}(t):"Filter"}class c2 extends He{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class u2 extends He{constructor(e,n){super(e,"in",n),this.keys=tE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class d2 extends He{constructor(e,n){super(e,"not-in",n),this.keys=tE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class h2 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hm(n)&&ja(n.arrayValue,this.value)}}class f2 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ja(this.value.arrayValue,n)}}class m2 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ja(this.value.arrayValue,n)}}class p2 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ja(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Uy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new g2(t,e,n,r,s,i,o)}function Km(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Qa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hi(r)).join(",")),e.ue=n}return e.ue}function Gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!a2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Zx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fy(t.startAt,e.startAt)&&Fy(t.endAt,e.endAt)}function gf(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function y2(t,e,n,r,s,i,o,a){return new $s(t,e,n,r,s,i,o,a)}function Pu(t){return new $s(t)}function By(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qm(t){return t.collectionGroup!==null}function Ai(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ut(lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Da(i,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new Da(lt.keyField(),r))}return e.ce}function An(t){const e=ne(t);return e.le||(e.le=v2(e,Ai(t))),e.le}function v2(t,e){if(t.limitType==="F")return Uy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Da(s.field,i)});const n=t.endAt?new Ki(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ki(t.startAt.position,t.startAt.inclusive):null;return Uy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yf(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gc(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ju(t,e){return Gm(An(t),An(e))&&t.limitType===e.limitType}function nE(t){return`${Km(An(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>eE(s)).join(", ")}]`),Qa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Hi(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ai(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=Vy(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ai(r),s)||r.endAt&&!function(o,a,l){const u=Vy(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ai(r),s))}(t,e)}function w2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rE(t){return(e,n)=>{let r=!1;for(const s of Ai(t)){const i=_2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _2(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Wi(l,u):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Me(Y.comparator);function or(){return x2}const sE=new Me(Y.comparator);function qo(...t){let e=sE;for(const n of t)e=e.insert(n.key,n);return e}function iE(t){let e=sE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return sa()}function oE(){return sa()}function sa(){return new ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const E2=new Me(Y.comparator),I2=new ut(Y.comparator);function ae(...t){let e=I2;for(const n of t)e=e.add(n);return e}const T2=new ut(me);function k2(){return T2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function aE(t){return{integerValue:""+t}}function S2(t,e){return n2(e)?aE(e):Ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this._=void 0}}function b2(t,e,n){return t instanceof Qc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ru(i)&&(i=Wm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Gi?cE(t,e):t instanceof Qi?uE(t,e):function(s,i){const o=lE(s,i),a=$y(o)+$y(s.Pe);return mf(o)&&mf(s.Pe)?aE(a):Ym(s.serializer,a)}(t,e)}function N2(t,e,n){return t instanceof Gi?cE(t,e):t instanceof Qi?uE(t,e):n}function lE(t,e){return t instanceof Yc?function(r){return mf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qc extends Ou{}class Gi extends Ou{constructor(e){super(),this.elements=e}}function cE(t,e){const n=dE(e);for(const r of t.elements)n.some(s=>Pn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Qi extends Ou{constructor(e){super(),this.elements=e}}function uE(t,e){let n=dE(e);for(const r of t.elements)n=n.filter(s=>!Pn(s,r));return{arrayValue:{values:n}}}class Yc extends Ou{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function $y(t){return Be(t.integerValue||t.doubleValue)}function dE(t){return Hm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n){this.field=e,this.transform=n}}function C2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Gi&&s instanceof Gi||r instanceof Qi&&s instanceof Qi?qi(r.elements,s.elements,Pn):r instanceof Yc&&s instanceof Yc?Pn(r.Pe,s.Pe):r instanceof Qc&&s instanceof Qc}(t.transform,e.transform)}class A2{constructor(e,n){this.version=e,this.transformResults=n}}class Ke{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mu{}function fE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ja(t.key,Ke.none()):new Ya(t.key,t.data,Ke.none());{const n=t.data,r=bt.empty();let s=new ut(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new es(t.key,r,new zt(s.toArray()),Ke.none())}}function R2(t,e,n){t instanceof Ya?function(s,i,o){const a=s.value.clone(),l=qy(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof es?function(s,i,o){if(!uc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=qy(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(mE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ia(t,e,n,r){return t instanceof Ya?function(i,o,a,l){if(!uc(i.precondition,o))return a;const u=i.value.clone(),h=Wy(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(i,o,a,l){if(!uc(i.precondition,o))return a;const u=Wy(i.fieldTransforms,l,o),h=o.data;return h.setAll(mE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return uc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function P2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=lE(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qi(r,s,(i,o)=>C2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ya extends Mu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class es extends Mu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qy(t,e,n){const r=new Map;de(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,N2(o,a,n[s]))}return r}function Wy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,b2(i,o,e))}return r}class Ja extends Mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pE extends Mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&R2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=fE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(n,r)=>zy(n,r))&&qi(this.baseMutations,e.baseMutations,(n,r)=>zy(n,r))}}class Jm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length);let s=function(){return E2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ce;function gE(t){switch(t){default:return X();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function yE(t){if(t===void 0)return ir("GRPC error has no .code"),V.UNKNOWN;switch(t){case qe.OK:return V.OK;case qe.CANCELLED:return V.CANCELLED;case qe.UNKNOWN:return V.UNKNOWN;case qe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case qe.INTERNAL:return V.INTERNAL;case qe.UNAVAILABLE:return V.UNAVAILABLE;case qe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case qe.NOT_FOUND:return V.NOT_FOUND;case qe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case qe.ABORTED:return V.ABORTED;case qe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case qe.DATA_LOSS:return V.DATA_LOSS;default:return X()}}(ce=qe||(qe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new xs([4294967295,4294967295],0);function Hy(t){const e=M2().encode(t),n=new Fx;return n.update(e),new Uint8Array(n.digest())}function Ky(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xs([n,r],0),new xs([s,i],0)]}class Xm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=xs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(xs.fromNumber(r)));return s.compare(L2)===1&&(s=new xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Hy(e),[r,s]=Ky(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Hy(e),[r,s]=Ky(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lu(ee.min(),s,new Me(me),or(),ae())}}class Xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xa(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class vE{constructor(e,n){this.targetId=e,this.me=n}}class wE{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Gy{constructor(){this.fe=0,this.ge=Yy(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new Xa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Yy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class V2{constructor(e){this.Le=e,this.Be=new Map,this.ke=or(),this.qe=Qy(),this.Qe=new Me(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(gf(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,rt.newNoDocument(o,ee.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Cs(r).toUint8Array()}catch(l){if(l instanceof Gx)return zi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xm(o,s,i)}catch(l){return zi(l instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&gf(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Lu(e,n,this.Qe,this.ke,r);return this.ke=or(),this.qe=Qy(),this.Qe=new Me(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Gy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Qy(){return new Me(Y.comparator)}function Yy(){return new Me(Y.comparator)}const F2={asc:"ASCENDING",desc:"DESCENDING"},U2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B2={and:"AND",or:"OR"};class $2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vf(t,e){return t.useProto3Json||Qa(e)?e:{value:e}}function Jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _E(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z2(t,e){return Jc(t,e.toTimestamp())}function Wt(t){return de(!!t),ee.fromTimestamp(function(n){const r=Hr(n);return new Xe(r.seconds,r.nanos)}(t))}function Zm(t,e){return wf(t,e).canonicalString()}function wf(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xE(t){const e=we.fromString(t);return de(bE(e)),e}function Xc(t,e){return Zm(t.databaseId,e.path)}function oa(t,e){const n=xE(e);if(n.get(1)!==t.databaseId.projectId)throw new q(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(IE(n))}function EE(t,e){return Zm(t.databaseId,e)}function q2(t){const e=xE(t);return e.length===4?we.emptyPath():IE(e)}function _f(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IE(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jy(t,e,n){return{name:Xc(t,e),fields:n.value.mapValue.fields}}function W2(t,e){return"found"in e?function(r,s){de(!!s.found),s.found.name,s.found.updateTime;const i=oa(r,s.found.name),o=Wt(s.found.updateTime),a=s.found.createTime?Wt(s.found.createTime):ee.min(),l=new bt({mapValue:{fields:s.found.fields}});return rt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){de(!!s.missing),de(!!s.readTime);const i=oa(r,s.missing),o=Wt(s.readTime);return rt.newNoDocument(i,o)}(t,e):X()}function H2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(de(h===void 0||typeof h=="string"),ft.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?V.UNKNOWN:yE(u.code);return new q(h,u.message||"")}(o);n=new wE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=oa(t,r.document.name),i=Wt(r.document.updateTime),o=r.document.createTime?Wt(r.document.createTime):ee.min(),a=new bt({mapValue:{fields:r.document.fields}}),l=rt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new dc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=oa(t,r.document),i=r.readTime?Wt(r.readTime):ee.min(),o=rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new dc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=oa(t,r.document),i=r.removedTargetIds||[];n=new dc([],i,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new O2(s,i),a=r.targetId;n=new vE(a,o)}}return n}function TE(t,e){let n;if(e instanceof Ya)n={update:Jy(t,e.key,e.value)};else if(e instanceof Ja)n={delete:Xc(t,e.key)};else if(e instanceof es)n={update:Jy(t,e.key,e.data),updateMask:tR(e.fieldMask)};else{if(!(e instanceof pE))return X();n={verify:Xc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:z2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function K2(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Wt(s.updateTime):Wt(i);return o.isEqual(ee.min())&&(o=Wt(i)),new A2(o,s.transformResults||[])}(n,e))):[]}function G2(t,e){return{documents:[EE(t,e.path)]}}function Q2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=EE(t,s);const i=function(u){if(u.length!==0)return SE(wn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:oi(p.field),direction:X2(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function Y2(t){let e=q2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=kE(f);return p instanceof wn&&Xx(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Da(ai(w.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Qa(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,y=f.values||[];return new Ki(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new Ki(y,p)}(n.endAt)),y2(e,s,o,i,a,"F",l,u)}function J2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ai(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ai(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ai(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ai(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return He.create(ai(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>kE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function X2(t){return F2[t]}function Z2(t){return U2[t]}function eR(t){return B2[t]}function oi(t){return{fieldPath:t.canonicalString()}}function ai(t){return lt.fromServerFormat(t.fieldPath)}function SE(t){return t instanceof He?function(n){if(n.op==="=="){if(Ly(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(My(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ly(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(My(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:Z2(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(s=>SE(s));return r.length===1?r[0]:{compositeFilter:{op:eR(n.op),filters:r}}}(t):X()}function tR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.ct=e}}function rR(t){const e=Y2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.un=new iR}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Wr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class iR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ut(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ut(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yi(0)}static kn(){return new Yi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.changes=new ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ia(r.mutation,s,zt.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=or();const o=sa(),a=function(){return sa()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof es)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ia(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):o.set(u.key,zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new aR(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sa();let s=new Me((o,a)=>o-a),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||zt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||ae()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=oE();h.forEach(p=>{if(!i.has(p)){const y=fE(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(ms());let a=-1,l=i;return o.next(u=>$.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,ae())).next(h=>({batchId:a,changes:iE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qo();return this.indexManager.getCollectionParents(e,i).next(a=>$.forEach(a,l=>{const u=function(f,p){return new $s(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,rt.newInvalidDocument(h)))});let a=qo();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&ia(h.mutation,u,zt.empty(),Xe.now()),Du(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Wt(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:rR(s.bundledQuery),readTime:Wt(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.overlays=new Me(Y.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=ms(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Me((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ms(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ms(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return $.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new D2(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.Tr=new ut(tt.Er),this.dr=new ut(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new we([])),r=new tt(n,e),s=new tt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new we([])),r=new tt(n,e),s=new tt(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(tt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new j2(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new tt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),s=new tt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(me);return n.forEach(s=>{const i=new tt(s,0),o=new tt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new tt(new Y(i),0);let a=new ut(me);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.wr)),!0)},o),$.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tt(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.Mr=e,this.docs=function(){return new Me(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||XA(JA(h),r)<=0||(s.has(h.key)||Du(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mR(this)}getSize(e){return $.resolve(this.size)}}class mR extends oR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.persistence=e,this.Nr=new ao(n=>Km(n),Gm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ep,this.targetCount=0,this.kr=Yi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qm(0),this.Kr=!1,this.Kr=!0,this.$r=new dR,this.referenceDelegate=e(this),this.Ur=new pR(this),this.indexManager=new sR,this.remoteDocumentCache=function(s){return new fR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new nR(n),this.Gr=new cR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new hR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new yR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yR extends e2{constructor(e){super(),this.currentSequenceNumber=e}}class tp{constructor(e){this.persistence=e,this.Jr=new ep,this.Yr=null}static Zr(e){return new tp(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new np(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return db()?8:t2(It())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new vR;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Mo()<=le.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Mo()<=le.DEBUG&&Q("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Mo()<=le.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):$.resolve())}Yi(e,n){if(By(n))return $.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gc(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Gc(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,s){return By(n)||s.isEqual(ee.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(Mo()<=le.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ii(n)),this.rs(e,o,n,YA(s,-1)).next(a=>a))})}ts(e,n){let r=new ut(rE(e));return n.forEach((s,i)=>{Du(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Mo()<=le.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ii(n)),this.Ji.getDocumentsMatchingQuery(e,n,Wr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Me(me),this._s=new ao(i=>Km(i),Gm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function xR(t,e,n,r){return new _R(t,e,n,r)}async function NE(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ae();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function ER(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let y=$.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(l,w)).next(T=>{const b=u.docVersions.get(w);de(b!==null),T.version.compareTo(b)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function CE(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function IR(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(T,b,_){return T.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=or(),u=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(TR(i,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.os=s,i))}function TR(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function kR(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SR(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function xf(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ga(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Xy(t,e,n){const r=ne(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=ne(l),p=f._s.get(h);return p!==void 0?$.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)}(r,o,An(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(a=>(bR(r,w2(e),a),{documents:a,Ts:i})))}function bR(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Zy{constructor(){this.activeTargetIds=k2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NR{constructor(){this.so=new Zy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl=null;function Xd(){return zl===null?zl=function(){return 268435456+Math.round(2147483648*Math.random())}():zl++,"0x"+zl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class PR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Xd(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,l,u,s).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw zi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=AR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Xd();return new Promise((o,a)=>{const l=new Ux;l.setWithCredentials(!0),l.listenOnce(Bx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lc.NO_ERROR:const h=l.getResponseJson();Q(vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case lc.TIMEOUT:Q(vt,`RPC '${e}' ${i} timed out`),a(new q(V.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:const f=l.getStatus();if(Q(vt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const w=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(_)>=0?_:V.UNKNOWN}(y.status);a(new q(w,y.message))}else a(new q(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(V.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{Q(vt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);Q(vt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Xd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qx(),a=zx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");Q(vt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,y=!1;const w=new RR({Io:b=>{y?Q(vt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(Q(vt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Q(vt,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},To:()=>f.close()}),T=(b,_,E)=>{b.listen(_,x=>{try{E(x)}catch(R){setTimeout(()=>{throw R},0)}})};return T(f,zo.EventType.OPEN,()=>{y||(Q(vt,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),T(f,zo.EventType.CLOSE,()=>{y||(y=!0,Q(vt,`RPC '${e}' stream ${s} transport closed`),w.So())}),T(f,zo.EventType.ERROR,b=>{y||(y=!0,zi(vt,`RPC '${e}' stream ${s} transport errored:`,b),w.So(new q(V.UNAVAILABLE,"The operation could not be completed")))}),T(f,zo.EventType.MESSAGE,b=>{var _;if(!y){const E=b.data[0];de(!!E);const x=E,R=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(R){Q(vt,`RPC '${e}' stream ${s} received error:`,R);const O=R.status;let M=function(k){const N=qe[k];if(N!==void 0)return yE(N)}(O),S=R.message;M===void 0&&(M=V.INTERNAL,S="Unknown error status: "+O+" with message "+R.message),y=!0,w.So(new q(M,S)),f.close()}else Q(vt,`RPC '${e}' stream ${s} received:`,E),w.bo(E)}}),T(a,$x.STAT_EVENT,b=>{b.stat===hf.PROXY?Q(vt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===hf.NOPROXY&&Q(vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return new $2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jR extends AE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=H2(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Wt(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_f(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=gf(l)?{documents:G2(i,l)}:{query:Q2(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_E(i,o.resumeToken);const u=vf(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Jc(i,o.snapshotVersion.toTimestamp());const u=vf(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=J2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_f(this.serializer),n.removeTarget=e,this.a_(n)}}class DR extends AE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=K2(e.writeResults,e.commitTime),r=Wt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_f(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,wf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,wf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class MR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{zs(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ne(l);u.L_.add(4),await Za(u),u.q_.set("Unknown"),u.L_.delete(4),await Fu(u)}(this))})}),this.q_=new MR(r,s)}}async function Fu(t){if(zs(t))for(const e of t.B_)await e(!0)}async function Za(t){for(const e of t.B_)await e(!1)}function RE(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ap(n)?op(n):lo(n).r_()&&ip(n,e))}function sp(t,e){const n=ne(t),r=lo(n);n.N_.delete(e),r.r_()&&PE(n,e),n.N_.size===0&&(r.r_()?r.o_():zs(n)&&n.q_.set("Unknown"))}function ip(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lo(t).A_(e)}function PE(t,e){t.Q_.xe(e),lo(t).R_(e)}function op(t){t.Q_=new V2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),lo(t).start(),t.q_.v_()}function ap(t){return zs(t)&&!lo(t).n_()&&t.N_.size>0}function zs(t){return ne(t).L_.size===0}function jE(t){t.Q_=void 0}async function VR(t){t.q_.set("Online")}async function FR(t){t.N_.forEach((e,n)=>{ip(t,e)})}async function UR(t,e){jE(t),ap(t)?(t.q_.M_(e),op(t)):t.q_.set("Unknown")}async function BR(t,e,n){if(t.q_.set("Online"),e instanceof wE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zc(t,r)}else if(e instanceof dc?t.Q_.Ke(e):e instanceof vE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await CE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),PE(i,l);const f=new Cr(h.target,l,u,h.sequenceNumber);ip(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Zc(t,r)}}async function Zc(t,e,n){if(!Ga(e))throw e;t.L_.add(1),await Za(t),t.q_.set("Offline"),n||(n=()=>CE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fu(t)})}function DE(t,e){return e().catch(n=>Zc(t,n,e))}async function Uu(t){const e=ne(t),n=Kr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$R(e);)try{const s=await kR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,zR(e,s)}catch(s){await Zc(e,s)}OE(e)&&ME(e)}function $R(t){return zs(t)&&t.O_.length<10}function zR(t,e){t.O_.push(e);const n=Kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function OE(t){return zs(t)&&!Kr(t).n_()&&t.O_.length>0}function ME(t){Kr(t).start()}async function qR(t){Kr(t).p_()}async function WR(t){const e=Kr(t);for(const n of t.O_)e.m_(n.mutations)}async function HR(t,e,n){const r=t.O_.shift(),s=Jm.from(r,e,n);await DE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Uu(t)}async function KR(t,e){e&&Kr(t).V_&&await async function(r,s){if(function(o){return gE(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Kr(r).s_(),await DE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Uu(r)}}(t,e),OE(t)&&ME(t)}async function tv(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=zs(n);n.L_.add(3),await Za(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fu(n)}async function GR(t,e){const n=ne(t);e?(n.L_.delete(2),await Fu(n)):e||(n.L_.add(2),await Za(n),n.q_.set("Unknown"))}function lo(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new jR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VR.bind(null,t),Ro:FR.bind(null,t),mo:UR.bind(null,t),d_:BR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ap(t)?op(t):t.q_.set("Unknown")):(await t.K_.stop(),jE(t))})),t.K_}function Kr(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new DR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qR.bind(null,t),mo:KR.bind(null,t),f_:WR.bind(null,t),g_:HR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Uu(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new lp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cp(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Ga(t))return new q(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=qo(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new Ri(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ri)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ri;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.W_=new Me(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ji{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ji(e,n,Ri.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class YR{constructor(){this.queries=rv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=rv(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(V.ABORTED,"Firestore shutting down"))}}function rv(){return new ao(t=>nE(t),ju)}async function up(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new QR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=cp(o,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&hp(n)}async function dp(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JR(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&hp(n)}function XR(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function hp(t){t.Y_.forEach(e=>{e.next()})}var Ef,sv;(sv=Ef||(Ef={})).ea="default",sv.Cache="cache";class fp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.key=e}}class VE{constructor(e){this.key=e}}class ZR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=rE(e),this.Ra=new Ri(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new nv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),y=Du(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;p&&y?p.data.isEqual(y.data)?w!==T&&(r.track({type:3,doc:y}),b=!0):this.ga(p,y)||(r.track({type:2,doc:y}),b=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),b=!0):p&&!y&&(r.track({type:1,doc:p}),b=!0,(l||u)&&(a=!0)),b&&(y?(o=o.add(y),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,w){const T=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return T(y)-T(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Ji(this.query,e.Ra,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new VE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new LE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ji.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tP{constructor(e){this.key=e,this.va=!1}}class nP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ao(a=>nE(a),ju),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(Y.comparator),this.Na=new Map,this.La=new ep,this.Ba={},this.ka=new Map,this.qa=Yi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rP(t,e,n=!0){const r=qE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await FE(r,e,n,!0),s}async function sP(t,e){const n=qE(t);await FE(n,e,!0,!1)}async function FE(t,e,n,r){const s=await SR(t.localStore,An(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await iP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&RE(t.remoteStore,s),a}async function iP(t,e,n,r,s){t.Ka=(f,p,y)=>async function(T,b,_,E){let x=b.view.ma(_);x.ns&&(x=await Xy(T.localStore,b.query,!1).then(({documents:S})=>b.view.ma(S,x)));const R=E&&E.targetChanges.get(b.targetId),O=E&&E.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(x,T.isPrimaryClient,R,O);return ov(T,b.targetId,M.wa),M.snapshot}(t,f,p,y);const i=await Xy(t.localStore,e,!0),o=new ZR(e,i.Ts),a=o.ma(i.documents),l=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);ov(t,n,u.wa);const h=new eP(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function oP(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!ju(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sp(r.remoteStore,s.targetId),If(r,s.targetId)}).catch(Ka)):(If(r,s.targetId),await xf(r.localStore,s.targetId,!0))}async function aP(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sp(n.remoteStore,r.targetId))}async function lP(t,e,n){const r=pP(t);try{const s=await function(o,a){const l=ne(o),u=Xe.now(),h=a.reduce((y,w)=>y.add(w.key),ae());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=or(),T=ae();return l.cs.getEntries(y,h).next(b=>{w=b,w.forEach((_,E)=>{E.isValidDocument()||(T=T.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(b=>{f=b;const _=[];for(const E of a){const x=P2(E,f.get(E.key).overlayedDocument);x!=null&&_.push(new es(E.key,x,Qx(x.value.mapValue),Ke.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,_,a)}).next(b=>{p=b;const _=b.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(y,b.batchId,_)})}).then(()=>({batchId:p.batchId,changes:iE(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Me(me)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await el(r,s.changes),await Uu(r.remoteStore)}catch(s){const i=cp(s,"Failed to persist write");n.reject(i)}}async function UE(t,e){const n=ne(t);try{const r=await IR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?de(o.va):s.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await el(n,r,e)}catch(r){await Ka(r)}}function iv(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&hp(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cP(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Me(Y.comparator);o=o.insert(i,rt.newNoDocument(i,ee.min()));const a=ae().add(i),l=new Lu(ee.min(),new Map,new Me(me),o,a);await UE(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),mp(r)}else await xf(r.localStore,e,!1).then(()=>If(r,e,n)).catch(Ka)}async function uP(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await ER(n.localStore,e);$E(n,r,null),BE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await el(n,s)}catch(s){await Ka(s)}}async function dP(t,e,n){const r=ne(t);try{const s=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(de(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);$E(r,e,n),BE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await el(r,s)}catch(s){await Ka(s)}}function BE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function $E(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function If(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zE(t,r)})}function zE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),mp(t))}function ov(t,e,n){for(const r of n)r instanceof LE?(t.La.addReference(r.key,e),hP(t,r)):r instanceof VE?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zE(t,r.key)):X()}function hP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),mp(t))}function mp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(we.fromString(e)),r=t.qa.next();t.Na.set(r,new tP(n)),t.Oa=t.Oa.insert(n,r),RE(t.remoteStore,new Cr(An(Pu(n.path)),r,"TargetPurposeLimboResolution",qm.oe))}}async function el(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=np.Wi(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,u){const h=ne(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(u,p=>$.forEach(p.$i,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>$.forEach(p.Ui,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!Ga(f))throw f;Q("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.os.get(p),w=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(p,T)}}}(r.localStore,i))}async function fP(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await NE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await el(n,r.hs)}}function mP(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function qE(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cP.bind(null,e),e.Ca.d_=JR.bind(null,e.eventManager),e.Ca.$a=XR.bind(null,e.eventManager),e}function pP(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return xR(this.persistence,new wR,e.initialUser,this.serializer)}Ga(e){return new gR(tp.Zr,this.serializer)}Wa(e){return new NR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class Tf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await GR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YR}()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),r=function(i){return new PR(i)}(e.databaseInfo);return function(i,o,a,l){return new OR(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new LR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>iv(this.syncEngine,n,0),function(){return ev.D()?new ev:new CR}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new nP(s,i,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Za(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tf.provider={build:()=>new Tf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=ne(s),a={documents:i.map(f=>Xc(o.serializer,f))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,we.emptyPath(),a,i.length),u=new Map;l.forEach(f=>{const p=W2(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return i.forEach(f=>{const p=u.get(f.toString());de(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ja(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new pE(s,this.precondition(s)))}),await async function(r,s){const i=ne(r),o={writes:s.map(a=>TE(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,we.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X();n=ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ee.min())?Ke.exists(!1):Ke.updateTime(n):Ke.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ee.min()))throw new q(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(n)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new rp(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new gP(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Qa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gE(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=wt.UNAUTHENTICATED,this.clientId=Hx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eh(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await NE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function av(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wP(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>tv(e.remoteStore,s)),t._onlineComponents=e}async function wP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;zi("Error using user provided cache. Falling back to memory cache: "+n),await eh(t,new eu)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await eh(t,new eu);return t._offlineComponents}async function gp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await av(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await av(t,new Tf))),t._onlineComponents}function _P(t){return gp(t).then(e=>e.syncEngine)}function xP(t){return gp(t).then(e=>e.datastore)}async function tu(t){const e=await gp(t),n=e.eventManager;return n.onListen=rP.bind(null,e.syncEngine),n.onUnlisten=oP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aP.bind(null,e.syncEngine),n}function EP(t,e,n={}){const r=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new pp({next:p=>{h.Za(),o.enqueueAndForget(()=>dp(i,f));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new q(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?u.reject(new q(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new fp(Pu(a.path),h,{includeMetadataChanges:!0,_a:!0});return up(i,f)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}function IP(t,e,n={}){const r=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new pp({next:p=>{h.Za(),o.enqueueAndForget(()=>dp(i,f)),p.fromCache&&l.source==="server"?u.reject(new q(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new fp(a,h,{includeMetadataChanges:!0,_a:!0});return up(i,f)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e,n){if(!n)throw new q(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TP(t,e,n,r){if(e===!0&&r===!0)throw new q(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cv(t){if(!Y.isDocumentKey(t))throw new q(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uv(t){if(Y.isDocumentKey(t))throw new q(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function xt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bu(t);throw new q(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kP(t,e){if(e<=0)throw new q(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $u{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BA;switch(r.type){case"firstParty":return new WA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),lv.delete(n),r.terminate())}(this),Promise.resolve()}}function SP(t,e,n,r={}){var s;const i=(t=xt(t,$u))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=sb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new q(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(u)}t._authCredentials=new $A(new Wx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dn(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}}class $r extends Dn{constructor(e,n,r){super(e,n,Pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new Y(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function pe(t,e,...n){if(t=ke(t),HE("collection","path",e),t instanceof $u){const r=we.fromString(e,...n);return uv(r),new $r(t,null,r)}{if(!(t instanceof dt||t instanceof $r))throw new q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return uv(r),new $r(t.firestore,null,r)}}function se(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Hx.newId()),HE("doc","path",e),t instanceof $u){const r=we.fromString(e,...n);return cv(r),new dt(t,null,new Y(r))}{if(!(t instanceof dt||t instanceof $r))throw new q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return cv(r),new dt(t.firestore,t instanceof $r?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rp(this,"async_queue_retry"),this.Vu=()=>{const r=Zd();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Cn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ir("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=lp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function fv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _n extends $u{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new hv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hv(e),this._firestoreClient=void 0,await e}}}function bP(t,e){const n=typeof t=="object"?t:Rm(),r=typeof t=="string"?t:"(default)",s=ro(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nb("firestore");i&&SP(s,...i)}return s}function co(t){if(t._terminated)throw new q(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NP(t),t._firestoreClient}function NP(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new s2(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new vP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(ft.fromBase64String(e))}catch(n){throw new q(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rs(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function KE(){return new qs("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=/^__.*__$/;class AP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ya(e,this.data,n,this.fieldTransforms)}}class GE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class zu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QE(this.Cu)&&CP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class RP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vu(e)}Qu(e,n,r,s=!1){return new zu({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ws(t){const e=t._freezeSettings(),n=Vu(t._databaseId);return new RP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qu(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ip("Data must be an object, but it was:",o,r);const a=XE(r,o);let l,u;if(i.merge)l=new zt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=kf(e,f,n);if(!o.contains(p))throw new q(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);eI(h,p)||h.push(p)}l=new zt(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new AP(new bt(a),l,u)}class Wu extends tl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wu}}function YE(t,e,n){return new zu({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wp extends tl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=YE(this,e,!0),r=this.Ku.map(i=>Hs(i,n)),s=new Gi(r);return new hE(e.path,s)}isEqual(e){return e instanceof wp&&Bi(this.Ku,e.Ku)}}class _p extends tl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=YE(this,e,!0),r=this.Ku.map(i=>Hs(i,n)),s=new Qi(r);return new hE(e.path,s)}isEqual(e){return e instanceof _p&&Bi(this.Ku,e.Ku)}}function xp(t,e,n,r){const s=t.Qu(1,e,n);Ip("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();Bs(r,(l,u)=>{const h=Tp(e,l,n);u=ke(u);const f=s.Nu(h);if(u instanceof Wu)i.push(h);else{const p=Hs(u,f);p!=null&&(i.push(h),o.set(h,p))}});const a=new zt(i);return new GE(o,a,s.fieldTransforms)}function Ep(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[kf(e,r,n)],l=[s];if(i.length%2!=0)throw new q(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(kf(e,i[p])),l.push(i[p+1]);const u=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!eI(u,a[p])){const y=a[p];let w=l[p];w=ke(w);const T=o.Nu(y);if(w instanceof Wu)u.push(y);else{const b=Hs(w,T);b!=null&&(u.push(y),h.set(y,b))}}const f=new zt(u);return new GE(h,f,o.fieldTransforms)}function JE(t,e,n,r=!1){return Hs(n,t.Qu(r?4:3,e))}function Hs(t,e){if(ZE(t=ke(t)))return Ip("Unsupported field value:",e,t),XE(t,e);if(t instanceof tl)return function(r,s){if(!QE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Hs(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return S2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Jc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jc(s.serializer,i)}}if(r instanceof yp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rs)return{bytesValue:_E(s.serializer,r._byteString)};if(r instanceof dt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ym(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Bu(r)}`)}(t,e)}function XE(t,e){const n={};return Kx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(r,s)=>{const i=Hs(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ZE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof yp||t instanceof Rs||t instanceof dt||t instanceof tl||t instanceof vp)}function Ip(t,e,n){if(!ZE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Bu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function kf(t,e,n){if((e=ke(e))instanceof qs)return e._internalPath;if(typeof e=="string")return Tp(t,e);throw nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const PP=new RegExp("[~\\*/\\[\\]]");function Tp(t,e,n){if(e.search(PP)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qs(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(V.INVALID_ARGUMENT,a+t+l)}function eI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jP extends Oa{data(){return super.data()}}function Hu(t,e){return typeof e=="string"?Tp(t,e):e instanceof qs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class Ku extends kp{}function Ee(t,e,...n){let r=[];e instanceof kp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Sp).length,a=i.filter(l=>l instanceof Gu).length;if(o>1||o>0&&a>0)throw new q(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Gu extends Ku{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gu(e,n,r)}_apply(e){const n=this._parse(e);return nI(e._query,n),new Dn(e.firestore,e.converter,yf(e._query,n))}_parse(e){const n=Ws(e.firestore);return function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){pv(f,h);const y=[];for(const w of f)y.push(mv(l,i,w));p={arrayValue:{values:y}}}else p=mv(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||pv(f,h),p=JE(a,o,f,h==="in"||h==="not-in");return He.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fe(t,e,n){const r=e,s=Hu("where",t);return Gu._create(s,r,n)}class Sp extends kp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)nI(o,l),o=yf(o,l)}(e._query,n),new Dn(e.firestore,e.converter,yf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bp extends Ku{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Da(i,o)}(e._query,this._field,this._direction);return new Dn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new $s(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Tr(t,e="asc"){const n=e,r=Hu("orderBy",t);return bp._create(r,n)}class Np extends Ku{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Np(e,n,r)}_apply(e){return new Dn(e.firestore,e.converter,Gc(e._query,this._limit,this._limitType))}}function Pi(t){return kP("limit",t),Np._create("limit",t,"F")}class Cp extends Ku{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cp(e,n,r)}_apply(e){const n=OP(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(s,i){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function DP(...t){return Cp._create("startAfter",t,!1)}function OP(t,e,n,r){if(n[0]=ke(n[0]),n[0]instanceof Oa)return function(i,o,a,l,u){if(!l)throw new q(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Ai(i))if(f.field.isKeyField())h.push(Kc(o,l.key));else{const p=l.data.field(f.field);if(Ru(p))throw new q(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=f.field.canonicalString();throw new q(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ki(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ws(t.firestore);return function(o,a,l,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(V.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let w=0;w<h.length;w++){const T=h[w];if(p[w].field.isKeyField()){if(typeof T!="string")throw new q(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!Qm(o)&&T.indexOf("/")!==-1)throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);const b=o.path.child(we.fromString(T));if(!Y.isDocumentKey(b))throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const _=new Y(b);y.push(Kc(a,_))}else{const b=JE(l,u,T);y.push(b)}}return new Ki(y,f)}(t._query,t.firestore._databaseId,s,e,n,r)}}function mv(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new q(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qm(e)&&n.indexOf("/")!==-1)throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!Y.isDocumentKey(r))throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kc(t,new Y(r))}if(n instanceof dt)return Kc(t,n._key);throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bu(n)}.`)}function pv(t,e){if(!Array.isArray(t)||t.length===0)throw new q(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rI{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Be(o.doubleValue));return new vp(i)}convertGeoPoint(e){return new yp(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);de(bE(r));const s=new Pa(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class MP extends rI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ap extends Oa{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hc extends Ap{data(e={}){return super.data(e)}}class sI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new _i(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hc(this._firestore,this._userDataWriter,r.key,r,new _i(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new hc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new _i(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new hc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new _i(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:LP(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t){t=xt(t,dt);const e=xt(t.firestore,_n);return EP(co(e),t._key).then(n=>oI(e,t,n))}class Yu extends rI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function Ie(t){t=xt(t,Dn);const e=xt(t.firestore,_n),n=co(e),r=new Yu(e);return tI(t._query),IP(n,t._query).then(s=>new sI(e,r,t,s))}function iI(t,e,n){t=xt(t,dt);const r=xt(t.firestore,_n),s=Qu(t.converter,e,n);return nl(r,[qu(Ws(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ke.none())])}function ji(t,e,n,...r){t=xt(t,dt);const s=xt(t.firestore,_n),i=Ws(s);let o;return o=typeof(e=ke(e))=="string"||e instanceof qs?Ep(i,"updateDoc",t._key,e,n,r):xp(i,"updateDoc",t._key,e),nl(s,[o.toMutation(t._key,Ke.exists(!0))])}function VP(t){return nl(xt(t.firestore,_n),[new Ja(t._key,Ke.none())])}function Sf(t,e){const n=xt(t.firestore,_n),r=se(t),s=Qu(t.converter,e);return nl(n,[qu(Ws(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ke.exists(!1))]).then(()=>r)}function FP(t,...e){var n,r,s;t=ke(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fv(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(fv(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,u,h;if(t instanceof dt)u=xt(t.firestore,_n),h=Pu(t._key.path),l={next:f=>{e[o]&&e[o](oI(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=xt(t,Dn);u=xt(f.firestore,_n),h=f._query;const p=new Yu(u);l={next:y=>{e[o]&&e[o](new sI(u,p,f,y))},error:e[o+1],complete:e[o+2]},tI(t._query)}return function(p,y,w,T){const b=new pp(T),_=new fp(y,b,w);return p.asyncQueue.enqueueAndForget(async()=>up(await tu(p),_)),()=>{b.Za(),p.asyncQueue.enqueueAndForget(async()=>dp(await tu(p),_))}}(co(u),h,a,l)}function nl(t,e){return function(r,s){const i=new Cn;return r.asyncQueue.enqueueAndForget(async()=>lP(await _P(r),s,i)),i.promise}(co(t),e)}function oI(t,e,n){const r=n.docs.get(e._key),s=new Yu(t);return new Ap(t,s,e._key,r,new _i(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ws(e)}set(e,n,r){this._verifyNotCommitted();const s=kr(e,this._firestore),i=Qu(s.converter,n,r),o=qu(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ke.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=kr(e,this._firestore);let o;return o=typeof(n=ke(n))=="string"||n instanceof qs?Ep(this._dataReader,"WriteBatch.update",i._key,n,r,s):xp(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=kr(e,this._firestore);return this._mutations=this._mutations.concat(new Ja(n._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kr(t,e){if((t=ke(t)).firestore!==e)throw new q(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ws(n)}get(n){const r=kr(n,this._firestore),s=new MP(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return X();const o=i[0];if(o.isFoundDocument())return new Oa(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Oa(this._firestore,s,r._key,null,r.converter);throw X()})}set(n,r,s){const i=kr(n,this._firestore),o=Qu(i.converter,r,s),a=qu(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=kr(n,this._firestore);let a;return a=typeof(r=ke(r))=="string"||r instanceof qs?Ep(this._dataReader,"Transaction.update",o._key,r,s,i):xp(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=kr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=kr(e,this._firestore),r=new Yu(this._firestore);return super.get(e).then(s=>new Ap(this._firestore,r,n._key,s._document,new _i(!1,!1),n.converter))}}function si(t,e,n){t=xt(t,_n);const r=Object.assign(Object.assign({},UP),n);return function(i){if(i.maxAttempts<1)throw new q(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new Cn;return i.asyncQueue.enqueueAndForget(async()=>{const u=await xP(i);new yP(i.asyncQueue,u,a,o,l).au()}),l.promise}(co(t),s=>e(new $P(t,s)),r)}function aI(...t){return new wp("arrayUnion",t)}function bf(...t){return new _p("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){return co(t=xt(t,_n)),new BP(t,e=>nl(t,e))}(function(e,n=!0){(function(s){oo=s})(so),Rn(new vn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _n(new zA(r.getProvider("auth-internal")),new KA(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),en(Ry,"4.7.3",e),en(Ry,"4.7.3","esm2017")})();const lI="@firebase/installations",Rp="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=1e4,uI=`w:${Rp}`,dI="FIS_v2",zP="https://firebaseinstallations.googleapis.com/v1",qP=60*60*1e3,WP="installations",HP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ps=new Vs(WP,HP,KP);function hI(t){return t instanceof jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI({projectId:t}){return`${zP}/projects/${t}/installations`}function mI(t){return{token:t.token,requestStatus:2,expiresIn:QP(t.expiresIn),creationTime:Date.now()}}async function pI(t,e){const r=(await e.json()).error;return Ps.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function gI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function GP(t,{refreshToken:e}){const n=gI(t);return n.append("Authorization",YP(e)),n}async function yI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function QP(t){return Number(t.replace("s","000"))}function YP(t){return`${dI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=fI(t),s=gI(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:dI,appId:t.appId,sdkVersion:uI},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await yI(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:mI(u.authToken)}}else throw await pI("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^[cdef][\w-]{21}$/,Nf="";function ej(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=tj(t);return ZP.test(n)?n:Nf}catch{return Nf}}function tj(t){return XP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Map;function _I(t,e){const n=Ju(t);xI(n,e),nj(n,e)}function xI(t,e){const n=wI.get(t);if(n)for(const r of n)r(e)}function nj(t,e){const n=rj();n&&n.postMessage({key:t,fid:e}),sj()}let gs=null;function rj(){return!gs&&"BroadcastChannel"in self&&(gs=new BroadcastChannel("[Firebase] FID Change"),gs.onmessage=t=>{xI(t.data.key,t.data.fid)}),gs}function sj(){wI.size===0&&gs&&(gs.close(),gs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="firebase-installations-database",oj=1,js="firebase-installations-store";let th=null;function Pp(){return th||(th=Su(ij,oj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(js)}}})),th}async function ru(t,e){const n=Ju(t),s=(await Pp()).transaction(js,"readwrite"),i=s.objectStore(js),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&_I(t,e.fid),e}async function EI(t){const e=Ju(t),r=(await Pp()).transaction(js,"readwrite");await r.objectStore(js).delete(e),await r.done}async function Xu(t,e){const n=Ju(t),s=(await Pp()).transaction(js,"readwrite"),i=s.objectStore(js),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&_I(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp(t){let e;const n=await Xu(t.appConfig,r=>{const s=aj(r),i=lj(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Nf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function aj(t){const e=t||{fid:ej(),registrationStatus:0};return II(e)}function lj(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ps.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cj(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uj(t)}:{installationEntry:e}}async function cj(t,e){try{const n=await JP(t,e);return ru(t.appConfig,n)}catch(n){throw hI(n)&&n.customData.serverCode===409?await EI(t.appConfig):await ru(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function uj(t){let e=await gv(t.appConfig);for(;e.registrationStatus===1;)await vI(100),e=await gv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await jp(t);return r||n}return e}function gv(t){return Xu(t,e=>{if(!e)throw Ps.create("installation-not-found");return II(e)})}function II(t){return dj(t)?{fid:t.fid,registrationStatus:0}:t}function dj(t){return t.registrationStatus===1&&t.registrationTime+cI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj({appConfig:t,heartbeatServiceProvider:e},n){const r=fj(t,n),s=GP(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:uI,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await yI(()=>fetch(r,a));if(l.ok){const u=await l.json();return mI(u)}else throw await pI("Generate Auth Token",l)}function fj(t,{fid:e}){return`${fI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t,e=!1){let n;const r=await Xu(t.appConfig,i=>{if(!TI(i))throw Ps.create("not-registered");const o=i.authToken;if(!e&&gj(o))return i;if(o.requestStatus===1)return n=mj(t,e),i;{if(!navigator.onLine)throw Ps.create("app-offline");const a=vj(i);return n=pj(t,a),a}});return n?await n:r.authToken}async function mj(t,e){let n=await yv(t.appConfig);for(;n.authToken.requestStatus===1;)await vI(100),n=await yv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Dp(t,e):r}function yv(t){return Xu(t,e=>{if(!TI(e))throw Ps.create("not-registered");const n=e.authToken;return wj(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function pj(t,e){try{const n=await hj(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ru(t.appConfig,r),n}catch(n){if(hI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await EI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ru(t.appConfig,r)}throw n}}function TI(t){return t!==void 0&&t.registrationStatus===2}function gj(t){return t.requestStatus===2&&!yj(t)}function yj(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+qP}function vj(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function wj(t){return t.requestStatus===1&&t.requestTime+cI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t){const e=t,{installationEntry:n,registrationPromise:r}=await jp(e);return r?r.catch(console.error):Dp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e=!1){const n=t;return await Ej(n),(await Dp(n,e)).token}async function Ej(t){const{registrationPromise:e}=await jp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){if(!t||!t.options)throw nh("App Configuration");if(!t.name)throw nh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw nh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function nh(t){return Ps.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="installations",Tj="installations-internal",kj=t=>{const e=t.getProvider("app").getImmediate(),n=Ij(e),r=ro(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Sj=t=>{const e=t.getProvider("app").getImmediate(),n=ro(e,kI).getImmediate();return{getId:()=>_j(n),getToken:s=>xj(n,s)}};function bj(){Rn(new vn(kI,kj,"PUBLIC")),Rn(new vn(Tj,Sj,"PRIVATE"))}bj();en(lI,Rp);en(lI,Rp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="/firebase-messaging-sw.js",Cj="/firebase-cloud-messaging-push-scope",SI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Aj="https://fcmregistrations.googleapis.com/v1",bI="google.c.a.c_id",Rj="google.c.a.c_l",Pj="google.c.a.ts",jj="google.c.a.e";var vv;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(vv||(vv={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ma;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dj(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="fcm_token_details_db",Oj=5,wv="fcm_token_object_Store";async function Mj(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(rh))return null;let e=null;return(await Su(rh,Oj,{upgrade:async(r,s,i,o)=>{var a;if(s<2||!r.objectStoreNames.contains(wv))return;const l=o.objectStore(wv),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(s===2){const h=u;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:$n(h.vapidKey)}}}else if(s===3){const h=u;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:$n(h.auth),p256dh:$n(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:$n(h.vapidKey)}}}else if(s===4){const h=u;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:$n(h.auth),p256dh:$n(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:$n(h.vapidKey)}}}}}})).close(),await Kd(rh),await Kd("fcm_vapid_details_db"),await Kd("undefined"),Lj(e)?e:null}function Lj(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="firebase-messaging-database",Fj=1,La="firebase-messaging-store";let sh=null;function NI(){return sh||(sh=Su(Vj,Fj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(La)}}})),sh}async function Uj(t){const e=CI(t),r=await(await NI()).transaction(La).objectStore(La).get(e);if(r)return r;{const s=await Mj(t.appConfig.senderId);if(s)return await Op(t,s),s}}async function Op(t,e){const n=CI(t),s=(await NI()).transaction(La,"readwrite");return await s.objectStore(La).put(e,n),await s.done,e}function CI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ct=new Vs("messaging","Messaging",Bj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e){const n=await Lp(t),r=AI(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(Mp(t.appConfig),s)).json()}catch(o){throw Ct.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Ct.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw Ct.create("token-subscribe-no-token");return i.token}async function zj(t,e){const n=await Lp(t),r=AI(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${Mp(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw Ct.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Ct.create("token-update-failed",{errorInfo:o})}if(!i.token)throw Ct.create("token-update-no-token");return i.token}async function qj(t,e){const r={method:"DELETE",headers:await Lp(t)};try{const i=await(await fetch(`${Mp(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw Ct.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw Ct.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function Mp({projectId:t}){return`${Aj}/projects/${t}/registrations`}async function Lp({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function AI({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==SI&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=7*24*60*60*1e3;async function Hj(t){const e=await Gj(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$n(e.getKey("auth")),p256dh:$n(e.getKey("p256dh"))},r=await Uj(t.firebaseDependencies);if(r){if(Qj(r.subscriptionOptions,n))return Date.now()>=r.createTime+Wj?Kj(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await qj(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return _v(t.firebaseDependencies,n)}else return _v(t.firebaseDependencies,n)}async function Kj(t,e){try{const n=await zj(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Op(t.firebaseDependencies,r),n}catch(n){throw n}}async function _v(t,e){const r={token:await $j(t,e),createTime:Date.now(),subscriptionOptions:e};return await Op(t,r),r.token}async function Gj(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dj(e)})}function Qj(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Yj(e,t),Jj(e,t),Xj(e,t),e}function Yj(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function Jj(t,e){e.data&&(t.data=e.data)}function Xj(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){return typeof t=="object"&&!!t&&bI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){if(!t||!t.options)throw ih("App Configuration Object");if(!t.name)throw ih("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ih(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function ih(t){return Ct.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=eD(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t){try{t.swRegistration=await navigator.serviceWorker.register(Nj,{scope:Cj}),t.swRegistration.update().catch(()=>{})}catch(e){throw Ct.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){if(!e&&!t.swRegistration&&await nD(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ct.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=SI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(t,e){if(!navigator)throw Ct.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ct.create("permission-blocked");return await sD(t,e==null?void 0:e.vapidKey),await rD(t,e==null?void 0:e.serviceWorkerRegistration),Hj(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e,n){const r=oD(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[bI],message_name:n[Rj],message_time:n[Pj],message_device_time:Math.floor(Date.now()/1e3)})}function oD(t){switch(t){case Ma.NOTIFICATION_CLICKED:return"notification_open";case Ma.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ma.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(xv(n)):t.onMessageHandler.next(xv(n)));const r=n.data;Zj(r)&&r[jj]==="1"&&await iD(t,n.messageType,r)}const Ev="@firebase/messaging",Iv="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=t=>{const e=new tD(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>aD(e,n)),e},cD=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>RI(e,r)}};function uD(){Rn(new vn("messaging",lD,"PUBLIC")),Rn(new vn("messaging-internal",cD,"PRIVATE")),en(Ev,Iv),en(Ev,Iv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(){try{await nx()}catch{return!1}return typeof window<"u"&&tx()&&hb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t=Rm()){return dD().then(e=>{if(!e)throw Ct.create("unsupported-browser")},e=>{throw Ct.create("indexed-db-unsupported")}),ro(ke(t),"messaging").getImmediate()}async function fD(t,e){return t=ke(t),RI(t,e)}uD();const su=Kn.firebase;let ql,Ue,U,Tv;const PI=t=>t&&t.apiKey&&t.projectId&&t.appId,mD=async()=>{if("serviceWorker"in navigator&&PI(su))try{const e=`/firebase-messaging-sw.js?${new URLSearchParams(su).toString()}`;return await navigator.serviceWorker.register(e)}catch(t){console.error("Service Worker registration failed:",t)}};try{Kn.useFirebase&&PI(su)?(ql=ix(su),Ue=FA(ql),U=bP(ql),typeof window<"u"&&mD().then(t=>{try{Tv=hD(ql),t&&Kn.firebase.vapidKey&&fD(Tv,{vapidKey:Kn.firebase.vapidKey,serviceWorkerRegistration:t}).catch(e=>console.log("Push token flow needs user interaction.")),console.log("Firebase Messaging initialized.")}catch(e){console.warn("Failed to initialize Firebase Messaging:",e)}}),console.log("Firebase initialized successfully.")):Kn.useFirebase?console.warn("Firebase `useFirebase` is true, but config keys are missing. Please check your .env.local file. Skipping Firebase Init."):console.log("`useFirebase` is false. Skipping Firebase Init.")}catch(t){console.error("Error initializing Firebase:",t)}class pD{mapAuthError(e){switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos.";case"auth/email-already-in-use":return"Este e-mail j est em uso.";case"auth/weak-password":return"A senha  muito fraca.";case"auth/invalid-email":return"E-mail invlido.";case"auth/popup-closed-by-user":return"Login cancelado.";default:return"Erro na autenticao. Tente novamente."}}async login(e,n){if(!Ue)throw new Error("Servio de autenticao no inicializado.");if(!n)throw new Error("A senha  obrigatria.");try{await _y(Ue,qc);const r=await TC(Ue,e,n);return this._fetchUserProfile(r.user)}catch(r){throw console.error("Erro no Login Firebase:",r),new Error(this.mapAuthError(r.code))}}async loginWithGoogle(){if(!Ue)throw new Error("Servio de autenticao no inicializado.");try{await _y(Ue,qc);const e=new qn;await GC(Ue,e)}catch(e){throw console.error("Erro ao iniciar Login com Google:",e),new Error(this.mapAuthError(e.code))}}async _fetchUserProfile(e){if(!U)throw new Error("Banco de dados no inicializado.");const n=se(U,"users",e.uid);let r;try{r=await ps(n)}catch(s){if(console.error("Erro ao acessar Firestore:",s),s.code==="permission-denied")return{uid:e.uid,email:e.email||"",role:Ye.USER,isOnboarded:!1};throw new Error("Erro de conexo ao buscar perfil do usurio.")}if(r.exists()){const s=r.data();return{uid:e.uid,email:e.email||"",name:s.name||e.displayName,role:s.role||Ye.USER,rm:s.rm,courseId:s.courseId,classId:s.classId,isOnboarded:s.isOnboarded||!1}}else return{uid:e.uid,email:e.email||"",name:e.displayName||"",role:Ye.USER,isOnboarded:!1}}async logout(){Ue&&await NC(Ue)}onAuthStateChanged(e){return Ue?bC(Ue,async n=>{if(n)try{const r=await this._fetchUserProfile(n);e(r)}catch{e({uid:n.uid,email:n.email||"",role:Ye.USER,isOnboarded:!1})}else e(null)}):(console.warn("Firebase Auth not initialized correctly. Defaulting to logged out state."),e(null),()=>{})}async updateUserProfile(e,n){if(!U)throw new Error("Banco de dados no inicializado.");if(n.rm)try{const i=pe(U,"users"),o=Ee(i,fe("rm","==",n.rm));if((await Ie(o)).docs.find(u=>u.id!==e))throw new Error("Este RM j est cadastrado para outro usurio.")}catch(i){if(i.code!=="permission-denied")throw i}const r=se(U,"users",e),s={...n,updatedAt:new Date().toISOString()};n.name&&n.rm&&(s.isOnboarded=!0);try{await iI(r,s,{merge:!0})}catch{throw new Error("No foi possvel salvar seus dados.")}return{...n,uid:e,email:"",role:Ye.USER,isOnboarded:!0}}async getUserProfile(e){if(!U)throw new Error("Servio no inicializado.");try{const n=se(U,"users",e),r=await ps(n);if(r.exists()){const s=r.data();return{uid:e,email:s.email||"",name:s.name||"Usurio",role:s.role||Ye.USER,rm:s.rm,courseId:s.courseId,classId:s.classId,isOnboarded:s.isOnboarded}}}catch{console.warn(`Could not fetch profile for ${e} from DB.`)}return Ue&&Ue.currentUser&&Ue.currentUser.uid===e?this._fetchUserProfile(Ue.currentUser):null}async getUsers(e){if(!U)return{data:[],nextCursor:void 0};const{limit:n,cursor:r,filters:s}=e,{searchTerm:i,role:o,courseId:a,classId:l}=s;try{const u=[Tr("email"),Pi(n)];o&&u.push(fe("role","==",o)),a&&u.push(fe("courseId","==",a)),l&&u.push(fe("classId","==",l)),r&&u.push(DP(r));const h=Ee(pe(U,"users"),...u),f=await Ie(h);let p=f.docs.map(w=>({uid:w.id,...w.data()}));if(i){const w=i.toLowerCase();p=p.filter(T=>{var b,_;return((b=T.name)==null?void 0:b.toLowerCase().includes(w))||T.email.toLowerCase().includes(w)||((_=T.rm)==null?void 0:_.includes(w))})}const y=f.docs.length===n?f.docs[f.docs.length-1]:void 0;return{data:p,nextCursor:y}}catch(u){return console.error("Erro ao buscar usurios:",u),u.code==="failed-precondition"&&console.warn("Falta ndice composto. Crie no link do console."),{data:[],nextCursor:void 0}}}async deleteUser(e){if(!U)return;const n=aa(U),r=Ee(pe(U,"enrollments"),fe("userId","==",e)),i=(await Ie(r)).docs.map(p=>({id:p.id,...p.data()})),o=Array.from(new Set(i.map(p=>p.eventId))),l=await(async p=>{const y=[];for(let w=0;w<p.length;w+=30){const T=p.slice(w,w+30),b=Ee(pe(U,"events"),fe(KE(),"in",T)),_=await Ie(b);y.push(..._.docs.map(E=>({id:E.id,...E.data()})))}return y})(o),u=new Map(l.map(p=>[p.id,p]));i.forEach(p=>{if(p.status===et.CONFIRMED){const y=u.get(p.eventId);if(y){const w=y.sessions.findIndex(T=>T.id===p.sessionId);if(w!==-1&&y.sessions[w].filled>0){const T=[...y.sessions];T[w]={...T[w],filled:Math.max(0,T[w].filled-1)},y.sessions=T,n.update(se(U,"events",y.id),{sessions:T})}}}n.delete(se(U,"enrollments",p.id))});const h=Ee(pe(U,"teams"),fe("members","array-contains",e));(await Ie(h)).forEach(p=>{p.data().captainId===e?n.delete(p.ref):n.update(p.ref,{members:bf(e)})}),n.delete(se(U,"users",e)),await n.commit()}async updateUserRole(e,n){U&&await ji(se(U,"users",e),{role:n})}}class gD{async getCourses(){return U?(await Ie(pe(U,"courses"))).docs.map(n=>({id:n.id,...n.data()})):[]}async addCourse(e){if(!U)throw new Error("DB not init");return{id:(await Sf(pe(U,"courses"),{name:e})).id,name:e}}async updateCourse(e,n){U&&await ji(se(U,"courses",e),{name:n})}async deleteCourse(e){if(!U)return;const n=aa(U);n.delete(se(U,"courses",e));const r=Ee(pe(U,"classes"),fe("courseId","==",e));(await Ie(r)).forEach(a=>n.delete(a.ref));const i=Ee(pe(U,"users"),fe("courseId","==",e));(await Ie(i)).forEach(a=>n.update(a.ref,{courseId:""})),await n.commit()}async getClasses(e){if(!U)return[];let n=e?Ee(pe(U,"classes"),fe("courseId","==",e)):pe(U,"classes");return(await Ie(n)).docs.map(s=>({id:s.id,...s.data()}))}async addClass(e,n){if(!U)throw new Error("DB not init");return{id:(await Sf(pe(U,"classes"),{courseId:e,name:n})).id,courseId:e,name:n}}async updateClass(e,n){U&&await ji(se(U,"classes",e),{name:n})}async deleteClass(e){if(!U)return;const n=aa(U);await VP(se(U,"classes",e));const r=Ee(pe(U,"users"),fe("classId","==",e));(await Ie(r)).forEach(i=>n.update(i.ref,{classId:""})),await n.commit()}async getEvents(e){if(!U)return{data:[],nextCursor:void 0};const{limit:n,cursor:r,filters:s}=e,{searchTerm:i,visibility:o,course:a}=s,l=50;try{const u=Ee(pe(U,"events"),Tr("createdAt","desc"),Pi(l)),f=(await Ie(u)).docs.map(_=>({id:_.id,..._.data()}));let p=[];o==="class"&&a&&(p=(await Ie(pe(U,"classes"))).docs.map(E=>({id:E.id,...E.data()})));const y=f.filter(_=>{var O,M;const E=i?_.name.toLowerCase().includes(i.toLowerCase())||_.description.toLowerCase().includes(i.toLowerCase()):!0,x=o?_.visibility===o:!0;let R=!0;return a&&(_.visibility==="public"?R=!1:_.visibility==="course"?R=((O=_.allowedCourses)==null?void 0:O.includes(a))||!1:_.visibility==="class"&&(p.length>0?R=((M=_.allowedClasses)==null?void 0:M.some(S=>{const v=p.find(k=>k.id===S);return(v==null?void 0:v.courseId)===a}))||!1:R=!1)),E&&x&&R}),w=typeof r=="number"?r:0,T=y.slice(w,w+n),b=w+T.length<y.length?w+T.length:void 0;return{data:T,nextCursor:b}}catch{return{data:[],nextCursor:void 0}}}async getEventById(e){if(!U)return;const n=se(U,"events",e),r=await ps(n);return r.exists()?{id:r.id,...r.data()}:void 0}async getEventsByIds(e){if(!U||e.length===0)return[];const n=30,r=[];for(let s=0;s<e.length;s+=n){const i=e.slice(s,s+n),o=Ee(pe(U,"events"),fe(KE(),"in",i)),a=await Ie(o);r.push(...a.docs.map(l=>({id:l.id,...l.data()})))}return r}async getEventsByParentId(e){if(!U)return[];const n=Ee(pe(U,"events"),fe("parentId","==",e));return(await Ie(n)).docs.map(s=>({id:s.id,...s.data()}))}async getAvailableEventsForUser(e){if(!U)return[];try{const n=pe(U,"events"),r=Pi(50),i=[Ee(n,fe("visibility","==","public"),Tr("createdAt","desc"),r)];if(e.courseId){const l=Ee(n,fe("allowedCourses","array-contains",e.courseId),Tr("createdAt","desc"),r);i.push(l)}if(e.classId){const l=Ee(n,fe("allowedClasses","array-contains",e.classId),Tr("createdAt","desc"),r);i.push(l)}const o=await Promise.all(i.map(l=>Ie(l).catch(u=>(console.warn("Query falhou (verifique ndices):",u.message),{docs:[]})))),a=new Map;return o.forEach(l=>{l.docs.forEach(u=>{a.has(u.id)||a.set(u.id,{id:u.id,...u.data()})})}),Array.from(a.values()).sort((l,u)=>(u.createdAt||"").localeCompare(l.createdAt||""))}catch(n){return console.error("Erro crtico ao buscar eventos:",n),[]}}async getPublicEvents(){if(!U)return[];const e=Ee(pe(U,"events"),fe("visibility","==","public"),Tr("createdAt","desc"),Pi(10));return(await Ie(e)).docs.map(r=>({id:r.id,...r.data()}))}async createEvent(e){if(!U)return;const{id:n,...r}=e;await iI(se(U,"events",n),JSON.parse(JSON.stringify(r)))}async updateEvent(e){if(!U)return;const{id:n,...r}=e;await ji(se(U,"events",n),JSON.parse(JSON.stringify(r)))}async deleteEvent(e){if(!U)return;const n=aa(U),r=[e],s=Ee(pe(U,"events"),fe("parentId","==",e));(await Ie(s)).forEach(l=>r.push(l.id));const o=[],a=[];for(let l=0;l<r.length;l+=10)a.push(r.slice(l,l+10));for(const l of a){const u=Ee(pe(U,"enrollments"),fe("eventId","in",l));(await Ie(u)).forEach(y=>o.push(y.ref));const f=Ee(pe(U,"teams"),fe("eventId","in",l));(await Ie(f)).forEach(y=>n.delete(y.ref))}r.forEach(l=>n.delete(se(U,"events",l))),o.forEach(l=>n.delete(l)),await n.commit()}}class yD{constructor(e,n){this.notificationService=e,this.eventService=n}async getTeamsForEvent(e){if(!U)return[];const n=Ee(pe(U,"teams"),fe("eventId","==",e));return(await Ie(n)).docs.map(s=>({id:s.id,...s.data()}))}async createTeam(e,n,r){if(!U)throw new Error("DB not init");const s=Math.random().toString(36).substring(2,6).toUpperCase(),i=`Equipe #${Math.floor(Math.random()*1e3)}`,o=`team_${Date.now()}`,a={id:o,eventId:e,sessionId:n,name:i,code:s,captainId:r.uid,members:[r.uid],createdAt:new Date().toISOString()};return await si(U,async l=>{const u=se(U,"events",e),h=await l.get(u);if(!h.exists())throw new Error("Evento no encontrado.");const f=`${r.uid}_${e}`,p=se(U,"enrollments",f),y=await l.get(p);if(y.exists()&&y.data().status===et.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");const w=h.data(),T=w.sessions.findIndex(E=>E.id===n);if(T===-1)throw new Error("Sesso invlida.");if(w.sessions[T].filled>=w.sessions[T].capacity)throw new Error("A sesso est lotada (limite de equipes atingido).");const b=[...w.sessions];b[T]={...b[T],filled:b[T].filled+1},l.update(u,{sessions:b}),l.set(p,{userId:r.uid,eventId:e,sessionId:n,teamId:o,status:et.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1});const _=se(U,"teams",o);l.set(_,a)}),a}async joinTeam(e,n,r){if(!U)throw new Error("DB not init");const s=se(U,"teams",e);await si(U,async i=>{const o=await i.get(s);if(!o.exists())throw new Error("Equipe no encontrada.");const a=o.data();if(a.code!==r)throw new Error("Cdigo da equipe invlido.");if(a.members.includes(n.uid))throw new Error("Voc j faz parte desta equipe.");const l=`${n.uid}_${a.eventId}`,u=se(U,"enrollments",l),h=await i.get(u);if(h.exists()&&h.data().status===et.CONFIRMED)throw new Error("Voc j est inscrito neste evento.");i.set(u,{userId:n.uid,eventId:a.eventId,sessionId:a.sessionId,teamId:e,status:et.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1}),i.update(s,{members:aI(n.uid)})});try{const i=await ps(s);if(i.exists()){const o=i.data();o.captainId!==n.uid&&await this.notificationService.createNotification({userId:o.captainId,title:"Novo membro na equipe! ",message:`${n.name||"Um usurio"} entrou na sua equipe ${o.name}.`,type:"success",createdAt:new Date().toISOString(),read:!1,link:`/event/${o.eventId}`})}}catch(i){console.error("Error creating notification",i)}}async leaveTeam(e,n){if(!U||!Ue||!Ue.currentUser)return;const r=Ue.currentUser.uid,s=se(U,"teams",e);let i=null,o=null,a=!1,l=!1;try{const u=await ps(se(U,"users",n));u.exists()&&(o=u.data())}catch{}if(await si(U,async u=>{const h=await u.get(s);if(!h.exists())throw new Error("Equipe no encontrada.");i=h.data();const f=se(U,"events",i.eventId),p=await u.get(f);if(i.captainId===n){a=!0;for(const y of i.members){const w=`${y}_${i.eventId}`,T=se(U,"enrollments",w);u.delete(T)}if(p.exists()){const y=p.data(),w=y.sessions.findIndex(T=>T.id===i.sessionId);if(w!==-1){const T=[...y.sessions];T[w].filled=Math.max(0,T[w].filled-1),u.update(f,{sessions:T})}}u.delete(s)}else{r!==n&&(l=!0),u.update(s,{members:bf(n)});const y=`${n}_${i.eventId}`,w=se(U,"enrollments",y);u.delete(w)}}),i){const u=i.name,h=(o==null?void 0:o.name)||"Um membro";if(a){const f=i.members.filter(p=>p!==(i==null?void 0:i.captainId));for(const p of f)await this.notificationService.createNotification({userId:p,title:"Equipe Desfeita ",message:`A equipe "${u}" foi desfeita pelo capito. Sua inscrio foi cancelada.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}else l?await this.notificationService.createNotification({userId:n,title:"Removido da Equipe ",message:`Voc foi removido da equipe "${u}" pelo capito.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"}):i.captainId!==n&&await this.notificationService.createNotification({userId:i.captainId,title:"Membro Saiu ",message:`${h} saiu da sua equipe "${u}".`,type:"info",read:!1,createdAt:new Date().toISOString(),link:`/event/${i.eventId}`})}}async kickMember(e,n){return this.leaveTeam(e,n)}async getEnrollmentsForUser(e){if(!U)return[];try{const n=Ee(pe(U,"enrollments"),fe("userId","==",e));return(await Ie(n)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status!==et.CANCELED)}catch(n){return console.error("Error fetching enrollments",n),[]}}async getUserEnrollmentsDetails(e){if(!U)return[];try{const n=Ee(pe(U,"enrollments"),fe("userId","==",e),fe("status","==",et.CONFIRMED)),s=(await Ie(n)).docs.map(l=>({id:l.id,...l.data()}));if(s.length===0)return[];const i=Array.from(new Set(s.map(l=>l.eventId))),o=await this.eventService.getEventsByIds(i),a=new Map(o.map(l=>[l.id,l]));return s.map(l=>{const u=a.get(l.eventId);if(!u)return null;const h=u.sessions.find(f=>f.id===l.sessionId);return h?{enrollmentId:l.id,eventName:u.name,eventLocation:u.location,sessionDate:h.date,sessionTime:`${h.startTime} - ${h.endTime}`,enrolledAt:l.enrolledAt}:null}).filter(Boolean)}catch{return[]}}async getEnrichedEnrollments(e){if(!U)return[];const n=Ee(pe(U,"enrollments"),fe("eventId","==",e),fe("status","==",et.CONFIRMED)),s=(await Ie(n)).docs.map(u=>({id:u.id,...u.data()}));if(s.length===0)return[];const i=s.map(u=>ps(se(U,"users",u.userId))),a=(await Promise.all(i)).map(u=>u.exists()?{uid:u.id,...u.data()}:null),l=await this.eventService.getEventById(e);return l?s.map((u,h)=>{const f=a[h],p=l.sessions.find(y=>y.id===u.sessionId);return{id:u.id,user:{uid:(f==null?void 0:f.uid)||u.userId,name:(f==null?void 0:f.name)||"Desconhecido",email:(f==null?void 0:f.email)||"",rm:(f==null?void 0:f.rm)||"",courseId:f==null?void 0:f.courseId,classId:f==null?void 0:f.classId},session:{id:p.id,date:p.date,startTime:p.startTime,endTime:p.endTime},status:u.status,enrolledAt:u.enrolledAt,teamId:u.teamId,attended:u.attended,checkInAt:u.checkInAt}}):[]}async getEnrollmentDetailsForEvent(e){return(await this.getEnrichedEnrollments(e)).map(r=>({Nome:r.user.name,Email:r.user.email,RM:r.user.rm,SessaoData:pn(r.session.date),SessaoHora:`${r.session.startTime}`,Status:r.status,DataInscricao:new Date(r.enrolledAt).toLocaleString("pt-BR"),Presenca:r.attended?"Sim":"No"}))}async createEnrollment(e,n,r,s=!1){if(!U)throw new Error("DB not init");const i=await ps(se(U,"events",n));if(!i.exists())throw new Error("Evento no encontrado");const a=i.data().sessions.find(y=>y.id===r);if(!a)throw new Error("Sesso no encontrada");const l=Ee(pe(U,"enrollments"),fe("userId","==",e),fe("status","==",et.CONFIRMED)),h=(await Ie(l)).docs.map(y=>y.data());if(h.some(y=>y.eventId===n))throw new Error("Voc j est inscrito neste evento");if(h.length>0){const y=[...new Set(h.map(T=>T.eventId))],w=await this.eventService.getEventsByIds(y);for(const T of h){const b=w.find(E=>E.id===T.eventId),_=b==null?void 0:b.sessions.find(E=>E.id===T.sessionId);if(b&&_&&_.date===a.date&&a.startTime<_.endTime&&a.endTime>_.startTime)throw new Error(`CONFLICT|${b.name}|${_.startTime}|${_.endTime}`)}}const f=`enr_${Date.now()}_${e}`,p={id:f,userId:e,eventId:n,sessionId:r,status:et.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1};return await si(U,async y=>{const w=se(U,"events",n),T=await y.get(w);if(!T.exists())throw new Error("Evento no encontrado");const b=T.data(),_=b.sessions.findIndex(x=>x.id===r);if(_===-1)throw new Error("Sesso no encontrada");if(!s){if(b.sessions[_].filled>=b.sessions[_].capacity)throw new Error("A sesso est lotada");const x=[...b.sessions];x[_].filled+=1,y.update(w,{sessions:x})}const E=se(U,"enrollments",f);y.set(E,p)}),p}async cancelEnrollment(e){if(!U||!Ue||!Ue.currentUser)return;const n=Ue.currentUser.uid;let r=null,s="um evento";await si(U,async i=>{const o=se(U,"enrollments",e),a=await i.get(o);if(!a.exists())throw new Error("Inscrio no encontrada");r=a.data();const l=se(U,"events",r.eventId),u=await i.get(l);let h=null,f=null;r.teamId&&(h=se(U,"teams",r.teamId),f=await i.get(h));let p=!0;if(r.teamId&&f&&f.exists()&&(f.data().captainId===r.userId?(i.delete(h),p=!0):(i.update(h,{members:bf(r.userId)}),p=!1)),u.exists()){const y=u.data();if(s=y.name,p){const w=y.sessions.findIndex(T=>T.id===r.sessionId);if(w!==-1){const T=[...y.sessions];T[w].filled=Math.max(0,T[w].filled-1),i.update(l,{sessions:T})}}}i.delete(o)}),r&&r.userId!==n&&await this.notificationService.createNotification({userId:r.userId,title:"Inscrio Cancelada ",message:`Sua inscrio no evento "${s}" foi cancelada pela administrao.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}async markAttendance(e){if(!U)throw new Error("DB not init");return await si(U,async n=>{const r=se(U,"enrollments",e),s=await n.get(r);if(!s.exists())return{success:!1,message:"Inscrio no encontrada."};const i=s.data(),o=await n.get(se(U,"users",i.userId)),a=await n.get(se(U,"events",i.eventId)),l=o.exists()?o.data().name:"Desconhecido",u=a.exists()?a.data().name:"Evento";return i.attended?{success:!1,message:"Check-in j realizado anteriormente.",alreadyAttended:!0,userName:l,eventName:u}:(n.update(r,{attended:!0,checkInAt:new Date().toISOString()}),{success:!0,message:"Check-in realizado com sucesso!",userName:l,eventName:u})})}}class vD{async getNotifications(e){if(!U)return[];const n=Ee(pe(U,"notifications"),fe("userId","==",e),Tr("createdAt","desc"),Pi(20));return(await Ie(n)).docs.map(s=>({id:s.id,...s.data()}))}subscribeToNotifications(e,n){if(!U)return()=>{};const r=Ee(pe(U,"notifications"),fe("userId","==",e),Tr("createdAt","desc"),Pi(20));return FP(r,i=>{const o=i.docs.map(a=>({id:a.id,...a.data()}));n(o)})}async markNotificationAsRead(e){U&&await ji(se(U,"notifications",e),{read:!0})}async markAllNotificationsAsRead(e){if(!U)return;const n=Ee(pe(U,"notifications"),fe("userId","==",e),fe("read","==",!1)),r=await Ie(n),s=aa(U);r.forEach(i=>s.update(i.ref,{read:!0})),await s.commit()}async createNotification(e){U&&await Sf(pe(U,"notifications"),e)}async saveDeviceToken(e,n){if(!U)return;const r=se(U,"users",e);await ji(r,{pushTokens:aI(n)})}}class wD{async resetAndSeedData(){console.log("Reset not supported in Firebase from client.")}async exportData(){return"{}"}async importData(e){}}class _D{constructor(){this.authService=new pD,this.eventService=new gD,this.notificationService=new vD,this.enrollmentService=new yD(this.notificationService,this.eventService),this.devService=new wD}login(e,n){return this.authService.login(e,n)}loginWithGoogle(){return this.authService.loginWithGoogle()}logout(){return this.authService.logout()}onAuthStateChanged(e){return this.authService.onAuthStateChanged(e)}updateUserProfile(e,n){return this.authService.updateUserProfile(e,n)}getUserProfile(e){return this.authService.getUserProfile(e)}getUsers(e){return this.authService.getUsers(e)}deleteUser(e){return this.authService.deleteUser(e)}updateUserRole(e,n){return this.authService.updateUserRole(e,n)}getCourses(){return this.eventService.getCourses()}addCourse(e){return this.eventService.addCourse(e)}updateCourse(e,n){return this.eventService.updateCourse(e,n)}deleteCourse(e){return this.eventService.deleteCourse(e)}getClasses(e){return this.eventService.getClasses(e)}addClass(e,n){return this.eventService.addClass(e,n)}updateClass(e,n){return this.eventService.updateClass(e,n)}deleteClass(e){return this.eventService.deleteClass(e)}getEvents(e){return this.eventService.getEvents(e)}getEventById(e){return this.eventService.getEventById(e)}getEventsByIds(e){return this.eventService.getEventsByIds(e)}getAvailableEventsForUser(e){return this.eventService.getAvailableEventsForUser(e)}getPublicEvents(){return this.eventService.getPublicEvents()}getEventsByParentId(e){return this.eventService.getEventsByParentId(e)}createEvent(e){return this.eventService.createEvent(e)}updateEvent(e){return this.eventService.updateEvent(e)}deleteEvent(e){return this.eventService.deleteEvent(e)}getTeamsForEvent(e){return this.enrollmentService.getTeamsForEvent(e)}createTeam(e,n,r){return this.enrollmentService.createTeam(e,n,r)}joinTeam(e,n,r){return this.enrollmentService.joinTeam(e,n,r)}leaveTeam(e,n){return this.enrollmentService.leaveTeam(e,n)}kickMember(e,n){return this.enrollmentService.kickMember(e,n)}getEnrollmentsForUser(e){return this.enrollmentService.getEnrollmentsForUser(e)}getUserEnrollmentsDetails(e){return this.enrollmentService.getUserEnrollmentsDetails(e)}getEnrichedEnrollments(e){return this.enrollmentService.getEnrichedEnrollments(e)}getEnrollmentDetailsForEvent(e){return this.enrollmentService.getEnrollmentDetailsForEvent(e)}createEnrollment(e,n,r,s){return this.enrollmentService.createEnrollment(e,n,r,s)}cancelEnrollment(e){return this.enrollmentService.cancelEnrollment(e)}markAttendance(e){return this.enrollmentService.markAttendance(e)}getNotifications(e){return this.notificationService.getNotifications(e)}subscribeToNotifications(e,n){return this.notificationService.subscribeToNotifications(e,n)}markNotificationAsRead(e){return this.notificationService.markNotificationAsRead(e)}markAllNotificationsAsRead(e){return this.notificationService.markAllNotificationsAsRead(e)}createNotification(e){return this.notificationService.createNotification(e)}saveDeviceToken(e,n){return this.notificationService.saveDeviceToken(e,n)}resetAndSeedData(){return this.devService.resetAndSeedData()}exportData(){return this.devService.exportData()}importData(e){return this.devService.importData(e)}}const xD=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Design Digital"},{id:"c3",name:"Administrao"}],ED=[{id:"t1",courseId:"c1",name:"CC-2024-A"},{id:"t2",courseId:"c1",name:"CC-2024-B"},{id:"t3",courseId:"c2",name:"DD-2024-A"},{id:"t4",courseId:"c3",name:"ADM-2024-A"}],F={USERS:"eduevent_users",EVENTS:"eduevent_events",ENROLLMENTS:"eduevent_enrollments",TEAMS:"eduevent_teams",NOTIFICATIONS:"eduevent_notifications",CURRENT_USER:"eduevent_current_user",COURSES:"eduevent_courses",CLASSES:"eduevent_classes"},Ce=t=>new Promise(e=>setTimeout(e,t));class rl{getItems(e){const n=localStorage.getItem(e);return n?JSON.parse(n):[]}saveItems(e,n){localStorage.setItem(e,JSON.stringify(n))}addItem(e,n){const r=this.getItems(e);r.push(n),this.saveItems(e,r)}}class Cf extends rl{constructor(){super(...arguments),this.authListeners=[]}notifyAuthListeners(e){this.authListeners.forEach(n=>n(e))}async login(e,n){await Ce(500);let s=this.getItems(F.USERS).find(i=>i.email===e);return s||(s={uid:`user_${Date.now()}`,email:e,role:e.includes("admin")?Ye.ADMIN:Ye.USER,isOnboarded:!1},this.addItem(F.USERS,s)),localStorage.setItem(F.CURRENT_USER,JSON.stringify(s)),this.notifyAuthListeners(s),s}async loginWithGoogle(){await Ce(800);const e="google.mock@example.com";let r=this.getItems(F.USERS).find(s=>s.email===e);r||(r={uid:`user_google_${Date.now()}`,email:e,name:"Google Mock User",role:Ye.USER,isOnboarded:!1},this.addItem(F.USERS,r)),localStorage.setItem(F.CURRENT_USER,JSON.stringify(r)),this.notifyAuthListeners(r)}async logout(){localStorage.removeItem(F.CURRENT_USER),this.notifyAuthListeners(null)}onAuthStateChanged(e){this.authListeners.push(e);const n=localStorage.getItem(F.CURRENT_USER),r=n?JSON.parse(n):null;return e(r),()=>{this.authListeners=this.authListeners.filter(s=>s!==e)}}async updateUserProfile(e,n){await Ce(600);const r=this.getItems(F.USERS),s=r.findIndex(l=>l.uid===e);if(s===-1)throw new Error("Usurio no encontrado");if(n.rm&&r.some(u=>u.rm===n.rm&&u.uid!==e))throw new Error("Este RM j est cadastrado para outro usurio.");const i={...r[s],...n,isOnboarded:!0};r[s]=i,this.saveItems(F.USERS,r);const o=localStorage.getItem(F.CURRENT_USER),a=o?JSON.parse(o):null;return a&&a.uid===e&&(localStorage.setItem(F.CURRENT_USER,JSON.stringify(i)),this.notifyAuthListeners(i)),i}async getUserProfile(e){return await Ce(100),this.getItems(F.USERS).find(s=>s.uid===e)||null}async getUsers(e){await Ce(500);const n=this.getItems(F.USERS),{searchTerm:r,role:s,courseId:i,classId:o}=e.filters,a=n.filter(f=>{var b,_;const p=r?((b=f.name)==null?void 0:b.toLowerCase().includes(r.toLowerCase()))||f.email.toLowerCase().includes(r.toLowerCase())||((_=f.rm)==null?void 0:_.includes(r)):!0,y=s?f.role===s:!0,w=i?f.courseId===i:!0,T=o?f.classId===o:!0;return p&&y&&w&&T}),l=e.cursor||0,u=a.slice(l,l+e.limit),h=l+u.length;return{data:u,nextCursor:h<a.length?h:void 0}}async deleteUser(e){await Ce(500);let n=this.getItems(F.USERS);n=n.filter(r=>r.uid!==e),this.saveItems(F.USERS,n)}async updateUserRole(e,n){await Ce(300);const r=this.getItems(F.USERS),s=r.findIndex(i=>i.uid===e);s!==-1&&(r[s].role=n,this.saveItems(F.USERS,r))}}class Af extends rl{constructor(){super(),localStorage.getItem(F.COURSES)||localStorage.setItem(F.COURSES,JSON.stringify(xD)),localStorage.getItem(F.CLASSES)||localStorage.setItem(F.CLASSES,JSON.stringify(ED))}async getCourses(){return this.getItems(F.COURSES)}async addCourse(e){const n=this.getItems(F.COURSES),r={id:`c_${Date.now()}`,name:e};return n.push(r),this.saveItems(F.COURSES,n),r}async updateCourse(e,n){const r=this.getItems(F.COURSES),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].name=n,this.saveItems(F.COURSES,r))}async deleteCourse(e){let n=this.getItems(F.COURSES);n=n.filter(s=>s.id!==e),this.saveItems(F.COURSES,n);let r=this.getItems(F.CLASSES);r=r.filter(s=>s.courseId!==e),this.saveItems(F.CLASSES,r)}async getClasses(e){const n=this.getItems(F.CLASSES);return e?n.filter(r=>r.courseId===e):n}async addClass(e,n){const r=this.getItems(F.CLASSES),s={id:`t_${Date.now()}`,courseId:e,name:n};return r.push(s),this.saveItems(F.CLASSES,r),s}async updateClass(e,n){const r=this.getItems(F.CLASSES),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].name=n,this.saveItems(F.CLASSES,r))}async deleteClass(e){let n=this.getItems(F.CLASSES);n=n.filter(r=>r.id!==e),this.saveItems(F.CLASSES,n)}async getEvents(e){await Ce(400);const n=this.getItems(F.EVENTS),{searchTerm:r,visibility:s,course:i}=e.filters,o=this.getItems(F.CLASSES),a=n.filter(f=>{var T,b;const p=r?f.name.toLowerCase().includes(r.toLowerCase())||f.description.toLowerCase().includes(r.toLowerCase()):!0,y=s?f.visibility===s:!0;let w=!0;return i&&(f.visibility==="public"?w=!1:f.visibility==="course"?w=((T=f.allowedCourses)==null?void 0:T.includes(i))||!1:f.visibility==="class"&&(w=((b=f.allowedClasses)==null?void 0:b.some(_=>{const E=o.find(x=>x.id===_);return(E==null?void 0:E.courseId)===i}))||!1)),p&&y&&w}),l=e.cursor||0,u=a.slice(l,l+e.limit),h=l+u.length;return{data:u,nextCursor:h<a.length?h:void 0}}async getEventById(e){return await Ce(200),this.getItems(F.EVENTS).find(r=>r.id===e)}async getEventsByIds(e){return await Ce(200),this.getItems(F.EVENTS).filter(r=>e.includes(r.id))}async getEventsByParentId(e){return await Ce(200),this.getItems(F.EVENTS).filter(r=>r.parentId===e)}async getAvailableEventsForUser(e){return await Ce(400),this.getItems(F.EVENTS).filter(r=>{var s,i;return r.visibility==="public"?!0:r.visibility==="course"?e.courseId?(s=r.allowedCourses)==null?void 0:s.includes(e.courseId):!1:r.visibility==="class"&&e.classId?(i=r.allowedClasses)==null?void 0:i.includes(e.classId):!1})}async getPublicEvents(){return await Ce(400),this.getItems(F.EVENTS).filter(n=>n.visibility==="public")}async createEvent(e){await Ce(600),this.addItem(F.EVENTS,e)}async updateEvent(e){await Ce(500);const n=this.getItems(F.EVENTS),r=n.findIndex(s=>s.id===e.id);if(r!==-1)n[r]=e,this.saveItems(F.EVENTS,n);else throw new Error("Evento no encontrado para atualizao")}async deleteEvent(e){await Ce(400);let n=this.getItems(F.EVENTS);const r=n.filter(o=>o.id===e||o.parentId===e).map(o=>o.id);n=n.filter(o=>!r.includes(o.id)),this.saveItems(F.EVENTS,n);let s=this.getItems(F.ENROLLMENTS);s=s.filter(o=>!r.includes(o.eventId)),this.saveItems(F.ENROLLMENTS,s);let i=this.getItems(F.TEAMS);i=i.filter(o=>!r.includes(o.eventId)),this.saveItems(F.TEAMS,i)}}class ID extends rl{constructor(e){super(),this.notificationService=e}async getTeamsForEvent(e){return await Ce(300),this.getItems(F.TEAMS).filter(r=>r.eventId===e)}async createTeam(e,n,r){await Ce(500);const s=this.getItems(F.EVENTS),i=s.findIndex(T=>T.id===e);if(i===-1)throw new Error("Evento no encontrado.");const o=s[i].sessions.findIndex(T=>T.id===n);if(o===-1)throw new Error("Sesso no encontrada.");const a=s[i].sessions[o];if(a.filled>=a.capacity)throw new Error("A sesso est lotada.");const l=this.getItems(F.TEAMS),u=`team_${Date.now()}`,h=Math.random().toString(36).substring(2,6).toUpperCase(),f=`Equipe #${Math.floor(Math.random()*1e3)}`,p={id:u,eventId:e,sessionId:n,name:f,code:h,captainId:r.uid,members:[r.uid],createdAt:new Date().toISOString()};await this.createEnrollment(r.uid,e,n,!0);const y=this.getItems(F.ENROLLMENTS),w=y.findIndex(T=>T.userId===r.uid&&T.eventId===e);return w!==-1&&(y[w].teamId=u,this.saveItems(F.ENROLLMENTS,y)),s[i].sessions[o].filled+=1,this.saveItems(F.EVENTS,s),l.push(p),this.saveItems(F.TEAMS,l),p}async joinTeam(e,n,r){await Ce(500);const s=this.getItems(F.TEAMS),i=s.findIndex(l=>l.id===e);if(i===-1)throw new Error("Equipe no encontrada.");if(s[i].code!==r)throw new Error("Cdigo de equipe invlido.");if(s[i].members.includes(n.uid))throw new Error("Voc j faz parte desta equipe.");await this.createEnrollment(n.uid,s[i].eventId,s[i].sessionId,!0);const o=this.getItems(F.ENROLLMENTS),a=o.findIndex(l=>l.userId===n.uid&&l.eventId===s[i].eventId);a!==-1&&(o[a].teamId=e,this.saveItems(F.ENROLLMENTS,o)),s[i].members.push(n.uid),this.saveItems(F.TEAMS,s),await this.notificationService.createNotification({userId:s[i].captainId,title:"Novo membro na equipe! ",message:`${n.name||"Um usurio"} entrou na sua equipe ${s[i].name}.`,type:"success",createdAt:new Date().toISOString(),read:!1,link:`/event/${s[i].eventId}`})}async leaveTeam(e,n){var f;await Ce(500);const r=this.getItems(F.TEAMS),s=r.findIndex(p=>p.id===e);if(s===-1)throw new Error("Equipe no encontrada.");const i=r[s],o=this.getItems(F.EVENTS),a=o.findIndex(p=>p.id===i.eventId),l=localStorage.getItem(F.CURRENT_USER),u=l?JSON.parse(l):null,h=u==null?void 0:u.uid;if(i.captainId===n){for(const p of i.members){const w=this.getItems(F.ENROLLMENTS).find(T=>T.userId===p&&T.eventId===i.eventId);w&&await this.cancelEnrollment(w.id),p!==n&&await this.notificationService.createNotification({userId:p,title:"Equipe Desfeita ",message:`A equipe "${i.name}" foi desfeita pelo capito. Sua inscrio foi cancelada.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}if(r.splice(s,1),a!==-1){const p=o[a].sessions.findIndex(y=>y.id===i.sessionId);p!==-1&&(o[a].sessions[p].filled=Math.max(0,o[a].sessions[p].filled-1),this.saveItems(F.EVENTS,o))}}else{i.members=i.members.filter(b=>b!==n);const y=this.getItems(F.ENROLLMENTS).find(b=>b.userId===n&&b.eventId===i.eventId);y&&await this.cancelEnrollment(y.id);const T=((f=this.getItems(F.USERS).find(b=>b.uid===n))==null?void 0:f.name)||"Um membro";h!==n?await this.notificationService.createNotification({userId:n,title:"Removido da Equipe ",message:`Voc foi removido da equipe "${i.name}" pelo capito.`,type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"}):await this.notificationService.createNotification({userId:i.captainId,title:"Membro Saiu ",message:`${T} saiu da sua equipe "${i.name}".`,type:"info",read:!1,createdAt:new Date().toISOString(),link:`/event/${i.eventId}`})}this.saveItems(F.TEAMS,r)}async kickMember(e,n){return this.leaveTeam(e,n)}async getEnrollmentsForUser(e){return await Ce(300),this.getItems(F.ENROLLMENTS).filter(r=>r.userId===e&&r.status!==et.CANCELED)}async getUserEnrollmentsDetails(e){const n=this.getItems(F.ENROLLMENTS).filter(s=>s.userId===e&&s.status===et.CONFIRMED),r=this.getItems(F.EVENTS);return n.map(s=>{const i=r.find(a=>a.id===s.eventId),o=i==null?void 0:i.sessions.find(a=>a.id===s.sessionId);return!i||!o?null:{enrollmentId:s.id,eventName:i.name,eventLocation:i.location,sessionDate:o.date,sessionTime:`${o.startTime} - ${o.endTime}`,enrolledAt:s.enrolledAt}}).filter(Boolean)}async getEnrichedEnrollments(e){const n=this.getItems(F.ENROLLMENTS).filter(i=>i.eventId===e&&i.status===et.CONFIRMED),r=this.getItems(F.USERS),s=this.getItems(F.EVENTS).find(i=>i.id===e);return n.map(i=>{const o=r.find(l=>l.uid===i.userId),a=s==null?void 0:s.sessions.find(l=>l.id===i.sessionId);return{id:i.id,user:{uid:o==null?void 0:o.uid,name:(o==null?void 0:o.name)||"Desconhecido",email:(o==null?void 0:o.email)||"",rm:(o==null?void 0:o.rm)||"",courseId:o==null?void 0:o.courseId,classId:o==null?void 0:o.classId},session:{id:a==null?void 0:a.id,date:a==null?void 0:a.date,startTime:a==null?void 0:a.startTime,endTime:a==null?void 0:a.endTime},status:i.status,enrolledAt:i.enrolledAt,teamId:i.teamId,attended:i.attended,checkInAt:i.checkInAt}})}async getEnrollmentDetailsForEvent(e){const n=this.getItems(F.ENROLLMENTS).filter(i=>i.eventId===e&&i.status===et.CONFIRMED),r=this.getItems(F.USERS),s=this.getItems(F.EVENTS).find(i=>i.id===e);return n.map(i=>{const o=r.find(l=>l.uid===i.userId),a=s==null?void 0:s.sessions.find(l=>l.id===i.sessionId);return{Nome:(o==null?void 0:o.name)||"Desconhecido",Email:(o==null?void 0:o.email)||"",RM:(o==null?void 0:o.rm)||"",SessaoData:pn(a==null?void 0:a.date),SessaoHora:(a==null?void 0:a.startTime)||"",Status:i.status,DataInscricao:new Date(i.enrolledAt).toLocaleString("pt-BR"),Presenca:i.attended?"Sim":"No"}})}async createEnrollment(e,n,r,s=!1){await Ce(800);const i=this.getItems(F.EVENTS),o=i.findIndex(y=>y.id===n);if(o===-1)throw new Error("Evento no encontrado");const a=i[o].sessions.findIndex(y=>y.id===r);if(a===-1)throw new Error("Sesso no encontrada");const l=i[o].sessions[a];if(!s&&l.filled>=l.capacity)throw new Error("A sesso est lotada");const u=this.getItems(F.ENROLLMENTS),h=u.filter(y=>y.userId===e&&y.status===et.CONFIRMED);if(h.find(y=>y.eventId===n))throw new Error("Voc j est inscrito neste evento");for(const y of h){const w=i.find(b=>b.id===y.eventId),T=w==null?void 0:w.sessions.find(b=>b.id===y.sessionId);if(w&&T&&T.date===l.date&&l.startTime<T.endTime&&l.endTime>T.startTime)throw new Error(`CONFLICT|${w.name}|${T.startTime}|${T.endTime}`)}const p={id:`enr_${Date.now()}`,userId:e,eventId:n,sessionId:r,status:et.CONFIRMED,enrolledAt:new Date().toISOString(),attended:!1};return u.push(p),this.saveItems(F.ENROLLMENTS,u),s||(i[o].sessions[a].filled+=1,this.saveItems(F.EVENTS,i)),p}async cancelEnrollment(e){await Ce(500);const n=localStorage.getItem(F.CURRENT_USER),r=n?JSON.parse(n):null,s=r==null?void 0:r.uid,i=this.getItems(F.ENROLLMENTS),o=i.findIndex(u=>u.id===e);if(o===-1)throw new Error("Inscrio no encontrada");const a=i[o];let l=!0;if(a.teamId){const u=this.getItems(F.TEAMS),h=u.findIndex(f=>f.id===a.teamId);if(h!==-1){const f=u[h];f.members=f.members.filter(p=>p!==a.userId),f.captainId===a.userId?(u.splice(h,1),l=!0):l=!1,this.saveItems(F.TEAMS,u)}}if(l){const u=this.getItems(F.EVENTS),h=u.findIndex(f=>f.id===a.eventId);if(h!==-1){const f=u[h].sessions.findIndex(p=>p.id===a.sessionId);f!==-1&&(u[h].sessions[f].filled=Math.max(0,u[h].sessions[f].filled-1),this.saveItems(F.EVENTS,u))}}i.splice(o,1),this.saveItems(F.ENROLLMENTS,i),s&&a.userId!==s&&await this.notificationService.createNotification({userId:a.userId,title:"Inscrio Cancelada ",message:"Sua inscrio foi cancelada pela administrao.",type:"warning",read:!1,createdAt:new Date().toISOString(),link:"/dashboard"})}async markAttendance(e){await Ce(500);const n=this.getItems(F.ENROLLMENTS),r=n.findIndex(o=>o.id===e);if(r===-1)return{success:!1,message:"Inscrio no encontrada."};if(n[r].attended){const o=await new Cf().getUserProfile(n[r].userId),a=await new Af().getEventById(n[r].eventId);return{success:!1,message:"Check-in j realizado anteriormente.",alreadyAttended:!0,userName:(o==null?void 0:o.name)||"Desconhecido",eventName:(a==null?void 0:a.name)||"Evento"}}n[r].attended=!0,n[r].checkInAt=new Date().toISOString(),this.saveItems(F.ENROLLMENTS,n);const s=await new Cf().getUserProfile(n[r].userId),i=await new Af().getEventById(n[r].eventId);return{success:!0,message:"Check-in realizado com sucesso!",userName:s==null?void 0:s.name,eventName:i==null?void 0:i.name}}}class TD extends rl{async getNotifications(e){return this.getItems(F.NOTIFICATIONS).filter(r=>r.userId===e).sort((r,s)=>s.createdAt.localeCompare(r.createdAt))}subscribeToNotifications(e,n){n(this.getItems(F.NOTIFICATIONS).filter(s=>s.userId===e).sort((s,i)=>i.createdAt.localeCompare(s.createdAt)));const r=setInterval(()=>{const s=this.getItems(F.NOTIFICATIONS).filter(i=>i.userId===e).sort((i,o)=>o.createdAt.localeCompare(i.createdAt));n(s)},3e3);return()=>clearInterval(r)}async markNotificationAsRead(e){const n=this.getItems(F.NOTIFICATIONS),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].read=!0,this.saveItems(F.NOTIFICATIONS,n))}async markAllNotificationsAsRead(e){const n=this.getItems(F.NOTIFICATIONS);n.forEach(r=>{r.userId===e&&(r.read=!0)}),this.saveItems(F.NOTIFICATIONS,n)}async createNotification(e){const n=this.getItems(F.NOTIFICATIONS),r={...e,id:`notif_${Date.now()}`};n.push(r),this.saveItems(F.NOTIFICATIONS,n)}async saveDeviceToken(e,n){console.log(`[Mock] Saving device token for user ${e}: ${n}`)}}class kD extends rl{async resetAndSeedData(){localStorage.clear(),await Ce(500);const e=[{id:"c1",name:"Cincia da Computao"},{id:"c2",name:"Direito"},{id:"c3",name:"Medicina"}];this.saveItems(F.COURSES,e);const n=[{id:"t1",courseId:"c1",name:"CC-2024-A"}];this.saveItems(F.CLASSES,n);const r=[{uid:"u_admin",email:"admin@school.com",name:"Admin",role:Ye.ADMIN,isOnboarded:!0}];this.saveItems(F.USERS,r)}async exportData(){const e={};return[F.USERS,F.EVENTS,F.ENROLLMENTS,F.COURSES,F.CLASSES,F.TEAMS,F.NOTIFICATIONS].forEach(r=>{e[r]=this.getItems(r)}),JSON.stringify(e,null,2)}async importData(e){try{const n=JSON.parse(e);localStorage.clear();const r={users:F.USERS,events:F.EVENTS,enrollments:F.ENROLLMENTS,courses:F.COURSES,classes:F.CLASSES,teams:F.TEAMS,notifications:F.NOTIFICATIONS,[F.TEAMS]:F.TEAMS};Object.keys(n).forEach(s=>{const i=r[s]||s;if(Array.isArray(n[s])){const o=n[s].map(a=>{const{_id:l,...u}=a;return u});this.saveItems(i,o)}})}catch{throw new Error("Formato de JSON invlido.")}}}class SD{constructor(){this.authService=new Cf,this.eventService=new Af,this.notificationService=new TD,this.enrollmentService=new ID(this.notificationService),this.devService=new kD}login(e,n){return this.authService.login(e,n)}loginWithGoogle(){return this.authService.loginWithGoogle()}logout(){return this.authService.logout()}onAuthStateChanged(e){return this.authService.onAuthStateChanged(e)}updateUserProfile(e,n){return this.authService.updateUserProfile(e,n)}getUserProfile(e){return this.authService.getUserProfile(e)}getUsers(e){return this.authService.getUsers(e)}deleteUser(e){return this.authService.deleteUser(e)}updateUserRole(e,n){return this.authService.updateUserRole(e,n)}getCourses(){return this.eventService.getCourses()}addCourse(e){return this.eventService.addCourse(e)}updateCourse(e,n){return this.eventService.updateCourse(e,n)}deleteCourse(e){return this.eventService.deleteCourse(e)}getClasses(e){return this.eventService.getClasses(e)}addClass(e,n){return this.eventService.addClass(e,n)}updateClass(e,n){return this.eventService.updateClass(e,n)}deleteClass(e){return this.eventService.deleteClass(e)}getEvents(e){return this.eventService.getEvents(e)}getEventById(e){return this.eventService.getEventById(e)}getEventsByIds(e){return this.eventService.getEventsByIds(e)}getAvailableEventsForUser(e){return this.eventService.getAvailableEventsForUser(e)}getPublicEvents(){return this.eventService.getPublicEvents()}getEventsByParentId(e){return this.eventService.getEventsByParentId(e)}createEvent(e){return this.eventService.createEvent(e)}updateEvent(e){return this.eventService.updateEvent(e)}deleteEvent(e){return this.eventService.deleteEvent(e)}getTeamsForEvent(e){return this.enrollmentService.getTeamsForEvent(e)}createTeam(e,n,r){return this.enrollmentService.createTeam(e,n,r)}joinTeam(e,n,r){return this.enrollmentService.joinTeam(e,n,r)}leaveTeam(e,n){return this.enrollmentService.leaveTeam(e,n)}kickMember(e,n){return this.enrollmentService.kickMember(e,n)}getEnrollmentsForUser(e){return this.enrollmentService.getEnrollmentsForUser(e)}getUserEnrollmentsDetails(e){return this.enrollmentService.getUserEnrollmentsDetails(e)}getEnrichedEnrollments(e){return this.enrollmentService.getEnrichedEnrollments(e)}getEnrollmentDetailsForEvent(e){return this.enrollmentService.getEnrollmentDetailsForEvent(e)}createEnrollment(e,n,r,s){return this.enrollmentService.createEnrollment(e,n,r,s)}cancelEnrollment(e){return this.enrollmentService.cancelEnrollment(e)}markAttendance(e){return this.enrollmentService.markAttendance(e)}getNotifications(e){return this.notificationService.getNotifications(e)}subscribeToNotifications(e,n){return this.notificationService.subscribeToNotifications(e,n)}markNotificationAsRead(e){return this.notificationService.markNotificationAsRead(e)}markAllNotificationsAsRead(e){return this.notificationService.markAllNotificationsAsRead(e)}createNotification(e){return this.notificationService.createNotification(e)}saveDeviceToken(e,n){return this.notificationService.saveDeviceToken(e,n)}resetAndSeedData(){return this.devService.resetAndSeedData()}exportData(){return this.devService.exportData()}importData(e){return this.devService.importData(e)}}const bD=()=>Kn.useFirebase?new _D:new SD,ie=bD(),jI=j.createContext(void 0),ND=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(!0);j.useEffect(()=>{const u=ie.onAuthStateChanged(h=>{n(h),s(!1)});return()=>u()},[]);const i=async(u,h)=>{s(!0);try{await ie.login(u,h)}catch(f){throw console.error(f),s(!1),f}},o=async()=>{s(!0);try{await ie.loginWithGoogle()}catch(u){throw console.error(u),s(!1),u}},a=async()=>{s(!0),await ie.logout()},l=async()=>{if(e){s(!0);try{const u=await ie.getUserProfile(e.uid);n(u)}catch(u){console.error("Falha ao atualizar o perfil",u)}finally{s(!1)}}};return d.jsx(jI.Provider,{value:{user:e,loading:r,login:i,loginWithGoogle:o,logout:a,refreshProfile:l},children:t})},ur=()=>{const t=j.useContext(jI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},DI=j.createContext(void 0),CD=({children:t})=>{const[e,n]=j.useState([]),r=j.useCallback(i=>{n(o=>o.filter(a=>a.id!==i))},[]),s=j.useCallback((i,o)=>{const a=Math.random().toString(36).substr(2,9);n(l=>[...l,{id:a,type:i,message:o}]),setTimeout(()=>{r(a)},4e3)},[r]);return d.jsxs(DI.Provider,{value:{addToast:s,removeToast:r},children:[t,d.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(i=>d.jsxs("div",{className:`pointer-events-auto transform transition-all duration-300 ease-in-out translate-y-0 opacity-100 min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border-l-4 flex items-start justify-between bg-white dark:bg-darkcard dark:border-gray-600
              ${i.type==="success"?"border-green-500":""}
              ${i.type==="error"?"border-red-500":""}
              ${i.type==="warning"?"border-amber-500":""}
              ${i.type==="info"?"border-blue-500":""}
            `,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"text-xl mr-3",children:[i.type==="success"&&"",i.type==="error"&&"",i.type==="warning"&&"",i.type==="info"&&""]}),d.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:i.message})]}),d.jsx("button",{onClick:()=>r(i.id),className:"ml-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 focus:outline-none",children:""})]},i.id))})]})},uo=()=>{const t=j.useContext(DI);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},OI=j.createContext(void 0),AD=({children:t})=>{const[e,n]=j.useState(()=>{const s=localStorage.getItem("eduevent_theme");return s==="dark"||s==="light"?s:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});j.useEffect(()=>{const s=window.document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("eduevent_theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return d.jsx(OI.Provider,{value:{theme:e,toggleTheme:r},children:t})},RD=()=>{const t=j.useContext(OI);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},PD=()=>{const{user:t}=ur(),[e,n]=j.useState([]),[r,s]=j.useState(0),[i,o]=j.useState(!1),[a,l]=j.useState(!0),[u,h]=j.useState(typeof Notification<"u"?Notification.permission:"denied"),f=j.useCallback(async()=>{if(!(typeof Notification>"u"))try{const T=await Notification.requestPermission();h(T),T==="granted"&&new Notification("EduEvent",{body:"Notificaes ativadas com sucesso!",icon:"https://cdn-icons-png.flaticon.com/512/2995/2995458.png"})}catch(T){console.error("Error requesting notification permission:",T)}},[]);j.useEffect(()=>{if(!t)return;const T=ie.subscribeToNotifications(t.uid,b=>{if(b.length>0&&e.length>0){const _=b[0],E=e[0];_.id!==E.id&&!_.read&&Notification.permission==="granted"&&new Notification(_.title,{body:_.message,icon:"https://cdn-icons-png.flaticon.com/512/2995/2995458.png"})}n(b),s(b.filter(_=>!_.read).length),l(!1)});return()=>T()},[t]);const p=j.useCallback(async()=>{if(!t)return;const T=localStorage.getItem(`last_event_check_${t.uid}`),_=new Date().toISOString().split("T")[0];if(T!==_)try{const E=await ie.getEnrollmentsForUser(t.uid);if(E.length===0)return;const x=[...new Set(E.map(S=>S.eventId))],R=await ie.getEventsByIds(x),O=new Date;O.setDate(O.getDate()+1);const M=O.toISOString().split("T")[0];for(const S of E){const v=R.find(N=>N.id===S.eventId);if(!v)continue;const k=v.sessions.find(N=>N.id===S.sessionId);if(k&&(k.date===_||k.date===M)){const N=k.date===_,A=N?"Evento Hoje! ":"Evento Amanh! ",P=`No esquea: "${v.name}" acontece ${N?"hoje":"amanh"} s ${k.startTime}.`;e.some(Ge=>Ge.type==="reminder"&&Ge.message===P)||await ie.createNotification({userId:t.uid,title:A,message:P,type:"reminder",read:!1,createdAt:new Date().toISOString(),link:`/event/${v.id}`})}}localStorage.setItem(`last_event_check_${t.uid}`,_)}catch(E){console.error("Error checking upcoming events",E)}},[t,e]);return j.useEffect(()=>{p()},[p]),{notifications:e,unreadCount:r,isOpen:i,setIsOpen:o,markAsRead:async T=>{n(b=>b.map(_=>_.id===T?{..._,read:!0}:_)),s(b=>Math.max(0,b-1)),await ie.markNotificationAsRead(T)},markAllAsRead:async()=>{t&&(n(T=>T.map(b=>({...b,read:!0}))),s(0),await ie.markAllNotificationsAsRead(t.uid))},loading:a,permission:u,requestPermission:f}},kv=()=>{const{notifications:t,unreadCount:e,isOpen:n,setIsOpen:r,markAsRead:s,markAllAsRead:i,permission:o,requestPermission:a}=PD(),l=j.useRef(null);j.useEffect(()=>{const h=f=>{l.current&&!l.current.contains(f.target)&&r(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r]);const u=h=>{switch(h){case"success":return"";case"warning":return"";case"reminder":return"";default:return""}};return d.jsxs("div",{className:"relative",ref:l,children:[d.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none",children:[d.jsx("span",{className:"sr-only",children:"Notificaes"}),d.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e>0&&d.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2.5 w-2.5 rounded-full ring-2 ring-white dark:ring-gray-800 bg-red-500 animate-pulse"})]}),n&&d.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-80 rounded-md shadow-lg bg-white dark:bg-darkcard ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden border border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"py-2 px-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800",children:[d.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"Notificaes"}),e>0&&d.jsx("button",{onClick:i,className:"text-xs text-primary hover:text-indigo-600 dark:text-indigo-400",children:"Marcar todas como lidas"})]}),o==="default"&&d.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-100 dark:border-indigo-800/30",children:[d.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mb-2",children:"Receba alertas sobre eventos e mudanas na sua equipe."}),d.jsx("button",{onClick:a,className:"w-full py-1.5 px-3 bg-white dark:bg-indigo-700 border border-indigo-200 dark:border-indigo-600 rounded text-xs font-bold text-indigo-600 dark:text-white hover:bg-indigo-50 dark:hover:bg-indigo-600 transition-colors shadow-sm",children:"Ativar notificaes no desktop "})]}),d.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.length===0?d.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma notificao."}):d.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:t.map(h=>d.jsx("li",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${h.read?"":"bg-indigo-50/50 dark:bg-indigo-900/10"}`,onClick:()=>s(h.id),children:d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"flex-shrink-0 text-xl pt-1",children:u(h.type)}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:`text-sm font-medium ${h.read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:h.title}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.message}),d.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[d.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(h.createdAt).toLocaleDateString()}),h.link&&d.jsx(ve,{to:h.link,className:"text-xs text-primary font-bold hover:underline",onClick:()=>r(!1),children:"Ver Detalhes"})]})]}),!h.read&&d.jsx("div",{className:"flex-shrink-0 self-center",children:d.jsx("span",{className:"block h-2 w-2 rounded-full bg-primary"})})]})},h.id))})})]})]})},Un=({children:t})=>{const{user:e,logout:n}=ur(),{theme:r,toggleTheme:s}=RD(),i=Xr(),o=cr(),[a,l]=j.useState(!1),u=async()=>{await n(),i("/")},h=p=>o.pathname===p?"bg-indigo-50 border-primary text-primary dark:bg-indigo-900/50 dark:text-indigo-200":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200",f=p=>o.pathname===p?"border-primary text-gray-900 dark:text-white dark:border-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200";return e?d.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-darkbg transition-colors duration-200",children:[d.jsxs("nav",{className:"bg-white dark:bg-darkcard shadow-sm sticky top-0 z-50 transition-colors duration-200",children:[d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between h-16",children:[d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0 flex items-center",children:d.jsx(ve,{to:"/dashboard",className:"text-primary font-bold text-xl tracking-tight dark:text-indigo-400",children:"EduEvent"})}),d.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[d.jsx(ve,{to:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${f("/dashboard")}`,children:"Eventos"}),d.jsx(ve,{to:"/my-enrollments",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${f("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===Ye.ADMIN&&d.jsxs(d.Fragment,{children:[d.jsx(ve,{to:"/admin/scanner",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${f("/admin/scanner")}`,children:"Scanner"}),d.jsx(ve,{to:"/admin/events",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${f("/admin/events")}`,children:"Admin Eventos"}),d.jsx(ve,{to:"/admin/courses",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${f("/admin/courses")}`,children:"Admin Cursos"}),d.jsx(ve,{to:"/admin/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${f("/admin/users")}`,children:"Admin Usurios"}),d.jsx(ve,{to:"/admin/dev",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium text-amber-600 dark:text-amber-400 ${f("/admin/dev")}`,children:"Dev"})]})]})]}),d.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[d.jsx(kv,{}),d.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",title:r==="dark"?"Mudar para modo claro":"Mudar para modo escuro",children:r==="dark"?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),d.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[d.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:e.name||e.email}),d.jsx("button",{onClick:u,className:"relative inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-indigo-700 shadow-sm focus:outline-none transition-colors",children:"Sair"})]})]}),d.jsxs("div",{className:"-mr-2 flex items-center sm:hidden gap-2",children:[d.jsx(kv,{}),d.jsx("button",{onClick:s,className:"p-3 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",children:r==="dark"?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),d.jsxs("button",{onClick:()=>l(!a),type:"button",className:"bg-white dark:bg-gray-800 inline-flex items-center justify-center p-3 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-controls":"mobile-menu","aria-expanded":"false",children:[d.jsx("span",{className:"sr-only",children:"Abrir menu principal"}),a?d.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):d.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]})]})}),a&&d.jsxs("div",{className:"sm:hidden border-t border-gray-200 dark:border-gray-700",id:"mobile-menu",children:[d.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[d.jsx(ve,{to:"/dashboard",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${h("/dashboard")}`,children:"Eventos"}),d.jsx(ve,{to:"/my-enrollments",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${h("/my-enrollments")}`,children:"Minhas Inscries"}),e.role===Ye.ADMIN&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"pt-4 pb-2",children:d.jsx("span",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Administrao"})}),d.jsx(ve,{to:"/admin/scanner",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${h("/admin/scanner")}`,children:"Scanner Check-in"}),d.jsx(ve,{to:"/admin/events",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${h("/admin/events")}`,children:"Gerenciar Eventos"}),d.jsx(ve,{to:"/admin/courses",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${h("/admin/courses")}`,children:"Gerenciar Cursos"}),d.jsx(ve,{to:"/admin/users",onClick:()=>l(!1),className:`block pl-3 pr-4 py-3 border-l-4 text-base font-medium transition-colors ${h("/admin/users")}`,children:"Gerenciar Usurios"}),d.jsx(ve,{to:"/admin/dev",onClick:()=>l(!1),className:"block pl-3 pr-4 py-3 border-l-4 text-base font-medium text-amber-600 bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-700 dark:text-amber-500",children:"Dev"})]})]}),d.jsxs("div",{className:"pt-4 pb-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center px-4",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-200 font-bold text-lg",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:e.name||"Usurio"}),d.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e.email})]})]}),d.jsx("div",{className:"mt-3 space-y-1",children:d.jsx("button",{onClick:u,className:"block w-full text-left px-4 py-3 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700",children:"Sair do Sistema"})})]})]})]}),d.jsx("main",{className:"flex-1 py-6",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t})})]}):d.jsx(d.Fragment,{children:t})},Ar=({children:t,isLoading:e=!1,variant:n="primary",className:r="",disabled:s,...i})=>{const o="relative inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",a={primary:"border-transparent text-white bg-primary hover:bg-indigo-700 focus:ring-primary",secondary:"border-transparent text-white bg-secondary hover:bg-emerald-700 focus:ring-secondary",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500",outline:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary"};return d.jsxs("button",{disabled:e||s,className:`${o} ${a[n]} ${r}`,...i,children:[d.jsx("span",{className:e?"invisible":"",children:t}),e&&d.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:d.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})},iu=t=>{const e=(t==null?void 0:t.code)||"",n=(t==null?void 0:t.message)||"";if(typeof n=="string"&&n.startsWith("CONFLICT|")){const r=n.split("|");return r.length>=4?`Conflito de horrio! Voc j possui o evento "${r[1]}" agendado entre ${r[2]} e ${r[3]}.`:"Conflito de horrio com outro evento j agendado."}if(n==="A sesso est lotada"||n.includes("capacidade mxima"))return"Que pena! Esta sesso acabou de lotar.";if(n.includes("j est inscrito"))return"Voc j garantiu sua vaga neste evento!";if(n.includes("Evento no encontrado"))return"O evento que voc procura no est mais disponvel.";switch(e){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":return"E-mail ou senha incorretos. Verifique e tente novamente.";case"auth/email-already-in-use":return"Este e-mail j est sendo usado por outra conta.";case"auth/weak-password":return"Sua senha  muito fraca. Escolha uma senha mais forte.";case"auth/invalid-email":return"O formato do e-mail  invlido.";case"auth/user-disabled":return"Esta conta foi desativada. Contate o administrador.";case"auth/too-many-requests":return"Muitas tentativas consecutivas. Aguarde alguns instantes.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/popup-closed-by-user":return"O login foi cancelado.";case"permission-denied":return"Voc no tem permisso para realizar esta ao.";default:return n||"Ocorreu um erro inesperado. Tente novamente mais tarde."}},ys=({label:t,error:e,helperText:n,as:r="input",className:s="",children:i,id:o,...a})=>{const l=o||a.name||Math.random().toString(36).substr(2,9),u=`${l}-error`,h=`${l}-helper`,f=`
    appearance-none 
    block 
    w-full 
    px-4 
    py-3 
    text-base 
    rounded-lg 
    border 
    bg-white dark:bg-gray-800 
    text-gray-900 dark:text-white 
    placeholder-gray-400 
    focus:outline-none 
    focus:ring-2 
    focus:ring-offset-0
    transition-shadow 
    duration-200
  `,p=e?"border-red-300 focus:border-red-500 focus:ring-red-200 dark:border-red-800 dark:focus:ring-red-900/30":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-indigo-100 dark:focus:ring-indigo-900/30",y=[e?u:void 0,n?h:void 0].filter(Boolean).join(" ")||void 0;return d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 ml-1",children:t}),d.jsx("div",{className:"relative",children:r==="select"?d.jsx("select",{id:l,className:`${f} ${p} ${s} pr-10`,"aria-invalid":!!e,"aria-describedby":y,...a,children:i}):d.jsx("input",{id:l,className:`${f} ${p} ${s}`,"aria-invalid":!!e,"aria-describedby":y,...a})}),e?d.jsxs("p",{id:u,className:"mt-1.5 text-sm text-red-600 dark:text-red-400 flex items-center animate-fade-in ml-1",role:"alert",children:[d.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]}):n?d.jsx("p",{id:h,className:"mt-1.5 text-sm text-gray-500 dark:text-gray-400 ml-1",children:n}):null]})},jD=()=>{var b,_;const[t,e]=j.useState(""),[n,r]=j.useState(""),{user:s,loading:i,login:o,loginWithGoogle:a}=ur(),l=Xr(),u=cr(),{addToast:h}=uo(),[f,p]=j.useState(!1),y=(_=(b=u.state)==null?void 0:b.from)!=null&&_.pathname?u.state.from.pathname+(u.state.from.search||""):"/dashboard";j.useEffect(()=>{!i&&s&&l(y,{replace:!0})},[s,i,l,y]);const w=async E=>{E.preventDefault(),p(!0);try{await o(t,n),h("success","Login realizado com sucesso!")}catch(x){const R=iu(x);h("error",R)}finally{p(!1)}},T=async()=>{p(!0);try{await a(),h("success","Autenticado com Google!")}catch(E){const x=iu(E);h("error",x),p(!1)}};return i||!i&&s?d.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-primary font-medium",children:"Verificando sesso..."}):d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:d.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[d.jsx("div",{className:"flex justify-start",children:d.jsxs(ve,{to:"/",className:"flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors font-medium p-2 -ml-2 rounded-lg active:bg-gray-100 dark:active:bg-gray-800",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para o incio"]})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-bold text-primary dark:text-indigo-400",children:"EduEvent"}),d.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Acesse sua conta"}),d.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:Kn.useFirebase?"Gerencie suas inscries e eventos em um s lugar.":"Ambiente de Demonstrao (Mock)"})]}),d.jsxs("form",{className:"mt-8 space-y-2",onSubmit:w,children:[d.jsx(ys,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,label:"E-mail",placeholder:"seu@email.com",value:t,onChange:E=>e(E.target.value),inputMode:"email"}),d.jsx(ys,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:Kn.useFirebase,label:"Senha",placeholder:"",value:n,onChange:E=>r(E.target.value),enterKeyHint:"go"}),d.jsx("div",{className:"pt-4",children:d.jsx(Ar,{type:"submit",isLoading:f,className:"w-full h-12 text-base shadow-lg shadow-indigo-200 dark:shadow-none",children:"Acessar Plataforma"})}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-gray-50 dark:bg-darkbg text-gray-500 dark:text-gray-400",children:"Ou entre rapidamente com"})})]}),d.jsxs("button",{type:"button",onClick:T,disabled:f,className:"w-full h-12 flex items-center justify-center px-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-70 transition-colors active:scale-[0.98]",children:[d.jsxs("svg",{className:"h-5 w-5 mr-3","aria-hidden":"true",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),!Kn.useFirebase&&d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 p-4 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[d.jsx("p",{className:"font-bold mb-2",children:"Ambiente de Teste (Mock):"}),d.jsxs("ul",{className:"space-y-2",children:[d.jsx("li",{onClick:()=>e("student@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" student@school.com"}),d.jsx("li",{onClick:()=>e("admin@school.com"),className:"cursor-pointer hover:text-primary transition-colors p-2 bg-white dark:bg-gray-800 rounded shadow-sm border border-gray-100 dark:border-gray-700",children:" admin@school.com"})]})]})]})})},DD=()=>{const{user:t,refreshProfile:e}=ur(),n=Xr(),{addToast:r}=uo(),[s,i]=j.useState([]),[o,a]=j.useState([]),[l,u]=j.useState(!1),[h,f]=j.useState({name:(t==null?void 0:t.name)||"",rm:"",courseId:"",classId:""});j.useEffect(()=>{if(t!=null&&t.isOnboarded){n("/dashboard");return}ie.getCourses().then(i)},[t,n]),j.useEffect(()=>{h.courseId&&(ie.getClasses(h.courseId).then(a),f(y=>({...y,classId:""})))},[h.courseId]);const p=async y=>{if(y.preventDefault(),!!t){u(!0);try{const w={...h,email:t.email,role:t.role};await ie.updateUserProfile(t.uid,w),await e(),r("success","Perfil completado com sucesso! Bem-vindo."),n("/dashboard")}catch(w){const T=iu(w);r("error",T)}finally{u(!1)}}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full space-y-8",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Complete seu perfil"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Precisamos de mais alguns detalhes antes de comear."})]}),d.jsxs("form",{className:"mt-8 space-y-4",onSubmit:p,children:[d.jsx(ys,{id:"name",name:"name",type:"text",required:!0,label:"Nome Completo",placeholder:"Ex: Joo da Silva",value:h.name,onChange:y=>f({...h,name:y.target.value}),autoComplete:"name"}),d.jsx(ys,{id:"rm",name:"rm",type:"text",required:!0,label:"Registro de Matrcula (RM)",placeholder:"Ex: 12345",value:h.rm,onChange:y=>f({...h,rm:y.target.value}),inputMode:"numeric"}),d.jsxs(ys,{as:"select",label:"Curso",required:!0,value:h.courseId,onChange:y=>f({...h,courseId:y.target.value}),children:[d.jsx("option",{value:"",children:"Selecione o Curso"}),s.map(y=>d.jsx("option",{value:y.id,children:y.name},y.id))]}),d.jsxs(ys,{as:"select",label:"Turma",required:!0,disabled:!h.courseId,value:h.classId,onChange:y=>f({...h,classId:y.target.value}),className:"disabled:opacity-50",children:[d.jsx("option",{value:"",children:"Selecione a Turma"}),o.map(y=>d.jsx("option",{value:y.id,children:y.name},y.id))]}),d.jsx("div",{className:"pt-4",children:d.jsx(Ar,{type:"submit",isLoading:l,className:"w-full h-12 text-base shadow-lg",children:"Concluir Cadastro"})})]})]})})},OD=(t,e={})=>{const[n,r]=j.useState(null),[s,i]=j.useState(null),o=e.minSwipeDistance||50;return{onTouchStart:h=>{i(null),r({x:h.targetTouches[0].clientX,y:h.targetTouches[0].clientY})},onTouchMove:h=>{i({x:h.targetTouches[0].clientX,y:h.targetTouches[0].clientY})},onTouchEnd:()=>{if(!n||!s)return;const h=n.x-s.x,f=n.y-s.y;if(Math.abs(h)>Math.abs(f)){if(Math.abs(h)<o)return;h>0?t.onSwipeLeft&&t.onSwipeLeft():t.onSwipeRight&&t.onSwipeRight()}else{if(Math.abs(f)<o)return;f>0?t.onSwipeUp&&t.onSwipeUp():t.onSwipeDown&&t.onSwipeDown()}}}},vs=({isOpen:t,onClose:e,title:n,children:r})=>{const s=j.useRef(null),i=j.useRef(null),o=OD({onSwipeDown:e});return j.useEffect(()=>(t?(i.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{s.current&&s.current.focus()},50)):(document.body.style.overflow="unset",i.current&&i.current.focus()),()=>{document.body.style.overflow="unset"}),[t]),j.useEffect(()=>{const a=l=>{l.key==="Escape"&&e()};return t&&window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[t,e]),t?d.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:d.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-80 transition-opacity animate-fade-in","aria-hidden":"true",onClick:e}),d.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),d.jsxs("div",{ref:s,tabIndex:-1,className:`
              inline-block align-bottom bg-white dark:bg-darkcard 
              rounded-t-2xl sm:rounded-lg 
              text-left overflow-hidden shadow-xl 
              transform transition-all 
              w-full sm:my-8 sm:align-middle sm:max-w-lg 
              animate-slide-in outline-none
              relative
            `,...o,children:[d.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1",onClick:e,children:d.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),d.jsx("div",{className:"bg-white dark:bg-darkcard px-4 pt-2 pb-4 sm:p-6 sm:pb-4",children:d.jsx("div",{className:"sm:flex sm:items-start",children:d.jsxs("div",{className:"mt-2 text-center sm:mt-0 sm:text-left w-full",children:[d.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:n}),d.jsx("div",{className:"mt-4 text-gray-600 dark:text-gray-300",children:r})]})})}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-4 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-100 dark:border-gray-700",children:d.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm sm:py-2 transition-colors active:scale-[0.98]",onClick:e,children:"Fechar"})})]})]})}):null},MD=({currentPage:t,totalItems:e,itemsPerPage:n,onPageChange:r})=>{const s=Math.ceil(e/n);if(s<=1)return null;const i=()=>{const o=[];if(s<=7)for(let a=1;a<=s;a++)o.push(a);else t<=4?o.push(1,2,3,4,5,"...",s):t>=s-3?o.push(1,"...",s-4,s-3,s-2,s-1,s):o.push(1,"...",t-1,t,t+1,"...",s);return o};return d.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-lg shadow-sm",children:[d.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[d.jsx("button",{onClick:()=>r(Math.max(1,t-1)),disabled:t===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),d.jsx("button",{onClick:()=>r(Math.min(s,t+1)),disabled:t===s,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Prximo"})]}),d.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[d.jsx("div",{children:d.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",d.jsx("span",{className:"font-medium",children:(t-1)*n+1})," a ",d.jsx("span",{className:"font-medium",children:Math.min(t*n,e)})," de ",d.jsx("span",{className:"font-medium",children:e})," resultados"]})}),d.jsx("div",{children:d.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[d.jsxs("button",{onClick:()=>r(Math.max(1,t-1)),disabled:t===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[d.jsx("span",{className:"sr-only",children:"Anterior"}),d.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),i().map((o,a)=>typeof o=="number"?d.jsx("button",{onClick:()=>r(o),"aria-current":t===o?"page":void 0,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${t===o?"z-10 bg-primary text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:o},a):d.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."},a)),d.jsxs("button",{onClick:()=>r(Math.min(s,t+1)),disabled:t===s,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[d.jsx("span",{className:"sr-only",children:"Prximo"}),d.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},MI=(t,e)=>{const[n,r]=j.useState(null),[s,i]=j.useState(!1),{addToast:o}=uo(),a=j.useCallback(()=>{r(null)},[]),l=j.useCallback(async(h,f)=>{if(t){a(),i(!0);try{await ie.createEnrollment(t.uid,h.id,f),o("success",`Inscrio confirmada em ${h.name}!`),setTimeout(()=>e(),500)}catch(p){const y=p.message||"";if(y.startsWith("CONFLICT|")){const[w,T,b,_]=y.split("|");r({name:T,time:`${b} - ${_}`}),o("warning","Conflito de horrio detectado.")}else{const w=iu(p);o("error",w)}}finally{i(!1)}}},[t,e,a,o]),u=j.useCallback(async h=>{if(t){i(!0);try{await ie.cancelEnrollment(h),o("success","Inscrio cancelada com sucesso."),setTimeout(()=>e(),500)}catch(f){o("error","Erro ao cancelar inscrio."),console.error(f)}finally{i(!1)}}},[t,e,o]);return{handleEnroll:l,handleCancel:u,isProcessing:s,isEnrolling:s,conflictData:n,clearState:a}};function LD(t,e=300){const[n,r]=j.useState(t);return j.useEffect(()=>{const s=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(s)}},[t,e]),n}const VD=t=>{const[e,n]=j.useState([]),[r,s]=j.useState([]),[i,o]=j.useState(!0),[a,l]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState(!1),[y,w]=j.useState(1),T=9,b=LD(a,300),_=j.useCallback(async(M=!0)=>{if(t){M&&o(!0);try{const[S,v]=await Promise.all([ie.getAvailableEventsForUser(t),ie.getEnrollmentsForUser(t.uid)]);n(S),s(v)}catch(S){console.error(S)}finally{M&&o(!1)}}},[t]);j.useEffect(()=>{_()},[_]);const E=j.useMemo(()=>{const M=new Set;return e.forEach(S=>{S.parentId&&M.add(S.parentId)}),M},[e]),x=j.useMemo(()=>{const M=new Date().toISOString().split("T")[0];return e.filter(S=>{if(S.parentId)return!1;const v=S.name.toLowerCase().includes(b.toLowerCase())||S.description.toLowerCase().includes(b.toLowerCase()),k=e.filter(C=>C.parentId===S.id),N=[...S.sessions,...k.flatMap(C=>C.sessions)],A=u?N.some(C=>C.date===u):!0,P=f||N.some(C=>C.date>=M);return v&&A&&P})},[e,b,u,f]);j.useEffect(()=>{w(1)},[b,u,f]);const R=j.useMemo(()=>{const M=(y-1)*T;return x.slice(M,M+T)},[x,y]),O=(M,S)=>r.find(v=>v.eventId===M&&v.sessionId===S);return{events:e,filteredEvents:x,paginatedEvents:R,parentIds:E,loading:i,filters:{searchTerm:a,setSearchTerm:l,filterDate:u,setFilterDate:h,showPastEvents:f,setShowPastEvents:p},pagination:{currentPage:y,setCurrentPage:w,totalItems:x.length,itemsPerPage:T},helpers:{getEnrollment:O},refresh:()=>_(!1)}},FD=()=>d.jsx("li",{className:"px-6 py-4 animate-pulse",children:d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/5"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/5"})]}),d.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})}),UD=()=>d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col h-full animate-pulse",children:[d.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-1/3"})]}),d.jsx("div",{className:"h-5 bg-gray-200 rounded w-4/5 mb-2"}),d.jsxs("div",{className:"space-y-2 flex-1",children:[d.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})})]}),d.jsx("div",{className:"w-full h-12 bg-gray-100 border-t border-gray-200"})]}),b4=()=>d.jsxs("tr",{className:"animate-pulse",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),d.jsxs("div",{className:"ml-4 space-y-2",children:[d.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-y-2",children:[d.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:d.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 inline-block"})})]}),N4=()=>d.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col space-y-3 animate-pulse",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]}),d.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-16"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t border-b border-gray-100 py-2",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"h-2 bg-gray-200 rounded w-10"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),d.jsx("div",{className:"flex justify-end pt-1",children:d.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"})})]}),LI=({icon:t,title:e,description:n,action:r})=>d.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center bg-white dark:bg-darkcard rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[d.jsx("div",{className:"text-5xl text-gray-300 dark:text-gray-600 mb-4 transition-colors duration-200",children:t||""}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:e}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mb-6",children:n}),r&&d.jsx("button",{onClick:r.onClick,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:r.label})]}),Vp=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmText:i="Confirmar",cancelText:o="Cancelar",isProcessing:a=!1,variant:l="danger"})=>d.jsx(vs,{isOpen:t,onClose:()=>!a&&e(),title:r,children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"text-gray-700",children:s}),d.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[d.jsx("button",{onClick:e,disabled:a,className:"px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 text-gray-800 text-sm font-medium disabled:opacity-50",children:o}),d.jsx(Ar,{onClick:n,isLoading:a,variant:l,children:i})]})]})}),BD=({isOpen:t,onClose:e})=>{const[n,r]=j.useState(0),[s,i]=j.useState(!1);if(!t)return null;const o=[{title:"Bem-vindo ao EduEvent! ",description:"Sua nova central para descobrir, gerenciar e participar dos melhores eventos acadmicos e escolares da sua instituio.",color:"bg-indigo-500",image:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-indigo-600 dark:text-indigo-400",children:[d.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),d.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})},{title:"Explore Eventos Incrveis ",description:"Navegue pelo Dashboard para encontrar eventos. Use os filtros inteligentes para buscar por data, nome ou ver apenas o que  relevante para seu curso.",color:"bg-emerald-500",image:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-emerald-600 dark:text-emerald-400",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),d.jsx("path",{d:"M11 8v6M8 11h6"})]})},{title:"Inscrio em 1 Clique ",description:"Gostou de um evento? Clique em 'Garantir Vaga' ou 'Inscrever'. O sistema verifica conflitos de horrio automaticamente para voc.",color:"bg-amber-500",image:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-amber-600 dark:text-amber-400",children:[d.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),d.jsx("polyline",{points:"14 2 14 8 20 8"}),d.jsx("path",{d:"M9 15l2 2 4-4"})]})},{title:"Sua Agenda Organizada ",description:"Acesse 'Minhas Inscries' para ver todos os seus compromissos confirmados. Voc pode cancelar inscries se mudar de ideia.",color:"bg-purple-500",image:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-purple-600 dark:text-purple-400",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),d.jsx("path",{d:"M8 14h.01"}),d.jsx("path",{d:"M12 14h.01"}),d.jsx("path",{d:"M16 14h.01"}),d.jsx("path",{d:"M8 18h.01"}),d.jsx("path",{d:"M12 18h.01"}),d.jsx("path",{d:"M16 18h.01"})]})},{title:"Tudo Pronto! ",description:"Voc j sabe o bsico. Agora  com voc! Explore, aprenda e aproveite ao mximo os eventos da sua escola.",color:"bg-primary",image:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"w-32 h-32 text-primary dark:text-indigo-400",children:[d.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),d.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),d.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),d.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]})}],a=()=>{n<o.length-1?(i(!0),setTimeout(()=>{r(h=>h+1),i(!1)},300)):e()},l=()=>{e()},u=o[n];return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity",onClick:l}),d.jsxs("div",{className:"relative bg-white dark:bg-darkcard w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col min-h-[500px] animate-fade-in border border-gray-100 dark:border-gray-700",children:[d.jsx("div",{className:`h-2 w-full ${u.color} transition-colors duration-500`}),d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[d.jsx("div",{className:`mb-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-full transition-all duration-300 transform ${s?"opacity-0 scale-90 translate-x-4":"opacity-100 scale-100 translate-x-0"}`,children:u.image}),d.jsxs("div",{className:`transition-all duration-300 ${s?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:u.title}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:u.description})]})]}),d.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700",children:[d.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:o.map((h,f)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${f===n?`w-6 ${u.color}`:"w-2 bg-gray-300 dark:bg-gray-600"}`},f))}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 font-medium text-sm px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Pular Tutorial"}),d.jsxs("button",{onClick:a,className:`px-6 py-2.5 rounded-xl text-white font-bold shadow-lg shadow-indigo-500/20 transform transition active:scale-95 flex items-center ${u.color} hover:brightness-110`,children:[n===o.length-1?"Comear Agora":"Prximo",n<o.length-1&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})},$D=Bt.memo(({event:t,hasChildren:e,onAction:n})=>{const r=!e&&t.sessions.length===1?t.sessions[0]:null,s=r?r.capacity:0,i=r?r.filled:0,o=s>0?i/s*100:0,a=s>0&&i>=s;let l="bg-indigo-500",u="Pblico";return t.visibility==="course"&&(l="bg-emerald-500",u="Meu Curso"),t.visibility==="class"&&(l="bg-purple-500",u="Minha Turma"),d.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col h-full relative animate-fade-in hover:-translate-y-1",children:[d.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${l} opacity-80`}),d.jsxs("div",{className:"p-5 flex-1 flex flex-col ml-2",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex gap-2 flex-wrap",children:[d.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md ${l} bg-opacity-10 dark:bg-opacity-20 text-gray-700 dark:text-gray-200`,children:u}),t.isTeamEvent&&d.jsxs("span",{className:"text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded-md bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 flex items-center gap-1",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Equipe"]})]}),e?d.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full font-medium border border-gray-200 dark:border-gray-600",children:"Evento Principal"}):a&&r?d.jsxs("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[d.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Esgotado"]}):d.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs px-2 py-1 rounded-full font-bold flex items-center",children:[d.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Aberto"]})]}),d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:t.name}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:t.description}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("span",{className:"font-medium",children:t.location})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-8 flex justify-center text-gray-400 dark:text-gray-500 mr-2",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),d.jsx("span",{className:"font-medium",children:e?"Ver programao completa":t.sessions.length>1?`${t.sessions.length} horrios disponveis`:`${pn(r==null?void 0:r.date)}  ${r==null?void 0:r.startTime}`})]})]}),!e&&r&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[d.jsx("span",{className:a?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:a?"Sem vagas":t.isTeamEvent?`${s-i} equipes restantes`:`${s-i} vagas restantes`}),d.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:[Math.round(o),"%"]})]}),d.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:d.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${a?"bg-red-500":o>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${o}%`}})})]})]}),d.jsxs("button",{onClick:()=>n(t),className:"w-full py-3 text-sm font-bold text-primary dark:text-indigo-300 bg-indigo-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors border-t border-indigo-100 dark:border-gray-700 flex justify-center items-center",children:[e||t.isTeamEvent?"Ver Detalhes":"Ver Detalhes e Inscrever",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),zD=({searchTerm:t,onSearchChange:e,filterDate:n,onDateChange:r,showPastEvents:s,onTogglePast:i})=>d.jsxs("div",{className:"bg-white dark:bg-darkcard p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col lg:flex-row gap-4 items-end transition-colors duration-200",children:[d.jsxs("div",{className:"flex-1 w-full",children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Buscar Evento"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),d.jsx("input",{type:"text",placeholder:"Nome, descrio, local...",className:"pl-10 w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:t,onChange:o=>e(o.target.value)})]})]}),d.jsxs("div",{className:"w-full lg:w-48",children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wider",children:"Data Especfica"}),d.jsx("input",{type:"date",className:"w-full border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white py-2.5 transition-colors",value:n,onChange:o=>r(o.target.value)})]}),d.jsx("div",{className:"w-full lg:w-auto pb-2",children:d.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[d.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[d.jsx("input",{type:"checkbox",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:s,onChange:o=>i(o.target.checked),style:{right:s?"0":"auto",left:s?"auto":"0",borderColor:s?"#4F46E5":"#E5E7EB"}}),d.jsx("label",{className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${s?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`})]}),d.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mostrar Passados"})]})})]}),qD=()=>{const{user:t}=ur(),e=Xr(),{events:n,paginatedEvents:r,parentIds:s,loading:i,filters:o,pagination:a,helpers:l,refresh:u}=VD(t),[h,f]=j.useState(null),[p,y]=j.useState(null),[w,T]=j.useState(!1);j.useEffect(()=>{if(!localStorage.getItem("eduevent_tutorial_completed")){const k=setTimeout(()=>T(!0),1e3);return()=>clearTimeout(k)}},[]);const b=()=>{T(!1),localStorage.setItem("eduevent_tutorial_completed","true")},_=j.useCallback(()=>{u(),y(null)},[u]),{handleEnroll:E,handleCancel:x,isProcessing:R,conflictData:O,clearState:M}=MI(t,_);j.useEffect(()=>{if(h){const v=n.find(k=>k.id===h.id);v&&JSON.stringify(v)!==JSON.stringify(h)&&f(v)}},[n,h]);const S=j.useCallback(v=>{s.has(v.id)||v.isTeamEvent?e(`/event/${v.id}`):(M(),f(v))},[s,e,M]);return d.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[d.jsx(BD,{isOpen:w,onClose:b}),d.jsx("header",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Dashboard de Eventos"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Explore e inscreva-se nas atividades disponveis para seu perfil."})]})}),d.jsx(zD,{searchTerm:o.searchTerm,onSearchChange:o.setSearchTerm,filterDate:o.filterDate,onDateChange:o.setFilterDate,showPastEvents:o.showPastEvents,onTogglePast:o.setShowPastEvents}),i?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((v,k)=>d.jsx(UD,{},k))}):r.length===0?d.jsx(LI,{title:"Nenhum evento encontrado",description:n.length===0?"No h eventos disponveis para o seu curso ou turma no momento.":o.showPastEvents?"Nenhum evento corresponde aos filtros de busca.":"No h eventos futuros correspondentes. Tente ativar 'Mostrar Passados'.",action:!o.showPastEvents&&n.length>0?{label:"Ver histrico de eventos",onClick:()=>o.setShowPastEvents(!0)}:void 0}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(v=>d.jsx($D,{event:v,hasChildren:s.has(v.id),onAction:S},v.id))}),d.jsx(MD,{currentPage:a.currentPage,totalItems:a.totalItems,itemsPerPage:a.itemsPerPage,onPageChange:a.setCurrentPage})]}),d.jsx(vs,{isOpen:!!h,onClose:()=>f(null),title:h?h.name:"",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:d.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:h==null?void 0:h.description})}),O&&d.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md animate-slide-in",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),d.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[d.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[d.jsx("p",{className:"font-semibold",children:O.name}),d.jsx("p",{className:"text-xs",children:O.time})]})]})]})]})}),d.jsxs("div",{children:[d.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[d.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),d.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:h==null?void 0:h.sessions.map(v=>{const k=l.getEnrollment(h.id,v.id),N=!!k,A=v.filled>=v.capacity,P=v.filled/v.capacity*100,C=v.date<new Date().toISOString().split("T")[0];return d.jsx("div",{className:`relative border rounded-lg p-4 transition-all duration-200 
                                ${N?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":A||C?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-70":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:pn(v.date)}),N&&d.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"}),C&&!N&&d.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Encerrado"})]}),d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:d.jsxs("span",{className:"flex items-center",children:[" ",v.startTime," - ",v.endTime]})}),d.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[d.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full rounded-full ${A?"bg-red-500":P>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(P,100)}%`}})}),d.jsx("span",{className:`text-xs font-bold w-24 text-right ${A?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:A?"ESGOTADO":h.isTeamEvent?`${v.capacity-v.filled} equipes`:`${v.capacity-v.filled} vagas`})]})]}),d.jsx("div",{className:"flex items-center",children:N?d.jsx("button",{onClick:()=>k&&y(k.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):d.jsx(Ar,{onClick:()=>h&&E(h,v.id),isLoading:R,disabled:A||C,className:`w-full sm:w-auto ${A||C?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed hover:bg-gray-300":""}`,children:C?"Encerrado":A?"Lotado":"Garantir Vaga"})})]})},v.id)})})]})]})}),d.jsx(Vp,{isOpen:!!p,onClose:()=>y(null),onConfirm:()=>p&&x(p),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:R})]})},WD=()=>{const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,i]=j.useState(!0);return j.useEffect(()=>{(async()=>{i(!0);const a=await ie.getPublicEvents(),l=a.filter(h=>h.hasDedicatedPage).slice(0,3),u=a.filter(h=>!h.hasDedicatedPage).slice(0,8);e(l),r(u),i(!1)})()},[]),d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg flex flex-col font-sans transition-colors duration-300",children:[d.jsx("nav",{className:"bg-white/80 dark:bg-darkcard/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700 sticky top-0 z-50 transition-colors",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between h-20 items-center",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-lg",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),d.jsx("span",{className:"text-gray-900 dark:text-white font-extrabold text-2xl tracking-tight",children:"EduEvent"})]}),d.jsx("div",{className:"flex items-center space-x-4",children:d.jsx(ve,{to:"/login",className:"text-gray-500 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 font-medium px-3 py-2 transition-colors",children:"Acessar Painel"})})]})})}),d.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16",children:[t.length>0&&d.jsxs("section",{className:"animate-fade-in",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Eventos em Destaque"}),d.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Confira as pginas exclusivas dos nossos principais eventos."})]}),d.jsx("div",{className:"grid gap-8 lg:grid-cols-2",children:t.map(o=>{var a,l,u,h,f;return d.jsxs(ve,{to:`/special/${o.id}`,className:"group relative bg-white dark:bg-darkcard rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col min-h-[300px] border border-gray-100 dark:border-gray-700",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent dark:from-primary/20 opacity-50"}),((u=(l=(a=o.dedicatedPageConfig)==null?void 0:a.gallery)==null?void 0:l[0])==null?void 0:u.url)&&d.jsxs("div",{className:"h-48 w-full overflow-hidden relative",children:[d.jsx("img",{src:o.dedicatedPageConfig.gallery[0].url,alt:o.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),d.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),d.jsxs("div",{className:"p-8 relative z-10 flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 uppercase tracking-wide",children:" Especial"}),d.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:pn((h=o.sessions[0])==null?void 0:h.date)})]}),d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:o.name}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 line-clamp-2 mb-6",children:((f=o.dedicatedPageConfig)==null?void 0:f.presentationText)||o.description}),d.jsxs("div",{className:"mt-auto flex items-center font-bold text-primary dark:text-indigo-400 group-hover:translate-x-1 transition-transform",children:["Ver Pgina Exclusiva ",d.jsx("span",{className:"ml-2",children:""})]})]})]},o.id)})})]}),d.jsxs("section",{children:[d.jsxs("div",{className:"mb-6 flex items-end justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda Pblica"}),d.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Prximas atividades abertas  comunidade."})]}),d.jsx(ve,{to:"/login",className:"hidden sm:block text-primary dark:text-indigo-400 hover:text-indigo-600 font-medium text-sm",children:"Ver todos no painel "})]}),s?d.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(o=>d.jsx("div",{className:"bg-white dark:bg-darkcard h-40 rounded-xl animate-pulse"},o))}):n.length===0?d.jsx("div",{className:"text-center py-16 bg-white dark:bg-darkcard rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:d.jsx("p",{className:"text-gray-400",children:"Nenhum outro evento pblico agendado no momento."})}):d.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(o=>{var h,f;const a=(h=o.sessions[0])!=null&&h.date?new Date(o.sessions[0].date):new Date,l=a.getDate(),u=a.toLocaleString("pt-BR",{month:"short"}).toUpperCase();return d.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-md transition-shadow p-5 border border-gray-100 dark:border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg p-2 text-center min-w-[50px]",children:[d.jsx("span",{className:"block text-xs font-bold",children:u}),d.jsx("span",{className:"block text-lg font-extrabold leading-none",children:l})]}),d.jsx(ve,{to:"/login",className:"bg-primary/10 text-primary hover:bg-primary hover:text-white dark:text-indigo-400 dark:hover:bg-indigo-600 dark:hover:text-white px-3 py-1 rounded-full text-xs font-bold transition-colors",children:"Inscrever"})]}),d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:o.name}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1",children:o.description}),d.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center",children:[d.jsxs("span",{className:"mr-2",children:[" ",o.location]}),d.jsxs("span",{children:[" ",(f=o.sessions[0])==null?void 0:f.startTime]})]})]},o.id)})})]})]}),d.jsx("footer",{className:"bg-white dark:bg-darkcard border-t border-gray-200 dark:border-gray-700 mt-auto",children:d.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center",children:[d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 2024 EduEvent. Todos os direitos reservados."}),d.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[d.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Contato"}),d.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:"Privacidade"}),d.jsx(ve,{to:"/login",className:"text-gray-400 hover:text-primary",children:"rea do Aluno"})]})]})})]})},HD=()=>{var w,T,b,_,E,x,R;const{id:t}=q_(),[e,n]=j.useState(null),[r,s]=j.useState([]),[i,o]=j.useState(!0),[a,l]=j.useState("about");j.useEffect(()=>{(async()=>{if(t)try{const[M,S]=await Promise.all([ie.getEventById(t),ie.getEventsByParentId(t)]);n(M||null),s(S)}catch(M){console.error("Failed to load dedicated page data",M)}finally{o(!1)}})()},[t]);const u=j.useMemo(()=>{var N,A;if(!e)return[];const O=((N=e.dedicatedPageConfig)==null?void 0:N.schedule)||[],M=[];r.forEach(P=>{P.sessions.forEach(C=>{M.push({id:`sub_${P.id}_${C.id}`,time:C.startTime,title:P.name,description:`${P.description||""}  Local: ${P.location||"No informado"}`,dateLabel:J0(C.date)})})});const S=(A=e.sessions[0])!=null&&A.date?J0(e.sessions[0].date):"";return[...O.map(P=>({...P,dateLabel:P.id.startsWith("sub_")?void 0:S})),...M].sort((P,C)=>P.dateLabel!==C.dateLabel?(P.dateLabel||"").localeCompare(C.dateLabel||""):P.time.localeCompare(C.time))},[e,r]),h=j.useMemo(()=>{const O={};return u.forEach(M=>{const S=M.dateLabel||"Data a definir";O[S]||(O[S]=[]),O[S].push(M)}),O},[u]);if(i)return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-darkbg text-gray-500",children:"Carregando evento..."});if(!e||!e.hasDedicatedPage)return d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-darkbg px-4 text-center",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:"Pgina no encontrada"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Este evento no possui uma pgina dedicada ou no existe."}),d.jsx(ve,{to:"/",className:"text-primary hover:underline",children:"Voltar para Home"})]});const f=e.dedicatedPageConfig||{gallery:[]},p=f.themeColor||"#4F46E5",y={"--theme-color":p};return d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-darkbg text-gray-900 dark:text-gray-100 font-sans selection:bg-opacity-30 selection:bg-[var(--theme-color)]",style:y,children:[d.jsxs("header",{className:"relative bg-darkbg text-white overflow-hidden min-h-[55vh] flex flex-col justify-end pb-12",children:[((T=(w=f.gallery)==null?void 0:w[0])==null?void 0:T.url)&&d.jsxs("div",{className:"absolute inset-0 z-0",children:[d.jsx("img",{src:f.gallery[0].url,alt:"Background",className:"w-full h-full object-cover opacity-40 blur-sm scale-105 transform origin-center animate-fade-in"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-darkbg via-darkbg/60 to-transparent"})]}),d.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 w-full animate-slide-in",children:[d.jsxs(ve,{to:"/",className:"inline-flex items-center mb-8 text-white/70 hover:text-white transition-colors text-sm font-medium group",children:[d.jsx("span",{className:"mr-2 group-hover:-translate-x-1 transition-transform",children:""})," Voltar para Eventos"]}),d.jsx("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6",children:d.jsxs("div",{className:"max-w-4xl",children:[d.jsx("span",{className:"inline-block py-1 px-3 rounded text-[10px] font-bold tracking-widest mb-4 uppercase text-white bg-[var(--theme-color)] shadow-lg shadow-[var(--theme-color)]/20",children:"Evento em Destaque"}),d.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-4 leading-tight text-white drop-shadow-sm",children:e.name}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 font-light max-w-2xl leading-relaxed",children:e.description})]})})]})]}),d.jsx("div",{className:"sticky top-0 z-40 bg-white/90 dark:bg-darkcard/90 backdrop-blur-md shadow-sm border-b border-gray-200 dark:border-gray-700",children:d.jsx("div",{className:"max-w-7xl mx-auto px-6",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsx("nav",{className:"flex space-x-1 h-full overflow-x-auto no-scrollbar",children:["about","schedule","gallery"].map(O=>d.jsxs("button",{onClick:()=>l(O),className:`relative px-5 inline-flex items-center h-full text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap
                                        ${a===O?"text-[var(--theme-color)]":"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[O==="about"&&"Viso Geral",O==="schedule"&&"Cronograma",O==="gallery"&&"Galeria",a===O&&d.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--theme-color)] shadow-[0_0_10px_var(--theme-color)]"})]},O))}),d.jsx("div",{className:"hidden md:flex items-center pl-6 border-l border-gray-200 dark:border-gray-700",children:d.jsx(ve,{to:"/login",className:"inline-flex items-center justify-center px-6 py-2 rounded-full font-bold text-white text-sm shadow-lg transform transition hover:-translate-y-0.5 active:translate-y-0 hover:shadow-xl",style:{backgroundColor:p},children:"Garantir Vaga"})})]})})}),d.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in min-h-[40vh]",children:[a==="about"&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[d.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[d.jsxs("section",{children:[d.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Sobre o Evento"}),d.jsx("div",{className:"prose dark:prose-invert prose-lg max-w-none text-gray-600 dark:text-gray-300 leading-relaxed",children:d.jsx("p",{className:"whitespace-pre-line",children:f.presentationText||"Junte-se a ns para uma experincia inesquecvel. Este evento foi cuidadosamente planejado para oferecer o melhor contedo e oportunidades de networking."})})]}),r.length>0&&d.jsxs("section",{className:"pt-8 border-t border-gray-100 dark:border-gray-800",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Destaques da Programao"}),d.jsx("button",{onClick:()=>l("schedule"),className:"text-sm font-bold text-[var(--theme-color)] hover:underline hidden sm:block",children:"Ver tudo "})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(O=>d.jsxs("div",{className:"group relative bg-white dark:bg-darkcard rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-xl hover:border-transparent transition-all duration-300 flex flex-col justify-between overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--theme-color)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("span",{className:"inline-block px-2 py-1 rounded bg-gray-50 dark:bg-gray-800 text-[10px] font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Atividade"}),d.jsx("span",{className:"text-[var(--theme-color)] opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300",children:""})]}),d.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 leading-tight group-hover:text-[var(--theme-color)] transition-colors",children:O.name}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 mb-4 leading-relaxed",children:O.description})]}),d.jsxs("div",{className:"pt-4 border-t border-gray-50 dark:border-gray-800 flex items-center justify-between text-xs font-medium text-gray-400 dark:text-gray-500",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),O.sessions.length>0?O.sessions[0].startTime:"TBA"]}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),O.location]})]})]},O.id))})]})]}),d.jsx("div",{className:"lg:col-span-4 space-y-8",children:d.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-8 sticky top-24",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:"Informaes do Evento"}),d.jsxs("ul",{className:"space-y-6",children:[d.jsxs("li",{className:"flex items-start",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Data Principal"}),d.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:pn((b=e.sessions[0])==null?void 0:b.date)})]})]}),d.jsxs("li",{className:"flex items-start",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Horrio"}),d.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[(_=e.sessions[0])==null?void 0:_.startTime," s ",(E=e.sessions[0])==null?void 0:E.endTime]})]})]}),d.jsxs("li",{className:"flex items-start",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Localizao"}),d.jsx("span",{className:"block text-gray-900 dark:text-white font-medium",children:e.location})]})]}),d.jsxs("li",{className:"flex items-start",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center text-xl mr-4",children:""}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-xs font-bold uppercase text-gray-400 mb-0.5",children:"Capacidade"}),d.jsxs("span",{className:"block text-gray-900 dark:text-white font-medium",children:[e.sessions.reduce((O,M)=>O+M.capacity,0)," vagas totais"]})]})]})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:d.jsx(ve,{to:"/login",className:"w-full flex items-center justify-center px-4 py-3 rounded-xl font-bold text-white shadow-lg transition transform hover:scale-[1.02]",style:{backgroundColor:p},children:"Inscrever-se"})})]})})]}),a==="schedule"&&d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Cronograma Completo"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Acompanhe todos os horrios e atividades."})]}),Object.keys(h).length===0?d.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:d.jsx("p",{className:"text-gray-500",children:"Programao detalhada em breve."})}):d.jsx("div",{className:"space-y-16",children:Object.entries(h).map(([O,M])=>{const S=M;return d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"sticky top-20 z-20 bg-gray-50/95 dark:bg-darkbg/95 backdrop-blur-sm py-4 mb-8 border-b border-gray-200 dark:border-gray-700 flex items-center",children:[d.jsxs("span",{className:"px-3 py-1 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm font-bold shadow-sm mr-3",children:[O.split(",")[0]," "]}),d.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[O.split(",")[1]," "]})]}),d.jsx("div",{className:"relative border-l-2 border-gray-200 dark:border-gray-800 ml-4 md:ml-6 space-y-12 pb-4",children:S.map((v,k)=>d.jsxs("div",{className:"relative pl-8 md:pl-12 group",children:[d.jsx("div",{className:"absolute -left-[9px] top-1.5 h-[18px] w-[18px] rounded-full border-4 border-white dark:border-darkbg shadow-sm transition-transform group-hover:scale-125",style:{backgroundColor:p}}),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2 md:gap-8 mb-2",children:[d.jsx("div",{className:"flex-shrink-0 w-20 pt-1",children:d.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:v.time})}),d.jsxs("div",{className:"flex-1 bg-white dark:bg-darkcard p-5 rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm group-hover:shadow-md transition-shadow",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 group-hover:text-[var(--theme-color)] transition-colors",children:v.title}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:v.description})]})]})]},k))})]},O)})})]}),a==="gallery"&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Galeria de Fotos"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Momentos marcantes."})]}),((x=f.gallery)==null?void 0:x.length)===0?d.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-12 rounded-2xl text-center border-2 border-dashed border-gray-200 dark:border-gray-700",children:d.jsx("p",{className:"text-gray-500",children:"Imagens indisponveis no momento."})}):d.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6",children:(R=f.gallery)==null?void 0:R.map((O,M)=>d.jsxs("div",{className:"break-inside-avoid group relative rounded-2xl overflow-hidden shadow-md cursor-zoom-in",children:[d.jsx("img",{src:O.url,alt:O.caption||`Imagem ${M+1}`,className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6",children:O.caption&&d.jsx("p",{className:"text-white font-medium transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:O.caption})})]},M))})]})]}),d.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50 animate-bounce-slow",children:d.jsx(ve,{to:"/login",className:"flex items-center justify-center w-14 h-14 rounded-full text-white shadow-xl shadow-indigo-900/20 hover:scale-110 transition-transform",style:{backgroundColor:p},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]})},KD=(t,e)=>{const{addToast:n}=uo(),[r,s]=j.useState([]),[i,o]=j.useState(null),[a,l]=j.useState(!1),[u,h]=j.useState({}),[f,p]=j.useState({}),y=j.useRef(new Set),w=j.useCallback(async x=>{if(t){l(!0);try{const[R,O]=await Promise.all([ie.getTeamsForEvent(x),ie.getEnrollmentsForUser(t.uid)]);s(R),e&&e();const S=[...new Set(R.map(k=>k.captainId))].filter(k=>!y.current.has(k));if(S.length>0){const k={};await Promise.all(S.map(async N=>{try{const A=await ie.getUserProfile(N);A&&(k[N]=A,y.current.add(N))}catch{console.error("Error fetching captain",N)}})),Object.keys(k).length>0&&h(N=>({...N,...k}))}const v=O.find(k=>k.eventId===x&&k.status===et.CONFIRMED);if(v&&v.teamId){const k=R.find(N=>N.id===v.teamId);o(k||null)}else o(null)}catch(R){console.error(R)}finally{l(!1)}}},[t,e]);return j.useEffect(()=>{(async()=>{if(i&&i.members.length>0){const R={},O=i.members.filter(M=>!y.current.has(M));await Promise.all(O.map(async M=>{if(t&&t.uid===M){R[M]=t,y.current.add(M);return}try{const S=await ie.getUserProfile(M);S&&(R[M]=S,y.current.add(M))}catch{console.error("Error fetching member",M)}})),Object.keys(R).length>0&&p(M=>({...M,...R}))}})()},[i,t]),{teams:r,myTeam:i,loading:a,captainProfiles:u,memberProfiles:f,loadTeams:w,createTeam:async(x,R)=>{if(!t)return null;l(!0);try{const O=await ie.createTeam(x,R,t);return await w(x),O}catch(O){throw O}finally{l(!1)}},joinTeam:async x=>{if(t){l(!0);try{await ie.joinTeam(x.id,t,x.code),await w(x.eventId)}catch(R){throw R}finally{l(!1)}}},leaveTeam:async()=>{if(!(!t||!i)){l(!0);try{const x=i.eventId;await ie.leaveTeam(i.id,t.uid),await w(x)}catch(x){throw x}finally{l(!1)}}},kickMember:async x=>{if(i){l(!0);try{await ie.kickMember(i.id,x),await w(i.eventId)}catch(R){throw R}finally{l(!1)}}}}},GD=(t,e)=>{switch(e.type){case"CLOSE":return{type:"NONE"};case"OPEN_ENROLL":return{type:"ENROLL",data:e.payload};case"OPEN_TEAM_SUCCESS":return{type:"TEAM_SUCCESS",data:e.payload};case"OPEN_TEAM_INPUT":return{type:"TEAM_INPUT",data:e.payload};case"OPEN_TEAM_CONFIRM":return{type:"TEAM_CONFIRM",data:e.payload};default:return t}},QD=()=>{var il,Ys,Js;const{id:t}=q_(),[e,n]=K1(),r=e.get("join_code"),{user:s}=ur(),i=Xr(),{addToast:o}=uo(),[a,l]=j.useState(null),[u,h]=j.useState([]),[f,p]=j.useState([]),[y,w]=j.useState([]),[T,b]=j.useState(!0),[_,E]=j.useState(null),[x,R]=j.useReducer(GD,{type:"NONE"}),[O,M]=j.useState(""),[S,v]=j.useState("join"),k=j.useCallback(async(B=!0)=>{if(!(!t||!s)){B&&b(!0);try{const[H,Z,Se,Qt]=await Promise.all([ie.getEventById(t),ie.getEventsByParentId(t),ie.getEnrollmentsForUser(s.uid),ie.getClasses()]);if(!H){i("/dashboard");return}l(H),h(Z),p(Se),w(Qt)}catch(H){console.error(H)}finally{B&&b(!1)}}},[t,s,i]),N=j.useCallback(()=>{k(!1),E(null)},[k]),{handleEnroll:A,handleCancel:P,isProcessing:C,conflictData:Ge,clearState:On}=MI(s,N),{teams:sn,myTeam:Le,loading:K,captainProfiles:J,memberProfiles:re,loadTeams:_e,createTeam:ge,joinTeam:Pe,leaveTeam:on,kickMember:an}=KD(s,N);j.useEffect(()=>{k()},[k]),j.useEffect(()=>{if(x.type==="ENROLL"&&x.data){const H=[a,...u].filter(Boolean).find(Z=>Z.id===x.data.id);H&&JSON.stringify(H)!==JSON.stringify(x.data)&&R({type:"OPEN_ENROLL",payload:H})}},[a,u,x.type,x.data]),j.useEffect(()=>{if(r&&a&&!T){let B;a.isTeamEvent?B=a:B=u.find(H=>H.isTeamEvent),B&&x.type==="NONE"&&(R({type:"OPEN_ENROLL",payload:B}),v("join"),_e(B.id))}},[r,a,u,T,_e,x.type]),j.useEffect(()=>{if(r&&sn.length>0&&x.type==="ENROLL"){const B=sn.find(H=>H.code===r);B&&(f.some(Z=>Z.eventId===B.eventId&&Z.teamId===B.id)||(R({type:"OPEN_TEAM_CONFIRM",payload:B}),n(Z=>{const Se=new URLSearchParams(Z);return Se.delete("join_code"),Se},{replace:!0})))}},[r,sn,x.type,f,n]);const Vt=B=>{var H;return B?((H=y.find(Z=>Z.id===B))==null?void 0:H.name)||"Desconhecida":"N/A"},Tt=async B=>{try{await navigator.clipboard.writeText(B),o("success","Cdigo copiado!")}catch{o("error","Erro ao copiar.")}},sl=async B=>{const H=`${window.location.origin}/#/event/${t}?join_code=${B.code}`;if(navigator.share)try{await navigator.share({title:`Junte-se  minha equipe: ${B.name}`,text:`Use o cdigo ${B.code} ou clique no link para entrar:`,url:H})}catch{await Tt(H),o("success","Link copiado!")}else await Tt(H),o("success","Link copiado!")},Zu=async B=>{const H=x.type==="ENROLL"?x.data:null;if(H)try{const Z=await ge(H.id,B);Z&&(R({type:"OPEN_TEAM_SUCCESS",payload:Z}),o("success","Equipe criada com sucesso!"))}catch(Z){o("error",Z.message)}},Ks=async()=>{const B=x.type==="TEAM_CONFIRM"?x.data:null;if(B)try{await Pe(B),o("success","Voc entrou na equipe!"),R({type:"CLOSE"})}catch(H){o("error",H.message)}},Gs=async()=>{try{await on(),o("success","Voc saiu da equipe.")}catch(B){o("error",B.message)}},ho=async B=>{try{await an(B),o("success","Membro removido.")}catch(H){o("error",H.message)}},fo=B=>{M(""),R({type:"OPEN_TEAM_INPUT",payload:B})},mo=()=>{const B=x.type==="TEAM_INPUT"?x.data:null;if(B){if(O.toUpperCase()!==B.code){o("error","Cdigo incorreto.");return}R({type:"OPEN_TEAM_CONFIRM",payload:B})}},Qs=B=>{On(),R({type:"OPEN_ENROLL",payload:B}),B.isTeamEvent&&(v("join"),_e(B.id))},po=(B,H)=>f.find(Z=>Z.eventId===B&&Z.sessionId===H),Mn=()=>R({type:"CLOSE"});if(T)return d.jsx("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400 font-medium",children:"Carregando detalhes do evento..."});if(!a)return d.jsx("div",{className:"p-12 text-center text-red-500 dark:text-red-400 font-bold",children:"Evento no encontrado."});const Ze=x.type==="ENROLL"?x.data:null,dr=x.type==="TEAM_SUCCESS"?x.data:null,ts=x.type==="TEAM_INPUT"?x.data:null,Ln=x.type==="TEAM_CONFIRM"?x.data:null;return d.jsxs("div",{className:"space-y-8 pb-12",children:[d.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:d.jsxs("ol",{className:"flex items-center space-x-2",children:[d.jsx("li",{children:d.jsx(ve,{to:"/dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-indigo-400 font-medium transition",children:"Eventos"})}),d.jsx("li",{children:d.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"/"})}),d.jsx("li",{className:"text-gray-900 dark:text-white font-semibold","aria-current":"page",children:a.name})]})}),d.jsxs("div",{className:"bg-white dark:bg-darkcard rounded-2xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary to-indigo-400"}),d.jsx("div",{className:"p-8 md:p-10",children:d.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex gap-2 mb-4",children:[d.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-xs font-bold uppercase tracking-wide border border-indigo-100 dark:border-indigo-900/50",children:"Evento Principal"}),a.isTeamEvent&&d.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-xs font-bold uppercase tracking-wide border border-purple-100 dark:border-purple-900/50",children:" Evento por Equipe"})]}),d.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight",children:a.name}),d.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-4xl",children:a.description}),d.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-500 dark:text-gray-400 text-sm font-medium",children:[d.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[d.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.location]}),d.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:[d.jsx("span",{className:"mr-2 text-xl",children:""})," ",a.sessions.length," Sesses Principais"]})]})]}),a.sessions.length>0&&d.jsx("div",{className:"flex-shrink-0",children:d.jsxs("button",{onClick:()=>Qs(a),className:"w-full md:w-auto bg-primary hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition transform hover:-translate-y-1 flex items-center justify-center",children:["Ver Programao",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7 7"})})]})})]})})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Atividades & Sub-eventos"}),d.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"})]}),u.length===0?d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-12 text-center",children:[d.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Nenhuma atividade especfica cadastrada para este evento ainda."})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(B=>{const H=B.sessions.length===1?B.sessions[0]:null,Z=H?H.capacity:0,Se=H?H.filled:0,Qt=Z>0?Se/Z*100:0,Xs=Z>0&&Se>=Z,ol=B.sessions.some(ns=>po(B.id,ns.id));return d.jsxs("div",{className:"group bg-white dark:bg-darkcard rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 flex flex-col relative",children:[d.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gray-200 dark:bg-gray-700 group-hover:bg-primary transition-colors"}),d.jsxs("div",{className:"p-6 flex-1 flex flex-col ml-1",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-primary dark:group-hover:text-indigo-400 transition-colors",children:B.name}),B.isTeamEvent&&d.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full font-bold",children:"EQUIPE"})]}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-1",children:B.description}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mt-auto pt-4 border-t border-gray-50 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),d.jsx("span",{className:"font-medium",children:B.location})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"w-6 text-center mr-2 text-gray-400 dark:text-gray-500",children:""}),d.jsx("span",{className:"font-medium",children:B.sessions.length>1?`${B.sessions.length} opes de horrio`:`${pn(H==null?void 0:H.date)}  ${H==null?void 0:H.startTime}`})]})]}),H&&d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"flex justify-between text-xs mb-1 font-bold",children:d.jsx("span",{className:Xs?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:Xs?"LOTADO":B.isTeamEvent?`${Z-Se} equipes restantes`:`${Z-Se} vagas`})}),d.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5",children:d.jsx("div",{className:`h-full rounded-full ${Xs?"bg-red-500":"bg-emerald-500"}`,style:{width:`${Qt}%`}})})]})]}),d.jsx("button",{onClick:()=>Qs(B),className:`w-full py-3 font-bold text-sm transition-colors border-t border-gray-100 dark:border-gray-700 ${ol?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40":"bg-gray-50 dark:bg-gray-800/50 hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white text-primary dark:text-indigo-300"}`,children:ol?"Gerenciar Inscrio":"Inscrever-se Agora"})]},B.id)})}),d.jsx(vs,{isOpen:x.type==="ENROLL",onClose:Mn,title:Ze?Ze.name:"",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:d.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:Ze==null?void 0:Ze.description})}),Ge&&d.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border-l-4 border-amber-400 p-4 rounded-r-md",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:"Conflito de Horrio"}),d.jsxs("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-200",children:[d.jsx("p",{className:"mb-2",children:"Voc j possui compromisso neste horrio:"}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 bg-opacity-50 p-2 rounded border border-amber-200 dark:border-amber-700",children:[d.jsx("p",{className:"font-semibold",children:Ge.name}),d.jsx("p",{className:"text-xs",children:Ge.time})]})]})]})]})}),Ze!=null&&Ze.isTeamEvent?d.jsx("div",{className:"animate-fade-in",children:Le?d.jsxs("div",{className:"bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-6 text-white relative",children:[d.jsx("div",{className:"absolute top-4 right-4 bg-white/20 backdrop-blur rounded-full px-3 py-1 text-xs font-bold uppercase tracking-wider",children:"Minha Equipe"}),d.jsx("h3",{className:"text-2xl md:text-3xl font-extrabold mb-1 pr-24 md:pr-0",children:Le.name}),d.jsx("div",{className:"flex items-center gap-2 opacity-90 text-sm",children:d.jsxs("span",{children:["Capito: ",Le.captainId===(s==null?void 0:s.uid)?"Voc":((il=J[Le.captainId])==null?void 0:il.name)||"Desconhecido"]})})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Cdigo de Acesso"}),d.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-800 px-3 py-1 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx("code",{className:"text-2xl font-mono font-bold text-primary dark:text-indigo-400 tracking-wide select-all",children:Le.code}),d.jsx("button",{onClick:()=>Tt(Le.code),className:"p-1.5 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-300 transition-colors",title:"Copiar cdigo",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),d.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),d.jsx("button",{onClick:()=>sl(Le),className:"p-1.5 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-300 transition-colors",title:"Compartilhar Link",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]}),d.jsxs("div",{className:"w-full md:w-auto text-left md:text-right",children:[d.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Membros"}),d.jsx("span",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:Le.members.length})]})]}),d.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4",children:[d.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm",children:"Integrantes"}),d.jsx("ul",{className:"space-y-2 mb-6",children:Le.members.map(B=>{var H,Z,Se,Qt;return d.jsxs("li",{className:"flex justify-between items-center text-sm p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-primary dark:text-indigo-300 font-bold text-xs",children:(((H=re[B])==null?void 0:H.name)||((Z=J[B])==null?void 0:Z.name)||"U").charAt(0)}),d.jsxs("span",{className:`text-gray-700 dark:text-gray-300 ${B===(s==null?void 0:s.uid)?"font-bold":""}`,children:[B===(s==null?void 0:s.uid)?"Voc":((Se=re[B])==null?void 0:Se.name)||((Qt=J[B])==null?void 0:Qt.name)||"Usurio...",B===Le.captainId&&" "]})]}),Le.captainId===(s==null?void 0:s.uid)&&B!==(s==null?void 0:s.uid)&&d.jsx("button",{onClick:()=>ho(B),className:"text-red-500 hover:text-red-700 text-xs font-bold px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20",children:"Remover"})]},B)})}),d.jsx(Ar,{onClick:Gs,isLoading:K,variant:"danger",className:"w-full",children:Le.captainId===(s==null?void 0:s.uid)?"Desfazer Equipe e Sair":"Sair da Equipe"})]})]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-gray-800 rounded-lg mb-6",children:[d.jsx("button",{onClick:()=>v("join"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${S==="join"?"bg-white dark:bg-darkcard text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Entrar em Equipe"}),d.jsx("button",{onClick:()=>v("create"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${S==="create"?"bg-white dark:bg-darkcard text-primary shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Criar Nova Equipe"})]}),S==="join"&&d.jsx("div",{className:"space-y-4",children:d.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[300px] overflow-y-auto pr-1",children:sn.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[d.jsx("span",{className:"text-2xl block mb-2",children:""}),d.jsxs("p",{children:["Nenhuma equipe criada ainda.",d.jsx("br",{}),"Seja o primeiro a criar!"]})]}):sn.map(B=>{var H;return d.jsxs("div",{className:"group bg-white dark:bg-darkcard border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center hover:shadow-md hover:border-primary/30 transition-all cursor-default gap-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center text-lg flex-shrink-0",children:""}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("span",{className:"font-bold text-gray-900 dark:text-white block truncate",children:B.name}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex-wrap",children:[d.jsxs("span",{children:["Capito: ",((H=J[B.captainId])==null?void 0:H.name)||"..."]}),d.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full hidden sm:block"}),d.jsxs("span",{className:"flex items-center text-primary dark:text-indigo-400 font-bold bg-primary/10 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded",children:[B.members.length," membros"]})]})]})]}),d.jsx("button",{onClick:()=>fo(B),className:"w-full sm:w-auto px-4 py-2 bg-gray-50 dark:bg-gray-800 text-primary dark:text-indigo-400 font-bold text-sm rounded-lg hover:bg-primary hover:text-white dark:hover:bg-indigo-600 dark:hover:text-white transition-colors",children:"Entrar"})]},B.id)})})}),S==="create"&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Escolha um horrio disponvel para registrar sua equipe:"}),d.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-1",children:Ze.sessions.map(B=>{const H=B.filled>=B.capacity;return d.jsxs("div",{className:`p-4 border rounded-xl flex flex-col sm:flex-row justify-between items-start sm:items-center transition-all ${H?"bg-gray-50 border-gray-200 opacity-60":"bg-white dark:bg-darkcard border-gray-200 dark:border-gray-700 hover:border-primary/50 hover:shadow-sm"}`,children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx("span",{children:pn(B.date)}),d.jsx("span",{className:"text-xs font-normal text-gray-400",children:"|"}),d.jsxs("span",{children:[B.startTime," - ",B.endTime]})]}),d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:H?"Esgotado":`${B.capacity-B.filled} slots disponveis`})]}),d.jsx(Ar,{onClick:()=>Zu(B.id),isLoading:K,disabled:H,className:`w-full sm:w-auto mt-3 sm:mt-0 ${H?"bg-gray-300 text-gray-500":"bg-primary"}`,variant:H?"outline":"primary",children:H?"Lotado":"Criar Aqui"})]},B.id)})})]})]})}):d.jsxs("div",{children:[d.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[d.jsx("span",{className:"bg-primary h-6 w-1 rounded mr-2"}),"Selecione uma Sesso"]}),d.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1",children:Ze==null?void 0:Ze.sessions.map(B=>{const H=po(Ze.id,B.id),Z=!!H,Se=B.filled>=B.capacity,Qt=B.filled/B.capacity*100;return d.jsx("div",{className:`relative border rounded-lg p-4 transition-all ${Z?"border-green-500 bg-green-50 dark:bg-green-900/20 ring-1 ring-green-500":Se?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 opacity-90":"border-gray-200 dark:border-gray-700 hover:border-primary hover:shadow-md bg-white dark:bg-darkcard"}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:pn(B.date)}),Z&&d.jsx("span",{className:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Inscrito"})]}),d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-4",children:d.jsxs("span",{className:"flex items-center",children:[" ",B.startTime," - ",B.endTime]})}),d.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[d.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full rounded-full ${Se?"bg-red-500":Qt>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(Qt,100)}%`}})}),d.jsx("span",{className:`text-xs font-bold w-24 text-right ${Se?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:Se?"ESGOTADO":Ze.isTeamEvent?`${B.capacity-B.filled} equipes`:`${B.capacity-B.filled} vagas`})]})]}),d.jsx("div",{className:"flex items-center",children:Z?d.jsx("button",{onClick:()=>H&&E(H.id),className:"w-full sm:w-auto bg-white dark:bg-gray-800 border border-red-300 dark:border-red-900 text-red-600 dark:text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Cancelar"}):d.jsx(Ar,{onClick:()=>Ze&&A(Ze,B.id),isLoading:C,disabled:Se,className:`w-full sm:w-auto ${Se?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":""}`,children:Se?"Lotado":"Inscrever"})})]})},B.id)})})]})]})}),d.jsx(vs,{isOpen:x.type==="TEAM_SUCCESS",onClose:Mn,title:"Dados da Equipe Criada",children:dr&&s&&d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-900/50 text-center",children:[d.jsx("span",{className:"text-2xl mb-2 block",children:""}),d.jsx("h3",{className:"text-lg font-bold text-green-800 dark:text-green-300",children:"Equipe criada com sucesso!"}),d.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Compartilhe o cdigo abaixo com seus colegas."})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"Nome da Equipe"}),d.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white font-medium",children:dr.name})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"Capito (Voc)"}),d.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white font-medium",children:s.name})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"RM"}),d.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white",children:s.rm||"-"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:"Turma"}),d.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white",children:Vt(s.classId)})]})]}),d.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded border border-indigo-200 dark:border-indigo-800 text-center",children:[d.jsx("label",{className:"block text-xs font-bold text-indigo-500 uppercase mb-1",children:"Cdigo de Acesso"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("code",{className:"text-3xl font-mono font-bold text-indigo-700 dark:text-indigo-300 tracking-wider select-all",children:dr.code}),d.jsx("button",{onClick:()=>Tt(dr.code),className:"p-1.5 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-200 transition-colors",title:"Copiar cdigo",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),d.jsx("div",{className:"h-6 w-px bg-indigo-200 dark:bg-indigo-700 mx-1"}),d.jsx("button",{onClick:()=>sl(dr),className:"p-1.5 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-200 transition-colors",title:"Compartilhar Link",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]})]}),d.jsx("button",{onClick:Mn,className:"w-full bg-primary hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-md transition-colors",children:"Confirmar"})]})}),d.jsx(vs,{isOpen:x.type==="TEAM_INPUT",onClose:Mn,title:"Cdigo de Acesso",children:d.jsxs("div",{className:"space-y-6 pt-2",children:[d.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Digite o cdigo fornecido pelo capito da equipe ",d.jsx("strong",{children:ts==null?void 0:ts.name}),"."]}),d.jsx(ys,{label:"Cdigo da Equipe",placeholder:"Ex: A1B2",value:O,onChange:B=>M(B.target.value.toUpperCase()),className:"text-center font-mono text-xl tracking-widest uppercase",autoFocus:!0}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:Mn,className:"px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Cancelar"}),d.jsx("button",{onClick:mo,className:"px-6 py-2 bg-primary text-white rounded font-bold hover:bg-indigo-700",children:"Verificar"})]})]})}),d.jsx(vs,{isOpen:x.type==="TEAM_CONFIRM",onClose:Mn,title:"Confirmar Entrada",children:Ln&&s&&d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-900/30",children:[d.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2 border-b border-blue-200 dark:border-blue-800 pb-2",children:"Dados da Equipe"}),d.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Nome:"}),d.jsx("span",{className:"font-medium dark:text-gray-200",children:Ln.name})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Capito:"}),d.jsx("span",{className:"font-medium dark:text-gray-200",children:((Ys=J[Ln.captainId])==null?void 0:Ys.name)||"..."})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Turma do Capito:"}),d.jsx("span",{className:"font-medium dark:text-gray-200",children:Vt((Js=J[Ln.captainId])==null?void 0:Js.classId)})]})]})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[d.jsx("h4",{className:"font-bold text-gray-700 dark:text-gray-300 mb-2 border-b border-gray-200 dark:border-gray-600 pb-2",children:"Seus Dados (Entrando como Membro)"}),d.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Nome:"}),d.jsx("span",{className:"font-medium dark:text-white",children:s.name})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"RM:"}),d.jsx("span",{className:"font-medium dark:text-white",children:s.rm})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Turma:"}),d.jsx("span",{className:"font-medium dark:text-white",children:Vt(s.classId)})]})]})]}),d.jsxs("div",{className:"text-center py-2",children:[d.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Cdigo Verificado"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"font-mono font-bold text-xl text-green-600 dark:text-green-400",children:Ln.code}),d.jsx("button",{onClick:()=>Tt(Ln.code),className:"p-1 text-gray-500 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-400 transition-colors",title:"Copiar cdigo",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:Mn,className:"flex-1 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancelar"}),d.jsx(Ar,{onClick:Ks,isLoading:K,className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow",children:"Confirmar Entrada"})]})]})}),d.jsx(Vp,{isOpen:!!_,onClose:()=>E(null),onConfirm:()=>_&&P(_),title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio? A vaga ser liberada imediatamente.",confirmText:"Sim, Cancelar",isProcessing:C})]})};var YD=Object.defineProperty,ou=Object.getOwnPropertySymbols,VI=Object.prototype.hasOwnProperty,FI=Object.prototype.propertyIsEnumerable,Sv=(t,e,n)=>e in t?YD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JD=(t,e)=>{for(var n in e||(e={}))VI.call(e,n)&&Sv(t,n,e[n]);if(ou)for(var n of ou(e))FI.call(e,n)&&Sv(t,n,e[n]);return t},XD=(t,e)=>{var n={};for(var r in t)VI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ou)for(var r of ou(t))e.indexOf(r)<0&&FI.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ds;(t=>{const e=class{constructor(l,u,h,f){if(this.version=l,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let p=[];for(let w=0;w<this.size;w++)p.push(!1);for(let w=0;w<this.size;w++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const y=this.addEccAndInterleave(h);if(this.drawCodewords(y),f==-1){let w=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const b=this.getPenaltyScore();b<w&&(f=T,w=b),this.applyMask(T)}}i(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(l,u){const h=t.QrSegment.makeSegments(l);return e.encodeSegments(h,u)}static encodeBinary(l,u){const h=t.QrSegment.makeBytes(l);return e.encodeSegments([h],u)}static encodeSegments(l,u,h=1,f=40,p=-1,y=!0){if(!(e.MIN_VERSION<=h&&h<=f&&f<=e.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let w,T;for(w=h;;w++){const x=e.getNumDataCodewords(w,u)*8,R=a.getTotalBits(l,w);if(R<=x){T=R;break}if(w>=f)throw new RangeError("Data too long")}for(const x of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])y&&T<=e.getNumDataCodewords(w,x)*8&&(u=x);let b=[];for(const x of l){r(x.mode.modeBits,4,b),r(x.numChars,x.mode.numCharCountBits(w),b);for(const R of x.getData())b.push(R)}i(b.length==T);const _=e.getNumDataCodewords(w,u)*8;i(b.length<=_),r(0,Math.min(4,_-b.length),b),r(0,(8-b.length%8)%8,b),i(b.length%8==0);for(let x=236;b.length<_;x^=253)r(x,8,b);let E=[];for(;E.length*8<b.length;)E.push(0);return b.forEach((x,R)=>E[R>>>3]|=x<<7-(R&7)),new e(w,u,E,p)}getModule(l,u){return 0<=l&&l<this.size&&0<=u&&u<this.size&&this.modules[u][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),u=l.length;for(let h=0;h<u;h++)for(let f=0;f<u;f++)h==0&&f==0||h==0&&f==u-1||h==u-1&&f==0||this.drawAlignmentPattern(l[h],l[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const u=this.errorCorrectionLevel.formatBits<<3|l;let h=u;for(let p=0;p<10;p++)h=h<<1^(h>>>9)*1335;const f=(u<<10|h)^21522;i(f>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,s(f,p));this.setFunctionModule(8,7,s(f,6)),this.setFunctionModule(8,8,s(f,7)),this.setFunctionModule(7,8,s(f,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,s(f,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,s(f,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,s(f,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let h=0;h<12;h++)l=l<<1^(l>>>11)*7973;const u=this.version<<12|l;i(u>>>18==0);for(let h=0;h<18;h++){const f=s(u,h),p=this.size-11+h%3,y=Math.floor(h/3);this.setFunctionModule(p,y,f),this.setFunctionModule(y,p,f)}}drawFinderPattern(l,u){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const p=Math.max(Math.abs(f),Math.abs(h)),y=l+f,w=u+h;0<=y&&y<this.size&&0<=w&&w<this.size&&this.setFunctionModule(y,w,p!=2&&p!=4)}}drawAlignmentPattern(l,u){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(l+f,u+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(l,u,h){this.modules[u][l]=h,this.isFunction[u][l]=!0}addEccAndInterleave(l){const u=this.version,h=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(u,h))throw new RangeError("Invalid argument");const f=e.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u],p=e.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u],y=Math.floor(e.getNumRawDataModules(u)/8),w=f-y%f,T=Math.floor(y/f);let b=[];const _=e.reedSolomonComputeDivisor(p);for(let x=0,R=0;x<f;x++){let O=l.slice(R,R+T-p+(x<w?0:1));R+=O.length;const M=e.reedSolomonComputeRemainder(O,_);x<w&&O.push(0),b.push(O.concat(M))}let E=[];for(let x=0;x<b[0].length;x++)b.forEach((R,O)=>{(x!=T-p||O>=w)&&E.push(R[x])});return i(E.length==y),E}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let p=0;p<2;p++){const y=h-p,T=(h+1&2)==0?this.size-1-f:f;!this.isFunction[T][y]&&u<l.length*8&&(this.modules[T][y]=s(l[u>>>3],7-(u&7)),u++)}}i(u==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let h=0;h<this.size;h++){let f;switch(l){case 0:f=(h+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+u)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(u/2))%2==0;break;case 5:f=h*u%2+h*u%3==0;break;case 6:f=(h*u%2+h*u%3)%2==0;break;case 7:f=((h+u)%2+h*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][h]&&f&&(this.modules[u][h]=!this.modules[u][h])}}getPenaltyScore(){let l=0;for(let p=0;p<this.size;p++){let y=!1,w=0,T=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[p][b]==y?(w++,w==5?l+=e.PENALTY_N1:w>5&&l++):(this.finderPenaltyAddHistory(w,T),y||(l+=this.finderPenaltyCountPatterns(T)*e.PENALTY_N3),y=this.modules[p][b],w=1);l+=this.finderPenaltyTerminateAndCount(y,w,T)*e.PENALTY_N3}for(let p=0;p<this.size;p++){let y=!1,w=0,T=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][p]==y?(w++,w==5?l+=e.PENALTY_N1:w>5&&l++):(this.finderPenaltyAddHistory(w,T),y||(l+=this.finderPenaltyCountPatterns(T)*e.PENALTY_N3),y=this.modules[b][p],w=1);l+=this.finderPenaltyTerminateAndCount(y,w,T)*e.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let y=0;y<this.size-1;y++){const w=this.modules[p][y];w==this.modules[p][y+1]&&w==this.modules[p+1][y]&&w==this.modules[p+1][y+1]&&(l+=e.PENALTY_N2)}let u=0;for(const p of this.modules)u=p.reduce((y,w)=>y+(w?1:0),u);const h=this.size*this.size,f=Math.ceil(Math.abs(u*20-h*10)/h)-1;return i(0<=f&&f<=9),l+=f*e.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let h=[6];for(let f=this.size-7;h.length<l;f-=u)h.splice(1,0,f);return h}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*l+128)*l+64;if(l>=2){const h=Math.floor(l/7)+2;u-=(25*h-10)*h-55,l>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(l,u){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<l-1;f++)u.push(0);u.push(1);let h=1;for(let f=0;f<l;f++){for(let p=0;p<u.length;p++)u[p]=e.reedSolomonMultiply(u[p],h),p+1<u.length&&(u[p]^=u[p+1]);h=e.reedSolomonMultiply(h,2)}return u}static reedSolomonComputeRemainder(l,u){let h=u.map(f=>0);for(const f of l){const p=f^h.shift();h.push(0),u.forEach((y,w)=>h[w]^=e.reedSolomonMultiply(y,p))}return h}static reedSolomonMultiply(l,u){if(l>>>8||u>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(u>>>f&1)*l;return i(h>>>8==0),h}finderPenaltyCountPatterns(l){const u=l[1];i(u<=this.size*3);const h=u>0&&l[2]==u&&l[3]==u*3&&l[4]==u&&l[5]==u;return(h&&l[0]>=u*4&&l[6]>=u?1:0)+(h&&l[6]>=u*4&&l[0]>=u?1:0)}finderPenaltyTerminateAndCount(l,u,h){return l&&(this.finderPenaltyAddHistory(u,h),u=0),u+=this.size,this.finderPenaltyAddHistory(u,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(l,u){u[0]==0&&(l+=this.size),u.pop(),u.unshift(l)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(l,u,h){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let f=u-1;f>=0;f--)h.push(l>>>f&1)}function s(l,u){return(l>>>u&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const o=class{constructor(l,u,h){if(this.mode=l,this.numChars=u,this.bitData=h,u<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(l){let u=[];for(const h of l)r(h,8,u);return new o(o.Mode.BYTE,l.length,u)}static makeNumeric(l){if(!o.isNumeric(l))throw new RangeError("String contains non-numeric characters");let u=[];for(let h=0;h<l.length;){const f=Math.min(l.length-h,3);r(parseInt(l.substr(h,f),10),f*3+1,u),h+=f}return new o(o.Mode.NUMERIC,l.length,u)}static makeAlphanumeric(l){if(!o.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],h;for(h=0;h+2<=l.length;h+=2){let f=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h))*45;f+=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h+1)),r(f,11,u)}return h<l.length&&r(o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h)),6,u),new o(o.Mode.ALPHANUMERIC,l.length,u)}static makeSegments(l){return l==""?[]:o.isNumeric(l)?[o.makeNumeric(l)]:o.isAlphanumeric(l)?[o.makeAlphanumeric(l)]:[o.makeBytes(o.toUtf8ByteArray(l))]}static makeEci(l){let u=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)r(l,8,u);else if(l<16384)r(2,2,u),r(l,14,u);else if(l<1e6)r(6,3,u),r(l,21,u);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,u)}static isNumeric(l){return o.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return o.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,u){let h=0;for(const f of l){const p=f.mode.numCharCountBits(u);if(f.numChars>=1<<p)return 1/0;h+=4+p+f.bitData.length}return h}static toUtf8ByteArray(l){l=encodeURI(l);let u=[];for(let h=0;h<l.length;h++)l.charAt(h)!="%"?u.push(l.charCodeAt(h)):(u.push(parseInt(l.substr(h+1,2),16)),h+=2);return u}};let a=o;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(Ds||(Ds={}));(t=>{(e=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Ds||(Ds={}));(t=>{(e=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Ds||(Ds={}));var Ho=Ds;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var ZD={L:Ho.QrCode.Ecc.LOW,M:Ho.QrCode.Ecc.MEDIUM,Q:Ho.QrCode.Ecc.QUARTILE,H:Ho.QrCode.Ecc.HIGH},e4=128,t4="L",n4="#FFFFFF",r4="#000000",s4=!1,UI=4,i4=.1;function o4(t,e=0){const n=[];return t.forEach(function(r,s){let i=null;r.forEach(function(o,a){if(!o&&i!==null){n.push(`M${i+e} ${s+e}h${a-i}v1H${i+e}z`),i=null;return}if(a===r.length-1){if(!o)return;i===null?n.push(`M${a+e},${s+e} h1v1H${a+e}z`):n.push(`M${i+e},${s+e} h${a+1-i}v1H${i+e}z`);return}o&&i===null&&(i=a)})}),n.join("")}function a4(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function l4(t,e,n,r){if(r==null)return null;const s=n?UI:0,i=t.length+s*2,o=Math.floor(e*i4),a=i/e,l=(r.width||o)*a,u=(r.height||o)*a,h=r.x==null?t.length/2-l/2:r.x*a,f=r.y==null?t.length/2-u/2:r.y*a;let p=null;if(r.excavate){let y=Math.floor(h),w=Math.floor(f),T=Math.ceil(l+h-y),b=Math.ceil(u+f-w);p={x:y,y:w,w:T,h:b}}return{x:h,y:f,h:u,w:l,excavation:p}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function c4(t){const e=t,{value:n,size:r=e4,level:s=t4,bgColor:i=n4,fgColor:o=r4,includeMargin:a=s4,imageSettings:l}=e,u=XD(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let h=Ho.QrCode.encodeText(n,ZD[s]).getModules();const f=a?UI:0,p=h.length+f*2,y=l4(h,r,a,l);let w=null;l!=null&&y!=null&&(y.excavation!=null&&(h=a4(h,y.excavation)),w=Bt.createElement("image",{xlinkHref:l.src,height:y.h,width:y.w,x:y.x+f,y:y.y+f,preserveAspectRatio:"none"}));const T=o4(h,f);return Bt.createElement("svg",JD({height:r,width:r,viewBox:`0 0 ${p} ${p}`},u),Bt.createElement("path",{fill:i,d:`M0,0 h${p}v${p}H0z`,shapeRendering:"crispEdges"}),Bt.createElement("path",{fill:o,d:T,shapeRendering:"crispEdges"}),w)}const u4=()=>{const{user:t}=ur(),{addToast:e}=uo(),[n,r]=j.useState([]),[s,i]=j.useState(null),[o,a]=j.useState(!0),[l,u]=j.useState(!1),[h,f]=j.useState(null),p=async()=>{if(t){a(!0);try{const _=await ie.getEnrollmentsForUser(t.uid);if(_.length===0){r([]),a(!1);return}const E=[...new Set(_.map(v=>v.eventId))],x=await ie.getEventsByIds(E),R=new Map(x.map(v=>[v.id,v])),O=x.filter(v=>v.isTeamEvent),M=new Map;await Promise.all(O.map(async v=>{try{(await ie.getTeamsForEvent(v.id)).forEach(N=>M.set(N.id,N))}catch(k){console.error(`Error loading teams for event ${v.id}`,k)}}));const S=_.map(v=>{const k=R.get(v.eventId);if(!k)return null;const N=k.sessions.find(P=>P.id===v.sessionId);if(!N)return null;const A=v.teamId?M.get(v.teamId):void 0;return{enrollment:v,event:k,session:N,team:A}}).filter(v=>v!==null);r(S)}catch(_){console.error("Failed to load enrollments data:",_),e("error","Falha ao carregar inscries."),r([])}finally{a(!1)}}};j.useEffect(()=>{p()},[t]);const y=async()=>{if(s){u(!0);try{await ie.cancelEnrollment(s),e("success","Inscrio cancelada com sucesso.")}catch(_){console.error(_),e("error","Erro ao cancelar inscrio.")}finally{i(null),u(!1),p()}}},w=async _=>{try{await navigator.clipboard.writeText(_),e("success","Cdigo copiado!")}catch{}},T=(_,E,x)=>{t&&f({enrollmentId:_.id,event:E,sessionDate:x.date,sessionTime:`${x.startTime} - ${x.endTime}`,user:t,attended:_.attended})},b=new Date().toISOString().split("T")[0];return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Minha Agenda"}),o?d.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:d.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Array.from({length:3}).map((_,E)=>d.jsx(FD,{},E))})}):n.length===0?d.jsx(LI,{title:"Agenda Vazia",description:"Voc ainda no se inscreveu em nenhum evento."}):d.jsx("div",{className:"bg-white dark:bg-darkcard shadow overflow-hidden sm:rounded-md border border-gray-200 dark:border-gray-700",children:d.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(({enrollment:_,event:E,session:x,team:R})=>{const O=x.date<b;return d.jsxs("li",{className:"px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 gap-4 transition-colors",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.isTeamEvent&&d.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 uppercase tracking-wide border border-indigo-200 dark:border-indigo-800",children:" Equipe"}),_.attended&&d.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 uppercase tracking-wide border border-green-200 dark:border-green-800",children:" Presena"}),d.jsx("h3",{className:"text-lg font-medium text-primary dark:text-indigo-400",children:E.name})]}),d.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[d.jsxs("span",{children:[" ",pn(x.date)]}),d.jsxs("span",{children:[" ",x.startTime," - ",x.endTime]}),d.jsxs("span",{children:[" ",E.location]})]}),R&&d.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/10 rounded-lg border border-indigo-100 dark:border-indigo-800/30 w-full sm:w-fit",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-lg flex-shrink-0",children:""}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Sua Equipe"}),d.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:R.name})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pl-0 sm:pl-3 border-t sm:border-t-0 sm:border-l border-indigo-200 dark:border-indigo-700 pt-2 sm:pt-0 w-full sm:w-auto",children:[d.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mr-2 sm:mr-0",children:"Cdigo:"}),d.jsxs("button",{onClick:()=>w(R.code),className:"text-xs font-mono font-bold text-indigo-600 dark:text-indigo-300 hover:underline flex items-center gap-1",title:"Copiar Cdigo",children:[R.code," "]})]})]}),O&&d.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 mt-2",children:"Evento Finalizado"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 flex-shrink-0",children:[d.jsxs("button",{onClick:()=>T(_,E,x),className:"w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-medium bg-white dark:bg-darkcard border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center gap-2",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4h2v-4zM6 8v4M6 16v4m12-16H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2z"})}),"Ver Ticket"]}),d.jsx("button",{onClick:()=>i(_.id),disabled:O||_.attended,className:`w-full sm:w-auto text-sm px-4 py-2 rounded-lg transition border font-medium
                                            ${O||_.attended?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 cursor-not-allowed":"text-red-600 dark:text-red-400 hover:text-white hover:bg-red-600 dark:hover:bg-red-500 border-red-200 dark:border-red-900/30"}`,children:O?"Concludo":_.attended?"Presena Confirmada":E.isTeamEvent?"Sair da Equipe":"Cancelar Inscrio"})]})]},_.id)})})}),d.jsx(Vp,{isOpen:!!s,onClose:()=>i(null),onConfirm:y,title:"Cancelar Inscrio",message:"Tem certeza que deseja cancelar sua inscrio neste evento? Se for um evento de equipe, voc sair do grupo e a vaga poder ser perdida.",confirmText:"Sim, Cancelar",cancelText:"Manter Inscrio",isProcessing:l}),d.jsx(vs,{isOpen:!!h,onClose:()=>f(null),title:"Seu Ticket de Entrada",children:h&&d.jsxs("div",{className:"flex flex-col items-center justify-center p-4 space-y-6",children:[d.jsx("div",{className:`p-4 bg-white rounded-xl shadow-lg border-2 ${h.attended?"border-green-500":"border-gray-900"}`,children:d.jsx(c4,{value:h.enrollmentId,size:200})}),d.jsxs("div",{className:"text-center space-y-1",children:[h.attended?d.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-bold uppercase mb-2",children:" Check-in Realizado"}):d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Apresente este cdigo na entrada"}),d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:h.event.name}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[pn(h.sessionDate),"  ",h.sessionTime]}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.event.location})]}),d.jsxs("div",{className:"w-full border-t border-gray-200 dark:border-gray-700 pt-4 text-center",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h.user.name}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["RM: ",h.user.rm||"-"]}),d.jsx("p",{className:"text-[10px] text-gray-400 mt-2 font-mono",children:h.enrollmentId})]})]})})]})},d4=Bt.lazy(()=>to(()=>import("./AdminEvents-DMlkU6kA.js"),[]).then(t=>({default:t.AdminEvents}))),h4=Bt.lazy(()=>to(()=>import("./AdminUsers-DlaapxHR.js"),[]).then(t=>({default:t.AdminUsers}))),f4=Bt.lazy(()=>to(()=>import("./AdminCourses-2aXE582p.js"),[]).then(t=>({default:t.AdminCourses}))),m4=Bt.lazy(()=>to(()=>import("./AdminEventEnrollments-PCC27me0.js"),[]).then(t=>({default:t.AdminEventEnrollments}))),p4=Bt.lazy(()=>to(()=>import("./AdminScanner-DvEgq29Z.js"),[]).then(t=>({default:t.AdminScanner}))),g4=Bt.lazy(()=>to(()=>import("./DevTools-Bn6wCkn6.js"),[]).then(t=>({default:t.DevTools}))),y4=()=>d.jsx("div",{className:"h-full w-full flex items-center justify-center p-10",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),En=({children:t,roleRequired:e})=>{const{user:n,loading:r}=ur(),s=cr();return r?d.jsx("div",{className:"h-screen flex items-center justify-center text-primary font-medium dark:bg-darkbg dark:text-gray-200",children:"Carregando EduEvent..."}):n?!n.isOnboarded&&window.location.hash!=="#/complete-profile"?d.jsx(rc,{to:"/complete-profile"}):e&&n.role!==e?d.jsx(rc,{to:"/dashboard"}):d.jsx(d.Fragment,{children:t}):d.jsx(rc,{to:"/login",state:{from:s},replace:!0})},v4=()=>{const{user:t}=ur();return d.jsx(j.Suspense,{fallback:d.jsx(y4,{}),children:d.jsxs(O1,{children:[d.jsx(Pt,{path:"/",element:t?d.jsx(rc,{to:"/dashboard"}):d.jsx(WD,{})}),d.jsx(Pt,{path:"/special/:id",element:d.jsx(HD,{})}),d.jsx(Pt,{path:"/login",element:d.jsx(jD,{})}),d.jsx(Pt,{path:"/complete-profile",element:d.jsx(En,{children:d.jsx(DD,{})})}),d.jsx(Pt,{path:"/dashboard",element:d.jsx(En,{children:d.jsx(Un,{children:d.jsx(qD,{})})})}),d.jsx(Pt,{path:"/event/:id",element:d.jsx(En,{children:d.jsx(Un,{children:d.jsx(QD,{})})})}),d.jsx(Pt,{path:"/my-enrollments",element:d.jsx(En,{children:d.jsx(Un,{children:d.jsx(u4,{})})})}),d.jsx(Pt,{path:"/admin/events",element:d.jsx(En,{roleRequired:Ye.ADMIN,children:d.jsx(Un,{children:d.jsx(d4,{})})})}),d.jsx(Pt,{path:"/admin/events/:id/enrollments",element:d.jsx(En,{roleRequired:Ye.ADMIN,children:d.jsx(Un,{children:d.jsx(m4,{})})})}),d.jsx(Pt,{path:"/admin/courses",element:d.jsx(En,{roleRequired:Ye.ADMIN,children:d.jsx(Un,{children:d.jsx(f4,{})})})}),d.jsx(Pt,{path:"/admin/users",element:d.jsx(En,{roleRequired:Ye.ADMIN,children:d.jsx(Un,{children:d.jsx(h4,{})})})}),d.jsx(Pt,{path:"/admin/scanner",element:d.jsx(En,{roleRequired:Ye.ADMIN,children:d.jsx(Un,{children:d.jsx(p4,{})})})}),d.jsx(Pt,{path:"/admin/dev",element:d.jsx(En,{roleRequired:Ye.ADMIN,children:d.jsx(Un,{children:d.jsx(g4,{})})})})]})})};function w4(){return d.jsx(ND,{children:d.jsx(AD,{children:d.jsx(CD,{children:d.jsx(z1,{children:d.jsx(v4,{})})})})})}const BI=document.getElementById("root");if(!BI)throw new Error("Could not find root element to mount to");const _4=oh.createRoot(BI);_4.render(d.jsx(Bt.StrictMode,{children:d.jsx(w4,{})}));export{Vp as C,LI as E,Ar as L,vs as M,Bt as R,FD as S,Ye as U,LD as a,ur as b,Xr as c,b4 as d,N4 as e,pn as f,iu as g,x4 as h,E4 as i,d as j,mT as k,q_ as l,ve as m,j as r,ie as s,uo as u};
